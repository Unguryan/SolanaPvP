import{j as u,A as $n,m as ye,u as US,a as HS,b as PS}from"./motion-Cm4oeYSP.js";import{r as D,R as ve,u as ka,a as Pf,b as Gf,L as wf,O as GS,N as $S,c as $f,B as VS,d as FS,e as Pn}from"./router-CiO_RyxF.js";import{r as WS,a as qS,g as mc,b as YS}from"./vendor-Dcsd2E38.js";import{b as hn,u as fs,r as XS,i as ZS,a as QS,P as Ze,B as sn,S as Sf,c as Kr,T as KS,d as Xl,e as JS,C as Vf,L as ra,f as eN,W as ia,g as tN,h as d0,j as nN,s as aN,k as sN,l as iN,m as rN,n as oN,o as kl,p as lN,q as cN,t as uN,v as f0,w as dN,x as fN,y as mN,z as hN,A as gN}from"./wallet-DxY_gA22.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))o(l);new MutationObserver(l=>{for(const r of l)if(r.type==="childList")for(const d of r.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&o(d)}).observe(document,{childList:!0,subtree:!0});function a(l){const r={};return l.integrity&&(r.integrity=l.integrity),l.referrerPolicy&&(r.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?r.credentials="include":l.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(l){if(l.ep)return;l.ep=!0;const r=a(l);fetch(l.href,r)}})();var Vd={exports:{}},$r={},Fd={exports:{}},Wd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m0;function pN(){return m0||(m0=1,(function(s){function t($,Z){var Q=$.length;$.push(Z);e:for(;0<Q;){var F=Q-1>>>1,T=$[F];if(0<l(T,Z))$[F]=Z,$[Q]=T,Q=F;else break e}}function a($){return $.length===0?null:$[0]}function o($){if($.length===0)return null;var Z=$[0],Q=$.pop();if(Q!==Z){$[0]=Q;e:for(var F=0,T=$.length,O=T>>>1;F<O;){var G=2*(F+1)-1,W=$[G],Y=G+1,ee=$[Y];if(0>l(W,Q))Y<T&&0>l(ee,W)?($[F]=ee,$[Y]=Q,F=Y):($[F]=W,$[G]=Q,F=G);else if(Y<T&&0>l(ee,Q))$[F]=ee,$[Y]=Q,F=Y;else break e}}return Z}function l($,Z){var Q=$.sortIndex-Z.sortIndex;return Q!==0?Q:$.id-Z.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;s.unstable_now=function(){return r.now()}}else{var d=Date,f=d.now();s.unstable_now=function(){return d.now()-f}}var g=[],h=[],m=1,w=null,x=3,p=!1,v=!1,b=!1,N=!1,_=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function k($){for(var Z=a(h);Z!==null;){if(Z.callback===null)o(h);else if(Z.startTime<=$)o(h),Z.sortIndex=Z.expirationTime,t(g,Z);else break;Z=a(h)}}function R($){if(b=!1,k($),!v)if(a(g)!==null)v=!0,j||(j=!0,U());else{var Z=a(h);Z!==null&&V(R,Z.startTime-$)}}var j=!1,B=-1,M=5,I=-1;function L(){return N?!0:!(s.unstable_now()-I<M)}function P(){if(N=!1,j){var $=s.unstable_now();I=$;var Z=!0;try{e:{v=!1,b&&(b=!1,A(B),B=-1),p=!0;var Q=x;try{t:{for(k($),w=a(g);w!==null&&!(w.expirationTime>$&&L());){var F=w.callback;if(typeof F=="function"){w.callback=null,x=w.priorityLevel;var T=F(w.expirationTime<=$);if($=s.unstable_now(),typeof T=="function"){w.callback=T,k($),Z=!0;break t}w===a(g)&&o(g),k($)}else o(g);w=a(g)}if(w!==null)Z=!0;else{var O=a(h);O!==null&&V(R,O.startTime-$),Z=!1}}break e}finally{w=null,x=Q,p=!1}Z=void 0}}finally{Z?U():j=!1}}}var U;if(typeof C=="function")U=function(){C(P)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,H=q.port2;q.port1.onmessage=P,U=function(){H.postMessage(null)}}else U=function(){_(P,0)};function V($,Z){B=_(function(){$(s.unstable_now())},Z)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function($){$.callback=null},s.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<$?Math.floor(1e3/$):5},s.unstable_getCurrentPriorityLevel=function(){return x},s.unstable_next=function($){switch(x){case 1:case 2:case 3:var Z=3;break;default:Z=x}var Q=x;x=Z;try{return $()}finally{x=Q}},s.unstable_requestPaint=function(){N=!0},s.unstable_runWithPriority=function($,Z){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var Q=x;x=$;try{return Z()}finally{x=Q}},s.unstable_scheduleCallback=function($,Z,Q){var F=s.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?F+Q:F):Q=F,$){case 1:var T=-1;break;case 2:T=250;break;case 5:T=1073741823;break;case 4:T=1e4;break;default:T=5e3}return T=Q+T,$={id:m++,callback:Z,priorityLevel:$,startTime:Q,expirationTime:T,sortIndex:-1},Q>F?($.sortIndex=Q,t(h,$),a(g)===null&&$===a(h)&&(b?(A(B),B=-1):b=!0,V(R,Q-F))):($.sortIndex=T,t(g,$),v||p||(v=!0,j||(j=!0,U()))),$},s.unstable_shouldYield=L,s.unstable_wrapCallback=function($){var Z=x;return function(){var Q=x;x=Z;try{return $.apply(this,arguments)}finally{x=Q}}}})(Wd)),Wd}var h0;function xN(){return h0||(h0=1,Fd.exports=pN()),Fd.exports}var g0;function yN(){if(g0)return $r;g0=1;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s=xN(),t=WS(),a=qS();function o(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)n+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function r(e){var n=e,i=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(i=n.return),e=n.return;while(e)}return n.tag===3?i:null}function d(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function f(e){if(e.tag===31){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function g(e){if(r(e)!==e)throw Error(o(188))}function h(e){var n=e.alternate;if(!n){if(n=r(e),n===null)throw Error(o(188));return n!==e?null:e}for(var i=e,c=n;;){var y=i.return;if(y===null)break;var S=y.alternate;if(S===null){if(c=y.return,c!==null){i=c;continue}break}if(y.child===S.child){for(S=y.child;S;){if(S===i)return g(y),e;if(S===c)return g(y),n;S=S.sibling}throw Error(o(188))}if(i.return!==c.return)i=y,c=S;else{for(var E=!1,z=y.child;z;){if(z===i){E=!0,i=y,c=S;break}if(z===c){E=!0,c=y,i=S;break}z=z.sibling}if(!E){for(z=S.child;z;){if(z===i){E=!0,i=S,c=y;break}if(z===c){E=!0,c=S,i=y;break}z=z.sibling}if(!E)throw Error(o(189))}}if(i.alternate!==c)throw Error(o(190))}if(i.tag!==3)throw Error(o(188));return i.stateNode.current===i?e:n}function m(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=m(e),n!==null)return n;e=e.sibling}return null}var w=Object.assign,x=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),v=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),A=Symbol.for("react.consumer"),C=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),B=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function U(e){return e===null||typeof e!="object"?null:(e=P&&e[P]||e["@@iterator"],typeof e=="function"?e:null)}var q=Symbol.for("react.client.reference");function H(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===q?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case b:return"Fragment";case _:return"Profiler";case N:return"StrictMode";case R:return"Suspense";case j:return"SuspenseList";case I:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case v:return"Portal";case C:return e.displayName||"Context";case A:return(e._context.displayName||"Context")+".Consumer";case k:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case B:return n=e.displayName||null,n!==null?n:H(e.type)||"Memo";case M:n=e._payload,e=e._init;try{return H(e(n))}catch{}}return null}var V=Array.isArray,$=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q={pending:!1,data:null,method:null,action:null},F=[],T=-1;function O(e){return{current:e}}function G(e){0>T||(e.current=F[T],F[T]=null,T--)}function W(e,n){T++,F[T]=e.current,e.current=n}var Y=O(null),ee=O(null),de=O(null),re=O(null);function ie(e,n){switch(W(de,n),W(ee,e),W(Y,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?Dp(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=Dp(n),e=Bp(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}G(Y),W(Y,e)}function be(){G(Y),G(ee),G(de)}function fe(e){e.memoizedState!==null&&W(re,e);var n=Y.current,i=Bp(n,e.type);n!==i&&(W(ee,e),W(Y,i))}function J(e){ee.current===e&&(G(Y),G(ee)),re.current===e&&(G(re),Ur._currentValue=Q)}var le,je;function Ne(e){if(le===void 0)try{throw Error()}catch(i){var n=i.stack.trim().match(/\n( *(at )?)/);le=n&&n[1]||"",je=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+le+e+je}var Ce=!1;function Ue(e,n){if(!e||Ce)return"";Ce=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(n){var pe=function(){throw Error()};if(Object.defineProperty(pe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(pe,[])}catch(ue){var oe=ue}Reflect.construct(e,[],pe)}else{try{pe.call()}catch(ue){oe=ue}e.call(pe.prototype)}}else{try{throw Error()}catch(ue){oe=ue}(pe=e())&&typeof pe.catch=="function"&&pe.catch(function(){})}}catch(ue){if(ue&&oe&&typeof ue.stack=="string")return[ue.stack,oe.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var S=c.DetermineComponentFrameRoot(),E=S[0],z=S[1];if(E&&z){var X=E.split(`
`),ae=z.split(`
`);for(y=c=0;c<X.length&&!X[c].includes("DetermineComponentFrameRoot");)c++;for(;y<ae.length&&!ae[y].includes("DetermineComponentFrameRoot");)y++;if(c===X.length||y===ae.length)for(c=X.length-1,y=ae.length-1;1<=c&&0<=y&&X[c]!==ae[y];)y--;for(;1<=c&&0<=y;c--,y--)if(X[c]!==ae[y]){if(c!==1||y!==1)do if(c--,y--,0>y||X[c]!==ae[y]){var me=`
`+X[c].replace(" at new "," at ");return e.displayName&&me.includes("<anonymous>")&&(me=me.replace("<anonymous>",e.displayName)),me}while(1<=c&&0<=y);break}}}finally{Ce=!1,Error.prepareStackTrace=i}return(i=e?e.displayName||e.name:"")?Ne(i):""}function $e(e,n){switch(e.tag){case 26:case 27:case 5:return Ne(e.type);case 16:return Ne("Lazy");case 13:return e.child!==n&&n!==null?Ne("Suspense Fallback"):Ne("Suspense");case 19:return Ne("SuspenseList");case 0:case 15:return Ue(e.type,!1);case 11:return Ue(e.type.render,!1);case 1:return Ue(e.type,!0);case 31:return Ne("Activity");default:return""}}function Oe(e){try{var n="",i=null;do n+=$e(e,i),i=e,e=e.return;while(e);return n}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var Be=Object.prototype.hasOwnProperty,ke=s.unstable_scheduleCallback,lt=s.unstable_cancelCallback,it=s.unstable_shouldYield,tt=s.unstable_requestPaint,Ye=s.unstable_now,yn=s.unstable_getCurrentPriorityLevel,xt=s.unstable_ImmediatePriority,vn=s.unstable_UserBlockingPriority,rn=s.unstable_NormalPriority,Wn=s.unstable_LowPriority,ca=s.unstable_IdlePriority,Oc=s.log,xe=s.unstable_setDisableYieldValue,_e=null,He=null;function Ie(e){if(typeof Oc=="function"&&xe(e),He&&typeof He.setStrictMode=="function")try{He.setStrictMode(_e,e)}catch{}}var Pe=Math.clz32?Math.clz32:Qi,ft=Math.log,bt=Math.LN2;function Qi(e){return e>>>=0,e===0?32:31-(ft(e)/bt|0)|0}var Da=256,Xs=262144,vo=4194304;function hs(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function bo(e,n,i){var c=e.pendingLanes;if(c===0)return 0;var y=0,S=e.suspendedLanes,E=e.pingedLanes;e=e.warmLanes;var z=c&134217727;return z!==0?(c=z&~S,c!==0?y=hs(c):(E&=z,E!==0?y=hs(E):i||(i=z&~e,i!==0&&(y=hs(i))))):(z=c&~S,z!==0?y=hs(z):E!==0?y=hs(E):i||(i=c&~e,i!==0&&(y=hs(i)))),y===0?0:n!==0&&n!==y&&(n&S)===0&&(S=y&-y,i=n&-n,S>=i||S===32&&(i&4194048)!==0)?n:y}function Ki(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function Eb(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gm(){var e=vo;return vo<<=1,(vo&62914560)===0&&(vo=4194304),e}function jc(e){for(var n=[],i=0;31>i;i++)n.push(e);return n}function Ji(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Tb(e,n,i,c,y,S){var E=e.pendingLanes;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=i,e.entangledLanes&=i,e.errorRecoveryDisabledLanes&=i,e.shellSuspendCounter=0;var z=e.entanglements,X=e.expirationTimes,ae=e.hiddenUpdates;for(i=E&~i;0<i;){var me=31-Pe(i),pe=1<<me;z[me]=0,X[me]=-1;var oe=ae[me];if(oe!==null)for(ae[me]=null,me=0;me<oe.length;me++){var ue=oe[me];ue!==null&&(ue.lane&=-536870913)}i&=~pe}c!==0&&pm(e,c,0),S!==0&&y===0&&e.tag!==0&&(e.suspendedLanes|=S&~(E&~n))}function pm(e,n,i){e.pendingLanes|=n,e.suspendedLanes&=~n;var c=31-Pe(n);e.entangledLanes|=n,e.entanglements[c]=e.entanglements[c]|1073741824|i&261930}function xm(e,n){var i=e.entangledLanes|=n;for(e=e.entanglements;i;){var c=31-Pe(i),y=1<<c;y&n|e[c]&n&&(e[c]|=n),i&=~y}}function ym(e,n){var i=n&-n;return i=(i&42)!==0?1:kc(i),(i&(e.suspendedLanes|n))!==0?0:i}function kc(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Dc(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function vm(){var e=Z.p;return e!==0?e:(e=window.event,e===void 0?32:s0(e.type))}function bm(e,n){var i=Z.p;try{return Z.p=e,n()}finally{Z.p=i}}var Ba=Math.random().toString(36).slice(2),Xt="__reactFiber$"+Ba,on="__reactProps$"+Ba,Zs="__reactContainer$"+Ba,Bc="__reactEvents$"+Ba,Ab="__reactListeners$"+Ba,Cb="__reactHandles$"+Ba,wm="__reactResources$"+Ba,er="__reactMarker$"+Ba;function Ic(e){delete e[Xt],delete e[on],delete e[Bc],delete e[Ab],delete e[Cb]}function Qs(e){var n=e[Xt];if(n)return n;for(var i=e.parentNode;i;){if(n=i[Zs]||i[Xt]){if(i=n.alternate,n.child!==null||i!==null&&i.child!==null)for(e=Gp(e);e!==null;){if(i=e[Xt])return i;e=Gp(e)}return n}e=i,i=e.parentNode}return null}function Ks(e){if(e=e[Xt]||e[Zs]){var n=e.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return e}return null}function tr(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(o(33))}function Js(e){var n=e[wm];return n||(n=e[wm]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function qt(e){e[er]=!0}var Sm=new Set,Nm={};function gs(e,n){ei(e,n),ei(e+"Capture",n)}function ei(e,n){for(Nm[e]=n,e=0;e<n.length;e++)Sm.add(n[e])}var Mb=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),_m={},Rm={};function Ob(e){return Be.call(Rm,e)?!0:Be.call(_m,e)?!1:Mb.test(e)?Rm[e]=!0:(_m[e]=!0,!1)}function wo(e,n,i){if(Ob(n))if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var c=n.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+i)}}function So(e,n,i){if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+i)}}function ua(e,n,i,c){if(c===null)e.removeAttribute(i);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttributeNS(n,i,""+c)}}function On(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Em(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function jb(e,n,i){var c=Object.getOwnPropertyDescriptor(e.constructor.prototype,n);if(!e.hasOwnProperty(n)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var y=c.get,S=c.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return y.call(this)},set:function(E){i=""+E,S.call(this,E)}}),Object.defineProperty(e,n,{enumerable:c.enumerable}),{getValue:function(){return i},setValue:function(E){i=""+E},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function Lc(e){if(!e._valueTracker){var n=Em(e)?"checked":"value";e._valueTracker=jb(e,n,""+e[n])}}function Tm(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var i=n.getValue(),c="";return e&&(c=Em(e)?e.checked?"true":"false":e.value),e=c,e!==i?(n.setValue(e),!0):!1}function No(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var kb=/[\n"\\]/g;function jn(e){return e.replace(kb,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function zc(e,n,i,c,y,S,E,z){e.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?e.type=E:e.removeAttribute("type"),n!=null?E==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+On(n)):e.value!==""+On(n)&&(e.value=""+On(n)):E!=="submit"&&E!=="reset"||e.removeAttribute("value"),n!=null?Uc(e,E,On(n)):i!=null?Uc(e,E,On(i)):c!=null&&e.removeAttribute("value"),y==null&&S!=null&&(e.defaultChecked=!!S),y!=null&&(e.checked=y&&typeof y!="function"&&typeof y!="symbol"),z!=null&&typeof z!="function"&&typeof z!="symbol"&&typeof z!="boolean"?e.name=""+On(z):e.removeAttribute("name")}function Am(e,n,i,c,y,S,E,z){if(S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(e.type=S),n!=null||i!=null){if(!(S!=="submit"&&S!=="reset"||n!=null)){Lc(e);return}i=i!=null?""+On(i):"",n=n!=null?""+On(n):i,z||n===e.value||(e.value=n),e.defaultValue=n}c=c??y,c=typeof c!="function"&&typeof c!="symbol"&&!!c,e.checked=z?e.checked:!!c,e.defaultChecked=!!c,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(e.name=E),Lc(e)}function Uc(e,n,i){n==="number"&&No(e.ownerDocument)===e||e.defaultValue===""+i||(e.defaultValue=""+i)}function ti(e,n,i,c){if(e=e.options,n){n={};for(var y=0;y<i.length;y++)n["$"+i[y]]=!0;for(i=0;i<e.length;i++)y=n.hasOwnProperty("$"+e[i].value),e[i].selected!==y&&(e[i].selected=y),y&&c&&(e[i].defaultSelected=!0)}else{for(i=""+On(i),n=null,y=0;y<e.length;y++){if(e[y].value===i){e[y].selected=!0,c&&(e[y].defaultSelected=!0);return}n!==null||e[y].disabled||(n=e[y])}n!==null&&(n.selected=!0)}}function Cm(e,n,i){if(n!=null&&(n=""+On(n),n!==e.value&&(e.value=n),i==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=i!=null?""+On(i):""}function Mm(e,n,i,c){if(n==null){if(c!=null){if(i!=null)throw Error(o(92));if(V(c)){if(1<c.length)throw Error(o(93));c=c[0]}i=c}i==null&&(i=""),n=i}i=On(n),e.defaultValue=i,c=e.textContent,c===i&&c!==""&&c!==null&&(e.value=c),Lc(e)}function ni(e,n){if(n){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=n;return}}e.textContent=n}var Db=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Om(e,n,i){var c=n.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?c?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":c?e.setProperty(n,i):typeof i!="number"||i===0||Db.has(n)?n==="float"?e.cssFloat=i:e[n]=(""+i).trim():e[n]=i+"px"}function jm(e,n,i){if(n!=null&&typeof n!="object")throw Error(o(62));if(e=e.style,i!=null){for(var c in i)!i.hasOwnProperty(c)||n!=null&&n.hasOwnProperty(c)||(c.indexOf("--")===0?e.setProperty(c,""):c==="float"?e.cssFloat="":e[c]="");for(var y in n)c=n[y],n.hasOwnProperty(y)&&i[y]!==c&&Om(e,y,c)}else for(var S in n)n.hasOwnProperty(S)&&Om(e,S,n[S])}function Hc(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Bb=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ib=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function _o(e){return Ib.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function da(){}var Pc=null;function Gc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ai=null,si=null;function km(e){var n=Ks(e);if(n&&(e=n.stateNode)){var i=e[on]||null;e:switch(e=n.stateNode,n.type){case"input":if(zc(e,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),n=i.name,i.type==="radio"&&n!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+jn(""+n)+'"][type="radio"]'),n=0;n<i.length;n++){var c=i[n];if(c!==e&&c.form===e.form){var y=c[on]||null;if(!y)throw Error(o(90));zc(c,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(n=0;n<i.length;n++)c=i[n],c.form===e.form&&Tm(c)}break e;case"textarea":Cm(e,i.value,i.defaultValue);break e;case"select":n=i.value,n!=null&&ti(e,!!i.multiple,n,!1)}}}var $c=!1;function Dm(e,n,i){if($c)return e(n,i);$c=!0;try{var c=e(n);return c}finally{if($c=!1,(ai!==null||si!==null)&&(dl(),ai&&(n=ai,e=si,si=ai=null,km(n),e)))for(n=0;n<e.length;n++)km(e[n])}}function nr(e,n){var i=e.stateNode;if(i===null)return null;var c=i[on]||null;if(c===null)return null;i=c[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(e=e.type,c=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!c;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(o(231,n,typeof i));return i}var fa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Vc=!1;if(fa)try{var ar={};Object.defineProperty(ar,"passive",{get:function(){Vc=!0}}),window.addEventListener("test",ar,ar),window.removeEventListener("test",ar,ar)}catch{Vc=!1}var Ia=null,Fc=null,Ro=null;function Bm(){if(Ro)return Ro;var e,n=Fc,i=n.length,c,y="value"in Ia?Ia.value:Ia.textContent,S=y.length;for(e=0;e<i&&n[e]===y[e];e++);var E=i-e;for(c=1;c<=E&&n[i-c]===y[S-c];c++);return Ro=y.slice(e,1<c?1-c:void 0)}function Eo(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function To(){return!0}function Im(){return!1}function ln(e){function n(i,c,y,S,E){this._reactName=i,this._targetInst=y,this.type=c,this.nativeEvent=S,this.target=E,this.currentTarget=null;for(var z in e)e.hasOwnProperty(z)&&(i=e[z],this[z]=i?i(S):S[z]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?To:Im,this.isPropagationStopped=Im,this}return w(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=To)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=To)},persist:function(){},isPersistent:To}),n}var ps={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ao=ln(ps),sr=w({},ps,{view:0,detail:0}),Lb=ln(sr),Wc,qc,ir,Co=w({},sr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ir&&(ir&&e.type==="mousemove"?(Wc=e.screenX-ir.screenX,qc=e.screenY-ir.screenY):qc=Wc=0,ir=e),Wc)},movementY:function(e){return"movementY"in e?e.movementY:qc}}),Lm=ln(Co),zb=w({},Co,{dataTransfer:0}),Ub=ln(zb),Hb=w({},sr,{relatedTarget:0}),Yc=ln(Hb),Pb=w({},ps,{animationName:0,elapsedTime:0,pseudoElement:0}),Gb=ln(Pb),$b=w({},ps,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Vb=ln($b),Fb=w({},ps,{data:0}),zm=ln(Fb),Wb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qb={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Yb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Xb(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=Yb[e])?!!n[e]:!1}function Xc(){return Xb}var Zb=w({},sr,{key:function(e){if(e.key){var n=Wb[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=Eo(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?qb[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xc,charCode:function(e){return e.type==="keypress"?Eo(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Eo(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Qb=ln(Zb),Kb=w({},Co,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Um=ln(Kb),Jb=w({},sr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xc}),ew=ln(Jb),tw=w({},ps,{propertyName:0,elapsedTime:0,pseudoElement:0}),nw=ln(tw),aw=w({},Co,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),sw=ln(aw),iw=w({},ps,{newState:0,oldState:0}),rw=ln(iw),ow=[9,13,27,32],Zc=fa&&"CompositionEvent"in window,rr=null;fa&&"documentMode"in document&&(rr=document.documentMode);var lw=fa&&"TextEvent"in window&&!rr,Hm=fa&&(!Zc||rr&&8<rr&&11>=rr),Pm=" ",Gm=!1;function $m(e,n){switch(e){case"keyup":return ow.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vm(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ii=!1;function cw(e,n){switch(e){case"compositionend":return Vm(n);case"keypress":return n.which!==32?null:(Gm=!0,Pm);case"textInput":return e=n.data,e===Pm&&Gm?null:e;default:return null}}function uw(e,n){if(ii)return e==="compositionend"||!Zc&&$m(e,n)?(e=Bm(),Ro=Fc=Ia=null,ii=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Hm&&n.locale!=="ko"?null:n.data;default:return null}}var dw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fm(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!dw[e.type]:n==="textarea"}function Wm(e,n,i,c){ai?si?si.push(c):si=[c]:ai=c,n=yl(n,"onChange"),0<n.length&&(i=new Ao("onChange","change",null,i,c),e.push({event:i,listeners:n}))}var or=null,lr=null;function fw(e){Ap(e,0)}function Mo(e){var n=tr(e);if(Tm(n))return e}function qm(e,n){if(e==="change")return n}var Ym=!1;if(fa){var Qc;if(fa){var Kc="oninput"in document;if(!Kc){var Xm=document.createElement("div");Xm.setAttribute("oninput","return;"),Kc=typeof Xm.oninput=="function"}Qc=Kc}else Qc=!1;Ym=Qc&&(!document.documentMode||9<document.documentMode)}function Zm(){or&&(or.detachEvent("onpropertychange",Qm),lr=or=null)}function Qm(e){if(e.propertyName==="value"&&Mo(lr)){var n=[];Wm(n,lr,e,Gc(e)),Dm(fw,n)}}function mw(e,n,i){e==="focusin"?(Zm(),or=n,lr=i,or.attachEvent("onpropertychange",Qm)):e==="focusout"&&Zm()}function hw(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Mo(lr)}function gw(e,n){if(e==="click")return Mo(n)}function pw(e,n){if(e==="input"||e==="change")return Mo(n)}function xw(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var bn=typeof Object.is=="function"?Object.is:xw;function cr(e,n){if(bn(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var i=Object.keys(e),c=Object.keys(n);if(i.length!==c.length)return!1;for(c=0;c<i.length;c++){var y=i[c];if(!Be.call(n,y)||!bn(e[y],n[y]))return!1}return!0}function Km(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Jm(e,n){var i=Km(e);e=0;for(var c;i;){if(i.nodeType===3){if(c=e+i.textContent.length,e<=n&&c>=n)return{node:i,offset:n-e};e=c}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=Km(i)}}function eh(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?eh(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function th(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=No(e.document);n instanceof e.HTMLIFrameElement;){try{var i=typeof n.contentWindow.location.href=="string"}catch{i=!1}if(i)e=n.contentWindow;else break;n=No(e.document)}return n}function Jc(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var yw=fa&&"documentMode"in document&&11>=document.documentMode,ri=null,eu=null,ur=null,tu=!1;function nh(e,n,i){var c=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;tu||ri==null||ri!==No(c)||(c=ri,"selectionStart"in c&&Jc(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),ur&&cr(ur,c)||(ur=c,c=yl(eu,"onSelect"),0<c.length&&(n=new Ao("onSelect","select",null,n,i),e.push({event:n,listeners:c}),n.target=ri)))}function xs(e,n){var i={};return i[e.toLowerCase()]=n.toLowerCase(),i["Webkit"+e]="webkit"+n,i["Moz"+e]="moz"+n,i}var oi={animationend:xs("Animation","AnimationEnd"),animationiteration:xs("Animation","AnimationIteration"),animationstart:xs("Animation","AnimationStart"),transitionrun:xs("Transition","TransitionRun"),transitionstart:xs("Transition","TransitionStart"),transitioncancel:xs("Transition","TransitionCancel"),transitionend:xs("Transition","TransitionEnd")},nu={},ah={};fa&&(ah=document.createElement("div").style,"AnimationEvent"in window||(delete oi.animationend.animation,delete oi.animationiteration.animation,delete oi.animationstart.animation),"TransitionEvent"in window||delete oi.transitionend.transition);function ys(e){if(nu[e])return nu[e];if(!oi[e])return e;var n=oi[e],i;for(i in n)if(n.hasOwnProperty(i)&&i in ah)return nu[e]=n[i];return e}var sh=ys("animationend"),ih=ys("animationiteration"),rh=ys("animationstart"),vw=ys("transitionrun"),bw=ys("transitionstart"),ww=ys("transitioncancel"),oh=ys("transitionend"),lh=new Map,au="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");au.push("scrollEnd");function qn(e,n){lh.set(e,n),gs(n,[e])}var Oo=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},kn=[],li=0,su=0;function jo(){for(var e=li,n=su=li=0;n<e;){var i=kn[n];kn[n++]=null;var c=kn[n];kn[n++]=null;var y=kn[n];kn[n++]=null;var S=kn[n];if(kn[n++]=null,c!==null&&y!==null){var E=c.pending;E===null?y.next=y:(y.next=E.next,E.next=y),c.pending=y}S!==0&&ch(i,y,S)}}function ko(e,n,i,c){kn[li++]=e,kn[li++]=n,kn[li++]=i,kn[li++]=c,su|=c,e.lanes|=c,e=e.alternate,e!==null&&(e.lanes|=c)}function iu(e,n,i,c){return ko(e,n,i,c),Do(e)}function vs(e,n){return ko(e,null,null,n),Do(e)}function ch(e,n,i){e.lanes|=i;var c=e.alternate;c!==null&&(c.lanes|=i);for(var y=!1,S=e.return;S!==null;)S.childLanes|=i,c=S.alternate,c!==null&&(c.childLanes|=i),S.tag===22&&(e=S.stateNode,e===null||e._visibility&1||(y=!0)),e=S,S=S.return;return e.tag===3?(S=e.stateNode,y&&n!==null&&(y=31-Pe(i),e=S.hiddenUpdates,c=e[y],c===null?e[y]=[n]:c.push(n),n.lane=i|536870912),S):null}function Do(e){if(50<jr)throw jr=0,hd=null,Error(o(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var ci={};function Sw(e,n,i,c){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wn(e,n,i,c){return new Sw(e,n,i,c)}function ru(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ma(e,n){var i=e.alternate;return i===null?(i=wn(e.tag,n,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=n,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&65011712,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,n=e.dependencies,i.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i.refCleanup=e.refCleanup,i}function uh(e,n){e.flags&=65011714;var i=e.alternate;return i===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=i.childLanes,e.lanes=i.lanes,e.child=i.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=i.memoizedProps,e.memoizedState=i.memoizedState,e.updateQueue=i.updateQueue,e.type=i.type,n=i.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function Bo(e,n,i,c,y,S){var E=0;if(c=e,typeof e=="function")ru(e)&&(E=1);else if(typeof e=="string")E=TS(e,i,Y.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case I:return e=wn(31,i,n,y),e.elementType=I,e.lanes=S,e;case b:return bs(i.children,y,S,n);case N:E=8,y|=24;break;case _:return e=wn(12,i,n,y|2),e.elementType=_,e.lanes=S,e;case R:return e=wn(13,i,n,y),e.elementType=R,e.lanes=S,e;case j:return e=wn(19,i,n,y),e.elementType=j,e.lanes=S,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case C:E=10;break e;case A:E=9;break e;case k:E=11;break e;case B:E=14;break e;case M:E=16,c=null;break e}E=29,i=Error(o(130,e===null?"null":typeof e,"")),c=null}return n=wn(E,i,n,y),n.elementType=e,n.type=c,n.lanes=S,n}function bs(e,n,i,c){return e=wn(7,e,c,n),e.lanes=i,e}function ou(e,n,i){return e=wn(6,e,null,n),e.lanes=i,e}function dh(e){var n=wn(18,null,null,0);return n.stateNode=e,n}function lu(e,n,i){return n=wn(4,e.children!==null?e.children:[],e.key,n),n.lanes=i,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var fh=new WeakMap;function Dn(e,n){if(typeof e=="object"&&e!==null){var i=fh.get(e);return i!==void 0?i:(n={value:e,source:n,stack:Oe(n)},fh.set(e,n),n)}return{value:e,source:n,stack:Oe(n)}}var ui=[],di=0,Io=null,dr=0,Bn=[],In=0,La=null,Jn=1,ea="";function ha(e,n){ui[di++]=dr,ui[di++]=Io,Io=e,dr=n}function mh(e,n,i){Bn[In++]=Jn,Bn[In++]=ea,Bn[In++]=La,La=e;var c=Jn;e=ea;var y=32-Pe(c)-1;c&=~(1<<y),i+=1;var S=32-Pe(n)+y;if(30<S){var E=y-y%5;S=(c&(1<<E)-1).toString(32),c>>=E,y-=E,Jn=1<<32-Pe(n)+y|i<<y|c,ea=S+e}else Jn=1<<S|i<<y|c,ea=e}function cu(e){e.return!==null&&(ha(e,1),mh(e,1,0))}function uu(e){for(;e===Io;)Io=ui[--di],ui[di]=null,dr=ui[--di],ui[di]=null;for(;e===La;)La=Bn[--In],Bn[In]=null,ea=Bn[--In],Bn[In]=null,Jn=Bn[--In],Bn[In]=null}function hh(e,n){Bn[In++]=Jn,Bn[In++]=ea,Bn[In++]=La,Jn=n.id,ea=n.overflow,La=e}var Zt=null,wt=null,nt=!1,za=null,Ln=!1,du=Error(o(519));function Ua(e){var n=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw fr(Dn(n,e)),du}function gh(e){var n=e.stateNode,i=e.type,c=e.memoizedProps;switch(n[Xt]=e,n[on]=c,i){case"dialog":Ke("cancel",n),Ke("close",n);break;case"iframe":case"object":case"embed":Ke("load",n);break;case"video":case"audio":for(i=0;i<Dr.length;i++)Ke(Dr[i],n);break;case"source":Ke("error",n);break;case"img":case"image":case"link":Ke("error",n),Ke("load",n);break;case"details":Ke("toggle",n);break;case"input":Ke("invalid",n),Am(n,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Ke("invalid",n);break;case"textarea":Ke("invalid",n),Mm(n,c.value,c.defaultValue,c.children)}i=c.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||n.textContent===""+i||c.suppressHydrationWarning===!0||jp(n.textContent,i)?(c.popover!=null&&(Ke("beforetoggle",n),Ke("toggle",n)),c.onScroll!=null&&Ke("scroll",n),c.onScrollEnd!=null&&Ke("scrollend",n),c.onClick!=null&&(n.onclick=da),n=!0):n=!1,n||Ua(e,!0)}function ph(e){for(Zt=e.return;Zt;)switch(Zt.tag){case 5:case 31:case 13:Ln=!1;return;case 27:case 3:Ln=!0;return;default:Zt=Zt.return}}function fi(e){if(e!==Zt)return!1;if(!nt)return ph(e),nt=!0,!1;var n=e.tag,i;if((i=n!==3&&n!==27)&&((i=n===5)&&(i=e.type,i=!(i!=="form"&&i!=="button")||Cd(e.type,e.memoizedProps)),i=!i),i&&wt&&Ua(e),ph(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));wt=Pp(e)}else if(n===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));wt=Pp(e)}else n===27?(n=wt,Ja(e.type)?(e=Dd,Dd=null,wt=e):wt=n):wt=Zt?Un(e.stateNode.nextSibling):null;return!0}function ws(){wt=Zt=null,nt=!1}function fu(){var e=za;return e!==null&&(fn===null?fn=e:fn.push.apply(fn,e),za=null),e}function fr(e){za===null?za=[e]:za.push(e)}var mu=O(null),Ss=null,ga=null;function Ha(e,n,i){W(mu,n._currentValue),n._currentValue=i}function pa(e){e._currentValue=mu.current,G(mu)}function hu(e,n,i){for(;e!==null;){var c=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,c!==null&&(c.childLanes|=n)):c!==null&&(c.childLanes&n)!==n&&(c.childLanes|=n),e===i)break;e=e.return}}function gu(e,n,i,c){var y=e.child;for(y!==null&&(y.return=e);y!==null;){var S=y.dependencies;if(S!==null){var E=y.child;S=S.firstContext;e:for(;S!==null;){var z=S;S=y;for(var X=0;X<n.length;X++)if(z.context===n[X]){S.lanes|=i,z=S.alternate,z!==null&&(z.lanes|=i),hu(S.return,i,e),c||(E=null);break e}S=z.next}}else if(y.tag===18){if(E=y.return,E===null)throw Error(o(341));E.lanes|=i,S=E.alternate,S!==null&&(S.lanes|=i),hu(E,i,e),E=null}else E=y.child;if(E!==null)E.return=y;else for(E=y;E!==null;){if(E===e){E=null;break}if(y=E.sibling,y!==null){y.return=E.return,E=y;break}E=E.return}y=E}}function mi(e,n,i,c){e=null;for(var y=n,S=!1;y!==null;){if(!S){if((y.flags&524288)!==0)S=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var E=y.alternate;if(E===null)throw Error(o(387));if(E=E.memoizedProps,E!==null){var z=y.type;bn(y.pendingProps.value,E.value)||(e!==null?e.push(z):e=[z])}}else if(y===re.current){if(E=y.alternate,E===null)throw Error(o(387));E.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(e!==null?e.push(Ur):e=[Ur])}y=y.return}e!==null&&gu(n,e,i,c),n.flags|=262144}function Lo(e){for(e=e.firstContext;e!==null;){if(!bn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ns(e){Ss=e,ga=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Qt(e){return xh(Ss,e)}function zo(e,n){return Ss===null&&Ns(e),xh(e,n)}function xh(e,n){var i=n._currentValue;if(n={context:n,memoizedValue:i,next:null},ga===null){if(e===null)throw Error(o(308));ga=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else ga=ga.next=n;return i}var Nw=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(i,c){e.push(c)}};this.abort=function(){n.aborted=!0,e.forEach(function(i){return i()})}},_w=s.unstable_scheduleCallback,Rw=s.unstable_NormalPriority,Bt={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function pu(){return{controller:new Nw,data:new Map,refCount:0}}function mr(e){e.refCount--,e.refCount===0&&_w(Rw,function(){e.controller.abort()})}var hr=null,xu=0,hi=0,gi=null;function Ew(e,n){if(hr===null){var i=hr=[];xu=0,hi=bd(),gi={status:"pending",value:void 0,then:function(c){i.push(c)}}}return xu++,n.then(yh,yh),n}function yh(){if(--xu===0&&hr!==null){gi!==null&&(gi.status="fulfilled");var e=hr;hr=null,hi=0,gi=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function Tw(e,n){var i=[],c={status:"pending",value:null,reason:null,then:function(y){i.push(y)}};return e.then(function(){c.status="fulfilled",c.value=n;for(var y=0;y<i.length;y++)(0,i[y])(n)},function(y){for(c.status="rejected",c.reason=y,y=0;y<i.length;y++)(0,i[y])(void 0)}),c}var vh=$.S;$.S=function(e,n){np=Ye(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&Ew(e,n),vh!==null&&vh(e,n)};var _s=O(null);function yu(){var e=_s.current;return e!==null?e:pt.pooledCache}function Uo(e,n){n===null?W(_s,_s.current):W(_s,n.pool)}function bh(){var e=yu();return e===null?null:{parent:Bt._currentValue,pool:e}}var pi=Error(o(460)),vu=Error(o(474)),Ho=Error(o(542)),Po={then:function(){}};function wh(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Sh(e,n,i){switch(i=e[i],i===void 0?e.push(n):i!==n&&(n.then(da,da),n=i),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,_h(e),e;default:if(typeof n.status=="string")n.then(da,da);else{if(e=pt,e!==null&&100<e.shellSuspendCounter)throw Error(o(482));e=n,e.status="pending",e.then(function(c){if(n.status==="pending"){var y=n;y.status="fulfilled",y.value=c}},function(c){if(n.status==="pending"){var y=n;y.status="rejected",y.reason=c}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,_h(e),e}throw Es=n,pi}}function Rs(e){try{var n=e._init;return n(e._payload)}catch(i){throw i!==null&&typeof i=="object"&&typeof i.then=="function"?(Es=i,pi):i}}var Es=null;function Nh(){if(Es===null)throw Error(o(459));var e=Es;return Es=null,e}function _h(e){if(e===pi||e===Ho)throw Error(o(483))}var xi=null,gr=0;function Go(e){var n=gr;return gr+=1,xi===null&&(xi=[]),Sh(xi,e,n)}function pr(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function $o(e,n){throw n.$$typeof===x?Error(o(525)):(e=Object.prototype.toString.call(n),Error(o(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function Rh(e){function n(te,K){if(e){var ne=te.deletions;ne===null?(te.deletions=[K],te.flags|=16):ne.push(K)}}function i(te,K){if(!e)return null;for(;K!==null;)n(te,K),K=K.sibling;return null}function c(te){for(var K=new Map;te!==null;)te.key!==null?K.set(te.key,te):K.set(te.index,te),te=te.sibling;return K}function y(te,K){return te=ma(te,K),te.index=0,te.sibling=null,te}function S(te,K,ne){return te.index=ne,e?(ne=te.alternate,ne!==null?(ne=ne.index,ne<K?(te.flags|=67108866,K):ne):(te.flags|=67108866,K)):(te.flags|=1048576,K)}function E(te){return e&&te.alternate===null&&(te.flags|=67108866),te}function z(te,K,ne,he){return K===null||K.tag!==6?(K=ou(ne,te.mode,he),K.return=te,K):(K=y(K,ne),K.return=te,K)}function X(te,K,ne,he){var De=ne.type;return De===b?me(te,K,ne.props.children,he,ne.key):K!==null&&(K.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===M&&Rs(De)===K.type)?(K=y(K,ne.props),pr(K,ne),K.return=te,K):(K=Bo(ne.type,ne.key,ne.props,null,te.mode,he),pr(K,ne),K.return=te,K)}function ae(te,K,ne,he){return K===null||K.tag!==4||K.stateNode.containerInfo!==ne.containerInfo||K.stateNode.implementation!==ne.implementation?(K=lu(ne,te.mode,he),K.return=te,K):(K=y(K,ne.children||[]),K.return=te,K)}function me(te,K,ne,he,De){return K===null||K.tag!==7?(K=bs(ne,te.mode,he,De),K.return=te,K):(K=y(K,ne),K.return=te,K)}function pe(te,K,ne){if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return K=ou(""+K,te.mode,ne),K.return=te,K;if(typeof K=="object"&&K!==null){switch(K.$$typeof){case p:return ne=Bo(K.type,K.key,K.props,null,te.mode,ne),pr(ne,K),ne.return=te,ne;case v:return K=lu(K,te.mode,ne),K.return=te,K;case M:return K=Rs(K),pe(te,K,ne)}if(V(K)||U(K))return K=bs(K,te.mode,ne,null),K.return=te,K;if(typeof K.then=="function")return pe(te,Go(K),ne);if(K.$$typeof===C)return pe(te,zo(te,K),ne);$o(te,K)}return null}function oe(te,K,ne,he){var De=K!==null?K.key:null;if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return De!==null?null:z(te,K,""+ne,he);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case p:return ne.key===De?X(te,K,ne,he):null;case v:return ne.key===De?ae(te,K,ne,he):null;case M:return ne=Rs(ne),oe(te,K,ne,he)}if(V(ne)||U(ne))return De!==null?null:me(te,K,ne,he,null);if(typeof ne.then=="function")return oe(te,K,Go(ne),he);if(ne.$$typeof===C)return oe(te,K,zo(te,ne),he);$o(te,ne)}return null}function ue(te,K,ne,he,De){if(typeof he=="string"&&he!==""||typeof he=="number"||typeof he=="bigint")return te=te.get(ne)||null,z(K,te,""+he,De);if(typeof he=="object"&&he!==null){switch(he.$$typeof){case p:return te=te.get(he.key===null?ne:he.key)||null,X(K,te,he,De);case v:return te=te.get(he.key===null?ne:he.key)||null,ae(K,te,he,De);case M:return he=Rs(he),ue(te,K,ne,he,De)}if(V(he)||U(he))return te=te.get(ne)||null,me(K,te,he,De,null);if(typeof he.then=="function")return ue(te,K,ne,Go(he),De);if(he.$$typeof===C)return ue(te,K,ne,zo(K,he),De);$o(K,he)}return null}function Ee(te,K,ne,he){for(var De=null,rt=null,Me=K,We=K=0,et=null;Me!==null&&We<ne.length;We++){Me.index>We?(et=Me,Me=null):et=Me.sibling;var ot=oe(te,Me,ne[We],he);if(ot===null){Me===null&&(Me=et);break}e&&Me&&ot.alternate===null&&n(te,Me),K=S(ot,K,We),rt===null?De=ot:rt.sibling=ot,rt=ot,Me=et}if(We===ne.length)return i(te,Me),nt&&ha(te,We),De;if(Me===null){for(;We<ne.length;We++)Me=pe(te,ne[We],he),Me!==null&&(K=S(Me,K,We),rt===null?De=Me:rt.sibling=Me,rt=Me);return nt&&ha(te,We),De}for(Me=c(Me);We<ne.length;We++)et=ue(Me,te,We,ne[We],he),et!==null&&(e&&et.alternate!==null&&Me.delete(et.key===null?We:et.key),K=S(et,K,We),rt===null?De=et:rt.sibling=et,rt=et);return e&&Me.forEach(function(ss){return n(te,ss)}),nt&&ha(te,We),De}function ze(te,K,ne,he){if(ne==null)throw Error(o(151));for(var De=null,rt=null,Me=K,We=K=0,et=null,ot=ne.next();Me!==null&&!ot.done;We++,ot=ne.next()){Me.index>We?(et=Me,Me=null):et=Me.sibling;var ss=oe(te,Me,ot.value,he);if(ss===null){Me===null&&(Me=et);break}e&&Me&&ss.alternate===null&&n(te,Me),K=S(ss,K,We),rt===null?De=ss:rt.sibling=ss,rt=ss,Me=et}if(ot.done)return i(te,Me),nt&&ha(te,We),De;if(Me===null){for(;!ot.done;We++,ot=ne.next())ot=pe(te,ot.value,he),ot!==null&&(K=S(ot,K,We),rt===null?De=ot:rt.sibling=ot,rt=ot);return nt&&ha(te,We),De}for(Me=c(Me);!ot.done;We++,ot=ne.next())ot=ue(Me,te,We,ot.value,he),ot!==null&&(e&&ot.alternate!==null&&Me.delete(ot.key===null?We:ot.key),K=S(ot,K,We),rt===null?De=ot:rt.sibling=ot,rt=ot);return e&&Me.forEach(function(zS){return n(te,zS)}),nt&&ha(te,We),De}function gt(te,K,ne,he){if(typeof ne=="object"&&ne!==null&&ne.type===b&&ne.key===null&&(ne=ne.props.children),typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case p:e:{for(var De=ne.key;K!==null;){if(K.key===De){if(De=ne.type,De===b){if(K.tag===7){i(te,K.sibling),he=y(K,ne.props.children),he.return=te,te=he;break e}}else if(K.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===M&&Rs(De)===K.type){i(te,K.sibling),he=y(K,ne.props),pr(he,ne),he.return=te,te=he;break e}i(te,K);break}else n(te,K);K=K.sibling}ne.type===b?(he=bs(ne.props.children,te.mode,he,ne.key),he.return=te,te=he):(he=Bo(ne.type,ne.key,ne.props,null,te.mode,he),pr(he,ne),he.return=te,te=he)}return E(te);case v:e:{for(De=ne.key;K!==null;){if(K.key===De)if(K.tag===4&&K.stateNode.containerInfo===ne.containerInfo&&K.stateNode.implementation===ne.implementation){i(te,K.sibling),he=y(K,ne.children||[]),he.return=te,te=he;break e}else{i(te,K);break}else n(te,K);K=K.sibling}he=lu(ne,te.mode,he),he.return=te,te=he}return E(te);case M:return ne=Rs(ne),gt(te,K,ne,he)}if(V(ne))return Ee(te,K,ne,he);if(U(ne)){if(De=U(ne),typeof De!="function")throw Error(o(150));return ne=De.call(ne),ze(te,K,ne,he)}if(typeof ne.then=="function")return gt(te,K,Go(ne),he);if(ne.$$typeof===C)return gt(te,K,zo(te,ne),he);$o(te,ne)}return typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint"?(ne=""+ne,K!==null&&K.tag===6?(i(te,K.sibling),he=y(K,ne),he.return=te,te=he):(i(te,K),he=ou(ne,te.mode,he),he.return=te,te=he),E(te)):i(te,K)}return function(te,K,ne,he){try{gr=0;var De=gt(te,K,ne,he);return xi=null,De}catch(Me){if(Me===pi||Me===Ho)throw Me;var rt=wn(29,Me,null,te.mode);return rt.lanes=he,rt.return=te,rt}finally{}}}var Ts=Rh(!0),Eh=Rh(!1),Pa=!1;function bu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function wu(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ga(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function $a(e,n,i){var c=e.updateQueue;if(c===null)return null;if(c=c.shared,(ct&2)!==0){var y=c.pending;return y===null?n.next=n:(n.next=y.next,y.next=n),c.pending=n,n=Do(e),ch(e,null,i),n}return ko(e,c,n,i),Do(e)}function xr(e,n,i){if(n=n.updateQueue,n!==null&&(n=n.shared,(i&4194048)!==0)){var c=n.lanes;c&=e.pendingLanes,i|=c,n.lanes=i,xm(e,i)}}function Su(e,n){var i=e.updateQueue,c=e.alternate;if(c!==null&&(c=c.updateQueue,i===c)){var y=null,S=null;if(i=i.firstBaseUpdate,i!==null){do{var E={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};S===null?y=S=E:S=S.next=E,i=i.next}while(i!==null);S===null?y=S=n:S=S.next=n}else y=S=n;i={baseState:c.baseState,firstBaseUpdate:y,lastBaseUpdate:S,shared:c.shared,callbacks:c.callbacks},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=n:e.next=n,i.lastBaseUpdate=n}var Nu=!1;function yr(){if(Nu){var e=gi;if(e!==null)throw e}}function vr(e,n,i,c){Nu=!1;var y=e.updateQueue;Pa=!1;var S=y.firstBaseUpdate,E=y.lastBaseUpdate,z=y.shared.pending;if(z!==null){y.shared.pending=null;var X=z,ae=X.next;X.next=null,E===null?S=ae:E.next=ae,E=X;var me=e.alternate;me!==null&&(me=me.updateQueue,z=me.lastBaseUpdate,z!==E&&(z===null?me.firstBaseUpdate=ae:z.next=ae,me.lastBaseUpdate=X))}if(S!==null){var pe=y.baseState;E=0,me=ae=X=null,z=S;do{var oe=z.lane&-536870913,ue=oe!==z.lane;if(ue?(Je&oe)===oe:(c&oe)===oe){oe!==0&&oe===hi&&(Nu=!0),me!==null&&(me=me.next={lane:0,tag:z.tag,payload:z.payload,callback:null,next:null});e:{var Ee=e,ze=z;oe=n;var gt=i;switch(ze.tag){case 1:if(Ee=ze.payload,typeof Ee=="function"){pe=Ee.call(gt,pe,oe);break e}pe=Ee;break e;case 3:Ee.flags=Ee.flags&-65537|128;case 0:if(Ee=ze.payload,oe=typeof Ee=="function"?Ee.call(gt,pe,oe):Ee,oe==null)break e;pe=w({},pe,oe);break e;case 2:Pa=!0}}oe=z.callback,oe!==null&&(e.flags|=64,ue&&(e.flags|=8192),ue=y.callbacks,ue===null?y.callbacks=[oe]:ue.push(oe))}else ue={lane:oe,tag:z.tag,payload:z.payload,callback:z.callback,next:null},me===null?(ae=me=ue,X=pe):me=me.next=ue,E|=oe;if(z=z.next,z===null){if(z=y.shared.pending,z===null)break;ue=z,z=ue.next,ue.next=null,y.lastBaseUpdate=ue,y.shared.pending=null}}while(!0);me===null&&(X=pe),y.baseState=X,y.firstBaseUpdate=ae,y.lastBaseUpdate=me,S===null&&(y.shared.lanes=0),Ya|=E,e.lanes=E,e.memoizedState=pe}}function Th(e,n){if(typeof e!="function")throw Error(o(191,e));e.call(n)}function Ah(e,n){var i=e.callbacks;if(i!==null)for(e.callbacks=null,e=0;e<i.length;e++)Th(i[e],n)}var yi=O(null),Vo=O(0);function Ch(e,n){e=Ra,W(Vo,e),W(yi,n),Ra=e|n.baseLanes}function _u(){W(Vo,Ra),W(yi,yi.current)}function Ru(){Ra=Vo.current,G(yi),G(Vo)}var Sn=O(null),zn=null;function Va(e){var n=e.alternate;W(Ot,Ot.current&1),W(Sn,e),zn===null&&(n===null||yi.current!==null||n.memoizedState!==null)&&(zn=e)}function Eu(e){W(Ot,Ot.current),W(Sn,e),zn===null&&(zn=e)}function Mh(e){e.tag===22?(W(Ot,Ot.current),W(Sn,e),zn===null&&(zn=e)):Fa()}function Fa(){W(Ot,Ot.current),W(Sn,Sn.current)}function Nn(e){G(Sn),zn===e&&(zn=null),G(Ot)}var Ot=O(0);function Fo(e){for(var n=e;n!==null;){if(n.tag===13){var i=n.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||jd(i)||kd(i)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var xa=0,Ve=null,mt=null,It=null,Wo=!1,vi=!1,As=!1,qo=0,br=0,bi=null,Aw=0;function Ct(){throw Error(o(321))}function Tu(e,n){if(n===null)return!1;for(var i=0;i<n.length&&i<e.length;i++)if(!bn(e[i],n[i]))return!1;return!0}function Au(e,n,i,c,y,S){return xa=S,Ve=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,$.H=e===null||e.memoizedState===null?mg:$u,As=!1,S=i(c,y),As=!1,vi&&(S=jh(n,i,c,y)),Oh(e),S}function Oh(e){$.H=Nr;var n=mt!==null&&mt.next!==null;if(xa=0,It=mt=Ve=null,Wo=!1,br=0,bi=null,n)throw Error(o(300));e===null||Lt||(e=e.dependencies,e!==null&&Lo(e)&&(Lt=!0))}function jh(e,n,i,c){Ve=e;var y=0;do{if(vi&&(bi=null),br=0,vi=!1,25<=y)throw Error(o(301));if(y+=1,It=mt=null,e.updateQueue!=null){var S=e.updateQueue;S.lastEffect=null,S.events=null,S.stores=null,S.memoCache!=null&&(S.memoCache.index=0)}$.H=hg,S=n(i,c)}while(vi);return S}function Cw(){var e=$.H,n=e.useState()[0];return n=typeof n.then=="function"?wr(n):n,e=e.useState()[0],(mt!==null?mt.memoizedState:null)!==e&&(Ve.flags|=1024),n}function Cu(){var e=qo!==0;return qo=0,e}function Mu(e,n,i){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~i}function Ou(e){if(Wo){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}Wo=!1}xa=0,It=mt=Ve=null,vi=!1,br=qo=0,bi=null}function an(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return It===null?Ve.memoizedState=It=e:It=It.next=e,It}function jt(){if(mt===null){var e=Ve.alternate;e=e!==null?e.memoizedState:null}else e=mt.next;var n=It===null?Ve.memoizedState:It.next;if(n!==null)It=n,mt=e;else{if(e===null)throw Ve.alternate===null?Error(o(467)):Error(o(310));mt=e,e={memoizedState:mt.memoizedState,baseState:mt.baseState,baseQueue:mt.baseQueue,queue:mt.queue,next:null},It===null?Ve.memoizedState=It=e:It=It.next=e}return It}function Yo(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function wr(e){var n=br;return br+=1,bi===null&&(bi=[]),e=Sh(bi,e,n),n=Ve,(It===null?n.memoizedState:It.next)===null&&(n=n.alternate,$.H=n===null||n.memoizedState===null?mg:$u),e}function Xo(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return wr(e);if(e.$$typeof===C)return Qt(e)}throw Error(o(438,String(e)))}function ju(e){var n=null,i=Ve.updateQueue;if(i!==null&&(n=i.memoCache),n==null){var c=Ve.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(n={data:c.data.map(function(y){return y.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),i===null&&(i=Yo(),Ve.updateQueue=i),i.memoCache=n,i=n.data[n.index],i===void 0)for(i=n.data[n.index]=Array(e),c=0;c<e;c++)i[c]=L;return n.index++,i}function ya(e,n){return typeof n=="function"?n(e):n}function Zo(e){var n=jt();return ku(n,mt,e)}function ku(e,n,i){var c=e.queue;if(c===null)throw Error(o(311));c.lastRenderedReducer=i;var y=e.baseQueue,S=c.pending;if(S!==null){if(y!==null){var E=y.next;y.next=S.next,S.next=E}n.baseQueue=y=S,c.pending=null}if(S=e.baseState,y===null)e.memoizedState=S;else{n=y.next;var z=E=null,X=null,ae=n,me=!1;do{var pe=ae.lane&-536870913;if(pe!==ae.lane?(Je&pe)===pe:(xa&pe)===pe){var oe=ae.revertLane;if(oe===0)X!==null&&(X=X.next={lane:0,revertLane:0,gesture:null,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null}),pe===hi&&(me=!0);else if((xa&oe)===oe){ae=ae.next,oe===hi&&(me=!0);continue}else pe={lane:0,revertLane:ae.revertLane,gesture:null,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null},X===null?(z=X=pe,E=S):X=X.next=pe,Ve.lanes|=oe,Ya|=oe;pe=ae.action,As&&i(S,pe),S=ae.hasEagerState?ae.eagerState:i(S,pe)}else oe={lane:pe,revertLane:ae.revertLane,gesture:ae.gesture,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null},X===null?(z=X=oe,E=S):X=X.next=oe,Ve.lanes|=pe,Ya|=pe;ae=ae.next}while(ae!==null&&ae!==n);if(X===null?E=S:X.next=z,!bn(S,e.memoizedState)&&(Lt=!0,me&&(i=gi,i!==null)))throw i;e.memoizedState=S,e.baseState=E,e.baseQueue=X,c.lastRenderedState=S}return y===null&&(c.lanes=0),[e.memoizedState,c.dispatch]}function Du(e){var n=jt(),i=n.queue;if(i===null)throw Error(o(311));i.lastRenderedReducer=e;var c=i.dispatch,y=i.pending,S=n.memoizedState;if(y!==null){i.pending=null;var E=y=y.next;do S=e(S,E.action),E=E.next;while(E!==y);bn(S,n.memoizedState)||(Lt=!0),n.memoizedState=S,n.baseQueue===null&&(n.baseState=S),i.lastRenderedState=S}return[S,c]}function kh(e,n,i){var c=Ve,y=jt(),S=nt;if(S){if(i===void 0)throw Error(o(407));i=i()}else i=n();var E=!bn((mt||y).memoizedState,i);if(E&&(y.memoizedState=i,Lt=!0),y=y.queue,Lu(Ih.bind(null,c,y,e),[e]),y.getSnapshot!==n||E||It!==null&&It.memoizedState.tag&1){if(c.flags|=2048,wi(9,{destroy:void 0},Bh.bind(null,c,y,i,n),null),pt===null)throw Error(o(349));S||(xa&127)!==0||Dh(c,n,i)}return i}function Dh(e,n,i){e.flags|=16384,e={getSnapshot:n,value:i},n=Ve.updateQueue,n===null?(n=Yo(),Ve.updateQueue=n,n.stores=[e]):(i=n.stores,i===null?n.stores=[e]:i.push(e))}function Bh(e,n,i,c){n.value=i,n.getSnapshot=c,Lh(n)&&zh(e)}function Ih(e,n,i){return i(function(){Lh(n)&&zh(e)})}function Lh(e){var n=e.getSnapshot;e=e.value;try{var i=n();return!bn(e,i)}catch{return!0}}function zh(e){var n=vs(e,2);n!==null&&mn(n,e,2)}function Bu(e){var n=an();if(typeof e=="function"){var i=e;if(e=i(),As){Ie(!0);try{i()}finally{Ie(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ya,lastRenderedState:e},n}function Uh(e,n,i,c){return e.baseState=i,ku(e,mt,typeof c=="function"?c:ya)}function Mw(e,n,i,c,y){if(Jo(e))throw Error(o(485));if(e=n.action,e!==null){var S={payload:y,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){S.listeners.push(E)}};$.T!==null?i(!0):S.isTransition=!1,c(S),i=n.pending,i===null?(S.next=n.pending=S,Hh(n,S)):(S.next=i.next,n.pending=i.next=S)}}function Hh(e,n){var i=n.action,c=n.payload,y=e.state;if(n.isTransition){var S=$.T,E={};$.T=E;try{var z=i(y,c),X=$.S;X!==null&&X(E,z),Ph(e,n,z)}catch(ae){Iu(e,n,ae)}finally{S!==null&&E.types!==null&&(S.types=E.types),$.T=S}}else try{S=i(y,c),Ph(e,n,S)}catch(ae){Iu(e,n,ae)}}function Ph(e,n,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(c){Gh(e,n,c)},function(c){return Iu(e,n,c)}):Gh(e,n,i)}function Gh(e,n,i){n.status="fulfilled",n.value=i,$h(n),e.state=i,n=e.pending,n!==null&&(i=n.next,i===n?e.pending=null:(i=i.next,n.next=i,Hh(e,i)))}function Iu(e,n,i){var c=e.pending;if(e.pending=null,c!==null){c=c.next;do n.status="rejected",n.reason=i,$h(n),n=n.next;while(n!==c)}e.action=null}function $h(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function Vh(e,n){return n}function Fh(e,n){if(nt){var i=pt.formState;if(i!==null){e:{var c=Ve;if(nt){if(wt){t:{for(var y=wt,S=Ln;y.nodeType!==8;){if(!S){y=null;break t}if(y=Un(y.nextSibling),y===null){y=null;break t}}S=y.data,y=S==="F!"||S==="F"?y:null}if(y){wt=Un(y.nextSibling),c=y.data==="F!";break e}}Ua(c)}c=!1}c&&(n=i[0])}}return i=an(),i.memoizedState=i.baseState=n,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vh,lastRenderedState:n},i.queue=c,i=ug.bind(null,Ve,c),c.dispatch=i,c=Bu(!1),S=Gu.bind(null,Ve,!1,c.queue),c=an(),y={state:n,dispatch:null,action:e,pending:null},c.queue=y,i=Mw.bind(null,Ve,y,S,i),y.dispatch=i,c.memoizedState=e,[n,i,!1]}function Wh(e){var n=jt();return qh(n,mt,e)}function qh(e,n,i){if(n=ku(e,n,Vh)[0],e=Zo(ya)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var c=wr(n)}catch(E){throw E===pi?Ho:E}else c=n;n=jt();var y=n.queue,S=y.dispatch;return i!==n.memoizedState&&(Ve.flags|=2048,wi(9,{destroy:void 0},Ow.bind(null,y,i),null)),[c,S,e]}function Ow(e,n){e.action=n}function Yh(e){var n=jt(),i=mt;if(i!==null)return qh(n,i,e);jt(),n=n.memoizedState,i=jt();var c=i.queue.dispatch;return i.memoizedState=e,[n,c,!1]}function wi(e,n,i,c){return e={tag:e,create:i,deps:c,inst:n,next:null},n=Ve.updateQueue,n===null&&(n=Yo(),Ve.updateQueue=n),i=n.lastEffect,i===null?n.lastEffect=e.next=e:(c=i.next,i.next=e,e.next=c,n.lastEffect=e),e}function Xh(){return jt().memoizedState}function Qo(e,n,i,c){var y=an();Ve.flags|=e,y.memoizedState=wi(1|n,{destroy:void 0},i,c===void 0?null:c)}function Ko(e,n,i,c){var y=jt();c=c===void 0?null:c;var S=y.memoizedState.inst;mt!==null&&c!==null&&Tu(c,mt.memoizedState.deps)?y.memoizedState=wi(n,S,i,c):(Ve.flags|=e,y.memoizedState=wi(1|n,S,i,c))}function Zh(e,n){Qo(8390656,8,e,n)}function Lu(e,n){Ko(2048,8,e,n)}function jw(e){Ve.flags|=4;var n=Ve.updateQueue;if(n===null)n=Yo(),Ve.updateQueue=n,n.events=[e];else{var i=n.events;i===null?n.events=[e]:i.push(e)}}function Qh(e){var n=jt().memoizedState;return jw({ref:n,nextImpl:e}),function(){if((ct&2)!==0)throw Error(o(440));return n.impl.apply(void 0,arguments)}}function Kh(e,n){return Ko(4,2,e,n)}function Jh(e,n){return Ko(4,4,e,n)}function eg(e,n){if(typeof n=="function"){e=e();var i=n(e);return function(){typeof i=="function"?i():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function tg(e,n,i){i=i!=null?i.concat([e]):null,Ko(4,4,eg.bind(null,n,e),i)}function zu(){}function ng(e,n){var i=jt();n=n===void 0?null:n;var c=i.memoizedState;return n!==null&&Tu(n,c[1])?c[0]:(i.memoizedState=[e,n],e)}function ag(e,n){var i=jt();n=n===void 0?null:n;var c=i.memoizedState;if(n!==null&&Tu(n,c[1]))return c[0];if(c=e(),As){Ie(!0);try{e()}finally{Ie(!1)}}return i.memoizedState=[c,n],c}function Uu(e,n,i){return i===void 0||(xa&1073741824)!==0&&(Je&261930)===0?e.memoizedState=n:(e.memoizedState=i,e=sp(),Ve.lanes|=e,Ya|=e,i)}function sg(e,n,i,c){return bn(i,n)?i:yi.current!==null?(e=Uu(e,i,c),bn(e,n)||(Lt=!0),e):(xa&42)===0||(xa&1073741824)!==0&&(Je&261930)===0?(Lt=!0,e.memoizedState=i):(e=sp(),Ve.lanes|=e,Ya|=e,n)}function ig(e,n,i,c,y){var S=Z.p;Z.p=S!==0&&8>S?S:8;var E=$.T,z={};$.T=z,Gu(e,!1,n,i);try{var X=y(),ae=$.S;if(ae!==null&&ae(z,X),X!==null&&typeof X=="object"&&typeof X.then=="function"){var me=Tw(X,c);Sr(e,n,me,En(e))}else Sr(e,n,c,En(e))}catch(pe){Sr(e,n,{then:function(){},status:"rejected",reason:pe},En())}finally{Z.p=S,E!==null&&z.types!==null&&(E.types=z.types),$.T=E}}function kw(){}function Hu(e,n,i,c){if(e.tag!==5)throw Error(o(476));var y=rg(e).queue;ig(e,y,n,Q,i===null?kw:function(){return og(e),i(c)})}function rg(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:Q,baseState:Q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ya,lastRenderedState:Q},next:null};var i={};return n.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ya,lastRenderedState:i},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function og(e){var n=rg(e);n.next===null&&(n=e.alternate.memoizedState),Sr(e,n.next.queue,{},En())}function Pu(){return Qt(Ur)}function lg(){return jt().memoizedState}function cg(){return jt().memoizedState}function Dw(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var i=En();e=Ga(i);var c=$a(n,e,i);c!==null&&(mn(c,n,i),xr(c,n,i)),n={cache:pu()},e.payload=n;return}n=n.return}}function Bw(e,n,i){var c=En();i={lane:c,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},Jo(e)?dg(n,i):(i=iu(e,n,i,c),i!==null&&(mn(i,e,c),fg(i,n,c)))}function ug(e,n,i){var c=En();Sr(e,n,i,c)}function Sr(e,n,i,c){var y={lane:c,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null};if(Jo(e))dg(n,y);else{var S=e.alternate;if(e.lanes===0&&(S===null||S.lanes===0)&&(S=n.lastRenderedReducer,S!==null))try{var E=n.lastRenderedState,z=S(E,i);if(y.hasEagerState=!0,y.eagerState=z,bn(z,E))return ko(e,n,y,0),pt===null&&jo(),!1}catch{}finally{}if(i=iu(e,n,y,c),i!==null)return mn(i,e,c),fg(i,n,c),!0}return!1}function Gu(e,n,i,c){if(c={lane:2,revertLane:bd(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Jo(e)){if(n)throw Error(o(479))}else n=iu(e,i,c,2),n!==null&&mn(n,e,2)}function Jo(e){var n=e.alternate;return e===Ve||n!==null&&n===Ve}function dg(e,n){vi=Wo=!0;var i=e.pending;i===null?n.next=n:(n.next=i.next,i.next=n),e.pending=n}function fg(e,n,i){if((i&4194048)!==0){var c=n.lanes;c&=e.pendingLanes,i|=c,n.lanes=i,xm(e,i)}}var Nr={readContext:Qt,use:Xo,useCallback:Ct,useContext:Ct,useEffect:Ct,useImperativeHandle:Ct,useLayoutEffect:Ct,useInsertionEffect:Ct,useMemo:Ct,useReducer:Ct,useRef:Ct,useState:Ct,useDebugValue:Ct,useDeferredValue:Ct,useTransition:Ct,useSyncExternalStore:Ct,useId:Ct,useHostTransitionStatus:Ct,useFormState:Ct,useActionState:Ct,useOptimistic:Ct,useMemoCache:Ct,useCacheRefresh:Ct};Nr.useEffectEvent=Ct;var mg={readContext:Qt,use:Xo,useCallback:function(e,n){return an().memoizedState=[e,n===void 0?null:n],e},useContext:Qt,useEffect:Zh,useImperativeHandle:function(e,n,i){i=i!=null?i.concat([e]):null,Qo(4194308,4,eg.bind(null,n,e),i)},useLayoutEffect:function(e,n){return Qo(4194308,4,e,n)},useInsertionEffect:function(e,n){Qo(4,2,e,n)},useMemo:function(e,n){var i=an();n=n===void 0?null:n;var c=e();if(As){Ie(!0);try{e()}finally{Ie(!1)}}return i.memoizedState=[c,n],c},useReducer:function(e,n,i){var c=an();if(i!==void 0){var y=i(n);if(As){Ie(!0);try{i(n)}finally{Ie(!1)}}}else y=n;return c.memoizedState=c.baseState=y,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:y},c.queue=e,e=e.dispatch=Bw.bind(null,Ve,e),[c.memoizedState,e]},useRef:function(e){var n=an();return e={current:e},n.memoizedState=e},useState:function(e){e=Bu(e);var n=e.queue,i=ug.bind(null,Ve,n);return n.dispatch=i,[e.memoizedState,i]},useDebugValue:zu,useDeferredValue:function(e,n){var i=an();return Uu(i,e,n)},useTransition:function(){var e=Bu(!1);return e=ig.bind(null,Ve,e.queue,!0,!1),an().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,i){var c=Ve,y=an();if(nt){if(i===void 0)throw Error(o(407));i=i()}else{if(i=n(),pt===null)throw Error(o(349));(Je&127)!==0||Dh(c,n,i)}y.memoizedState=i;var S={value:i,getSnapshot:n};return y.queue=S,Zh(Ih.bind(null,c,S,e),[e]),c.flags|=2048,wi(9,{destroy:void 0},Bh.bind(null,c,S,i,n),null),i},useId:function(){var e=an(),n=pt.identifierPrefix;if(nt){var i=ea,c=Jn;i=(c&~(1<<32-Pe(c)-1)).toString(32)+i,n="_"+n+"R_"+i,i=qo++,0<i&&(n+="H"+i.toString(32)),n+="_"}else i=Aw++,n="_"+n+"r_"+i.toString(32)+"_";return e.memoizedState=n},useHostTransitionStatus:Pu,useFormState:Fh,useActionState:Fh,useOptimistic:function(e){var n=an();n.memoizedState=n.baseState=e;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=i,n=Gu.bind(null,Ve,!0,i),i.dispatch=n,[e,n]},useMemoCache:ju,useCacheRefresh:function(){return an().memoizedState=Dw.bind(null,Ve)},useEffectEvent:function(e){var n=an(),i={impl:e};return n.memoizedState=i,function(){if((ct&2)!==0)throw Error(o(440));return i.impl.apply(void 0,arguments)}}},$u={readContext:Qt,use:Xo,useCallback:ng,useContext:Qt,useEffect:Lu,useImperativeHandle:tg,useInsertionEffect:Kh,useLayoutEffect:Jh,useMemo:ag,useReducer:Zo,useRef:Xh,useState:function(){return Zo(ya)},useDebugValue:zu,useDeferredValue:function(e,n){var i=jt();return sg(i,mt.memoizedState,e,n)},useTransition:function(){var e=Zo(ya)[0],n=jt().memoizedState;return[typeof e=="boolean"?e:wr(e),n]},useSyncExternalStore:kh,useId:lg,useHostTransitionStatus:Pu,useFormState:Wh,useActionState:Wh,useOptimistic:function(e,n){var i=jt();return Uh(i,mt,e,n)},useMemoCache:ju,useCacheRefresh:cg};$u.useEffectEvent=Qh;var hg={readContext:Qt,use:Xo,useCallback:ng,useContext:Qt,useEffect:Lu,useImperativeHandle:tg,useInsertionEffect:Kh,useLayoutEffect:Jh,useMemo:ag,useReducer:Du,useRef:Xh,useState:function(){return Du(ya)},useDebugValue:zu,useDeferredValue:function(e,n){var i=jt();return mt===null?Uu(i,e,n):sg(i,mt.memoizedState,e,n)},useTransition:function(){var e=Du(ya)[0],n=jt().memoizedState;return[typeof e=="boolean"?e:wr(e),n]},useSyncExternalStore:kh,useId:lg,useHostTransitionStatus:Pu,useFormState:Yh,useActionState:Yh,useOptimistic:function(e,n){var i=jt();return mt!==null?Uh(i,mt,e,n):(i.baseState=e,[e,i.queue.dispatch])},useMemoCache:ju,useCacheRefresh:cg};hg.useEffectEvent=Qh;function Vu(e,n,i,c){n=e.memoizedState,i=i(c,n),i=i==null?n:w({},n,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var Fu={enqueueSetState:function(e,n,i){e=e._reactInternals;var c=En(),y=Ga(c);y.payload=n,i!=null&&(y.callback=i),n=$a(e,y,c),n!==null&&(mn(n,e,c),xr(n,e,c))},enqueueReplaceState:function(e,n,i){e=e._reactInternals;var c=En(),y=Ga(c);y.tag=1,y.payload=n,i!=null&&(y.callback=i),n=$a(e,y,c),n!==null&&(mn(n,e,c),xr(n,e,c))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var i=En(),c=Ga(i);c.tag=2,n!=null&&(c.callback=n),n=$a(e,c,i),n!==null&&(mn(n,e,i),xr(n,e,i))}};function gg(e,n,i,c,y,S,E){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(c,S,E):n.prototype&&n.prototype.isPureReactComponent?!cr(i,c)||!cr(y,S):!0}function pg(e,n,i,c){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(i,c),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(i,c),n.state!==e&&Fu.enqueueReplaceState(n,n.state,null)}function Cs(e,n){var i=n;if("ref"in n){i={};for(var c in n)c!=="ref"&&(i[c]=n[c])}if(e=e.defaultProps){i===n&&(i=w({},i));for(var y in e)i[y]===void 0&&(i[y]=e[y])}return i}function xg(e){Oo(e)}function yg(e){console.error(e)}function vg(e){Oo(e)}function el(e,n){try{var i=e.onUncaughtError;i(n.value,{componentStack:n.stack})}catch(c){setTimeout(function(){throw c})}}function bg(e,n,i){try{var c=e.onCaughtError;c(i.value,{componentStack:i.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function Wu(e,n,i){return i=Ga(i),i.tag=3,i.payload={element:null},i.callback=function(){el(e,n)},i}function wg(e){return e=Ga(e),e.tag=3,e}function Sg(e,n,i,c){var y=i.type.getDerivedStateFromError;if(typeof y=="function"){var S=c.value;e.payload=function(){return y(S)},e.callback=function(){bg(n,i,c)}}var E=i.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(e.callback=function(){bg(n,i,c),typeof y!="function"&&(Xa===null?Xa=new Set([this]):Xa.add(this));var z=c.stack;this.componentDidCatch(c.value,{componentStack:z!==null?z:""})})}function Iw(e,n,i,c,y){if(i.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(n=i.alternate,n!==null&&mi(n,i,y,!0),i=Sn.current,i!==null){switch(i.tag){case 31:case 13:return zn===null?fl():i.alternate===null&&Mt===0&&(Mt=3),i.flags&=-257,i.flags|=65536,i.lanes=y,c===Po?i.flags|=16384:(n=i.updateQueue,n===null?i.updateQueue=new Set([c]):n.add(c),xd(e,c,y)),!1;case 22:return i.flags|=65536,c===Po?i.flags|=16384:(n=i.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([c])},i.updateQueue=n):(i=n.retryQueue,i===null?n.retryQueue=new Set([c]):i.add(c)),xd(e,c,y)),!1}throw Error(o(435,i.tag))}return xd(e,c,y),fl(),!1}if(nt)return n=Sn.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=y,c!==du&&(e=Error(o(422),{cause:c}),fr(Dn(e,i)))):(c!==du&&(n=Error(o(423),{cause:c}),fr(Dn(n,i))),e=e.current.alternate,e.flags|=65536,y&=-y,e.lanes|=y,c=Dn(c,i),y=Wu(e.stateNode,c,y),Su(e,y),Mt!==4&&(Mt=2)),!1;var S=Error(o(520),{cause:c});if(S=Dn(S,i),Or===null?Or=[S]:Or.push(S),Mt!==4&&(Mt=2),n===null)return!0;c=Dn(c,i),i=n;do{switch(i.tag){case 3:return i.flags|=65536,e=y&-y,i.lanes|=e,e=Wu(i.stateNode,c,e),Su(i,e),!1;case 1:if(n=i.type,S=i.stateNode,(i.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Xa===null||!Xa.has(S))))return i.flags|=65536,y&=-y,i.lanes|=y,y=wg(y),Sg(y,e,i,c),Su(i,y),!1}i=i.return}while(i!==null);return!1}var qu=Error(o(461)),Lt=!1;function Kt(e,n,i,c){n.child=e===null?Eh(n,null,i,c):Ts(n,e.child,i,c)}function Ng(e,n,i,c,y){i=i.render;var S=n.ref;if("ref"in c){var E={};for(var z in c)z!=="ref"&&(E[z]=c[z])}else E=c;return Ns(n),c=Au(e,n,i,E,S,y),z=Cu(),e!==null&&!Lt?(Mu(e,n,y),va(e,n,y)):(nt&&z&&cu(n),n.flags|=1,Kt(e,n,c,y),n.child)}function _g(e,n,i,c,y){if(e===null){var S=i.type;return typeof S=="function"&&!ru(S)&&S.defaultProps===void 0&&i.compare===null?(n.tag=15,n.type=S,Rg(e,n,S,c,y)):(e=Bo(i.type,null,c,n,n.mode,y),e.ref=n.ref,e.return=n,n.child=e)}if(S=e.child,!td(e,y)){var E=S.memoizedProps;if(i=i.compare,i=i!==null?i:cr,i(E,c)&&e.ref===n.ref)return va(e,n,y)}return n.flags|=1,e=ma(S,c),e.ref=n.ref,e.return=n,n.child=e}function Rg(e,n,i,c,y){if(e!==null){var S=e.memoizedProps;if(cr(S,c)&&e.ref===n.ref)if(Lt=!1,n.pendingProps=c=S,td(e,y))(e.flags&131072)!==0&&(Lt=!0);else return n.lanes=e.lanes,va(e,n,y)}return Yu(e,n,i,c,y)}function Eg(e,n,i,c){var y=c.children,S=e!==null?e.memoizedState:null;if(e===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((n.flags&128)!==0){if(S=S!==null?S.baseLanes|i:i,e!==null){for(c=n.child=e.child,y=0;c!==null;)y=y|c.lanes|c.childLanes,c=c.sibling;c=y&~S}else c=0,n.child=null;return Tg(e,n,S,i,c)}if((i&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&Uo(n,S!==null?S.cachePool:null),S!==null?Ch(n,S):_u(),Mh(n);else return c=n.lanes=536870912,Tg(e,n,S!==null?S.baseLanes|i:i,i,c)}else S!==null?(Uo(n,S.cachePool),Ch(n,S),Fa(),n.memoizedState=null):(e!==null&&Uo(n,null),_u(),Fa());return Kt(e,n,y,i),n.child}function _r(e,n){return e!==null&&e.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function Tg(e,n,i,c,y){var S=yu();return S=S===null?null:{parent:Bt._currentValue,pool:S},n.memoizedState={baseLanes:i,cachePool:S},e!==null&&Uo(n,null),_u(),Mh(n),e!==null&&mi(e,n,c,!0),n.childLanes=y,null}function tl(e,n){return n=al({mode:n.mode,children:n.children},e.mode),n.ref=e.ref,e.child=n,n.return=e,n}function Ag(e,n,i){return Ts(n,e.child,null,i),e=tl(n,n.pendingProps),e.flags|=2,Nn(n),n.memoizedState=null,e}function Lw(e,n,i){var c=n.pendingProps,y=(n.flags&128)!==0;if(n.flags&=-129,e===null){if(nt){if(c.mode==="hidden")return e=tl(n,c),n.lanes=536870912,_r(null,e);if(Eu(n),(e=wt)?(e=Hp(e,Ln),e=e!==null&&e.data==="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:La!==null?{id:Jn,overflow:ea}:null,retryLane:536870912,hydrationErrors:null},i=dh(e),i.return=n,n.child=i,Zt=n,wt=null)):e=null,e===null)throw Ua(n);return n.lanes=536870912,null}return tl(n,c)}var S=e.memoizedState;if(S!==null){var E=S.dehydrated;if(Eu(n),y)if(n.flags&256)n.flags&=-257,n=Ag(e,n,i);else if(n.memoizedState!==null)n.child=e.child,n.flags|=128,n=null;else throw Error(o(558));else if(Lt||mi(e,n,i,!1),y=(i&e.childLanes)!==0,Lt||y){if(c=pt,c!==null&&(E=ym(c,i),E!==0&&E!==S.retryLane))throw S.retryLane=E,vs(e,E),mn(c,e,E),qu;fl(),n=Ag(e,n,i)}else e=S.treeContext,wt=Un(E.nextSibling),Zt=n,nt=!0,za=null,Ln=!1,e!==null&&hh(n,e),n=tl(n,c),n.flags|=4096;return n}return e=ma(e.child,{mode:c.mode,children:c.children}),e.ref=n.ref,n.child=e,e.return=n,e}function nl(e,n){var i=n.ref;if(i===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(o(284));(e===null||e.ref!==i)&&(n.flags|=4194816)}}function Yu(e,n,i,c,y){return Ns(n),i=Au(e,n,i,c,void 0,y),c=Cu(),e!==null&&!Lt?(Mu(e,n,y),va(e,n,y)):(nt&&c&&cu(n),n.flags|=1,Kt(e,n,i,y),n.child)}function Cg(e,n,i,c,y,S){return Ns(n),n.updateQueue=null,i=jh(n,c,i,y),Oh(e),c=Cu(),e!==null&&!Lt?(Mu(e,n,S),va(e,n,S)):(nt&&c&&cu(n),n.flags|=1,Kt(e,n,i,S),n.child)}function Mg(e,n,i,c,y){if(Ns(n),n.stateNode===null){var S=ci,E=i.contextType;typeof E=="object"&&E!==null&&(S=Qt(E)),S=new i(c,S),n.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,S.updater=Fu,n.stateNode=S,S._reactInternals=n,S=n.stateNode,S.props=c,S.state=n.memoizedState,S.refs={},bu(n),E=i.contextType,S.context=typeof E=="object"&&E!==null?Qt(E):ci,S.state=n.memoizedState,E=i.getDerivedStateFromProps,typeof E=="function"&&(Vu(n,i,E,c),S.state=n.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(E=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),E!==S.state&&Fu.enqueueReplaceState(S,S.state,null),vr(n,c,S,y),yr(),S.state=n.memoizedState),typeof S.componentDidMount=="function"&&(n.flags|=4194308),c=!0}else if(e===null){S=n.stateNode;var z=n.memoizedProps,X=Cs(i,z);S.props=X;var ae=S.context,me=i.contextType;E=ci,typeof me=="object"&&me!==null&&(E=Qt(me));var pe=i.getDerivedStateFromProps;me=typeof pe=="function"||typeof S.getSnapshotBeforeUpdate=="function",z=n.pendingProps!==z,me||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(z||ae!==E)&&pg(n,S,c,E),Pa=!1;var oe=n.memoizedState;S.state=oe,vr(n,c,S,y),yr(),ae=n.memoizedState,z||oe!==ae||Pa?(typeof pe=="function"&&(Vu(n,i,pe,c),ae=n.memoizedState),(X=Pa||gg(n,i,X,c,oe,ae,E))?(me||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(n.flags|=4194308)):(typeof S.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=c,n.memoizedState=ae),S.props=c,S.state=ae,S.context=E,c=X):(typeof S.componentDidMount=="function"&&(n.flags|=4194308),c=!1)}else{S=n.stateNode,wu(e,n),E=n.memoizedProps,me=Cs(i,E),S.props=me,pe=n.pendingProps,oe=S.context,ae=i.contextType,X=ci,typeof ae=="object"&&ae!==null&&(X=Qt(ae)),z=i.getDerivedStateFromProps,(ae=typeof z=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(E!==pe||oe!==X)&&pg(n,S,c,X),Pa=!1,oe=n.memoizedState,S.state=oe,vr(n,c,S,y),yr();var ue=n.memoizedState;E!==pe||oe!==ue||Pa||e!==null&&e.dependencies!==null&&Lo(e.dependencies)?(typeof z=="function"&&(Vu(n,i,z,c),ue=n.memoizedState),(me=Pa||gg(n,i,me,c,oe,ue,X)||e!==null&&e.dependencies!==null&&Lo(e.dependencies))?(ae||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(c,ue,X),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(c,ue,X)),typeof S.componentDidUpdate=="function"&&(n.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof S.componentDidUpdate!="function"||E===e.memoizedProps&&oe===e.memoizedState||(n.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||E===e.memoizedProps&&oe===e.memoizedState||(n.flags|=1024),n.memoizedProps=c,n.memoizedState=ue),S.props=c,S.state=ue,S.context=X,c=me):(typeof S.componentDidUpdate!="function"||E===e.memoizedProps&&oe===e.memoizedState||(n.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||E===e.memoizedProps&&oe===e.memoizedState||(n.flags|=1024),c=!1)}return S=c,nl(e,n),c=(n.flags&128)!==0,S||c?(S=n.stateNode,i=c&&typeof i.getDerivedStateFromError!="function"?null:S.render(),n.flags|=1,e!==null&&c?(n.child=Ts(n,e.child,null,y),n.child=Ts(n,null,i,y)):Kt(e,n,i,y),n.memoizedState=S.state,e=n.child):e=va(e,n,y),e}function Og(e,n,i,c){return ws(),n.flags|=256,Kt(e,n,i,c),n.child}var Xu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Zu(e){return{baseLanes:e,cachePool:bh()}}function Qu(e,n,i){return e=e!==null?e.childLanes&~i:0,n&&(e|=Rn),e}function jg(e,n,i){var c=n.pendingProps,y=!1,S=(n.flags&128)!==0,E;if((E=S)||(E=e!==null&&e.memoizedState===null?!1:(Ot.current&2)!==0),E&&(y=!0,n.flags&=-129),E=(n.flags&32)!==0,n.flags&=-33,e===null){if(nt){if(y?Va(n):Fa(),(e=wt)?(e=Hp(e,Ln),e=e!==null&&e.data!=="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:La!==null?{id:Jn,overflow:ea}:null,retryLane:536870912,hydrationErrors:null},i=dh(e),i.return=n,n.child=i,Zt=n,wt=null)):e=null,e===null)throw Ua(n);return kd(e)?n.lanes=32:n.lanes=536870912,null}var z=c.children;return c=c.fallback,y?(Fa(),y=n.mode,z=al({mode:"hidden",children:z},y),c=bs(c,y,i,null),z.return=n,c.return=n,z.sibling=c,n.child=z,c=n.child,c.memoizedState=Zu(i),c.childLanes=Qu(e,E,i),n.memoizedState=Xu,_r(null,c)):(Va(n),Ku(n,z))}var X=e.memoizedState;if(X!==null&&(z=X.dehydrated,z!==null)){if(S)n.flags&256?(Va(n),n.flags&=-257,n=Ju(e,n,i)):n.memoizedState!==null?(Fa(),n.child=e.child,n.flags|=128,n=null):(Fa(),z=c.fallback,y=n.mode,c=al({mode:"visible",children:c.children},y),z=bs(z,y,i,null),z.flags|=2,c.return=n,z.return=n,c.sibling=z,n.child=c,Ts(n,e.child,null,i),c=n.child,c.memoizedState=Zu(i),c.childLanes=Qu(e,E,i),n.memoizedState=Xu,n=_r(null,c));else if(Va(n),kd(z)){if(E=z.nextSibling&&z.nextSibling.dataset,E)var ae=E.dgst;E=ae,c=Error(o(419)),c.stack="",c.digest=E,fr({value:c,source:null,stack:null}),n=Ju(e,n,i)}else if(Lt||mi(e,n,i,!1),E=(i&e.childLanes)!==0,Lt||E){if(E=pt,E!==null&&(c=ym(E,i),c!==0&&c!==X.retryLane))throw X.retryLane=c,vs(e,c),mn(E,e,c),qu;jd(z)||fl(),n=Ju(e,n,i)}else jd(z)?(n.flags|=192,n.child=e.child,n=null):(e=X.treeContext,wt=Un(z.nextSibling),Zt=n,nt=!0,za=null,Ln=!1,e!==null&&hh(n,e),n=Ku(n,c.children),n.flags|=4096);return n}return y?(Fa(),z=c.fallback,y=n.mode,X=e.child,ae=X.sibling,c=ma(X,{mode:"hidden",children:c.children}),c.subtreeFlags=X.subtreeFlags&65011712,ae!==null?z=ma(ae,z):(z=bs(z,y,i,null),z.flags|=2),z.return=n,c.return=n,c.sibling=z,n.child=c,_r(null,c),c=n.child,z=e.child.memoizedState,z===null?z=Zu(i):(y=z.cachePool,y!==null?(X=Bt._currentValue,y=y.parent!==X?{parent:X,pool:X}:y):y=bh(),z={baseLanes:z.baseLanes|i,cachePool:y}),c.memoizedState=z,c.childLanes=Qu(e,E,i),n.memoizedState=Xu,_r(e.child,c)):(Va(n),i=e.child,e=i.sibling,i=ma(i,{mode:"visible",children:c.children}),i.return=n,i.sibling=null,e!==null&&(E=n.deletions,E===null?(n.deletions=[e],n.flags|=16):E.push(e)),n.child=i,n.memoizedState=null,i)}function Ku(e,n){return n=al({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function al(e,n){return e=wn(22,e,null,n),e.lanes=0,e}function Ju(e,n,i){return Ts(n,e.child,null,i),e=Ku(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function kg(e,n,i){e.lanes|=n;var c=e.alternate;c!==null&&(c.lanes|=n),hu(e.return,n,i)}function ed(e,n,i,c,y,S){var E=e.memoizedState;E===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:c,tail:i,tailMode:y,treeForkCount:S}:(E.isBackwards=n,E.rendering=null,E.renderingStartTime=0,E.last=c,E.tail=i,E.tailMode=y,E.treeForkCount=S)}function Dg(e,n,i){var c=n.pendingProps,y=c.revealOrder,S=c.tail;c=c.children;var E=Ot.current,z=(E&2)!==0;if(z?(E=E&1|2,n.flags|=128):E&=1,W(Ot,E),Kt(e,n,c,i),c=nt?dr:0,!z&&e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&kg(e,i,n);else if(e.tag===19)kg(e,i,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(y){case"forwards":for(i=n.child,y=null;i!==null;)e=i.alternate,e!==null&&Fo(e)===null&&(y=i),i=i.sibling;i=y,i===null?(y=n.child,n.child=null):(y=i.sibling,i.sibling=null),ed(n,!1,y,i,S,c);break;case"backwards":case"unstable_legacy-backwards":for(i=null,y=n.child,n.child=null;y!==null;){if(e=y.alternate,e!==null&&Fo(e)===null){n.child=y;break}e=y.sibling,y.sibling=i,i=y,y=e}ed(n,!0,i,null,S,c);break;case"together":ed(n,!1,null,null,void 0,c);break;default:n.memoizedState=null}return n.child}function va(e,n,i){if(e!==null&&(n.dependencies=e.dependencies),Ya|=n.lanes,(i&n.childLanes)===0)if(e!==null){if(mi(e,n,i,!1),(i&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(o(153));if(n.child!==null){for(e=n.child,i=ma(e,e.pendingProps),n.child=i,i.return=n;e.sibling!==null;)e=e.sibling,i=i.sibling=ma(e,e.pendingProps),i.return=n;i.sibling=null}return n.child}function td(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&Lo(e)))}function zw(e,n,i){switch(n.tag){case 3:ie(n,n.stateNode.containerInfo),Ha(n,Bt,e.memoizedState.cache),ws();break;case 27:case 5:fe(n);break;case 4:ie(n,n.stateNode.containerInfo);break;case 10:Ha(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,Eu(n),null;break;case 13:var c=n.memoizedState;if(c!==null)return c.dehydrated!==null?(Va(n),n.flags|=128,null):(i&n.child.childLanes)!==0?jg(e,n,i):(Va(n),e=va(e,n,i),e!==null?e.sibling:null);Va(n);break;case 19:var y=(e.flags&128)!==0;if(c=(i&n.childLanes)!==0,c||(mi(e,n,i,!1),c=(i&n.childLanes)!==0),y){if(c)return Dg(e,n,i);n.flags|=128}if(y=n.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),W(Ot,Ot.current),c)break;return null;case 22:return n.lanes=0,Eg(e,n,i,n.pendingProps);case 24:Ha(n,Bt,e.memoizedState.cache)}return va(e,n,i)}function Bg(e,n,i){if(e!==null)if(e.memoizedProps!==n.pendingProps)Lt=!0;else{if(!td(e,i)&&(n.flags&128)===0)return Lt=!1,zw(e,n,i);Lt=(e.flags&131072)!==0}else Lt=!1,nt&&(n.flags&1048576)!==0&&mh(n,dr,n.index);switch(n.lanes=0,n.tag){case 16:e:{var c=n.pendingProps;if(e=Rs(n.elementType),n.type=e,typeof e=="function")ru(e)?(c=Cs(e,c),n.tag=1,n=Mg(null,n,e,c,i)):(n.tag=0,n=Yu(null,n,e,c,i));else{if(e!=null){var y=e.$$typeof;if(y===k){n.tag=11,n=Ng(null,n,e,c,i);break e}else if(y===B){n.tag=14,n=_g(null,n,e,c,i);break e}}throw n=H(e)||e,Error(o(306,n,""))}}return n;case 0:return Yu(e,n,n.type,n.pendingProps,i);case 1:return c=n.type,y=Cs(c,n.pendingProps),Mg(e,n,c,y,i);case 3:e:{if(ie(n,n.stateNode.containerInfo),e===null)throw Error(o(387));c=n.pendingProps;var S=n.memoizedState;y=S.element,wu(e,n),vr(n,c,null,i);var E=n.memoizedState;if(c=E.cache,Ha(n,Bt,c),c!==S.cache&&gu(n,[Bt],i,!0),yr(),c=E.element,S.isDehydrated)if(S={element:c,isDehydrated:!1,cache:E.cache},n.updateQueue.baseState=S,n.memoizedState=S,n.flags&256){n=Og(e,n,c,i);break e}else if(c!==y){y=Dn(Error(o(424)),n),fr(y),n=Og(e,n,c,i);break e}else{switch(e=n.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(wt=Un(e.firstChild),Zt=n,nt=!0,za=null,Ln=!0,i=Eh(n,null,c,i),n.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling}else{if(ws(),c===y){n=va(e,n,i);break e}Kt(e,n,c,i)}n=n.child}return n;case 26:return nl(e,n),e===null?(i=Wp(n.type,null,n.pendingProps,null))?n.memoizedState=i:nt||(i=n.type,e=n.pendingProps,c=vl(de.current).createElement(i),c[Xt]=n,c[on]=e,Jt(c,i,e),qt(c),n.stateNode=c):n.memoizedState=Wp(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return fe(n),e===null&&nt&&(c=n.stateNode=$p(n.type,n.pendingProps,de.current),Zt=n,Ln=!0,y=wt,Ja(n.type)?(Dd=y,wt=Un(c.firstChild)):wt=y),Kt(e,n,n.pendingProps.children,i),nl(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&nt&&((y=c=wt)&&(c=hS(c,n.type,n.pendingProps,Ln),c!==null?(n.stateNode=c,Zt=n,wt=Un(c.firstChild),Ln=!1,y=!0):y=!1),y||Ua(n)),fe(n),y=n.type,S=n.pendingProps,E=e!==null?e.memoizedProps:null,c=S.children,Cd(y,S)?c=null:E!==null&&Cd(y,E)&&(n.flags|=32),n.memoizedState!==null&&(y=Au(e,n,Cw,null,null,i),Ur._currentValue=y),nl(e,n),Kt(e,n,c,i),n.child;case 6:return e===null&&nt&&((e=i=wt)&&(i=gS(i,n.pendingProps,Ln),i!==null?(n.stateNode=i,Zt=n,wt=null,e=!0):e=!1),e||Ua(n)),null;case 13:return jg(e,n,i);case 4:return ie(n,n.stateNode.containerInfo),c=n.pendingProps,e===null?n.child=Ts(n,null,c,i):Kt(e,n,c,i),n.child;case 11:return Ng(e,n,n.type,n.pendingProps,i);case 7:return Kt(e,n,n.pendingProps,i),n.child;case 8:return Kt(e,n,n.pendingProps.children,i),n.child;case 12:return Kt(e,n,n.pendingProps.children,i),n.child;case 10:return c=n.pendingProps,Ha(n,n.type,c.value),Kt(e,n,c.children,i),n.child;case 9:return y=n.type._context,c=n.pendingProps.children,Ns(n),y=Qt(y),c=c(y),n.flags|=1,Kt(e,n,c,i),n.child;case 14:return _g(e,n,n.type,n.pendingProps,i);case 15:return Rg(e,n,n.type,n.pendingProps,i);case 19:return Dg(e,n,i);case 31:return Lw(e,n,i);case 22:return Eg(e,n,i,n.pendingProps);case 24:return Ns(n),c=Qt(Bt),e===null?(y=yu(),y===null&&(y=pt,S=pu(),y.pooledCache=S,S.refCount++,S!==null&&(y.pooledCacheLanes|=i),y=S),n.memoizedState={parent:c,cache:y},bu(n),Ha(n,Bt,y)):((e.lanes&i)!==0&&(wu(e,n),vr(n,null,null,i),yr()),y=e.memoizedState,S=n.memoizedState,y.parent!==c?(y={parent:c,cache:c},n.memoizedState=y,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=y),Ha(n,Bt,c)):(c=S.cache,Ha(n,Bt,c),c!==y.cache&&gu(n,[Bt],i,!0))),Kt(e,n,n.pendingProps.children,i),n.child;case 29:throw n.pendingProps}throw Error(o(156,n.tag))}function ba(e){e.flags|=4}function nd(e,n,i,c,y){if((n=(e.mode&32)!==0)&&(n=!1),n){if(e.flags|=16777216,(y&335544128)===y)if(e.stateNode.complete)e.flags|=8192;else if(lp())e.flags|=8192;else throw Es=Po,vu}else e.flags&=-16777217}function Ig(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Qp(n))if(lp())e.flags|=8192;else throw Es=Po,vu}function sl(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?gm():536870912,e.lanes|=n,Ri|=n)}function Rr(e,n){if(!nt)switch(e.tailMode){case"hidden":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var c=null;i!==null;)i.alternate!==null&&(c=i),i=i.sibling;c===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:c.sibling=null}}function St(e){var n=e.alternate!==null&&e.alternate.child===e.child,i=0,c=0;if(n)for(var y=e.child;y!==null;)i|=y.lanes|y.childLanes,c|=y.subtreeFlags&65011712,c|=y.flags&65011712,y.return=e,y=y.sibling;else for(y=e.child;y!==null;)i|=y.lanes|y.childLanes,c|=y.subtreeFlags,c|=y.flags,y.return=e,y=y.sibling;return e.subtreeFlags|=c,e.childLanes=i,n}function Uw(e,n,i){var c=n.pendingProps;switch(uu(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return St(n),null;case 1:return St(n),null;case 3:return i=n.stateNode,c=null,e!==null&&(c=e.memoizedState.cache),n.memoizedState.cache!==c&&(n.flags|=2048),pa(Bt),be(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(fi(n)?ba(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,fu())),St(n),null;case 26:var y=n.type,S=n.memoizedState;return e===null?(ba(n),S!==null?(St(n),Ig(n,S)):(St(n),nd(n,y,null,c,i))):S?S!==e.memoizedState?(ba(n),St(n),Ig(n,S)):(St(n),n.flags&=-16777217):(e=e.memoizedProps,e!==c&&ba(n),St(n),nd(n,y,e,c,i)),null;case 27:if(J(n),i=de.current,y=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==c&&ba(n);else{if(!c){if(n.stateNode===null)throw Error(o(166));return St(n),null}e=Y.current,fi(n)?gh(n):(e=$p(y,c,i),n.stateNode=e,ba(n))}return St(n),null;case 5:if(J(n),y=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==c&&ba(n);else{if(!c){if(n.stateNode===null)throw Error(o(166));return St(n),null}if(S=Y.current,fi(n))gh(n);else{var E=vl(de.current);switch(S){case 1:S=E.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:S=E.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":S=E.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":S=E.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":S=E.createElement("div"),S.innerHTML="<script><\/script>",S=S.removeChild(S.firstChild);break;case"select":S=typeof c.is=="string"?E.createElement("select",{is:c.is}):E.createElement("select"),c.multiple?S.multiple=!0:c.size&&(S.size=c.size);break;default:S=typeof c.is=="string"?E.createElement(y,{is:c.is}):E.createElement(y)}}S[Xt]=n,S[on]=c;e:for(E=n.child;E!==null;){if(E.tag===5||E.tag===6)S.appendChild(E.stateNode);else if(E.tag!==4&&E.tag!==27&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===n)break e;for(;E.sibling===null;){if(E.return===null||E.return===n)break e;E=E.return}E.sibling.return=E.return,E=E.sibling}n.stateNode=S;e:switch(Jt(S,y,c),y){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&ba(n)}}return St(n),nd(n,n.type,e===null?null:e.memoizedProps,n.pendingProps,i),null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==c&&ba(n);else{if(typeof c!="string"&&n.stateNode===null)throw Error(o(166));if(e=de.current,fi(n)){if(e=n.stateNode,i=n.memoizedProps,c=null,y=Zt,y!==null)switch(y.tag){case 27:case 5:c=y.memoizedProps}e[Xt]=n,e=!!(e.nodeValue===i||c!==null&&c.suppressHydrationWarning===!0||jp(e.nodeValue,i)),e||Ua(n,!0)}else e=vl(e).createTextNode(c),e[Xt]=n,n.stateNode=e}return St(n),null;case 31:if(i=n.memoizedState,e===null||e.memoizedState!==null){if(c=fi(n),i!==null){if(e===null){if(!c)throw Error(o(318));if(e=n.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(557));e[Xt]=n}else ws(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;St(n),e=!1}else i=fu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=i),e=!0;if(!e)return n.flags&256?(Nn(n),n):(Nn(n),null);if((n.flags&128)!==0)throw Error(o(558))}return St(n),null;case 13:if(c=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(y=fi(n),c!==null&&c.dehydrated!==null){if(e===null){if(!y)throw Error(o(318));if(y=n.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(o(317));y[Xt]=n}else ws(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;St(n),y=!1}else y=fu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=y),y=!0;if(!y)return n.flags&256?(Nn(n),n):(Nn(n),null)}return Nn(n),(n.flags&128)!==0?(n.lanes=i,n):(i=c!==null,e=e!==null&&e.memoizedState!==null,i&&(c=n.child,y=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(y=c.alternate.memoizedState.cachePool.pool),S=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(S=c.memoizedState.cachePool.pool),S!==y&&(c.flags|=2048)),i!==e&&i&&(n.child.flags|=8192),sl(n,n.updateQueue),St(n),null);case 4:return be(),e===null&&_d(n.stateNode.containerInfo),St(n),null;case 10:return pa(n.type),St(n),null;case 19:if(G(Ot),c=n.memoizedState,c===null)return St(n),null;if(y=(n.flags&128)!==0,S=c.rendering,S===null)if(y)Rr(c,!1);else{if(Mt!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(S=Fo(e),S!==null){for(n.flags|=128,Rr(c,!1),e=S.updateQueue,n.updateQueue=e,sl(n,e),n.subtreeFlags=0,e=i,i=n.child;i!==null;)uh(i,e),i=i.sibling;return W(Ot,Ot.current&1|2),nt&&ha(n,c.treeForkCount),n.child}e=e.sibling}c.tail!==null&&Ye()>cl&&(n.flags|=128,y=!0,Rr(c,!1),n.lanes=4194304)}else{if(!y)if(e=Fo(S),e!==null){if(n.flags|=128,y=!0,e=e.updateQueue,n.updateQueue=e,sl(n,e),Rr(c,!0),c.tail===null&&c.tailMode==="hidden"&&!S.alternate&&!nt)return St(n),null}else 2*Ye()-c.renderingStartTime>cl&&i!==536870912&&(n.flags|=128,y=!0,Rr(c,!1),n.lanes=4194304);c.isBackwards?(S.sibling=n.child,n.child=S):(e=c.last,e!==null?e.sibling=S:n.child=S,c.last=S)}return c.tail!==null?(e=c.tail,c.rendering=e,c.tail=e.sibling,c.renderingStartTime=Ye(),e.sibling=null,i=Ot.current,W(Ot,y?i&1|2:i&1),nt&&ha(n,c.treeForkCount),e):(St(n),null);case 22:case 23:return Nn(n),Ru(),c=n.memoizedState!==null,e!==null?e.memoizedState!==null!==c&&(n.flags|=8192):c&&(n.flags|=8192),c?(i&536870912)!==0&&(n.flags&128)===0&&(St(n),n.subtreeFlags&6&&(n.flags|=8192)):St(n),i=n.updateQueue,i!==null&&sl(n,i.retryQueue),i=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),c=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(c=n.memoizedState.cachePool.pool),c!==i&&(n.flags|=2048),e!==null&&G(_s),null;case 24:return i=null,e!==null&&(i=e.memoizedState.cache),n.memoizedState.cache!==i&&(n.flags|=2048),pa(Bt),St(n),null;case 25:return null;case 30:return null}throw Error(o(156,n.tag))}function Hw(e,n){switch(uu(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return pa(Bt),be(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return J(n),null;case 31:if(n.memoizedState!==null){if(Nn(n),n.alternate===null)throw Error(o(340));ws()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 13:if(Nn(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(o(340));ws()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return G(Ot),null;case 4:return be(),null;case 10:return pa(n.type),null;case 22:case 23:return Nn(n),Ru(),e!==null&&G(_s),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return pa(Bt),null;case 25:return null;default:return null}}function Lg(e,n){switch(uu(n),n.tag){case 3:pa(Bt),be();break;case 26:case 27:case 5:J(n);break;case 4:be();break;case 31:n.memoizedState!==null&&Nn(n);break;case 13:Nn(n);break;case 19:G(Ot);break;case 10:pa(n.type);break;case 22:case 23:Nn(n),Ru(),e!==null&&G(_s);break;case 24:pa(Bt)}}function Er(e,n){try{var i=n.updateQueue,c=i!==null?i.lastEffect:null;if(c!==null){var y=c.next;i=y;do{if((i.tag&e)===e){c=void 0;var S=i.create,E=i.inst;c=S(),E.destroy=c}i=i.next}while(i!==y)}}catch(z){dt(n,n.return,z)}}function Wa(e,n,i){try{var c=n.updateQueue,y=c!==null?c.lastEffect:null;if(y!==null){var S=y.next;c=S;do{if((c.tag&e)===e){var E=c.inst,z=E.destroy;if(z!==void 0){E.destroy=void 0,y=n;var X=i,ae=z;try{ae()}catch(me){dt(y,X,me)}}}c=c.next}while(c!==S)}}catch(me){dt(n,n.return,me)}}function zg(e){var n=e.updateQueue;if(n!==null){var i=e.stateNode;try{Ah(n,i)}catch(c){dt(e,e.return,c)}}}function Ug(e,n,i){i.props=Cs(e.type,e.memoizedProps),i.state=e.memoizedState;try{i.componentWillUnmount()}catch(c){dt(e,n,c)}}function Tr(e,n){try{var i=e.ref;if(i!==null){switch(e.tag){case 26:case 27:case 5:var c=e.stateNode;break;case 30:c=e.stateNode;break;default:c=e.stateNode}typeof i=="function"?e.refCleanup=i(c):i.current=c}}catch(y){dt(e,n,y)}}function ta(e,n){var i=e.ref,c=e.refCleanup;if(i!==null)if(typeof c=="function")try{c()}catch(y){dt(e,n,y)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(y){dt(e,n,y)}else i.current=null}function Hg(e){var n=e.type,i=e.memoizedProps,c=e.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":i.autoFocus&&c.focus();break e;case"img":i.src?c.src=i.src:i.srcSet&&(c.srcset=i.srcSet)}}catch(y){dt(e,e.return,y)}}function ad(e,n,i){try{var c=e.stateNode;lS(c,e.type,i,n),c[on]=n}catch(y){dt(e,e.return,y)}}function Pg(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Ja(e.type)||e.tag===4}function sd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Pg(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Ja(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function id(e,n,i){var c=e.tag;if(c===5||c===6)e=e.stateNode,n?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(e,n):(n=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,n.appendChild(e),i=i._reactRootContainer,i!=null||n.onclick!==null||(n.onclick=da));else if(c!==4&&(c===27&&Ja(e.type)&&(i=e.stateNode,n=null),e=e.child,e!==null))for(id(e,n,i),e=e.sibling;e!==null;)id(e,n,i),e=e.sibling}function il(e,n,i){var c=e.tag;if(c===5||c===6)e=e.stateNode,n?i.insertBefore(e,n):i.appendChild(e);else if(c!==4&&(c===27&&Ja(e.type)&&(i=e.stateNode),e=e.child,e!==null))for(il(e,n,i),e=e.sibling;e!==null;)il(e,n,i),e=e.sibling}function Gg(e){var n=e.stateNode,i=e.memoizedProps;try{for(var c=e.type,y=n.attributes;y.length;)n.removeAttributeNode(y[0]);Jt(n,c,i),n[Xt]=e,n[on]=i}catch(S){dt(e,e.return,S)}}var wa=!1,zt=!1,rd=!1,$g=typeof WeakSet=="function"?WeakSet:Set,Yt=null;function Pw(e,n){if(e=e.containerInfo,Td=El,e=th(e),Jc(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var c=i.getSelection&&i.getSelection();if(c&&c.rangeCount!==0){i=c.anchorNode;var y=c.anchorOffset,S=c.focusNode;c=c.focusOffset;try{i.nodeType,S.nodeType}catch{i=null;break e}var E=0,z=-1,X=-1,ae=0,me=0,pe=e,oe=null;t:for(;;){for(var ue;pe!==i||y!==0&&pe.nodeType!==3||(z=E+y),pe!==S||c!==0&&pe.nodeType!==3||(X=E+c),pe.nodeType===3&&(E+=pe.nodeValue.length),(ue=pe.firstChild)!==null;)oe=pe,pe=ue;for(;;){if(pe===e)break t;if(oe===i&&++ae===y&&(z=E),oe===S&&++me===c&&(X=E),(ue=pe.nextSibling)!==null)break;pe=oe,oe=pe.parentNode}pe=ue}i=z===-1||X===-1?null:{start:z,end:X}}else i=null}i=i||{start:0,end:0}}else i=null;for(Ad={focusedElem:e,selectionRange:i},El=!1,Yt=n;Yt!==null;)if(n=Yt,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,Yt=e;else for(;Yt!==null;){switch(n=Yt,S=n.alternate,e=n.flags,n.tag){case 0:if((e&4)!==0&&(e=n.updateQueue,e=e!==null?e.events:null,e!==null))for(i=0;i<e.length;i++)y=e[i],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&S!==null){e=void 0,i=n,y=S.memoizedProps,S=S.memoizedState,c=i.stateNode;try{var Ee=Cs(i.type,y);e=c.getSnapshotBeforeUpdate(Ee,S),c.__reactInternalSnapshotBeforeUpdate=e}catch(ze){dt(i,i.return,ze)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,i=e.nodeType,i===9)Od(e);else if(i===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Od(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(o(163))}if(e=n.sibling,e!==null){e.return=n.return,Yt=e;break}Yt=n.return}}function Vg(e,n,i){var c=i.flags;switch(i.tag){case 0:case 11:case 15:Na(e,i),c&4&&Er(5,i);break;case 1:if(Na(e,i),c&4)if(e=i.stateNode,n===null)try{e.componentDidMount()}catch(E){dt(i,i.return,E)}else{var y=Cs(i.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(y,n,e.__reactInternalSnapshotBeforeUpdate)}catch(E){dt(i,i.return,E)}}c&64&&zg(i),c&512&&Tr(i,i.return);break;case 3:if(Na(e,i),c&64&&(e=i.updateQueue,e!==null)){if(n=null,i.child!==null)switch(i.child.tag){case 27:case 5:n=i.child.stateNode;break;case 1:n=i.child.stateNode}try{Ah(e,n)}catch(E){dt(i,i.return,E)}}break;case 27:n===null&&c&4&&Gg(i);case 26:case 5:Na(e,i),n===null&&c&4&&Hg(i),c&512&&Tr(i,i.return);break;case 12:Na(e,i);break;case 31:Na(e,i),c&4&&qg(e,i);break;case 13:Na(e,i),c&4&&Yg(e,i),c&64&&(e=i.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(i=Zw.bind(null,i),pS(e,i))));break;case 22:if(c=i.memoizedState!==null||wa,!c){n=n!==null&&n.memoizedState!==null||zt,y=wa;var S=zt;wa=c,(zt=n)&&!S?_a(e,i,(i.subtreeFlags&8772)!==0):Na(e,i),wa=y,zt=S}break;case 30:break;default:Na(e,i)}}function Fg(e){var n=e.alternate;n!==null&&(e.alternate=null,Fg(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&Ic(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var _t=null,cn=!1;function Sa(e,n,i){for(i=i.child;i!==null;)Wg(e,n,i),i=i.sibling}function Wg(e,n,i){if(He&&typeof He.onCommitFiberUnmount=="function")try{He.onCommitFiberUnmount(_e,i)}catch{}switch(i.tag){case 26:zt||ta(i,n),Sa(e,n,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:zt||ta(i,n);var c=_t,y=cn;Ja(i.type)&&(_t=i.stateNode,cn=!1),Sa(e,n,i),Ir(i.stateNode),_t=c,cn=y;break;case 5:zt||ta(i,n);case 6:if(c=_t,y=cn,_t=null,Sa(e,n,i),_t=c,cn=y,_t!==null)if(cn)try{(_t.nodeType===9?_t.body:_t.nodeName==="HTML"?_t.ownerDocument.body:_t).removeChild(i.stateNode)}catch(S){dt(i,n,S)}else try{_t.removeChild(i.stateNode)}catch(S){dt(i,n,S)}break;case 18:_t!==null&&(cn?(e=_t,zp(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,i.stateNode),ki(e)):zp(_t,i.stateNode));break;case 4:c=_t,y=cn,_t=i.stateNode.containerInfo,cn=!0,Sa(e,n,i),_t=c,cn=y;break;case 0:case 11:case 14:case 15:Wa(2,i,n),zt||Wa(4,i,n),Sa(e,n,i);break;case 1:zt||(ta(i,n),c=i.stateNode,typeof c.componentWillUnmount=="function"&&Ug(i,n,c)),Sa(e,n,i);break;case 21:Sa(e,n,i);break;case 22:zt=(c=zt)||i.memoizedState!==null,Sa(e,n,i),zt=c;break;default:Sa(e,n,i)}}function qg(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{ki(e)}catch(i){dt(n,n.return,i)}}}function Yg(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{ki(e)}catch(i){dt(n,n.return,i)}}function Gw(e){switch(e.tag){case 31:case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new $g),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new $g),n;default:throw Error(o(435,e.tag))}}function rl(e,n){var i=Gw(e);n.forEach(function(c){if(!i.has(c)){i.add(c);var y=Qw.bind(null,e,c);c.then(y,y)}})}function un(e,n){var i=n.deletions;if(i!==null)for(var c=0;c<i.length;c++){var y=i[c],S=e,E=n,z=E;e:for(;z!==null;){switch(z.tag){case 27:if(Ja(z.type)){_t=z.stateNode,cn=!1;break e}break;case 5:_t=z.stateNode,cn=!1;break e;case 3:case 4:_t=z.stateNode.containerInfo,cn=!0;break e}z=z.return}if(_t===null)throw Error(o(160));Wg(S,E,y),_t=null,cn=!1,S=y.alternate,S!==null&&(S.return=null),y.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)Xg(n,e),n=n.sibling}var Yn=null;function Xg(e,n){var i=e.alternate,c=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:un(n,e),dn(e),c&4&&(Wa(3,e,e.return),Er(3,e),Wa(5,e,e.return));break;case 1:un(n,e),dn(e),c&512&&(zt||i===null||ta(i,i.return)),c&64&&wa&&(e=e.updateQueue,e!==null&&(c=e.callbacks,c!==null&&(i=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=i===null?c:i.concat(c))));break;case 26:var y=Yn;if(un(n,e),dn(e),c&512&&(zt||i===null||ta(i,i.return)),c&4){var S=i!==null?i.memoizedState:null;if(c=e.memoizedState,i===null)if(c===null)if(e.stateNode===null){e:{c=e.type,i=e.memoizedProps,y=y.ownerDocument||y;t:switch(c){case"title":S=y.getElementsByTagName("title")[0],(!S||S[er]||S[Xt]||S.namespaceURI==="http://www.w3.org/2000/svg"||S.hasAttribute("itemprop"))&&(S=y.createElement(c),y.head.insertBefore(S,y.querySelector("head > title"))),Jt(S,c,i),S[Xt]=e,qt(S),c=S;break e;case"link":var E=Xp("link","href",y).get(c+(i.href||""));if(E){for(var z=0;z<E.length;z++)if(S=E[z],S.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&S.getAttribute("rel")===(i.rel==null?null:i.rel)&&S.getAttribute("title")===(i.title==null?null:i.title)&&S.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){E.splice(z,1);break t}}S=y.createElement(c),Jt(S,c,i),y.head.appendChild(S);break;case"meta":if(E=Xp("meta","content",y).get(c+(i.content||""))){for(z=0;z<E.length;z++)if(S=E[z],S.getAttribute("content")===(i.content==null?null:""+i.content)&&S.getAttribute("name")===(i.name==null?null:i.name)&&S.getAttribute("property")===(i.property==null?null:i.property)&&S.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&S.getAttribute("charset")===(i.charSet==null?null:i.charSet)){E.splice(z,1);break t}}S=y.createElement(c),Jt(S,c,i),y.head.appendChild(S);break;default:throw Error(o(468,c))}S[Xt]=e,qt(S),c=S}e.stateNode=c}else Zp(y,e.type,e.stateNode);else e.stateNode=Yp(y,c,e.memoizedProps);else S!==c?(S===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):S.count--,c===null?Zp(y,e.type,e.stateNode):Yp(y,c,e.memoizedProps)):c===null&&e.stateNode!==null&&ad(e,e.memoizedProps,i.memoizedProps)}break;case 27:un(n,e),dn(e),c&512&&(zt||i===null||ta(i,i.return)),i!==null&&c&4&&ad(e,e.memoizedProps,i.memoizedProps);break;case 5:if(un(n,e),dn(e),c&512&&(zt||i===null||ta(i,i.return)),e.flags&32){y=e.stateNode;try{ni(y,"")}catch(Ee){dt(e,e.return,Ee)}}c&4&&e.stateNode!=null&&(y=e.memoizedProps,ad(e,y,i!==null?i.memoizedProps:y)),c&1024&&(rd=!0);break;case 6:if(un(n,e),dn(e),c&4){if(e.stateNode===null)throw Error(o(162));c=e.memoizedProps,i=e.stateNode;try{i.nodeValue=c}catch(Ee){dt(e,e.return,Ee)}}break;case 3:if(Sl=null,y=Yn,Yn=bl(n.containerInfo),un(n,e),Yn=y,dn(e),c&4&&i!==null&&i.memoizedState.isDehydrated)try{ki(n.containerInfo)}catch(Ee){dt(e,e.return,Ee)}rd&&(rd=!1,Zg(e));break;case 4:c=Yn,Yn=bl(e.stateNode.containerInfo),un(n,e),dn(e),Yn=c;break;case 12:un(n,e),dn(e);break;case 31:un(n,e),dn(e),c&4&&(c=e.updateQueue,c!==null&&(e.updateQueue=null,rl(e,c)));break;case 13:un(n,e),dn(e),e.child.flags&8192&&e.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(ll=Ye()),c&4&&(c=e.updateQueue,c!==null&&(e.updateQueue=null,rl(e,c)));break;case 22:y=e.memoizedState!==null;var X=i!==null&&i.memoizedState!==null,ae=wa,me=zt;if(wa=ae||y,zt=me||X,un(n,e),zt=me,wa=ae,dn(e),c&8192)e:for(n=e.stateNode,n._visibility=y?n._visibility&-2:n._visibility|1,y&&(i===null||X||wa||zt||Ms(e)),i=null,n=e;;){if(n.tag===5||n.tag===26){if(i===null){X=i=n;try{if(S=X.stateNode,y)E=S.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{z=X.stateNode;var pe=X.memoizedProps.style,oe=pe!=null&&pe.hasOwnProperty("display")?pe.display:null;z.style.display=oe==null||typeof oe=="boolean"?"":(""+oe).trim()}}catch(Ee){dt(X,X.return,Ee)}}}else if(n.tag===6){if(i===null){X=n;try{X.stateNode.nodeValue=y?"":X.memoizedProps}catch(Ee){dt(X,X.return,Ee)}}}else if(n.tag===18){if(i===null){X=n;try{var ue=X.stateNode;y?Up(ue,!0):Up(X.stateNode,!1)}catch(Ee){dt(X,X.return,Ee)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;i===n&&(i=null),n=n.return}i===n&&(i=null),n.sibling.return=n.return,n=n.sibling}c&4&&(c=e.updateQueue,c!==null&&(i=c.retryQueue,i!==null&&(c.retryQueue=null,rl(e,i))));break;case 19:un(n,e),dn(e),c&4&&(c=e.updateQueue,c!==null&&(e.updateQueue=null,rl(e,c)));break;case 30:break;case 21:break;default:un(n,e),dn(e)}}function dn(e){var n=e.flags;if(n&2){try{for(var i,c=e.return;c!==null;){if(Pg(c)){i=c;break}c=c.return}if(i==null)throw Error(o(160));switch(i.tag){case 27:var y=i.stateNode,S=sd(e);il(e,S,y);break;case 5:var E=i.stateNode;i.flags&32&&(ni(E,""),i.flags&=-33);var z=sd(e);il(e,z,E);break;case 3:case 4:var X=i.stateNode.containerInfo,ae=sd(e);id(e,ae,X);break;default:throw Error(o(161))}}catch(me){dt(e,e.return,me)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function Zg(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;Zg(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function Na(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)Vg(e,n.alternate,n),n=n.sibling}function Ms(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:Wa(4,n,n.return),Ms(n);break;case 1:ta(n,n.return);var i=n.stateNode;typeof i.componentWillUnmount=="function"&&Ug(n,n.return,i),Ms(n);break;case 27:Ir(n.stateNode);case 26:case 5:ta(n,n.return),Ms(n);break;case 22:n.memoizedState===null&&Ms(n);break;case 30:Ms(n);break;default:Ms(n)}e=e.sibling}}function _a(e,n,i){for(i=i&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var c=n.alternate,y=e,S=n,E=S.flags;switch(S.tag){case 0:case 11:case 15:_a(y,S,i),Er(4,S);break;case 1:if(_a(y,S,i),c=S,y=c.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(ae){dt(c,c.return,ae)}if(c=S,y=c.updateQueue,y!==null){var z=c.stateNode;try{var X=y.shared.hiddenCallbacks;if(X!==null)for(y.shared.hiddenCallbacks=null,y=0;y<X.length;y++)Th(X[y],z)}catch(ae){dt(c,c.return,ae)}}i&&E&64&&zg(S),Tr(S,S.return);break;case 27:Gg(S);case 26:case 5:_a(y,S,i),i&&c===null&&E&4&&Hg(S),Tr(S,S.return);break;case 12:_a(y,S,i);break;case 31:_a(y,S,i),i&&E&4&&qg(y,S);break;case 13:_a(y,S,i),i&&E&4&&Yg(y,S);break;case 22:S.memoizedState===null&&_a(y,S,i),Tr(S,S.return);break;case 30:break;default:_a(y,S,i)}n=n.sibling}}function od(e,n){var i=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==i&&(e!=null&&e.refCount++,i!=null&&mr(i))}function ld(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&mr(e))}function Xn(e,n,i,c){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Qg(e,n,i,c),n=n.sibling}function Qg(e,n,i,c){var y=n.flags;switch(n.tag){case 0:case 11:case 15:Xn(e,n,i,c),y&2048&&Er(9,n);break;case 1:Xn(e,n,i,c);break;case 3:Xn(e,n,i,c),y&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&mr(e)));break;case 12:if(y&2048){Xn(e,n,i,c),e=n.stateNode;try{var S=n.memoizedProps,E=S.id,z=S.onPostCommit;typeof z=="function"&&z(E,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(X){dt(n,n.return,X)}}else Xn(e,n,i,c);break;case 31:Xn(e,n,i,c);break;case 13:Xn(e,n,i,c);break;case 23:break;case 22:S=n.stateNode,E=n.alternate,n.memoizedState!==null?S._visibility&2?Xn(e,n,i,c):Ar(e,n):S._visibility&2?Xn(e,n,i,c):(S._visibility|=2,Si(e,n,i,c,(n.subtreeFlags&10256)!==0||!1)),y&2048&&od(E,n);break;case 24:Xn(e,n,i,c),y&2048&&ld(n.alternate,n);break;default:Xn(e,n,i,c)}}function Si(e,n,i,c,y){for(y=y&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var S=e,E=n,z=i,X=c,ae=E.flags;switch(E.tag){case 0:case 11:case 15:Si(S,E,z,X,y),Er(8,E);break;case 23:break;case 22:var me=E.stateNode;E.memoizedState!==null?me._visibility&2?Si(S,E,z,X,y):Ar(S,E):(me._visibility|=2,Si(S,E,z,X,y)),y&&ae&2048&&od(E.alternate,E);break;case 24:Si(S,E,z,X,y),y&&ae&2048&&ld(E.alternate,E);break;default:Si(S,E,z,X,y)}n=n.sibling}}function Ar(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var i=e,c=n,y=c.flags;switch(c.tag){case 22:Ar(i,c),y&2048&&od(c.alternate,c);break;case 24:Ar(i,c),y&2048&&ld(c.alternate,c);break;default:Ar(i,c)}n=n.sibling}}var Cr=8192;function Ni(e,n,i){if(e.subtreeFlags&Cr)for(e=e.child;e!==null;)Kg(e,n,i),e=e.sibling}function Kg(e,n,i){switch(e.tag){case 26:Ni(e,n,i),e.flags&Cr&&e.memoizedState!==null&&AS(i,Yn,e.memoizedState,e.memoizedProps);break;case 5:Ni(e,n,i);break;case 3:case 4:var c=Yn;Yn=bl(e.stateNode.containerInfo),Ni(e,n,i),Yn=c;break;case 22:e.memoizedState===null&&(c=e.alternate,c!==null&&c.memoizedState!==null?(c=Cr,Cr=16777216,Ni(e,n,i),Cr=c):Ni(e,n,i));break;default:Ni(e,n,i)}}function Jg(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function Mr(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var i=0;i<n.length;i++){var c=n[i];Yt=c,tp(c,e)}Jg(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)ep(e),e=e.sibling}function ep(e){switch(e.tag){case 0:case 11:case 15:Mr(e),e.flags&2048&&Wa(9,e,e.return);break;case 3:Mr(e);break;case 12:Mr(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,ol(e)):Mr(e);break;default:Mr(e)}}function ol(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var i=0;i<n.length;i++){var c=n[i];Yt=c,tp(c,e)}Jg(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:Wa(8,n,n.return),ol(n);break;case 22:i=n.stateNode,i._visibility&2&&(i._visibility&=-3,ol(n));break;default:ol(n)}e=e.sibling}}function tp(e,n){for(;Yt!==null;){var i=Yt;switch(i.tag){case 0:case 11:case 15:Wa(8,i,n);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var c=i.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:mr(i.memoizedState.cache)}if(c=i.child,c!==null)c.return=i,Yt=c;else e:for(i=e;Yt!==null;){c=Yt;var y=c.sibling,S=c.return;if(Fg(c),c===i){Yt=null;break e}if(y!==null){y.return=S,Yt=y;break e}Yt=S}}}var $w={getCacheForType:function(e){var n=Qt(Bt),i=n.data.get(e);return i===void 0&&(i=e(),n.data.set(e,i)),i},cacheSignal:function(){return Qt(Bt).controller.signal}},Vw=typeof WeakMap=="function"?WeakMap:Map,ct=0,pt=null,Qe=null,Je=0,ut=0,_n=null,qa=!1,_i=!1,cd=!1,Ra=0,Mt=0,Ya=0,Os=0,ud=0,Rn=0,Ri=0,Or=null,fn=null,dd=!1,ll=0,np=0,cl=1/0,ul=null,Xa=null,Gt=0,Za=null,Ei=null,Ea=0,fd=0,md=null,ap=null,jr=0,hd=null;function En(){return(ct&2)!==0&&Je!==0?Je&-Je:$.T!==null?bd():vm()}function sp(){if(Rn===0)if((Je&536870912)===0||nt){var e=Xs;Xs<<=1,(Xs&3932160)===0&&(Xs=262144),Rn=e}else Rn=536870912;return e=Sn.current,e!==null&&(e.flags|=32),Rn}function mn(e,n,i){(e===pt&&(ut===2||ut===9)||e.cancelPendingCommit!==null)&&(Ti(e,0),Qa(e,Je,Rn,!1)),Ji(e,i),((ct&2)===0||e!==pt)&&(e===pt&&((ct&2)===0&&(Os|=i),Mt===4&&Qa(e,Je,Rn,!1)),na(e))}function ip(e,n,i){if((ct&6)!==0)throw Error(o(327));var c=!i&&(n&127)===0&&(n&e.expiredLanes)===0||Ki(e,n),y=c?qw(e,n):pd(e,n,!0),S=c;do{if(y===0){_i&&!c&&Qa(e,n,0,!1);break}else{if(i=e.current.alternate,S&&!Fw(i)){y=pd(e,n,!1),S=!1;continue}if(y===2){if(S=n,e.errorRecoveryDisabledLanes&S)var E=0;else E=e.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){n=E;e:{var z=e;y=Or;var X=z.current.memoizedState.isDehydrated;if(X&&(Ti(z,E).flags|=256),E=pd(z,E,!1),E!==2){if(cd&&!X){z.errorRecoveryDisabledLanes|=S,Os|=S,y=4;break e}S=fn,fn=y,S!==null&&(fn===null?fn=S:fn.push.apply(fn,S))}y=E}if(S=!1,y!==2)continue}}if(y===1){Ti(e,0),Qa(e,n,0,!0);break}e:{switch(c=e,S=y,S){case 0:case 1:throw Error(o(345));case 4:if((n&4194048)!==n)break;case 6:Qa(c,n,Rn,!qa);break e;case 2:fn=null;break;case 3:case 5:break;default:throw Error(o(329))}if((n&62914560)===n&&(y=ll+300-Ye(),10<y)){if(Qa(c,n,Rn,!qa),bo(c,0,!0)!==0)break e;Ea=n,c.timeoutHandle=Ip(rp.bind(null,c,i,fn,ul,dd,n,Rn,Os,Ri,qa,S,"Throttled",-0,0),y);break e}rp(c,i,fn,ul,dd,n,Rn,Os,Ri,qa,S,null,-0,0)}}break}while(!0);na(e)}function rp(e,n,i,c,y,S,E,z,X,ae,me,pe,oe,ue){if(e.timeoutHandle=-1,pe=n.subtreeFlags,pe&8192||(pe&16785408)===16785408){pe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:da},Kg(n,S,pe);var Ee=(S&62914560)===S?ll-Ye():(S&4194048)===S?np-Ye():0;if(Ee=CS(pe,Ee),Ee!==null){Ea=S,e.cancelPendingCommit=Ee(hp.bind(null,e,n,S,i,c,y,E,z,X,me,pe,null,oe,ue)),Qa(e,S,E,!ae);return}}hp(e,n,S,i,c,y,E,z,X)}function Fw(e){for(var n=e;;){var i=n.tag;if((i===0||i===11||i===15)&&n.flags&16384&&(i=n.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var c=0;c<i.length;c++){var y=i[c],S=y.getSnapshot;y=y.value;try{if(!bn(S(),y))return!1}catch{return!1}}if(i=n.child,n.subtreeFlags&16384&&i!==null)i.return=n,n=i;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Qa(e,n,i,c){n&=~ud,n&=~Os,e.suspendedLanes|=n,e.pingedLanes&=~n,c&&(e.warmLanes|=n),c=e.expirationTimes;for(var y=n;0<y;){var S=31-Pe(y),E=1<<S;c[S]=-1,y&=~E}i!==0&&pm(e,i,n)}function dl(){return(ct&6)===0?(kr(0),!1):!0}function gd(){if(Qe!==null){if(ut===0)var e=Qe.return;else e=Qe,ga=Ss=null,Ou(e),xi=null,gr=0,e=Qe;for(;e!==null;)Lg(e.alternate,e),e=e.return;Qe=null}}function Ti(e,n){var i=e.timeoutHandle;i!==-1&&(e.timeoutHandle=-1,dS(i)),i=e.cancelPendingCommit,i!==null&&(e.cancelPendingCommit=null,i()),Ea=0,gd(),pt=e,Qe=i=ma(e.current,null),Je=n,ut=0,_n=null,qa=!1,_i=Ki(e,n),cd=!1,Ri=Rn=ud=Os=Ya=Mt=0,fn=Or=null,dd=!1,(n&8)!==0&&(n|=n&32);var c=e.entangledLanes;if(c!==0)for(e=e.entanglements,c&=n;0<c;){var y=31-Pe(c),S=1<<y;n|=e[y],c&=~S}return Ra=n,jo(),i}function op(e,n){Ve=null,$.H=Nr,n===pi||n===Ho?(n=Nh(),ut=3):n===vu?(n=Nh(),ut=4):ut=n===qu?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,_n=n,Qe===null&&(Mt=1,el(e,Dn(n,e.current)))}function lp(){var e=Sn.current;return e===null?!0:(Je&4194048)===Je?zn===null:(Je&62914560)===Je||(Je&536870912)!==0?e===zn:!1}function cp(){var e=$.H;return $.H=Nr,e===null?Nr:e}function up(){var e=$.A;return $.A=$w,e}function fl(){Mt=4,qa||(Je&4194048)!==Je&&Sn.current!==null||(_i=!0),(Ya&134217727)===0&&(Os&134217727)===0||pt===null||Qa(pt,Je,Rn,!1)}function pd(e,n,i){var c=ct;ct|=2;var y=cp(),S=up();(pt!==e||Je!==n)&&(ul=null,Ti(e,n)),n=!1;var E=Mt;e:do try{if(ut!==0&&Qe!==null){var z=Qe,X=_n;switch(ut){case 8:gd(),E=6;break e;case 3:case 2:case 9:case 6:Sn.current===null&&(n=!0);var ae=ut;if(ut=0,_n=null,Ai(e,z,X,ae),i&&_i){E=0;break e}break;default:ae=ut,ut=0,_n=null,Ai(e,z,X,ae)}}Ww(),E=Mt;break}catch(me){op(e,me)}while(!0);return n&&e.shellSuspendCounter++,ga=Ss=null,ct=c,$.H=y,$.A=S,Qe===null&&(pt=null,Je=0,jo()),E}function Ww(){for(;Qe!==null;)dp(Qe)}function qw(e,n){var i=ct;ct|=2;var c=cp(),y=up();pt!==e||Je!==n?(ul=null,cl=Ye()+500,Ti(e,n)):_i=Ki(e,n);e:do try{if(ut!==0&&Qe!==null){n=Qe;var S=_n;t:switch(ut){case 1:ut=0,_n=null,Ai(e,n,S,1);break;case 2:case 9:if(wh(S)){ut=0,_n=null,fp(n);break}n=function(){ut!==2&&ut!==9||pt!==e||(ut=7),na(e)},S.then(n,n);break e;case 3:ut=7;break e;case 4:ut=5;break e;case 7:wh(S)?(ut=0,_n=null,fp(n)):(ut=0,_n=null,Ai(e,n,S,7));break;case 5:var E=null;switch(Qe.tag){case 26:E=Qe.memoizedState;case 5:case 27:var z=Qe;if(E?Qp(E):z.stateNode.complete){ut=0,_n=null;var X=z.sibling;if(X!==null)Qe=X;else{var ae=z.return;ae!==null?(Qe=ae,ml(ae)):Qe=null}break t}}ut=0,_n=null,Ai(e,n,S,5);break;case 6:ut=0,_n=null,Ai(e,n,S,6);break;case 8:gd(),Mt=6;break e;default:throw Error(o(462))}}Yw();break}catch(me){op(e,me)}while(!0);return ga=Ss=null,$.H=c,$.A=y,ct=i,Qe!==null?0:(pt=null,Je=0,jo(),Mt)}function Yw(){for(;Qe!==null&&!it();)dp(Qe)}function dp(e){var n=Bg(e.alternate,e,Ra);e.memoizedProps=e.pendingProps,n===null?ml(e):Qe=n}function fp(e){var n=e,i=n.alternate;switch(n.tag){case 15:case 0:n=Cg(i,n,n.pendingProps,n.type,void 0,Je);break;case 11:n=Cg(i,n,n.pendingProps,n.type.render,n.ref,Je);break;case 5:Ou(n);default:Lg(i,n),n=Qe=uh(n,Ra),n=Bg(i,n,Ra)}e.memoizedProps=e.pendingProps,n===null?ml(e):Qe=n}function Ai(e,n,i,c){ga=Ss=null,Ou(n),xi=null,gr=0;var y=n.return;try{if(Iw(e,y,n,i,Je)){Mt=1,el(e,Dn(i,e.current)),Qe=null;return}}catch(S){if(y!==null)throw Qe=y,S;Mt=1,el(e,Dn(i,e.current)),Qe=null;return}n.flags&32768?(nt||c===1?e=!0:_i||(Je&536870912)!==0?e=!1:(qa=e=!0,(c===2||c===9||c===3||c===6)&&(c=Sn.current,c!==null&&c.tag===13&&(c.flags|=16384))),mp(n,e)):ml(n)}function ml(e){var n=e;do{if((n.flags&32768)!==0){mp(n,qa);return}e=n.return;var i=Uw(n.alternate,n,Ra);if(i!==null){Qe=i;return}if(n=n.sibling,n!==null){Qe=n;return}Qe=n=e}while(n!==null);Mt===0&&(Mt=5)}function mp(e,n){do{var i=Hw(e.alternate,e);if(i!==null){i.flags&=32767,Qe=i;return}if(i=e.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!n&&(e=e.sibling,e!==null)){Qe=e;return}Qe=e=i}while(e!==null);Mt=6,Qe=null}function hp(e,n,i,c,y,S,E,z,X){e.cancelPendingCommit=null;do hl();while(Gt!==0);if((ct&6)!==0)throw Error(o(327));if(n!==null){if(n===e.current)throw Error(o(177));if(S=n.lanes|n.childLanes,S|=su,Tb(e,i,S,E,z,X),e===pt&&(Qe=pt=null,Je=0),Ei=n,Za=e,Ea=i,fd=S,md=y,ap=c,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Kw(rn,function(){return vp(),null})):(e.callbackNode=null,e.callbackPriority=0),c=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||c){c=$.T,$.T=null,y=Z.p,Z.p=2,E=ct,ct|=4;try{Pw(e,n,i)}finally{ct=E,Z.p=y,$.T=c}}Gt=1,gp(),pp(),xp()}}function gp(){if(Gt===1){Gt=0;var e=Za,n=Ei,i=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||i){i=$.T,$.T=null;var c=Z.p;Z.p=2;var y=ct;ct|=4;try{Xg(n,e);var S=Ad,E=th(e.containerInfo),z=S.focusedElem,X=S.selectionRange;if(E!==z&&z&&z.ownerDocument&&eh(z.ownerDocument.documentElement,z)){if(X!==null&&Jc(z)){var ae=X.start,me=X.end;if(me===void 0&&(me=ae),"selectionStart"in z)z.selectionStart=ae,z.selectionEnd=Math.min(me,z.value.length);else{var pe=z.ownerDocument||document,oe=pe&&pe.defaultView||window;if(oe.getSelection){var ue=oe.getSelection(),Ee=z.textContent.length,ze=Math.min(X.start,Ee),gt=X.end===void 0?ze:Math.min(X.end,Ee);!ue.extend&&ze>gt&&(E=gt,gt=ze,ze=E);var te=Jm(z,ze),K=Jm(z,gt);if(te&&K&&(ue.rangeCount!==1||ue.anchorNode!==te.node||ue.anchorOffset!==te.offset||ue.focusNode!==K.node||ue.focusOffset!==K.offset)){var ne=pe.createRange();ne.setStart(te.node,te.offset),ue.removeAllRanges(),ze>gt?(ue.addRange(ne),ue.extend(K.node,K.offset)):(ne.setEnd(K.node,K.offset),ue.addRange(ne))}}}}for(pe=[],ue=z;ue=ue.parentNode;)ue.nodeType===1&&pe.push({element:ue,left:ue.scrollLeft,top:ue.scrollTop});for(typeof z.focus=="function"&&z.focus(),z=0;z<pe.length;z++){var he=pe[z];he.element.scrollLeft=he.left,he.element.scrollTop=he.top}}El=!!Td,Ad=Td=null}finally{ct=y,Z.p=c,$.T=i}}e.current=n,Gt=2}}function pp(){if(Gt===2){Gt=0;var e=Za,n=Ei,i=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||i){i=$.T,$.T=null;var c=Z.p;Z.p=2;var y=ct;ct|=4;try{Vg(e,n.alternate,n)}finally{ct=y,Z.p=c,$.T=i}}Gt=3}}function xp(){if(Gt===4||Gt===3){Gt=0,tt();var e=Za,n=Ei,i=Ea,c=ap;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?Gt=5:(Gt=0,Ei=Za=null,yp(e,e.pendingLanes));var y=e.pendingLanes;if(y===0&&(Xa=null),Dc(i),n=n.stateNode,He&&typeof He.onCommitFiberRoot=="function")try{He.onCommitFiberRoot(_e,n,void 0,(n.current.flags&128)===128)}catch{}if(c!==null){n=$.T,y=Z.p,Z.p=2,$.T=null;try{for(var S=e.onRecoverableError,E=0;E<c.length;E++){var z=c[E];S(z.value,{componentStack:z.stack})}}finally{$.T=n,Z.p=y}}(Ea&3)!==0&&hl(),na(e),y=e.pendingLanes,(i&261930)!==0&&(y&42)!==0?e===hd?jr++:(jr=0,hd=e):jr=0,kr(0)}}function yp(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,mr(n)))}function hl(){return gp(),pp(),xp(),vp()}function vp(){if(Gt!==5)return!1;var e=Za,n=fd;fd=0;var i=Dc(Ea),c=$.T,y=Z.p;try{Z.p=32>i?32:i,$.T=null,i=md,md=null;var S=Za,E=Ea;if(Gt=0,Ei=Za=null,Ea=0,(ct&6)!==0)throw Error(o(331));var z=ct;if(ct|=4,ep(S.current),Qg(S,S.current,E,i),ct=z,kr(0,!1),He&&typeof He.onPostCommitFiberRoot=="function")try{He.onPostCommitFiberRoot(_e,S)}catch{}return!0}finally{Z.p=y,$.T=c,yp(e,n)}}function bp(e,n,i){n=Dn(i,n),n=Wu(e.stateNode,n,2),e=$a(e,n,2),e!==null&&(Ji(e,2),na(e))}function dt(e,n,i){if(e.tag===3)bp(e,e,i);else for(;n!==null;){if(n.tag===3){bp(n,e,i);break}else if(n.tag===1){var c=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Xa===null||!Xa.has(c))){e=Dn(i,e),i=wg(2),c=$a(n,i,2),c!==null&&(Sg(i,c,n,e),Ji(c,2),na(c));break}}n=n.return}}function xd(e,n,i){var c=e.pingCache;if(c===null){c=e.pingCache=new Vw;var y=new Set;c.set(n,y)}else y=c.get(n),y===void 0&&(y=new Set,c.set(n,y));y.has(i)||(cd=!0,y.add(i),e=Xw.bind(null,e,n,i),n.then(e,e))}function Xw(e,n,i){var c=e.pingCache;c!==null&&c.delete(n),e.pingedLanes|=e.suspendedLanes&i,e.warmLanes&=~i,pt===e&&(Je&i)===i&&(Mt===4||Mt===3&&(Je&62914560)===Je&&300>Ye()-ll?(ct&2)===0&&Ti(e,0):ud|=i,Ri===Je&&(Ri=0)),na(e)}function wp(e,n){n===0&&(n=gm()),e=vs(e,n),e!==null&&(Ji(e,n),na(e))}function Zw(e){var n=e.memoizedState,i=0;n!==null&&(i=n.retryLane),wp(e,i)}function Qw(e,n){var i=0;switch(e.tag){case 31:case 13:var c=e.stateNode,y=e.memoizedState;y!==null&&(i=y.retryLane);break;case 19:c=e.stateNode;break;case 22:c=e.stateNode._retryCache;break;default:throw Error(o(314))}c!==null&&c.delete(n),wp(e,i)}function Kw(e,n){return ke(e,n)}var gl=null,Ci=null,yd=!1,pl=!1,vd=!1,Ka=0;function na(e){e!==Ci&&e.next===null&&(Ci===null?gl=Ci=e:Ci=Ci.next=e),pl=!0,yd||(yd=!0,eS())}function kr(e,n){if(!vd&&pl){vd=!0;do for(var i=!1,c=gl;c!==null;){if(e!==0){var y=c.pendingLanes;if(y===0)var S=0;else{var E=c.suspendedLanes,z=c.pingedLanes;S=(1<<31-Pe(42|e)+1)-1,S&=y&~(E&~z),S=S&201326741?S&201326741|1:S?S|2:0}S!==0&&(i=!0,Rp(c,S))}else S=Je,S=bo(c,c===pt?S:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(S&3)===0||Ki(c,S)||(i=!0,Rp(c,S));c=c.next}while(i);vd=!1}}function Jw(){Sp()}function Sp(){pl=yd=!1;var e=0;Ka!==0&&uS()&&(e=Ka);for(var n=Ye(),i=null,c=gl;c!==null;){var y=c.next,S=Np(c,n);S===0?(c.next=null,i===null?gl=y:i.next=y,y===null&&(Ci=i)):(i=c,(e!==0||(S&3)!==0)&&(pl=!0)),c=y}Gt!==0&&Gt!==5||kr(e),Ka!==0&&(Ka=0)}function Np(e,n){for(var i=e.suspendedLanes,c=e.pingedLanes,y=e.expirationTimes,S=e.pendingLanes&-62914561;0<S;){var E=31-Pe(S),z=1<<E,X=y[E];X===-1?((z&i)===0||(z&c)!==0)&&(y[E]=Eb(z,n)):X<=n&&(e.expiredLanes|=z),S&=~z}if(n=pt,i=Je,i=bo(e,e===n?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),c=e.callbackNode,i===0||e===n&&(ut===2||ut===9)||e.cancelPendingCommit!==null)return c!==null&&c!==null&&lt(c),e.callbackNode=null,e.callbackPriority=0;if((i&3)===0||Ki(e,i)){if(n=i&-i,n===e.callbackPriority)return n;switch(c!==null&&lt(c),Dc(i)){case 2:case 8:i=vn;break;case 32:i=rn;break;case 268435456:i=ca;break;default:i=rn}return c=_p.bind(null,e),i=ke(i,c),e.callbackPriority=n,e.callbackNode=i,n}return c!==null&&c!==null&&lt(c),e.callbackPriority=2,e.callbackNode=null,2}function _p(e,n){if(Gt!==0&&Gt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var i=e.callbackNode;if(hl()&&e.callbackNode!==i)return null;var c=Je;return c=bo(e,e===pt?c:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),c===0?null:(ip(e,c,n),Np(e,Ye()),e.callbackNode!=null&&e.callbackNode===i?_p.bind(null,e):null)}function Rp(e,n){if(hl())return null;ip(e,n,!0)}function eS(){fS(function(){(ct&6)!==0?ke(xt,Jw):Sp()})}function bd(){if(Ka===0){var e=hi;e===0&&(e=Da,Da<<=1,(Da&261888)===0&&(Da=256)),Ka=e}return Ka}function Ep(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:_o(""+e)}function Tp(e,n){var i=n.ownerDocument.createElement("input");return i.name=n.name,i.value=n.value,e.id&&i.setAttribute("form",e.id),n.parentNode.insertBefore(i,n),e=new FormData(e),i.parentNode.removeChild(i),e}function tS(e,n,i,c,y){if(n==="submit"&&i&&i.stateNode===y){var S=Ep((y[on]||null).action),E=c.submitter;E&&(n=(n=E[on]||null)?Ep(n.formAction):E.getAttribute("formAction"),n!==null&&(S=n,E=null));var z=new Ao("action","action",null,c,y);e.push({event:z,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Ka!==0){var X=E?Tp(y,E):new FormData(y);Hu(i,{pending:!0,data:X,method:y.method,action:S},null,X)}}else typeof S=="function"&&(z.preventDefault(),X=E?Tp(y,E):new FormData(y),Hu(i,{pending:!0,data:X,method:y.method,action:S},S,X))},currentTarget:y}]})}}for(var wd=0;wd<au.length;wd++){var Sd=au[wd],nS=Sd.toLowerCase(),aS=Sd[0].toUpperCase()+Sd.slice(1);qn(nS,"on"+aS)}qn(sh,"onAnimationEnd"),qn(ih,"onAnimationIteration"),qn(rh,"onAnimationStart"),qn("dblclick","onDoubleClick"),qn("focusin","onFocus"),qn("focusout","onBlur"),qn(vw,"onTransitionRun"),qn(bw,"onTransitionStart"),qn(ww,"onTransitionCancel"),qn(oh,"onTransitionEnd"),ei("onMouseEnter",["mouseout","mouseover"]),ei("onMouseLeave",["mouseout","mouseover"]),ei("onPointerEnter",["pointerout","pointerover"]),ei("onPointerLeave",["pointerout","pointerover"]),gs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),gs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),gs("onBeforeInput",["compositionend","keypress","textInput","paste"]),gs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),gs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),gs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Dr));function Ap(e,n){n=(n&4)!==0;for(var i=0;i<e.length;i++){var c=e[i],y=c.event;c=c.listeners;e:{var S=void 0;if(n)for(var E=c.length-1;0<=E;E--){var z=c[E],X=z.instance,ae=z.currentTarget;if(z=z.listener,X!==S&&y.isPropagationStopped())break e;S=z,y.currentTarget=ae;try{S(y)}catch(me){Oo(me)}y.currentTarget=null,S=X}else for(E=0;E<c.length;E++){if(z=c[E],X=z.instance,ae=z.currentTarget,z=z.listener,X!==S&&y.isPropagationStopped())break e;S=z,y.currentTarget=ae;try{S(y)}catch(me){Oo(me)}y.currentTarget=null,S=X}}}}function Ke(e,n){var i=n[Bc];i===void 0&&(i=n[Bc]=new Set);var c=e+"__bubble";i.has(c)||(Cp(n,e,2,!1),i.add(c))}function Nd(e,n,i){var c=0;n&&(c|=4),Cp(i,e,c,n)}var xl="_reactListening"+Math.random().toString(36).slice(2);function _d(e){if(!e[xl]){e[xl]=!0,Sm.forEach(function(i){i!=="selectionchange"&&(sS.has(i)||Nd(i,!1,e),Nd(i,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[xl]||(n[xl]=!0,Nd("selectionchange",!1,n))}}function Cp(e,n,i,c){switch(s0(n)){case 2:var y=jS;break;case 8:y=kS;break;default:y=Ud}i=y.bind(null,n,i,e),y=void 0,!Vc||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(y=!0),c?y!==void 0?e.addEventListener(n,i,{capture:!0,passive:y}):e.addEventListener(n,i,!0):y!==void 0?e.addEventListener(n,i,{passive:y}):e.addEventListener(n,i,!1)}function Rd(e,n,i,c,y){var S=c;if((n&1)===0&&(n&2)===0&&c!==null)e:for(;;){if(c===null)return;var E=c.tag;if(E===3||E===4){var z=c.stateNode.containerInfo;if(z===y)break;if(E===4)for(E=c.return;E!==null;){var X=E.tag;if((X===3||X===4)&&E.stateNode.containerInfo===y)return;E=E.return}for(;z!==null;){if(E=Qs(z),E===null)return;if(X=E.tag,X===5||X===6||X===26||X===27){c=S=E;continue e}z=z.parentNode}}c=c.return}Dm(function(){var ae=S,me=Gc(i),pe=[];e:{var oe=lh.get(e);if(oe!==void 0){var ue=Ao,Ee=e;switch(e){case"keypress":if(Eo(i)===0)break e;case"keydown":case"keyup":ue=Qb;break;case"focusin":Ee="focus",ue=Yc;break;case"focusout":Ee="blur",ue=Yc;break;case"beforeblur":case"afterblur":ue=Yc;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ue=Lm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ue=Ub;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ue=ew;break;case sh:case ih:case rh:ue=Gb;break;case oh:ue=nw;break;case"scroll":case"scrollend":ue=Lb;break;case"wheel":ue=sw;break;case"copy":case"cut":case"paste":ue=Vb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ue=Um;break;case"toggle":case"beforetoggle":ue=rw}var ze=(n&4)!==0,gt=!ze&&(e==="scroll"||e==="scrollend"),te=ze?oe!==null?oe+"Capture":null:oe;ze=[];for(var K=ae,ne;K!==null;){var he=K;if(ne=he.stateNode,he=he.tag,he!==5&&he!==26&&he!==27||ne===null||te===null||(he=nr(K,te),he!=null&&ze.push(Br(K,he,ne))),gt)break;K=K.return}0<ze.length&&(oe=new ue(oe,Ee,null,i,me),pe.push({event:oe,listeners:ze}))}}if((n&7)===0){e:{if(oe=e==="mouseover"||e==="pointerover",ue=e==="mouseout"||e==="pointerout",oe&&i!==Pc&&(Ee=i.relatedTarget||i.fromElement)&&(Qs(Ee)||Ee[Zs]))break e;if((ue||oe)&&(oe=me.window===me?me:(oe=me.ownerDocument)?oe.defaultView||oe.parentWindow:window,ue?(Ee=i.relatedTarget||i.toElement,ue=ae,Ee=Ee?Qs(Ee):null,Ee!==null&&(gt=r(Ee),ze=Ee.tag,Ee!==gt||ze!==5&&ze!==27&&ze!==6)&&(Ee=null)):(ue=null,Ee=ae),ue!==Ee)){if(ze=Lm,he="onMouseLeave",te="onMouseEnter",K="mouse",(e==="pointerout"||e==="pointerover")&&(ze=Um,he="onPointerLeave",te="onPointerEnter",K="pointer"),gt=ue==null?oe:tr(ue),ne=Ee==null?oe:tr(Ee),oe=new ze(he,K+"leave",ue,i,me),oe.target=gt,oe.relatedTarget=ne,he=null,Qs(me)===ae&&(ze=new ze(te,K+"enter",Ee,i,me),ze.target=ne,ze.relatedTarget=gt,he=ze),gt=he,ue&&Ee)t:{for(ze=iS,te=ue,K=Ee,ne=0,he=te;he;he=ze(he))ne++;he=0;for(var De=K;De;De=ze(De))he++;for(;0<ne-he;)te=ze(te),ne--;for(;0<he-ne;)K=ze(K),he--;for(;ne--;){if(te===K||K!==null&&te===K.alternate){ze=te;break t}te=ze(te),K=ze(K)}ze=null}else ze=null;ue!==null&&Mp(pe,oe,ue,ze,!1),Ee!==null&&gt!==null&&Mp(pe,gt,Ee,ze,!0)}}e:{if(oe=ae?tr(ae):window,ue=oe.nodeName&&oe.nodeName.toLowerCase(),ue==="select"||ue==="input"&&oe.type==="file")var rt=qm;else if(Fm(oe))if(Ym)rt=pw;else{rt=hw;var Me=mw}else ue=oe.nodeName,!ue||ue.toLowerCase()!=="input"||oe.type!=="checkbox"&&oe.type!=="radio"?ae&&Hc(ae.elementType)&&(rt=qm):rt=gw;if(rt&&(rt=rt(e,ae))){Wm(pe,rt,i,me);break e}Me&&Me(e,oe,ae),e==="focusout"&&ae&&oe.type==="number"&&ae.memoizedProps.value!=null&&Uc(oe,"number",oe.value)}switch(Me=ae?tr(ae):window,e){case"focusin":(Fm(Me)||Me.contentEditable==="true")&&(ri=Me,eu=ae,ur=null);break;case"focusout":ur=eu=ri=null;break;case"mousedown":tu=!0;break;case"contextmenu":case"mouseup":case"dragend":tu=!1,nh(pe,i,me);break;case"selectionchange":if(yw)break;case"keydown":case"keyup":nh(pe,i,me)}var We;if(Zc)e:{switch(e){case"compositionstart":var et="onCompositionStart";break e;case"compositionend":et="onCompositionEnd";break e;case"compositionupdate":et="onCompositionUpdate";break e}et=void 0}else ii?$m(e,i)&&(et="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(et="onCompositionStart");et&&(Hm&&i.locale!=="ko"&&(ii||et!=="onCompositionStart"?et==="onCompositionEnd"&&ii&&(We=Bm()):(Ia=me,Fc="value"in Ia?Ia.value:Ia.textContent,ii=!0)),Me=yl(ae,et),0<Me.length&&(et=new zm(et,e,null,i,me),pe.push({event:et,listeners:Me}),We?et.data=We:(We=Vm(i),We!==null&&(et.data=We)))),(We=lw?cw(e,i):uw(e,i))&&(et=yl(ae,"onBeforeInput"),0<et.length&&(Me=new zm("onBeforeInput","beforeinput",null,i,me),pe.push({event:Me,listeners:et}),Me.data=We)),tS(pe,e,ae,i,me)}Ap(pe,n)})}function Br(e,n,i){return{instance:e,listener:n,currentTarget:i}}function yl(e,n){for(var i=n+"Capture",c=[];e!==null;){var y=e,S=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||S===null||(y=nr(e,i),y!=null&&c.unshift(Br(e,y,S)),y=nr(e,n),y!=null&&c.push(Br(e,y,S))),e.tag===3)return c;e=e.return}return[]}function iS(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Mp(e,n,i,c,y){for(var S=n._reactName,E=[];i!==null&&i!==c;){var z=i,X=z.alternate,ae=z.stateNode;if(z=z.tag,X!==null&&X===c)break;z!==5&&z!==26&&z!==27||ae===null||(X=ae,y?(ae=nr(i,S),ae!=null&&E.unshift(Br(i,ae,X))):y||(ae=nr(i,S),ae!=null&&E.push(Br(i,ae,X)))),i=i.return}E.length!==0&&e.push({event:n,listeners:E})}var rS=/\r\n?/g,oS=/\u0000|\uFFFD/g;function Op(e){return(typeof e=="string"?e:""+e).replace(rS,`
`).replace(oS,"")}function jp(e,n){return n=Op(n),Op(e)===n}function ht(e,n,i,c,y,S){switch(i){case"children":typeof c=="string"?n==="body"||n==="textarea"&&c===""||ni(e,c):(typeof c=="number"||typeof c=="bigint")&&n!=="body"&&ni(e,""+c);break;case"className":So(e,"class",c);break;case"tabIndex":So(e,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":So(e,i,c);break;case"style":jm(e,c,S);break;case"data":if(n!=="object"){So(e,"data",c);break}case"src":case"href":if(c===""&&(n!=="a"||i!=="href")){e.removeAttribute(i);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){e.removeAttribute(i);break}c=_o(""+c),e.setAttribute(i,c);break;case"action":case"formAction":if(typeof c=="function"){e.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof S=="function"&&(i==="formAction"?(n!=="input"&&ht(e,n,"name",y.name,y,null),ht(e,n,"formEncType",y.formEncType,y,null),ht(e,n,"formMethod",y.formMethod,y,null),ht(e,n,"formTarget",y.formTarget,y,null)):(ht(e,n,"encType",y.encType,y,null),ht(e,n,"method",y.method,y,null),ht(e,n,"target",y.target,y,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){e.removeAttribute(i);break}c=_o(""+c),e.setAttribute(i,c);break;case"onClick":c!=null&&(e.onclick=da);break;case"onScroll":c!=null&&Ke("scroll",e);break;case"onScrollEnd":c!=null&&Ke("scrollend",e);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(o(61));if(i=c.__html,i!=null){if(y.children!=null)throw Error(o(60));e.innerHTML=i}}break;case"multiple":e.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":e.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){e.removeAttribute("xlink:href");break}i=_o(""+c),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?e.setAttribute(i,""+c):e.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?e.setAttribute(i,""):e.removeAttribute(i);break;case"capture":case"download":c===!0?e.setAttribute(i,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?e.setAttribute(i,c):e.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?e.setAttribute(i,c):e.removeAttribute(i);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?e.removeAttribute(i):e.setAttribute(i,c);break;case"popover":Ke("beforetoggle",e),Ke("toggle",e),wo(e,"popover",c);break;case"xlinkActuate":ua(e,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":ua(e,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":ua(e,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":ua(e,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":ua(e,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":ua(e,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":ua(e,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":ua(e,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":ua(e,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":wo(e,"is",c);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=Bb.get(i)||i,wo(e,i,c))}}function Ed(e,n,i,c,y,S){switch(i){case"style":jm(e,c,S);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(o(61));if(i=c.__html,i!=null){if(y.children!=null)throw Error(o(60));e.innerHTML=i}}break;case"children":typeof c=="string"?ni(e,c):(typeof c=="number"||typeof c=="bigint")&&ni(e,""+c);break;case"onScroll":c!=null&&Ke("scroll",e);break;case"onScrollEnd":c!=null&&Ke("scrollend",e);break;case"onClick":c!=null&&(e.onclick=da);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Nm.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(y=i.endsWith("Capture"),n=i.slice(2,y?i.length-7:void 0),S=e[on]||null,S=S!=null?S[i]:null,typeof S=="function"&&e.removeEventListener(n,S,y),typeof c=="function")){typeof S!="function"&&S!==null&&(i in e?e[i]=null:e.hasAttribute(i)&&e.removeAttribute(i)),e.addEventListener(n,c,y);break e}i in e?e[i]=c:c===!0?e.setAttribute(i,""):wo(e,i,c)}}}function Jt(e,n,i){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ke("error",e),Ke("load",e);var c=!1,y=!1,S;for(S in i)if(i.hasOwnProperty(S)){var E=i[S];if(E!=null)switch(S){case"src":c=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,n));default:ht(e,n,S,E,i,null)}}y&&ht(e,n,"srcSet",i.srcSet,i,null),c&&ht(e,n,"src",i.src,i,null);return;case"input":Ke("invalid",e);var z=S=E=y=null,X=null,ae=null;for(c in i)if(i.hasOwnProperty(c)){var me=i[c];if(me!=null)switch(c){case"name":y=me;break;case"type":E=me;break;case"checked":X=me;break;case"defaultChecked":ae=me;break;case"value":S=me;break;case"defaultValue":z=me;break;case"children":case"dangerouslySetInnerHTML":if(me!=null)throw Error(o(137,n));break;default:ht(e,n,c,me,i,null)}}Am(e,S,z,X,ae,E,y,!1);return;case"select":Ke("invalid",e),c=E=S=null;for(y in i)if(i.hasOwnProperty(y)&&(z=i[y],z!=null))switch(y){case"value":S=z;break;case"defaultValue":E=z;break;case"multiple":c=z;default:ht(e,n,y,z,i,null)}n=S,i=E,e.multiple=!!c,n!=null?ti(e,!!c,n,!1):i!=null&&ti(e,!!c,i,!0);return;case"textarea":Ke("invalid",e),S=y=c=null;for(E in i)if(i.hasOwnProperty(E)&&(z=i[E],z!=null))switch(E){case"value":c=z;break;case"defaultValue":y=z;break;case"children":S=z;break;case"dangerouslySetInnerHTML":if(z!=null)throw Error(o(91));break;default:ht(e,n,E,z,i,null)}Mm(e,c,y,S);return;case"option":for(X in i)if(i.hasOwnProperty(X)&&(c=i[X],c!=null))switch(X){case"selected":e.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:ht(e,n,X,c,i,null)}return;case"dialog":Ke("beforetoggle",e),Ke("toggle",e),Ke("cancel",e),Ke("close",e);break;case"iframe":case"object":Ke("load",e);break;case"video":case"audio":for(c=0;c<Dr.length;c++)Ke(Dr[c],e);break;case"image":Ke("error",e),Ke("load",e);break;case"details":Ke("toggle",e);break;case"embed":case"source":case"link":Ke("error",e),Ke("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ae in i)if(i.hasOwnProperty(ae)&&(c=i[ae],c!=null))switch(ae){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,n));default:ht(e,n,ae,c,i,null)}return;default:if(Hc(n)){for(me in i)i.hasOwnProperty(me)&&(c=i[me],c!==void 0&&Ed(e,n,me,c,i,void 0));return}}for(z in i)i.hasOwnProperty(z)&&(c=i[z],c!=null&&ht(e,n,z,c,i,null))}function lS(e,n,i,c){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,S=null,E=null,z=null,X=null,ae=null,me=null;for(ue in i){var pe=i[ue];if(i.hasOwnProperty(ue)&&pe!=null)switch(ue){case"checked":break;case"value":break;case"defaultValue":X=pe;default:c.hasOwnProperty(ue)||ht(e,n,ue,null,c,pe)}}for(var oe in c){var ue=c[oe];if(pe=i[oe],c.hasOwnProperty(oe)&&(ue!=null||pe!=null))switch(oe){case"type":S=ue;break;case"name":y=ue;break;case"checked":ae=ue;break;case"defaultChecked":me=ue;break;case"value":E=ue;break;case"defaultValue":z=ue;break;case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(o(137,n));break;default:ue!==pe&&ht(e,n,oe,ue,c,pe)}}zc(e,E,z,X,ae,me,S,y);return;case"select":ue=E=z=oe=null;for(S in i)if(X=i[S],i.hasOwnProperty(S)&&X!=null)switch(S){case"value":break;case"multiple":ue=X;default:c.hasOwnProperty(S)||ht(e,n,S,null,c,X)}for(y in c)if(S=c[y],X=i[y],c.hasOwnProperty(y)&&(S!=null||X!=null))switch(y){case"value":oe=S;break;case"defaultValue":z=S;break;case"multiple":E=S;default:S!==X&&ht(e,n,y,S,c,X)}n=z,i=E,c=ue,oe!=null?ti(e,!!i,oe,!1):!!c!=!!i&&(n!=null?ti(e,!!i,n,!0):ti(e,!!i,i?[]:"",!1));return;case"textarea":ue=oe=null;for(z in i)if(y=i[z],i.hasOwnProperty(z)&&y!=null&&!c.hasOwnProperty(z))switch(z){case"value":break;case"children":break;default:ht(e,n,z,null,c,y)}for(E in c)if(y=c[E],S=i[E],c.hasOwnProperty(E)&&(y!=null||S!=null))switch(E){case"value":oe=y;break;case"defaultValue":ue=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(o(91));break;default:y!==S&&ht(e,n,E,y,c,S)}Cm(e,oe,ue);return;case"option":for(var Ee in i)if(oe=i[Ee],i.hasOwnProperty(Ee)&&oe!=null&&!c.hasOwnProperty(Ee))switch(Ee){case"selected":e.selected=!1;break;default:ht(e,n,Ee,null,c,oe)}for(X in c)if(oe=c[X],ue=i[X],c.hasOwnProperty(X)&&oe!==ue&&(oe!=null||ue!=null))switch(X){case"selected":e.selected=oe&&typeof oe!="function"&&typeof oe!="symbol";break;default:ht(e,n,X,oe,c,ue)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ze in i)oe=i[ze],i.hasOwnProperty(ze)&&oe!=null&&!c.hasOwnProperty(ze)&&ht(e,n,ze,null,c,oe);for(ae in c)if(oe=c[ae],ue=i[ae],c.hasOwnProperty(ae)&&oe!==ue&&(oe!=null||ue!=null))switch(ae){case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(o(137,n));break;default:ht(e,n,ae,oe,c,ue)}return;default:if(Hc(n)){for(var gt in i)oe=i[gt],i.hasOwnProperty(gt)&&oe!==void 0&&!c.hasOwnProperty(gt)&&Ed(e,n,gt,void 0,c,oe);for(me in c)oe=c[me],ue=i[me],!c.hasOwnProperty(me)||oe===ue||oe===void 0&&ue===void 0||Ed(e,n,me,oe,c,ue);return}}for(var te in i)oe=i[te],i.hasOwnProperty(te)&&oe!=null&&!c.hasOwnProperty(te)&&ht(e,n,te,null,c,oe);for(pe in c)oe=c[pe],ue=i[pe],!c.hasOwnProperty(pe)||oe===ue||oe==null&&ue==null||ht(e,n,pe,oe,c,ue)}function kp(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function cS(){if(typeof performance.getEntriesByType=="function"){for(var e=0,n=0,i=performance.getEntriesByType("resource"),c=0;c<i.length;c++){var y=i[c],S=y.transferSize,E=y.initiatorType,z=y.duration;if(S&&z&&kp(E)){for(E=0,z=y.responseEnd,c+=1;c<i.length;c++){var X=i[c],ae=X.startTime;if(ae>z)break;var me=X.transferSize,pe=X.initiatorType;me&&kp(pe)&&(X=X.responseEnd,E+=me*(X<z?1:(z-ae)/(X-ae)))}if(--c,n+=8*(S+E)/(y.duration/1e3),e++,10<e)break}}if(0<e)return n/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Td=null,Ad=null;function vl(e){return e.nodeType===9?e:e.ownerDocument}function Dp(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Bp(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function Cd(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Md=null;function uS(){var e=window.event;return e&&e.type==="popstate"?e===Md?!1:(Md=e,!0):(Md=null,!1)}var Ip=typeof setTimeout=="function"?setTimeout:void 0,dS=typeof clearTimeout=="function"?clearTimeout:void 0,Lp=typeof Promise=="function"?Promise:void 0,fS=typeof queueMicrotask=="function"?queueMicrotask:typeof Lp<"u"?function(e){return Lp.resolve(null).then(e).catch(mS)}:Ip;function mS(e){setTimeout(function(){throw e})}function Ja(e){return e==="head"}function zp(e,n){var i=n,c=0;do{var y=i.nextSibling;if(e.removeChild(i),y&&y.nodeType===8)if(i=y.data,i==="/$"||i==="/&"){if(c===0){e.removeChild(y),ki(n);return}c--}else if(i==="$"||i==="$?"||i==="$~"||i==="$!"||i==="&")c++;else if(i==="html")Ir(e.ownerDocument.documentElement);else if(i==="head"){i=e.ownerDocument.head,Ir(i);for(var S=i.firstChild;S;){var E=S.nextSibling,z=S.nodeName;S[er]||z==="SCRIPT"||z==="STYLE"||z==="LINK"&&S.rel.toLowerCase()==="stylesheet"||i.removeChild(S),S=E}}else i==="body"&&Ir(e.ownerDocument.body);i=y}while(i);ki(n)}function Up(e,n){var i=e;e=0;do{var c=i.nextSibling;if(i.nodeType===1?n?(i._stashedDisplay=i.style.display,i.style.display="none"):(i.style.display=i._stashedDisplay||"",i.getAttribute("style")===""&&i.removeAttribute("style")):i.nodeType===3&&(n?(i._stashedText=i.nodeValue,i.nodeValue=""):i.nodeValue=i._stashedText||""),c&&c.nodeType===8)if(i=c.data,i==="/$"){if(e===0)break;e--}else i!=="$"&&i!=="$?"&&i!=="$~"&&i!=="$!"||e++;i=c}while(i)}function Od(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var i=n;switch(n=n.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":Od(i),Ic(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}e.removeChild(i)}}function hS(e,n,i,c){for(;e.nodeType===1;){var y=i;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!c&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(c){if(!e[er])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(S=e.getAttribute("rel"),S==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(S!==y.rel||e.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||e.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||e.getAttribute("title")!==(y.title==null?null:y.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(S=e.getAttribute("src"),(S!==(y.src==null?null:y.src)||e.getAttribute("type")!==(y.type==null?null:y.type)||e.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&S&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var S=y.name==null?null:""+y.name;if(y.type==="hidden"&&e.getAttribute("name")===S)return e}else return e;if(e=Un(e.nextSibling),e===null)break}return null}function gS(e,n,i){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=Un(e.nextSibling),e===null))return null;return e}function Hp(e,n){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=Un(e.nextSibling),e===null))return null;return e}function jd(e){return e.data==="$?"||e.data==="$~"}function kd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function pS(e,n){var i=e.ownerDocument;if(e.data==="$~")e._reactRetry=n;else if(e.data!=="$?"||i.readyState!=="loading")n();else{var c=function(){n(),i.removeEventListener("DOMContentLoaded",c)};i.addEventListener("DOMContentLoaded",c),e._reactRetry=c}}function Un(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return e}var Dd=null;function Pp(e){e=e.nextSibling;for(var n=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"||i==="/&"){if(n===0)return Un(e.nextSibling);n--}else i!=="$"&&i!=="$!"&&i!=="$?"&&i!=="$~"&&i!=="&"||n++}e=e.nextSibling}return null}function Gp(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"){if(n===0)return e;n--}else i!=="/$"&&i!=="/&"||n++}e=e.previousSibling}return null}function $p(e,n,i){switch(n=vl(i),e){case"html":if(e=n.documentElement,!e)throw Error(o(452));return e;case"head":if(e=n.head,!e)throw Error(o(453));return e;case"body":if(e=n.body,!e)throw Error(o(454));return e;default:throw Error(o(451))}}function Ir(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);Ic(e)}var Hn=new Map,Vp=new Set;function bl(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Ta=Z.d;Z.d={f:xS,r:yS,D:vS,C:bS,L:wS,m:SS,X:_S,S:NS,M:RS};function xS(){var e=Ta.f(),n=dl();return e||n}function yS(e){var n=Ks(e);n!==null&&n.tag===5&&n.type==="form"?og(n):Ta.r(e)}var Mi=typeof document>"u"?null:document;function Fp(e,n,i){var c=Mi;if(c&&typeof n=="string"&&n){var y=jn(n);y='link[rel="'+e+'"][href="'+y+'"]',typeof i=="string"&&(y+='[crossorigin="'+i+'"]'),Vp.has(y)||(Vp.add(y),e={rel:e,crossOrigin:i,href:n},c.querySelector(y)===null&&(n=c.createElement("link"),Jt(n,"link",e),qt(n),c.head.appendChild(n)))}}function vS(e){Ta.D(e),Fp("dns-prefetch",e,null)}function bS(e,n){Ta.C(e,n),Fp("preconnect",e,n)}function wS(e,n,i){Ta.L(e,n,i);var c=Mi;if(c&&e&&n){var y='link[rel="preload"][as="'+jn(n)+'"]';n==="image"&&i&&i.imageSrcSet?(y+='[imagesrcset="'+jn(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(y+='[imagesizes="'+jn(i.imageSizes)+'"]')):y+='[href="'+jn(e)+'"]';var S=y;switch(n){case"style":S=Oi(e);break;case"script":S=ji(e)}Hn.has(S)||(e=w({rel:"preload",href:n==="image"&&i&&i.imageSrcSet?void 0:e,as:n},i),Hn.set(S,e),c.querySelector(y)!==null||n==="style"&&c.querySelector(Lr(S))||n==="script"&&c.querySelector(zr(S))||(n=c.createElement("link"),Jt(n,"link",e),qt(n),c.head.appendChild(n)))}}function SS(e,n){Ta.m(e,n);var i=Mi;if(i&&e){var c=n&&typeof n.as=="string"?n.as:"script",y='link[rel="modulepreload"][as="'+jn(c)+'"][href="'+jn(e)+'"]',S=y;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":S=ji(e)}if(!Hn.has(S)&&(e=w({rel:"modulepreload",href:e},n),Hn.set(S,e),i.querySelector(y)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(zr(S)))return}c=i.createElement("link"),Jt(c,"link",e),qt(c),i.head.appendChild(c)}}}function NS(e,n,i){Ta.S(e,n,i);var c=Mi;if(c&&e){var y=Js(c).hoistableStyles,S=Oi(e);n=n||"default";var E=y.get(S);if(!E){var z={loading:0,preload:null};if(E=c.querySelector(Lr(S)))z.loading=5;else{e=w({rel:"stylesheet",href:e,"data-precedence":n},i),(i=Hn.get(S))&&Bd(e,i);var X=E=c.createElement("link");qt(X),Jt(X,"link",e),X._p=new Promise(function(ae,me){X.onload=ae,X.onerror=me}),X.addEventListener("load",function(){z.loading|=1}),X.addEventListener("error",function(){z.loading|=2}),z.loading|=4,wl(E,n,c)}E={type:"stylesheet",instance:E,count:1,state:z},y.set(S,E)}}}function _S(e,n){Ta.X(e,n);var i=Mi;if(i&&e){var c=Js(i).hoistableScripts,y=ji(e),S=c.get(y);S||(S=i.querySelector(zr(y)),S||(e=w({src:e,async:!0},n),(n=Hn.get(y))&&Id(e,n),S=i.createElement("script"),qt(S),Jt(S,"link",e),i.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},c.set(y,S))}}function RS(e,n){Ta.M(e,n);var i=Mi;if(i&&e){var c=Js(i).hoistableScripts,y=ji(e),S=c.get(y);S||(S=i.querySelector(zr(y)),S||(e=w({src:e,async:!0,type:"module"},n),(n=Hn.get(y))&&Id(e,n),S=i.createElement("script"),qt(S),Jt(S,"link",e),i.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},c.set(y,S))}}function Wp(e,n,i,c){var y=(y=de.current)?bl(y):null;if(!y)throw Error(o(446));switch(e){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(n=Oi(i.href),i=Js(y).hoistableStyles,c=i.get(n),c||(c={type:"style",instance:null,count:0,state:null},i.set(n,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){e=Oi(i.href);var S=Js(y).hoistableStyles,E=S.get(e);if(E||(y=y.ownerDocument||y,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},S.set(e,E),(S=y.querySelector(Lr(e)))&&!S._p&&(E.instance=S,E.state.loading=5),Hn.has(e)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},Hn.set(e,i),S||ES(y,e,i,E.state))),n&&c===null)throw Error(o(528,""));return E}if(n&&c!==null)throw Error(o(529,""));return null;case"script":return n=i.async,i=i.src,typeof i=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=ji(i),i=Js(y).hoistableScripts,c=i.get(n),c||(c={type:"script",instance:null,count:0,state:null},i.set(n,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,e))}}function Oi(e){return'href="'+jn(e)+'"'}function Lr(e){return'link[rel="stylesheet"]['+e+"]"}function qp(e){return w({},e,{"data-precedence":e.precedence,precedence:null})}function ES(e,n,i,c){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?c.loading=1:(n=e.createElement("link"),c.preload=n,n.addEventListener("load",function(){return c.loading|=1}),n.addEventListener("error",function(){return c.loading|=2}),Jt(n,"link",i),qt(n),e.head.appendChild(n))}function ji(e){return'[src="'+jn(e)+'"]'}function zr(e){return"script[async]"+e}function Yp(e,n,i){if(n.count++,n.instance===null)switch(n.type){case"style":var c=e.querySelector('style[data-href~="'+jn(i.href)+'"]');if(c)return n.instance=c,qt(c),c;var y=w({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return c=(e.ownerDocument||e).createElement("style"),qt(c),Jt(c,"style",y),wl(c,i.precedence,e),n.instance=c;case"stylesheet":y=Oi(i.href);var S=e.querySelector(Lr(y));if(S)return n.state.loading|=4,n.instance=S,qt(S),S;c=qp(i),(y=Hn.get(y))&&Bd(c,y),S=(e.ownerDocument||e).createElement("link"),qt(S);var E=S;return E._p=new Promise(function(z,X){E.onload=z,E.onerror=X}),Jt(S,"link",c),n.state.loading|=4,wl(S,i.precedence,e),n.instance=S;case"script":return S=ji(i.src),(y=e.querySelector(zr(S)))?(n.instance=y,qt(y),y):(c=i,(y=Hn.get(S))&&(c=w({},i),Id(c,y)),e=e.ownerDocument||e,y=e.createElement("script"),qt(y),Jt(y,"link",c),e.head.appendChild(y),n.instance=y);case"void":return null;default:throw Error(o(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(c=n.instance,n.state.loading|=4,wl(c,i.precedence,e));return n.instance}function wl(e,n,i){for(var c=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=c.length?c[c.length-1]:null,S=y,E=0;E<c.length;E++){var z=c[E];if(z.dataset.precedence===n)S=z;else if(S!==y)break}S?S.parentNode.insertBefore(e,S.nextSibling):(n=i.nodeType===9?i.head:i,n.insertBefore(e,n.firstChild))}function Bd(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function Id(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var Sl=null;function Xp(e,n,i){if(Sl===null){var c=new Map,y=Sl=new Map;y.set(i,c)}else y=Sl,c=y.get(i),c||(c=new Map,y.set(i,c));if(c.has(e))return c;for(c.set(e,null),i=i.getElementsByTagName(e),y=0;y<i.length;y++){var S=i[y];if(!(S[er]||S[Xt]||e==="link"&&S.getAttribute("rel")==="stylesheet")&&S.namespaceURI!=="http://www.w3.org/2000/svg"){var E=S.getAttribute(n)||"";E=e+E;var z=c.get(E);z?z.push(S):c.set(E,[S])}}return c}function Zp(e,n,i){e=e.ownerDocument||e,e.head.insertBefore(i,n==="title"?e.querySelector("head > title"):null)}function TS(e,n,i){if(i===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return e=n.disabled,typeof n.precedence=="string"&&e==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function Qp(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function AS(e,n,i,c){if(i.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var y=Oi(c.href),S=n.querySelector(Lr(y));if(S){n=S._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(e.count++,e=Nl.bind(e),n.then(e,e)),i.state.loading|=4,i.instance=S,qt(S);return}S=n.ownerDocument||n,c=qp(c),(y=Hn.get(y))&&Bd(c,y),S=S.createElement("link"),qt(S);var E=S;E._p=new Promise(function(z,X){E.onload=z,E.onerror=X}),Jt(S,"link",c),i.instance=S}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(i,n),(n=i.state.preload)&&(i.state.loading&3)===0&&(e.count++,i=Nl.bind(e),n.addEventListener("load",i),n.addEventListener("error",i))}}var Ld=0;function CS(e,n){return e.stylesheets&&e.count===0&&Rl(e,e.stylesheets),0<e.count||0<e.imgCount?function(i){var c=setTimeout(function(){if(e.stylesheets&&Rl(e,e.stylesheets),e.unsuspend){var S=e.unsuspend;e.unsuspend=null,S()}},6e4+n);0<e.imgBytes&&Ld===0&&(Ld=62500*cS());var y=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Rl(e,e.stylesheets),e.unsuspend)){var S=e.unsuspend;e.unsuspend=null,S()}},(e.imgBytes>Ld?50:800)+n);return e.unsuspend=i,function(){e.unsuspend=null,clearTimeout(c),clearTimeout(y)}}:null}function Nl(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Rl(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var _l=null;function Rl(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,_l=new Map,n.forEach(MS,e),_l=null,Nl.call(e))}function MS(e,n){if(!(n.state.loading&4)){var i=_l.get(e);if(i)var c=i.get(null);else{i=new Map,_l.set(e,i);for(var y=e.querySelectorAll("link[data-precedence],style[data-precedence]"),S=0;S<y.length;S++){var E=y[S];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(i.set(E.dataset.precedence,E),c=E)}c&&i.set(null,c)}y=n.instance,E=y.getAttribute("data-precedence"),S=i.get(E)||c,S===c&&i.set(null,y),i.set(E,y),this.count++,c=Nl.bind(this),y.addEventListener("load",c),y.addEventListener("error",c),S?S.parentNode.insertBefore(y,S.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(y,e.firstChild)),n.state.loading|=4}}var Ur={$$typeof:C,Provider:null,Consumer:null,_currentValue:Q,_currentValue2:Q,_threadCount:0};function OS(e,n,i,c,y,S,E,z,X){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=jc(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jc(0),this.hiddenUpdates=jc(null),this.identifierPrefix=c,this.onUncaughtError=y,this.onCaughtError=S,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=X,this.incompleteTransitions=new Map}function Kp(e,n,i,c,y,S,E,z,X,ae,me,pe){return e=new OS(e,n,i,E,X,ae,me,pe,z),n=1,S===!0&&(n|=24),S=wn(3,null,null,n),e.current=S,S.stateNode=e,n=pu(),n.refCount++,e.pooledCache=n,n.refCount++,S.memoizedState={element:c,isDehydrated:i,cache:n},bu(S),e}function Jp(e){return e?(e=ci,e):ci}function e0(e,n,i,c,y,S){y=Jp(y),c.context===null?c.context=y:c.pendingContext=y,c=Ga(n),c.payload={element:i},S=S===void 0?null:S,S!==null&&(c.callback=S),i=$a(e,c,n),i!==null&&(mn(i,e,n),xr(i,e,n))}function t0(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<n?i:n}}function zd(e,n){t0(e,n),(e=e.alternate)&&t0(e,n)}function n0(e){if(e.tag===13||e.tag===31){var n=vs(e,67108864);n!==null&&mn(n,e,67108864),zd(e,67108864)}}function a0(e){if(e.tag===13||e.tag===31){var n=En();n=kc(n);var i=vs(e,n);i!==null&&mn(i,e,n),zd(e,n)}}var El=!0;function jS(e,n,i,c){var y=$.T;$.T=null;var S=Z.p;try{Z.p=2,Ud(e,n,i,c)}finally{Z.p=S,$.T=y}}function kS(e,n,i,c){var y=$.T;$.T=null;var S=Z.p;try{Z.p=8,Ud(e,n,i,c)}finally{Z.p=S,$.T=y}}function Ud(e,n,i,c){if(El){var y=Hd(c);if(y===null)Rd(e,n,c,Tl,i),i0(e,c);else if(BS(y,e,n,i,c))c.stopPropagation();else if(i0(e,c),n&4&&-1<DS.indexOf(e)){for(;y!==null;){var S=Ks(y);if(S!==null)switch(S.tag){case 3:if(S=S.stateNode,S.current.memoizedState.isDehydrated){var E=hs(S.pendingLanes);if(E!==0){var z=S;for(z.pendingLanes|=2,z.entangledLanes|=2;E;){var X=1<<31-Pe(E);z.entanglements[1]|=X,E&=~X}na(S),(ct&6)===0&&(cl=Ye()+500,kr(0))}}break;case 31:case 13:z=vs(S,2),z!==null&&mn(z,S,2),dl(),zd(S,2)}if(S=Hd(c),S===null&&Rd(e,n,c,Tl,i),S===y)break;y=S}y!==null&&c.stopPropagation()}else Rd(e,n,c,null,i)}}function Hd(e){return e=Gc(e),Pd(e)}var Tl=null;function Pd(e){if(Tl=null,e=Qs(e),e!==null){var n=r(e);if(n===null)e=null;else{var i=n.tag;if(i===13){if(e=d(n),e!==null)return e;e=null}else if(i===31){if(e=f(n),e!==null)return e;e=null}else if(i===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return Tl=e,null}function s0(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(yn()){case xt:return 2;case vn:return 8;case rn:case Wn:return 32;case ca:return 268435456;default:return 32}default:return 32}}var Gd=!1,es=null,ts=null,ns=null,Hr=new Map,Pr=new Map,as=[],DS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function i0(e,n){switch(e){case"focusin":case"focusout":es=null;break;case"dragenter":case"dragleave":ts=null;break;case"mouseover":case"mouseout":ns=null;break;case"pointerover":case"pointerout":Hr.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pr.delete(n.pointerId)}}function Gr(e,n,i,c,y,S){return e===null||e.nativeEvent!==S?(e={blockedOn:n,domEventName:i,eventSystemFlags:c,nativeEvent:S,targetContainers:[y]},n!==null&&(n=Ks(n),n!==null&&n0(n)),e):(e.eventSystemFlags|=c,n=e.targetContainers,y!==null&&n.indexOf(y)===-1&&n.push(y),e)}function BS(e,n,i,c,y){switch(n){case"focusin":return es=Gr(es,e,n,i,c,y),!0;case"dragenter":return ts=Gr(ts,e,n,i,c,y),!0;case"mouseover":return ns=Gr(ns,e,n,i,c,y),!0;case"pointerover":var S=y.pointerId;return Hr.set(S,Gr(Hr.get(S)||null,e,n,i,c,y)),!0;case"gotpointercapture":return S=y.pointerId,Pr.set(S,Gr(Pr.get(S)||null,e,n,i,c,y)),!0}return!1}function r0(e){var n=Qs(e.target);if(n!==null){var i=r(n);if(i!==null){if(n=i.tag,n===13){if(n=d(i),n!==null){e.blockedOn=n,bm(e.priority,function(){a0(i)});return}}else if(n===31){if(n=f(i),n!==null){e.blockedOn=n,bm(e.priority,function(){a0(i)});return}}else if(n===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Al(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var i=Hd(e.nativeEvent);if(i===null){i=e.nativeEvent;var c=new i.constructor(i.type,i);Pc=c,i.target.dispatchEvent(c),Pc=null}else return n=Ks(i),n!==null&&n0(n),e.blockedOn=i,!1;n.shift()}return!0}function o0(e,n,i){Al(e)&&i.delete(n)}function IS(){Gd=!1,es!==null&&Al(es)&&(es=null),ts!==null&&Al(ts)&&(ts=null),ns!==null&&Al(ns)&&(ns=null),Hr.forEach(o0),Pr.forEach(o0)}function Cl(e,n){e.blockedOn===n&&(e.blockedOn=null,Gd||(Gd=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,IS)))}var Ml=null;function l0(e){Ml!==e&&(Ml=e,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Ml===e&&(Ml=null);for(var n=0;n<e.length;n+=3){var i=e[n],c=e[n+1],y=e[n+2];if(typeof c!="function"){if(Pd(c||i)===null)continue;break}var S=Ks(i);S!==null&&(e.splice(n,3),n-=3,Hu(S,{pending:!0,data:y,method:i.method,action:c},c,y))}}))}function ki(e){function n(X){return Cl(X,e)}es!==null&&Cl(es,e),ts!==null&&Cl(ts,e),ns!==null&&Cl(ns,e),Hr.forEach(n),Pr.forEach(n);for(var i=0;i<as.length;i++){var c=as[i];c.blockedOn===e&&(c.blockedOn=null)}for(;0<as.length&&(i=as[0],i.blockedOn===null);)r0(i),i.blockedOn===null&&as.shift();if(i=(e.ownerDocument||e).$$reactFormReplay,i!=null)for(c=0;c<i.length;c+=3){var y=i[c],S=i[c+1],E=y[on]||null;if(typeof S=="function")E||l0(i);else if(E){var z=null;if(S&&S.hasAttribute("formAction")){if(y=S,E=S[on]||null)z=E.formAction;else if(Pd(y)!==null)continue}else z=E.action;typeof z=="function"?i[c+1]=z:(i.splice(c,3),c-=3),l0(i)}}}function c0(){function e(S){S.canIntercept&&S.info==="react-transition"&&S.intercept({handler:function(){return new Promise(function(E){return y=E})},focusReset:"manual",scroll:"manual"})}function n(){y!==null&&(y(),y=null),c||setTimeout(i,20)}function i(){if(!c&&!navigation.transition){var S=navigation.currentEntry;S&&S.url!=null&&navigation.navigate(S.url,{state:S.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,y=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(i,100),function(){c=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),y!==null&&(y(),y=null)}}}function $d(e){this._internalRoot=e}Ol.prototype.render=$d.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(o(409));var i=n.current,c=En();e0(i,c,e,n,null,null)},Ol.prototype.unmount=$d.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;e0(e.current,2,null,e,null,null),dl(),n[Zs]=null}};function Ol(e){this._internalRoot=e}Ol.prototype.unstable_scheduleHydration=function(e){if(e){var n=vm();e={blockedOn:null,target:e,priority:n};for(var i=0;i<as.length&&n!==0&&n<as[i].priority;i++);as.splice(i,0,e),i===0&&r0(e)}};var u0=t.version;if(u0!=="19.2.0")throw Error(o(527,u0,"19.2.0"));Z.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(o(188)):(e=Object.keys(e).join(","),Error(o(268,e)));return e=h(n),e=e!==null?m(e):null,e=e===null?null:e.stateNode,e};var LS={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:$,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var jl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jl.isDisabled&&jl.supportsFiber)try{_e=jl.inject(LS),He=jl}catch{}}return $r.createRoot=function(e,n){if(!l(e))throw Error(o(299));var i=!1,c="",y=xg,S=yg,E=vg;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(c=n.identifierPrefix),n.onUncaughtError!==void 0&&(y=n.onUncaughtError),n.onCaughtError!==void 0&&(S=n.onCaughtError),n.onRecoverableError!==void 0&&(E=n.onRecoverableError)),n=Kp(e,1,!1,null,null,i,c,null,y,S,E,c0),e[Zs]=n.current,_d(e),new $d(n)},$r.hydrateRoot=function(e,n,i){if(!l(e))throw Error(o(299));var c=!1,y="",S=xg,E=yg,z=vg,X=null;return i!=null&&(i.unstable_strictMode===!0&&(c=!0),i.identifierPrefix!==void 0&&(y=i.identifierPrefix),i.onUncaughtError!==void 0&&(S=i.onUncaughtError),i.onCaughtError!==void 0&&(E=i.onCaughtError),i.onRecoverableError!==void 0&&(z=i.onRecoverableError),i.formState!==void 0&&(X=i.formState)),n=Kp(e,1,!0,n,i??null,c,y,X,S,E,z,c0),n.context=Jp(null),i=n.current,c=En(),c=kc(c),y=Ga(c),y.callback=null,$a(i,y,c),i=c,n.current.lanes=i,Ji(n,i),na(n),e[Zs]=n.current,_d(e),new Ol(n)},$r.version="19.2.0",$r}var p0;function vN(){if(p0)return Vd.exports;p0=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),Vd.exports=yN(),Vd.exports}var bN=vN();typeof window<"u"&&(window.Buffer=hn.Buffer);typeof window<"u"&&!window.crypto&&(window.crypto=window.crypto||{getRandomValues:s=>{for(let t=0;t<s.length;t++)s[t]=Math.floor(Math.random()*256);return s}});typeof window<"u"&&!window.stream&&(window.stream={Readable:class{constructor(){}},Writable:class{constructor(){}},Transform:class{constructor(){}}});const Et={HOME:"/",MATCHES:"/matches",GAME:"/game/:matchId",CREATE_LOBBY:"/create-lobby",MATCH_PREVIEW:"/match/:matchPda",LEADERBOARD:"/leaderboard",PROFILE:"/profile",PROFILE_USER:"/profile/:identifier",NOT_FOUND:"/404"};function oy(s,t){return function(){return s.apply(t,arguments)}}const{toString:wN}=Object.prototype,{getPrototypeOf:Ff}=Object,{iterator:hc,toStringTag:ly}=Symbol,gc=(s=>t=>{const a=wN.call(t);return s[a]||(s[a]=a.slice(8,-1).toLowerCase())})(Object.create(null)),Kn=s=>(s=s.toLowerCase(),t=>gc(t)===s),pc=s=>t=>typeof t===s,{isArray:Fi}=Array,Hi=pc("undefined");function uo(s){return s!==null&&!Hi(s)&&s.constructor!==null&&!Hi(s.constructor)&&gn(s.constructor.isBuffer)&&s.constructor.isBuffer(s)}const cy=Kn("ArrayBuffer");function SN(s){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(s):t=s&&s.buffer&&cy(s.buffer),t}const NN=pc("string"),gn=pc("function"),uy=pc("number"),fo=s=>s!==null&&typeof s=="object",_N=s=>s===!0||s===!1,Zl=s=>{if(gc(s)!=="object")return!1;const t=Ff(s);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(ly in s)&&!(hc in s)},RN=s=>{if(!fo(s)||uo(s))return!1;try{return Object.keys(s).length===0&&Object.getPrototypeOf(s)===Object.prototype}catch{return!1}},EN=Kn("Date"),TN=Kn("File"),AN=Kn("Blob"),CN=Kn("FileList"),MN=s=>fo(s)&&gn(s.pipe),ON=s=>{let t;return s&&(typeof FormData=="function"&&s instanceof FormData||gn(s.append)&&((t=gc(s))==="formdata"||t==="object"&&gn(s.toString)&&s.toString()==="[object FormData]"))},jN=Kn("URLSearchParams"),[kN,DN,BN,IN]=["ReadableStream","Request","Response","Headers"].map(Kn),LN=s=>s.trim?s.trim():s.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function mo(s,t,{allOwnKeys:a=!1}={}){if(s===null||typeof s>"u")return;let o,l;if(typeof s!="object"&&(s=[s]),Fi(s))for(o=0,l=s.length;o<l;o++)t.call(null,s[o],o,s);else{if(uo(s))return;const r=a?Object.getOwnPropertyNames(s):Object.keys(s),d=r.length;let f;for(o=0;o<d;o++)f=r[o],t.call(null,s[f],f,s)}}function dy(s,t){if(uo(s))return null;t=t.toLowerCase();const a=Object.keys(s);let o=a.length,l;for(;o-- >0;)if(l=a[o],t===l.toLowerCase())return l;return null}const Ds=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:globalThis,fy=s=>!Hi(s)&&s!==Ds;function Nf(){const{caseless:s,skipUndefined:t}=fy(this)&&this||{},a={},o=(l,r)=>{const d=s&&dy(a,r)||r;Zl(a[d])&&Zl(l)?a[d]=Nf(a[d],l):Zl(l)?a[d]=Nf({},l):Fi(l)?a[d]=l.slice():(!t||!Hi(l))&&(a[d]=l)};for(let l=0,r=arguments.length;l<r;l++)arguments[l]&&mo(arguments[l],o);return a}const zN=(s,t,a,{allOwnKeys:o}={})=>(mo(t,(l,r)=>{a&&gn(l)?s[r]=oy(l,a):s[r]=l},{allOwnKeys:o}),s),UN=s=>(s.charCodeAt(0)===65279&&(s=s.slice(1)),s),HN=(s,t,a,o)=>{s.prototype=Object.create(t.prototype,o),s.prototype.constructor=s,Object.defineProperty(s,"super",{value:t.prototype}),a&&Object.assign(s.prototype,a)},PN=(s,t,a,o)=>{let l,r,d;const f={};if(t=t||{},s==null)return t;do{for(l=Object.getOwnPropertyNames(s),r=l.length;r-- >0;)d=l[r],(!o||o(d,s,t))&&!f[d]&&(t[d]=s[d],f[d]=!0);s=a!==!1&&Ff(s)}while(s&&(!a||a(s,t))&&s!==Object.prototype);return t},GN=(s,t,a)=>{s=String(s),(a===void 0||a>s.length)&&(a=s.length),a-=t.length;const o=s.indexOf(t,a);return o!==-1&&o===a},$N=s=>{if(!s)return null;if(Fi(s))return s;let t=s.length;if(!uy(t))return null;const a=new Array(t);for(;t-- >0;)a[t]=s[t];return a},VN=(s=>t=>s&&t instanceof s)(typeof Uint8Array<"u"&&Ff(Uint8Array)),FN=(s,t)=>{const o=(s&&s[hc]).call(s);let l;for(;(l=o.next())&&!l.done;){const r=l.value;t.call(s,r[0],r[1])}},WN=(s,t)=>{let a;const o=[];for(;(a=s.exec(t))!==null;)o.push(a);return o},qN=Kn("HTMLFormElement"),YN=s=>s.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(a,o,l){return o.toUpperCase()+l}),x0=(({hasOwnProperty:s})=>(t,a)=>s.call(t,a))(Object.prototype),XN=Kn("RegExp"),my=(s,t)=>{const a=Object.getOwnPropertyDescriptors(s),o={};mo(a,(l,r)=>{let d;(d=t(l,r,s))!==!1&&(o[r]=d||l)}),Object.defineProperties(s,o)},ZN=s=>{my(s,(t,a)=>{if(gn(s)&&["arguments","caller","callee"].indexOf(a)!==-1)return!1;const o=s[a];if(gn(o)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+a+"'")})}})},QN=(s,t)=>{const a={},o=l=>{l.forEach(r=>{a[r]=!0})};return Fi(s)?o(s):o(String(s).split(t)),a},KN=()=>{},JN=(s,t)=>s!=null&&Number.isFinite(s=+s)?s:t;function e_(s){return!!(s&&gn(s.append)&&s[ly]==="FormData"&&s[hc])}const t_=s=>{const t=new Array(10),a=(o,l)=>{if(fo(o)){if(t.indexOf(o)>=0)return;if(uo(o))return o;if(!("toJSON"in o)){t[l]=o;const r=Fi(o)?[]:{};return mo(o,(d,f)=>{const g=a(d,l+1);!Hi(g)&&(r[f]=g)}),t[l]=void 0,r}}return o};return a(s,0)},n_=Kn("AsyncFunction"),a_=s=>s&&(fo(s)||gn(s))&&gn(s.then)&&gn(s.catch),hy=((s,t)=>s?setImmediate:t?((a,o)=>(Ds.addEventListener("message",({source:l,data:r})=>{l===Ds&&r===a&&o.length&&o.shift()()},!1),l=>{o.push(l),Ds.postMessage(a,"*")}))(`axios@${Math.random()}`,[]):a=>setTimeout(a))(typeof setImmediate=="function",gn(Ds.postMessage)),s_=typeof queueMicrotask<"u"?queueMicrotask.bind(Ds):typeof process<"u"&&process.nextTick||hy,i_=s=>s!=null&&gn(s[hc]),ce={isArray:Fi,isArrayBuffer:cy,isBuffer:uo,isFormData:ON,isArrayBufferView:SN,isString:NN,isNumber:uy,isBoolean:_N,isObject:fo,isPlainObject:Zl,isEmptyObject:RN,isReadableStream:kN,isRequest:DN,isResponse:BN,isHeaders:IN,isUndefined:Hi,isDate:EN,isFile:TN,isBlob:AN,isRegExp:XN,isFunction:gn,isStream:MN,isURLSearchParams:jN,isTypedArray:VN,isFileList:CN,forEach:mo,merge:Nf,extend:zN,trim:LN,stripBOM:UN,inherits:HN,toFlatObject:PN,kindOf:gc,kindOfTest:Kn,endsWith:GN,toArray:$N,forEachEntry:FN,matchAll:WN,isHTMLForm:qN,hasOwnProperty:x0,hasOwnProp:x0,reduceDescriptors:my,freezeMethods:ZN,toObjectSet:QN,toCamelCase:YN,noop:KN,toFiniteNumber:JN,findKey:dy,global:Ds,isContextDefined:fy,isSpecCompliantForm:e_,toJSONObject:t_,isAsyncFn:n_,isThenable:a_,setImmediate:hy,asap:s_,isIterable:i_};function Fe(s,t,a,o,l){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=s,this.name="AxiosError",t&&(this.code=t),a&&(this.config=a),o&&(this.request=o),l&&(this.response=l,this.status=l.status?l.status:null)}ce.inherits(Fe,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ce.toJSONObject(this.config),code:this.code,status:this.status}}});const gy=Fe.prototype,py={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(s=>{py[s]={value:s}});Object.defineProperties(Fe,py);Object.defineProperty(gy,"isAxiosError",{value:!0});Fe.from=(s,t,a,o,l,r)=>{const d=Object.create(gy);ce.toFlatObject(s,d,function(m){return m!==Error.prototype},h=>h!=="isAxiosError");const f=s&&s.message?s.message:"Error",g=t==null&&s?s.code:t;return Fe.call(d,f,g,a,o,l),s&&d.cause==null&&Object.defineProperty(d,"cause",{value:s,configurable:!0}),d.name=s&&s.name||"Error",r&&Object.assign(d,r),d};const r_=null;function _f(s){return ce.isPlainObject(s)||ce.isArray(s)}function xy(s){return ce.endsWith(s,"[]")?s.slice(0,-2):s}function y0(s,t,a){return s?s.concat(t).map(function(l,r){return l=xy(l),!a&&r?"["+l+"]":l}).join(a?".":""):t}function o_(s){return ce.isArray(s)&&!s.some(_f)}const l_=ce.toFlatObject(ce,{},null,function(t){return/^is[A-Z]/.test(t)});function xc(s,t,a){if(!ce.isObject(s))throw new TypeError("target must be an object");t=t||new FormData,a=ce.toFlatObject(a,{metaTokens:!0,dots:!1,indexes:!1},!1,function(b,N){return!ce.isUndefined(N[b])});const o=a.metaTokens,l=a.visitor||m,r=a.dots,d=a.indexes,g=(a.Blob||typeof Blob<"u"&&Blob)&&ce.isSpecCompliantForm(t);if(!ce.isFunction(l))throw new TypeError("visitor must be a function");function h(v){if(v===null)return"";if(ce.isDate(v))return v.toISOString();if(ce.isBoolean(v))return v.toString();if(!g&&ce.isBlob(v))throw new Fe("Blob is not supported. Use a Buffer instead.");return ce.isArrayBuffer(v)||ce.isTypedArray(v)?g&&typeof Blob=="function"?new Blob([v]):Buffer.from(v):v}function m(v,b,N){let _=v;if(v&&!N&&typeof v=="object"){if(ce.endsWith(b,"{}"))b=o?b:b.slice(0,-2),v=JSON.stringify(v);else if(ce.isArray(v)&&o_(v)||(ce.isFileList(v)||ce.endsWith(b,"[]"))&&(_=ce.toArray(v)))return b=xy(b),_.forEach(function(C,k){!(ce.isUndefined(C)||C===null)&&t.append(d===!0?y0([b],k,r):d===null?b:b+"[]",h(C))}),!1}return _f(v)?!0:(t.append(y0(N,b,r),h(v)),!1)}const w=[],x=Object.assign(l_,{defaultVisitor:m,convertValue:h,isVisitable:_f});function p(v,b){if(!ce.isUndefined(v)){if(w.indexOf(v)!==-1)throw Error("Circular reference detected in "+b.join("."));w.push(v),ce.forEach(v,function(_,A){(!(ce.isUndefined(_)||_===null)&&l.call(t,_,ce.isString(A)?A.trim():A,b,x))===!0&&p(_,b?b.concat(A):[A])}),w.pop()}}if(!ce.isObject(s))throw new TypeError("data must be an object");return p(s),t}function v0(s){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(s).replace(/[!'()~]|%20|%00/g,function(o){return t[o]})}function Wf(s,t){this._pairs=[],s&&xc(s,this,t)}const yy=Wf.prototype;yy.append=function(t,a){this._pairs.push([t,a])};yy.toString=function(t){const a=t?function(o){return t.call(this,o,v0)}:v0;return this._pairs.map(function(l){return a(l[0])+"="+a(l[1])},"").join("&")};function c_(s){return encodeURIComponent(s).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function vy(s,t,a){if(!t)return s;const o=a&&a.encode||c_;ce.isFunction(a)&&(a={serialize:a});const l=a&&a.serialize;let r;if(l?r=l(t,a):r=ce.isURLSearchParams(t)?t.toString():new Wf(t,a).toString(o),r){const d=s.indexOf("#");d!==-1&&(s=s.slice(0,d)),s+=(s.indexOf("?")===-1?"?":"&")+r}return s}class b0{constructor(){this.handlers=[]}use(t,a,o){return this.handlers.push({fulfilled:t,rejected:a,synchronous:o?o.synchronous:!1,runWhen:o?o.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){ce.forEach(this.handlers,function(o){o!==null&&t(o)})}}const by={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},u_=typeof URLSearchParams<"u"?URLSearchParams:Wf,d_=typeof FormData<"u"?FormData:null,f_=typeof Blob<"u"?Blob:null,m_={isBrowser:!0,classes:{URLSearchParams:u_,FormData:d_,Blob:f_},protocols:["http","https","file","blob","url","data"]},qf=typeof window<"u"&&typeof document<"u",Rf=typeof navigator=="object"&&navigator||void 0,h_=qf&&(!Rf||["ReactNative","NativeScript","NS"].indexOf(Rf.product)<0),g_=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",p_=qf&&window.location.href||"http://localhost",x_=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:qf,hasStandardBrowserEnv:h_,hasStandardBrowserWebWorkerEnv:g_,navigator:Rf,origin:p_},Symbol.toStringTag,{value:"Module"})),tn={...x_,...m_};function y_(s,t){return xc(s,new tn.classes.URLSearchParams,{visitor:function(a,o,l,r){return tn.isNode&&ce.isBuffer(a)?(this.append(o,a.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)},...t})}function v_(s){return ce.matchAll(/\w+|\[(\w*)]/g,s).map(t=>t[0]==="[]"?"":t[1]||t[0])}function b_(s){const t={},a=Object.keys(s);let o;const l=a.length;let r;for(o=0;o<l;o++)r=a[o],t[r]=s[r];return t}function wy(s){function t(a,o,l,r){let d=a[r++];if(d==="__proto__")return!0;const f=Number.isFinite(+d),g=r>=a.length;return d=!d&&ce.isArray(l)?l.length:d,g?(ce.hasOwnProp(l,d)?l[d]=[l[d],o]:l[d]=o,!f):((!l[d]||!ce.isObject(l[d]))&&(l[d]=[]),t(a,o,l[d],r)&&ce.isArray(l[d])&&(l[d]=b_(l[d])),!f)}if(ce.isFormData(s)&&ce.isFunction(s.entries)){const a={};return ce.forEachEntry(s,(o,l)=>{t(v_(o),l,a,0)}),a}return null}function w_(s,t,a){if(ce.isString(s))try{return(t||JSON.parse)(s),ce.trim(s)}catch(o){if(o.name!=="SyntaxError")throw o}return(a||JSON.stringify)(s)}const ho={transitional:by,adapter:["xhr","http","fetch"],transformRequest:[function(t,a){const o=a.getContentType()||"",l=o.indexOf("application/json")>-1,r=ce.isObject(t);if(r&&ce.isHTMLForm(t)&&(t=new FormData(t)),ce.isFormData(t))return l?JSON.stringify(wy(t)):t;if(ce.isArrayBuffer(t)||ce.isBuffer(t)||ce.isStream(t)||ce.isFile(t)||ce.isBlob(t)||ce.isReadableStream(t))return t;if(ce.isArrayBufferView(t))return t.buffer;if(ce.isURLSearchParams(t))return a.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let f;if(r){if(o.indexOf("application/x-www-form-urlencoded")>-1)return y_(t,this.formSerializer).toString();if((f=ce.isFileList(t))||o.indexOf("multipart/form-data")>-1){const g=this.env&&this.env.FormData;return xc(f?{"files[]":t}:t,g&&new g,this.formSerializer)}}return r||l?(a.setContentType("application/json",!1),w_(t)):t}],transformResponse:[function(t){const a=this.transitional||ho.transitional,o=a&&a.forcedJSONParsing,l=this.responseType==="json";if(ce.isResponse(t)||ce.isReadableStream(t))return t;if(t&&ce.isString(t)&&(o&&!this.responseType||l)){const d=!(a&&a.silentJSONParsing)&&l;try{return JSON.parse(t,this.parseReviver)}catch(f){if(d)throw f.name==="SyntaxError"?Fe.from(f,Fe.ERR_BAD_RESPONSE,this,null,this.response):f}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:tn.classes.FormData,Blob:tn.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ce.forEach(["delete","get","head","post","put","patch"],s=>{ho.headers[s]={}});const S_=ce.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),N_=s=>{const t={};let a,o,l;return s&&s.split(`
`).forEach(function(d){l=d.indexOf(":"),a=d.substring(0,l).trim().toLowerCase(),o=d.substring(l+1).trim(),!(!a||t[a]&&S_[a])&&(a==="set-cookie"?t[a]?t[a].push(o):t[a]=[o]:t[a]=t[a]?t[a]+", "+o:o)}),t},w0=Symbol("internals");function Vr(s){return s&&String(s).trim().toLowerCase()}function Ql(s){return s===!1||s==null?s:ce.isArray(s)?s.map(Ql):String(s)}function __(s){const t=Object.create(null),a=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let o;for(;o=a.exec(s);)t[o[1]]=o[2];return t}const R_=s=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(s.trim());function qd(s,t,a,o,l){if(ce.isFunction(o))return o.call(this,t,a);if(l&&(t=a),!!ce.isString(t)){if(ce.isString(o))return t.indexOf(o)!==-1;if(ce.isRegExp(o))return o.test(t)}}function E_(s){return s.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,a,o)=>a.toUpperCase()+o)}function T_(s,t){const a=ce.toCamelCase(" "+t);["get","set","has"].forEach(o=>{Object.defineProperty(s,o+a,{value:function(l,r,d){return this[o].call(this,t,l,r,d)},configurable:!0})})}let pn=class{constructor(t){t&&this.set(t)}set(t,a,o){const l=this;function r(f,g,h){const m=Vr(g);if(!m)throw new Error("header name must be a non-empty string");const w=ce.findKey(l,m);(!w||l[w]===void 0||h===!0||h===void 0&&l[w]!==!1)&&(l[w||g]=Ql(f))}const d=(f,g)=>ce.forEach(f,(h,m)=>r(h,m,g));if(ce.isPlainObject(t)||t instanceof this.constructor)d(t,a);else if(ce.isString(t)&&(t=t.trim())&&!R_(t))d(N_(t),a);else if(ce.isObject(t)&&ce.isIterable(t)){let f={},g,h;for(const m of t){if(!ce.isArray(m))throw TypeError("Object iterator must return a key-value pair");f[h=m[0]]=(g=f[h])?ce.isArray(g)?[...g,m[1]]:[g,m[1]]:m[1]}d(f,a)}else t!=null&&r(a,t,o);return this}get(t,a){if(t=Vr(t),t){const o=ce.findKey(this,t);if(o){const l=this[o];if(!a)return l;if(a===!0)return __(l);if(ce.isFunction(a))return a.call(this,l,o);if(ce.isRegExp(a))return a.exec(l);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,a){if(t=Vr(t),t){const o=ce.findKey(this,t);return!!(o&&this[o]!==void 0&&(!a||qd(this,this[o],o,a)))}return!1}delete(t,a){const o=this;let l=!1;function r(d){if(d=Vr(d),d){const f=ce.findKey(o,d);f&&(!a||qd(o,o[f],f,a))&&(delete o[f],l=!0)}}return ce.isArray(t)?t.forEach(r):r(t),l}clear(t){const a=Object.keys(this);let o=a.length,l=!1;for(;o--;){const r=a[o];(!t||qd(this,this[r],r,t,!0))&&(delete this[r],l=!0)}return l}normalize(t){const a=this,o={};return ce.forEach(this,(l,r)=>{const d=ce.findKey(o,r);if(d){a[d]=Ql(l),delete a[r];return}const f=t?E_(r):String(r).trim();f!==r&&delete a[r],a[f]=Ql(l),o[f]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const a=Object.create(null);return ce.forEach(this,(o,l)=>{o!=null&&o!==!1&&(a[l]=t&&ce.isArray(o)?o.join(", "):o)}),a}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,a])=>t+": "+a).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...a){const o=new this(t);return a.forEach(l=>o.set(l)),o}static accessor(t){const o=(this[w0]=this[w0]={accessors:{}}).accessors,l=this.prototype;function r(d){const f=Vr(d);o[f]||(T_(l,d),o[f]=!0)}return ce.isArray(t)?t.forEach(r):r(t),this}};pn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ce.reduceDescriptors(pn.prototype,({value:s},t)=>{let a=t[0].toUpperCase()+t.slice(1);return{get:()=>s,set(o){this[a]=o}}});ce.freezeMethods(pn);function Yd(s,t){const a=this||ho,o=t||a,l=pn.from(o.headers);let r=o.data;return ce.forEach(s,function(f){r=f.call(a,r,l.normalize(),t?t.status:void 0)}),l.normalize(),r}function Sy(s){return!!(s&&s.__CANCEL__)}function Wi(s,t,a){Fe.call(this,s??"canceled",Fe.ERR_CANCELED,t,a),this.name="CanceledError"}ce.inherits(Wi,Fe,{__CANCEL__:!0});function Ny(s,t,a){const o=a.config.validateStatus;!a.status||!o||o(a.status)?s(a):t(new Fe("Request failed with status code "+a.status,[Fe.ERR_BAD_REQUEST,Fe.ERR_BAD_RESPONSE][Math.floor(a.status/100)-4],a.config,a.request,a))}function A_(s){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(s);return t&&t[1]||""}function C_(s,t){s=s||10;const a=new Array(s),o=new Array(s);let l=0,r=0,d;return t=t!==void 0?t:1e3,function(g){const h=Date.now(),m=o[r];d||(d=h),a[l]=g,o[l]=h;let w=r,x=0;for(;w!==l;)x+=a[w++],w=w%s;if(l=(l+1)%s,l===r&&(r=(r+1)%s),h-d<t)return;const p=m&&h-m;return p?Math.round(x*1e3/p):void 0}}function M_(s,t){let a=0,o=1e3/t,l,r;const d=(h,m=Date.now())=>{a=m,l=null,r&&(clearTimeout(r),r=null),s(...h)};return[(...h)=>{const m=Date.now(),w=m-a;w>=o?d(h,m):(l=h,r||(r=setTimeout(()=>{r=null,d(l)},o-w)))},()=>l&&d(l)]}const sc=(s,t,a=3)=>{let o=0;const l=C_(50,250);return M_(r=>{const d=r.loaded,f=r.lengthComputable?r.total:void 0,g=d-o,h=l(g),m=d<=f;o=d;const w={loaded:d,total:f,progress:f?d/f:void 0,bytes:g,rate:h||void 0,estimated:h&&f&&m?(f-d)/h:void 0,event:r,lengthComputable:f!=null,[t?"download":"upload"]:!0};s(w)},a)},S0=(s,t)=>{const a=s!=null;return[o=>t[0]({lengthComputable:a,total:s,loaded:o}),t[1]]},N0=s=>(...t)=>ce.asap(()=>s(...t)),O_=tn.hasStandardBrowserEnv?((s,t)=>a=>(a=new URL(a,tn.origin),s.protocol===a.protocol&&s.host===a.host&&(t||s.port===a.port)))(new URL(tn.origin),tn.navigator&&/(msie|trident)/i.test(tn.navigator.userAgent)):()=>!0,j_=tn.hasStandardBrowserEnv?{write(s,t,a,o,l,r){const d=[s+"="+encodeURIComponent(t)];ce.isNumber(a)&&d.push("expires="+new Date(a).toGMTString()),ce.isString(o)&&d.push("path="+o),ce.isString(l)&&d.push("domain="+l),r===!0&&d.push("secure"),document.cookie=d.join("; ")},read(s){const t=document.cookie.match(new RegExp("(^|;\\s*)("+s+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(s){this.write(s,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function k_(s){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(s)}function D_(s,t){return t?s.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):s}function _y(s,t,a){let o=!k_(t);return s&&(o||a==!1)?D_(s,t):t}const _0=s=>s instanceof pn?{...s}:s;function Gs(s,t){t=t||{};const a={};function o(h,m,w,x){return ce.isPlainObject(h)&&ce.isPlainObject(m)?ce.merge.call({caseless:x},h,m):ce.isPlainObject(m)?ce.merge({},m):ce.isArray(m)?m.slice():m}function l(h,m,w,x){if(ce.isUndefined(m)){if(!ce.isUndefined(h))return o(void 0,h,w,x)}else return o(h,m,w,x)}function r(h,m){if(!ce.isUndefined(m))return o(void 0,m)}function d(h,m){if(ce.isUndefined(m)){if(!ce.isUndefined(h))return o(void 0,h)}else return o(void 0,m)}function f(h,m,w){if(w in t)return o(h,m);if(w in s)return o(void 0,h)}const g={url:r,method:r,data:r,baseURL:d,transformRequest:d,transformResponse:d,paramsSerializer:d,timeout:d,timeoutMessage:d,withCredentials:d,withXSRFToken:d,adapter:d,responseType:d,xsrfCookieName:d,xsrfHeaderName:d,onUploadProgress:d,onDownloadProgress:d,decompress:d,maxContentLength:d,maxBodyLength:d,beforeRedirect:d,transport:d,httpAgent:d,httpsAgent:d,cancelToken:d,socketPath:d,responseEncoding:d,validateStatus:f,headers:(h,m,w)=>l(_0(h),_0(m),w,!0)};return ce.forEach(Object.keys({...s,...t}),function(m){const w=g[m]||l,x=w(s[m],t[m],m);ce.isUndefined(x)&&w!==f||(a[m]=x)}),a}const Ry=s=>{const t=Gs({},s);let{data:a,withXSRFToken:o,xsrfHeaderName:l,xsrfCookieName:r,headers:d,auth:f}=t;if(t.headers=d=pn.from(d),t.url=vy(_y(t.baseURL,t.url,t.allowAbsoluteUrls),s.params,s.paramsSerializer),f&&d.set("Authorization","Basic "+btoa((f.username||"")+":"+(f.password?unescape(encodeURIComponent(f.password)):""))),ce.isFormData(a)){if(tn.hasStandardBrowserEnv||tn.hasStandardBrowserWebWorkerEnv)d.setContentType(void 0);else if(ce.isFunction(a.getHeaders)){const g=a.getHeaders(),h=["content-type","content-length"];Object.entries(g).forEach(([m,w])=>{h.includes(m.toLowerCase())&&d.set(m,w)})}}if(tn.hasStandardBrowserEnv&&(o&&ce.isFunction(o)&&(o=o(t)),o||o!==!1&&O_(t.url))){const g=l&&r&&j_.read(r);g&&d.set(l,g)}return t},B_=typeof XMLHttpRequest<"u",I_=B_&&function(s){return new Promise(function(a,o){const l=Ry(s);let r=l.data;const d=pn.from(l.headers).normalize();let{responseType:f,onUploadProgress:g,onDownloadProgress:h}=l,m,w,x,p,v;function b(){p&&p(),v&&v(),l.cancelToken&&l.cancelToken.unsubscribe(m),l.signal&&l.signal.removeEventListener("abort",m)}let N=new XMLHttpRequest;N.open(l.method.toUpperCase(),l.url,!0),N.timeout=l.timeout;function _(){if(!N)return;const C=pn.from("getAllResponseHeaders"in N&&N.getAllResponseHeaders()),R={data:!f||f==="text"||f==="json"?N.responseText:N.response,status:N.status,statusText:N.statusText,headers:C,config:s,request:N};Ny(function(B){a(B),b()},function(B){o(B),b()},R),N=null}"onloadend"in N?N.onloadend=_:N.onreadystatechange=function(){!N||N.readyState!==4||N.status===0&&!(N.responseURL&&N.responseURL.indexOf("file:")===0)||setTimeout(_)},N.onabort=function(){N&&(o(new Fe("Request aborted",Fe.ECONNABORTED,s,N)),N=null)},N.onerror=function(k){const R=k&&k.message?k.message:"Network Error",j=new Fe(R,Fe.ERR_NETWORK,s,N);j.event=k||null,o(j),N=null},N.ontimeout=function(){let k=l.timeout?"timeout of "+l.timeout+"ms exceeded":"timeout exceeded";const R=l.transitional||by;l.timeoutErrorMessage&&(k=l.timeoutErrorMessage),o(new Fe(k,R.clarifyTimeoutError?Fe.ETIMEDOUT:Fe.ECONNABORTED,s,N)),N=null},r===void 0&&d.setContentType(null),"setRequestHeader"in N&&ce.forEach(d.toJSON(),function(k,R){N.setRequestHeader(R,k)}),ce.isUndefined(l.withCredentials)||(N.withCredentials=!!l.withCredentials),f&&f!=="json"&&(N.responseType=l.responseType),h&&([x,v]=sc(h,!0),N.addEventListener("progress",x)),g&&N.upload&&([w,p]=sc(g),N.upload.addEventListener("progress",w),N.upload.addEventListener("loadend",p)),(l.cancelToken||l.signal)&&(m=C=>{N&&(o(!C||C.type?new Wi(null,s,N):C),N.abort(),N=null)},l.cancelToken&&l.cancelToken.subscribe(m),l.signal&&(l.signal.aborted?m():l.signal.addEventListener("abort",m)));const A=A_(l.url);if(A&&tn.protocols.indexOf(A)===-1){o(new Fe("Unsupported protocol "+A+":",Fe.ERR_BAD_REQUEST,s));return}N.send(r||null)})},L_=(s,t)=>{const{length:a}=s=s?s.filter(Boolean):[];if(t||a){let o=new AbortController,l;const r=function(h){if(!l){l=!0,f();const m=h instanceof Error?h:this.reason;o.abort(m instanceof Fe?m:new Wi(m instanceof Error?m.message:m))}};let d=t&&setTimeout(()=>{d=null,r(new Fe(`timeout ${t} of ms exceeded`,Fe.ETIMEDOUT))},t);const f=()=>{s&&(d&&clearTimeout(d),d=null,s.forEach(h=>{h.unsubscribe?h.unsubscribe(r):h.removeEventListener("abort",r)}),s=null)};s.forEach(h=>h.addEventListener("abort",r));const{signal:g}=o;return g.unsubscribe=()=>ce.asap(f),g}},z_=function*(s,t){let a=s.byteLength;if(a<t){yield s;return}let o=0,l;for(;o<a;)l=o+t,yield s.slice(o,l),o=l},U_=async function*(s,t){for await(const a of H_(s))yield*z_(a,t)},H_=async function*(s){if(s[Symbol.asyncIterator]){yield*s;return}const t=s.getReader();try{for(;;){const{done:a,value:o}=await t.read();if(a)break;yield o}}finally{await t.cancel()}},R0=(s,t,a,o)=>{const l=U_(s,t);let r=0,d,f=g=>{d||(d=!0,o&&o(g))};return new ReadableStream({async pull(g){try{const{done:h,value:m}=await l.next();if(h){f(),g.close();return}let w=m.byteLength;if(a){let x=r+=w;a(x)}g.enqueue(new Uint8Array(m))}catch(h){throw f(h),h}},cancel(g){return f(g),l.return()}},{highWaterMark:2})},E0=64*1024,{isFunction:Dl}=ce,P_=(({Request:s,Response:t})=>({Request:s,Response:t}))(ce.global),{ReadableStream:T0,TextEncoder:A0}=ce.global,C0=(s,...t)=>{try{return!!s(...t)}catch{return!1}},G_=s=>{s=ce.merge.call({skipUndefined:!0},P_,s);const{fetch:t,Request:a,Response:o}=s,l=t?Dl(t):typeof fetch=="function",r=Dl(a),d=Dl(o);if(!l)return!1;const f=l&&Dl(T0),g=l&&(typeof A0=="function"?(v=>b=>v.encode(b))(new A0):async v=>new Uint8Array(await new a(v).arrayBuffer())),h=r&&f&&C0(()=>{let v=!1;const b=new a(tn.origin,{body:new T0,method:"POST",get duplex(){return v=!0,"half"}}).headers.has("Content-Type");return v&&!b}),m=d&&f&&C0(()=>ce.isReadableStream(new o("").body)),w={stream:m&&(v=>v.body)};l&&["text","arrayBuffer","blob","formData","stream"].forEach(v=>{!w[v]&&(w[v]=(b,N)=>{let _=b&&b[v];if(_)return _.call(b);throw new Fe(`Response type '${v}' is not supported`,Fe.ERR_NOT_SUPPORT,N)})});const x=async v=>{if(v==null)return 0;if(ce.isBlob(v))return v.size;if(ce.isSpecCompliantForm(v))return(await new a(tn.origin,{method:"POST",body:v}).arrayBuffer()).byteLength;if(ce.isArrayBufferView(v)||ce.isArrayBuffer(v))return v.byteLength;if(ce.isURLSearchParams(v)&&(v=v+""),ce.isString(v))return(await g(v)).byteLength},p=async(v,b)=>{const N=ce.toFiniteNumber(v.getContentLength());return N??x(b)};return async v=>{let{url:b,method:N,data:_,signal:A,cancelToken:C,timeout:k,onDownloadProgress:R,onUploadProgress:j,responseType:B,headers:M,withCredentials:I="same-origin",fetchOptions:L}=Ry(v),P=t||fetch;B=B?(B+"").toLowerCase():"text";let U=L_([A,C&&C.toAbortSignal()],k),q=null;const H=U&&U.unsubscribe&&(()=>{U.unsubscribe()});let V;try{if(j&&h&&N!=="get"&&N!=="head"&&(V=await p(M,_))!==0){let O=new a(b,{method:"POST",body:_,duplex:"half"}),G;if(ce.isFormData(_)&&(G=O.headers.get("content-type"))&&M.setContentType(G),O.body){const[W,Y]=S0(V,sc(N0(j)));_=R0(O.body,E0,W,Y)}}ce.isString(I)||(I=I?"include":"omit");const $=r&&"credentials"in a.prototype,Z={...L,signal:U,method:N.toUpperCase(),headers:M.normalize().toJSON(),body:_,duplex:"half",credentials:$?I:void 0};q=r&&new a(b,Z);let Q=await(r?P(q,L):P(b,Z));const F=m&&(B==="stream"||B==="response");if(m&&(R||F&&H)){const O={};["status","statusText","headers"].forEach(ee=>{O[ee]=Q[ee]});const G=ce.toFiniteNumber(Q.headers.get("content-length")),[W,Y]=R&&S0(G,sc(N0(R),!0))||[];Q=new o(R0(Q.body,E0,W,()=>{Y&&Y(),H&&H()}),O)}B=B||"text";let T=await w[ce.findKey(w,B)||"text"](Q,v);return!F&&H&&H(),await new Promise((O,G)=>{Ny(O,G,{data:T,headers:pn.from(Q.headers),status:Q.status,statusText:Q.statusText,config:v,request:q})})}catch($){throw H&&H(),$&&$.name==="TypeError"&&/Load failed|fetch/i.test($.message)?Object.assign(new Fe("Network Error",Fe.ERR_NETWORK,v,q),{cause:$.cause||$}):Fe.from($,$&&$.code,v,q)}}},$_=new Map,Ey=s=>{let t=s?s.env:{};const{fetch:a,Request:o,Response:l}=t,r=[o,l,a];let d=r.length,f=d,g,h,m=$_;for(;f--;)g=r[f],h=m.get(g),h===void 0&&m.set(g,h=f?new Map:G_(t)),m=h;return h};Ey();const Ef={http:r_,xhr:I_,fetch:{get:Ey}};ce.forEach(Ef,(s,t)=>{if(s){try{Object.defineProperty(s,"name",{value:t})}catch{}Object.defineProperty(s,"adapterName",{value:t})}});const M0=s=>`- ${s}`,V_=s=>ce.isFunction(s)||s===null||s===!1,Ty={getAdapter:(s,t)=>{s=ce.isArray(s)?s:[s];const{length:a}=s;let o,l;const r={};for(let d=0;d<a;d++){o=s[d];let f;if(l=o,!V_(o)&&(l=Ef[(f=String(o)).toLowerCase()],l===void 0))throw new Fe(`Unknown adapter '${f}'`);if(l&&(ce.isFunction(l)||(l=l.get(t))))break;r[f||"#"+d]=l}if(!l){const d=Object.entries(r).map(([g,h])=>`adapter ${g} `+(h===!1?"is not supported by the environment":"is not available in the build"));let f=a?d.length>1?`since :
`+d.map(M0).join(`
`):" "+M0(d[0]):"as no adapter specified";throw new Fe("There is no suitable adapter to dispatch the request "+f,"ERR_NOT_SUPPORT")}return l},adapters:Ef};function Xd(s){if(s.cancelToken&&s.cancelToken.throwIfRequested(),s.signal&&s.signal.aborted)throw new Wi(null,s)}function O0(s){return Xd(s),s.headers=pn.from(s.headers),s.data=Yd.call(s,s.transformRequest),["post","put","patch"].indexOf(s.method)!==-1&&s.headers.setContentType("application/x-www-form-urlencoded",!1),Ty.getAdapter(s.adapter||ho.adapter,s)(s).then(function(o){return Xd(s),o.data=Yd.call(s,s.transformResponse,o),o.headers=pn.from(o.headers),o},function(o){return Sy(o)||(Xd(s),o&&o.response&&(o.response.data=Yd.call(s,s.transformResponse,o.response),o.response.headers=pn.from(o.response.headers))),Promise.reject(o)})}const Ay="1.12.2",yc={};["object","boolean","number","function","string","symbol"].forEach((s,t)=>{yc[s]=function(o){return typeof o===s||"a"+(t<1?"n ":" ")+s}});const j0={};yc.transitional=function(t,a,o){function l(r,d){return"[Axios v"+Ay+"] Transitional option '"+r+"'"+d+(o?". "+o:"")}return(r,d,f)=>{if(t===!1)throw new Fe(l(d," has been removed"+(a?" in "+a:"")),Fe.ERR_DEPRECATED);return a&&!j0[d]&&(j0[d]=!0,console.warn(l(d," has been deprecated since v"+a+" and will be removed in the near future"))),t?t(r,d,f):!0}};yc.spelling=function(t){return(a,o)=>(console.warn(`${o} is likely a misspelling of ${t}`),!0)};function F_(s,t,a){if(typeof s!="object")throw new Fe("options must be an object",Fe.ERR_BAD_OPTION_VALUE);const o=Object.keys(s);let l=o.length;for(;l-- >0;){const r=o[l],d=t[r];if(d){const f=s[r],g=f===void 0||d(f,r,s);if(g!==!0)throw new Fe("option "+r+" must be "+g,Fe.ERR_BAD_OPTION_VALUE);continue}if(a!==!0)throw new Fe("Unknown option "+r,Fe.ERR_BAD_OPTION)}}const Kl={assertOptions:F_,validators:yc},aa=Kl.validators;let Ls=class{constructor(t){this.defaults=t||{},this.interceptors={request:new b0,response:new b0}}async request(t,a){try{return await this._request(t,a)}catch(o){if(o instanceof Error){let l={};Error.captureStackTrace?Error.captureStackTrace(l):l=new Error;const r=l.stack?l.stack.replace(/^.+\n/,""):"";try{o.stack?r&&!String(o.stack).endsWith(r.replace(/^.+\n.+\n/,""))&&(o.stack+=`
`+r):o.stack=r}catch{}}throw o}}_request(t,a){typeof t=="string"?(a=a||{},a.url=t):a=t||{},a=Gs(this.defaults,a);const{transitional:o,paramsSerializer:l,headers:r}=a;o!==void 0&&Kl.assertOptions(o,{silentJSONParsing:aa.transitional(aa.boolean),forcedJSONParsing:aa.transitional(aa.boolean),clarifyTimeoutError:aa.transitional(aa.boolean)},!1),l!=null&&(ce.isFunction(l)?a.paramsSerializer={serialize:l}:Kl.assertOptions(l,{encode:aa.function,serialize:aa.function},!0)),a.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?a.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:a.allowAbsoluteUrls=!0),Kl.assertOptions(a,{baseUrl:aa.spelling("baseURL"),withXsrfToken:aa.spelling("withXSRFToken")},!0),a.method=(a.method||this.defaults.method||"get").toLowerCase();let d=r&&ce.merge(r.common,r[a.method]);r&&ce.forEach(["delete","get","head","post","put","patch","common"],v=>{delete r[v]}),a.headers=pn.concat(d,r);const f=[];let g=!0;this.interceptors.request.forEach(function(b){typeof b.runWhen=="function"&&b.runWhen(a)===!1||(g=g&&b.synchronous,f.unshift(b.fulfilled,b.rejected))});const h=[];this.interceptors.response.forEach(function(b){h.push(b.fulfilled,b.rejected)});let m,w=0,x;if(!g){const v=[O0.bind(this),void 0];for(v.unshift(...f),v.push(...h),x=v.length,m=Promise.resolve(a);w<x;)m=m.then(v[w++],v[w++]);return m}x=f.length;let p=a;for(;w<x;){const v=f[w++],b=f[w++];try{p=v(p)}catch(N){b.call(this,N);break}}try{m=O0.call(this,p)}catch(v){return Promise.reject(v)}for(w=0,x=h.length;w<x;)m=m.then(h[w++],h[w++]);return m}getUri(t){t=Gs(this.defaults,t);const a=_y(t.baseURL,t.url,t.allowAbsoluteUrls);return vy(a,t.params,t.paramsSerializer)}};ce.forEach(["delete","get","head","options"],function(t){Ls.prototype[t]=function(a,o){return this.request(Gs(o||{},{method:t,url:a,data:(o||{}).data}))}});ce.forEach(["post","put","patch"],function(t){function a(o){return function(r,d,f){return this.request(Gs(f||{},{method:t,headers:o?{"Content-Type":"multipart/form-data"}:{},url:r,data:d}))}}Ls.prototype[t]=a(),Ls.prototype[t+"Form"]=a(!0)});let W_=class Cy{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let a;this.promise=new Promise(function(r){a=r});const o=this;this.promise.then(l=>{if(!o._listeners)return;let r=o._listeners.length;for(;r-- >0;)o._listeners[r](l);o._listeners=null}),this.promise.then=l=>{let r;const d=new Promise(f=>{o.subscribe(f),r=f}).then(l);return d.cancel=function(){o.unsubscribe(r)},d},t(function(r,d,f){o.reason||(o.reason=new Wi(r,d,f),a(o.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const a=this._listeners.indexOf(t);a!==-1&&this._listeners.splice(a,1)}toAbortSignal(){const t=new AbortController,a=o=>{t.abort(o)};return this.subscribe(a),t.signal.unsubscribe=()=>this.unsubscribe(a),t.signal}static source(){let t;return{token:new Cy(function(l){t=l}),cancel:t}}};function q_(s){return function(a){return s.apply(null,a)}}function Y_(s){return ce.isObject(s)&&s.isAxiosError===!0}const Tf={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Tf).forEach(([s,t])=>{Tf[t]=s});function My(s){const t=new Ls(s),a=oy(Ls.prototype.request,t);return ce.extend(a,Ls.prototype,t,{allOwnKeys:!0}),ce.extend(a,t,null,{allOwnKeys:!0}),a.create=function(l){return My(Gs(s,l))},a}const Dt=My(ho);Dt.Axios=Ls;Dt.CanceledError=Wi;Dt.CancelToken=W_;Dt.isCancel=Sy;Dt.VERSION=Ay;Dt.toFormData=xc;Dt.AxiosError=Fe;Dt.Cancel=Dt.CanceledError;Dt.all=function(t){return Promise.all(t)};Dt.spread=q_;Dt.isAxiosError=Y_;Dt.mergeConfig=Gs;Dt.AxiosHeaders=pn;Dt.formToJSON=s=>wy(ce.isHTMLForm(s)?new FormData(s):s);Dt.getAdapter=Ty.getAdapter;Dt.HttpStatusCode=Tf;Dt.default=Dt;const{Axios:zM,AxiosError:UM,CanceledError:HM,isCancel:PM,CancelToken:GM,VERSION:$M,all:VM,Cancel:FM,isAxiosError:WM,spread:qM,toFormData:YM,AxiosHeaders:XM,HttpStatusCode:ZM,formToJSON:QM,getAdapter:KM,mergeConfig:JM}=Dt,ic={BASE_URL:"",WS_URL:`${window.location.protocol}//${window.location.host}`,TIMEOUT:1e4,RETRY_ATTEMPTS:3},k0={RECONNECT_INTERVAL:5e3,MAX_RECONNECT_ATTEMPTS:10};class X_{client;constructor(){this.client=Dt.create({baseURL:ic.BASE_URL,timeout:ic.TIMEOUT,headers:{"Content-Type":"application/json"}}),this.setupInterceptors()}setupInterceptors(){this.client.interceptors.request.use(t=>{const a=this.getUserPubkey();return a&&(t.headers["X-User-Pubkey"]=a),t},t=>Promise.reject(t)),this.client.interceptors.response.use(t=>t,async t=>{const a=t.config;return t.response?.status===401&&!a._retry?(a._retry=!0,this.clearAuthData(),window.location.href="/",Promise.reject(t)):(t.response||console.error("Network error:",t.message),Promise.reject(t))})}getUserPubkey(){return localStorage.getItem("userPubkey")}clearAuthData(){localStorage.removeItem("userPubkey"),localStorage.removeItem("userData")}async get(t,a){return(await this.client.get(t,a)).data}async post(t,a,o){return(await this.client.post(t,a,o)).data}async put(t,a,o){return(await this.client.put(t,a,o)).data}async delete(t,a){return(await this.client.delete(t,a)).data}setUserPubkey(t){t?localStorage.setItem("userPubkey",t):localStorage.removeItem("userPubkey")}}const Ft=new X_,zs={async registerUser(s){return Ft.post("/api/users/register",s)},async getCurrentUser(){return Ft.get("/api/users/me")},async getUser(s){return Ft.get(`/api/users/${s}`)},async getUserByUsername(s){return Ft.get(`/api/users/username/${s}`)},async changeUsername(s){return Ft.post("/api/users/me/username",s)},async checkUsernameAvailability(s){return Ft.get(`/api/users/username/available?username=${s}`)},async getUserMatches(s,t=1,a=20){return Ft.get(`/api/users/${s}/matches?page=${t}&pageSize=${a}`)},async getUserStatistics(s,t="AllTime"){return Ft.get(`/api/users/${s}/statistics?period=${t}`)}},Oy=()=>{const{wallet:s,publicKey:t,connected:a,connecting:o,connect:l,disconnect:r,select:d,wallets:f}=fs(),[g,h]=D.useState({profile:null,isNewUser:!1,isLoading:!1,error:null});D.useMemo(()=>{const v=new Map;return f.forEach(b=>v.set(b.adapter.name,{ready:b.readyState})),v},[f]);const m=D.useCallback(async v=>{try{h(_=>({..._,isLoading:!0,error:null})),d(v);const N=f.find(_=>_.adapter.name===v)?.readyState;if(N!=="Installed"&&N!=="Loadable")throw new Error(`${v} wallet is not available on this device/browser.`);if(await l(),!t)throw new Error("Wallet connected, but no public key returned.")}catch(b){let N="Failed to connect wallet";typeof b?.message=="string"&&(/User rejected/i.test(b.message)?N="Connection was rejected. Please approve the request in Phantom.":/timeout/i.test(b.message)?N="Connection timed out. Make sure Phantom is installed and try again.":/not available|not found|not installed/i.test(b.message)?N="Phantom wallet not found here. On mobile, open your site inside Phantom or install the app.":N=b.message),h(_=>({..._,isLoading:!1,error:N}))}},[f,d,l,t]),w=D.useCallback(async()=>{try{await r(),h({profile:null,isNewUser:!1,isLoading:!1,error:null}),Ft.setUserPubkey(null)}catch(v){console.error("Failed to disconnect wallet:",v)}},[r]),x=D.useCallback(async v=>{try{h(b=>({...b,isLoading:!0,error:null})),Ft.setUserPubkey(v);try{const b=await zs.getCurrentUser();h({profile:b,isNewUser:!1,isLoading:!1,error:null})}catch(b){if(b&&typeof b=="object"&&"response"in b&&b.response&&typeof b.response=="object"&&"status"in b.response&&b.response.status===404){const N=await zs.registerUser({pubkey:v});h({profile:N,isNewUser:!0,isLoading:!1,error:null})}else throw b}}catch(b){console.error("Failed to register/get user:",b);const N=b instanceof Error?b.message:"Failed to register user";h(_=>({..._,isLoading:!1,error:N}))}},[]);D.useEffect(()=>{a&&t?x(t.toString()):a||(h({profile:null,isNewUser:!1,isLoading:!1,error:null}),Ft.setUserPubkey(null))},[a,t,x]);const p=D.useCallback(async v=>{if(g.profile)try{h(b=>({...b,isLoading:!0,error:null})),await zs.changeUsername({username:v}),h(b=>({...b,profile:b.profile?{...b.profile,username:v}:null,isLoading:!1,error:null}))}catch(b){console.error("Failed to update username:",b),h(N=>({...N,isLoading:!1,error:b instanceof Error?b.message:"Failed to update username"}))}},[g.profile]);return{wallet:s,publicKey:t,connected:a,connecting:o,wallets:f,user:g,connect:m,disconnect:w,updateUsername:p}};var Zd,D0;function Z_(){if(D0)return Zd;D0=1;var s=XS().Buffer;function t(a){if(a.length>=255)throw new TypeError("Alphabet too long");for(var o=new Uint8Array(256),l=0;l<o.length;l++)o[l]=255;for(var r=0;r<a.length;r++){var d=a.charAt(r),f=d.charCodeAt(0);if(o[f]!==255)throw new TypeError(d+" is ambiguous");o[f]=r}var g=a.length,h=a.charAt(0),m=Math.log(g)/Math.log(256),w=Math.log(256)/Math.log(g);function x(b){if((Array.isArray(b)||b instanceof Uint8Array)&&(b=s.from(b)),!s.isBuffer(b))throw new TypeError("Expected Buffer");if(b.length===0)return"";for(var N=0,_=0,A=0,C=b.length;A!==C&&b[A]===0;)A++,N++;for(var k=(C-A)*w+1>>>0,R=new Uint8Array(k);A!==C;){for(var j=b[A],B=0,M=k-1;(j!==0||B<_)&&M!==-1;M--,B++)j+=256*R[M]>>>0,R[M]=j%g>>>0,j=j/g>>>0;if(j!==0)throw new Error("Non-zero carry");_=B,A++}for(var I=k-_;I!==k&&R[I]===0;)I++;for(var L=h.repeat(N);I<k;++I)L+=a.charAt(R[I]);return L}function p(b){if(typeof b!="string")throw new TypeError("Expected String");if(b.length===0)return s.alloc(0);for(var N=0,_=0,A=0;b[N]===h;)_++,N++;for(var C=(b.length-N)*m+1>>>0,k=new Uint8Array(C);N<b.length;){var R=b.charCodeAt(N);if(R>255)return;var j=o[R];if(j===255)return;for(var B=0,M=C-1;(j!==0||B<A)&&M!==-1;M--,B++)j+=g*k[M]>>>0,k[M]=j%256>>>0,j=j/256>>>0;if(j!==0)throw new Error("Non-zero carry");A=B,N++}for(var I=C-A;I!==C&&k[I]===0;)I++;var L=s.allocUnsafe(_+(C-I));L.fill(0,0,_);for(var P=_;I!==C;)L[P++]=k[I++];return L}function v(b){var N=p(b);if(N)return N;throw new Error("Non-base"+g+" character")}return{encode:x,decodeUnsafe:p,decode:v}}return Zd=t,Zd}var Qd,B0;function Q_(){if(B0)return Qd;B0=1;var s=Z_(),t="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";return Qd=s(t),Qd}var K_=Q_();const Yf=mc(K_);var Bl={exports:{}},I0;function J_(){if(I0)return Bl.exports;I0=1;const s=/[\p{Lu}]/u,t=/[\p{Ll}]/u,a=/^[\p{Lu}](?![\p{Lu}])/gu,o=/([\p{Alpha}\p{N}_]|$)/u,l=/[_.\- ]+/,r=new RegExp("^"+l.source),d=new RegExp(l.source+o.source,"gu"),f=new RegExp("\\d+"+o.source,"gu"),g=(x,p,v)=>{let b=!1,N=!1,_=!1;for(let A=0;A<x.length;A++){const C=x[A];b&&s.test(C)?(x=x.slice(0,A)+"-"+x.slice(A),b=!1,_=N,N=!0,A++):N&&_&&t.test(C)?(x=x.slice(0,A-1)+"-"+x.slice(A-1),_=N,N=!1,b=!0):(b=p(C)===C&&v(C)!==C,_=N,N=v(C)===C&&p(C)!==C)}return x},h=(x,p)=>(a.lastIndex=0,x.replace(a,v=>p(v))),m=(x,p)=>(d.lastIndex=0,f.lastIndex=0,x.replace(d,(v,b)=>p(b)).replace(f,v=>p(v))),w=(x,p)=>{if(!(typeof x=="string"||Array.isArray(x)))throw new TypeError("Expected the input to be `string | string[]`");if(p={pascalCase:!1,preserveConsecutiveUppercase:!1,...p},Array.isArray(x)?x=x.map(_=>_.trim()).filter(_=>_.length).join("-"):x=x.trim(),x.length===0)return"";const v=p.locale===!1?_=>_.toLowerCase():_=>_.toLocaleLowerCase(p.locale),b=p.locale===!1?_=>_.toUpperCase():_=>_.toLocaleUpperCase(p.locale);return x.length===1?p.pascalCase?b(x):v(x):(x!==v(x)&&(x=g(x,v,b)),x=x.replace(r,""),p.preserveConsecutiveUppercase?x=h(x,v):x=v(x),p.pascalCase&&(x=b(x.charAt(0))+x.slice(1)),m(x,b))};return Bl.exports=w,Bl.exports.default=w,Bl.exports}var eR=J_();const tR=mc(eR);var Fr={},Re={},L0;function z0(){if(L0)return Re;L0=1;class s{constructor(T,O){if(!Number.isInteger(T))throw new TypeError("span must be an integer");this.span=T,this.property=O}makeDestinationObject(){return{}}decode(T,O){throw new Error("Layout is abstract")}encode(T,O,G){throw new Error("Layout is abstract")}getSpan(T,O){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(T){const O=Object.create(this.constructor.prototype);return Object.assign(O,this),O.property=T,O}fromArray(T){}}Re.Layout=s;function t(F,T){return T.property?F+"["+T.property+"]":F}Re.nameWithProperty=t;function a(F,T){if(typeof F!="function")throw new TypeError("Class must be constructor");if(F.hasOwnProperty("layout_"))throw new Error("Class is already bound to a layout");if(!(T&&T instanceof s))throw new TypeError("layout must be a Layout");if(T.hasOwnProperty("boundConstructor_"))throw new Error("layout is already bound to a constructor");F.layout_=T,T.boundConstructor_=F,T.makeDestinationObject=(()=>new F),Object.defineProperty(F.prototype,"encode",{value:function(O,G){return T.encode(this,O,G)},writable:!0}),Object.defineProperty(F,"decode",{value:function(O,G){return T.decode(O,G)},writable:!0})}Re.bindConstructorLayout=a;class o extends s{isCount(){throw new Error("ExternalLayout is abstract")}}class l extends o{constructor(T,O){if(T===void 0&&(T=1),!Number.isInteger(T)||0>=T)throw new TypeError("elementSpan must be a (positive) integer");super(-1,O),this.elementSpan=T}isCount(){return!0}decode(T,O){O===void 0&&(O=0);const G=T.length-O;return Math.floor(G/this.elementSpan)}encode(T,O,G){return 0}}class r extends o{constructor(T,O,G){if(!(T instanceof s))throw new TypeError("layout must be a Layout");if(O===void 0)O=0;else if(!Number.isInteger(O))throw new TypeError("offset must be integer or undefined");super(T.span,G||T.property),this.layout=T,this.offset=O}isCount(){return this.layout instanceof d||this.layout instanceof f}decode(T,O){return O===void 0&&(O=0),this.layout.decode(T,O+this.offset)}encode(T,O,G){return G===void 0&&(G=0),this.layout.encode(T,O,G+this.offset)}}class d extends s{constructor(T,O){if(super(T,O),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(T,O){return O===void 0&&(O=0),T.readUIntLE(O,this.span)}encode(T,O,G){return G===void 0&&(G=0),O.writeUIntLE(T,G,this.span),this.span}}class f extends s{constructor(T,O){if(super(T,O),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(T,O){return O===void 0&&(O=0),T.readUIntBE(O,this.span)}encode(T,O,G){return G===void 0&&(G=0),O.writeUIntBE(T,G,this.span),this.span}}class g extends s{constructor(T,O){if(super(T,O),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(T,O){return O===void 0&&(O=0),T.readIntLE(O,this.span)}encode(T,O,G){return G===void 0&&(G=0),O.writeIntLE(T,G,this.span),this.span}}class h extends s{constructor(T,O){if(super(T,O),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(T,O){return O===void 0&&(O=0),T.readIntBE(O,this.span)}encode(T,O,G){return G===void 0&&(G=0),O.writeIntBE(T,G,this.span),this.span}}const m=Math.pow(2,32);function w(F){const T=Math.floor(F/m),O=F-T*m;return{hi32:T,lo32:O}}function x(F,T){return F*m+T}class p extends s{constructor(T){super(8,T)}decode(T,O){O===void 0&&(O=0);const G=T.readUInt32LE(O),W=T.readUInt32LE(O+4);return x(W,G)}encode(T,O,G){G===void 0&&(G=0);const W=w(T);return O.writeUInt32LE(W.lo32,G),O.writeUInt32LE(W.hi32,G+4),8}}class v extends s{constructor(T){super(8,T)}decode(T,O){O===void 0&&(O=0);const G=T.readUInt32BE(O),W=T.readUInt32BE(O+4);return x(G,W)}encode(T,O,G){G===void 0&&(G=0);const W=w(T);return O.writeUInt32BE(W.hi32,G),O.writeUInt32BE(W.lo32,G+4),8}}class b extends s{constructor(T){super(8,T)}decode(T,O){O===void 0&&(O=0);const G=T.readUInt32LE(O),W=T.readInt32LE(O+4);return x(W,G)}encode(T,O,G){G===void 0&&(G=0);const W=w(T);return O.writeUInt32LE(W.lo32,G),O.writeInt32LE(W.hi32,G+4),8}}class N extends s{constructor(T){super(8,T)}decode(T,O){O===void 0&&(O=0);const G=T.readInt32BE(O),W=T.readUInt32BE(O+4);return x(G,W)}encode(T,O,G){G===void 0&&(G=0);const W=w(T);return O.writeInt32BE(W.hi32,G),O.writeUInt32BE(W.lo32,G+4),8}}class _ extends s{constructor(T){super(4,T)}decode(T,O){return O===void 0&&(O=0),T.readFloatLE(O)}encode(T,O,G){return G===void 0&&(G=0),O.writeFloatLE(T,G),4}}class A extends s{constructor(T){super(4,T)}decode(T,O){return O===void 0&&(O=0),T.readFloatBE(O)}encode(T,O,G){return G===void 0&&(G=0),O.writeFloatBE(T,G),4}}class C extends s{constructor(T){super(8,T)}decode(T,O){return O===void 0&&(O=0),T.readDoubleLE(O)}encode(T,O,G){return G===void 0&&(G=0),O.writeDoubleLE(T,G),8}}class k extends s{constructor(T){super(8,T)}decode(T,O){return O===void 0&&(O=0),T.readDoubleBE(O)}encode(T,O,G){return G===void 0&&(G=0),O.writeDoubleBE(T,G),8}}class R extends s{constructor(T,O,G){if(!(T instanceof s))throw new TypeError("elementLayout must be a Layout");if(!(O instanceof o&&O.isCount()||Number.isInteger(O)&&0<=O))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let W=-1;!(O instanceof o)&&0<T.span&&(W=O*T.span),super(W,G),this.elementLayout=T,this.count=O}getSpan(T,O){if(0<=this.span)return this.span;O===void 0&&(O=0);let G=0,W=this.count;if(W instanceof o&&(W=W.decode(T,O)),0<this.elementLayout.span)G=W*this.elementLayout.span;else{let Y=0;for(;Y<W;)G+=this.elementLayout.getSpan(T,O+G),++Y}return G}decode(T,O){O===void 0&&(O=0);const G=[];let W=0,Y=this.count;for(Y instanceof o&&(Y=Y.decode(T,O));W<Y;)G.push(this.elementLayout.decode(T,O)),O+=this.elementLayout.getSpan(T,O),W+=1;return G}encode(T,O,G){G===void 0&&(G=0);const W=this.elementLayout,Y=T.reduce((ee,de)=>ee+W.encode(de,O,G+ee),0);return this.count instanceof o&&this.count.encode(T.length,O,G),Y}}class j extends s{constructor(T,O,G){if(!(Array.isArray(T)&&T.reduce((Y,ee)=>Y&&ee instanceof s,!0)))throw new TypeError("fields must be array of Layout instances");typeof O=="boolean"&&G===void 0&&(G=O,O=void 0);for(const Y of T)if(0>Y.span&&Y.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let W=-1;try{W=T.reduce((Y,ee)=>Y+ee.getSpan(),0)}catch{}super(W,O),this.fields=T,this.decodePrefixes=!!G}getSpan(T,O){if(0<=this.span)return this.span;O===void 0&&(O=0);let G=0;try{G=this.fields.reduce((W,Y)=>{const ee=Y.getSpan(T,O);return O+=ee,W+ee},0)}catch{throw new RangeError("indeterminate span")}return G}decode(T,O){O===void 0&&(O=0);const G=this.makeDestinationObject();for(const W of this.fields)if(W.property!==void 0&&(G[W.property]=W.decode(T,O)),O+=W.getSpan(T,O),this.decodePrefixes&&T.length===O)break;return G}encode(T,O,G){G===void 0&&(G=0);const W=G;let Y=0,ee=0;for(const de of this.fields){let re=de.span;if(ee=0<re?re:0,de.property!==void 0){const ie=T[de.property];ie!==void 0&&(ee=de.encode(ie,O,G),0>re&&(re=de.getSpan(O,G)))}Y=G,G+=re}return Y+ee-W}fromArray(T){const O=this.makeDestinationObject();for(const G of this.fields)G.property!==void 0&&0<T.length&&(O[G.property]=T.shift());return O}layoutFor(T){if(typeof T!="string")throw new TypeError("property must be string");for(const O of this.fields)if(O.property===T)return O}offsetOf(T){if(typeof T!="string")throw new TypeError("property must be string");let O=0;for(const G of this.fields){if(G.property===T)return O;0>G.span?O=-1:0<=O&&(O+=G.span)}}}class B{constructor(T){this.property=T}decode(){throw new Error("UnionDiscriminator is abstract")}encode(){throw new Error("UnionDiscriminator is abstract")}}class M extends B{constructor(T,O){if(!(T instanceof o&&T.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(O||T.property||"variant"),this.layout=T}decode(T,O){return this.layout.decode(T,O)}encode(T,O,G){return this.layout.encode(T,O,G)}}class I extends s{constructor(T,O,G){const W=T instanceof d||T instanceof f;if(W)T=new M(new r(T));else if(T instanceof o&&T.isCount())T=new M(T);else if(!(T instanceof B))throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(O===void 0&&(O=null),!(O===null||O instanceof s))throw new TypeError("defaultLayout must be null or a Layout");if(O!==null){if(0>O.span)throw new Error("defaultLayout must have constant span");O.property===void 0&&(O=O.replicate("content"))}let Y=-1;O&&(Y=O.span,0<=Y&&W&&(Y+=T.layout.span)),super(Y,G),this.discriminator=T,this.usesPrefixDiscriminator=W,this.defaultLayout=O,this.registry={};let ee=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(de){return ee(de)},this.configGetSourceVariant=function(de){ee=de.bind(this)}}getSpan(T,O){if(0<=this.span)return this.span;O===void 0&&(O=0);const G=this.getVariant(T,O);if(!G)throw new Error("unable to determine span for unrecognized variant");return G.getSpan(T,O)}defaultGetSourceVariant(T){if(T.hasOwnProperty(this.discriminator.property)){if(this.defaultLayout&&T.hasOwnProperty(this.defaultLayout.property))return;const O=this.registry[T[this.discriminator.property]];if(O&&(!O.layout||T.hasOwnProperty(O.property)))return O}else for(const O in this.registry){const G=this.registry[O];if(T.hasOwnProperty(G.property))return G}throw new Error("unable to infer src variant")}decode(T,O){O===void 0&&(O=0);let G;const W=this.discriminator,Y=W.decode(T,O);let ee=this.registry[Y];if(ee===void 0){let de=0;ee=this.defaultLayout,this.usesPrefixDiscriminator&&(de=W.layout.span),G=this.makeDestinationObject(),G[W.property]=Y,G[ee.property]=this.defaultLayout.decode(T,O+de)}else G=ee.decode(T,O);return G}encode(T,O,G){G===void 0&&(G=0);const W=this.getSourceVariant(T);if(W===void 0){const Y=this.discriminator,ee=this.defaultLayout;let de=0;return this.usesPrefixDiscriminator&&(de=Y.layout.span),Y.encode(T[Y.property],O,G),de+ee.encode(T[ee.property],O,G+de)}return W.encode(T,O,G)}addVariant(T,O,G){const W=new L(this,T,O,G);return this.registry[T]=W,W}getVariant(T,O){let G=T;return Buffer.isBuffer(T)&&(O===void 0&&(O=0),G=this.discriminator.decode(T,O)),this.registry[G]}}class L extends s{constructor(T,O,G,W){if(!(T instanceof I))throw new TypeError("union must be a Union");if(!Number.isInteger(O)||0>O)throw new TypeError("variant must be a (non-negative) integer");if(typeof G=="string"&&W===void 0&&(W=G,G=null),G){if(!(G instanceof s))throw new TypeError("layout must be a Layout");if(T.defaultLayout!==null&&0<=G.span&&G.span>T.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof W!="string")throw new TypeError("variant must have a String property")}let Y=T.span;0>T.span&&(Y=G?G.span:0,0<=Y&&T.usesPrefixDiscriminator&&(Y+=T.discriminator.layout.span)),super(Y,W),this.union=T,this.variant=O,this.layout=G||null}getSpan(T,O){if(0<=this.span)return this.span;O===void 0&&(O=0);let G=0;return this.union.usesPrefixDiscriminator&&(G=this.union.discriminator.layout.span),G+this.layout.getSpan(T,O+G)}decode(T,O){const G=this.makeDestinationObject();if(O===void 0&&(O=0),this!==this.union.getVariant(T,O))throw new Error("variant mismatch");let W=0;return this.union.usesPrefixDiscriminator&&(W=this.union.discriminator.layout.span),this.layout?G[this.property]=this.layout.decode(T,O+W):this.property?G[this.property]=!0:this.union.usesPrefixDiscriminator&&(G[this.union.discriminator.property]=this.variant),G}encode(T,O,G){G===void 0&&(G=0);let W=0;if(this.union.usesPrefixDiscriminator&&(W=this.union.discriminator.layout.span),this.layout&&!T.hasOwnProperty(this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,O,G);let Y=W;if(this.layout&&(this.layout.encode(T[this.property],O,G+W),Y+=this.layout.getSpan(O,G+W),0<=this.union.span&&Y>this.union.span))throw new Error("encoded variant overruns containing union");return Y}fromArray(T){if(this.layout)return this.layout.fromArray(T)}}function P(F){return 0>F&&(F+=4294967296),F}class U extends s{constructor(T,O,G){if(!(T instanceof d||T instanceof f))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof O=="string"&&G===void 0&&(G=O,O=void 0),4<T.span)throw new RangeError("word cannot exceed 32 bits");super(T.span,G),this.word=T,this.msb=!!O,this.fields=[];let W=0;this._packedSetValue=function(Y){return W=P(Y),this},this._packedGetValue=function(){return W}}decode(T,O){const G=this.makeDestinationObject();O===void 0&&(O=0);const W=this.word.decode(T,O);this._packedSetValue(W);for(const Y of this.fields)Y.property!==void 0&&(G[Y.property]=Y.decode(W));return G}encode(T,O,G){G===void 0&&(G=0);const W=this.word.decode(O,G);this._packedSetValue(W);for(const Y of this.fields)if(Y.property!==void 0){const ee=T[Y.property];ee!==void 0&&Y.encode(ee)}return this.word.encode(this._packedGetValue(),O,G)}addField(T,O){const G=new q(this,T,O);return this.fields.push(G),G}addBoolean(T){const O=new H(this,T);return this.fields.push(O),O}fieldFor(T){if(typeof T!="string")throw new TypeError("property must be string");for(const O of this.fields)if(O.property===T)return O}}class q{constructor(T,O,G){if(!(T instanceof U))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(O)||0>=O)throw new TypeError("bits must be positive integer");const W=8*T.span,Y=T.fields.reduce((ee,de)=>ee+de.bits,0);if(O+Y>W)throw new Error("bits too long for span remainder ("+(W-Y)+" of "+W+" remain)");this.container=T,this.bits=O,this.valueMask=(1<<O)-1,O===32&&(this.valueMask=4294967295),this.start=Y,this.container.msb&&(this.start=W-Y-O),this.wordMask=P(this.valueMask<<this.start),this.property=G}decode(){const T=this.container._packedGetValue();return P(T&this.wordMask)>>>this.start}encode(T){if(!Number.isInteger(T)||T!==P(T&this.valueMask))throw new TypeError(t("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const O=this.container._packedGetValue(),G=P(T<<this.start);this.container._packedSetValue(P(O&~this.wordMask)|G)}}class H extends q{constructor(T,O){super(T,1,O)}decode(T,O){return!!q.prototype.decode.call(this,T,O)}encode(T){return typeof T=="boolean"&&(T=+T),q.prototype.encode.call(this,T)}}class V extends s{constructor(T,O){if(!(T instanceof o&&T.isCount()||Number.isInteger(T)&&0<=T))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let G=-1;T instanceof o||(G=T),super(G,O),this.length=T}getSpan(T,O){let G=this.span;return 0>G&&(G=this.length.decode(T,O)),G}decode(T,O){O===void 0&&(O=0);let G=this.span;return 0>G&&(G=this.length.decode(T,O)),T.slice(O,O+G)}encode(T,O,G){let W=this.length;if(this.length instanceof o&&(W=T.length),!(Buffer.isBuffer(T)&&W===T.length))throw new TypeError(t("Blob.encode",this)+" requires (length "+W+") Buffer as src");if(G+W>O.length)throw new RangeError("encoding overruns Buffer");return O.write(T.toString("hex"),G,W,"hex"),this.length instanceof o&&this.length.encode(W,O,G),W}}class $ extends s{constructor(T){super(-1,T)}getSpan(T,O){if(!Buffer.isBuffer(T))throw new TypeError("b must be a Buffer");O===void 0&&(O=0);let G=O;for(;G<T.length&&T[G]!==0;)G+=1;return 1+G-O}decode(T,O,G){O===void 0&&(O=0);let W=this.getSpan(T,O);return T.slice(O,O+W-1).toString("utf-8")}encode(T,O,G){G===void 0&&(G=0),typeof T!="string"&&(T=T.toString());const W=new Buffer(T,"utf8"),Y=W.length;if(G+Y>O.length)throw new RangeError("encoding overruns Buffer");return W.copy(O,G),O[G+Y]=0,Y+1}}class Z extends s{constructor(T,O){if(typeof T=="string"&&O===void 0&&(O=T,T=void 0),T===void 0)T=-1;else if(!Number.isInteger(T))throw new TypeError("maxSpan must be an integer");super(-1,O),this.maxSpan=T}getSpan(T,O){if(!Buffer.isBuffer(T))throw new TypeError("b must be a Buffer");return O===void 0&&(O=0),T.length-O}decode(T,O,G){O===void 0&&(O=0);let W=this.getSpan(T,O);if(0<=this.maxSpan&&this.maxSpan<W)throw new RangeError("text length exceeds maxSpan");return T.slice(O,O+W).toString("utf-8")}encode(T,O,G){G===void 0&&(G=0),typeof T!="string"&&(T=T.toString());const W=new Buffer(T,"utf8"),Y=W.length;if(0<=this.maxSpan&&this.maxSpan<Y)throw new RangeError("text length exceeds maxSpan");if(G+Y>O.length)throw new RangeError("encoding overruns Buffer");return W.copy(O,G),Y}}class Q extends s{constructor(T,O){super(0,O),this.value=T}decode(T,O,G){return this.value}encode(T,O,G){return 0}}return Re.ExternalLayout=o,Re.GreedyCount=l,Re.OffsetLayout=r,Re.UInt=d,Re.UIntBE=f,Re.Int=g,Re.IntBE=h,Re.Float=_,Re.FloatBE=A,Re.Double=C,Re.DoubleBE=k,Re.Sequence=R,Re.Structure=j,Re.UnionDiscriminator=B,Re.UnionLayoutDiscriminator=M,Re.Union=I,Re.VariantLayout=L,Re.BitStructure=U,Re.BitField=q,Re.Boolean=H,Re.Blob=V,Re.CString=$,Re.UTF8=Z,Re.Constant=Q,Re.greedy=((F,T)=>new l(F,T)),Re.offset=((F,T,O)=>new r(F,T,O)),Re.u8=(F=>new d(1,F)),Re.u16=(F=>new d(2,F)),Re.u24=(F=>new d(3,F)),Re.u32=(F=>new d(4,F)),Re.u40=(F=>new d(5,F)),Re.u48=(F=>new d(6,F)),Re.nu64=(F=>new p(F)),Re.u16be=(F=>new f(2,F)),Re.u24be=(F=>new f(3,F)),Re.u32be=(F=>new f(4,F)),Re.u40be=(F=>new f(5,F)),Re.u48be=(F=>new f(6,F)),Re.nu64be=(F=>new v(F)),Re.s8=(F=>new g(1,F)),Re.s16=(F=>new g(2,F)),Re.s24=(F=>new g(3,F)),Re.s32=(F=>new g(4,F)),Re.s40=(F=>new g(5,F)),Re.s48=(F=>new g(6,F)),Re.ns64=(F=>new b(F)),Re.s16be=(F=>new h(2,F)),Re.s24be=(F=>new h(3,F)),Re.s32be=(F=>new h(4,F)),Re.s40be=(F=>new h(5,F)),Re.s48be=(F=>new h(6,F)),Re.ns64be=(F=>new N(F)),Re.f32=(F=>new _(F)),Re.f32be=(F=>new A(F)),Re.f64=(F=>new C(F)),Re.f64be=(F=>new k(F)),Re.struct=((F,T,O)=>new j(F,T,O)),Re.bits=((F,T,O)=>new U(F,T,O)),Re.seq=((F,T,O)=>new R(F,T,O)),Re.union=((F,T,O)=>new I(F,T,O)),Re.unionLayoutDiscriminator=((F,T)=>new M(F,T)),Re.blob=((F,T)=>new V(F,T)),Re.cstr=(F=>new $(F)),Re.utf8=((F,T)=>new Z(F,T)),Re.const=((F,T)=>new Q(F,T)),Re}const nR=YS(ZS);var U0;function aR(){return U0||(U0=1,(function(s){var t=Fr&&Fr.__importDefault||function(U){return U&&U.__esModule?U:{default:U}};Object.defineProperty(s,"__esModule",{value:!0}),s.struct=s.f64=s.f32=s.i32=s.u32=s.i16=s.u16=s.i8=s.u8=void 0,s.u64=f,s.i64=g,s.u128=h,s.i128=m,s.u256=w,s.i256=x,s.publicKey=v,s.option=N,s.bool=_,s.vec=k,s.tagged=R,s.vecU8=j,s.str=B,s.rustEnum=M,s.array=I,s.map=P;const a=z0(),o=nR,l=t(QS());var r=z0();Object.defineProperty(s,"u8",{enumerable:!0,get:function(){return r.u8}}),Object.defineProperty(s,"i8",{enumerable:!0,get:function(){return r.s8}}),Object.defineProperty(s,"u16",{enumerable:!0,get:function(){return r.u16}}),Object.defineProperty(s,"i16",{enumerable:!0,get:function(){return r.s16}}),Object.defineProperty(s,"u32",{enumerable:!0,get:function(){return r.u32}}),Object.defineProperty(s,"i32",{enumerable:!0,get:function(){return r.s32}}),Object.defineProperty(s,"f32",{enumerable:!0,get:function(){return r.f32}}),Object.defineProperty(s,"f64",{enumerable:!0,get:function(){return r.f64}}),Object.defineProperty(s,"struct",{enumerable:!0,get:function(){return r.struct}});class d extends a.Layout{constructor(q,H,V){super(q,V),this.blob=(0,a.blob)(q),this.signed=H}decode(q,H=0){const V=new l.default(this.blob.decode(q,H),10,"le");return this.signed?V.fromTwos(this.span*8).clone():V}encode(q,H,V=0){return this.signed&&(q=q.toTwos(this.span*8)),this.blob.encode(q.toArrayLike(Buffer,"le",this.span),H,V)}}function f(U){return new d(8,!1,U)}function g(U){return new d(8,!0,U)}function h(U){return new d(16,!1,U)}function m(U){return new d(16,!0,U)}function w(U){return new d(32,!1,U)}function x(U){return new d(32,!0,U)}class p extends a.Layout{constructor(q,H,V,$){super(q.span,$),this.layout=q,this.decoder=H,this.encoder=V}decode(q,H){return this.decoder(this.layout.decode(q,H))}encode(q,H,V){return this.layout.encode(this.encoder(q),H,V)}getSpan(q,H){return this.layout.getSpan(q,H)}}function v(U){return new p((0,a.blob)(32),q=>new o.PublicKey(q),q=>q.toBuffer(),U)}class b extends a.Layout{constructor(q,H){super(-1,H),this.layout=q,this.discriminator=(0,a.u8)()}encode(q,H,V=0){return q==null?this.discriminator.encode(0,H,V):(this.discriminator.encode(1,H,V),this.layout.encode(q,H,V+1)+1)}decode(q,H=0){const V=this.discriminator.decode(q,H);if(V===0)return null;if(V===1)return this.layout.decode(q,H+1);throw new Error("Invalid option "+this.property)}getSpan(q,H=0){const V=this.discriminator.decode(q,H);if(V===0)return 1;if(V===1)return this.layout.getSpan(q,H+1)+1;throw new Error("Invalid option "+this.property)}}function N(U,q){return new b(U,q)}function _(U){return new p((0,a.u8)(),A,C,U)}function A(U){if(U===0)return!1;if(U===1)return!0;throw new Error("Invalid bool: "+U)}function C(U){return U?1:0}function k(U,q){const H=(0,a.u32)("length"),V=(0,a.struct)([H,(0,a.seq)(U,(0,a.offset)(H,-H.span),"values")]);return new p(V,({values:$})=>$,$=>({values:$}),q)}function R(U,q,H){const V=(0,a.struct)([f("tag"),q.replicate("data")]);function $({tag:Z,data:Q}){if(!Z.eq(U))throw new Error("Invalid tag, expected: "+U.toString("hex")+", got: "+Z.toString("hex"));return Q}return new p(V,$,Z=>({tag:U,data:Z}),H)}function j(U){const q=(0,a.u32)("length"),H=(0,a.struct)([q,(0,a.blob)((0,a.offset)(q,-q.span),"data")]);return new p(H,({data:V})=>V,V=>({data:V}),U)}function B(U){return new p(j(),q=>q.toString("utf-8"),q=>Buffer.from(q,"utf-8"),U)}function M(U,q,H){const V=(0,a.union)(H??(0,a.u8)(),q);return U.forEach(($,Z)=>V.addVariant(Z,$,$.property)),V}function I(U,q,H){const V=(0,a.struct)([(0,a.seq)(U,q,"values")]);return new p(V,({values:$})=>$,$=>({values:$}),H)}class L extends a.Layout{constructor(q,H,V){super(q.span+H.span,V),this.keyLayout=q,this.valueLayout=H}decode(q,H){H=H||0;const V=this.keyLayout.decode(q,H),$=this.valueLayout.decode(q,H+this.keyLayout.getSpan(q,H));return[V,$]}encode(q,H,V){V=V||0;const $=this.keyLayout.encode(q[0],H,V),Z=this.valueLayout.encode(q[1],H,V+$);return $+Z}getSpan(q,H){return this.keyLayout.getSpan(q,H)+this.valueLayout.getSpan(q,H)}}function P(U,q,H){const V=(0,a.u32)("length"),$=(0,a.struct)([V,(0,a.seq)(new L(U,q),(0,a.offset)(V,-V.span),"values")]);return new p($,({values:Z})=>new Map(Z),Z=>({values:Array.from(Z.entries())}),H)}})(Fr)),Fr}var qe=aR();/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */function qi(s){let t=s.length;for(;--t>=0;)s[t]=0}const sR=3,iR=258,jy=29,rR=256,oR=rR+1+jy,ky=30,lR=512,cR=new Array((oR+2)*2);qi(cR);const uR=new Array(ky*2);qi(uR);const dR=new Array(lR);qi(dR);const fR=new Array(iR-sR+1);qi(fR);const mR=new Array(jy);qi(mR);const hR=new Array(ky);qi(hR);const gR=(s,t,a,o)=>{let l=s&65535|0,r=s>>>16&65535|0,d=0;for(;a!==0;){d=a>2e3?2e3:a,a-=d;do l=l+t[o++]|0,r=r+l|0;while(--d);l%=65521,r%=65521}return l|r<<16|0};var Af=gR;const pR=()=>{let s,t=[];for(var a=0;a<256;a++){s=a;for(var o=0;o<8;o++)s=s&1?3988292384^s>>>1:s>>>1;t[a]=s}return t},xR=new Uint32Array(pR()),yR=(s,t,a,o)=>{const l=xR,r=o+a;s^=-1;for(let d=o;d<r;d++)s=s>>>8^l[(s^t[d])&255];return s^-1};var sa=yR,Cf={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Dy={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const vR=(s,t)=>Object.prototype.hasOwnProperty.call(s,t);var bR=function(s){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const a=t.shift();if(a){if(typeof a!="object")throw new TypeError(a+"must be non-object");for(const o in a)vR(a,o)&&(s[o]=a[o])}}return s},wR=s=>{let t=0;for(let o=0,l=s.length;o<l;o++)t+=s[o].length;const a=new Uint8Array(t);for(let o=0,l=0,r=s.length;o<r;o++){let d=s[o];a.set(d,l),l+=d.length}return a},By={assign:bR,flattenChunks:wR};let Iy=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Iy=!1}const to=new Uint8Array(256);for(let s=0;s<256;s++)to[s]=s>=252?6:s>=248?5:s>=240?4:s>=224?3:s>=192?2:1;to[254]=to[254]=1;var SR=s=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(s);let t,a,o,l,r,d=s.length,f=0;for(l=0;l<d;l++)a=s.charCodeAt(l),(a&64512)===55296&&l+1<d&&(o=s.charCodeAt(l+1),(o&64512)===56320&&(a=65536+(a-55296<<10)+(o-56320),l++)),f+=a<128?1:a<2048?2:a<65536?3:4;for(t=new Uint8Array(f),r=0,l=0;r<f;l++)a=s.charCodeAt(l),(a&64512)===55296&&l+1<d&&(o=s.charCodeAt(l+1),(o&64512)===56320&&(a=65536+(a-55296<<10)+(o-56320),l++)),a<128?t[r++]=a:a<2048?(t[r++]=192|a>>>6,t[r++]=128|a&63):a<65536?(t[r++]=224|a>>>12,t[r++]=128|a>>>6&63,t[r++]=128|a&63):(t[r++]=240|a>>>18,t[r++]=128|a>>>12&63,t[r++]=128|a>>>6&63,t[r++]=128|a&63);return t};const NR=(s,t)=>{if(t<65534&&s.subarray&&Iy)return String.fromCharCode.apply(null,s.length===t?s:s.subarray(0,t));let a="";for(let o=0;o<t;o++)a+=String.fromCharCode(s[o]);return a};var _R=(s,t)=>{const a=t||s.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(s.subarray(0,t));let o,l;const r=new Array(a*2);for(l=0,o=0;o<a;){let d=s[o++];if(d<128){r[l++]=d;continue}let f=to[d];if(f>4){r[l++]=65533,o+=f-1;continue}for(d&=f===2?31:f===3?15:7;f>1&&o<a;)d=d<<6|s[o++]&63,f--;if(f>1){r[l++]=65533;continue}d<65536?r[l++]=d:(d-=65536,r[l++]=55296|d>>10&1023,r[l++]=56320|d&1023)}return NR(r,l)},RR=(s,t)=>{t=t||s.length,t>s.length&&(t=s.length);let a=t-1;for(;a>=0&&(s[a]&192)===128;)a--;return a<0||a===0?t:a+to[s[a]]>t?a:t},Mf={string2buf:SR,buf2string:_R,utf8border:RR};function ER(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var TR=ER;const Il=16209,AR=16191;var CR=function(t,a){let o,l,r,d,f,g,h,m,w,x,p,v,b,N,_,A,C,k,R,j,B,M,I,L;const P=t.state;o=t.next_in,I=t.input,l=o+(t.avail_in-5),r=t.next_out,L=t.output,d=r-(a-t.avail_out),f=r+(t.avail_out-257),g=P.dmax,h=P.wsize,m=P.whave,w=P.wnext,x=P.window,p=P.hold,v=P.bits,b=P.lencode,N=P.distcode,_=(1<<P.lenbits)-1,A=(1<<P.distbits)-1;e:do{v<15&&(p+=I[o++]<<v,v+=8,p+=I[o++]<<v,v+=8),C=b[p&_];t:for(;;){if(k=C>>>24,p>>>=k,v-=k,k=C>>>16&255,k===0)L[r++]=C&65535;else if(k&16){R=C&65535,k&=15,k&&(v<k&&(p+=I[o++]<<v,v+=8),R+=p&(1<<k)-1,p>>>=k,v-=k),v<15&&(p+=I[o++]<<v,v+=8,p+=I[o++]<<v,v+=8),C=N[p&A];n:for(;;){if(k=C>>>24,p>>>=k,v-=k,k=C>>>16&255,k&16){if(j=C&65535,k&=15,v<k&&(p+=I[o++]<<v,v+=8,v<k&&(p+=I[o++]<<v,v+=8)),j+=p&(1<<k)-1,j>g){t.msg="invalid distance too far back",P.mode=Il;break e}if(p>>>=k,v-=k,k=r-d,j>k){if(k=j-k,k>m&&P.sane){t.msg="invalid distance too far back",P.mode=Il;break e}if(B=0,M=x,w===0){if(B+=h-k,k<R){R-=k;do L[r++]=x[B++];while(--k);B=r-j,M=L}}else if(w<k){if(B+=h+w-k,k-=w,k<R){R-=k;do L[r++]=x[B++];while(--k);if(B=0,w<R){k=w,R-=k;do L[r++]=x[B++];while(--k);B=r-j,M=L}}}else if(B+=w-k,k<R){R-=k;do L[r++]=x[B++];while(--k);B=r-j,M=L}for(;R>2;)L[r++]=M[B++],L[r++]=M[B++],L[r++]=M[B++],R-=3;R&&(L[r++]=M[B++],R>1&&(L[r++]=M[B++]))}else{B=r-j;do L[r++]=L[B++],L[r++]=L[B++],L[r++]=L[B++],R-=3;while(R>2);R&&(L[r++]=L[B++],R>1&&(L[r++]=L[B++]))}}else if((k&64)===0){C=N[(C&65535)+(p&(1<<k)-1)];continue n}else{t.msg="invalid distance code",P.mode=Il;break e}break}}else if((k&64)===0){C=b[(C&65535)+(p&(1<<k)-1)];continue t}else if(k&32){P.mode=AR;break e}else{t.msg="invalid literal/length code",P.mode=Il;break e}break}}while(o<l&&r<f);R=v>>3,o-=R,v-=R<<3,p&=(1<<v)-1,t.next_in=o,t.next_out=r,t.avail_in=o<l?5+(l-o):5-(o-l),t.avail_out=r<f?257+(f-r):257-(r-f),P.hold=p,P.bits=v};const Di=15,H0=852,P0=592,G0=0,Kd=1,$0=2,MR=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),OR=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),jR=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),kR=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),DR=(s,t,a,o,l,r,d,f)=>{const g=f.bits;let h=0,m=0,w=0,x=0,p=0,v=0,b=0,N=0,_=0,A=0,C,k,R,j,B,M=null,I;const L=new Uint16Array(Di+1),P=new Uint16Array(Di+1);let U=null,q,H,V;for(h=0;h<=Di;h++)L[h]=0;for(m=0;m<o;m++)L[t[a+m]]++;for(p=g,x=Di;x>=1&&L[x]===0;x--);if(p>x&&(p=x),x===0)return l[r++]=1<<24|64<<16|0,l[r++]=1<<24|64<<16|0,f.bits=1,0;for(w=1;w<x&&L[w]===0;w++);for(p<w&&(p=w),N=1,h=1;h<=Di;h++)if(N<<=1,N-=L[h],N<0)return-1;if(N>0&&(s===G0||x!==1))return-1;for(P[1]=0,h=1;h<Di;h++)P[h+1]=P[h]+L[h];for(m=0;m<o;m++)t[a+m]!==0&&(d[P[t[a+m]]++]=m);if(s===G0?(M=U=d,I=20):s===Kd?(M=MR,U=OR,I=257):(M=jR,U=kR,I=0),A=0,m=0,h=w,B=r,v=p,b=0,R=-1,_=1<<p,j=_-1,s===Kd&&_>H0||s===$0&&_>P0)return 1;for(;;){q=h-b,d[m]+1<I?(H=0,V=d[m]):d[m]>=I?(H=U[d[m]-I],V=M[d[m]-I]):(H=96,V=0),C=1<<h-b,k=1<<v,w=k;do k-=C,l[B+(A>>b)+k]=q<<24|H<<16|V|0;while(k!==0);for(C=1<<h-1;A&C;)C>>=1;if(C!==0?(A&=C-1,A+=C):A=0,m++,--L[h]===0){if(h===x)break;h=t[a+d[m]]}if(h>p&&(A&j)!==R){for(b===0&&(b=p),B+=w,v=h-b,N=1<<v;v+b<x&&(N-=L[v+b],!(N<=0));)v++,N<<=1;if(_+=1<<v,s===Kd&&_>H0||s===$0&&_>P0)return 1;R=A&j,l[R]=p<<24|v<<16|B-r|0}}return A!==0&&(l[B+A]=h-b<<24|64<<16|0),f.bits=p,0};var Jr=DR;const BR=0,Ly=1,zy=2,{Z_FINISH:V0,Z_BLOCK:IR,Z_TREES:Ll,Z_OK:$s,Z_STREAM_END:LR,Z_NEED_DICT:zR,Z_STREAM_ERROR:Vn,Z_DATA_ERROR:Uy,Z_MEM_ERROR:Hy,Z_BUF_ERROR:UR,Z_DEFLATED:F0}=Dy,vc=16180,W0=16181,q0=16182,Y0=16183,X0=16184,Z0=16185,Q0=16186,K0=16187,J0=16188,ex=16189,rc=16190,Aa=16191,Jd=16192,tx=16193,ef=16194,nx=16195,ax=16196,sx=16197,ix=16198,zl=16199,Ul=16200,rx=16201,ox=16202,lx=16203,cx=16204,ux=16205,tf=16206,dx=16207,fx=16208,Rt=16209,Py=16210,Gy=16211,HR=852,PR=592,GR=15,$R=GR,mx=s=>(s>>>24&255)+(s>>>8&65280)+((s&65280)<<8)+((s&255)<<24);function VR(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Ws=s=>{if(!s)return 1;const t=s.state;return!t||t.strm!==s||t.mode<vc||t.mode>Gy?1:0},$y=s=>{if(Ws(s))return Vn;const t=s.state;return s.total_in=s.total_out=t.total=0,s.msg="",t.wrap&&(s.adler=t.wrap&1),t.mode=vc,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(HR),t.distcode=t.distdyn=new Int32Array(PR),t.sane=1,t.back=-1,$s},Vy=s=>{if(Ws(s))return Vn;const t=s.state;return t.wsize=0,t.whave=0,t.wnext=0,$y(s)},Fy=(s,t)=>{let a;if(Ws(s))return Vn;const o=s.state;return t<0?(a=0,t=-t):(a=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?Vn:(o.window!==null&&o.wbits!==t&&(o.window=null),o.wrap=a,o.wbits=t,Vy(s))},Wy=(s,t)=>{if(!s)return Vn;const a=new VR;s.state=a,a.strm=s,a.window=null,a.mode=vc;const o=Fy(s,t);return o!==$s&&(s.state=null),o},FR=s=>Wy(s,$R);let hx=!0,nf,af;const WR=s=>{if(hx){nf=new Int32Array(512),af=new Int32Array(32);let t=0;for(;t<144;)s.lens[t++]=8;for(;t<256;)s.lens[t++]=9;for(;t<280;)s.lens[t++]=7;for(;t<288;)s.lens[t++]=8;for(Jr(Ly,s.lens,0,288,nf,0,s.work,{bits:9}),t=0;t<32;)s.lens[t++]=5;Jr(zy,s.lens,0,32,af,0,s.work,{bits:5}),hx=!1}s.lencode=nf,s.lenbits=9,s.distcode=af,s.distbits=5},qy=(s,t,a,o)=>{let l;const r=s.state;return r.window===null&&(r.wsize=1<<r.wbits,r.wnext=0,r.whave=0,r.window=new Uint8Array(r.wsize)),o>=r.wsize?(r.window.set(t.subarray(a-r.wsize,a),0),r.wnext=0,r.whave=r.wsize):(l=r.wsize-r.wnext,l>o&&(l=o),r.window.set(t.subarray(a-o,a-o+l),r.wnext),o-=l,o?(r.window.set(t.subarray(a-o,a),0),r.wnext=o,r.whave=r.wsize):(r.wnext+=l,r.wnext===r.wsize&&(r.wnext=0),r.whave<r.wsize&&(r.whave+=l))),0},qR=(s,t)=>{let a,o,l,r,d,f,g,h,m,w,x,p,v,b,N=0,_,A,C,k,R,j,B,M;const I=new Uint8Array(4);let L,P;const U=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Ws(s)||!s.output||!s.input&&s.avail_in!==0)return Vn;a=s.state,a.mode===Aa&&(a.mode=Jd),d=s.next_out,l=s.output,g=s.avail_out,r=s.next_in,o=s.input,f=s.avail_in,h=a.hold,m=a.bits,w=f,x=g,M=$s;e:for(;;)switch(a.mode){case vc:if(a.wrap===0){a.mode=Jd;break}for(;m<16;){if(f===0)break e;f--,h+=o[r++]<<m,m+=8}if(a.wrap&2&&h===35615){a.wbits===0&&(a.wbits=15),a.check=0,I[0]=h&255,I[1]=h>>>8&255,a.check=sa(a.check,I,2,0),h=0,m=0,a.mode=W0;break}if(a.head&&(a.head.done=!1),!(a.wrap&1)||(((h&255)<<8)+(h>>8))%31){s.msg="incorrect header check",a.mode=Rt;break}if((h&15)!==F0){s.msg="unknown compression method",a.mode=Rt;break}if(h>>>=4,m-=4,B=(h&15)+8,a.wbits===0&&(a.wbits=B),B>15||B>a.wbits){s.msg="invalid window size",a.mode=Rt;break}a.dmax=1<<a.wbits,a.flags=0,s.adler=a.check=1,a.mode=h&512?ex:Aa,h=0,m=0;break;case W0:for(;m<16;){if(f===0)break e;f--,h+=o[r++]<<m,m+=8}if(a.flags=h,(a.flags&255)!==F0){s.msg="unknown compression method",a.mode=Rt;break}if(a.flags&57344){s.msg="unknown header flags set",a.mode=Rt;break}a.head&&(a.head.text=h>>8&1),a.flags&512&&a.wrap&4&&(I[0]=h&255,I[1]=h>>>8&255,a.check=sa(a.check,I,2,0)),h=0,m=0,a.mode=q0;case q0:for(;m<32;){if(f===0)break e;f--,h+=o[r++]<<m,m+=8}a.head&&(a.head.time=h),a.flags&512&&a.wrap&4&&(I[0]=h&255,I[1]=h>>>8&255,I[2]=h>>>16&255,I[3]=h>>>24&255,a.check=sa(a.check,I,4,0)),h=0,m=0,a.mode=Y0;case Y0:for(;m<16;){if(f===0)break e;f--,h+=o[r++]<<m,m+=8}a.head&&(a.head.xflags=h&255,a.head.os=h>>8),a.flags&512&&a.wrap&4&&(I[0]=h&255,I[1]=h>>>8&255,a.check=sa(a.check,I,2,0)),h=0,m=0,a.mode=X0;case X0:if(a.flags&1024){for(;m<16;){if(f===0)break e;f--,h+=o[r++]<<m,m+=8}a.length=h,a.head&&(a.head.extra_len=h),a.flags&512&&a.wrap&4&&(I[0]=h&255,I[1]=h>>>8&255,a.check=sa(a.check,I,2,0)),h=0,m=0}else a.head&&(a.head.extra=null);a.mode=Z0;case Z0:if(a.flags&1024&&(p=a.length,p>f&&(p=f),p&&(a.head&&(B=a.head.extra_len-a.length,a.head.extra||(a.head.extra=new Uint8Array(a.head.extra_len)),a.head.extra.set(o.subarray(r,r+p),B)),a.flags&512&&a.wrap&4&&(a.check=sa(a.check,o,p,r)),f-=p,r+=p,a.length-=p),a.length))break e;a.length=0,a.mode=Q0;case Q0:if(a.flags&2048){if(f===0)break e;p=0;do B=o[r+p++],a.head&&B&&a.length<65536&&(a.head.name+=String.fromCharCode(B));while(B&&p<f);if(a.flags&512&&a.wrap&4&&(a.check=sa(a.check,o,p,r)),f-=p,r+=p,B)break e}else a.head&&(a.head.name=null);a.length=0,a.mode=K0;case K0:if(a.flags&4096){if(f===0)break e;p=0;do B=o[r+p++],a.head&&B&&a.length<65536&&(a.head.comment+=String.fromCharCode(B));while(B&&p<f);if(a.flags&512&&a.wrap&4&&(a.check=sa(a.check,o,p,r)),f-=p,r+=p,B)break e}else a.head&&(a.head.comment=null);a.mode=J0;case J0:if(a.flags&512){for(;m<16;){if(f===0)break e;f--,h+=o[r++]<<m,m+=8}if(a.wrap&4&&h!==(a.check&65535)){s.msg="header crc mismatch",a.mode=Rt;break}h=0,m=0}a.head&&(a.head.hcrc=a.flags>>9&1,a.head.done=!0),s.adler=a.check=0,a.mode=Aa;break;case ex:for(;m<32;){if(f===0)break e;f--,h+=o[r++]<<m,m+=8}s.adler=a.check=mx(h),h=0,m=0,a.mode=rc;case rc:if(a.havedict===0)return s.next_out=d,s.avail_out=g,s.next_in=r,s.avail_in=f,a.hold=h,a.bits=m,zR;s.adler=a.check=1,a.mode=Aa;case Aa:if(t===IR||t===Ll)break e;case Jd:if(a.last){h>>>=m&7,m-=m&7,a.mode=tf;break}for(;m<3;){if(f===0)break e;f--,h+=o[r++]<<m,m+=8}switch(a.last=h&1,h>>>=1,m-=1,h&3){case 0:a.mode=tx;break;case 1:if(WR(a),a.mode=zl,t===Ll){h>>>=2,m-=2;break e}break;case 2:a.mode=ax;break;case 3:s.msg="invalid block type",a.mode=Rt}h>>>=2,m-=2;break;case tx:for(h>>>=m&7,m-=m&7;m<32;){if(f===0)break e;f--,h+=o[r++]<<m,m+=8}if((h&65535)!==(h>>>16^65535)){s.msg="invalid stored block lengths",a.mode=Rt;break}if(a.length=h&65535,h=0,m=0,a.mode=ef,t===Ll)break e;case ef:a.mode=nx;case nx:if(p=a.length,p){if(p>f&&(p=f),p>g&&(p=g),p===0)break e;l.set(o.subarray(r,r+p),d),f-=p,r+=p,g-=p,d+=p,a.length-=p;break}a.mode=Aa;break;case ax:for(;m<14;){if(f===0)break e;f--,h+=o[r++]<<m,m+=8}if(a.nlen=(h&31)+257,h>>>=5,m-=5,a.ndist=(h&31)+1,h>>>=5,m-=5,a.ncode=(h&15)+4,h>>>=4,m-=4,a.nlen>286||a.ndist>30){s.msg="too many length or distance symbols",a.mode=Rt;break}a.have=0,a.mode=sx;case sx:for(;a.have<a.ncode;){for(;m<3;){if(f===0)break e;f--,h+=o[r++]<<m,m+=8}a.lens[U[a.have++]]=h&7,h>>>=3,m-=3}for(;a.have<19;)a.lens[U[a.have++]]=0;if(a.lencode=a.lendyn,a.lenbits=7,L={bits:a.lenbits},M=Jr(BR,a.lens,0,19,a.lencode,0,a.work,L),a.lenbits=L.bits,M){s.msg="invalid code lengths set",a.mode=Rt;break}a.have=0,a.mode=ix;case ix:for(;a.have<a.nlen+a.ndist;){for(;N=a.lencode[h&(1<<a.lenbits)-1],_=N>>>24,A=N>>>16&255,C=N&65535,!(_<=m);){if(f===0)break e;f--,h+=o[r++]<<m,m+=8}if(C<16)h>>>=_,m-=_,a.lens[a.have++]=C;else{if(C===16){for(P=_+2;m<P;){if(f===0)break e;f--,h+=o[r++]<<m,m+=8}if(h>>>=_,m-=_,a.have===0){s.msg="invalid bit length repeat",a.mode=Rt;break}B=a.lens[a.have-1],p=3+(h&3),h>>>=2,m-=2}else if(C===17){for(P=_+3;m<P;){if(f===0)break e;f--,h+=o[r++]<<m,m+=8}h>>>=_,m-=_,B=0,p=3+(h&7),h>>>=3,m-=3}else{for(P=_+7;m<P;){if(f===0)break e;f--,h+=o[r++]<<m,m+=8}h>>>=_,m-=_,B=0,p=11+(h&127),h>>>=7,m-=7}if(a.have+p>a.nlen+a.ndist){s.msg="invalid bit length repeat",a.mode=Rt;break}for(;p--;)a.lens[a.have++]=B}}if(a.mode===Rt)break;if(a.lens[256]===0){s.msg="invalid code -- missing end-of-block",a.mode=Rt;break}if(a.lenbits=9,L={bits:a.lenbits},M=Jr(Ly,a.lens,0,a.nlen,a.lencode,0,a.work,L),a.lenbits=L.bits,M){s.msg="invalid literal/lengths set",a.mode=Rt;break}if(a.distbits=6,a.distcode=a.distdyn,L={bits:a.distbits},M=Jr(zy,a.lens,a.nlen,a.ndist,a.distcode,0,a.work,L),a.distbits=L.bits,M){s.msg="invalid distances set",a.mode=Rt;break}if(a.mode=zl,t===Ll)break e;case zl:a.mode=Ul;case Ul:if(f>=6&&g>=258){s.next_out=d,s.avail_out=g,s.next_in=r,s.avail_in=f,a.hold=h,a.bits=m,CR(s,x),d=s.next_out,l=s.output,g=s.avail_out,r=s.next_in,o=s.input,f=s.avail_in,h=a.hold,m=a.bits,a.mode===Aa&&(a.back=-1);break}for(a.back=0;N=a.lencode[h&(1<<a.lenbits)-1],_=N>>>24,A=N>>>16&255,C=N&65535,!(_<=m);){if(f===0)break e;f--,h+=o[r++]<<m,m+=8}if(A&&(A&240)===0){for(k=_,R=A,j=C;N=a.lencode[j+((h&(1<<k+R)-1)>>k)],_=N>>>24,A=N>>>16&255,C=N&65535,!(k+_<=m);){if(f===0)break e;f--,h+=o[r++]<<m,m+=8}h>>>=k,m-=k,a.back+=k}if(h>>>=_,m-=_,a.back+=_,a.length=C,A===0){a.mode=ux;break}if(A&32){a.back=-1,a.mode=Aa;break}if(A&64){s.msg="invalid literal/length code",a.mode=Rt;break}a.extra=A&15,a.mode=rx;case rx:if(a.extra){for(P=a.extra;m<P;){if(f===0)break e;f--,h+=o[r++]<<m,m+=8}a.length+=h&(1<<a.extra)-1,h>>>=a.extra,m-=a.extra,a.back+=a.extra}a.was=a.length,a.mode=ox;case ox:for(;N=a.distcode[h&(1<<a.distbits)-1],_=N>>>24,A=N>>>16&255,C=N&65535,!(_<=m);){if(f===0)break e;f--,h+=o[r++]<<m,m+=8}if((A&240)===0){for(k=_,R=A,j=C;N=a.distcode[j+((h&(1<<k+R)-1)>>k)],_=N>>>24,A=N>>>16&255,C=N&65535,!(k+_<=m);){if(f===0)break e;f--,h+=o[r++]<<m,m+=8}h>>>=k,m-=k,a.back+=k}if(h>>>=_,m-=_,a.back+=_,A&64){s.msg="invalid distance code",a.mode=Rt;break}a.offset=C,a.extra=A&15,a.mode=lx;case lx:if(a.extra){for(P=a.extra;m<P;){if(f===0)break e;f--,h+=o[r++]<<m,m+=8}a.offset+=h&(1<<a.extra)-1,h>>>=a.extra,m-=a.extra,a.back+=a.extra}if(a.offset>a.dmax){s.msg="invalid distance too far back",a.mode=Rt;break}a.mode=cx;case cx:if(g===0)break e;if(p=x-g,a.offset>p){if(p=a.offset-p,p>a.whave&&a.sane){s.msg="invalid distance too far back",a.mode=Rt;break}p>a.wnext?(p-=a.wnext,v=a.wsize-p):v=a.wnext-p,p>a.length&&(p=a.length),b=a.window}else b=l,v=d-a.offset,p=a.length;p>g&&(p=g),g-=p,a.length-=p;do l[d++]=b[v++];while(--p);a.length===0&&(a.mode=Ul);break;case ux:if(g===0)break e;l[d++]=a.length,g--,a.mode=Ul;break;case tf:if(a.wrap){for(;m<32;){if(f===0)break e;f--,h|=o[r++]<<m,m+=8}if(x-=g,s.total_out+=x,a.total+=x,a.wrap&4&&x&&(s.adler=a.check=a.flags?sa(a.check,l,x,d-x):Af(a.check,l,x,d-x)),x=g,a.wrap&4&&(a.flags?h:mx(h))!==a.check){s.msg="incorrect data check",a.mode=Rt;break}h=0,m=0}a.mode=dx;case dx:if(a.wrap&&a.flags){for(;m<32;){if(f===0)break e;f--,h+=o[r++]<<m,m+=8}if(a.wrap&4&&h!==(a.total&4294967295)){s.msg="incorrect length check",a.mode=Rt;break}h=0,m=0}a.mode=fx;case fx:M=LR;break e;case Rt:M=Uy;break e;case Py:return Hy;case Gy:default:return Vn}return s.next_out=d,s.avail_out=g,s.next_in=r,s.avail_in=f,a.hold=h,a.bits=m,(a.wsize||x!==s.avail_out&&a.mode<Rt&&(a.mode<tf||t!==V0))&&qy(s,s.output,s.next_out,x-s.avail_out),w-=s.avail_in,x-=s.avail_out,s.total_in+=w,s.total_out+=x,a.total+=x,a.wrap&4&&x&&(s.adler=a.check=a.flags?sa(a.check,l,x,s.next_out-x):Af(a.check,l,x,s.next_out-x)),s.data_type=a.bits+(a.last?64:0)+(a.mode===Aa?128:0)+(a.mode===zl||a.mode===ef?256:0),(w===0&&x===0||t===V0)&&M===$s&&(M=UR),M},YR=s=>{if(Ws(s))return Vn;let t=s.state;return t.window&&(t.window=null),s.state=null,$s},XR=(s,t)=>{if(Ws(s))return Vn;const a=s.state;return(a.wrap&2)===0?Vn:(a.head=t,t.done=!1,$s)},ZR=(s,t)=>{const a=t.length;let o,l,r;return Ws(s)||(o=s.state,o.wrap!==0&&o.mode!==rc)?Vn:o.mode===rc&&(l=1,l=Af(l,t,a,0),l!==o.check)?Uy:(r=qy(s,t,a,a),r?(o.mode=Py,Hy):(o.havedict=1,$s))};var QR=Vy,KR=Fy,JR=$y,eE=FR,tE=Wy,nE=qR,aE=YR,sE=XR,iE=ZR,rE="pako inflate (from Nodeca project)",Ma={inflateReset:QR,inflateReset2:KR,inflateResetKeep:JR,inflateInit:eE,inflateInit2:tE,inflate:nE,inflateEnd:aE,inflateGetHeader:sE,inflateSetDictionary:iE,inflateInfo:rE};function oE(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var lE=oE;const Yy=Object.prototype.toString,{Z_NO_FLUSH:cE,Z_FINISH:uE,Z_OK:no,Z_STREAM_END:sf,Z_NEED_DICT:rf,Z_STREAM_ERROR:dE,Z_DATA_ERROR:gx,Z_MEM_ERROR:fE}=Dy;function bc(s){this.options=By.assign({chunkSize:1024*64,windowBits:15,to:""},s||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(s&&s.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15)===0&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new TR,this.strm.avail_out=0;let a=Ma.inflateInit2(this.strm,t.windowBits);if(a!==no)throw new Error(Cf[a]);if(this.header=new lE,Ma.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=Mf.string2buf(t.dictionary):Yy.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(a=Ma.inflateSetDictionary(this.strm,t.dictionary),a!==no)))throw new Error(Cf[a])}bc.prototype.push=function(s,t){const a=this.strm,o=this.options.chunkSize,l=this.options.dictionary;let r,d,f;if(this.ended)return!1;for(t===~~t?d=t:d=t===!0?uE:cE,Yy.call(s)==="[object ArrayBuffer]"?a.input=new Uint8Array(s):a.input=s,a.next_in=0,a.avail_in=a.input.length;;){for(a.avail_out===0&&(a.output=new Uint8Array(o),a.next_out=0,a.avail_out=o),r=Ma.inflate(a,d),r===rf&&l&&(r=Ma.inflateSetDictionary(a,l),r===no?r=Ma.inflate(a,d):r===gx&&(r=rf));a.avail_in>0&&r===sf&&a.state.wrap>0&&s[a.next_in]!==0;)Ma.inflateReset(a),r=Ma.inflate(a,d);switch(r){case dE:case gx:case rf:case fE:return this.onEnd(r),this.ended=!0,!1}if(f=a.avail_out,a.next_out&&(a.avail_out===0||r===sf))if(this.options.to==="string"){let g=Mf.utf8border(a.output,a.next_out),h=a.next_out-g,m=Mf.buf2string(a.output,g);a.next_out=h,a.avail_out=o-h,h&&a.output.set(a.output.subarray(g,g+h),0),this.onData(m)}else this.onData(a.output.length===a.next_out?a.output:a.output.subarray(0,a.next_out));if(!(r===no&&f===0)){if(r===sf)return r=Ma.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,!0;if(a.avail_in===0)break}}return!0};bc.prototype.onData=function(s){this.chunks.push(s)};bc.prototype.onEnd=function(s){s===no&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=By.flattenChunks(this.chunks)),this.chunks=[],this.err=s,this.msg=this.strm.msg};function mE(s,t){const a=new bc(t);if(a.push(s),a.err)throw a.msg||Cf[a.err];return a.result}var hE=mE,gE={inflate:hE};const{inflate:pE}=gE;var xE=pE,of={exports:{}},px;function yE(){return px||(px=1,(function(s){var t=Object.prototype.hasOwnProperty,a="~";function o(){}Object.create&&(o.prototype=Object.create(null),new o().__proto__||(a=!1));function l(g,h,m){this.fn=g,this.context=h,this.once=m||!1}function r(g,h,m,w,x){if(typeof m!="function")throw new TypeError("The listener must be a function");var p=new l(m,w||g,x),v=a?a+h:h;return g._events[v]?g._events[v].fn?g._events[v]=[g._events[v],p]:g._events[v].push(p):(g._events[v]=p,g._eventsCount++),g}function d(g,h){--g._eventsCount===0?g._events=new o:delete g._events[h]}function f(){this._events=new o,this._eventsCount=0}f.prototype.eventNames=function(){var h=[],m,w;if(this._eventsCount===0)return h;for(w in m=this._events)t.call(m,w)&&h.push(a?w.slice(1):w);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(m)):h},f.prototype.listeners=function(h){var m=a?a+h:h,w=this._events[m];if(!w)return[];if(w.fn)return[w.fn];for(var x=0,p=w.length,v=new Array(p);x<p;x++)v[x]=w[x].fn;return v},f.prototype.listenerCount=function(h){var m=a?a+h:h,w=this._events[m];return w?w.fn?1:w.length:0},f.prototype.emit=function(h,m,w,x,p,v){var b=a?a+h:h;if(!this._events[b])return!1;var N=this._events[b],_=arguments.length,A,C;if(N.fn){switch(N.once&&this.removeListener(h,N.fn,void 0,!0),_){case 1:return N.fn.call(N.context),!0;case 2:return N.fn.call(N.context,m),!0;case 3:return N.fn.call(N.context,m,w),!0;case 4:return N.fn.call(N.context,m,w,x),!0;case 5:return N.fn.call(N.context,m,w,x,p),!0;case 6:return N.fn.call(N.context,m,w,x,p,v),!0}for(C=1,A=new Array(_-1);C<_;C++)A[C-1]=arguments[C];N.fn.apply(N.context,A)}else{var k=N.length,R;for(C=0;C<k;C++)switch(N[C].once&&this.removeListener(h,N[C].fn,void 0,!0),_){case 1:N[C].fn.call(N[C].context);break;case 2:N[C].fn.call(N[C].context,m);break;case 3:N[C].fn.call(N[C].context,m,w);break;case 4:N[C].fn.call(N[C].context,m,w,x);break;default:if(!A)for(R=1,A=new Array(_-1);R<_;R++)A[R-1]=arguments[R];N[C].fn.apply(N[C].context,A)}}return!0},f.prototype.on=function(h,m,w){return r(this,h,m,w,!1)},f.prototype.once=function(h,m,w){return r(this,h,m,w,!0)},f.prototype.removeListener=function(h,m,w,x){var p=a?a+h:h;if(!this._events[p])return this;if(!m)return d(this,p),this;var v=this._events[p];if(v.fn)v.fn===m&&(!x||v.once)&&(!w||v.context===w)&&d(this,p);else{for(var b=0,N=[],_=v.length;b<_;b++)(v[b].fn!==m||x&&!v[b].once||w&&v[b].context!==w)&&N.push(v[b]);N.length?this._events[p]=N.length===1?N[0]:N:d(this,p)}return this},f.prototype.removeAllListeners=function(h){var m;return h?(m=a?a+h:h,this._events[m]&&d(this,m)):(this._events=new o,this._eventsCount=0),this},f.prototype.off=f.prototype.removeListener,f.prototype.addListener=f.prototype.on,f.prefixed=a,f.EventEmitter=f,s.exports=f})(of)),of.exports}var vE=yE();const bE=mc(vE);function wE(s,t){return Array.apply(0,new Array(Math.ceil(s.length/t))).map((a,o)=>s.slice(o*t,(o+1)*t))}const js=s=>"version"in s;function SE(s){return new TextDecoder("utf-8").decode(s)}function xx(s){return Yf.encode(s)}function Xy(s){return hn.Buffer.from(s,"base64")}function os(s){return"accounts"in s}async function NE(s){const t=(await Ze.findProgramAddress([],s))[0];return await Ze.createWithSeed(t,_E(),s)}function _E(){return"anchor:idl"}const RE=qe.struct([qe.publicKey("authority"),qe.vecU8("data")]);function EE(s){return RE.decode(s)}function TE(s){const t=["name","path","account","relations","generic"],a=r=>r.split(".").map(tR).join("."),o=r=>{for(const d in r){const f=r[d];t.includes(d)?r[d]=Array.isArray(f)?f.map(a):a(f):typeof f=="object"&&o(f)}},l=structuredClone(s);return o(l),l}function Li(s,t,a,o){return s?.length?s[0].name?a(s):o(s):t()}function AE(s){const t=new Map;return s.errors&&s.errors.forEach(a=>{var o;let l=(o=a.msg)!==null&&o!==void 0?o:a.name;t.set(a.code,l)}),t}function CE(s,...t){if(s.args.length!=t.length)throw new Error("Invalid argument length");const a={};let o=0;return s.args.forEach(l=>{a[l.name]=t[o],o+=1}),a}function Zy(s,t={}){s.forEach(a=>{if(os(a))Zy(a.accounts,t[a.name]);else if(!t[a.name])throw new Error(`Account \`${a.name}\` not provided.`)})}function Zn(s){return s instanceof Ze?s:new Ze(s)}class ME extends TypeError{constructor(t,a){let o;const{message:l,...r}=t,{path:d}=t,f=d.length===0?l:"At path: "+d.join(".")+" -- "+l;super(f),this.value=void 0,this.key=void 0,this.type=void 0,this.refinement=void 0,this.path=void 0,this.branch=void 0,this.failures=void 0,Object.assign(this,r),this.name=this.constructor.name,this.failures=()=>{var g;return(g=o)!=null?g:o=[t,...a()]}}}function OE(s){return zi(s)&&typeof s[Symbol.iterator]=="function"}function zi(s){return typeof s=="object"&&s!=null}function us(s){return typeof s=="string"?JSON.stringify(s):""+s}function jE(s){const{done:t,value:a}=s.next();return t?void 0:a}function kE(s,t,a,o){if(s===!0)return;s===!1?s={}:typeof s=="string"&&(s={message:s});const{path:l,branch:r}=t,{type:d}=a,{refinement:f,message:g="Expected a value of type `"+d+"`"+(f?" with refinement `"+f+"`":"")+", but received: `"+us(o)+"`"}=s;return{value:o,type:d,refinement:f,key:l[l.length-1],path:l,branch:r,...s,message:g}}function*yx(s,t,a,o){OE(s)||(s=[s]);for(const l of s){const r=kE(l,t,a,o);r&&(yield r)}}function*Xf(s,t,a){a===void 0&&(a={});const{path:o=[],branch:l=[s],coerce:r=!1,mask:d=!1}=a,f={path:o,branch:l};if(r&&(s=t.coercer(s,f),d&&t.type!=="type"&&zi(t.schema)&&zi(s)&&!Array.isArray(s)))for(const h in s)t.schema[h]===void 0&&delete s[h];let g=!0;for(const h of t.validator(s,f))g=!1,yield[h,void 0];for(let[h,m,w]of t.entries(s,f)){const x=Xf(m,w,{path:h===void 0?o:[...o,h],branch:h===void 0?l:[...l,m],coerce:r,mask:d});for(const p of x)p[0]?(g=!1,yield[p[0],void 0]):r&&(m=p[1],h===void 0?s=m:s instanceof Map?s.set(h,m):s instanceof Set?s.add(m):zi(s)&&(s[h]=m))}if(g)for(const h of t.refiner(s,f))g=!1,yield[h,void 0];g&&(yield[void 0,s])}class ms{constructor(t){this.TYPE=void 0,this.type=void 0,this.schema=void 0,this.coercer=void 0,this.validator=void 0,this.refiner=void 0,this.entries=void 0;const{type:a,schema:o,validator:l,refiner:r,coercer:d=g=>g,entries:f=function*(){}}=t;this.type=a,this.schema=o,this.entries=f,this.coercer=d,l?this.validator=(g,h)=>{const m=l(g,h);return yx(m,h,this,g)}:this.validator=()=>[],r?this.refiner=(g,h)=>{const m=r(g,h);return yx(m,h,this,g)}:this.refiner=()=>[]}assert(t){return DE(t,this)}create(t){return Zf(t,this)}is(t){return Qy(t,this)}mask(t){return BE(t,this)}validate(t,a){return a===void 0&&(a={}),go(t,this,a)}}function DE(s,t){const a=go(s,t);if(a[0])throw a[0]}function Zf(s,t){const a=go(s,t,{coerce:!0});if(a[0])throw a[0];return a[1]}function BE(s,t){const a=go(s,t,{coerce:!0,mask:!0});if(a[0])throw a[0];return a[1]}function Qy(s,t){return!go(s,t)[0]}function go(s,t,a){a===void 0&&(a={});const o=Xf(s,t,a),l=jE(o);return l[0]?[new ME(l[0],function*(){for(const d of o)d[0]&&(yield d[0])}),void 0]:[void 0,l[1]]}function po(s,t){return new ms({type:s,schema:null,validator:t})}function IE(){return po("any",()=>!0)}function lf(s){return new ms({type:"array",schema:s,*entries(t){if(s&&Array.isArray(t))for(const[a,o]of t.entries())yield[a,o,s]},coercer(t){return Array.isArray(t)?t.slice():t},validator(t){return Array.isArray(t)||"Expected an array value, but received: "+us(t)}})}function LE(){return po("boolean",s=>typeof s=="boolean")}function vx(s){const t=us(s);return new ms({type:"literal",schema:s,validator(a){return a===s||"Expected the literal `"+t+"`, but received: "+us(a)}})}function Hl(s){return new ms({...s,validator:(t,a)=>t===null||s.validator(t,a),refiner:(t,a)=>t===null||s.refiner(t,a)})}function Jl(){return po("number",s=>typeof s=="number"&&!isNaN(s)||"Expected a number, but received: "+us(s))}function ec(s){return new ms({...s,validator:(t,a)=>t===void 0||s.validator(t,a),refiner:(t,a)=>t===void 0||s.refiner(t,a)})}function Bs(){return po("string",s=>typeof s=="string"||"Expected a string, but received: "+us(s))}function cs(s){const t=Object.keys(s);return new ms({type:"type",schema:s,*entries(a){if(zi(a))for(const o of t)yield[o,a[o],s[o]]},validator(a){return zi(a)||"Expected an object, but received: "+us(a)}})}function Ky(s){const t=s.map(a=>a.type).join(" | ");return new ms({type:"union",schema:null,coercer(a,o){return(s.find(r=>{const[d]=r.validate(a,{coerce:!0});return!d})||Qf()).coercer(a,o)},validator(a,o){const l=[];for(const r of s){const[...d]=Xf(a,r,o),[f]=d;if(f[0])for(const[g]of d)g&&l.push(g);else return[]}return["Expected the value to satisfy a union of `"+t+"`, but received: "+us(a),...l]}})}function Qf(){return po("unknown",()=>!0)}function zE(s,t,a){return new ms({...s,coercer:(o,l)=>Qy(o,t)?s.coercer(a(o,l),l):s.coercer(o,l)})}const bx=99;async function UE(s,t,a){if(t.length<=bx)return await wx(s,t,a);{const o=wE(t,bx);return(await Promise.all(o.map(r=>wx(s,r,a)))).flat()}}async function wx(s,t,a){const o=a??s.commitment,{value:l,context:r}=await s.getMultipleAccountsInfoAndContext(t,o);return l.map((f,g)=>f===null?null:{publicKey:t[g],account:f,context:r})}async function HE(s,t,a,o,l){var r;a&&a.length>0&&t.sign(...a);const d=t._compile(),f=d.serialize(),h=t._serialize(f).toString("base64"),m={encoding:"base64",commitment:o??s.commitment};if(l){const v=(Array.isArray(l)?l:d.nonProgramIds()).map(b=>b.toBase58());m.accounts={encoding:"base64",addresses:v}}a&&a.length>0&&(m.sigVerify=!0);const w=[h,m],x=await s._rpcRequest("simulateTransaction",w),p=Zf(x,VE);if("error"in p){let v;if("data"in p.error&&(v=(r=p.error.data)===null||r===void 0?void 0:r.logs,v&&Array.isArray(v))){const b=`
    `,N=b+v.join(b);console.error(p.error.message,N)}throw new Sf("failed to simulate transaction: "+p.error.message,v)}return p.result}function PE(s){return zE(Jy(s),GE,t=>"error"in t?t:{...t,result:Zf(t.result,s)})}const GE=Jy(Qf());function Jy(s){return Ky([cs({jsonrpc:vx("2.0"),id:Bs(),result:s}),cs({jsonrpc:vx("2.0"),id:Bs(),error:cs({code:Qf(),message:Bs(),data:ec(IE())})})])}function $E(s){return PE(cs({context:cs({slot:Jl()}),value:s}))}const VE=$E(cs({err:Hl(Ky([cs({}),Bs()])),logs:Hl(lf(Bs())),accounts:ec(Hl(lf(Hl(cs({executable:LE(),owner:Bs(),lamports:Jl(),data:lf(Bs()),rentEpoch:ec(Jl())}))))),unitsConsumed:ec(Jl())}));class ao{constructor(t,a,o=ao.defaultOptions()){this.connection=t,this.wallet=a,this.opts=o,this.publicKey=a?.publicKey}static defaultOptions(){return{preflightCommitment:"processed",commitment:"processed"}}static local(t,a=ao.defaultOptions()){throw new Error("Provider local is not available on browser.")}static env(){throw new Error("Provider env is not available on browser.")}async sendAndConfirm(t,a,o){var l,r,d,f;if(o===void 0&&(o=this.opts),js(t))a&&t.sign(a);else if(t.feePayer=(l=t.feePayer)!==null&&l!==void 0?l:this.wallet.publicKey,t.recentBlockhash=(await this.connection.getLatestBlockhash(o.preflightCommitment)).blockhash,a)for(const h of a)t.partialSign(h);t=await this.wallet.signTransaction(t);const g=t.serialize();try{return await Sx(this.connection,g,o)}catch(h){if(h instanceof Of){const m=xx(js(t)?((r=t.signatures)===null||r===void 0?void 0:r[0])||new Uint8Array:(d=t.signature)!==null&&d!==void 0?d:new Uint8Array),w=js(t)?0:void 0,x=await this.connection.getTransaction(m,{commitment:"confirmed",maxSupportedTransactionVersion:w});if(x){const p=(f=x.meta)===null||f===void 0?void 0:f.logMessages;throw p?new Sf(h.message,p):h}else throw h}else throw h}}async sendAll(t,a){var o,l,r;a===void 0&&(a=this.opts);const d=(await this.connection.getLatestBlockhash(a.preflightCommitment)).blockhash;let f=t.map(m=>{var w,x;if(js(m.tx)){let p=m.tx;return m.signers&&p.sign(m.signers),p}else{let p=m.tx,v=(w=m.signers)!==null&&w!==void 0?w:[];return p.feePayer=(x=p.feePayer)!==null&&x!==void 0?x:this.wallet.publicKey,p.recentBlockhash=d,v.forEach(b=>{p.partialSign(b)}),p}});const g=await this.wallet.signAllTransactions(f),h=[];for(let m=0;m<f.length;m+=1){const w=g[m],x=w.serialize();try{h.push(await Sx(this.connection,x,a))}catch(p){if(p instanceof Of){const v=xx(js(w)?((o=w.signatures)===null||o===void 0?void 0:o[0])||new Uint8Array:(l=w.signature)!==null&&l!==void 0?l:new Uint8Array),b=js(w)?0:void 0,N=await this.connection.getTransaction(v,{commitment:"confirmed",maxSupportedTransactionVersion:b});if(N){const _=(r=N.meta)===null||r===void 0?void 0:r.logMessages;throw _?new Sf(p.message,_):p}else throw p}else throw p}}return h}async simulate(t,a,o,l){let r=(await this.connection.getLatestBlockhash(o??this.connection.commitment)).blockhash,d;if(js(t)?(a&&a.length>0&&(t.sign(a),t=await this.wallet.signTransaction(t)),d=await this.connection.simulateTransaction(t,{commitment:o})):(t.feePayer=t.feePayer||this.wallet.publicKey,t.recentBlockhash=r,a&&a.length>0&&(t=await this.wallet.signTransaction(t)),d=await HE(this.connection,t,a,o,l)),d.value.err)throw new FE(d.value);return d.value}}class FE extends Error{constructor(t,a){super(a),this.simulationResponse=t}}async function Sx(s,t,a){const o=a?{skipPreflight:a.skipPreflight,preflightCommitment:a.preflightCommitment||a.commitment,maxRetries:a.maxRetries,minContextSlot:a.minContextSlot}:{};let l;const r=Date.now();for(;Date.now()-r<6e4;)try{const d=await s.sendRawTransaction(t,o);if(a?.blockhash)if(o.maxRetries===0){const f=AbortSignal.timeout(15e3);l=(await s.confirmTransaction({abortSignal:f,signature:d,...a.blockhash},a&&a.commitment)).value}else l=(await s.confirmTransaction({signature:d,...a.blockhash},a&&a.commitment)).value;else l=(await s.confirmTransaction(d,a&&a.commitment)).value;if(l.err)throw new Of(`Raw transaction ${d} failed (${JSON.stringify(l)})`);return d}catch(d){if(d.name==="TimeoutError")continue;throw d}throw Error("Transaction failed to confirm in 60s")}class Of extends Error{constructor(t){super(t)}}function jf(){return ao.local()}var WE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},se={};Object.defineProperty(se,"__esModule",{value:!0});var ev=se.ANCHOR_ERROR__REQUIRE_EQ_VIOLATED=Zv=se.ANCHOR_ERROR__REQUIRE_VIOLATED=Xv=se.ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION_PROGRAM_ID=Yv=se.ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION_AUTHORITY=qv=se.ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION=Wv=se.ANCHOR_ERROR__CONSTRAINT_MINT_PERMANENT_DELEGATE_EXTENSION_DELEGATE=Fv=se.ANCHOR_ERROR__CONSTRAINT_MINT_PERMANENT_DELEGATE_EXTENSION=Vv=se.ANCHOR_ERROR__CONSTRAINT_MINT_CLOSE_AUTHORITY_EXTENSION_AUTHORITY=$v=se.ANCHOR_ERROR__CONSTRAINT_MINT_CLOSE_AUTHORITY_EXTENSION=Gv=se.ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION_METADATA_ADDRESS=Pv=se.ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION_AUTHORITY=Hv=se.ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION=Uv=se.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION_MEMBER_ADDRESS=zv=se.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION_AUTHORITY=Lv=se.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION=Iv=se.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION_GROUP_ADDRESS=Bv=se.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION_AUTHORITY=Dv=se.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION=kv=se.ANCHOR_ERROR__CONSTRAINT_ASSOCIATED_TOKEN_TOKEN_PROGRAM=jv=se.ANCHOR_ERROR__CONSTRAINT_MINT_TOKEN_PROGRAM=Ov=se.ANCHOR_ERROR__CONSTRAINT_TOKEN_TOKEN_PROGRAM=Mv=se.ANCHOR_ERROR__CONSTRAINT_ACCOUNT_IS_NONE=Cv=se.ANCHOR_ERROR__CONSTRAINT_SPACE=Av=se.ANCHOR_ERROR__CONSTRAINT_MINT_DECIMALS=Tv=se.ANCHOR_ERROR__CONSTRAINT_MINT_FREEZE_AUTHORITY=Ev=se.ANCHOR_ERROR__CONSTRAINT_MINT_MINT_AUTHORITY=Rv=se.ANCHOR_ERROR__CONSTRAINT_TOKEN_OWNER=_v=se.ANCHOR_ERROR__CONSTRAINT_TOKEN_MINT=Nv=se.ANCHOR_ERROR__CONSTRAINT_ZERO=Sv=se.ANCHOR_ERROR__CONSTRAINT_ADDRESS=wv=se.ANCHOR_ERROR__CONSTRAINT_CLOSE=bv=se.ANCHOR_ERROR__CONSTRAINT_ASSOCIATED_INIT=vv=se.ANCHOR_ERROR__CONSTRAINT_ASSOCIATED=yv=se.ANCHOR_ERROR__CONSTRAINT_STATE=xv=se.ANCHOR_ERROR__CONSTRAINT_EXECUTABLE=pv=se.ANCHOR_ERROR__CONSTRAINT_SEEDS=gv=se.ANCHOR_ERROR__CONSTRAINT_RENT_EXEMPT=hv=se.ANCHOR_ERROR__CONSTRAINT_OWNER=mv=se.ANCHOR_ERROR__CONSTRAINT_RAW=fv=se.ANCHOR_ERROR__CONSTRAINT_SIGNER=dv=se.ANCHOR_ERROR__CONSTRAINT_HAS_ONE=uv=se.ANCHOR_ERROR__CONSTRAINT_MUT=cv=se.ANCHOR_ERROR__EVENT_INSTRUCTION_STUB=lv=se.ANCHOR_ERROR__IDL_ACCOUNT_NOT_EMPTY=ov=se.ANCHOR_ERROR__IDL_INSTRUCTION_INVALID_PROGRAM=rv=se.ANCHOR_ERROR__IDL_INSTRUCTION_STUB=iv=se.ANCHOR_ERROR__INSTRUCTION_DID_NOT_SERIALIZE=sv=se.ANCHOR_ERROR__INSTRUCTION_DID_NOT_DESERIALIZE=av=se.ANCHOR_ERROR__INSTRUCTION_FALLBACK_NOT_FOUND=nv=se.ANCHOR_ERROR__INSTRUCTION_MISSING=void 0,tv=se.ANCHOR_ERROR__DEPRECATED=S1=se.ANCHOR_ERROR__INVALID_NUMERIC_CONVERSION=w1=se.ANCHOR_ERROR__TRYING_TO_INIT_PAYER_AS_PROGRAM_ACCOUNT=b1=se.ANCHOR_ERROR__DECLARED_PROGRAM_ID_MISMATCH=v1=se.ANCHOR_ERROR__ACCOUNT_DUPLICATE_REALLOCS=y1=se.ANCHOR_ERROR__ACCOUNT_REALLOC_EXCEEDS_LIMIT=x1=se.ANCHOR_ERROR__ACCOUNT_SYSVAR_MISMATCH=p1=se.ANCHOR_ERROR__ACCOUNT_NOT_ASSOCIATED_TOKEN_ACCOUNT=g1=se.ANCHOR_ERROR__ACCOUNT_NOT_PROGRAM_DATA=h1=se.ANCHOR_ERROR__ACCOUNT_NOT_INITIALIZED=m1=se.ANCHOR_ERROR__ACCOUNT_NOT_SYSTEM_OWNED=f1=se.ANCHOR_ERROR__ACCOUNT_NOT_SIGNER=d1=se.ANCHOR_ERROR__INVALID_PROGRAM_EXECUTABLE=u1=se.ANCHOR_ERROR__INVALID_PROGRAM_ID=c1=se.ANCHOR_ERROR__ACCOUNT_OWNED_BY_WRONG_PROGRAM=l1=se.ANCHOR_ERROR__ACCOUNT_NOT_MUTABLE=o1=se.ANCHOR_ERROR__ACCOUNT_NOT_ENOUGH_KEYS=r1=se.ANCHOR_ERROR__ACCOUNT_DID_NOT_SERIALIZE=i1=se.ANCHOR_ERROR__ACCOUNT_DID_NOT_DESERIALIZE=s1=se.ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_MISMATCH=a1=se.ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_NOT_FOUND=n1=se.ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_ALREADY_SET=t1=se.ANCHOR_ERROR__REQUIRE_GTE_VIOLATED=e1=se.ANCHOR_ERROR__REQUIRE_GT_VIOLATED=Jv=se.ANCHOR_ERROR__REQUIRE_KEYS_NEQ_VIOLATED=Kv=se.ANCHOR_ERROR__REQUIRE_NEQ_VIOLATED=Qv=se.ANCHOR_ERROR__REQUIRE_KEYS_EQ_VIOLATED=void 0,nv=se.ANCHOR_ERROR__INSTRUCTION_MISSING=100,av=se.ANCHOR_ERROR__INSTRUCTION_FALLBACK_NOT_FOUND=101,sv=se.ANCHOR_ERROR__INSTRUCTION_DID_NOT_DESERIALIZE=102,iv=se.ANCHOR_ERROR__INSTRUCTION_DID_NOT_SERIALIZE=103,rv=se.ANCHOR_ERROR__IDL_INSTRUCTION_STUB=1e3,ov=se.ANCHOR_ERROR__IDL_INSTRUCTION_INVALID_PROGRAM=1001,lv=se.ANCHOR_ERROR__IDL_ACCOUNT_NOT_EMPTY=1002,cv=se.ANCHOR_ERROR__EVENT_INSTRUCTION_STUB=1500,uv=se.ANCHOR_ERROR__CONSTRAINT_MUT=2e3,dv=se.ANCHOR_ERROR__CONSTRAINT_HAS_ONE=2001,fv=se.ANCHOR_ERROR__CONSTRAINT_SIGNER=2002,mv=se.ANCHOR_ERROR__CONSTRAINT_RAW=2003,hv=se.ANCHOR_ERROR__CONSTRAINT_OWNER=2004,gv=se.ANCHOR_ERROR__CONSTRAINT_RENT_EXEMPT=2005,pv=se.ANCHOR_ERROR__CONSTRAINT_SEEDS=2006,xv=se.ANCHOR_ERROR__CONSTRAINT_EXECUTABLE=2007,yv=se.ANCHOR_ERROR__CONSTRAINT_STATE=2008,vv=se.ANCHOR_ERROR__CONSTRAINT_ASSOCIATED=2009,bv=se.ANCHOR_ERROR__CONSTRAINT_ASSOCIATED_INIT=2010,wv=se.ANCHOR_ERROR__CONSTRAINT_CLOSE=2011,Sv=se.ANCHOR_ERROR__CONSTRAINT_ADDRESS=2012,Nv=se.ANCHOR_ERROR__CONSTRAINT_ZERO=2013,_v=se.ANCHOR_ERROR__CONSTRAINT_TOKEN_MINT=2014,Rv=se.ANCHOR_ERROR__CONSTRAINT_TOKEN_OWNER=2015,Ev=se.ANCHOR_ERROR__CONSTRAINT_MINT_MINT_AUTHORITY=2016,Tv=se.ANCHOR_ERROR__CONSTRAINT_MINT_FREEZE_AUTHORITY=2017,Av=se.ANCHOR_ERROR__CONSTRAINT_MINT_DECIMALS=2018,Cv=se.ANCHOR_ERROR__CONSTRAINT_SPACE=2019,Mv=se.ANCHOR_ERROR__CONSTRAINT_ACCOUNT_IS_NONE=2020,Ov=se.ANCHOR_ERROR__CONSTRAINT_TOKEN_TOKEN_PROGRAM=2021,jv=se.ANCHOR_ERROR__CONSTRAINT_MINT_TOKEN_PROGRAM=2022,kv=se.ANCHOR_ERROR__CONSTRAINT_ASSOCIATED_TOKEN_TOKEN_PROGRAM=2023,Dv=se.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION=2024,Bv=se.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION_AUTHORITY=2025,Iv=se.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION_GROUP_ADDRESS=2026,Lv=se.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION=2027,zv=se.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION_AUTHORITY=2028,Uv=se.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION_MEMBER_ADDRESS=2029,Hv=se.ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION=2030,Pv=se.ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION_AUTHORITY=2031,Gv=se.ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION_METADATA_ADDRESS=2032,$v=se.ANCHOR_ERROR__CONSTRAINT_MINT_CLOSE_AUTHORITY_EXTENSION=2033,Vv=se.ANCHOR_ERROR__CONSTRAINT_MINT_CLOSE_AUTHORITY_EXTENSION_AUTHORITY=2034,Fv=se.ANCHOR_ERROR__CONSTRAINT_MINT_PERMANENT_DELEGATE_EXTENSION=2035,Wv=se.ANCHOR_ERROR__CONSTRAINT_MINT_PERMANENT_DELEGATE_EXTENSION_DELEGATE=2036,qv=se.ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION=2037,Yv=se.ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION_AUTHORITY=2038,Xv=se.ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION_PROGRAM_ID=2039,Zv=se.ANCHOR_ERROR__REQUIRE_VIOLATED=2500;ev=se.ANCHOR_ERROR__REQUIRE_EQ_VIOLATED=2501;var Qv=se.ANCHOR_ERROR__REQUIRE_KEYS_EQ_VIOLATED=2502,Kv=se.ANCHOR_ERROR__REQUIRE_NEQ_VIOLATED=2503,Jv=se.ANCHOR_ERROR__REQUIRE_KEYS_NEQ_VIOLATED=2504,e1=se.ANCHOR_ERROR__REQUIRE_GT_VIOLATED=2505,t1=se.ANCHOR_ERROR__REQUIRE_GTE_VIOLATED=2506,n1=se.ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_ALREADY_SET=3e3,a1=se.ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_NOT_FOUND=3001,s1=se.ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_MISMATCH=3002,i1=se.ANCHOR_ERROR__ACCOUNT_DID_NOT_DESERIALIZE=3003,r1=se.ANCHOR_ERROR__ACCOUNT_DID_NOT_SERIALIZE=3004,o1=se.ANCHOR_ERROR__ACCOUNT_NOT_ENOUGH_KEYS=3005,l1=se.ANCHOR_ERROR__ACCOUNT_NOT_MUTABLE=3006,c1=se.ANCHOR_ERROR__ACCOUNT_OWNED_BY_WRONG_PROGRAM=3007,u1=se.ANCHOR_ERROR__INVALID_PROGRAM_ID=3008,d1=se.ANCHOR_ERROR__INVALID_PROGRAM_EXECUTABLE=3009,f1=se.ANCHOR_ERROR__ACCOUNT_NOT_SIGNER=3010,m1=se.ANCHOR_ERROR__ACCOUNT_NOT_SYSTEM_OWNED=3011,h1=se.ANCHOR_ERROR__ACCOUNT_NOT_INITIALIZED=3012,g1=se.ANCHOR_ERROR__ACCOUNT_NOT_PROGRAM_DATA=3013,p1=se.ANCHOR_ERROR__ACCOUNT_NOT_ASSOCIATED_TOKEN_ACCOUNT=3014,x1=se.ANCHOR_ERROR__ACCOUNT_SYSVAR_MISMATCH=3015,y1=se.ANCHOR_ERROR__ACCOUNT_REALLOC_EXCEEDS_LIMIT=3016,v1=se.ANCHOR_ERROR__ACCOUNT_DUPLICATE_REALLOCS=3017,b1=se.ANCHOR_ERROR__DECLARED_PROGRAM_ID_MISMATCH=4100,w1=se.ANCHOR_ERROR__TRYING_TO_INIT_PAYER_AS_PROGRAM_ACCOUNT=4101,S1=se.ANCHOR_ERROR__INVALID_NUMERIC_CONVERSION=4102;tv=se.ANCHOR_ERROR__DEPRECATED=5e3;const qE=new Map;function N1(s){return qE.get(s)!==void 0}class rs extends Error{constructor(t){super(t),this.name="IdlError"}}class xo{constructor(t){this.stack=t}static parse(t){var a;const o=/^Program (\w*) invoke/,l=/^Program \w* success/,r=[];for(let d=0;d<t.length;d++){if(l.exec(t[d])){r.pop();continue}const f=(a=o.exec(t[d]))===null||a===void 0?void 0:a[1];f&&r.push(new Ze(f))}return new xo(r)}}class eo extends Error{constructor(t,a,o,l,r,d){super(o.join(`
`).replace("Program log: ","")),this.errorLogs=o,this.logs=l,this.error={errorCode:t,errorMessage:a,comparedValues:d,origin:r},this._programErrorStack=xo.parse(l)}static parse(t){if(!t)return null;const a=t.findIndex(x=>x.startsWith("Program log: AnchorError"));if(a===-1)return null;const o=t[a],l=[o];let r;if(a+1<t.length){if(t[a+1]==="Program log: Left:"){const x=/^Program log: (.*)$/,p=x.exec(t[a+2])[1],v=x.exec(t[a+4])[1];r=[new Ze(p),new Ze(v)],l.push(...t.slice(a+1,a+5))}else if(t[a+1].startsWith("Program log: Left:")){const x=/^Program log: (Left|Right): (.*)$/,p=x.exec(t[a+1])[2],v=x.exec(t[a+2])[2];l.push(...t.slice(a+1,a+3)),r=[p,v]}}const f=/^Program log: AnchorError occurred\. Error Code: (.*)\. Error Number: (\d*)\. Error Message: (.*)\./.exec(o),h=/^Program log: AnchorError thrown in (.*):(\d*)\. Error Code: (.*)\. Error Number: (\d*)\. Error Message: (.*)\./.exec(o),w=/^Program log: AnchorError caused by account: (.*)\. Error Code: (.*)\. Error Number: (\d*)\. Error Message: (.*)\./.exec(o);if(f){const[x,p,v]=f.slice(1,4),b={code:x,number:parseInt(p)};return new eo(b,v,l,t,void 0,r)}else if(h){const[x,p,v,b,N]=h.slice(1,6),_={code:v,number:parseInt(b)},A={file:x,line:parseInt(p)};return new eo(_,N,l,t,A,r)}else if(w){const[x,p,v,b]=w.slice(1,5),N=x,_={code:p,number:parseInt(v)};return new eo(_,b,l,t,N,r)}else return null}get program(){return this._programErrorStack.stack[this._programErrorStack.stack.length-1]}get programErrorStack(){return this._programErrorStack.stack}toString(){return this.message}}class oc extends Error{constructor(t,a,o){super(),this.code=t,this.msg=a,this.logs=o,o&&(this._programErrorStack=xo.parse(o))}static parse(t,a){const o=t.toString();let l;if(o.includes("custom program error:")){let f=o.split("custom program error: ");if(f.length!==2)return null;l=f[1]}else{const f=o.match(/"Custom":([0-9]+)}/g);if(!f||f.length>1)return null;l=f[0].match(/([0-9]+)/g)[0]}let r;try{r=parseInt(l)}catch{return null}let d=a.get(r);return d!==void 0?new oc(r,d,t.logs):(d=YE.get(r),d!==void 0?new oc(r,d,t.logs):null)}get program(){var t;return(t=this._programErrorStack)===null||t===void 0?void 0:t.stack[this._programErrorStack.stack.length-1]}get programErrorStack(){var t;return(t=this._programErrorStack)===null||t===void 0?void 0:t.stack}toString(){return this.msg}}function _1(s,t){N1("debug-logs")&&console.log("Translating error:",s);const a=eo.parse(s.logs);if(a)return a;const o=oc.parse(s,t);if(o)return o;if(s.logs){const l={get:function(r,d){return d==="programErrorStack"?r.programErrorStack.stack:d==="program"?r.programErrorStack.stack[s.programErrorStack.stack.length-1]:Reflect.get(...arguments)}};return s.programErrorStack=xo.parse(s.logs),new Proxy(s,l)}return s}const we={InstructionMissing:nv,InstructionFallbackNotFound:av,InstructionDidNotDeserialize:sv,InstructionDidNotSerialize:iv,IdlInstructionStub:rv,IdlInstructionInvalidProgram:ov,IdlAccountNotEmpty:lv,EventInstructionStub:cv,ConstraintMut:uv,ConstraintHasOne:dv,ConstraintSigner:fv,ConstraintRaw:mv,ConstraintOwner:hv,ConstraintRentExempt:gv,ConstraintSeeds:pv,ConstraintExecutable:xv,ConstraintState:yv,ConstraintAssociated:vv,ConstraintAssociatedInit:bv,ConstraintClose:wv,ConstraintAddress:Sv,ConstraintZero:Nv,ConstraintTokenMint:_v,ConstraintTokenOwner:Rv,ConstraintMintMintAuthority:Ev,ConstraintMintFreezeAuthority:Tv,ConstraintMintDecimals:Av,ConstraintSpace:Cv,ConstraintAccountIsNone:Mv,ConstraintTokenTokenProgram:Ov,ConstraintMintTokenProgram:jv,ConstraintAssociatedTokenTokenProgram:kv,ConstraintMintGroupPointerExtension:Dv,ConstraintMintGroupPointerExtensionAuthority:Bv,ConstraintMintGroupPointerExtensionGroupAddress:Iv,ConstraintMintGroupMemberPointerExtension:Lv,ConstraintMintGroupMemberPointerExtensionAuthority:zv,ConstraintMintGroupMemberPointerExtensionMemberAddress:Uv,ConstraintMintMetadataPointerExtension:Hv,ConstraintMintMetadataPointerExtensionAuthority:Pv,ConstraintMintMetadataPointerExtensionMetadataAddress:Gv,ConstraintMintCloseAuthorityExtension:$v,ConstraintMintCloseAuthorityExtensionAuthority:Vv,ConstraintMintPermanentDelegateExtension:Fv,ConstraintMintPermanentDelegateExtensionDelegate:Wv,ConstraintMintTransferHookExtension:qv,ConstraintMintTransferHookExtensionAuthority:Yv,ConstraintMintTransferHookExtensionProgramId:Xv,RequireViolated:Zv,RequireEqViolated:ev,RequireKeysEqViolated:Qv,RequireNeqViolated:Kv,RequireKeysNeqViolated:Jv,RequireGtViolated:e1,RequireGteViolated:t1,AccountDiscriminatorAlreadySet:n1,AccountDiscriminatorNotFound:a1,AccountDiscriminatorMismatch:s1,AccountDidNotDeserialize:i1,AccountDidNotSerialize:r1,AccountNotEnoughKeys:o1,AccountNotMutable:l1,AccountOwnedByWrongProgram:c1,InvalidProgramId:u1,InvalidProgramExecutable:d1,AccountNotSigner:f1,AccountNotSystemOwned:m1,AccountNotInitialized:h1,AccountNotProgramData:g1,AccountNotAssociatedTokenAccount:p1,AccountSysvarMismatch:x1,AccountReallocExceedsLimit:y1,AccountDuplicateReallocs:v1,DeclaredProgramIdMismatch:b1,TryingToInitPayerAsProgramAccount:w1,InvalidNumericConversion:S1,Deprecated:tv},YE=new Map([[we.InstructionMissing,"Instruction discriminator not provided"],[we.InstructionFallbackNotFound,"Fallback functions are not supported"],[we.InstructionDidNotDeserialize,"The program could not deserialize the given instruction"],[we.InstructionDidNotSerialize,"The program could not serialize the given instruction"],[we.IdlInstructionStub,"The program was compiled without idl instructions"],[we.IdlInstructionInvalidProgram,"The transaction was given an invalid program for the IDL instruction"],[we.IdlAccountNotEmpty,"IDL account must be empty in order to resize, try closing first"],[we.EventInstructionStub,"The program was compiled without `event-cpi` feature"],[we.ConstraintMut,"A mut constraint was violated"],[we.ConstraintHasOne,"A has one constraint was violated"],[we.ConstraintSigner,"A signer constraint was violated"],[we.ConstraintRaw,"A raw constraint was violated"],[we.ConstraintOwner,"An owner constraint was violated"],[we.ConstraintRentExempt,"A rent exemption constraint was violated"],[we.ConstraintSeeds,"A seeds constraint was violated"],[we.ConstraintExecutable,"An executable constraint was violated"],[we.ConstraintState,"Deprecated Error, feel free to replace with something else"],[we.ConstraintAssociated,"An associated constraint was violated"],[we.ConstraintAssociatedInit,"An associated init constraint was violated"],[we.ConstraintClose,"A close constraint was violated"],[we.ConstraintAddress,"An address constraint was violated"],[we.ConstraintZero,"Expected zero account discriminant"],[we.ConstraintTokenMint,"A token mint constraint was violated"],[we.ConstraintTokenOwner,"A token owner constraint was violated"],[we.ConstraintMintMintAuthority,"A mint mint authority constraint was violated"],[we.ConstraintMintFreezeAuthority,"A mint freeze authority constraint was violated"],[we.ConstraintMintDecimals,"A mint decimals constraint was violated"],[we.ConstraintSpace,"A space constraint was violated"],[we.ConstraintAccountIsNone,"A required account for the constraint is None"],[we.ConstraintTokenTokenProgram,"A token account token program constraint was violated"],[we.ConstraintMintTokenProgram,"A mint token program constraint was violated"],[we.ConstraintAssociatedTokenTokenProgram,"An associated token account token program constraint was violated"],[we.ConstraintMintGroupPointerExtension,"A group pointer extension constraint was violated"],[we.ConstraintMintGroupPointerExtensionAuthority,"A group pointer extension authority constraint was violated"],[we.ConstraintMintGroupPointerExtensionGroupAddress,"A group pointer extension group address constraint was violated"],[we.ConstraintMintGroupMemberPointerExtension,"A group member pointer extension constraint was violated"],[we.ConstraintMintGroupMemberPointerExtensionAuthority,"A group member pointer extension authority constraint was violated"],[we.ConstraintMintGroupMemberPointerExtensionMemberAddress,"A group member pointer extension group address constraint was violated"],[we.ConstraintMintMetadataPointerExtension,"A metadata pointer extension constraint was violated"],[we.ConstraintMintMetadataPointerExtensionAuthority,"A metadata pointer extension authority constraint was violated"],[we.ConstraintMintMetadataPointerExtensionMetadataAddress,"A metadata pointer extension metadata address constraint was violated"],[we.ConstraintMintCloseAuthorityExtension,"A close authority constraint was violated"],[we.ConstraintMintCloseAuthorityExtensionAuthority,"A close authority extension authority constraint was violated"],[we.ConstraintMintPermanentDelegateExtension,"A permanent delegate extension constraint was violated"],[we.ConstraintMintPermanentDelegateExtensionDelegate,"A permanent delegate extension delegate constraint was violated"],[we.ConstraintMintTransferHookExtension,"A transfer hook extension constraint was violated"],[we.ConstraintMintTransferHookExtensionAuthority,"A transfer hook extension authority constraint was violated"],[we.ConstraintMintTransferHookExtensionProgramId,"A transfer hook extension transfer hook program id constraint was violated"],[we.RequireViolated,"A require expression was violated"],[we.RequireEqViolated,"A require_eq expression was violated"],[we.RequireKeysEqViolated,"A require_keys_eq expression was violated"],[we.RequireNeqViolated,"A require_neq expression was violated"],[we.RequireKeysNeqViolated,"A require_keys_neq expression was violated"],[we.RequireGtViolated,"A require_gt expression was violated"],[we.RequireGteViolated,"A require_gte expression was violated"],[we.AccountDiscriminatorAlreadySet,"The account discriminator was already set on this account"],[we.AccountDiscriminatorNotFound,"No discriminator was found on the account"],[we.AccountDiscriminatorMismatch,"Account discriminator did not match what was expected"],[we.AccountDidNotDeserialize,"Failed to deserialize the account"],[we.AccountDidNotSerialize,"Failed to serialize the account"],[we.AccountNotEnoughKeys,"Not enough account keys given to the instruction"],[we.AccountNotMutable,"The given account is not mutable"],[we.AccountOwnedByWrongProgram,"The given account is owned by a different program than expected"],[we.InvalidProgramId,"Program ID was not as expected"],[we.InvalidProgramExecutable,"Program account is not executable"],[we.AccountNotSigner,"The given account did not sign"],[we.AccountNotSystemOwned,"The given account is not owned by the system program"],[we.AccountNotInitialized,"The program expected this account to be already initialized"],[we.AccountNotProgramData,"The given account is not a program data account"],[we.AccountNotAssociatedTokenAccount,"The given account is not the associated token account"],[we.AccountSysvarMismatch,"The given public key does not match the required sysvar"],[we.AccountReallocExceedsLimit,"The account reallocation exceeds the MAX_PERMITTED_DATA_INCREASE limit"],[we.AccountDuplicateReallocs,"The account was duplicated for more than one reallocation"],[we.DeclaredProgramIdMismatch,"The declared program id does not match the actual program id"],[we.TryingToInitPayerAsProgramAccount,"You cannot/should not initialize the payer account as a program account"],[we.InvalidNumericConversion,"The program could not perform the numeric conversion, out of range integral type conversion attempted"],[we.Deprecated,"The API being used is deprecated and should no longer be used"]]);class at{static fieldLayout(t,a=[],o){const l=t.name;switch(t.type){case"bool":return qe.bool(l);case"u8":return qe.u8(l);case"i8":return qe.i8(l);case"u16":return qe.u16(l);case"i16":return qe.i16(l);case"u32":return qe.u32(l);case"i32":return qe.i32(l);case"f32":return qe.f32(l);case"u64":return qe.u64(l);case"i64":return qe.i64(l);case"f64":return qe.f64(l);case"u128":return qe.u128(l);case"i128":return qe.i128(l);case"u256":return qe.u256(l);case"i256":return qe.i256(l);case"bytes":return qe.vecU8(l);case"string":return qe.str(l);case"pubkey":return qe.publicKey(l);default:{if("option"in t.type)return qe.option(at.fieldLayout({type:t.type.option},a,o),l);if("vec"in t.type)return qe.vec(at.fieldLayout({type:t.type.vec},a,o),l);if("array"in t.type){let[r,d]=t.type.array;return d=at.resolveArrayLen(d,o),qe.array(at.fieldLayout({type:r},a,o),d,l)}if("defined"in t.type){if(!a)throw new rs("User defined types not provided");const r=t.type.defined.name,d=a.find(f=>f.name===r);if(!d)throw new rs(`Type not found: ${t.name}`);return at.typeDefLayout({typeDef:d,types:a,genericArgs:o??t.type.defined.generics,name:l})}if("generic"in t.type){const r=o?.at(0);if(r?.kind!=="type")throw new rs(`Invalid generic field: ${t.name}`);return at.fieldLayout({...t,type:r.type},a)}throw new rs(`Not yet implemented: ${JSON.stringify(t.type)}`)}}}static typeDefLayout({typeDef:t,types:a,name:o,genericArgs:l}){switch(t.type.kind){case"struct":{const r=Li(t.type.fields,()=>[],d=>d.map(f=>{const g=l&&at.resolveGenericArgs({type:f.type,typeDef:t,genericArgs:l});return at.fieldLayout(f,a,g)}),d=>d.map((f,g)=>{const h=l&&at.resolveGenericArgs({type:f,typeDef:t,genericArgs:l});return at.fieldLayout({name:g.toString(),type:f},a,h)}));return qe.struct(r,o)}case"enum":{const r=t.type.variants.map(d=>{const f=Li(d.fields,()=>[],g=>g.map(h=>{const m=l&&at.resolveGenericArgs({type:h.type,typeDef:t,genericArgs:l});return at.fieldLayout(h,a,m)}),g=>g.map((h,m)=>{const w=l&&at.resolveGenericArgs({type:h,typeDef:t,genericArgs:l});return at.fieldLayout({name:m.toString(),type:h},a,w)}));return qe.struct(f,d.name)});return o!==void 0?qe.rustEnum(r).replicate(o):qe.rustEnum(r,o)}case"type":return at.fieldLayout({type:t.type.alias,name:o},a)}}static typeSize(t,a,o){var l;switch(t){case"bool":return 1;case"u8":return 1;case"i8":return 1;case"i16":return 2;case"u16":return 2;case"u32":return 4;case"i32":return 4;case"f32":return 4;case"u64":return 8;case"i64":return 8;case"f64":return 8;case"u128":return 16;case"i128":return 16;case"u256":return 32;case"i256":return 32;case"bytes":return 1;case"string":return 1;case"pubkey":return 32;default:if("option"in t)return 1+at.typeSize(t.option,a,o);if("coption"in t)return 4+at.typeSize(t.coption,a,o);if("vec"in t)return 1;if("array"in t){let[r,d]=t.array;return d=at.resolveArrayLen(d,o),at.typeSize(r,a,o)*d}if("defined"in t){const r=(l=a.types)===null||l===void 0?void 0:l.find(f=>f.name===t.defined.name);if(!r)throw new rs(`Type not found: ${JSON.stringify(t)}`);const d=f=>{const g=o??t.defined.generics,h=g&&at.resolveGenericArgs({type:f,typeDef:r,genericArgs:g});return at.typeSize(f,a,h)};switch(r.type.kind){case"struct":return Li(r.type.fields,()=>[0],f=>f.map(g=>d(g.type)),f=>f.map(g=>d(g))).reduce((f,g)=>f+g,0);case"enum":{const f=r.type.variants.map(g=>Li(g.fields,()=>[0],h=>h.map(m=>d(m.type)),h=>h.map(m=>d(m))).reduce((h,m)=>h+m,0));return Math.max(...f)+1}case"type":return at.typeSize(r.type.alias,a,o)}}if("generic"in t){const r=o?.at(0);if(r?.kind!=="type")throw new rs(`Invalid generic: ${t.generic}`);return at.typeSize(r.type,a,o)}throw new Error(`Invalid type ${JSON.stringify(t)}`)}}static resolveArrayLen(t,a){if(typeof t=="number")return t;if(a){const o=a.find(l=>l.kind==="const");o?.kind==="const"&&(t=+o.value)}if(typeof t!="number")throw new rs("Generic array length did not resolve");return t}static resolveGenericArgs({type:t,typeDef:a,genericArgs:o,isDefined:l}){if(typeof t!="object")return null;for(const r in a.generics){const d=a.generics[r];if("generic"in t&&d.name===t.generic)return[o[r]];if("option"in t){const f=at.resolveGenericArgs({type:t.option,typeDef:a,genericArgs:o,isDefined:l});if(!f||!l)return f;if(f[0].kind==="type")return[{kind:"type",type:{option:f[0].type}}]}if("vec"in t){const f=at.resolveGenericArgs({type:t.vec,typeDef:a,genericArgs:o,isDefined:l});if(!f||!l)return f;if(f[0].kind==="type")return[{kind:"type",type:{vec:f[0].type}}]}if("array"in t){const[f,g]=t.array,h=typeof g=="object",m=at.resolveGenericArgs({type:f,typeDef:a,genericArgs:o,isDefined:l})||[];if(h){const w=a.generics.findIndex(x=>x.name===g.generic);w!==-1&&m.push(o[w])}if(m.length>0){if(!l)return m;if(m[0].kind==="type"&&m[1].kind==="const")return[{kind:"type",type:{array:[m[0].type,+m[1].value]}}]}if(h&&d.name===g.generic){const w=o[r];return l?[{kind:"type",type:{array:[f,+w.value]}}]:[w]}return null}if("defined"in t)return t.defined.generics?t.defined.generics.flatMap(f=>{switch(f.kind){case"type":return at.resolveGenericArgs({type:f.type,typeDef:a,genericArgs:o,isDefined:!0});case"const":return[f]}}).filter(f=>f!==null):null}return null}}class XE{constructor(t){this.idl=t;const a=t.instructions.map(o=>{const l=o.name,r=o.args.map(f=>at.fieldLayout(f,t.types)),d=qe.struct(r,l);return[l,{discriminator:o.discriminator,layout:d}]});this.ixLayouts=new Map(a)}encode(t,a){const o=hn.Buffer.alloc(1e3),l=this.ixLayouts.get(t);if(!l)throw new Error(`Unknown method: ${t}`);const r=l.layout.encode(a,o),d=o.slice(0,r);return hn.Buffer.concat([hn.Buffer.from(l.discriminator),d])}decode(t,a="hex"){typeof t=="string"&&(t=a==="hex"?hn.Buffer.from(t,"hex"):Yf.decode(t));for(const[o,l]of this.ixLayouts){const r=t.subarray(0,l.discriminator.length);if(r.equals(hn.Buffer.from(l.discriminator)))return{name:o,data:l.layout.decode(t.subarray(r.length))}}return null}format(t,a){return An.format(t,a,this.idl)}}class An{static format(t,a,o){const l=o.instructions.find(g=>t.name===g.name);if(!l)return console.error("Invalid instruction given"),null;const r=l.args.map(g=>({name:g.name,type:An.formatIdlType(g.type),data:An.formatIdlData(g,t.data[g.name],o.types)})),d=An.flattenIdlAccounts(l.accounts),f=a.map((g,h)=>h<d.length?{name:d[h].name,...g}:{name:void 0,...g});return{args:r,accounts:f}}static formatIdlType(t){if(typeof t=="string")return t;if("option"in t)return`Option<${this.formatIdlType(t.option)}>`;if("coption"in t)return`COption<${this.formatIdlType(t.coption)}>`;if("vec"in t)return`Vec<${this.formatIdlType(t.vec)}>`;if("array"in t)return`Array<${t.array[0]}; ${t.array[1]}>`;if("defined"in t){const a=t.defined.name;if(t.defined.generics){const o=t.defined.generics.map(l=>{switch(l.kind){case"type":return An.formatIdlType(l.type);case"const":return l.value}}).join(", ");return`${a}<${o}>`}return a}throw new Error(`Unknown IDL type: ${t}`)}static formatIdlData(t,a,o){if(typeof t.type=="string")return a.toString();if("vec"in t.type)return"["+a.map(l=>this.formatIdlData({name:"",type:t.type.vec},l,o)).join(", ")+"]";if("option"in t.type)return a===null?"null":this.formatIdlData({name:"",type:t.type.option},a,o);if("defined"in t.type){if(!o)throw new Error("User defined types not provided");const l=t.type.defined.name,r=o.find(d=>d.name===l);if(!r)throw new Error(`Type not found: ${l}`);return An.formatIdlDataDefined(r,a,o)}return"unknown"}static formatIdlDataDefined(t,a,o){switch(t.type.kind){case"struct":return"{ "+Li(t.type.fields,()=>"",l=>Object.entries(a).map(([r,d])=>{const f=l.find(g=>g.name===r);if(!f)throw new Error(`Field not found: ${r}`);return r+": "+An.formatIdlData(f,d,o)}).join(", "),l=>Object.entries(a).map(([r,d])=>r+": "+An.formatIdlData({name:"",type:l[r]},d,o)).join(", "))+" }";case"enum":{const l=Object.keys(a)[0],r=t.type.variants.find(f=>f.name===l);if(!r)throw new Error(`Unable to find variant: ${l}`);const d=a[l];return Li(r.fields,()=>l,f=>{const g=Object.keys(d).map(h=>{const m=d[h],w=f.find(x=>x.name===h);if(!w)throw new Error(`Field not found: ${h}`);return h+": "+An.formatIdlData(w,m,o)}).join(", ");return`${l} { ${g} }`},f=>{const g=Object.entries(d).map(([h,m])=>h+": "+An.formatIdlData({name:"",type:f[h]},m,o)).join(", ");return`${l} { ${g} }`})}case"type":return An.formatIdlType(t.type.alias)}}static flattenIdlAccounts(t,a){return t.map(o=>{const l=ZE(o.name);if(o.hasOwnProperty("accounts")){const r=a?`${a} > ${l}`:l;return An.flattenIdlAccounts(o.accounts,r)}else return{...o,name:a?`${a} > ${l}`:l}}).flat()}}function ZE(s){const t=s.replace(/([A-Z])/g," $1");return t.charAt(0).toUpperCase()+t.slice(1)}class QE{constructor(t){if(this.idl=t,!t.accounts){this.accountLayouts=new Map;return}const a=t.types;if(!a)throw new Error("Accounts require `idl.types`");const o=t.accounts.map(l=>{const r=a.find(d=>d.name===l.name);if(!r)throw new Error(`Account not found: ${l.name}`);return[l.name,{discriminator:l.discriminator,layout:at.typeDefLayout({typeDef:r,types:a})}]});this.accountLayouts=new Map(o)}async encode(t,a){const o=hn.Buffer.alloc(1e3),l=this.accountLayouts.get(t);if(!l)throw new Error(`Unknown account: ${t}`);const r=l.layout.encode(a,o),d=o.slice(0,r),f=this.accountDiscriminator(t);return hn.Buffer.concat([f,d])}decode(t,a){const o=this.accountDiscriminator(t);if(o.compare(a.slice(0,o.length)))throw new Error("Invalid account discriminator");return this.decodeUnchecked(t,a)}decodeAny(t){for(const[a,o]of this.accountLayouts)if(t.subarray(0,o.discriminator.length).equals(hn.Buffer.from(o.discriminator)))return this.decodeUnchecked(a,t);throw new Error("Account not found")}decodeUnchecked(t,a){const o=this.accountDiscriminator(t),l=a.subarray(o.length),r=this.accountLayouts.get(t);if(!r)throw new Error(`Unknown account: ${t}`);return r.layout.decode(l)}memcmp(t,a){const o=this.accountDiscriminator(t);return{offset:0,bytes:Yf.encode(a?hn.Buffer.concat([o,a]):o)}}size(t){return this.accountDiscriminator(t).length+at.typeSize({defined:{name:t}},this.idl)}accountDiscriminator(t){var a;const o=(a=this.idl.accounts)===null||a===void 0?void 0:a.find(l=>l.name===t);if(!o)throw new Error(`Account not found: ${t}`);return hn.Buffer.from(o.discriminator)}}class KE{constructor(t){if(!t.events){this.layouts=new Map;return}const a=t.types;if(!a)throw new Error("Events require `idl.types`");const o=t.events.map(l=>{const r=a.find(d=>d.name===l.name);if(!r)throw new Error(`Event not found: ${l.name}`);return[l.name,{discriminator:l.discriminator,layout:at.typeDefLayout({typeDef:r,types:a})}]});this.layouts=new Map(o)}decode(t){let a;try{a=Xy(t)}catch{return null}for(const[o,l]of this.layouts){const r=a.subarray(0,l.discriminator.length);if(r.equals(hn.Buffer.from(l.discriminator)))return{name:o,data:l.layout.decode(a.subarray(r.length))}}return null}}class JE{constructor(t){const a=t.types;if(!a){this.typeLayouts=new Map;return}const o=a.filter(l=>!l.generics).map(l=>[l.name,at.typeDefLayout({typeDef:l,types:a})]);this.typeLayouts=new Map(o)}encode(t,a){const o=hn.Buffer.alloc(1e3),l=this.typeLayouts.get(t);if(!l)throw new Error(`Unknown type: ${t}`);const r=l.encode(a,o);return o.slice(0,r)}decode(t,a){const o=this.typeLayouts.get(t);if(!o)throw new Error(`Unknown type: ${t}`);return o.decode(a)}}class R1{constructor(t){this.instruction=new XE(t),this.accounts=new QE(t),this.events=new KE(t),this.types=new JE(t)}}let xn=class{constructor(t,a){if(!Number.isInteger(t))throw new TypeError("span must be an integer");this.span=t,this.property=a}makeDestinationObject(){return{}}decode(t,a){throw new Error("Layout is abstract")}encode(t,a,o){throw new Error("Layout is abstract")}getSpan(t,a){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(t){const a=Object.create(this.constructor.prototype);return Object.assign(a,this),a.property=t,a}fromArray(t){}};var wc=xn;function e5(s,t){return t.property?s+"["+t.property+"]":s}class Is extends xn{isCount(){throw new Error("ExternalLayout is abstract")}}class E1 extends Is{constructor(t,a,o){if(!(t instanceof xn))throw new TypeError("layout must be a Layout");if(a===void 0)a=0;else if(!Number.isInteger(a))throw new TypeError("offset must be integer or undefined");super(t.span,o||t.property),this.layout=t,this.offset=a}isCount(){return this.layout instanceof Sc||this.layout instanceof T1}decode(t,a){return a===void 0&&(a=0),this.layout.decode(t,a+this.offset)}encode(t,a,o){return o===void 0&&(o=0),this.layout.encode(t,a,o+this.offset)}}class Sc extends xn{constructor(t,a){if(super(t,a),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,a){return a===void 0&&(a=0),t.readUIntLE(a,this.span)}encode(t,a,o){return o===void 0&&(o=0),a.writeUIntLE(t,o,this.span),this.span}}class T1 extends xn{constructor(t,a){if(super(t,a),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,a){return a===void 0&&(a=0),t.readUIntBE(a,this.span)}encode(t,a,o){return o===void 0&&(o=0),a.writeUIntBE(t,o,this.span),this.span}}const kf=Math.pow(2,32);function A1(s){const t=Math.floor(s/kf),a=s-t*kf;return{hi32:t,lo32:a}}function C1(s,t){return s*kf+t}class t5 extends xn{constructor(t){super(8,t)}decode(t,a){a===void 0&&(a=0);const o=t.readUInt32LE(a),l=t.readUInt32LE(a+4);return C1(l,o)}encode(t,a,o){o===void 0&&(o=0);const l=A1(t);return a.writeUInt32LE(l.lo32,o),a.writeUInt32LE(l.hi32,o+4),8}}class n5 extends xn{constructor(t){super(8,t)}decode(t,a){a===void 0&&(a=0);const o=t.readUInt32LE(a),l=t.readInt32LE(a+4);return C1(l,o)}encode(t,a,o){o===void 0&&(o=0);const l=A1(t);return a.writeUInt32LE(l.lo32,o),a.writeInt32LE(l.hi32,o+4),8}}class a5 extends xn{constructor(t,a,o){if(!(Array.isArray(t)&&t.reduce((r,d)=>r&&d instanceof xn,!0)))throw new TypeError("fields must be array of Layout instances");typeof a=="boolean"&&o===void 0&&(o=a,a=void 0);for(const r of t)if(0>r.span&&r.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let l=-1;try{l=t.reduce((r,d)=>r+d.getSpan(),0)}catch{}super(l,a),this.fields=t,this.decodePrefixes=!!o}getSpan(t,a){if(0<=this.span)return this.span;a===void 0&&(a=0);let o=0;try{o=this.fields.reduce((l,r)=>{const d=r.getSpan(t,a);return a+=d,l+d},0)}catch{throw new RangeError("indeterminate span")}return o}decode(t,a){a===void 0&&(a=0);const o=this.makeDestinationObject();for(const l of this.fields)if(l.property!==void 0&&(o[l.property]=l.decode(t,a)),a+=l.getSpan(t,a),this.decodePrefixes&&t.length===a)break;return o}encode(t,a,o){o===void 0&&(o=0);const l=o;let r=0,d=0;for(const f of this.fields){let g=f.span;if(d=0<g?g:0,f.property!==void 0){const h=t[f.property];h!==void 0&&(d=f.encode(h,a,o),0>g&&(g=f.getSpan(a,o)))}r=o,o+=g}return r+d-l}fromArray(t){const a=this.makeDestinationObject();for(const o of this.fields)o.property!==void 0&&0<t.length&&(a[o.property]=t.shift());return a}layoutFor(t){if(typeof t!="string")throw new TypeError("property must be string");for(const a of this.fields)if(a.property===t)return a}offsetOf(t){if(typeof t!="string")throw new TypeError("property must be string");let a=0;for(const o of this.fields){if(o.property===t)return a;0>o.span?a=-1:0<=a&&(a+=o.span)}}}class M1{constructor(t){this.property=t}decode(){throw new Error("UnionDiscriminator is abstract")}encode(){throw new Error("UnionDiscriminator is abstract")}}class Nx extends M1{constructor(t,a){if(!(t instanceof Is&&t.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(a||t.property||"variant"),this.layout=t}decode(t,a){return this.layout.decode(t,a)}encode(t,a,o){return this.layout.encode(t,a,o)}}class O1 extends xn{constructor(t,a,o){const l=t instanceof Sc||t instanceof T1;if(l)t=new Nx(new E1(t));else if(t instanceof Is&&t.isCount())t=new Nx(t);else if(!(t instanceof M1))throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(a===void 0&&(a=null),!(a===null||a instanceof xn))throw new TypeError("defaultLayout must be null or a Layout");if(a!==null){if(0>a.span)throw new Error("defaultLayout must have constant span");a.property===void 0&&(a=a.replicate("content"))}let r=-1;a&&(r=a.span,0<=r&&l&&(r+=t.layout.span)),super(r,o),this.discriminator=t,this.usesPrefixDiscriminator=l,this.defaultLayout=a,this.registry={};let d=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(f){return d(f)},this.configGetSourceVariant=function(f){d=f.bind(this)}}getSpan(t,a){if(0<=this.span)return this.span;a===void 0&&(a=0);const o=this.getVariant(t,a);if(!o)throw new Error("unable to determine span for unrecognized variant");return o.getSpan(t,a)}defaultGetSourceVariant(t){if(t.hasOwnProperty(this.discriminator.property)){if(this.defaultLayout&&t.hasOwnProperty(this.defaultLayout.property))return;const a=this.registry[t[this.discriminator.property]];if(a&&(!a.layout||t.hasOwnProperty(a.property)))return a}else for(const a in this.registry){const o=this.registry[a];if(t.hasOwnProperty(o.property))return o}throw new Error("unable to infer src variant")}decode(t,a){a===void 0&&(a=0);let o;const l=this.discriminator,r=l.decode(t,a);let d=this.registry[r];if(d===void 0){let f=0;d=this.defaultLayout,this.usesPrefixDiscriminator&&(f=l.layout.span),o=this.makeDestinationObject(),o[l.property]=r,o[d.property]=this.defaultLayout.decode(t,a+f)}else o=d.decode(t,a);return o}encode(t,a,o){o===void 0&&(o=0);const l=this.getSourceVariant(t);if(l===void 0){const r=this.discriminator,d=this.defaultLayout;let f=0;return this.usesPrefixDiscriminator&&(f=r.layout.span),r.encode(t[r.property],a,o),f+d.encode(t[d.property],a,o+f)}return l.encode(t,a,o)}addVariant(t,a,o){const l=new s5(this,t,a,o);return this.registry[t]=l,l}getVariant(t,a){let o=t;return Buffer.isBuffer(t)&&(a===void 0&&(a=0),o=this.discriminator.decode(t,a)),this.registry[o]}}class s5 extends xn{constructor(t,a,o,l){if(!(t instanceof O1))throw new TypeError("union must be a Union");if(!Number.isInteger(a)||0>a)throw new TypeError("variant must be a (non-negative) integer");if(typeof o=="string"&&l===void 0&&(l=o,o=null),o){if(!(o instanceof xn))throw new TypeError("layout must be a Layout");if(t.defaultLayout!==null&&0<=o.span&&o.span>t.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof l!="string")throw new TypeError("variant must have a String property")}let r=t.span;0>t.span&&(r=o?o.span:0,0<=r&&t.usesPrefixDiscriminator&&(r+=t.discriminator.layout.span)),super(r,l),this.union=t,this.variant=a,this.layout=o||null}getSpan(t,a){if(0<=this.span)return this.span;a===void 0&&(a=0);let o=0;return this.union.usesPrefixDiscriminator&&(o=this.union.discriminator.layout.span),o+this.layout.getSpan(t,a+o)}decode(t,a){const o=this.makeDestinationObject();if(a===void 0&&(a=0),this!==this.union.getVariant(t,a))throw new Error("variant mismatch");let l=0;return this.union.usesPrefixDiscriminator&&(l=this.union.discriminator.layout.span),this.layout?o[this.property]=this.layout.decode(t,a+l):this.property?o[this.property]=!0:this.union.usesPrefixDiscriminator&&(o[this.union.discriminator.property]=this.variant),o}encode(t,a,o){o===void 0&&(o=0);let l=0;if(this.union.usesPrefixDiscriminator&&(l=this.union.discriminator.layout.span),this.layout&&!t.hasOwnProperty(this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,a,o);let r=l;if(this.layout&&(this.layout.encode(t[this.property],a,o+l),r+=this.layout.getSpan(a,o+l),0<=this.union.span&&r>this.union.span))throw new Error("encoded variant overruns containing union");return r}fromArray(t){if(this.layout)return this.layout.fromArray(t)}}class i5 extends xn{constructor(t,a){if(!(t instanceof Is&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let o=-1;t instanceof Is||(o=t),super(o,a),this.length=t}getSpan(t,a){let o=this.span;return 0>o&&(o=this.length.decode(t,a)),o}decode(t,a){a===void 0&&(a=0);let o=this.span;return 0>o&&(o=this.length.decode(t,a)),t.slice(a,a+o)}encode(t,a,o){let l=this.length;if(this.length instanceof Is&&(l=t.length),!(Buffer.isBuffer(t)&&l===t.length))throw new TypeError(e5("Blob.encode",this)+" requires (length "+l+") Buffer as src");if(o+l>a.length)throw new RangeError("encoding overruns Buffer");return a.write(t.toString("hex"),o,l,"hex"),this.length instanceof Is&&this.length.encode(l,a,o),l}}var r5=((s,t,a)=>new E1(s,t,a)),o5=(s=>new Sc(1,s)),Oa=(s=>new Sc(4,s)),l5=(s=>new t5(s)),ja=(s=>new n5(s)),Wt=((s,t,a)=>new a5(s,t,a)),j1=((s,t,a)=>new O1(s,t,a)),yo=((s,t)=>new i5(s,t));class c5 extends wc{constructor(t){super(-1,t),this.property=t,this.layout=Wt([Oa("length"),Oa("lengthPadding"),yo(r5(Oa(),-8),"chars")],this.property)}encode(t,a,o=0){if(t==null)return this.layout.span;const l={chars:Buffer.from(t,"utf8")};return this.layout.encode(l,a,o)}decode(t,a=0){return this.layout.decode(t,a).chars.toString()}getSpan(t,a=0){return Oa().span+Oa().span+new sn(new Uint8Array(t).slice(a,a+4),10,"le").toNumber()}}function Nc(s){return new c5(s)}function Fn(s){return yo(32,s)}const Mn=j1(Oa("instruction"));Mn.addVariant(0,Wt([ja("lamports"),ja("space"),Fn("owner")]),"createAccount");Mn.addVariant(1,Wt([Fn("owner")]),"assign");Mn.addVariant(2,Wt([ja("lamports")]),"transfer");Mn.addVariant(3,Wt([Fn("base"),Nc("seed"),ja("lamports"),ja("space"),Fn("owner")]),"createAccountWithSeed");Mn.addVariant(4,Wt([Fn("authorized")]),"advanceNonceAccount");Mn.addVariant(5,Wt([ja("lamports")]),"withdrawNonceAccount");Mn.addVariant(6,Wt([Fn("authorized")]),"initializeNonceAccount");Mn.addVariant(7,Wt([Fn("authorized")]),"authorizeNonceAccount");Mn.addVariant(8,Wt([ja("space")]),"allocate");Mn.addVariant(9,Wt([Fn("base"),Nc("seed"),ja("space"),Fn("owner")]),"allocateWithSeed");Mn.addVariant(10,Wt([Fn("base"),Nc("seed"),Fn("owner")]),"assignWithSeed");Mn.addVariant(11,Wt([ja("lamports"),Nc("seed"),Fn("owner")]),"transferWithSeed");Math.max(...Object.values(Mn.registry).map(s=>s.span));class u5 extends wc{constructor(t,a,o,l){super(t.span,l),this.layout=t,this.decoder=a,this.encoder=o}decode(t,a){return this.decoder(this.layout.decode(t,a))}encode(t,a,o){return this.layout.encode(this.encoder(t),a,o)}getSpan(t,a){return this.layout.getSpan(t,a)}}function _x(s){return new u5(yo(32),t=>new Ze(t),t=>t.toBuffer(),s)}Wt([Oa("version"),Oa("state"),_x("authorizedPubkey"),_x("nonce"),Wt([l5("lamportsPerSignature")],"feeCalculator")]);new Ze("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA");new Ze("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL");var Rx={exports:{}};(function(s,t){var a=typeof self<"u"?self:WE,o=(function(){function r(){this.fetch=!1,this.DOMException=a.DOMException}return r.prototype=a,new r})();(function(r){(function(d){var f={searchParams:"URLSearchParams"in r,iterable:"Symbol"in r&&"iterator"in Symbol,blob:"FileReader"in r&&"Blob"in r&&(function(){try{return new Blob,!0}catch{return!1}})(),formData:"FormData"in r,arrayBuffer:"ArrayBuffer"in r};function g(H){return H&&DataView.prototype.isPrototypeOf(H)}if(f.arrayBuffer)var h=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],m=ArrayBuffer.isView||function(H){return H&&h.indexOf(Object.prototype.toString.call(H))>-1};function w(H){if(typeof H!="string"&&(H=String(H)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(H))throw new TypeError("Invalid character in header field name");return H.toLowerCase()}function x(H){return typeof H!="string"&&(H=String(H)),H}function p(H){var V={next:function(){var $=H.shift();return{done:$===void 0,value:$}}};return f.iterable&&(V[Symbol.iterator]=function(){return V}),V}function v(H){this.map={},H instanceof v?H.forEach(function(V,$){this.append($,V)},this):Array.isArray(H)?H.forEach(function(V){this.append(V[0],V[1])},this):H&&Object.getOwnPropertyNames(H).forEach(function(V){this.append(V,H[V])},this)}v.prototype.append=function(H,V){H=w(H),V=x(V);var $=this.map[H];this.map[H]=$?$+", "+V:V},v.prototype.delete=function(H){delete this.map[w(H)]},v.prototype.get=function(H){return H=w(H),this.has(H)?this.map[H]:null},v.prototype.has=function(H){return this.map.hasOwnProperty(w(H))},v.prototype.set=function(H,V){this.map[w(H)]=x(V)},v.prototype.forEach=function(H,V){for(var $ in this.map)this.map.hasOwnProperty($)&&H.call(V,this.map[$],$,this)},v.prototype.keys=function(){var H=[];return this.forEach(function(V,$){H.push($)}),p(H)},v.prototype.values=function(){var H=[];return this.forEach(function(V){H.push(V)}),p(H)},v.prototype.entries=function(){var H=[];return this.forEach(function(V,$){H.push([$,V])}),p(H)},f.iterable&&(v.prototype[Symbol.iterator]=v.prototype.entries);function b(H){if(H.bodyUsed)return Promise.reject(new TypeError("Already read"));H.bodyUsed=!0}function N(H){return new Promise(function(V,$){H.onload=function(){V(H.result)},H.onerror=function(){$(H.error)}})}function _(H){var V=new FileReader,$=N(V);return V.readAsArrayBuffer(H),$}function A(H){var V=new FileReader,$=N(V);return V.readAsText(H),$}function C(H){for(var V=new Uint8Array(H),$=new Array(V.length),Z=0;Z<V.length;Z++)$[Z]=String.fromCharCode(V[Z]);return $.join("")}function k(H){if(H.slice)return H.slice(0);var V=new Uint8Array(H.byteLength);return V.set(new Uint8Array(H)),V.buffer}function R(){return this.bodyUsed=!1,this._initBody=function(H){this._bodyInit=H,H?typeof H=="string"?this._bodyText=H:f.blob&&Blob.prototype.isPrototypeOf(H)?this._bodyBlob=H:f.formData&&FormData.prototype.isPrototypeOf(H)?this._bodyFormData=H:f.searchParams&&URLSearchParams.prototype.isPrototypeOf(H)?this._bodyText=H.toString():f.arrayBuffer&&f.blob&&g(H)?(this._bodyArrayBuffer=k(H.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):f.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(H)||m(H))?this._bodyArrayBuffer=k(H):this._bodyText=H=Object.prototype.toString.call(H):this._bodyText="",this.headers.get("content-type")||(typeof H=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):f.searchParams&&URLSearchParams.prototype.isPrototypeOf(H)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},f.blob&&(this.blob=function(){var H=b(this);if(H)return H;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?b(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(_)}),this.text=function(){var H=b(this);if(H)return H;if(this._bodyBlob)return A(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(C(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},f.formData&&(this.formData=function(){return this.text().then(I)}),this.json=function(){return this.text().then(JSON.parse)},this}var j=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function B(H){var V=H.toUpperCase();return j.indexOf(V)>-1?V:H}function M(H,V){V=V||{};var $=V.body;if(H instanceof M){if(H.bodyUsed)throw new TypeError("Already read");this.url=H.url,this.credentials=H.credentials,V.headers||(this.headers=new v(H.headers)),this.method=H.method,this.mode=H.mode,this.signal=H.signal,!$&&H._bodyInit!=null&&($=H._bodyInit,H.bodyUsed=!0)}else this.url=String(H);if(this.credentials=V.credentials||this.credentials||"same-origin",(V.headers||!this.headers)&&(this.headers=new v(V.headers)),this.method=B(V.method||this.method||"GET"),this.mode=V.mode||this.mode||null,this.signal=V.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&$)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody($)}M.prototype.clone=function(){return new M(this,{body:this._bodyInit})};function I(H){var V=new FormData;return H.trim().split("&").forEach(function($){if($){var Z=$.split("="),Q=Z.shift().replace(/\+/g," "),F=Z.join("=").replace(/\+/g," ");V.append(decodeURIComponent(Q),decodeURIComponent(F))}}),V}function L(H){var V=new v,$=H.replace(/\r?\n[\t ]+/g," ");return $.split(/\r?\n/).forEach(function(Z){var Q=Z.split(":"),F=Q.shift().trim();if(F){var T=Q.join(":").trim();V.append(F,T)}}),V}R.call(M.prototype);function P(H,V){V||(V={}),this.type="default",this.status=V.status===void 0?200:V.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in V?V.statusText:"OK",this.headers=new v(V.headers),this.url=V.url||"",this._initBody(H)}R.call(P.prototype),P.prototype.clone=function(){return new P(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new v(this.headers),url:this.url})},P.error=function(){var H=new P(null,{status:0,statusText:""});return H.type="error",H};var U=[301,302,303,307,308];P.redirect=function(H,V){if(U.indexOf(V)===-1)throw new RangeError("Invalid status code");return new P(null,{status:V,headers:{location:H}})},d.DOMException=r.DOMException;try{new d.DOMException}catch{d.DOMException=function(V,$){this.message=V,this.name=$;var Z=Error(V);this.stack=Z.stack},d.DOMException.prototype=Object.create(Error.prototype),d.DOMException.prototype.constructor=d.DOMException}function q(H,V){return new Promise(function($,Z){var Q=new M(H,V);if(Q.signal&&Q.signal.aborted)return Z(new d.DOMException("Aborted","AbortError"));var F=new XMLHttpRequest;function T(){F.abort()}F.onload=function(){var O={status:F.status,statusText:F.statusText,headers:L(F.getAllResponseHeaders()||"")};O.url="responseURL"in F?F.responseURL:O.headers.get("X-Request-URL");var G="response"in F?F.response:F.responseText;$(new P(G,O))},F.onerror=function(){Z(new TypeError("Network request failed"))},F.ontimeout=function(){Z(new TypeError("Network request failed"))},F.onabort=function(){Z(new d.DOMException("Aborted","AbortError"))},F.open(Q.method,Q.url,!0),Q.credentials==="include"?F.withCredentials=!0:Q.credentials==="omit"&&(F.withCredentials=!1),"responseType"in F&&f.blob&&(F.responseType="blob"),Q.headers.forEach(function(O,G){F.setRequestHeader(G,O)}),Q.signal&&(Q.signal.addEventListener("abort",T),F.onreadystatechange=function(){F.readyState===4&&Q.signal.removeEventListener("abort",T)}),F.send(typeof Q._bodyInit>"u"?null:Q._bodyInit)})}return q.polyfill=!0,r.fetch||(r.fetch=q,r.Headers=v,r.Request=M,r.Response=P),d.Headers=v,d.Request=M,d.Response=P,d.fetch=q,Object.defineProperty(d,"__esModule",{value:!0}),d})({})})(o),o.fetch.ponyfill=!0,delete o.fetch.polyfill;var l=o;t=l.fetch,t.default=l.fetch,t.fetch=l.fetch,t.Headers=l.Headers,t.Request=l.Request,t.Response=l.Response,s.exports=t})(Rx,Rx.exports);qe.rustEnum([qe.struct([],"uninitialized"),qe.struct([qe.option(qe.publicKey(),"authorityAddress")],"buffer"),qe.struct([qe.publicKey("programdataAddress")],"program"),qe.struct([qe.u64("slot"),qe.option(qe.publicKey(),"upgradeAuthorityAddress")],"programData")],void 0,qe.u32());const Df="Program log: ",k1="Program data: ",d5=Df.length,f5=k1.length;class m5{constructor(t,a,o){this._programId=t,this._provider=a,this._eventParser=new D1(t,o),this._eventCallbacks=new Map,this._eventListeners=new Map,this._listenerIdCount=0}addEventListener(t,a,o){var l;let r=this._listenerIdCount;return this._listenerIdCount+=1,this._eventListeners.has(t)||this._eventListeners.set(t,[]),this._eventListeners.set(t,((l=this._eventListeners.get(t))!==null&&l!==void 0?l:[]).concat(r)),this._eventCallbacks.set(r,[t,a]),this._onLogsSubscriptionId!==void 0||(this._onLogsSubscriptionId=this._provider.connection.onLogs(this._programId,(d,f)=>{if(!d.err)for(const g of this._eventParser.parseLogs(d.logs)){const h=this._eventListeners.get(g.name);h&&h.forEach(m=>{const w=this._eventCallbacks.get(m);if(w){const[,x]=w;x(g.data,f.slot,d.signature)}})}},o)),r}async removeEventListener(t){const a=this._eventCallbacks.get(t);if(!a)throw new Error(`Event listener ${t} doesn't exist!`);const[o]=a;let l=this._eventListeners.get(o);if(!l)throw new Error(`Event listeners don't exist for ${o}!`);if(this._eventCallbacks.delete(t),l=l.filter(r=>r!==t),this._eventListeners.set(o,l),l.length===0&&this._eventListeners.delete(o),this._eventCallbacks.size===0){if(this._eventListeners.size!==0)throw new Error(`Expected event listeners size to be 0 but got ${this._eventListeners.size}`);this._onLogsSubscriptionId!==void 0&&(await this._provider.connection.removeOnLogsListener(this._onLogsSubscriptionId),this._onLogsSubscriptionId=void 0)}}}class D1{constructor(t,a){this.coder=a,this.programId=t}*parseLogs(t,a=!1){const o=new g5(t),l=new h5;let r=o.next();for(;r!==null;){let[d,f,g]=this.handleLog(l,r,a);d&&(yield d),f&&l.push(f),g&&l.pop(),r=o.next()}}handleLog(t,a,o){return t.stack.length>0&&t.program()===this.programId.toString()?this.handleProgramLog(a,o):[null,...this.handleSystemLog(a)]}handleProgramLog(t,a){if(t.startsWith(Df)||t.startsWith(k1)){const o=t.startsWith(Df)?t.slice(d5):t.slice(f5),l=this.coder.events.decode(o);if(a&&l===null)throw new Error(`Unable to decode event ${o}`);return[l,null,!1]}else return[null,...this.handleSystemLog(t)]}handleSystemLog(t){const a=t.split(":")[0];return a.match(/^Program (.*) success/g)!==null?[null,!0]:a.startsWith(`Program ${this.programId.toString()} invoke`)?[this.programId.toString(),!1]:a.includes("invoke")?["cpi",!1]:[null,!1]}}class h5{constructor(){this.stack=[]}program(){if(!this.stack.length)throw new Error("Expected the stack to have elements");return this.stack[this.stack.length-1]}push(t){this.stack.push(t)}pop(){if(!this.stack.length)throw new Error("Expected the stack to have elements");this.stack.pop()}}class g5{constructor(t){this.logs=t}next(){if(this.logs.length===0)return null;let t=this.logs[0];return this.logs=this.logs.slice(1),t}}function _c(s,t){var a,o;let l={};const r=s.args?s.args.length:0;if(t.length>r){if(t.length!==r+1)throw new Error(`provided too many arguments ${t} to instruction ${s?.name} expecting: ${(o=(a=s.args)===null||a===void 0?void 0:a.map(d=>d.name))!==null&&o!==void 0?o:[]}`);l=t.pop()}return[t,l]}class lc{static build(t,a,o){if(t.name==="_inner")throw new rs("the _inner name is reserved");const l=(...r)=>{const[d,f]=_c(t,[...r]);Zy(t.accounts,f.accounts),p5(t,...r);const g=l.accounts(f.accounts);return f.remainingAccounts!==void 0&&g.push(...f.remainingAccounts),N1("debug-logs")&&console.log("Outgoing account metas:",g),new KS({keys:g,programId:o,data:a(t.name,CE(t,...d))})};return l.accounts=r=>lc.accountsArray(r,t.accounts,o,t.name),l}static accountsArray(t,a,o,l){return t?a.map(r=>{if(os(r)){const m=t[r.name];return lc.accountsArray(m,r.accounts,o,l).flat()}let d;try{d=Zn(t[r.name])}catch{throw new Error(`Wrong input type for account "${r.name}" in the instruction accounts object${l!==void 0?' for instruction "'+l+'"':""}. Expected PublicKey or string.`)}const f=r.optional&&d.equals(o),g=!!(r.writable&&!f),h=!!(r.signer&&!f);return{pubkey:d,isWritable:g,isSigner:h}}).flat():[]}}function p5(s,...t){}class x5{static build(t,a){return(...l)=>{var r,d,f;const[,g]=_c(t,[...l]),h=new Xl;if(g.preInstructions&&g.instructions)throw new Error("instructions is deprecated, use preInstructions");return(r=g.preInstructions)===null||r===void 0||r.forEach(m=>h.add(m)),(d=g.instructions)===null||d===void 0||d.forEach(m=>h.add(m)),h.add(a(...l)),(f=g.postInstructions)===null||f===void 0||f.forEach(m=>h.add(m)),h}}}class y5{static build(t,a,o,l){return async(...d)=>{var f;const g=a(...d),[,h]=_c(t,[...d]);if(l.sendAndConfirm===void 0)throw new Error("This function requires 'Provider.sendAndConfirm' to be implemented.");try{return await l.sendAndConfirm(g,(f=h.signers)!==null&&f!==void 0?f:[],h.options)}catch(m){throw _1(m,o)}}}}class v5{static build(t,a,o,l){var r;return((r=t.accounts)!==null&&r!==void 0?r:[]).reduce((d,f)=>(d[f.name]=new b5(t,f,o,l,a),d),{})}}class b5{get size(){return this._size}get programId(){return this._programId}get provider(){return this._provider}get coder(){return this._coder}constructor(t,a,o,l,r){this._idlAccount=a,this._programId=o,this._provider=l??jf(),this._coder=r??new R1(t),this._size=this._coder.accounts.size(a.name)}async fetchNullable(t,a){const{data:o}=await this.fetchNullableAndContext(t,a);return o}async fetchNullableAndContext(t,a){const o=await this.getAccountInfoAndContext(t,a),{value:l,context:r}=o;return{data:l&&l.data.length!==0?this._coder.accounts.decode(this._idlAccount.name,l.data):null,context:r}}async fetch(t,a){const{data:o}=await this.fetchNullableAndContext(t,a);if(o===null)throw new Error(`Account does not exist or has no data ${t.toString()}`);return o}async fetchAndContext(t,a){const{data:o,context:l}=await this.fetchNullableAndContext(t,a);if(o===null)throw new Error(`Account does not exist ${t.toString()}`);return{data:o,context:l}}async fetchMultiple(t,a){return(await this.fetchMultipleAndContext(t,a)).map(l=>l?l.data:null)}async fetchMultipleAndContext(t,a){return(await UE(this._provider.connection,t.map(l=>Zn(l)),a)).map(l=>{if(l==null)return null;const{account:r,context:d}=l;return{data:this._coder.accounts.decode(this._idlAccount.name,r.data),context:d}})}async all(t){const a=this.coder.accounts.memcmp(this._idlAccount.name,t instanceof Buffer?t:void 0),o=[];return a?.offset!=null&&a?.bytes!=null&&o.push({memcmp:{offset:a.offset,bytes:a.bytes}}),a?.dataSize!=null&&o.push({dataSize:a.dataSize}),(await this._provider.connection.getProgramAccounts(this._programId,{commitment:this._provider.connection.commitment,filters:[...o,...Array.isArray(t)?t:[]]})).map(({pubkey:r,account:d})=>({publicKey:r,account:this._coder.accounts.decode(this._idlAccount.name,d.data)}))}subscribe(t,a){const o=Wr.get(t.toString());if(o)return o.ee;const l=new bE;t=Zn(t);const r=this._provider.connection.onAccountChange(t,d=>{const f=this._coder.accounts.decode(this._idlAccount.name,d.data);l.emit("change",f)},a);return Wr.set(t.toString(),{ee:l,listener:r}),l}async unsubscribe(t){let a=Wr.get(t.toString());if(!a){console.warn("Address is not subscribed");return}Wr&&await this._provider.connection.removeAccountChangeListener(a.listener).then(()=>{Wr.delete(t.toString())}).catch(console.error)}async createInstruction(t,a){const o=this.size;if(this._provider.publicKey===void 0)throw new Error("This function requires the Provider interface implementor to have a 'publicKey' field.");return Kr.createAccount({fromPubkey:this._provider.publicKey,newAccountPubkey:t.publicKey,space:a??o,lamports:await this._provider.connection.getMinimumBalanceForRentExemption(a??o),programId:this._programId})}async getAccountInfo(t,a){return await this._provider.connection.getAccountInfo(Zn(t),a)}async getAccountInfoAndContext(t,a){return await this._provider.connection.getAccountInfoAndContext(Zn(t),a)}}const Wr=new Map;class w5{static build(t,a,o,l,r,d,f){return async(...h)=>{var m;const w=a(...h),[,x]=_c(t,[...h]);let p;if(l.simulate===void 0)throw new Error("This function requires 'Provider.simulate' to be implemented.");try{p=await l.simulate(w,x.signers,(m=x.options)===null||m===void 0?void 0:m.commitment)}catch(N){throw _1(N,o)}if(p===void 0)throw new Error("Unable to simulate transaction");const v=p.logs;if(!v)throw new Error("Simulated logs not found");const b=[];if(f.events){let N=new D1(d,r);for(const _ of N.parseLogs(v))b.push(_)}return{events:b,raw:v}}}}function cf(s){return new B1(yo(8),t=>Kf.fromBuffer(t),t=>t.toBuffer(),s)}function Pl(s){return new B1(yo(32),t=>new Ze(t),t=>t.toBuffer(),s)}function uf(s,t){return new S5(s,t)}class B1 extends wc{constructor(t,a,o,l){super(t.span,l),this.layout=t,this.decoder=a,this.encoder=o}decode(t,a){return this.decoder(this.layout.decode(t,a))}encode(t,a,o){return this.layout.encode(this.encoder(t),a,o)}getSpan(t,a){return this.layout.getSpan(t,a)}}class S5 extends wc{constructor(t,a){super(-1,a),this.layout=t,this.discriminator=Oa()}encode(t,a,o=0){return t==null?this.layout.span+this.discriminator.encode(0,a,o):(this.discriminator.encode(1,a,o),this.layout.encode(t,a,o+4)+4)}decode(t,a=0){const o=this.discriminator.decode(t,a);if(o===0)return null;if(o===1)return this.layout.decode(t,a+4);throw new Error("Invalid coption "+this.layout.property)}getSpan(t,a=0){return this.layout.getSpan(t,a+4)+4}}class Kf extends sn{toBuffer(){const t=super.toArray().reverse(),a=Buffer.from(t);if(a.length===8)return a;if(a.length>=8)throw new Error("u64 too large");const o=Buffer.alloc(8);return a.copy(o),o}static fromBuffer(t){if(t.length!==8)throw new Error(`Invalid buffer length: ${t.length}`);return new Kf([...t].reverse().map(a=>`00${a.toString(16)}`.slice(-2)).join(""),16)}}const N5=Wt([Pl("mint"),Pl("owner"),cf("amount"),uf(Pl(),"delegate"),(s=>{const t=j1(o5("discriminator"),null,s);return t.addVariant(0,Wt([]),"uninitialized"),t.addVariant(1,Wt([]),"initialized"),t.addVariant(2,Wt([]),"frozen"),t})("state"),uf(cf(),"isNative"),cf("delegatedAmount"),uf(Pl(),"closeAuthority")]);function _5(s){return N5.decode(s)}class R5{constructor(t,a,o,l,r,d,f,g){this._args=t,this._accounts=a,this._provider=o,this._programId=l,this._idlIx=r,this._idlTypes=f,this._customResolver=g,this._accountStore=new E5(o,d,l)}args(t){this._args=t}async resolve(){this.resolveEventCpi(this._idlIx.accounts),this.resolveConst(this._idlIx.accounts);let t=0;for(;await this.resolvePdasAndRelations(this._idlIx.accounts)+await this.resolveCustom()>0;)if(t++,t===16){const a=d=>os(d)?d.accounts.some(a):!!(d.address||d.pda||d.relations),o=(d,f=[],g=[])=>{for(const h of d)os(h)?g.push(...o(h.accounts,[...f,h.name])):g.push([...f,h.name]);return g},l=this._idlIx.accounts.filter(a),r=o(l).filter(d=>!this.get(d)).map(d=>d.reduce((f,g)=>f+"."+g)).map(d=>`\`${d}\``).join(", ");throw new Error(["Reached maximum depth for account resolution.",`Unresolved accounts: ${r}`].join(" "))}}resolveOptionals(t){Object.assign(this._accounts,this.resolveOptionalsHelper(t,this._idlIx.accounts))}get(t){const a=t.reduce((o,l)=>o&&o[l],this._accounts);if(a&&a.toBase58)return a}set(t,a){let o=this._accounts;t.forEach((l,r)=>{var d;r===t.length-1&&(o[l]=a),o[l]=(d=o[l])!==null&&d!==void 0?d:{},o=o[l]})}resolveOptionalsHelper(t,a){const o={};for(const l of a){const r=l.name,d=t[r];d!==void 0&&(I1(d)?os(l)?o[r]=this.resolveOptionalsHelper(d,l.accounts):o[r]=L1(d):d!==null?o[r]=Zn(d):l.optional&&(o[r]=this._programId))}return o}async resolveCustom(){if(this._customResolver){const{accounts:t,resolved:a}=await this._customResolver({args:this._args,accounts:this._accounts,provider:this._provider,programId:this._programId,idlIx:this._idlIx});return this._accounts=t,a}return 0}resolveEventCpi(t,a=[]){for(const o in t){const l=t[o];os(l)&&this.resolveEventCpi(l.accounts,[...a,l.name]);const r=+o+1;if(r===t.length)return;const d=t[o].name,f=t[r].name;if(d==="eventAuthority"&&f==="program"){const g=[...a,d],h=[...a,f];this.get(g)||this.set(g,Ze.findProgramAddressSync([Buffer.from("__event_authority")],this._programId)[0]),this.get(h)||this.set(h,this._programId);return}}}resolveConst(t,a=[]){for(const o of t){const l=o.name;if(os(o))this.resolveConst(o.accounts,[...a,l]);else{const r=o;if((r.signer||r.address)&&!this.get([...a,l])){if(r.signer){if(!this._provider.publicKey)throw new Error("This function requires the `Provider` interface implementor to have a `publicKey` field.");this.set([...a,l],this._provider.publicKey)}r.address&&this.set([...a,l],Zn(r.address))}}}}async resolvePdasAndRelations(t,a=[]){let o=0;for(const l of t){const r=l.name;if(os(l))o+=await this.resolvePdasAndRelations(l.accounts,[...a,r]);else{const d=l;if((d.pda||d.relations)&&!this.get([...a,r])){o++;try{if(d.pda){const f=await Promise.all(d.pda.seeds.map(m=>this.toBuffer(m,a)));if(f.some(m=>!m))continue;const g=await this.parseProgramId(d,a),[h]=Ze.findProgramAddressSync(f,g);this.set([...a,r],h)}}catch{}try{if(d.relations){const f=this.get([...a,d.relations[0]]);if(f){const g=await this._accountStore.fetchAccount({publicKey:f});this.set([...a,r],g[r])}}}catch{}}}}return o}async parseProgramId(t,a=[]){var o;if(!(!((o=t.pda)===null||o===void 0)&&o.program))return this._programId;const l=await this.toBuffer(t.pda.program,a);if(!l)throw new Error(`Program seed not resolved: ${t.name}`);return new Ze(l)}async toBuffer(t,a=[]){switch(t.kind){case"const":return this.toBufferConst(t);case"arg":return await this.toBufferArg(t);case"account":return await this.toBufferAccount(t,a);default:throw new Error(`Unexpected seed: ${t}`)}}toBufferConst(t){return this.toBufferValue("bytes",t.value)}async toBufferArg(t){const[a,...o]=t.path.split("."),l=this._idlIx.args.findIndex(f=>f.name===a);if(l===-1)throw new Error(`Unable to find argument for seed: ${a}`);const r=o.reduce((f,g)=>(f??{})[g],this._args[l]);if(r===void 0)return;const d=this.getType(this._idlIx.args[l].type,o);return this.toBufferValue(d,r)}async toBufferAccount(t,a=[]){const[o,...l]=t.path.split("."),r=this.get([...a,o]);if(!r)return;if(!l.length)return this.toBufferValue("pubkey",r);if(!t.account)throw new Error(`Seed account is required in order to resolve type: ${t.path}`);let f=await this._accountStore.fetchAccount({publicKey:r,name:t.account}),g=l;for(;g.length>0;)f=f[g[0]],g=g.slice(1);if(f===void 0)return;const h=this.getType({defined:{name:t.account}},l);return this.toBufferValue(h,f)}toBufferValue(t,a){switch(t){case"u8":case"i8":return Buffer.from([a]);case"u16":case"i16":return new sn(a).toArrayLike(Buffer,"le",2);case"u32":case"i32":return new sn(a).toArrayLike(Buffer,"le",4);case"u64":case"i64":return new sn(a).toArrayLike(Buffer,"le",8);case"u128":case"i128":return new sn(a).toArrayLike(Buffer,"le",16);case"u256":case"i256":return new sn(a).toArrayLike(Buffer,"le",32);case"string":return Buffer.from(a);case"pubkey":return a.toBuffer();case"bytes":return Buffer.from(a);default:if(t?.array)return Buffer.from(a);throw new Error(`Unexpected seed type: ${t}`)}}getType(t,a=[]){var o;const l=(o=t?.defined)===null||o===void 0?void 0:o.name;if(l){if(l==="tokenAccount")switch(a.at(0)){case"mint":case"owner":return"pubkey";case"amount":case"delagatedAmount":return"u64";default:throw new Error(`Unknown token account path: ${a}`)}const r=this._idlTypes.find(m=>m.name===l);if(!r)throw new Error(`Type not found: ${l}`);const[d,...f]=a,h=r.type.fields.find(m=>m.name===d);if(!h)throw new Error(`Field not found: ${d}`);return this.getType(h.type,f)}return t}}class E5{constructor(t,a,o){this._provider=t,this._cache=new Map,this._idls={},this._idls[o.toBase58()]=a}async fetchAccount({publicKey:t,name:a}){const o=t.toBase58();if(!this._cache.has(o)){const l=await this._provider.connection.getAccountInfo(t);if(l===null)throw new Error(`Account not found: ${o}`);if(a==="tokenAccount"){const r=_5(l.data);this._cache.set(o,r)}else{const r=await this.getAccountsNs(l.owner);if(r){const d=Object.values(r)[0];if(d){const f=d.coder.accounts.decodeAny(l.data);this._cache.set(o,f)}}}}return this._cache.get(o)}async getAccountsNs(t){const a=t.toBase58();if(!this._idls[a]){const o=await Pi.fetchIdl(t,this._provider);if(o){const l=new Pi(o,this._provider);this._idls[a]=l.account}}return this._idls[a]}}class T5{static build(t,a,o,l,r,d,f,g,h,m,w){return(...x)=>new A5(x,l,r,d,f,g,t,a,o,h,m,w)}}function I1(s){return typeof s=="object"&&s!==null&&!("_bn"in s)}function L1(s,t){const a={};for(const o in s){const l=s[o];if(l===null)throw new Error("Failed to resolve optionals due to IDL type mismatch with input accounts!");a[o]=I1(l)?L1(l):Zn(l)}return a}class A5{constructor(t,a,o,l,r,d,f,g,h,m,w,x){this._args=t,this._ixFn=a,this._txFn=o,this._rpcFn=l,this._simulateFn=r,this._viewFn=d,this._accounts={},this._remainingAccounts=[],this._signers=[],this._preInstructions=[],this._postInstructions=[],this._resolveAccounts=!0,this._accountsResolver=new R5(t,this._accounts,f,g,h,m,w,x)}args(t){this._args=t,this._accountsResolver.args(t)}accounts(t){return this.accountsPartial(t)}accountsPartial(t){return this._resolveAccounts=!0,this._accountsResolver.resolveOptionals(t),this}accountsStrict(t){return this._resolveAccounts=!1,this._accountsResolver.resolveOptionals(t),this}signers(t){return this._signers=this._signers.concat(t),this}remainingAccounts(t){return this._remainingAccounts=this._remainingAccounts.concat(t),this}preInstructions(t,a=!1){return a?this._preInstructions=t.concat(this._preInstructions):this._preInstructions=this._preInstructions.concat(t),this}postInstructions(t){return this._postInstructions=this._postInstructions.concat(t),this}async pubkeys(){return this._resolveAccounts&&await this._accountsResolver.resolve(),this._accounts}async instruction(){return this._resolveAccounts&&await this._accountsResolver.resolve(),this._ixFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions})}async transaction(){return this._resolveAccounts&&await this._accountsResolver.resolve(),this._txFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions})}async simulate(t){return this._resolveAccounts&&await this._accountsResolver.resolve(),this._simulateFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions,options:t})}async view(t){if(this._resolveAccounts&&await this._accountsResolver.resolve(),!this._viewFn)throw new Error(["Method does not support views.","The instruction should return a value, and its accounts must be read-only"].join(" "));return this._viewFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions,options:t})}async rpc(t){return this._resolveAccounts&&await this._accountsResolver.resolve(),this._rpcFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions,options:t})}async rpcAndKeys(t){return{signature:await this.rpc(t),pubkeys:await this.pubkeys()}}async prepare(){return{instruction:await this.instruction(),signers:this._signers,pubkeys:await this.pubkeys()}}}class C5{static build(t,a,o,l){const r=a.accounts.find(g=>g.writable),d=!!a.returns;return r||!d?void 0:async(...g)=>{let h=await o(...g);const m=`Program return: ${t} `;let w=h.raw.find(b=>b.startsWith(m));if(!w)throw new Error("View expected return log");let x=Xy(w.slice(m.length)),p=a.returns;if(!p)throw new Error("View expected return type");return at.fieldLayout({type:p},l.types).decode(x)}}}class M5{static build(t,a,o,l,r){const d={},f={},g={},h={},m={},w={},x=AE(t),p=t.accounts?v5.build(t,a,o,l):{};return t.instructions.forEach(v=>{const b=lc.build(v,(j,B)=>a.instruction.encode(j,B),o),N=x5.build(v,b),_=y5.build(v,N,x,l),A=w5.build(v,N,x,l,a,o,t),C=C5.build(o,v,A,t),k=T5.build(l,o,v,b,N,_,A,C,p,t.types||[],r?.(v)),R=v.name;f[R]=b,g[R]=N,d[R]=_,h[R]=A,m[R]=k,C&&(w[R]=C)}),[d,f,g,p,h,m,w]}}class Pi{get programId(){return this._programId}get idl(){return this._idl}get rawIdl(){return this._rawIdl}get coder(){return this._coder}get provider(){return this._provider}constructor(t,a=jf(),o,l){this._idl=TE(t),this._rawIdl=t,this._provider=a,this._programId=Zn(t.address),this._coder=o??new R1(this._idl),this._events=new m5(this._programId,a,this._coder);const[r,d,f,g,h,m,w]=M5.build(this._idl,this._coder,this._programId,a,l);this.rpc=r,this.instruction=d,this.transaction=f,this.account=g,this.simulate=h,this.methods=m,this.views=w}static async at(t,a){const o=Zn(t),l=await Pi.fetchIdl(o,a);if(!l)throw new Error(`IDL not found for program: ${t.toString()}`);return new Pi(l,a)}static async fetchIdl(t,a){a=a??jf();const o=Zn(t),l=await NE(o),r=await a.connection.getAccountInfo(l);if(!r)return null;let d=EE(r.data.slice(8));const f=xE(d.data);return JSON.parse(SE(f))}addEventListener(t,a,o){return this._events.addEventListener(t,a,o)}async removeEventListener(t){return await this._events.removeEventListener(t)}}new Ze("11111111111111111111111111111111");const O5="F2LhVGUa9yLbYVYujYMPyckqWmsokHE9wym7ceGHWUMZ",j5={name:"pvp_program",version:"1.0.0",spec:"0.1.0",description:"Solana PvP Game Program with Orao VRF"},k5=[{name:"create_lobby",discriminator:[116,55,74,48,40,51,135,155],accounts:[{name:"lobby",writable:!0,pda:{seeds:[{kind:"const",value:[108,111,98,98,121]},{kind:"account",path:"creator"},{kind:"arg",path:"lobby_id"}]}},{name:"active",writable:!0,pda:{seeds:[{kind:"const",value:[97,99,116,105,118,101]},{kind:"account",path:"creator"}]}},{name:"creator",writable:!0,signer:!0},{name:"system_program",address:"11111111111111111111111111111111"}],args:[{name:"lobby_id",type:"u64"},{name:"team_size",type:"u8"},{name:"stake_lamports",type:"u64"},{name:"side",type:"u8"},{name:"game",type:"string"},{name:"game_mode",type:"string"},{name:"arena_type",type:"string"},{name:"team_size_str",type:"string"}]},{name:"force_refund",discriminator:[127,173,30,92,164,123,109,177],accounts:[{name:"lobby",writable:!0,pda:{seeds:[{kind:"const",value:[108,111,98,98,121]},{kind:"account",path:"lobby.creator",account:"Lobby"},{kind:"account",path:"lobby.lobby_id",account:"Lobby"}]}},{name:"creator",writable:!0},{name:"requester",signer:!0},{name:"active",writable:!0,pda:{seeds:[{kind:"const",value:[97,99,116,105,118,101]},{kind:"account",path:"lobby.creator",account:"Lobby"}]}},{name:"system_program",address:"11111111111111111111111111111111"}],args:[]},{name:"join_side",discriminator:[72,81,137,98,213,63,154,117],accounts:[{name:"lobby",writable:!0,pda:{seeds:[{kind:"const",value:[108,111,98,98,121]},{kind:"account",path:"creator"},{kind:"account",path:"lobby.lobby_id",account:"Lobby"}]}},{name:"creator",relations:["lobby"]},{name:"player",writable:!0,signer:!0},{name:"active",writable:!0,pda:{seeds:[{kind:"const",value:[97,99,116,105,118,101]},{kind:"account",path:"lobby.creator",account:"Lobby"}]}},{name:"system_program",address:"11111111111111111111111111111111"}],args:[{name:"side",type:"u8"}]},{name:"join_side_final",discriminator:[145,130,102,65,104,78,171,113],accounts:[{name:"lobby",writable:!0,pda:{seeds:[{kind:"const",value:[108,111,98,98,121]},{kind:"account",path:"creator"},{kind:"account",path:"lobby.lobby_id",account:"Lobby"}]}},{name:"creator",relations:["lobby"]},{name:"player",writable:!0,signer:!0},{name:"active",writable:!0,pda:{seeds:[{kind:"const",value:[97,99,116,105,118,101]},{kind:"account",path:"lobby.creator",account:"Lobby"}]}},{name:"vrf_request",docs:["Orao VRF randomness request account (PDA derived from seed)"],writable:!0,pda:{seeds:[{kind:"const",value:[111,114,97,111,45,118,114,102,45,114,97,110,100,111,109,110,101,115,115,45,114,101,113,117,101,115,116]},{kind:"arg",path:"vrf_seed"}],program:{kind:"const",value:[7,71,177,26,250,145,180,209,249,34,242,123,14,186,193,218,178,59,33,41,164,190,243,79,50,164,123,88,245,206,252,120]}}},{name:"vrf_config",docs:["Orao VRF network configuration"],writable:!0,pda:{seeds:[{kind:"const",value:[111,114,97,111,45,118,114,102,45,110,101,116,119,111,114,107,45,99,111,110,102,105,103,117,114,97,116,105,111,110]}],program:{kind:"const",value:[7,71,177,26,250,145,180,209,249,34,242,123,14,186,193,218,178,59,33,41,164,190,243,79,50,164,123,88,245,206,252,120]}}},{name:"vrf_treasury",docs:["Orao VRF treasury (fee collector)"],writable:!0},{name:"vrf_program",docs:["Orao VRF program"],address:"VRFzZoJdhFWL8rkvu87LpKM3RbcVezpMEc6X5GVDr7y"},{name:"system_program",address:"11111111111111111111111111111111"}],args:[{name:"side",type:"u8"},{name:"vrf_seed",type:{array:["u8",32]}}]},{name:"refund",discriminator:[2,96,183,251,63,208,46,46],accounts:[{name:"lobby",writable:!0,pda:{seeds:[{kind:"const",value:[108,111,98,98,121]},{kind:"account",path:"lobby.creator",account:"Lobby"},{kind:"account",path:"lobby.lobby_id",account:"Lobby"}]}},{name:"creator",writable:!0},{name:"requester",signer:!0},{name:"active",writable:!0,pda:{seeds:[{kind:"const",value:[97,99,116,105,118,101]},{kind:"account",path:"lobby.creator",account:"Lobby"}]}},{name:"system_program",address:"11111111111111111111111111111111"}],args:[]},{name:"resolve_match",discriminator:[73,0,15,197,178,47,21,193],accounts:[{name:"lobby",writable:!0,pda:{seeds:[{kind:"const",value:[108,111,98,98,121]},{kind:"account",path:"lobby.creator",account:"Lobby"},{kind:"account",path:"lobby.lobby_id",account:"Lobby"}]}},{name:"creator",writable:!0},{name:"active",writable:!0,pda:{seeds:[{kind:"const",value:[97,99,116,105,118,101]},{kind:"account",path:"lobby.creator",account:"Lobby"}]}},{name:"vrf_request",docs:["Orao VRF randomness request account","CRITICAL: Must be owned by Orao VRF and match the saved account","This ensures randomness is provably fair and cannot be manipulated"],writable:!0},{name:"system_program",address:"11111111111111111111111111111111"}],args:[]}],D5=[{name:"ActiveLobby",discriminator:[32,130,43,176,36,236,20,114]},{name:"Lobby",discriminator:[167,194,217,163,92,92,103,49]},{name:"NetworkState",discriminator:[212,237,148,56,97,245,51,169]}],B5=[{name:"LobbyCreated",discriminator:[109,169,16,50,169,242,237,65]},{name:"LobbyRefunded",discriminator:[37,99,34,76,175,241,3,174]},{name:"LobbyResolved",discriminator:[155,179,219,168,63,242,104,137]},{name:"PlayerJoined",discriminator:[39,144,49,106,108,210,183,38]}],I5=[{code:6e3,name:"InvalidSide",msg:"Invalid side (must be 0 or 1)"},{code:6001,name:"LobbyNotOpen",msg:"Lobby is not open"},{code:6002,name:"LobbyNotOpenForJoin",msg:"Lobby already pending/resolved/refunded"},{code:6003,name:"SideFull",msg:"Side is full"},{code:6004,name:"AlreadyJoined",msg:"Player already joined"},{code:6005,name:"NotEnoughPlayers",msg:"Not enough players"},{code:6006,name:"Unauthorized",msg:"Unauthorized"},{code:6007,name:"StakeTooSmall",msg:"Stake is below minimum"},{code:6008,name:"TooSoonToRefund",msg:"Too soon to refund"},{code:6009,name:"AlreadyFinalized",msg:"Already finalized"},{code:6010,name:"BadRemainingAccounts",msg:"Bad remaining accounts length"},{code:6011,name:"InvalidTeamSize",msg:"Invalid team size (allowed: 1, 2, 5)"},{code:6012,name:"RemainingAccountsMismatch",msg:"Remaining accounts mismatch with team lists"},{code:6013,name:"NotPending",msg:"Lobby not pending"},{code:6014,name:"MustUseFinalJoin",msg:"Lobby is full - must use join_side_final instruction"},{code:6015,name:"WrongRandomnessAccount",msg:"Wrong VRF request account provided"},{code:6016,name:"InvalidRandomnessData",msg:"Invalid randomness data"},{code:6017,name:"RandomnessNotFulfilled",msg:"Randomness not yet fulfilled by Orao VRF"},{code:6018,name:"WrongVrfTreasury",msg:"Wrong VRF treasury"},{code:6019,name:"InvalidVrfSeed",msg:"Invalid VRF seed (cannot be zero)"}],L5=[{name:"ActiveLobby",type:{kind:"struct",fields:[{name:"bump",type:"u8"},{name:"creator",type:"pubkey"},{name:"lobby",type:"pubkey"}]}},{name:"Lobby",type:{kind:"struct",fields:[{name:"bump",type:"u8"},{name:"lobby_id",type:"u64"},{name:"creator",type:"pubkey"},{name:"status",type:{defined:{name:"LobbyStatus"}}},{name:"team_size",type:"u8"},{name:"stake_lamports",type:"u64"},{name:"created_at",type:"i64"},{name:"finalized",type:"bool"},{name:"vrf_seed",type:{array:["u8",32]}},{name:"vrf_request",type:"pubkey"},{name:"winner_side",type:"u8"},{name:"team1",type:{vec:"pubkey"}},{name:"team2",type:{vec:"pubkey"}},{name:"game",type:"string"},{name:"game_mode",type:"string"},{name:"arena_type",type:"string"},{name:"team_size_str",type:"string"}]}},{name:"LobbyCreated",type:{kind:"struct",fields:[{name:"lobby",type:"pubkey"},{name:"lobby_id",type:"u64"},{name:"creator",type:"pubkey"},{name:"stake_lamports",type:"u64"},{name:"team_size",type:"u8"},{name:"created_at",type:"i64"},{name:"game",type:"string"},{name:"game_mode",type:"string"},{name:"arena_type",type:"string"},{name:"team_size_str",type:"string"},{name:"creator_side",type:"u8"}]}},{name:"LobbyRefunded",type:{kind:"struct",fields:[{name:"lobby",type:"pubkey"},{name:"refunded_count",type:"u8"},{name:"total_refunded",type:"u64"}]}},{name:"LobbyResolved",type:{kind:"struct",fields:[{name:"lobby",type:"pubkey"},{name:"winner_side",type:"u8"},{name:"randomness_value",type:"u64"},{name:"total_pot",type:"u64"},{name:"platform_fee",type:"u64"},{name:"payout_per_winner",type:"u64"}]}},{name:"LobbyStatus",type:{kind:"enum",variants:[{name:"Open"},{name:"Pending"},{name:"Resolved"},{name:"Refunded"}]}},{name:"NetworkConfiguration",type:{kind:"struct",fields:[{name:"authority",type:"pubkey"},{name:"treasury",type:"pubkey"},{name:"request_fee",type:"u64"},{name:"fulfillment_authorities",type:{vec:"pubkey"}},{name:"token_fee_config",type:{option:{defined:{name:"OraoTokenFeeConfig"}}}}]}},{name:"NetworkState",type:{kind:"struct",fields:[{name:"config",type:{defined:{name:"NetworkConfiguration"}}},{name:"num_received",docs:["Total number of received requests."],type:"u64"}]}},{name:"OraoTokenFeeConfig",type:{kind:"struct",fields:[{name:"mint",docs:["ORAO token mint address."],type:"pubkey"},{name:"treasury",docs:["ORAO token treasury account."],type:"pubkey"},{name:"fee",docs:["Fee in ORAO SPL token smallest units."],type:"u64"}]}},{name:"PlayerJoined",type:{kind:"struct",fields:[{name:"lobby",type:"pubkey"},{name:"player",type:"pubkey"},{name:"side",type:"u8"},{name:"team1_count",type:"u8"},{name:"team2_count",type:"u8"},{name:"is_full",type:"bool"},{name:"vrf_request",type:"pubkey"}]}}],tc={address:O5,metadata:j5,instructions:k5,accounts:D5,events:B5,errors:I5,types:L5},z5=tc,U5={cluster:"devnet",rpcUrl:"https://api.devnet.solana.com",wsUrl:"wss://api.devnet.solana.com",programId:"F2LhVGUa9yLbYVYujYMPyckqWmsokHE9wym7ceGHWUMZ",oraoProgramId:"VRFzZoJdhFWL8rkvu87LpKM3RbcVezpMEc6X5GVDr7y"};function Rc(){return U5}function z1(){return Rc().cluster==="devnet"}function Ex(){return z1()?"Devnet":"Mainnet"}const Tx=5e7,df={CONFIG:"config",LOBBY:"lobby",ACTIVE:"active"},so=Rc();new Ze(so.programId);const H5=so.rpcUrl;tc.address&&tc.address!==so.programId&&console.warn(" Program ID mismatch: IDL vs config",{idl:tc.address,cfg:so.programId});function P5(){const s=JS();return D.useMemo(()=>{if(!s)return null;const t=new Vf(H5,{commitment:"confirmed",wsEndpoint:so.wsUrl}),a=new ao(t,s,{preflightCommitment:"confirmed",commitment:"confirmed",skipPreflight:!1});return new Pi(z5,a)},[s])}function oa(s){return s.code?{6e3:"Invalid side (must be 0 or 1)",6001:"Lobby is not open",6002:"Lobby already pending/resolved/refunded",6003:"Side is full",6004:"Player already joined",6005:"Not enough players",6006:"Unauthorized",6007:"Stake is below minimum",6008:"Too soon to refund",6009:"Already finalized",6010:"Bad remaining accounts length",6011:"Invalid team size (allowed: 1, 2, 5)",6012:"Remaining accounts mismatch with team lists",6013:"Wrong Switchboard program id",6014:"VRF account does not match lobby",6015:"VRF authority mismatch",6016:"Lobby not pending"}[s.code]||`Unknown error: ${s.code}`:s.message?s.message:"Unknown error occurred"}async function G5(s,t,a=2){const o=await s.requestAirdrop(t,a*ra);return await s.confirmTransaction(o),o}class la{static programId;static setProgramId(t){this.programId=new Ze(t)}static getProgramId(){if(!this.programId){const t=Rc();this.programId=new Ze(t.programId)}return this.programId}static getConfigPda(){return Ze.findProgramAddressSync([Buffer.from(df.CONFIG)],this.getProgramId())}static getLobbyPda(t,a){const o=typeof a=="number"?new sn(a).toArrayLike(Buffer,"le",8):a.toArrayLike(Buffer,"le",8);return Ze.findProgramAddressSync([Buffer.from(df.LOBBY),t.toBuffer(),o],this.getProgramId())}static getActiveLobbyPda(t){return Ze.findProgramAddressSync([Buffer.from(df.ACTIVE),t.toBuffer()],this.getProgramId())}}var Tn=(s=>(s.Open="open",s.Pending="pending",s.Resolved="resolved",s.Refunded="refunded",s))(Tn||{});function Ax(s){return typeof s=="string"?s:s.open!==void 0?"open":s.pending!==void 0?"pending":s.resolved!==void 0?"resolved":s.refunded!==void 0?"refunded":"open"}function $5(s){return{team1:s.team1.length,team2:s.team2.length,total:s.team1.length+s.team2.length}}function V5(s){const{total:t}=$5(s);return t>=s.teamSize*2}class ff{static async createLobby(t,a){try{return await t.methods.createLobby(new sn(a.lobbyId),a.teamSize,new sn(a.stakeLamports),a.side,a.game,a.gameMode,a.arenaType,a.teamSizeStr).accounts({creator:a.creator}).rpc({skipPreflight:!1,commitment:"confirmed"})}catch(o){console.error("Create lobby error details:",o);const l=oa(o);throw o.message?.includes("Blockhash not found")?new Error("Transaction failed: Network issue (blockhash expired). Please try again."):new Error(`Failed to create lobby: ${l}`)}}static async joinLobby(t,a){try{const o=await Jf.fetchLobby(t,a.lobbyPda);if(!o)throw new Error("Lobby not found");const l=o.team1.length+o.team2.length,r=o.teamSize*2,d=l+1===r;console.log(`[JoinLobby] Current: ${l}/${r}, Final: ${d}`);const[f]=la.getActiveLobbyPda(a.creator);if(d){console.log("[JoinLobby] Using joinSideFinal (with Orao VRF)");const g=new Uint8Array(32);crypto.getRandomValues(g);const h=Array.from(g);console.log(" [JoinLobby] Generated VRF seed:",Buffer.from(g).toString("hex"));const m=new Ze(Rc().oraoProgramId),w=Buffer.from("orao-vrf-network-configuration"),x=Buffer.from("orao-vrf-randomness-request"),[p]=Ze.findProgramAddressSync([w],m),[v]=Ze.findProgramAddressSync([x,g],m),b=await t.provider.connection.getAccountInfo(p);if(!b)throw new Error("Orao VRF not initialized on this network");const N=new Ze(b.data.slice(40,72));console.log(" [JoinLobby] Building joinSideFinal transaction with Orao VRF accounts:"),console.log("  - lobby:",a.lobbyPda.toString()),console.log("  - creator:",a.creator.toString()),console.log("  - player:",a.player.toString()),console.log("  - vrfRequest:",v.toString()," DERIVED FROM SEED"),console.log("  - vrfConfig:",p.toString()),console.log("  - vrfTreasury:",N.toString()),console.log("  - vrfProgram:",m.toString()),console.log(" [JoinLobby] Sending joinSideFinal transaction..."),console.log(" [DEBUG] Method exists?",typeof t.methods.joinSideFinal),console.log(" [DEBUG] Available methods:",Object.keys(t.methods));const _=await t.methods.joinSideFinal(a.side,h).accountsPartial({lobby:a.lobbyPda,creator:a.creator,player:a.player,active:f,vrfRequest:v,vrfConfig:p,vrfTreasury:N,vrfProgram:m,systemProgram:Kr.programId}).rpc({skipPreflight:!1,commitment:"confirmed"});return console.log(" [JoinLobby] joinSideFinal transaction sent! Signature:",_),console.log(" [JoinLobby] Orao VRF request created:",v.toString()),console.log(" [JoinLobby] Orao oracles will fulfill randomness (sub-second!), then backend resolves match"),_}else return console.log("[JoinLobby] Using join_side (simple, no VRF)"),await t.methods.joinSide(a.side).accountsPartial({lobby:a.lobbyPda,creator:a.creator,player:a.player,active:f,systemProgram:Kr.programId}).rpc({skipPreflight:!1,commitment:"confirmed"})}catch(o){console.error("Join lobby error details:",o);const l=oa(o);throw o.message?.includes("Blockhash not found")?new Error("Transaction failed: Network issue (blockhash expired). Please try again."):new Error(`Failed to join lobby: ${l}`)}}static async refundLobby(t,a){try{const[o]=la.getActiveLobbyPda(a.creator),l=a.participants.map(d=>({pubkey:d,isSigner:!1,isWritable:!0}));return await t.methods.refund().accountsStrict({lobby:a.lobbyPda,creator:a.creator,requester:a.requester,active:o,systemProgram:Kr.programId}).remainingAccounts(l).rpc({skipPreflight:!1,commitment:"confirmed"})}catch(o){console.error("Refund lobby error details:",o);const l=oa(o);throw o.message?.includes("Blockhash not found")?new Error("Transaction failed: Network issue (blockhash expired). Please try again."):new Error(`Failed to refund lobby: ${l}`)}}static async buildCreateLobbyTransaction(t,a){const o=await t.methods.createLobby(new sn(a.lobbyId),a.teamSize,new sn(a.stakeLamports),a.side,a.game,a.gameMode,a.arenaType,a.teamSizeStr).accounts({creator:a.creator}).instruction();return new Xl().add(o)}static async buildJoinLobbyTransaction(t,a){const o={creator:a.creator,player:a.player},l=await t.methods.joinSide(a.side).accounts(o).instruction();return new Xl().add(l)}static async buildRefundLobbyTransaction(t,a){const[o]=la.getActiveLobbyPda(a.creator),l=a.participants.map(f=>({pubkey:f,isSigner:!1,isWritable:!0})),r=await t.methods.refund().accounts({lobby:a.lobbyPda,creator:a.creator,requester:a.requester,active:o}).remainingAccounts(l).instruction();return new Xl().add(r)}}class Jf{static async fetchLobby(t,a){try{const o=await t.account.lobby.fetchNullable(a);return o?{...o,status:Ax(o.status)}:null}catch(o){return console.error("Failed to fetch lobby:",o),null}}static async fetchActiveLobby(t,a){try{const[o]=la.getActiveLobbyPda(a);return await t.account.activeLobby.fetchNullable(o)}catch(o){return console.error("Failed to fetch active lobby:",o),null}}static async fetchLobbies(t,a){try{return(await t.account.lobby.fetchMultiple(a)).map(l=>l?{...l,status:Ax(l.status)}:null)}catch(o){return console.error("Failed to fetch lobbies:",o),a.map(()=>null)}}}function qs(){const{publicKey:s,connected:t}=fs(),a=P5(),[o,l]=D.useState(!1),r=D.useMemo(()=>a?.provider.connection||null,[a]),d=D.useMemo(()=>a!==null&&t,[a,t]),f=D.useCallback(async(g=2)=>{if(!s||!r)throw new Error("Wallet not connected");try{return l(!0),await G5(r,s,g)}catch(h){const m=oa(h);throw new Error(m)}finally{l(!1)}},[s,r]);return{program:a,connection:r,isInitialized:d,isLoading:o,publicKey:s,connected:t,requestAirdropSOL:f}}function em(){const{program:s,isInitialized:t,publicKey:a,isLoading:o}=qs(),[l,r]=D.useState(!1),[d,f]=D.useState(!1),[g,h]=D.useState(!1),m=D.useCallback(async p=>{if(!s||!a||!t)throw new Error("Program not initialized");try{return r(!0),await ff.createLobby(s,{...p,creator:a})}catch(v){const b=oa(v);throw new Error(b)}finally{r(!1)}},[s,a,t]),w=D.useCallback(async p=>{if(!s||!a||!t)throw new Error("Program not initialized");try{return f(!0),await ff.joinLobby(s,{...p,player:a})}catch(v){const b=oa(v);if(b.toLowerCase().includes("already been processed"))return console.log("[JoinLobby] Transaction was already processed - treating as success"),"success_already_processed";throw new Error(b)}finally{f(!1)}},[s,a,t]),x=D.useCallback(async p=>{if(!s||!a||!t)throw new Error("Program not initialized");try{return h(!0),await ff.refundLobby(s,{...p,requester:a})}catch(v){const b=oa(v);throw new Error(b)}finally{h(!1)}},[s,a,t]);return{createLobby:m,joinLobby:w,refundLobby:x,isCreating:l,isJoining:d,isRefunding:g,isLoading:o||l||d||g}}function Ec(s){const{program:t,isInitialized:a}=qs(),[o,l]=D.useState(null),[r,d]=D.useState(!1),[f,g]=D.useState(null),[h,m]=D.useState(!1),w=D.useCallback(async()=>{if(!(!s||!a||!t)&&!h)try{d(!0),g(null);const p=await Jf.fetchLobby(t,s);l(p),m(!0)}catch(p){g(oa(p)),console.error("Failed to fetch lobby:",p),m(!0)}finally{d(!1)}},[s,a,t,h]);D.useEffect(()=>{w()},[s?.toString(),a]);const x=D.useCallback(async()=>{m(!1),await w()},[w]);return{lobby:o,isLoading:r,error:f,refetch:x}}function U1(){const{publicKey:s,connection:t}=qs(),[a,o]=D.useState(0),[l,r]=D.useState(!1),[d,f]=D.useState(null),g=D.useCallback(async()=>{if(!(!s||!t))try{r(!0),f(null);const h=await t.getBalance(s);o(h/ra)}catch(h){f(oa(h)),console.error("Failed to fetch balance:",h)}finally{r(!1)}},[s,t]);return D.useEffect(()=>{g()},[g]),{balance:a,isLoading:l,error:d,refetch:g}}function H1(s){var t,a,o="";if(typeof s=="string"||typeof s=="number")o+=s;else if(typeof s=="object")if(Array.isArray(s)){var l=s.length;for(t=0;t<l;t++)s[t]&&(a=H1(s[t]))&&(o&&(o+=" "),o+=a)}else for(a in s)s[a]&&(o&&(o+=" "),o+=a);return o}function F5(){for(var s,t,a=0,o="",l=arguments.length;a<l;a++)(s=arguments[a])&&(t=H1(s))&&(o&&(o+=" "),o+=t);return o}const tm="-",W5=s=>{const t=Y5(s),{conflictingClassGroups:a,conflictingClassGroupModifiers:o}=s;return{getClassGroupId:d=>{const f=d.split(tm);return f[0]===""&&f.length!==1&&f.shift(),P1(f,t)||q5(d)},getConflictingClassGroupIds:(d,f)=>{const g=a[d]||[];return f&&o[d]?[...g,...o[d]]:g}}},P1=(s,t)=>{if(s.length===0)return t.classGroupId;const a=s[0],o=t.nextPart.get(a),l=o?P1(s.slice(1),o):void 0;if(l)return l;if(t.validators.length===0)return;const r=s.join(tm);return t.validators.find(({validator:d})=>d(r))?.classGroupId},Cx=/^\[(.+)\]$/,q5=s=>{if(Cx.test(s)){const t=Cx.exec(s)[1],a=t?.substring(0,t.indexOf(":"));if(a)return"arbitrary.."+a}},Y5=s=>{const{theme:t,classGroups:a}=s,o={nextPart:new Map,validators:[]};for(const l in a)Bf(a[l],o,l,t);return o},Bf=(s,t,a,o)=>{s.forEach(l=>{if(typeof l=="string"){const r=l===""?t:Mx(t,l);r.classGroupId=a;return}if(typeof l=="function"){if(X5(l)){Bf(l(o),t,a,o);return}t.validators.push({validator:l,classGroupId:a});return}Object.entries(l).forEach(([r,d])=>{Bf(d,Mx(t,r),a,o)})})},Mx=(s,t)=>{let a=s;return t.split(tm).forEach(o=>{a.nextPart.has(o)||a.nextPart.set(o,{nextPart:new Map,validators:[]}),a=a.nextPart.get(o)}),a},X5=s=>s.isThemeGetter,Z5=s=>{if(s<1)return{get:()=>{},set:()=>{}};let t=0,a=new Map,o=new Map;const l=(r,d)=>{a.set(r,d),t++,t>s&&(t=0,o=a,a=new Map)};return{get(r){let d=a.get(r);if(d!==void 0)return d;if((d=o.get(r))!==void 0)return l(r,d),d},set(r,d){a.has(r)?a.set(r,d):l(r,d)}}},If="!",Lf=":",Q5=Lf.length,K5=s=>{const{prefix:t,experimentalParseClassName:a}=s;let o=l=>{const r=[];let d=0,f=0,g=0,h;for(let v=0;v<l.length;v++){let b=l[v];if(d===0&&f===0){if(b===Lf){r.push(l.slice(g,v)),g=v+Q5;continue}if(b==="/"){h=v;continue}}b==="["?d++:b==="]"?d--:b==="("?f++:b===")"&&f--}const m=r.length===0?l:l.substring(g),w=J5(m),x=w!==m,p=h&&h>g?h-g:void 0;return{modifiers:r,hasImportantModifier:x,baseClassName:w,maybePostfixModifierPosition:p}};if(t){const l=t+Lf,r=o;o=d=>d.startsWith(l)?r(d.substring(l.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:d,maybePostfixModifierPosition:void 0}}if(a){const l=o;o=r=>a({className:r,parseClassName:l})}return o},J5=s=>s.endsWith(If)?s.substring(0,s.length-1):s.startsWith(If)?s.substring(1):s,eT=s=>{const t=Object.fromEntries(s.orderSensitiveModifiers.map(o=>[o,!0]));return o=>{if(o.length<=1)return o;const l=[];let r=[];return o.forEach(d=>{d[0]==="["||t[d]?(l.push(...r.sort(),d),r=[]):r.push(d)}),l.push(...r.sort()),l}},tT=s=>({cache:Z5(s.cacheSize),parseClassName:K5(s),sortModifiers:eT(s),...W5(s)}),nT=/\s+/,aT=(s,t)=>{const{parseClassName:a,getClassGroupId:o,getConflictingClassGroupIds:l,sortModifiers:r}=t,d=[],f=s.trim().split(nT);let g="";for(let h=f.length-1;h>=0;h-=1){const m=f[h],{isExternal:w,modifiers:x,hasImportantModifier:p,baseClassName:v,maybePostfixModifierPosition:b}=a(m);if(w){g=m+(g.length>0?" "+g:g);continue}let N=!!b,_=o(N?v.substring(0,b):v);if(!_){if(!N){g=m+(g.length>0?" "+g:g);continue}if(_=o(v),!_){g=m+(g.length>0?" "+g:g);continue}N=!1}const A=r(x).join(":"),C=p?A+If:A,k=C+_;if(d.includes(k))continue;d.push(k);const R=l(_,N);for(let j=0;j<R.length;++j){const B=R[j];d.push(C+B)}g=m+(g.length>0?" "+g:g)}return g};function sT(){let s=0,t,a,o="";for(;s<arguments.length;)(t=arguments[s++])&&(a=G1(t))&&(o&&(o+=" "),o+=a);return o}const G1=s=>{if(typeof s=="string")return s;let t,a="";for(let o=0;o<s.length;o++)s[o]&&(t=G1(s[o]))&&(a&&(a+=" "),a+=t);return a};function iT(s,...t){let a,o,l,r=d;function d(g){const h=t.reduce((m,w)=>w(m),s());return a=tT(h),o=a.cache.get,l=a.cache.set,r=f,f(g)}function f(g){const h=o(g);if(h)return h;const m=aT(g,a);return l(g,m),m}return function(){return r(sT.apply(null,arguments))}}const $t=s=>{const t=a=>a[s]||[];return t.isThemeGetter=!0,t},$1=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,V1=/^\((?:(\w[\w-]*):)?(.+)\)$/i,rT=/^\d+\/\d+$/,oT=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,lT=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,cT=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,uT=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,dT=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Bi=s=>rT.test(s),Xe=s=>!!s&&!Number.isNaN(Number(s)),is=s=>!!s&&Number.isInteger(Number(s)),mf=s=>s.endsWith("%")&&Xe(s.slice(0,-1)),Ca=s=>oT.test(s),fT=()=>!0,mT=s=>lT.test(s)&&!cT.test(s),F1=()=>!1,hT=s=>uT.test(s),gT=s=>dT.test(s),pT=s=>!Te(s)&&!Ae(s),xT=s=>Yi(s,Y1,F1),Te=s=>$1.test(s),ks=s=>Yi(s,X1,mT),hf=s=>Yi(s,ST,Xe),Ox=s=>Yi(s,W1,F1),yT=s=>Yi(s,q1,gT),Gl=s=>Yi(s,Z1,hT),Ae=s=>V1.test(s),qr=s=>Xi(s,X1),vT=s=>Xi(s,NT),jx=s=>Xi(s,W1),bT=s=>Xi(s,Y1),wT=s=>Xi(s,q1),$l=s=>Xi(s,Z1,!0),Yi=(s,t,a)=>{const o=$1.exec(s);return o?o[1]?t(o[1]):a(o[2]):!1},Xi=(s,t,a=!1)=>{const o=V1.exec(s);return o?o[1]?t(o[1]):a:!1},W1=s=>s==="position"||s==="percentage",q1=s=>s==="image"||s==="url",Y1=s=>s==="length"||s==="size"||s==="bg-size",X1=s=>s==="length",ST=s=>s==="number",NT=s=>s==="family-name",Z1=s=>s==="shadow",_T=()=>{const s=$t("color"),t=$t("font"),a=$t("text"),o=$t("font-weight"),l=$t("tracking"),r=$t("leading"),d=$t("breakpoint"),f=$t("container"),g=$t("spacing"),h=$t("radius"),m=$t("shadow"),w=$t("inset-shadow"),x=$t("text-shadow"),p=$t("drop-shadow"),v=$t("blur"),b=$t("perspective"),N=$t("aspect"),_=$t("ease"),A=$t("animate"),C=()=>["auto","avoid","all","avoid-page","page","left","right","column"],k=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],R=()=>[...k(),Ae,Te],j=()=>["auto","hidden","clip","visible","scroll"],B=()=>["auto","contain","none"],M=()=>[Ae,Te,g],I=()=>[Bi,"full","auto",...M()],L=()=>[is,"none","subgrid",Ae,Te],P=()=>["auto",{span:["full",is,Ae,Te]},is,Ae,Te],U=()=>[is,"auto",Ae,Te],q=()=>["auto","min","max","fr",Ae,Te],H=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],V=()=>["start","end","center","stretch","center-safe","end-safe"],$=()=>["auto",...M()],Z=()=>[Bi,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...M()],Q=()=>[s,Ae,Te],F=()=>[...k(),jx,Ox,{position:[Ae,Te]}],T=()=>["no-repeat",{repeat:["","x","y","space","round"]}],O=()=>["auto","cover","contain",bT,xT,{size:[Ae,Te]}],G=()=>[mf,qr,ks],W=()=>["","none","full",h,Ae,Te],Y=()=>["",Xe,qr,ks],ee=()=>["solid","dashed","dotted","double"],de=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],re=()=>[Xe,mf,jx,Ox],ie=()=>["","none",v,Ae,Te],be=()=>["none",Xe,Ae,Te],fe=()=>["none",Xe,Ae,Te],J=()=>[Xe,Ae,Te],le=()=>[Bi,"full",...M()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Ca],breakpoint:[Ca],color:[fT],container:[Ca],"drop-shadow":[Ca],ease:["in","out","in-out"],font:[pT],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Ca],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Ca],shadow:[Ca],spacing:["px",Xe],text:[Ca],"text-shadow":[Ca],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Bi,Te,Ae,N]}],container:["container"],columns:[{columns:[Xe,Te,Ae,f]}],"break-after":[{"break-after":C()}],"break-before":[{"break-before":C()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:R()}],overflow:[{overflow:j()}],"overflow-x":[{"overflow-x":j()}],"overflow-y":[{"overflow-y":j()}],overscroll:[{overscroll:B()}],"overscroll-x":[{"overscroll-x":B()}],"overscroll-y":[{"overscroll-y":B()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:I()}],"inset-x":[{"inset-x":I()}],"inset-y":[{"inset-y":I()}],start:[{start:I()}],end:[{end:I()}],top:[{top:I()}],right:[{right:I()}],bottom:[{bottom:I()}],left:[{left:I()}],visibility:["visible","invisible","collapse"],z:[{z:[is,"auto",Ae,Te]}],basis:[{basis:[Bi,"full","auto",f,...M()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Xe,Bi,"auto","initial","none",Te]}],grow:[{grow:["",Xe,Ae,Te]}],shrink:[{shrink:["",Xe,Ae,Te]}],order:[{order:[is,"first","last","none",Ae,Te]}],"grid-cols":[{"grid-cols":L()}],"col-start-end":[{col:P()}],"col-start":[{"col-start":U()}],"col-end":[{"col-end":U()}],"grid-rows":[{"grid-rows":L()}],"row-start-end":[{row:P()}],"row-start":[{"row-start":U()}],"row-end":[{"row-end":U()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":q()}],"auto-rows":[{"auto-rows":q()}],gap:[{gap:M()}],"gap-x":[{"gap-x":M()}],"gap-y":[{"gap-y":M()}],"justify-content":[{justify:[...H(),"normal"]}],"justify-items":[{"justify-items":[...V(),"normal"]}],"justify-self":[{"justify-self":["auto",...V()]}],"align-content":[{content:["normal",...H()]}],"align-items":[{items:[...V(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...V(),{baseline:["","last"]}]}],"place-content":[{"place-content":H()}],"place-items":[{"place-items":[...V(),"baseline"]}],"place-self":[{"place-self":["auto",...V()]}],p:[{p:M()}],px:[{px:M()}],py:[{py:M()}],ps:[{ps:M()}],pe:[{pe:M()}],pt:[{pt:M()}],pr:[{pr:M()}],pb:[{pb:M()}],pl:[{pl:M()}],m:[{m:$()}],mx:[{mx:$()}],my:[{my:$()}],ms:[{ms:$()}],me:[{me:$()}],mt:[{mt:$()}],mr:[{mr:$()}],mb:[{mb:$()}],ml:[{ml:$()}],"space-x":[{"space-x":M()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":M()}],"space-y-reverse":["space-y-reverse"],size:[{size:Z()}],w:[{w:[f,"screen",...Z()]}],"min-w":[{"min-w":[f,"screen","none",...Z()]}],"max-w":[{"max-w":[f,"screen","none","prose",{screen:[d]},...Z()]}],h:[{h:["screen","lh",...Z()]}],"min-h":[{"min-h":["screen","lh","none",...Z()]}],"max-h":[{"max-h":["screen","lh",...Z()]}],"font-size":[{text:["base",a,qr,ks]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[o,Ae,hf]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",mf,Te]}],"font-family":[{font:[vT,Te,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[l,Ae,Te]}],"line-clamp":[{"line-clamp":[Xe,"none",Ae,hf]}],leading:[{leading:[r,...M()]}],"list-image":[{"list-image":["none",Ae,Te]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Ae,Te]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:Q()}],"text-color":[{text:Q()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ee(),"wavy"]}],"text-decoration-thickness":[{decoration:[Xe,"from-font","auto",Ae,ks]}],"text-decoration-color":[{decoration:Q()}],"underline-offset":[{"underline-offset":[Xe,"auto",Ae,Te]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:M()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ae,Te]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ae,Te]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:F()}],"bg-repeat":[{bg:T()}],"bg-size":[{bg:O()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},is,Ae,Te],radial:["",Ae,Te],conic:[is,Ae,Te]},wT,yT]}],"bg-color":[{bg:Q()}],"gradient-from-pos":[{from:G()}],"gradient-via-pos":[{via:G()}],"gradient-to-pos":[{to:G()}],"gradient-from":[{from:Q()}],"gradient-via":[{via:Q()}],"gradient-to":[{to:Q()}],rounded:[{rounded:W()}],"rounded-s":[{"rounded-s":W()}],"rounded-e":[{"rounded-e":W()}],"rounded-t":[{"rounded-t":W()}],"rounded-r":[{"rounded-r":W()}],"rounded-b":[{"rounded-b":W()}],"rounded-l":[{"rounded-l":W()}],"rounded-ss":[{"rounded-ss":W()}],"rounded-se":[{"rounded-se":W()}],"rounded-ee":[{"rounded-ee":W()}],"rounded-es":[{"rounded-es":W()}],"rounded-tl":[{"rounded-tl":W()}],"rounded-tr":[{"rounded-tr":W()}],"rounded-br":[{"rounded-br":W()}],"rounded-bl":[{"rounded-bl":W()}],"border-w":[{border:Y()}],"border-w-x":[{"border-x":Y()}],"border-w-y":[{"border-y":Y()}],"border-w-s":[{"border-s":Y()}],"border-w-e":[{"border-e":Y()}],"border-w-t":[{"border-t":Y()}],"border-w-r":[{"border-r":Y()}],"border-w-b":[{"border-b":Y()}],"border-w-l":[{"border-l":Y()}],"divide-x":[{"divide-x":Y()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":Y()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...ee(),"hidden","none"]}],"divide-style":[{divide:[...ee(),"hidden","none"]}],"border-color":[{border:Q()}],"border-color-x":[{"border-x":Q()}],"border-color-y":[{"border-y":Q()}],"border-color-s":[{"border-s":Q()}],"border-color-e":[{"border-e":Q()}],"border-color-t":[{"border-t":Q()}],"border-color-r":[{"border-r":Q()}],"border-color-b":[{"border-b":Q()}],"border-color-l":[{"border-l":Q()}],"divide-color":[{divide:Q()}],"outline-style":[{outline:[...ee(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Xe,Ae,Te]}],"outline-w":[{outline:["",Xe,qr,ks]}],"outline-color":[{outline:Q()}],shadow:[{shadow:["","none",m,$l,Gl]}],"shadow-color":[{shadow:Q()}],"inset-shadow":[{"inset-shadow":["none",w,$l,Gl]}],"inset-shadow-color":[{"inset-shadow":Q()}],"ring-w":[{ring:Y()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:Q()}],"ring-offset-w":[{"ring-offset":[Xe,ks]}],"ring-offset-color":[{"ring-offset":Q()}],"inset-ring-w":[{"inset-ring":Y()}],"inset-ring-color":[{"inset-ring":Q()}],"text-shadow":[{"text-shadow":["none",x,$l,Gl]}],"text-shadow-color":[{"text-shadow":Q()}],opacity:[{opacity:[Xe,Ae,Te]}],"mix-blend":[{"mix-blend":[...de(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":de()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Xe]}],"mask-image-linear-from-pos":[{"mask-linear-from":re()}],"mask-image-linear-to-pos":[{"mask-linear-to":re()}],"mask-image-linear-from-color":[{"mask-linear-from":Q()}],"mask-image-linear-to-color":[{"mask-linear-to":Q()}],"mask-image-t-from-pos":[{"mask-t-from":re()}],"mask-image-t-to-pos":[{"mask-t-to":re()}],"mask-image-t-from-color":[{"mask-t-from":Q()}],"mask-image-t-to-color":[{"mask-t-to":Q()}],"mask-image-r-from-pos":[{"mask-r-from":re()}],"mask-image-r-to-pos":[{"mask-r-to":re()}],"mask-image-r-from-color":[{"mask-r-from":Q()}],"mask-image-r-to-color":[{"mask-r-to":Q()}],"mask-image-b-from-pos":[{"mask-b-from":re()}],"mask-image-b-to-pos":[{"mask-b-to":re()}],"mask-image-b-from-color":[{"mask-b-from":Q()}],"mask-image-b-to-color":[{"mask-b-to":Q()}],"mask-image-l-from-pos":[{"mask-l-from":re()}],"mask-image-l-to-pos":[{"mask-l-to":re()}],"mask-image-l-from-color":[{"mask-l-from":Q()}],"mask-image-l-to-color":[{"mask-l-to":Q()}],"mask-image-x-from-pos":[{"mask-x-from":re()}],"mask-image-x-to-pos":[{"mask-x-to":re()}],"mask-image-x-from-color":[{"mask-x-from":Q()}],"mask-image-x-to-color":[{"mask-x-to":Q()}],"mask-image-y-from-pos":[{"mask-y-from":re()}],"mask-image-y-to-pos":[{"mask-y-to":re()}],"mask-image-y-from-color":[{"mask-y-from":Q()}],"mask-image-y-to-color":[{"mask-y-to":Q()}],"mask-image-radial":[{"mask-radial":[Ae,Te]}],"mask-image-radial-from-pos":[{"mask-radial-from":re()}],"mask-image-radial-to-pos":[{"mask-radial-to":re()}],"mask-image-radial-from-color":[{"mask-radial-from":Q()}],"mask-image-radial-to-color":[{"mask-radial-to":Q()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":k()}],"mask-image-conic-pos":[{"mask-conic":[Xe]}],"mask-image-conic-from-pos":[{"mask-conic-from":re()}],"mask-image-conic-to-pos":[{"mask-conic-to":re()}],"mask-image-conic-from-color":[{"mask-conic-from":Q()}],"mask-image-conic-to-color":[{"mask-conic-to":Q()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:F()}],"mask-repeat":[{mask:T()}],"mask-size":[{mask:O()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Ae,Te]}],filter:[{filter:["","none",Ae,Te]}],blur:[{blur:ie()}],brightness:[{brightness:[Xe,Ae,Te]}],contrast:[{contrast:[Xe,Ae,Te]}],"drop-shadow":[{"drop-shadow":["","none",p,$l,Gl]}],"drop-shadow-color":[{"drop-shadow":Q()}],grayscale:[{grayscale:["",Xe,Ae,Te]}],"hue-rotate":[{"hue-rotate":[Xe,Ae,Te]}],invert:[{invert:["",Xe,Ae,Te]}],saturate:[{saturate:[Xe,Ae,Te]}],sepia:[{sepia:["",Xe,Ae,Te]}],"backdrop-filter":[{"backdrop-filter":["","none",Ae,Te]}],"backdrop-blur":[{"backdrop-blur":ie()}],"backdrop-brightness":[{"backdrop-brightness":[Xe,Ae,Te]}],"backdrop-contrast":[{"backdrop-contrast":[Xe,Ae,Te]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Xe,Ae,Te]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Xe,Ae,Te]}],"backdrop-invert":[{"backdrop-invert":["",Xe,Ae,Te]}],"backdrop-opacity":[{"backdrop-opacity":[Xe,Ae,Te]}],"backdrop-saturate":[{"backdrop-saturate":[Xe,Ae,Te]}],"backdrop-sepia":[{"backdrop-sepia":["",Xe,Ae,Te]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":M()}],"border-spacing-x":[{"border-spacing-x":M()}],"border-spacing-y":[{"border-spacing-y":M()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Ae,Te]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Xe,"initial",Ae,Te]}],ease:[{ease:["linear","initial",_,Ae,Te]}],delay:[{delay:[Xe,Ae,Te]}],animate:[{animate:["none",A,Ae,Te]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[b,Ae,Te]}],"perspective-origin":[{"perspective-origin":R()}],rotate:[{rotate:be()}],"rotate-x":[{"rotate-x":be()}],"rotate-y":[{"rotate-y":be()}],"rotate-z":[{"rotate-z":be()}],scale:[{scale:fe()}],"scale-x":[{"scale-x":fe()}],"scale-y":[{"scale-y":fe()}],"scale-z":[{"scale-z":fe()}],"scale-3d":["scale-3d"],skew:[{skew:J()}],"skew-x":[{"skew-x":J()}],"skew-y":[{"skew-y":J()}],transform:[{transform:[Ae,Te,"","none","gpu","cpu"]}],"transform-origin":[{origin:R()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:le()}],"translate-x":[{"translate-x":le()}],"translate-y":[{"translate-y":le()}],"translate-z":[{"translate-z":le()}],"translate-none":["translate-none"],accent:[{accent:Q()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:Q()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ae,Te]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":M()}],"scroll-mx":[{"scroll-mx":M()}],"scroll-my":[{"scroll-my":M()}],"scroll-ms":[{"scroll-ms":M()}],"scroll-me":[{"scroll-me":M()}],"scroll-mt":[{"scroll-mt":M()}],"scroll-mr":[{"scroll-mr":M()}],"scroll-mb":[{"scroll-mb":M()}],"scroll-ml":[{"scroll-ml":M()}],"scroll-p":[{"scroll-p":M()}],"scroll-px":[{"scroll-px":M()}],"scroll-py":[{"scroll-py":M()}],"scroll-ps":[{"scroll-ps":M()}],"scroll-pe":[{"scroll-pe":M()}],"scroll-pt":[{"scroll-pt":M()}],"scroll-pr":[{"scroll-pr":M()}],"scroll-pb":[{"scroll-pb":M()}],"scroll-pl":[{"scroll-pl":M()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ae,Te]}],fill:[{fill:["none",...Q()]}],"stroke-w":[{stroke:[Xe,qr,ks,hf]}],stroke:[{stroke:["none",...Q()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},RT=iT(_T);function Nt(...s){return RT(F5(s))}const Se=ve.forwardRef(({className:s,variant:t="neon",size:a="md",glow:o=!0,breathing:l=!1,isLoading:r=!1,leftIcon:d,rightIcon:f,children:g,disabled:h,...m},w)=>{const x="inline-flex items-center justify-center font-medium rounded-2xl transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed relative overflow-hidden",p={neon:"bg-gradient-to-r from-sol-purple to-sol-mint text-white font-semibold hover:scale-105",glass:"glass-card text-txt-base font-medium hover:bg-white/10",ghost:"bg-transparent text-txt-base font-medium hover:bg-white/5",purple:"bg-gradient-to-r from-purple-600 to-purple-800 text-white font-semibold hover:scale-105",mint:"bg-gradient-to-r from-green-400 to-emerald-600 text-white font-semibold hover:scale-105",orange:"bg-gradient-to-r from-orange-500 to-red-500 text-white font-semibold hover:scale-105",blue:"bg-gradient-to-r from-blue-500 to-cyan-500 text-white font-semibold hover:scale-105"},v={sm:"px-4 py-2 text-sm",md:"px-6 py-3 text-base",lg:"px-8 py-4 text-lg"},b=o?"shadow-glow hover:shadow-glow-strong":"",N=l?"animate-pulse-breath":"";return u.jsxs("button",{className:Nt(x,p[t],v[a],b,N,s),ref:w,disabled:h||r,...m,children:[r&&u.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[u.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),u.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),!r&&d&&u.jsx("span",{className:"mr-2",children:d}),g,!r&&f&&u.jsx("span",{className:"ml-2",children:f}),t==="neon"&&u.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-sol-purple to-sol-mint opacity-0 hover:opacity-20 transition-opacity duration-300 rounded-2xl"})]})});Se.displayName="GlowButton";const Le=ve.forwardRef(({className:s,variant:t="default",padding:a="md",hover:o=!1,glow:l=!1,children:r,...d},f)=>{const g="rounded-xl border transition-all duration-300",h={default:"glass-card",glow:"glass-card-glow","neon-border":"neon-border glass-card"},m={none:"p-0",sm:"p-3",md:"p-4",lg:"p-6"},w=o?"hover:shadow-glow hover:scale-[1.02] cursor-pointer":"",x=l?"shadow-glow":"";return u.jsx("div",{className:Nt(g,h[t],m[a],w,x,s),ref:f,...d,children:r})});Le.displayName="GlassCard";const Ht=ve.forwardRef(({className:s,...t},a)=>u.jsx("div",{ref:a,className:Nt("flex flex-col space-y-1.5 pb-4",s),...t}));Ht.displayName="GlassCardHeader";const Pt=ve.forwardRef(({className:s,...t},a)=>u.jsx("h3",{ref:a,className:Nt("text-lg font-semibold leading-none tracking-tight text-txt-base",s),...t}));Pt.displayName="GlassCardTitle";const ET=ve.forwardRef(({className:s,...t},a)=>u.jsx("p",{ref:a,className:Nt("text-sm text-txt-muted",s),...t}));ET.displayName="GlassCardDescription";const Zi=ve.forwardRef(({className:s,...t},a)=>u.jsx("div",{ref:a,className:Nt("",s),...t}));Zi.displayName="GlassCardContent";const TT=ve.forwardRef(({className:s,...t},a)=>u.jsx("div",{ref:a,className:Nt("flex items-center pt-4",s),...t}));TT.displayName="GlassCardFooter";function AT({title:s,titleId:t,...a},o){return D.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":t},a),s?D.createElement("title",{id:t},s):null,D.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"}))}const kx=D.forwardRef(AT);function CT({title:s,titleId:t,...a},o){return D.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":t},a),s?D.createElement("title",{id:t},s):null,D.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const Dx=D.forwardRef(CT);function MT({title:s,titleId:t,...a},o){return D.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":t},a),s?D.createElement("title",{id:t},s):null,D.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"}))}const OT=D.forwardRef(MT);function jT({title:s,titleId:t,...a},o){return D.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":t},a),s?D.createElement("title",{id:t},s):null,D.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"}))}const kT=D.forwardRef(jT);function DT({title:s,titleId:t,...a},o){return D.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":t},a),s?D.createElement("title",{id:t},s):null,D.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const Q1=D.forwardRef(DT);function BT({title:s,titleId:t,...a},o){return D.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":t},a),s?D.createElement("title",{id:t},s):null,D.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v12m-3-2.818.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const Tc=D.forwardRef(BT);function IT({title:s,titleId:t,...a},o){return D.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":t},a),s?D.createElement("title",{id:t},s):null,D.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"}))}const LT=D.forwardRef(IT);function zT({title:s,titleId:t,...a},o){return D.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":t},a),s?D.createElement("title",{id:t},s):null,D.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z"}))}const UT=D.forwardRef(zT);function HT({title:s,titleId:t,...a},o){return D.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":t},a),s?D.createElement("title",{id:t},s):null,D.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))}const K1=D.forwardRef(HT);function PT({title:s,titleId:t,...a},o){return D.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":t},a),s?D.createElement("title",{id:t},s):null,D.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))}const GT=D.forwardRef(PT);function $T({title:s,titleId:t,...a},o){return D.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":t},a),s?D.createElement("title",{id:t},s):null,D.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const VT=D.forwardRef($T);function FT({title:s,titleId:t,...a},o){return D.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":t},a),s?D.createElement("title",{id:t},s):null,D.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.48 3.499a.562.562 0 0 1 1.04 0l2.125 5.111a.563.563 0 0 0 .475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 0 0-.182.557l1.285 5.385a.562.562 0 0 1-.84.61l-4.725-2.885a.562.562 0 0 0-.586 0L6.982 20.54a.562.562 0 0 1-.84-.61l1.285-5.386a.562.562 0 0 0-.182-.557l-4.204-3.602a.562.562 0 0 1 .321-.988l5.518-.442a.563.563 0 0 0 .475-.345L11.48 3.5Z"}))}const WT=D.forwardRef(FT);function qT({title:s,titleId:t,...a},o){return D.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":t},a),s?D.createElement("title",{id:t},s):null,D.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 18.75h-9m9 0a3 3 0 0 1 3 3h-15a3 3 0 0 1 3-3m9 0v-3.375c0-.621-.503-1.125-1.125-1.125h-.871M7.5 18.75v-3.375c0-.621.504-1.125 1.125-1.125h.872m5.007 0H9.497m5.007 0a7.454 7.454 0 0 1-.982-3.172M9.497 14.25a7.454 7.454 0 0 0 .981-3.172M5.25 4.236c-.982.143-1.954.317-2.916.52A6.003 6.003 0 0 0 7.73 9.728M5.25 4.236V4.5c0 2.108.966 3.99 2.48 5.228M5.25 4.236V2.721C7.456 2.41 9.71 2.25 12 2.25c2.291 0 4.545.16 6.75.47v1.516M7.73 9.728a6.726 6.726 0 0 0 2.748 1.35m8.272-6.842V4.5c0 2.108-.966 3.99-2.48 5.228m2.48-5.492a46.32 46.32 0 0 1 2.916.52 6.003 6.003 0 0 1-5.395 4.972m0 0a6.726 6.726 0 0 1-2.749 1.35m0 0a6.772 6.772 0 0 1-3.044 0"}))}const Vs=D.forwardRef(qT);function YT({title:s,titleId:t,...a},o){return D.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":t},a),s?D.createElement("title",{id:t},s):null,D.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"}))}const J1=D.forwardRef(YT);function XT({title:s,titleId:t,...a},o){return D.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":t},a),s?D.createElement("title",{id:t},s):null,D.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"}))}const ZT=D.forwardRef(XT);function QT({title:s,titleId:t,...a},o){return D.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":t},a),s?D.createElement("title",{id:t},s):null,D.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a2.25 2.25 0 0 0-2.25-2.25H15a3 3 0 1 1-6 0H5.25A2.25 2.25 0 0 0 3 12m18 0v6a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 18v-6m18 0V9M3 12V9m18 0a2.25 2.25 0 0 0-2.25-2.25H5.25A2.25 2.25 0 0 0 3 9m18 0V6a2.25 2.25 0 0 0-2.25-2.25H5.25A2.25 2.25 0 0 0 3 6v3"}))}const KT=D.forwardRef(QT);function JT({title:s,titleId:t,...a},o){return D.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":t},a),s?D.createElement("title",{id:t},s):null,D.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const io=D.forwardRef(JT),eA=({message:s,type:t="error",duration:a=5e3,onClose:o})=>{const[l,r]=D.useState(!0);D.useEffect(()=>{const f=setTimeout(()=>{r(!1),setTimeout(o,300)},a);return()=>clearTimeout(f)},[a,o]);const d=()=>{switch(t){case"error":return"bg-red-500/90 text-white border-red-400";case"success":return"bg-green-500/90 text-white border-green-400";case"info":return"bg-blue-500/90 text-white border-blue-400";default:return"bg-red-500/90 text-white border-red-400"}};return u.jsx($n,{children:l&&u.jsx(ye.div,{initial:{opacity:0,y:-50,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-50,scale:.9},transition:{duration:.3,ease:"easeOut"},className:`fixed top-4 left-1/2 transform -translate-x-1/2 z-50 px-4 py-3 rounded-lg border shadow-lg backdrop-blur-sm ${d()}`,children:u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx("span",{className:"text-sm font-medium",children:s}),u.jsx("button",{onClick:()=>{r(!1),setTimeout(o,300)},className:"text-white/80 hover:text-white transition-colors",children:u.jsx(io,{className:"w-4 h-4"})})]})})})},tA=({className:s=""})=>{const t=ka(),{connected:a,connecting:o,wallets:l,user:r,connect:d,disconnect:f}=Oy(),{balance:g,refetch:h}=U1(),[m,w]=D.useState(!1),[x,p]=D.useState(!1),[v,b]=D.useState(!1);D.useEffect(()=>{a&&h()},[a,h]),D.useEffect(()=>{if(!a)return;const C=setInterval(()=>{h()},3e4);return()=>clearInterval(C)},[a,h]),D.useEffect(()=>{if(m){const C=window.scrollY;return document.body.style.position="fixed",document.body.style.top=`-${C}px`,document.body.style.width="100%",document.body.style.overflow="hidden",()=>{document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,C)}}},[m]);const N=()=>{a?p(!x):w(!0)},_=C=>{d(C),w(!1)};ve.useEffect(()=>{r.error&&b(!0)},[r.error]);const A=()=>{f(),p(!1)};return a&&r.profile?u.jsxs("div",{className:`relative ${s}`,children:[u.jsxs("button",{onClick:N,className:"flex items-center gap-3 px-4 py-1.5 border border-sol-purple rounded-lg bg-bg/80 backdrop-blur-sm shadow-glow-purple hover:shadow-glow-strong transition-all duration-300",children:[u.jsxs("div",{className:"flex flex-col min-w-0 flex-1 overflow-hidden text-left",children:[u.jsx("span",{className:"text-sm font-medium text-txt-base truncate",title:r.profile.username||"Loading...",children:r.profile.username||"Loading..."}),u.jsxs("span",{className:"text-xs text-txt-muted truncate",children:[g.toFixed(2)," SOL"]})]}),u.jsx(kT,{className:"w-4 h-4 text-sol-purple"})]}),x&&u.jsx("div",{className:"absolute top-full right-0 mt-2 w-64 z-50",children:u.jsx(Le,{className:"p-2 bg-bg/95 backdrop-blur-lg",children:u.jsxs("div",{className:"space-y-1",children:[u.jsxs("button",{onClick:()=>{t(Et.PROFILE),p(!1)},className:"w-full flex items-center gap-3 px-3 py-2 text-left hover:bg-white/10 rounded-lg transition-colors",children:[u.jsx(ZT,{className:"w-4 h-4 text-sol-purple"}),u.jsx("span",{className:"text-txt-base",children:"View Profile"})]}),u.jsxs("button",{onClick:A,className:"w-full flex items-center gap-3 px-3 py-2 text-left hover:bg-red-500/20 rounded-lg transition-colors",children:[u.jsx(io,{className:"w-4 h-4 text-red-400"}),u.jsx("span",{className:"text-red-400",children:"Disconnect"})]})]})})})]}):u.jsxs(u.Fragment,{children:[u.jsxs(Se,{variant:"neon",onClick:N,disabled:o||r.isLoading,className:`flex items-center gap-2 px-3 py-2 text-sm ${s}`,children:[u.jsx(KT,{className:"w-5 h-5"}),o||r.isLoading?"Connecting...":"Connect Wallet"]}),m&&typeof document<"u"&&Pf.createPortal(u.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-start justify-center z-[50] p-2 pt-[15%] md:pt-[10%]",onClick:C=>{C.target===C.currentTarget&&w(!1)},children:u.jsxs(Le,{className:"p-4 w-full max-w-md mx-4",onClick:C=>{C.stopPropagation()},children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h3",{className:"text-lg font-display font-bold text-sol-purple",children:"Connect Wallet"}),u.jsx("button",{onClick:()=>w(!1),className:"text-txt-muted hover:text-txt-base transition-colors",children:u.jsx(io,{className:"w-6 h-6"})})]}),u.jsx("div",{className:"space-y-2",children:l.map(C=>u.jsxs("button",{onClick:()=>_(C.adapter.name),className:"w-full flex items-center gap-3 p-3 glass-card hover:bg-white/10 rounded-lg transition-colors",children:[u.jsx("img",{src:C.adapter.icon,alt:C.adapter.name,className:"w-8 h-8"}),u.jsxs("div",{className:"flex-1 text-left",children:[u.jsx("div",{className:"font-medium text-txt-base",children:C.adapter.name}),u.jsx("div",{className:"text-sm text-txt-muted",children:C.readyState==="Installed"?"Ready":"Not Installed"})]}),C.readyState==="Installed"&&u.jsx(OT,{className:"w-5 h-5 text-sol-mint"})]},C.adapter.name))}),l.length===0&&u.jsx("div",{className:"text-center py-8 text-txt-muted",children:"No wallets available. Please install Phantom wallet."})]})}),document.body),v&&r.error&&u.jsx(eA,{message:r.error,type:"error",onClose:()=>b(!1)})]})},Bx=s=>{let t;const a=new Set,o=(h,m)=>{const w=typeof h=="function"?h(t):h;if(!Object.is(w,t)){const x=t;t=m??(typeof w!="object"||w===null)?w:Object.assign({},t,w),a.forEach(p=>p(t,x))}},l=()=>t,f={setState:o,getState:l,getInitialState:()=>g,subscribe:h=>(a.add(h),()=>a.delete(h))},g=t=s(o,l,f);return f},nA=(s=>s?Bx(s):Bx),aA=s=>s;function sA(s,t=aA){const a=ve.useSyncExternalStore(s.subscribe,ve.useCallback(()=>t(s.getState()),[s,t]),ve.useCallback(()=>t(s.getInitialState()),[s,t]));return ve.useDebugValue(a),a}const Ix=s=>{const t=nA(s),a=o=>sA(t,o);return Object.assign(a,t),a},eb=(s=>s?Ix(s):Ix),Ys=eb((s,t)=>({feed:[],matches:[],joinModalMatchId:null,isLoading:!1,error:null,setJoinModal:a=>{s({joinModalMatchId:a})},addFeedItem:a=>{const{feed:o}=t(),l=[a,...o].slice(0,50);s({feed:l})},setFeed:a=>{s({feed:a})},addFeedItemToTop:a=>{const{feed:o}=t();if(!o.some(r=>r.id===a.id)){const r=[a,...o].slice(0,50);s({feed:r})}},clearFeed:()=>{s({feed:[]})},upsertMatches:a=>{const{matches:o}=t(),l=new Set(o.map(f=>f.id)),r=a.filter(f=>!l.has(f.id)),d=o.map(f=>a.find(h=>h.id===f.id)||f);s({matches:[...d,...r]})},updateMatch:a=>{const{matches:o}=t(),l=o.map(r=>r.id===a.id?a:r);s({matches:l})},addMatch:a=>{const{matches:o}=t();o.some(r=>r.id===a.id)||s({matches:[a,...o]})},removeMatch:a=>{const{matches:o}=t(),l=o.filter(r=>r.id!==a);s({matches:l})},clearMatches:()=>{s({matches:[]})},setLoading:a=>{s({isLoading:a})},setError:a=>{s({error:a})}})),iA=({className:s="",speed:t=230,pauseOnHover:a=!0})=>{const o=D.useRef(null),l=US(),{feed:r}=Ys(),d=D.useMemo(()=>{console.log("[Ticker] Feed items:",r);const h=r.map(m=>{console.log("[Ticker] Processing item:",m),console.log("[Ticker] Username:",m.username);const w=m.username&&m.username.length>12?m.username.substring(0,12)+"...":m.username,x=m.matchType!=="OneVOne"&&m.matchType!=="Solo"?` (Team ${m.winnerSide+1})`:"";return{id:m.id,text:`${w}${x} won ${m.solAmount.toFixed(2)} SOL`,type:"win"}});return h.length>0?h:[{id:"placeholder",text:"Welcome to Solana PvP Arena - Live matches will appear here",type:"info"}]},[r]),f=D.useRef(d);D.useEffect(()=>{f.current=d},[d]),D.useEffect(()=>{if(o.current&&r.length>0){const h=o.current.scrollWidth/3,m=h/50;l.start({x:[0,-h],transition:{duration:m,ease:"linear",repeat:1/0,repeatType:"loop"}})}},[l,r]);const g=[...f.current,...f.current,...f.current];return u.jsx("div",{className:`w-full z-40 bg-bg/80 backdrop-blur-sm border-t border-b border-white/10 ${s}`,children:u.jsx("div",{className:"overflow-hidden py-1",children:u.jsx(ye.div,{ref:o,animate:l,className:"flex whitespace-nowrap",style:{width:"fit-content"},children:g.map((h,m)=>u.jsx("div",{className:"ticker-item mr-8 flex-shrink-0",children:u.jsx("span",{className:`inline-flex items-center text-sm ${h.type==="win"?"text-sol-mint":h.type==="join"?"text-sol-purple":"text-txt-muted"}`,children:h.text})},`${h.id}-${m}`))})})})},rA=()=>{const s=Gf(),t=[{name:"Home",href:Et.HOME},{name:"Arena",href:Et.MATCHES},{name:"Leaderboard",href:Et.LEADERBOARD}],a=l=>s.pathname===l,o=()=>{const l=s.pathname;return l==="/"||l==="/matches"||l==="/leaderboard"};return u.jsxs("header",{className:"bg-bg/95 backdrop-blur-lg border-b border-white/10 sticky top-0 z-40",style:{WebkitTransform:"translateZ(0)",willChange:"transform"},children:[u.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:u.jsxs("div",{className:"flex justify-between items-center h-16",children:[u.jsx("div",{className:"flex items-center",children:u.jsxs(wf,{to:Et.HOME,className:"flex items-center space-x-2 group",children:[u.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-sol-purple to-sol-mint rounded-lg flex items-center justify-center shadow-glow group-hover:shadow-glow-strong transition-all duration-300",children:u.jsx("span",{className:"text-white font-bold text-lg",children:"S"})}),u.jsx("span",{className:"text-xl font-display font-bold text-txt-base group-hover:text-sol-purple transition-colors",children:"SolanaPvP"})]})}),u.jsx("nav",{className:"hidden md:flex space-x-2",children:t.map(l=>u.jsx(wf,{to:l.href,className:`px-4 py-2 rounded-xl text-sm font-medium transition-all duration-300 ${a(l.href)?"bg-sol-purple/20 text-sol-purple shadow-glow-purple":"text-txt-muted hover:text-txt-base hover:bg-white/5"}`,children:l.name},l.name))}),u.jsx("div",{className:"flex items-center space-x-4",children:u.jsx(tA,{})})]})}),o()&&u.jsx(iA,{className:"py-1"})]})},oA=({size:s="sm",showFullName:t=!1,className:a="",showOnMainnet:o=!1})=>{const l=z1();if(!l&&!o)return null;const r={xs:"text-[10px] px-1.5 py-0.5",sm:"text-xs px-2 py-0.5",md:"text-sm px-3 py-1"},d=t?Ex():l?"(devnet)":"(mainnet)",f=l?"text-sol-mint bg-sol-mint/10 border-sol-mint/20":"text-sol-purple bg-sol-purple/10 border-sol-purple/20";return u.jsx("span",{className:`
        font-semibold rounded-md border
        ${r[s]}
        ${f}
        ${a}
      `,title:`Network: ${Ex()}`,children:d})},lA=()=>u.jsx("footer",{className:"bg-bg/95 backdrop-blur-lg border-t border-white/10",children:u.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[u.jsxs("div",{className:"col-span-1 md:col-span-2 order-3 md:order-1",children:[u.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[u.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-sol-purple to-sol-mint rounded-lg flex items-center justify-center shadow-glow",children:u.jsx("span",{className:"text-white font-bold text-lg",children:"S"})}),u.jsxs("div",{className:"flex items-baseline space-x-1.5",children:[u.jsx("span",{className:"text-xl font-display font-bold text-txt-base",children:"SolanaPvP"}),u.jsx(oA,{})]})]}),u.jsx("p",{className:"text-txt-muted text-sm max-w-md",children:"The ultimate PvP gaming platform on Solana. Compete, earn, and climb the leaderboards in exciting card and chest selection games."}),u.jsxs("div",{className:"mt-4 text-sm text-txt-muted",children:[u.jsx("span",{className:"text-sol-mint font-semibold",children:"Smart-contract on Solana"}),u.jsx("span",{className:"mx-2",children:""}),u.jsx("span",{className:"text-sol-purple font-semibold",children:"Verified"})]})]}),u.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-2 gap-6 md:gap-3 order-1 md:order-1",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-sm font-semibold text-txt-base uppercase tracking-wider mb-4",children:"Quick Links"}),u.jsxs("ul",{className:"space-y-2",children:[u.jsx("li",{children:u.jsx("a",{href:"/matches",className:"text-txt-muted hover:text-sol-purple text-sm transition-colors",children:"Active Matches"})}),u.jsx("li",{children:u.jsx("a",{href:"/leaderboard",className:"text-txt-muted hover:text-sol-purple text-sm transition-colors",children:"Leaderboard"})}),u.jsx("li",{children:u.jsx("a",{href:"/profile",className:"text-txt-muted hover:text-sol-purple text-sm transition-colors",children:"Profile"})})]})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-sm font-semibold text-txt-base uppercase tracking-wider mb-4",children:"Support"}),u.jsxs("ul",{className:"space-y-2",children:[u.jsx("li",{children:u.jsx("a",{href:"#",className:"text-txt-muted hover:text-sol-mint text-sm transition-colors",children:"Help Center"})}),u.jsx("li",{children:u.jsx("a",{href:"#",className:"text-txt-muted hover:text-sol-mint text-sm transition-colors",children:"Contact Us"})}),u.jsx("li",{children:u.jsx("a",{href:"#",className:"text-txt-muted hover:text-sol-mint text-sm transition-colors",children:"Bug Report"})})]})]})]})]}),u.jsx("div",{className:"mt-8 pt-8 border-t border-white/10",children:u.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[u.jsx("p",{className:"text-txt-muted text-sm mb-5 md:mb-0 -mt-5 md:mt-0",children:" 2024 SolanaPvP. All rights reserved."}),u.jsxs("div",{className:"flex space-x-6 mt-4 md:mt-0",children:[u.jsxs("a",{href:"#",className:"text-txt-muted hover:text-sol-purple transition-colors",children:[u.jsx("span",{className:"sr-only",children:"Twitter"}),u.jsx("svg",{className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20",children:u.jsx("path",{d:"M6.29 18.251c7.547 0 11.675-6.253 11.675-11.675 0-.178 0-.355-.012-.53A8.348 8.348 0 0020 3.92a8.19 8.19 0 01-2.357.646 4.118 4.118 0 001.804-2.27 8.224 8.224 0 01-2.605.996 4.107 4.107 0 00-6.993 3.743 11.65 11.65 0 01-8.457-4.287 4.106 4.106 0 001.27 5.477A4.073 4.073 0 01.8 7.713v.052a4.105 4.105 0 003.292 4.022 4.095 4.095 0 01-1.853.07 4.108 4.108 0 003.834 2.85A8.233 8.233 0 010 16.407a11.616 11.616 0 006.29 1.84"})})]}),u.jsxs("a",{href:"#",className:"text-txt-muted hover:text-sol-mint transition-colors",children:[u.jsx("span",{className:"sr-only",children:"GitHub"}),u.jsx("svg",{className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20",children:u.jsx("path",{fillRule:"evenodd",d:"M10 0C4.477 0 0 4.484 0 10.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0110 4.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.203 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.942.359.31.678.921.678 1.856 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0020 10.017C20 4.484 15.522 0 10 0z",clipRule:"evenodd"})})]})]})]})})]})});function cA({title:s,titleId:t,...a},o){return D.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":t},a),s?D.createElement("title",{id:t},s):null,D.createElement("path",{d:"M11.47 3.841a.75.75 0 0 1 1.06 0l8.69 8.69a.75.75 0 1 0 1.06-1.061l-8.689-8.69a2.25 2.25 0 0 0-3.182 0l-8.69 8.69a.75.75 0 1 0 1.061 1.06l8.69-8.689Z"}),D.createElement("path",{d:"m12 5.432 8.159 8.159c.03.03.06.058.091.086v6.198c0 1.035-.84 1.875-1.875 1.875H15a.75.75 0 0 1-.75-.75v-4.5a.75.75 0 0 0-.75-.75h-3a.75.75 0 0 0-.75.75V21a.75.75 0 0 1-.75.75H5.625a1.875 1.875 0 0 1-1.875-1.875v-6.198a2.29 2.29 0 0 0 .091-.086L12 5.432Z"}))}const uA=D.forwardRef(cA);function dA({title:s,titleId:t,...a},o){return D.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":t},a),s?D.createElement("title",{id:t},s):null,D.createElement("path",{fillRule:"evenodd",d:"M5.166 2.621v.858c-1.035.148-2.059.33-3.071.543a.75.75 0 0 0-.584.859 6.753 6.753 0 0 0 6.138 5.6 6.73 6.73 0 0 0 2.743 1.346A6.707 6.707 0 0 1 9.279 15H8.54c-1.036 0-1.875.84-1.875 1.875V19.5h-.75a2.25 2.25 0 0 0-2.25 2.25c0 .414.336.75.75.75h15a.75.75 0 0 0 .75-.75 2.25 2.25 0 0 0-2.25-2.25h-.75v-2.625c0-1.036-.84-1.875-1.875-1.875h-.739a6.706 6.706 0 0 1-1.112-3.173 6.73 6.73 0 0 0 2.743-1.347 6.753 6.753 0 0 0 6.139-5.6.75.75 0 0 0-.585-.858 47.077 47.077 0 0 0-3.07-.543V2.62a.75.75 0 0 0-.658-.744 49.22 49.22 0 0 0-6.093-.377c-2.063 0-4.096.128-6.093.377a.75.75 0 0 0-.657.744Zm0 2.629c0 1.196.312 2.32.857 3.294A5.266 5.266 0 0 1 3.16 5.337a45.6 45.6 0 0 1 2.006-.343v.256Zm13.5 0v-.256c.674.1 1.343.214 2.006.343a5.265 5.265 0 0 1-2.863 3.207 6.72 6.72 0 0 0 .857-3.294Z",clipRule:"evenodd"}))}const fA=D.forwardRef(dA);function mA({title:s,titleId:t,...a},o){return D.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":t},a),s?D.createElement("title",{id:t},s):null,D.createElement("path",{fillRule:"evenodd",d:"M8.25 6.75a3.75 3.75 0 1 1 7.5 0 3.75 3.75 0 0 1-7.5 0ZM15.75 9.75a3 3 0 1 1 6 0 3 3 0 0 1-6 0ZM2.25 9.75a3 3 0 1 1 6 0 3 3 0 0 1-6 0ZM6.31 15.117A6.745 6.745 0 0 1 12 12a6.745 6.745 0 0 1 6.709 7.498.75.75 0 0 1-.372.568A12.696 12.696 0 0 1 12 21.75c-2.305 0-4.47-.612-6.337-1.684a.75.75 0 0 1-.372-.568 6.787 6.787 0 0 1 1.019-4.38Z",clipRule:"evenodd"}),D.createElement("path",{d:"M5.082 14.254a8.287 8.287 0 0 0-1.308 5.135 9.687 9.687 0 0 1-1.764-.44l-.115-.04a.563.563 0 0 1-.373-.487l-.01-.121a3.75 3.75 0 0 1 3.57-4.047ZM20.226 19.389a8.287 8.287 0 0 0-1.308-5.135 3.75 3.75 0 0 1 3.57 4.047l-.01.121a.563.563 0 0 1-.373.486l-.115.04c-.567.2-1.156.349-1.764.441Z"}))}const hA=D.forwardRef(mA),gA=[{name:"Home",href:Et.HOME,icon:K1,iconSolid:uA},{name:"Arena",href:Et.MATCHES,icon:J1,iconSolid:hA},{name:"Leaderboard",href:Et.LEADERBOARD,icon:Vs,iconSolid:fA}],pA=()=>{const s=Gf(),t=a=>a===Et.HOME?s.pathname===a:s.pathname.startsWith(a);return u.jsx("nav",{className:"fixed bottom-0 left-0 right-0 z-50 bg-bg/95 backdrop-blur-lg border-t border-white/10 md:hidden",style:{WebkitTransform:"translateZ(0)",willChange:"transform"},children:u.jsx("div",{className:"flex items-center py-2",children:gA.map(a=>{const o=t(a.href),l=o?a.iconSolid:a.icon;return u.jsxs(wf,{to:a.href,className:`flex flex-1 flex-col items-center justify-center py-2 px-3 rounded-lg transition-all duration-200 ${o?"text-sol-purple":"text-txt-muted hover:text-txt-base"}`,children:[u.jsx(l,{className:`w-6 h-6 mb-1 ${o?"text-sol-purple":"text-txt-muted"}`}),u.jsx("span",{className:`text-xs font-medium ${o?"text-sol-purple":"text-txt-muted"}`,children:a.name})]},a.name)})})})},xA=({children:s})=>u.jsxs("div",{className:"min-h-screen bg-bg flex flex-col",children:[u.jsx(rA,{}),u.jsx("main",{className:"flex-1 pb-16 md:pb-0",children:s||u.jsx(GS,{})}),u.jsx(lA,{}),u.jsx(pA,{})]}),yA="Phantom";class vA extends eN{constructor(t={}){super(),this.name=yA,this.url="https://phantom.app",this.icon="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDgiIGhlaWdodD0iMTA4IiB2aWV3Qm94PSIwIDAgMTA4IDEwOCIgZmlsbD0ibm9uZSI+CjxyZWN0IHdpZHRoPSIxMDgiIGhlaWdodD0iMTA4IiByeD0iMjYiIGZpbGw9IiNBQjlGRjIiLz4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik00Ni41MjY3IDY5LjkyMjlDNDIuMDA1NCA3Ni44NTA5IDM0LjQyOTIgODUuNjE4MiAyNC4zNDggODUuNjE4MkMxOS41ODI0IDg1LjYxODIgMTUgODMuNjU2MyAxNSA3NS4xMzQyQzE1IDUzLjQzMDUgNDQuNjMyNiAxOS44MzI3IDcyLjEyNjggMTkuODMyN0M4Ny43NjggMTkuODMyNyA5NCAzMC42ODQ2IDk0IDQzLjAwNzlDOTQgNTguODI1OCA4My43MzU1IDc2LjkxMjIgNzMuNTMyMSA3Ni45MTIyQzcwLjI5MzkgNzYuOTEyMiA2OC43MDUzIDc1LjEzNDIgNjguNzA1MyA3Mi4zMTRDNjguNzA1MyA3MS41NzgzIDY4LjgyNzUgNzAuNzgxMiA2OS4wNzE5IDY5LjkyMjlDNjUuNTg5MyA3NS44Njk5IDU4Ljg2ODUgODEuMzg3OCA1Mi41NzU0IDgxLjM4NzhDNDcuOTkzIDgxLjM4NzggNDUuNjcxMyA3OC41MDYzIDQ1LjY3MTMgNzQuNDU5OEM0NS42NzEzIDcyLjk4ODQgNDUuOTc2OCA3MS40NTU2IDQ2LjUyNjcgNjkuOTIyOVpNODMuNjc2MSA0Mi41Nzk0QzgzLjY3NjEgNDYuMTcwNCA4MS41NTc1IDQ3Ljk2NTggNzkuMTg3NSA0Ny45NjU4Qzc2Ljc4MTYgNDcuOTY1OCA3NC42OTg5IDQ2LjE3MDQgNzQuNjk4OSA0Mi41Nzk0Qzc0LjY5ODkgMzguOTg4NSA3Ni43ODE2IDM3LjE5MzEgNzkuMTg3NSAzNy4xOTMxQzgxLjU1NzUgMzcuMTkzMSA4My42NzYxIDM4Ljk4ODUgODMuNjc2MSA0Mi41Nzk0Wk03MC4yMTAzIDQyLjU3OTVDNzAuMjEwMyA0Ni4xNzA0IDY4LjA5MTYgNDcuOTY1OCA2NS43MjE2IDQ3Ljk2NThDNjMuMzE1NyA0Ny45NjU4IDYxLjIzMyA0Ni4xNzA0IDYxLjIzMyA0Mi41Nzk1QzYxLjIzMyAzOC45ODg1IDYzLjMxNTcgMzcuMTkzMSA2NS43MjE2IDM3LjE5MzFDNjguMDkxNiAzNy4xOTMxIDcwLjIxMDMgMzguOTg4NSA3MC4yMTAzIDQyLjU3OTVaIiBmaWxsPSIjRkZGREY4Ii8+Cjwvc3ZnPg==",this.supportedTransactionVersions=new Set(["legacy",0]),this._readyState=typeof window>"u"||typeof document>"u"?ia.Unsupported:ia.NotDetected,this._disconnected=()=>{const a=this._wallet;a&&(a.off("disconnect",this._disconnected),a.off("accountChanged",this._accountChanged),this._wallet=null,this._publicKey=null,this.emit("error",new tN),this.emit("disconnect"))},this._accountChanged=a=>{const o=this._publicKey;if(o){try{a=new Ze(a.toBytes())}catch(l){this.emit("error",new d0(l?.message,l));return}o.equals(a)||(this._publicKey=a,this.emit("connect",a))}},this._connecting=!1,this._wallet=null,this._publicKey=null,this._readyState!==ia.Unsupported&&(nN()?(this._readyState=ia.Loadable,this.emit("readyStateChange",this._readyState)):aN(()=>window.phantom?.solana?.isPhantom||window.solana?.isPhantom?(this._readyState=ia.Installed,this.emit("readyStateChange",this._readyState),!0):!1))}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get readyState(){return this._readyState}async autoConnect(){this.readyState===ia.Installed&&await this.connect()}async connect(){try{if(this.connected||this.connecting)return;if(this.readyState===ia.Loadable){const o=encodeURIComponent(window.location.href),l=encodeURIComponent(window.location.origin);window.location.href=`https://phantom.app/ul/browse/${o}?ref=${l}`;return}if(this.readyState!==ia.Installed)throw new sN;this._connecting=!0;const t=window.phantom?.solana||window.solana;if(!t.isConnected)try{await t.connect()}catch(o){throw new iN(o?.message,o)}if(!t.publicKey)throw new rN;let a;try{a=new Ze(t.publicKey.toBytes())}catch(o){throw new d0(o?.message,o)}t.on("disconnect",this._disconnected),t.on("accountChanged",this._accountChanged),this._wallet=t,this._publicKey=a,this.emit("connect",a)}catch(t){throw this.emit("error",t),t}finally{this._connecting=!1}}async disconnect(){const t=this._wallet;if(t){t.off("disconnect",this._disconnected),t.off("accountChanged",this._accountChanged),this._wallet=null,this._publicKey=null;try{await t.disconnect()}catch(a){this.emit("error",new oN(a?.message,a))}}this.emit("disconnect")}async sendTransaction(t,a,o={}){try{const l=this._wallet;if(!l)throw new kl;try{const{signers:r,...d}=o;lN(t)?r?.length&&t.sign(r):(t=await this.prepareTransaction(t,a,d),r?.length&&t.partialSign(...r)),d.preflightCommitment=d.preflightCommitment||a.commitment;const{signature:f}=await l.signAndSendTransaction(t,d);return f}catch(r){throw r instanceof cN?r:new uN(r?.message,r)}}catch(l){throw this.emit("error",l),l}}async signTransaction(t){try{const a=this._wallet;if(!a)throw new kl;try{return await a.signTransaction(t)||t}catch(o){throw new f0(o?.message,o)}}catch(a){throw this.emit("error",a),a}}async signAllTransactions(t){try{const a=this._wallet;if(!a)throw new kl;try{return await a.signAllTransactions(t)||t}catch(o){throw new f0(o?.message,o)}}catch(a){throw this.emit("error",a),a}}async signMessage(t){try{const a=this._wallet;if(!a)throw new kl;try{const{signature:o}=await a.signMessage(t);return o}catch(o){throw new dN(o?.message,o)}}catch(a){throw this.emit("error",a),a}}}const tb={setVisible(s){console.error(nb("call","setVisible"))},visible:!1};Object.defineProperty(tb,"visible",{get(){return console.error(nb("read","visible")),!1}});function nb(s,t){return`You have tried to  ${s} "${t}" on a WalletModalContext without providing one. Make sure to render a WalletModalProvider as an ancestor of the component that uses WalletModalContext`}const ab=D.createContext(tb);function bA(){return D.useContext(ab)}const wA=s=>ve.createElement("button",{className:`wallet-adapter-button ${s.className||""}`,disabled:s.disabled,style:s.style,onClick:s.onClick,tabIndex:s.tabIndex||0,type:"button"},s.startIcon&&ve.createElement("i",{className:"wallet-adapter-button-start-icon"},s.startIcon),s.children,s.endIcon&&ve.createElement("i",{className:"wallet-adapter-button-end-icon"},s.endIcon)),SA=({wallet:s,...t})=>s&&ve.createElement("img",{src:s.adapter.icon,alt:`${s.adapter.name} icon`,...t}),Lx=({id:s,children:t,expanded:a=!1})=>{const o=D.useRef(null),l=D.useRef(!0),r="height 250ms ease-out",d=()=>{const g=o.current;g&&requestAnimationFrame(()=>{g.style.height=g.scrollHeight+"px"})},f=()=>{const g=o.current;g&&requestAnimationFrame(()=>{g.style.height=g.offsetHeight+"px",g.style.overflow="hidden",requestAnimationFrame(()=>{g.style.height="0"})})};return D.useLayoutEffect(()=>{a?d():f()},[a]),D.useLayoutEffect(()=>{const g=o.current;if(!g)return;function h(){g&&(g.style.overflow=a?"initial":"hidden",a&&(g.style.height="auto"))}function m(w){g&&w.target===g&&w.propertyName==="height"&&h()}return l.current&&(h(),l.current=!1),g.addEventListener("transitionend",m),()=>g.removeEventListener("transitionend",m)},[a]),ve.createElement("div",{className:"wallet-adapter-collapse",id:s,ref:o,role:"region",style:{height:0,transition:l.current?void 0:r}},t)},gf=({handleClick:s,tabIndex:t,wallet:a})=>ve.createElement("li",null,ve.createElement(wA,{onClick:s,startIcon:ve.createElement(SA,{wallet:a}),tabIndex:t},a.adapter.name,a.readyState===ia.Installed&&ve.createElement("span",null,"Detected"))),NA=()=>ve.createElement("svg",{width:"97",height:"96",viewBox:"0 0 97 96",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ve.createElement("circle",{cx:"48.5",cy:"48",r:"48",fill:"url(#paint0_linear_880_5115)",fillOpacity:"0.1"}),ve.createElement("circle",{cx:"48.5",cy:"48",r:"47",stroke:"url(#paint1_linear_880_5115)",strokeOpacity:"0.4",strokeWidth:"2"}),ve.createElement("g",{clipPath:"url(#clip0_880_5115)"},ve.createElement("path",{d:"M65.5769 28.1523H31.4231C27.6057 28.1523 24.5 31.258 24.5 35.0754V60.9215C24.5 64.7389 27.6057 67.8446 31.4231 67.8446H65.5769C69.3943 67.8446 72.5 64.7389 72.5 60.9215V35.0754C72.5 31.258 69.3943 28.1523 65.5769 28.1523ZM69.7308 52.1523H59.5769C57.2865 52.1523 55.4231 50.289 55.4231 47.9985C55.4231 45.708 57.2864 43.8446 59.5769 43.8446H69.7308V52.1523ZM69.7308 41.0754H59.5769C55.7595 41.0754 52.6539 44.1811 52.6539 47.9985C52.6539 51.8159 55.7595 54.9215 59.5769 54.9215H69.7308V60.9215C69.7308 63.2119 67.8674 65.0754 65.5769 65.0754H31.4231C29.1327 65.0754 27.2692 63.212 27.2692 60.9215V35.0754C27.2692 32.785 29.1326 30.9215 31.4231 30.9215H65.5769C67.8673 30.9215 69.7308 32.7849 69.7308 35.0754V41.0754Z",fill:"url(#paint2_linear_880_5115)"}),ve.createElement("path",{d:"M61.4231 46.6172H59.577C58.8123 46.6172 58.1924 47.2371 58.1924 48.0018C58.1924 48.7665 58.8123 49.3863 59.577 49.3863H61.4231C62.1878 49.3863 62.8077 48.7664 62.8077 48.0018C62.8077 47.2371 62.1878 46.6172 61.4231 46.6172Z",fill:"url(#paint3_linear_880_5115)"})),ve.createElement("defs",null,ve.createElement("linearGradient",{id:"paint0_linear_880_5115",x1:"3.41664",y1:"98.0933",x2:"103.05",y2:"8.42498",gradientUnits:"userSpaceOnUse"},ve.createElement("stop",{stopColor:"#9945FF"}),ve.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),ve.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),ve.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),ve.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),ve.createElement("stop",{offset:"1",stopColor:"#00D18C"})),ve.createElement("linearGradient",{id:"paint1_linear_880_5115",x1:"3.41664",y1:"98.0933",x2:"103.05",y2:"8.42498",gradientUnits:"userSpaceOnUse"},ve.createElement("stop",{stopColor:"#9945FF"}),ve.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),ve.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),ve.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),ve.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),ve.createElement("stop",{offset:"1",stopColor:"#00D18C"})),ve.createElement("linearGradient",{id:"paint2_linear_880_5115",x1:"25.9583",y1:"68.7101",x2:"67.2337",y2:"23.7879",gradientUnits:"userSpaceOnUse"},ve.createElement("stop",{stopColor:"#9945FF"}),ve.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),ve.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),ve.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),ve.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),ve.createElement("stop",{offset:"1",stopColor:"#00D18C"})),ve.createElement("linearGradient",{id:"paint3_linear_880_5115",x1:"58.3326",y1:"49.4467",x2:"61.0002",y2:"45.4453",gradientUnits:"userSpaceOnUse"},ve.createElement("stop",{stopColor:"#9945FF"}),ve.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),ve.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),ve.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),ve.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),ve.createElement("stop",{offset:"1",stopColor:"#00D18C"})),ve.createElement("clipPath",{id:"clip0_880_5115"},ve.createElement("rect",{width:"48",height:"48",fill:"white",transform:"translate(24.5 24)"})))),_A=({className:s="",container:t="body"})=>{const a=D.useRef(null),{wallets:o,select:l}=fs(),{setVisible:r}=bA(),[d,f]=D.useState(!1),[g,h]=D.useState(!1),[m,w]=D.useState(null),[x,p]=D.useMemo(()=>{const C=[],k=[];for(const R of o)R.readyState===ia.Installed?C.push(R):k.push(R);return C.length?[C,k]:[k,[]]},[o]),v=D.useCallback(()=>{h(!1),setTimeout(()=>r(!1),150)},[r]),b=D.useCallback(C=>{C.preventDefault(),v()},[v]),N=D.useCallback((C,k)=>{l(k),b(C)},[l,b]),_=D.useCallback(()=>f(!d),[d]),A=D.useCallback(C=>{const k=a.current;if(!k)return;const R=k.querySelectorAll("button"),j=R[0],B=R[R.length-1];C.shiftKey?document.activeElement===j&&(B.focus(),C.preventDefault()):document.activeElement===B&&(j.focus(),C.preventDefault())},[a]);return D.useLayoutEffect(()=>{const C=R=>{R.key==="Escape"?v():R.key==="Tab"&&A(R)},{overflow:k}=window.getComputedStyle(document.body);return setTimeout(()=>h(!0),0),document.body.style.overflow="hidden",window.addEventListener("keydown",C,!1),()=>{document.body.style.overflow=k,window.removeEventListener("keydown",C,!1)}},[v,A]),D.useLayoutEffect(()=>w(document.querySelector(t)),[t]),m&&Pf.createPortal(ve.createElement("div",{"aria-labelledby":"wallet-adapter-modal-title","aria-modal":"true",className:`wallet-adapter-modal ${g&&"wallet-adapter-modal-fade-in"} ${s}`,ref:a,role:"dialog"},ve.createElement("div",{className:"wallet-adapter-modal-container"},ve.createElement("div",{className:"wallet-adapter-modal-wrapper"},ve.createElement("button",{onClick:b,className:"wallet-adapter-modal-button-close"},ve.createElement("svg",{width:"14",height:"14"},ve.createElement("path",{d:"M14 12.461 8.3 6.772l5.234-5.233L12.006 0 6.772 5.234 1.54 0 0 1.539l5.234 5.233L0 12.006l1.539 1.528L6.772 8.3l5.69 5.7L14 12.461z"}))),x.length?ve.createElement(ve.Fragment,null,ve.createElement("h1",{className:"wallet-adapter-modal-title"},"Connect a wallet on Solana to continue"),ve.createElement("ul",{className:"wallet-adapter-modal-list"},x.map(C=>ve.createElement(gf,{key:C.adapter.name,handleClick:k=>N(k,C.adapter.name),wallet:C})),p.length?ve.createElement(Lx,{expanded:d,id:"wallet-adapter-modal-collapse"},p.map(C=>ve.createElement(gf,{key:C.adapter.name,handleClick:k=>N(k,C.adapter.name),tabIndex:d?0:-1,wallet:C}))):null),p.length?ve.createElement("button",{className:"wallet-adapter-modal-list-more",onClick:_,tabIndex:0},ve.createElement("span",null,d?"Less ":"More ","options"),ve.createElement("svg",{width:"13",height:"7",viewBox:"0 0 13 7",xmlns:"http://www.w3.org/2000/svg",className:`${d?"wallet-adapter-modal-list-more-icon-rotate":""}`},ve.createElement("path",{d:"M0.71418 1.626L5.83323 6.26188C5.91574 6.33657 6.0181 6.39652 6.13327 6.43762C6.24844 6.47872 6.37371 6.5 6.50048 6.5C6.62725 6.5 6.75252 6.47872 6.8677 6.43762C6.98287 6.39652 7.08523 6.33657 7.16774 6.26188L12.2868 1.626C12.7753 1.1835 12.3703 0.5 11.6195 0.5H1.37997C0.629216 0.5 0.224175 1.1835 0.71418 1.626Z"}))):null):ve.createElement(ve.Fragment,null,ve.createElement("h1",{className:"wallet-adapter-modal-title"},"You'll need a wallet on Solana to continue"),ve.createElement("div",{className:"wallet-adapter-modal-middle"},ve.createElement(NA,null)),p.length?ve.createElement(ve.Fragment,null,ve.createElement("button",{className:"wallet-adapter-modal-list-more",onClick:_,tabIndex:0},ve.createElement("span",null,d?"Hide ":"Already have a wallet? View ","options"),ve.createElement("svg",{width:"13",height:"7",viewBox:"0 0 13 7",xmlns:"http://www.w3.org/2000/svg",className:`${d?"wallet-adapter-modal-list-more-icon-rotate":""}`},ve.createElement("path",{d:"M0.71418 1.626L5.83323 6.26188C5.91574 6.33657 6.0181 6.39652 6.13327 6.43762C6.24844 6.47872 6.37371 6.5 6.50048 6.5C6.62725 6.5 6.75252 6.47872 6.8677 6.43762C6.98287 6.39652 7.08523 6.33657 7.16774 6.26188L12.2868 1.626C12.7753 1.1835 12.3703 0.5 11.6195 0.5H1.37997C0.629216 0.5 0.224175 1.1835 0.71418 1.626Z"}))),ve.createElement(Lx,{expanded:d,id:"wallet-adapter-modal-collapse"},ve.createElement("ul",{className:"wallet-adapter-modal-list"},p.map(C=>ve.createElement(gf,{key:C.adapter.name,handleClick:k=>N(k,C.adapter.name),tabIndex:d?0:-1,wallet:C}))))):null))),ve.createElement("div",{className:"wallet-adapter-modal-overlay",onMouseDown:b})),m)},RA=({children:s,...t})=>{const[a,o]=D.useState(!1);return ve.createElement(ab.Provider,{value:{visible:a,setVisible:o}},s,a&&ve.createElement(_A,{...t}))},EA=({children:s})=>{const t=fN.Devnet,a=D.useMemo(()=>mN(t),[t]),o=D.useMemo(()=>[new vA],[]);return u.jsx(hN,{endpoint:a,children:u.jsx(gN,{wallets:o,autoConnect:!0,children:u.jsx(RA,{children:s})})})},zx=({children:s})=>{const{connected:t}=Oy();return t?u.jsx(u.Fragment,{children:s}):u.jsx($S,{to:Et.HOME,replace:!0})},TA=()=>{const{pathname:s}=Gf();return D.useEffect(()=>{window.scrollTo(0,0)},[s]),null};class Us extends Error{constructor(t,a){const o=new.target.prototype;super(`${t}: Status code '${a}'`),this.statusCode=a,this.__proto__=o}}class nm extends Error{constructor(t="A timeout occurred."){const a=new.target.prototype;super(t),this.__proto__=a}}class Qn extends Error{constructor(t="An abort occurred."){const a=new.target.prototype;super(t),this.__proto__=a}}class AA extends Error{constructor(t,a){const o=new.target.prototype;super(t),this.transport=a,this.errorType="UnsupportedTransportError",this.__proto__=o}}class CA extends Error{constructor(t,a){const o=new.target.prototype;super(t),this.transport=a,this.errorType="DisabledTransportError",this.__proto__=o}}class MA extends Error{constructor(t,a){const o=new.target.prototype;super(t),this.transport=a,this.errorType="FailedToStartTransportError",this.__proto__=o}}class Ux extends Error{constructor(t){const a=new.target.prototype;super(t),this.errorType="FailedToNegotiateWithServerError",this.__proto__=a}}class OA extends Error{constructor(t,a){const o=new.target.prototype;super(t),this.innerErrors=a,this.__proto__=o}}class sb{constructor(t,a,o){this.statusCode=t,this.statusText=a,this.content=o}}class Ac{get(t,a){return this.send({...a,method:"GET",url:t})}post(t,a){return this.send({...a,method:"POST",url:t})}delete(t,a){return this.send({...a,method:"DELETE",url:t})}getCookieString(t){return""}}var ge;(function(s){s[s.Trace=0]="Trace",s[s.Debug=1]="Debug",s[s.Information=2]="Information",s[s.Warning=3]="Warning",s[s.Error=4]="Error",s[s.Critical=5]="Critical",s[s.None=6]="None"})(ge||(ge={}));class ro{constructor(){}log(t,a){}}ro.instance=new ro;const jA="9.0.6";class Ut{static isRequired(t,a){if(t==null)throw new Error(`The '${a}' argument is required.`)}static isNotEmpty(t,a){if(!t||t.match(/^\s*$/))throw new Error(`The '${a}' argument should not be empty.`)}static isIn(t,a,o){if(!(t in a))throw new Error(`Unknown ${o} value: ${t}.`)}}class At{static get isBrowser(){return!At.isNode&&typeof window=="object"&&typeof window.document=="object"}static get isWebWorker(){return!At.isNode&&typeof self=="object"&&"importScripts"in self}static get isReactNative(){return!At.isNode&&typeof window=="object"&&typeof window.document>"u"}static get isNode(){return typeof process<"u"&&process.release&&process.release.name==="node"}}function oo(s,t){let a="";return Fs(s)?(a=`Binary data of length ${s.byteLength}`,t&&(a+=`. Content: '${kA(s)}'`)):typeof s=="string"&&(a=`String data of length ${s.length}`,t&&(a+=`. Content: '${s}'`)),a}function kA(s){const t=new Uint8Array(s);let a="";return t.forEach(o=>{const l=o<16?"0":"";a+=`0x${l}${o.toString(16)} `}),a.substr(0,a.length-1)}function Fs(s){return s&&typeof ArrayBuffer<"u"&&(s instanceof ArrayBuffer||s.constructor&&s.constructor.name==="ArrayBuffer")}async function ib(s,t,a,o,l,r){const d={},[f,g]=Gi();d[f]=g,s.log(ge.Trace,`(${t} transport) sending data. ${oo(l,r.logMessageContent)}.`);const h=Fs(l)?"arraybuffer":"text",m=await a.post(o,{content:l,headers:{...d,...r.headers},responseType:h,timeout:r.timeout,withCredentials:r.withCredentials});s.log(ge.Trace,`(${t} transport) request complete. Response status: ${m.statusCode}.`)}function DA(s){return s===void 0?new cc(ge.Information):s===null?ro.instance:s.log!==void 0?s:new cc(s)}class BA{constructor(t,a){this._subject=t,this._observer=a}dispose(){const t=this._subject.observers.indexOf(this._observer);t>-1&&this._subject.observers.splice(t,1),this._subject.observers.length===0&&this._subject.cancelCallback&&this._subject.cancelCallback().catch(a=>{})}}class cc{constructor(t){this._minLevel=t,this.out=console}log(t,a){if(t>=this._minLevel){const o=`[${new Date().toISOString()}] ${ge[t]}: ${a}`;switch(t){case ge.Critical:case ge.Error:this.out.error(o);break;case ge.Warning:this.out.warn(o);break;case ge.Information:this.out.info(o);break;default:this.out.log(o);break}}}}function Gi(){let s="X-SignalR-User-Agent";return At.isNode&&(s="User-Agent"),[s,IA(jA,LA(),UA(),zA())]}function IA(s,t,a,o){let l="Microsoft SignalR/";const r=s.split(".");return l+=`${r[0]}.${r[1]}`,l+=` (${s}; `,t&&t!==""?l+=`${t}; `:l+="Unknown OS; ",l+=`${a}`,o?l+=`; ${o}`:l+="; Unknown Runtime Version",l+=")",l}function LA(){if(At.isNode)switch(process.platform){case"win32":return"Windows NT";case"darwin":return"macOS";case"linux":return"Linux";default:return process.platform}else return""}function zA(){if(At.isNode)return process.versions.node}function UA(){return At.isNode?"NodeJS":"Browser"}function pf(s){return s.stack?s.stack:s.message?s.message:`${s}`}function HA(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis<"u")return globalThis;throw new Error("could not find global")}class PA extends Ac{constructor(t){if(super(),this._logger=t,typeof fetch>"u"||At.isNode){const a=typeof __webpack_require__=="function"?__non_webpack_require__:require;this._jar=new(a("tough-cookie")).CookieJar,typeof fetch>"u"?this._fetchType=a("node-fetch"):this._fetchType=fetch,this._fetchType=a("fetch-cookie")(this._fetchType,this._jar)}else this._fetchType=fetch.bind(HA());if(typeof AbortController>"u"){const a=typeof __webpack_require__=="function"?__non_webpack_require__:require;this._abortControllerType=a("abort-controller")}else this._abortControllerType=AbortController}async send(t){if(t.abortSignal&&t.abortSignal.aborted)throw new Qn;if(!t.method)throw new Error("No method defined.");if(!t.url)throw new Error("No url defined.");const a=new this._abortControllerType;let o;t.abortSignal&&(t.abortSignal.onabort=()=>{a.abort(),o=new Qn});let l=null;if(t.timeout){const g=t.timeout;l=setTimeout(()=>{a.abort(),this._logger.log(ge.Warning,"Timeout from HTTP request."),o=new nm},g)}t.content===""&&(t.content=void 0),t.content&&(t.headers=t.headers||{},Fs(t.content)?t.headers["Content-Type"]="application/octet-stream":t.headers["Content-Type"]="text/plain;charset=UTF-8");let r;try{r=await this._fetchType(t.url,{body:t.content,cache:"no-cache",credentials:t.withCredentials===!0?"include":"same-origin",headers:{"X-Requested-With":"XMLHttpRequest",...t.headers},method:t.method,mode:"cors",redirect:"follow",signal:a.signal})}catch(g){throw o||(this._logger.log(ge.Warning,`Error from HTTP request. ${g}.`),g)}finally{l&&clearTimeout(l),t.abortSignal&&(t.abortSignal.onabort=null)}if(!r.ok){const g=await Hx(r,"text");throw new Us(g||r.statusText,r.status)}const f=await Hx(r,t.responseType);return new sb(r.status,r.statusText,f)}getCookieString(t){let a="";return At.isNode&&this._jar&&this._jar.getCookies(t,(o,l)=>a=l.join("; ")),a}}function Hx(s,t){let a;switch(t){case"arraybuffer":a=s.arrayBuffer();break;case"text":a=s.text();break;case"blob":case"document":case"json":throw new Error(`${t} is not supported.`);default:a=s.text();break}return a}class GA extends Ac{constructor(t){super(),this._logger=t}send(t){return t.abortSignal&&t.abortSignal.aborted?Promise.reject(new Qn):t.method?t.url?new Promise((a,o)=>{const l=new XMLHttpRequest;l.open(t.method,t.url,!0),l.withCredentials=t.withCredentials===void 0?!0:t.withCredentials,l.setRequestHeader("X-Requested-With","XMLHttpRequest"),t.content===""&&(t.content=void 0),t.content&&(Fs(t.content)?l.setRequestHeader("Content-Type","application/octet-stream"):l.setRequestHeader("Content-Type","text/plain;charset=UTF-8"));const r=t.headers;r&&Object.keys(r).forEach(d=>{l.setRequestHeader(d,r[d])}),t.responseType&&(l.responseType=t.responseType),t.abortSignal&&(t.abortSignal.onabort=()=>{l.abort(),o(new Qn)}),t.timeout&&(l.timeout=t.timeout),l.onload=()=>{t.abortSignal&&(t.abortSignal.onabort=null),l.status>=200&&l.status<300?a(new sb(l.status,l.statusText,l.response||l.responseText)):o(new Us(l.response||l.responseText||l.statusText,l.status))},l.onerror=()=>{this._logger.log(ge.Warning,`Error from HTTP request. ${l.status}: ${l.statusText}.`),o(new Us(l.statusText,l.status))},l.ontimeout=()=>{this._logger.log(ge.Warning,"Timeout from HTTP request."),o(new nm)},l.send(t.content)}):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}}class $A extends Ac{constructor(t){if(super(),typeof fetch<"u"||At.isNode)this._httpClient=new PA(t);else if(typeof XMLHttpRequest<"u")this._httpClient=new GA(t);else throw new Error("No usable HttpClient found.")}send(t){return t.abortSignal&&t.abortSignal.aborted?Promise.reject(new Qn):t.method?t.url?this._httpClient.send(t):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}getCookieString(t){return this._httpClient.getCookieString(t)}}class Cn{static write(t){return`${t}${Cn.RecordSeparator}`}static parse(t){if(t[t.length-1]!==Cn.RecordSeparator)throw new Error("Message is incomplete.");const a=t.split(Cn.RecordSeparator);return a.pop(),a}}Cn.RecordSeparatorCode=30;Cn.RecordSeparator=String.fromCharCode(Cn.RecordSeparatorCode);class VA{writeHandshakeRequest(t){return Cn.write(JSON.stringify(t))}parseHandshakeResponse(t){let a,o;if(Fs(t)){const f=new Uint8Array(t),g=f.indexOf(Cn.RecordSeparatorCode);if(g===-1)throw new Error("Message is incomplete.");const h=g+1;a=String.fromCharCode.apply(null,Array.prototype.slice.call(f.slice(0,h))),o=f.byteLength>h?f.slice(h).buffer:null}else{const f=t,g=f.indexOf(Cn.RecordSeparator);if(g===-1)throw new Error("Message is incomplete.");const h=g+1;a=f.substring(0,h),o=f.length>h?f.substring(h):null}const l=Cn.parse(a),r=JSON.parse(l[0]);if(r.type)throw new Error("Expected a handshake response from the server.");return[o,r]}}var Ge;(function(s){s[s.Invocation=1]="Invocation",s[s.StreamItem=2]="StreamItem",s[s.Completion=3]="Completion",s[s.StreamInvocation=4]="StreamInvocation",s[s.CancelInvocation=5]="CancelInvocation",s[s.Ping=6]="Ping",s[s.Close=7]="Close",s[s.Ack=8]="Ack",s[s.Sequence=9]="Sequence"})(Ge||(Ge={}));class FA{constructor(){this.observers=[]}next(t){for(const a of this.observers)a.next(t)}error(t){for(const a of this.observers)a.error&&a.error(t)}complete(){for(const t of this.observers)t.complete&&t.complete()}subscribe(t){return this.observers.push(t),new BA(this,t)}}class WA{constructor(t,a,o){this._bufferSize=1e5,this._messages=[],this._totalMessageCount=0,this._waitForSequenceMessage=!1,this._nextReceivingSequenceId=1,this._latestReceivedSequenceId=0,this._bufferedByteCount=0,this._reconnectInProgress=!1,this._protocol=t,this._connection=a,this._bufferSize=o}async _send(t){const a=this._protocol.writeMessage(t);let o=Promise.resolve();if(this._isInvocationMessage(t)){this._totalMessageCount++;let l=()=>{},r=()=>{};Fs(a)?this._bufferedByteCount+=a.byteLength:this._bufferedByteCount+=a.length,this._bufferedByteCount>=this._bufferSize&&(o=new Promise((d,f)=>{l=d,r=f})),this._messages.push(new qA(a,this._totalMessageCount,l,r))}try{this._reconnectInProgress||await this._connection.send(a)}catch{this._disconnected()}await o}_ack(t){let a=-1;for(let o=0;o<this._messages.length;o++){const l=this._messages[o];if(l._id<=t.sequenceId)a=o,Fs(l._message)?this._bufferedByteCount-=l._message.byteLength:this._bufferedByteCount-=l._message.length,l._resolver();else if(this._bufferedByteCount<this._bufferSize)l._resolver();else break}a!==-1&&(this._messages=this._messages.slice(a+1))}_shouldProcessMessage(t){if(this._waitForSequenceMessage)return t.type!==Ge.Sequence?!1:(this._waitForSequenceMessage=!1,!0);if(!this._isInvocationMessage(t))return!0;const a=this._nextReceivingSequenceId;return this._nextReceivingSequenceId++,a<=this._latestReceivedSequenceId?(a===this._latestReceivedSequenceId&&this._ackTimer(),!1):(this._latestReceivedSequenceId=a,this._ackTimer(),!0)}_resetSequence(t){if(t.sequenceId>this._nextReceivingSequenceId){this._connection.stop(new Error("Sequence ID greater than amount of messages we've received."));return}this._nextReceivingSequenceId=t.sequenceId}_disconnected(){this._reconnectInProgress=!0,this._waitForSequenceMessage=!0}async _resend(){const t=this._messages.length!==0?this._messages[0]._id:this._totalMessageCount+1;await this._connection.send(this._protocol.writeMessage({type:Ge.Sequence,sequenceId:t}));const a=this._messages;for(const o of a)await this._connection.send(o._message);this._reconnectInProgress=!1}_dispose(t){t??(t=new Error("Unable to reconnect to server."));for(const a of this._messages)a._rejector(t)}_isInvocationMessage(t){switch(t.type){case Ge.Invocation:case Ge.StreamItem:case Ge.Completion:case Ge.StreamInvocation:case Ge.CancelInvocation:return!0;case Ge.Close:case Ge.Sequence:case Ge.Ping:case Ge.Ack:return!1}}_ackTimer(){this._ackTimerHandle===void 0&&(this._ackTimerHandle=setTimeout(async()=>{try{this._reconnectInProgress||await this._connection.send(this._protocol.writeMessage({type:Ge.Ack,sequenceId:this._latestReceivedSequenceId}))}catch{}clearTimeout(this._ackTimerHandle),this._ackTimerHandle=void 0},1e3))}}class qA{constructor(t,a,o,l){this._message=t,this._id=a,this._resolver=o,this._rejector=l}}const YA=30*1e3,XA=15*1e3,ZA=1e5;var st;(function(s){s.Disconnected="Disconnected",s.Connecting="Connecting",s.Connected="Connected",s.Disconnecting="Disconnecting",s.Reconnecting="Reconnecting"})(st||(st={}));class am{static create(t,a,o,l,r,d,f){return new am(t,a,o,l,r,d,f)}constructor(t,a,o,l,r,d,f){this._nextKeepAlive=0,this._freezeEventListener=()=>{this._logger.log(ge.Warning,"The page is being frozen, this will likely lead to the connection being closed and messages being lost. For more information see the docs at https://learn.microsoft.com/aspnet/core/signalr/javascript-client#bsleep")},Ut.isRequired(t,"connection"),Ut.isRequired(a,"logger"),Ut.isRequired(o,"protocol"),this.serverTimeoutInMilliseconds=r??YA,this.keepAliveIntervalInMilliseconds=d??XA,this._statefulReconnectBufferSize=f??ZA,this._logger=a,this._protocol=o,this.connection=t,this._reconnectPolicy=l,this._handshakeProtocol=new VA,this.connection.onreceive=g=>this._processIncomingData(g),this.connection.onclose=g=>this._connectionClosed(g),this._callbacks={},this._methods={},this._closedCallbacks=[],this._reconnectingCallbacks=[],this._reconnectedCallbacks=[],this._invocationId=0,this._receivedHandshakeResponse=!1,this._connectionState=st.Disconnected,this._connectionStarted=!1,this._cachedPingMessage=this._protocol.writeMessage({type:Ge.Ping})}get state(){return this._connectionState}get connectionId(){return this.connection&&this.connection.connectionId||null}get baseUrl(){return this.connection.baseUrl||""}set baseUrl(t){if(this._connectionState!==st.Disconnected&&this._connectionState!==st.Reconnecting)throw new Error("The HubConnection must be in the Disconnected or Reconnecting state to change the url.");if(!t)throw new Error("The HubConnection url must be a valid url.");this.connection.baseUrl=t}start(){return this._startPromise=this._startWithStateTransitions(),this._startPromise}async _startWithStateTransitions(){if(this._connectionState!==st.Disconnected)return Promise.reject(new Error("Cannot start a HubConnection that is not in the 'Disconnected' state."));this._connectionState=st.Connecting,this._logger.log(ge.Debug,"Starting HubConnection.");try{await this._startInternal(),At.isBrowser&&window.document.addEventListener("freeze",this._freezeEventListener),this._connectionState=st.Connected,this._connectionStarted=!0,this._logger.log(ge.Debug,"HubConnection connected successfully.")}catch(t){return this._connectionState=st.Disconnected,this._logger.log(ge.Debug,`HubConnection failed to start successfully because of error '${t}'.`),Promise.reject(t)}}async _startInternal(){this._stopDuringStartError=void 0,this._receivedHandshakeResponse=!1;const t=new Promise((a,o)=>{this._handshakeResolver=a,this._handshakeRejecter=o});await this.connection.start(this._protocol.transferFormat);try{let a=this._protocol.version;this.connection.features.reconnect||(a=1);const o={protocol:this._protocol.name,version:a};if(this._logger.log(ge.Debug,"Sending handshake request."),await this._sendMessage(this._handshakeProtocol.writeHandshakeRequest(o)),this._logger.log(ge.Information,`Using HubProtocol '${this._protocol.name}'.`),this._cleanupTimeout(),this._resetTimeoutPeriod(),this._resetKeepAliveInterval(),await t,this._stopDuringStartError)throw this._stopDuringStartError;(this.connection.features.reconnect||!1)&&(this._messageBuffer=new WA(this._protocol,this.connection,this._statefulReconnectBufferSize),this.connection.features.disconnected=this._messageBuffer._disconnected.bind(this._messageBuffer),this.connection.features.resend=()=>{if(this._messageBuffer)return this._messageBuffer._resend()}),this.connection.features.inherentKeepAlive||await this._sendMessage(this._cachedPingMessage)}catch(a){throw this._logger.log(ge.Debug,`Hub handshake failed with error '${a}' during start(). Stopping HubConnection.`),this._cleanupTimeout(),this._cleanupPingTimer(),await this.connection.stop(a),a}}async stop(){const t=this._startPromise;this.connection.features.reconnect=!1,this._stopPromise=this._stopInternal(),await this._stopPromise;try{await t}catch{}}_stopInternal(t){if(this._connectionState===st.Disconnected)return this._logger.log(ge.Debug,`Call to HubConnection.stop(${t}) ignored because it is already in the disconnected state.`),Promise.resolve();if(this._connectionState===st.Disconnecting)return this._logger.log(ge.Debug,`Call to HttpConnection.stop(${t}) ignored because the connection is already in the disconnecting state.`),this._stopPromise;const a=this._connectionState;return this._connectionState=st.Disconnecting,this._logger.log(ge.Debug,"Stopping HubConnection."),this._reconnectDelayHandle?(this._logger.log(ge.Debug,"Connection stopped during reconnect delay. Done reconnecting."),clearTimeout(this._reconnectDelayHandle),this._reconnectDelayHandle=void 0,this._completeClose(),Promise.resolve()):(a===st.Connected&&this._sendCloseMessage(),this._cleanupTimeout(),this._cleanupPingTimer(),this._stopDuringStartError=t||new Qn("The connection was stopped before the hub handshake could complete."),this.connection.stop(t))}async _sendCloseMessage(){try{await this._sendWithProtocol(this._createCloseMessage())}catch{}}stream(t,...a){const[o,l]=this._replaceStreamingParams(a),r=this._createStreamInvocation(t,a,l);let d;const f=new FA;return f.cancelCallback=()=>{const g=this._createCancelInvocation(r.invocationId);return delete this._callbacks[r.invocationId],d.then(()=>this._sendWithProtocol(g))},this._callbacks[r.invocationId]=(g,h)=>{if(h){f.error(h);return}else g&&(g.type===Ge.Completion?g.error?f.error(new Error(g.error)):f.complete():f.next(g.item))},d=this._sendWithProtocol(r).catch(g=>{f.error(g),delete this._callbacks[r.invocationId]}),this._launchStreams(o,d),f}_sendMessage(t){return this._resetKeepAliveInterval(),this.connection.send(t)}_sendWithProtocol(t){return this._messageBuffer?this._messageBuffer._send(t):this._sendMessage(this._protocol.writeMessage(t))}send(t,...a){const[o,l]=this._replaceStreamingParams(a),r=this._sendWithProtocol(this._createInvocation(t,a,!0,l));return this._launchStreams(o,r),r}invoke(t,...a){const[o,l]=this._replaceStreamingParams(a),r=this._createInvocation(t,a,!1,l);return new Promise((f,g)=>{this._callbacks[r.invocationId]=(m,w)=>{if(w){g(w);return}else m&&(m.type===Ge.Completion?m.error?g(new Error(m.error)):f(m.result):g(new Error(`Unexpected message type: ${m.type}`)))};const h=this._sendWithProtocol(r).catch(m=>{g(m),delete this._callbacks[r.invocationId]});this._launchStreams(o,h)})}on(t,a){!t||!a||(t=t.toLowerCase(),this._methods[t]||(this._methods[t]=[]),this._methods[t].indexOf(a)===-1&&this._methods[t].push(a))}off(t,a){if(!t)return;t=t.toLowerCase();const o=this._methods[t];if(o)if(a){const l=o.indexOf(a);l!==-1&&(o.splice(l,1),o.length===0&&delete this._methods[t])}else delete this._methods[t]}onclose(t){t&&this._closedCallbacks.push(t)}onreconnecting(t){t&&this._reconnectingCallbacks.push(t)}onreconnected(t){t&&this._reconnectedCallbacks.push(t)}_processIncomingData(t){if(this._cleanupTimeout(),this._receivedHandshakeResponse||(t=this._processHandshakeResponse(t),this._receivedHandshakeResponse=!0),t){const a=this._protocol.parseMessages(t,this._logger);for(const o of a)if(!(this._messageBuffer&&!this._messageBuffer._shouldProcessMessage(o)))switch(o.type){case Ge.Invocation:this._invokeClientMethod(o).catch(l=>{this._logger.log(ge.Error,`Invoke client method threw error: ${pf(l)}`)});break;case Ge.StreamItem:case Ge.Completion:{const l=this._callbacks[o.invocationId];if(l){o.type===Ge.Completion&&delete this._callbacks[o.invocationId];try{l(o)}catch(r){this._logger.log(ge.Error,`Stream callback threw error: ${pf(r)}`)}}break}case Ge.Ping:break;case Ge.Close:{this._logger.log(ge.Information,"Close message received from server.");const l=o.error?new Error("Server returned an error on close: "+o.error):void 0;o.allowReconnect===!0?this.connection.stop(l):this._stopPromise=this._stopInternal(l);break}case Ge.Ack:this._messageBuffer&&this._messageBuffer._ack(o);break;case Ge.Sequence:this._messageBuffer&&this._messageBuffer._resetSequence(o);break;default:this._logger.log(ge.Warning,`Invalid message type: ${o.type}.`);break}}this._resetTimeoutPeriod()}_processHandshakeResponse(t){let a,o;try{[o,a]=this._handshakeProtocol.parseHandshakeResponse(t)}catch(l){const r="Error parsing handshake response: "+l;this._logger.log(ge.Error,r);const d=new Error(r);throw this._handshakeRejecter(d),d}if(a.error){const l="Server returned handshake error: "+a.error;this._logger.log(ge.Error,l);const r=new Error(l);throw this._handshakeRejecter(r),r}else this._logger.log(ge.Debug,"Server handshake complete.");return this._handshakeResolver(),o}_resetKeepAliveInterval(){this.connection.features.inherentKeepAlive||(this._nextKeepAlive=new Date().getTime()+this.keepAliveIntervalInMilliseconds,this._cleanupPingTimer())}_resetTimeoutPeriod(){if((!this.connection.features||!this.connection.features.inherentKeepAlive)&&(this._timeoutHandle=setTimeout(()=>this.serverTimeout(),this.serverTimeoutInMilliseconds),this._pingServerHandle===void 0)){let t=this._nextKeepAlive-new Date().getTime();t<0&&(t=0),this._pingServerHandle=setTimeout(async()=>{if(this._connectionState===st.Connected)try{await this._sendMessage(this._cachedPingMessage)}catch{this._cleanupPingTimer()}},t)}}serverTimeout(){this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server."))}async _invokeClientMethod(t){const a=t.target.toLowerCase(),o=this._methods[a];if(!o){this._logger.log(ge.Warning,`No client method with the name '${a}' found.`),t.invocationId&&(this._logger.log(ge.Warning,`No result given for '${a}' method and invocation ID '${t.invocationId}'.`),await this._sendWithProtocol(this._createCompletionMessage(t.invocationId,"Client didn't provide a result.",null)));return}const l=o.slice(),r=!!t.invocationId;let d,f,g;for(const h of l)try{const m=d;d=await h.apply(this,t.arguments),r&&d&&m&&(this._logger.log(ge.Error,`Multiple results provided for '${a}'. Sending error to server.`),g=this._createCompletionMessage(t.invocationId,"Client provided multiple results.",null)),f=void 0}catch(m){f=m,this._logger.log(ge.Error,`A callback for the method '${a}' threw error '${m}'.`)}g?await this._sendWithProtocol(g):r?(f?g=this._createCompletionMessage(t.invocationId,`${f}`,null):d!==void 0?g=this._createCompletionMessage(t.invocationId,null,d):(this._logger.log(ge.Warning,`No result given for '${a}' method and invocation ID '${t.invocationId}'.`),g=this._createCompletionMessage(t.invocationId,"Client didn't provide a result.",null)),await this._sendWithProtocol(g)):d&&this._logger.log(ge.Error,`Result given for '${a}' method but server is not expecting a result.`)}_connectionClosed(t){this._logger.log(ge.Debug,`HubConnection.connectionClosed(${t}) called while in state ${this._connectionState}.`),this._stopDuringStartError=this._stopDuringStartError||t||new Qn("The underlying connection was closed before the hub handshake could complete."),this._handshakeResolver&&this._handshakeResolver(),this._cancelCallbacksWithError(t||new Error("Invocation canceled due to the underlying connection being closed.")),this._cleanupTimeout(),this._cleanupPingTimer(),this._connectionState===st.Disconnecting?this._completeClose(t):this._connectionState===st.Connected&&this._reconnectPolicy?this._reconnect(t):this._connectionState===st.Connected&&this._completeClose(t)}_completeClose(t){if(this._connectionStarted){this._connectionState=st.Disconnected,this._connectionStarted=!1,this._messageBuffer&&(this._messageBuffer._dispose(t??new Error("Connection closed.")),this._messageBuffer=void 0),At.isBrowser&&window.document.removeEventListener("freeze",this._freezeEventListener);try{this._closedCallbacks.forEach(a=>a.apply(this,[t]))}catch(a){this._logger.log(ge.Error,`An onclose callback called with error '${t}' threw error '${a}'.`)}}}async _reconnect(t){const a=Date.now();let o=0,l=t!==void 0?t:new Error("Attempting to reconnect due to a unknown error."),r=this._getNextRetryDelay(o++,0,l);if(r===null){this._logger.log(ge.Debug,"Connection not reconnecting because the IRetryPolicy returned null on the first reconnect attempt."),this._completeClose(t);return}if(this._connectionState=st.Reconnecting,t?this._logger.log(ge.Information,`Connection reconnecting because of error '${t}'.`):this._logger.log(ge.Information,"Connection reconnecting."),this._reconnectingCallbacks.length!==0){try{this._reconnectingCallbacks.forEach(d=>d.apply(this,[t]))}catch(d){this._logger.log(ge.Error,`An onreconnecting callback called with error '${t}' threw error '${d}'.`)}if(this._connectionState!==st.Reconnecting){this._logger.log(ge.Debug,"Connection left the reconnecting state in onreconnecting callback. Done reconnecting.");return}}for(;r!==null;){if(this._logger.log(ge.Information,`Reconnect attempt number ${o} will start in ${r} ms.`),await new Promise(d=>{this._reconnectDelayHandle=setTimeout(d,r)}),this._reconnectDelayHandle=void 0,this._connectionState!==st.Reconnecting){this._logger.log(ge.Debug,"Connection left the reconnecting state during reconnect delay. Done reconnecting.");return}try{if(await this._startInternal(),this._connectionState=st.Connected,this._logger.log(ge.Information,"HubConnection reconnected successfully."),this._reconnectedCallbacks.length!==0)try{this._reconnectedCallbacks.forEach(d=>d.apply(this,[this.connection.connectionId]))}catch(d){this._logger.log(ge.Error,`An onreconnected callback called with connectionId '${this.connection.connectionId}; threw error '${d}'.`)}return}catch(d){if(this._logger.log(ge.Information,`Reconnect attempt failed because of error '${d}'.`),this._connectionState!==st.Reconnecting){this._logger.log(ge.Debug,`Connection moved to the '${this._connectionState}' from the reconnecting state during reconnect attempt. Done reconnecting.`),this._connectionState===st.Disconnecting&&this._completeClose();return}l=d instanceof Error?d:new Error(d.toString()),r=this._getNextRetryDelay(o++,Date.now()-a,l)}}this._logger.log(ge.Information,`Reconnect retries have been exhausted after ${Date.now()-a} ms and ${o} failed attempts. Connection disconnecting.`),this._completeClose()}_getNextRetryDelay(t,a,o){try{return this._reconnectPolicy.nextRetryDelayInMilliseconds({elapsedMilliseconds:a,previousRetryCount:t,retryReason:o})}catch(l){return this._logger.log(ge.Error,`IRetryPolicy.nextRetryDelayInMilliseconds(${t}, ${a}) threw error '${l}'.`),null}}_cancelCallbacksWithError(t){const a=this._callbacks;this._callbacks={},Object.keys(a).forEach(o=>{const l=a[o];try{l(null,t)}catch(r){this._logger.log(ge.Error,`Stream 'error' callback called with '${t}' threw error: ${pf(r)}`)}})}_cleanupPingTimer(){this._pingServerHandle&&(clearTimeout(this._pingServerHandle),this._pingServerHandle=void 0)}_cleanupTimeout(){this._timeoutHandle&&clearTimeout(this._timeoutHandle)}_createInvocation(t,a,o,l){if(o)return l.length!==0?{target:t,arguments:a,streamIds:l,type:Ge.Invocation}:{target:t,arguments:a,type:Ge.Invocation};{const r=this._invocationId;return this._invocationId++,l.length!==0?{target:t,arguments:a,invocationId:r.toString(),streamIds:l,type:Ge.Invocation}:{target:t,arguments:a,invocationId:r.toString(),type:Ge.Invocation}}}_launchStreams(t,a){if(t.length!==0){a||(a=Promise.resolve());for(const o in t)t[o].subscribe({complete:()=>{a=a.then(()=>this._sendWithProtocol(this._createCompletionMessage(o)))},error:l=>{let r;l instanceof Error?r=l.message:l&&l.toString?r=l.toString():r="Unknown error",a=a.then(()=>this._sendWithProtocol(this._createCompletionMessage(o,r)))},next:l=>{a=a.then(()=>this._sendWithProtocol(this._createStreamItemMessage(o,l)))}})}}_replaceStreamingParams(t){const a=[],o=[];for(let l=0;l<t.length;l++){const r=t[l];if(this._isObservable(r)){const d=this._invocationId;this._invocationId++,a[d]=r,o.push(d.toString()),t.splice(l,1)}}return[a,o]}_isObservable(t){return t&&t.subscribe&&typeof t.subscribe=="function"}_createStreamInvocation(t,a,o){const l=this._invocationId;return this._invocationId++,o.length!==0?{target:t,arguments:a,invocationId:l.toString(),streamIds:o,type:Ge.StreamInvocation}:{target:t,arguments:a,invocationId:l.toString(),type:Ge.StreamInvocation}}_createCancelInvocation(t){return{invocationId:t,type:Ge.CancelInvocation}}_createStreamItemMessage(t,a){return{invocationId:t,item:a,type:Ge.StreamItem}}_createCompletionMessage(t,a,o){return a?{error:a,invocationId:t,type:Ge.Completion}:{invocationId:t,result:o,type:Ge.Completion}}_createCloseMessage(){return{type:Ge.Close}}}const QA=[0,2e3,1e4,3e4,null];class Px{constructor(t){this._retryDelays=t!==void 0?[...t,null]:QA}nextRetryDelayInMilliseconds(t){return this._retryDelays[t.previousRetryCount]}}class Hs{}Hs.Authorization="Authorization";Hs.Cookie="Cookie";class KA extends Ac{constructor(t,a){super(),this._innerClient=t,this._accessTokenFactory=a}async send(t){let a=!0;this._accessTokenFactory&&(!this._accessToken||t.url&&t.url.indexOf("/negotiate?")>0)&&(a=!1,this._accessToken=await this._accessTokenFactory()),this._setAuthorizationHeader(t);const o=await this._innerClient.send(t);return a&&o.statusCode===401&&this._accessTokenFactory?(this._accessToken=await this._accessTokenFactory(),this._setAuthorizationHeader(t),await this._innerClient.send(t)):o}_setAuthorizationHeader(t){t.headers||(t.headers={}),this._accessToken?t.headers[Hs.Authorization]=`Bearer ${this._accessToken}`:this._accessTokenFactory&&t.headers[Hs.Authorization]&&delete t.headers[Hs.Authorization]}getCookieString(t){return this._innerClient.getCookieString(t)}}var Vt;(function(s){s[s.None=0]="None",s[s.WebSockets=1]="WebSockets",s[s.ServerSentEvents=2]="ServerSentEvents",s[s.LongPolling=4]="LongPolling"})(Vt||(Vt={}));var en;(function(s){s[s.Text=1]="Text",s[s.Binary=2]="Binary"})(en||(en={}));let JA=class{constructor(){this._isAborted=!1,this.onabort=null}abort(){this._isAborted||(this._isAborted=!0,this.onabort&&this.onabort())}get signal(){return this}get aborted(){return this._isAborted}};class Gx{get pollAborted(){return this._pollAbort.aborted}constructor(t,a,o){this._httpClient=t,this._logger=a,this._pollAbort=new JA,this._options=o,this._running=!1,this.onreceive=null,this.onclose=null}async connect(t,a){if(Ut.isRequired(t,"url"),Ut.isRequired(a,"transferFormat"),Ut.isIn(a,en,"transferFormat"),this._url=t,this._logger.log(ge.Trace,"(LongPolling transport) Connecting."),a===en.Binary&&typeof XMLHttpRequest<"u"&&typeof new XMLHttpRequest().responseType!="string")throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");const[o,l]=Gi(),r={[o]:l,...this._options.headers},d={abortSignal:this._pollAbort.signal,headers:r,timeout:1e5,withCredentials:this._options.withCredentials};a===en.Binary&&(d.responseType="arraybuffer");const f=`${t}&_=${Date.now()}`;this._logger.log(ge.Trace,`(LongPolling transport) polling: ${f}.`);const g=await this._httpClient.get(f,d);g.statusCode!==200?(this._logger.log(ge.Error,`(LongPolling transport) Unexpected response code: ${g.statusCode}.`),this._closeError=new Us(g.statusText||"",g.statusCode),this._running=!1):this._running=!0,this._receiving=this._poll(this._url,d)}async _poll(t,a){try{for(;this._running;)try{const o=`${t}&_=${Date.now()}`;this._logger.log(ge.Trace,`(LongPolling transport) polling: ${o}.`);const l=await this._httpClient.get(o,a);l.statusCode===204?(this._logger.log(ge.Information,"(LongPolling transport) Poll terminated by server."),this._running=!1):l.statusCode!==200?(this._logger.log(ge.Error,`(LongPolling transport) Unexpected response code: ${l.statusCode}.`),this._closeError=new Us(l.statusText||"",l.statusCode),this._running=!1):l.content?(this._logger.log(ge.Trace,`(LongPolling transport) data received. ${oo(l.content,this._options.logMessageContent)}.`),this.onreceive&&this.onreceive(l.content)):this._logger.log(ge.Trace,"(LongPolling transport) Poll timed out, reissuing.")}catch(o){this._running?o instanceof nm?this._logger.log(ge.Trace,"(LongPolling transport) Poll timed out, reissuing."):(this._closeError=o,this._running=!1):this._logger.log(ge.Trace,`(LongPolling transport) Poll errored after shutdown: ${o.message}`)}}finally{this._logger.log(ge.Trace,"(LongPolling transport) Polling complete."),this.pollAborted||this._raiseOnClose()}}async send(t){return this._running?ib(this._logger,"LongPolling",this._httpClient,this._url,t,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}async stop(){this._logger.log(ge.Trace,"(LongPolling transport) Stopping polling."),this._running=!1,this._pollAbort.abort();try{await this._receiving,this._logger.log(ge.Trace,`(LongPolling transport) sending DELETE request to ${this._url}.`);const t={},[a,o]=Gi();t[a]=o;const l={headers:{...t,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials};let r;try{await this._httpClient.delete(this._url,l)}catch(d){r=d}r?r instanceof Us&&(r.statusCode===404?this._logger.log(ge.Trace,"(LongPolling transport) A 404 response was returned from sending a DELETE request."):this._logger.log(ge.Trace,`(LongPolling transport) Error sending a DELETE request: ${r}`)):this._logger.log(ge.Trace,"(LongPolling transport) DELETE request accepted.")}finally{this._logger.log(ge.Trace,"(LongPolling transport) Stop finished."),this._raiseOnClose()}}_raiseOnClose(){if(this.onclose){let t="(LongPolling transport) Firing onclose event.";this._closeError&&(t+=" Error: "+this._closeError),this._logger.log(ge.Trace,t),this.onclose(this._closeError)}}}class eC{constructor(t,a,o,l){this._httpClient=t,this._accessToken=a,this._logger=o,this._options=l,this.onreceive=null,this.onclose=null}async connect(t,a){return Ut.isRequired(t,"url"),Ut.isRequired(a,"transferFormat"),Ut.isIn(a,en,"transferFormat"),this._logger.log(ge.Trace,"(SSE transport) Connecting."),this._url=t,this._accessToken&&(t+=(t.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(this._accessToken)}`),new Promise((o,l)=>{let r=!1;if(a!==en.Text){l(new Error("The Server-Sent Events transport only supports the 'Text' transfer format"));return}let d;if(At.isBrowser||At.isWebWorker)d=new this._options.EventSource(t,{withCredentials:this._options.withCredentials});else{const f=this._httpClient.getCookieString(t),g={};g.Cookie=f;const[h,m]=Gi();g[h]=m,d=new this._options.EventSource(t,{withCredentials:this._options.withCredentials,headers:{...g,...this._options.headers}})}try{d.onmessage=f=>{if(this.onreceive)try{this._logger.log(ge.Trace,`(SSE transport) data received. ${oo(f.data,this._options.logMessageContent)}.`),this.onreceive(f.data)}catch(g){this._close(g);return}},d.onerror=f=>{r?this._close():l(new Error("EventSource failed to connect. The connection could not be found on the server, either the connection ID is not present on the server, or a proxy is refusing/buffering the connection. If you have multiple servers check that sticky sessions are enabled."))},d.onopen=()=>{this._logger.log(ge.Information,`SSE connected to ${this._url}`),this._eventSource=d,r=!0,o()}}catch(f){l(f);return}})}async send(t){return this._eventSource?ib(this._logger,"SSE",this._httpClient,this._url,t,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}stop(){return this._close(),Promise.resolve()}_close(t){this._eventSource&&(this._eventSource.close(),this._eventSource=void 0,this.onclose&&this.onclose(t))}}class tC{constructor(t,a,o,l,r,d){this._logger=o,this._accessTokenFactory=a,this._logMessageContent=l,this._webSocketConstructor=r,this._httpClient=t,this.onreceive=null,this.onclose=null,this._headers=d}async connect(t,a){Ut.isRequired(t,"url"),Ut.isRequired(a,"transferFormat"),Ut.isIn(a,en,"transferFormat"),this._logger.log(ge.Trace,"(WebSockets transport) Connecting.");let o;return this._accessTokenFactory&&(o=await this._accessTokenFactory()),new Promise((l,r)=>{t=t.replace(/^http/,"ws");let d;const f=this._httpClient.getCookieString(t);let g=!1;if(At.isNode||At.isReactNative){const h={},[m,w]=Gi();h[m]=w,o&&(h[Hs.Authorization]=`Bearer ${o}`),f&&(h[Hs.Cookie]=f),d=new this._webSocketConstructor(t,void 0,{headers:{...h,...this._headers}})}else o&&(t+=(t.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(o)}`);d||(d=new this._webSocketConstructor(t)),a===en.Binary&&(d.binaryType="arraybuffer"),d.onopen=h=>{this._logger.log(ge.Information,`WebSocket connected to ${t}.`),this._webSocket=d,g=!0,l()},d.onerror=h=>{let m=null;typeof ErrorEvent<"u"&&h instanceof ErrorEvent?m=h.error:m="There was an error with the transport",this._logger.log(ge.Information,`(WebSockets transport) ${m}.`)},d.onmessage=h=>{if(this._logger.log(ge.Trace,`(WebSockets transport) data received. ${oo(h.data,this._logMessageContent)}.`),this.onreceive)try{this.onreceive(h.data)}catch(m){this._close(m);return}},d.onclose=h=>{if(g)this._close(h);else{let m=null;typeof ErrorEvent<"u"&&h instanceof ErrorEvent?m=h.error:m="WebSocket failed to connect. The connection could not be found on the server, either the endpoint may not be a SignalR endpoint, the connection ID is not present on the server, or there is a proxy blocking WebSockets. If you have multiple servers check that sticky sessions are enabled.",r(new Error(m))}}})}send(t){return this._webSocket&&this._webSocket.readyState===this._webSocketConstructor.OPEN?(this._logger.log(ge.Trace,`(WebSockets transport) sending data. ${oo(t,this._logMessageContent)}.`),this._webSocket.send(t),Promise.resolve()):Promise.reject("WebSocket is not in the OPEN state")}stop(){return this._webSocket&&this._close(void 0),Promise.resolve()}_close(t){this._webSocket&&(this._webSocket.onclose=()=>{},this._webSocket.onmessage=()=>{},this._webSocket.onerror=()=>{},this._webSocket.close(),this._webSocket=void 0),this._logger.log(ge.Trace,"(WebSockets transport) socket closed."),this.onclose&&(this._isCloseEvent(t)&&(t.wasClean===!1||t.code!==1e3)?this.onclose(new Error(`WebSocket closed with status code: ${t.code} (${t.reason||"no reason given"}).`)):t instanceof Error?this.onclose(t):this.onclose())}_isCloseEvent(t){return t&&typeof t.wasClean=="boolean"&&typeof t.code=="number"}}const $x=100;class nC{constructor(t,a={}){if(this._stopPromiseResolver=()=>{},this.features={},this._negotiateVersion=1,Ut.isRequired(t,"url"),this._logger=DA(a.logger),this.baseUrl=this._resolveUrl(t),a=a||{},a.logMessageContent=a.logMessageContent===void 0?!1:a.logMessageContent,typeof a.withCredentials=="boolean"||a.withCredentials===void 0)a.withCredentials=a.withCredentials===void 0?!0:a.withCredentials;else throw new Error("withCredentials option was not a 'boolean' or 'undefined' value");a.timeout=a.timeout===void 0?100*1e3:a.timeout;let o=null,l=null;if(At.isNode&&typeof require<"u"){const r=typeof __webpack_require__=="function"?__non_webpack_require__:require;o=r("ws"),l=r("eventsource")}!At.isNode&&typeof WebSocket<"u"&&!a.WebSocket?a.WebSocket=WebSocket:At.isNode&&!a.WebSocket&&o&&(a.WebSocket=o),!At.isNode&&typeof EventSource<"u"&&!a.EventSource?a.EventSource=EventSource:At.isNode&&!a.EventSource&&typeof l<"u"&&(a.EventSource=l),this._httpClient=new KA(a.httpClient||new $A(this._logger),a.accessTokenFactory),this._connectionState="Disconnected",this._connectionStarted=!1,this._options=a,this.onreceive=null,this.onclose=null}async start(t){if(t=t||en.Binary,Ut.isIn(t,en,"transferFormat"),this._logger.log(ge.Debug,`Starting connection with transfer format '${en[t]}'.`),this._connectionState!=="Disconnected")return Promise.reject(new Error("Cannot start an HttpConnection that is not in the 'Disconnected' state."));if(this._connectionState="Connecting",this._startInternalPromise=this._startInternal(t),await this._startInternalPromise,this._connectionState==="Disconnecting"){const a="Failed to start the HttpConnection before stop() was called.";return this._logger.log(ge.Error,a),await this._stopPromise,Promise.reject(new Qn(a))}else if(this._connectionState!=="Connected"){const a="HttpConnection.startInternal completed gracefully but didn't enter the connection into the connected state!";return this._logger.log(ge.Error,a),Promise.reject(new Qn(a))}this._connectionStarted=!0}send(t){return this._connectionState!=="Connected"?Promise.reject(new Error("Cannot send data if the connection is not in the 'Connected' State.")):(this._sendQueue||(this._sendQueue=new sm(this.transport)),this._sendQueue.send(t))}async stop(t){if(this._connectionState==="Disconnected")return this._logger.log(ge.Debug,`Call to HttpConnection.stop(${t}) ignored because the connection is already in the disconnected state.`),Promise.resolve();if(this._connectionState==="Disconnecting")return this._logger.log(ge.Debug,`Call to HttpConnection.stop(${t}) ignored because the connection is already in the disconnecting state.`),this._stopPromise;this._connectionState="Disconnecting",this._stopPromise=new Promise(a=>{this._stopPromiseResolver=a}),await this._stopInternal(t),await this._stopPromise}async _stopInternal(t){this._stopError=t;try{await this._startInternalPromise}catch{}if(this.transport){try{await this.transport.stop()}catch(a){this._logger.log(ge.Error,`HttpConnection.transport.stop() threw error '${a}'.`),this._stopConnection()}this.transport=void 0}else this._logger.log(ge.Debug,"HttpConnection.transport is undefined in HttpConnection.stop() because start() failed.")}async _startInternal(t){let a=this.baseUrl;this._accessTokenFactory=this._options.accessTokenFactory,this._httpClient._accessTokenFactory=this._accessTokenFactory;try{if(this._options.skipNegotiation)if(this._options.transport===Vt.WebSockets)this.transport=this._constructTransport(Vt.WebSockets),await this._startTransport(a,t);else throw new Error("Negotiation can only be skipped when using the WebSocket transport directly.");else{let o=null,l=0;do{if(o=await this._getNegotiationResponse(a),this._connectionState==="Disconnecting"||this._connectionState==="Disconnected")throw new Qn("The connection was stopped during negotiation.");if(o.error)throw new Error(o.error);if(o.ProtocolVersion)throw new Error("Detected a connection attempt to an ASP.NET SignalR Server. This client only supports connecting to an ASP.NET Core SignalR Server. See https://aka.ms/signalr-core-differences for details.");if(o.url&&(a=o.url),o.accessToken){const r=o.accessToken;this._accessTokenFactory=()=>r,this._httpClient._accessToken=r,this._httpClient._accessTokenFactory=void 0}l++}while(o.url&&l<$x);if(l===$x&&o.url)throw new Error("Negotiate redirection limit exceeded.");await this._createTransport(a,this._options.transport,o,t)}this.transport instanceof Gx&&(this.features.inherentKeepAlive=!0),this._connectionState==="Connecting"&&(this._logger.log(ge.Debug,"The HttpConnection connected successfully."),this._connectionState="Connected")}catch(o){return this._logger.log(ge.Error,"Failed to start the connection: "+o),this._connectionState="Disconnected",this.transport=void 0,this._stopPromiseResolver(),Promise.reject(o)}}async _getNegotiationResponse(t){const a={},[o,l]=Gi();a[o]=l;const r=this._resolveNegotiateUrl(t);this._logger.log(ge.Debug,`Sending negotiation request: ${r}.`);try{const d=await this._httpClient.post(r,{content:"",headers:{...a,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials});if(d.statusCode!==200)return Promise.reject(new Error(`Unexpected status code returned from negotiate '${d.statusCode}'`));const f=JSON.parse(d.content);return(!f.negotiateVersion||f.negotiateVersion<1)&&(f.connectionToken=f.connectionId),f.useStatefulReconnect&&this._options._useStatefulReconnect!==!0?Promise.reject(new Ux("Client didn't negotiate Stateful Reconnect but the server did.")):f}catch(d){let f="Failed to complete negotiation with the server: "+d;return d instanceof Us&&d.statusCode===404&&(f=f+" Either this is not a SignalR endpoint or there is a proxy blocking the connection."),this._logger.log(ge.Error,f),Promise.reject(new Ux(f))}}_createConnectUrl(t,a){return a?t+(t.indexOf("?")===-1?"?":"&")+`id=${a}`:t}async _createTransport(t,a,o,l){let r=this._createConnectUrl(t,o.connectionToken);if(this._isITransport(a)){this._logger.log(ge.Debug,"Connection was provided an instance of ITransport, using that directly."),this.transport=a,await this._startTransport(r,l),this.connectionId=o.connectionId;return}const d=[],f=o.availableTransports||[];let g=o;for(const h of f){const m=this._resolveTransportOrError(h,a,l,g?.useStatefulReconnect===!0);if(m instanceof Error)d.push(`${h.transport} failed:`),d.push(m);else if(this._isITransport(m)){if(this.transport=m,!g){try{g=await this._getNegotiationResponse(t)}catch(w){return Promise.reject(w)}r=this._createConnectUrl(t,g.connectionToken)}try{await this._startTransport(r,l),this.connectionId=g.connectionId;return}catch(w){if(this._logger.log(ge.Error,`Failed to start the transport '${h.transport}': ${w}`),g=void 0,d.push(new MA(`${h.transport} failed: ${w}`,Vt[h.transport])),this._connectionState!=="Connecting"){const x="Failed to select transport before stop() was called.";return this._logger.log(ge.Debug,x),Promise.reject(new Qn(x))}}}}return d.length>0?Promise.reject(new OA(`Unable to connect to the server with any of the available transports. ${d.join(" ")}`,d)):Promise.reject(new Error("None of the transports supported by the client are supported by the server."))}_constructTransport(t){switch(t){case Vt.WebSockets:if(!this._options.WebSocket)throw new Error("'WebSocket' is not supported in your environment.");return new tC(this._httpClient,this._accessTokenFactory,this._logger,this._options.logMessageContent,this._options.WebSocket,this._options.headers||{});case Vt.ServerSentEvents:if(!this._options.EventSource)throw new Error("'EventSource' is not supported in your environment.");return new eC(this._httpClient,this._httpClient._accessToken,this._logger,this._options);case Vt.LongPolling:return new Gx(this._httpClient,this._logger,this._options);default:throw new Error(`Unknown transport: ${t}.`)}}_startTransport(t,a){return this.transport.onreceive=this.onreceive,this.features.reconnect?this.transport.onclose=async o=>{let l=!1;if(this.features.reconnect)try{this.features.disconnected(),await this.transport.connect(t,a),await this.features.resend()}catch{l=!0}else{this._stopConnection(o);return}l&&this._stopConnection(o)}:this.transport.onclose=o=>this._stopConnection(o),this.transport.connect(t,a)}_resolveTransportOrError(t,a,o,l){const r=Vt[t.transport];if(r==null)return this._logger.log(ge.Debug,`Skipping transport '${t.transport}' because it is not supported by this client.`),new Error(`Skipping transport '${t.transport}' because it is not supported by this client.`);if(aC(a,r))if(t.transferFormats.map(f=>en[f]).indexOf(o)>=0){if(r===Vt.WebSockets&&!this._options.WebSocket||r===Vt.ServerSentEvents&&!this._options.EventSource)return this._logger.log(ge.Debug,`Skipping transport '${Vt[r]}' because it is not supported in your environment.'`),new AA(`'${Vt[r]}' is not supported in your environment.`,r);this._logger.log(ge.Debug,`Selecting transport '${Vt[r]}'.`);try{return this.features.reconnect=r===Vt.WebSockets?l:void 0,this._constructTransport(r)}catch(f){return f}}else return this._logger.log(ge.Debug,`Skipping transport '${Vt[r]}' because it does not support the requested transfer format '${en[o]}'.`),new Error(`'${Vt[r]}' does not support ${en[o]}.`);else return this._logger.log(ge.Debug,`Skipping transport '${Vt[r]}' because it was disabled by the client.`),new CA(`'${Vt[r]}' is disabled by the client.`,r)}_isITransport(t){return t&&typeof t=="object"&&"connect"in t}_stopConnection(t){if(this._logger.log(ge.Debug,`HttpConnection.stopConnection(${t}) called while in state ${this._connectionState}.`),this.transport=void 0,t=this._stopError||t,this._stopError=void 0,this._connectionState==="Disconnected"){this._logger.log(ge.Debug,`Call to HttpConnection.stopConnection(${t}) was ignored because the connection is already in the disconnected state.`);return}if(this._connectionState==="Connecting")throw this._logger.log(ge.Warning,`Call to HttpConnection.stopConnection(${t}) was ignored because the connection is still in the connecting state.`),new Error(`HttpConnection.stopConnection(${t}) was called while the connection is still in the connecting state.`);if(this._connectionState==="Disconnecting"&&this._stopPromiseResolver(),t?this._logger.log(ge.Error,`Connection disconnected with error '${t}'.`):this._logger.log(ge.Information,"Connection disconnected."),this._sendQueue&&(this._sendQueue.stop().catch(a=>{this._logger.log(ge.Error,`TransportSendQueue.stop() threw error '${a}'.`)}),this._sendQueue=void 0),this.connectionId=void 0,this._connectionState="Disconnected",this._connectionStarted){this._connectionStarted=!1;try{this.onclose&&this.onclose(t)}catch(a){this._logger.log(ge.Error,`HttpConnection.onclose(${t}) threw error '${a}'.`)}}}_resolveUrl(t){if(t.lastIndexOf("https://",0)===0||t.lastIndexOf("http://",0)===0)return t;if(!At.isBrowser)throw new Error(`Cannot resolve '${t}'.`);const a=window.document.createElement("a");return a.href=t,this._logger.log(ge.Information,`Normalizing '${t}' to '${a.href}'.`),a.href}_resolveNegotiateUrl(t){const a=new URL(t);a.pathname.endsWith("/")?a.pathname+="negotiate":a.pathname+="/negotiate";const o=new URLSearchParams(a.searchParams);return o.has("negotiateVersion")||o.append("negotiateVersion",this._negotiateVersion.toString()),o.has("useStatefulReconnect")?o.get("useStatefulReconnect")==="true"&&(this._options._useStatefulReconnect=!0):this._options._useStatefulReconnect===!0&&o.append("useStatefulReconnect","true"),a.search=o.toString(),a.toString()}}function aC(s,t){return!s||(t&s)!==0}class sm{constructor(t){this._transport=t,this._buffer=[],this._executing=!0,this._sendBufferedData=new Vl,this._transportResult=new Vl,this._sendLoopPromise=this._sendLoop()}send(t){return this._bufferData(t),this._transportResult||(this._transportResult=new Vl),this._transportResult.promise}stop(){return this._executing=!1,this._sendBufferedData.resolve(),this._sendLoopPromise}_bufferData(t){if(this._buffer.length&&typeof this._buffer[0]!=typeof t)throw new Error(`Expected data to be of type ${typeof this._buffer} but was of type ${typeof t}`);this._buffer.push(t),this._sendBufferedData.resolve()}async _sendLoop(){for(;;){if(await this._sendBufferedData.promise,!this._executing){this._transportResult&&this._transportResult.reject("Connection stopped.");break}this._sendBufferedData=new Vl;const t=this._transportResult;this._transportResult=void 0;const a=typeof this._buffer[0]=="string"?this._buffer.join(""):sm._concatBuffers(this._buffer);this._buffer.length=0;try{await this._transport.send(a),t.resolve()}catch(o){t.reject(o)}}}static _concatBuffers(t){const a=t.map(r=>r.byteLength).reduce((r,d)=>r+d),o=new Uint8Array(a);let l=0;for(const r of t)o.set(new Uint8Array(r),l),l+=r.byteLength;return o.buffer}}class Vl{constructor(){this.promise=new Promise((t,a)=>[this._resolver,this._rejecter]=[t,a])}resolve(){this._resolver()}reject(t){this._rejecter(t)}}const sC="json";class iC{constructor(){this.name=sC,this.version=2,this.transferFormat=en.Text}parseMessages(t,a){if(typeof t!="string")throw new Error("Invalid input for JSON hub protocol. Expected a string.");if(!t)return[];a===null&&(a=ro.instance);const o=Cn.parse(t),l=[];for(const r of o){const d=JSON.parse(r);if(typeof d.type!="number")throw new Error("Invalid payload.");switch(d.type){case Ge.Invocation:this._isInvocationMessage(d);break;case Ge.StreamItem:this._isStreamItemMessage(d);break;case Ge.Completion:this._isCompletionMessage(d);break;case Ge.Ping:break;case Ge.Close:break;case Ge.Ack:this._isAckMessage(d);break;case Ge.Sequence:this._isSequenceMessage(d);break;default:a.log(ge.Information,"Unknown message type '"+d.type+"' ignored.");continue}l.push(d)}return l}writeMessage(t){return Cn.write(JSON.stringify(t))}_isInvocationMessage(t){this._assertNotEmptyString(t.target,"Invalid payload for Invocation message."),t.invocationId!==void 0&&this._assertNotEmptyString(t.invocationId,"Invalid payload for Invocation message.")}_isStreamItemMessage(t){if(this._assertNotEmptyString(t.invocationId,"Invalid payload for StreamItem message."),t.item===void 0)throw new Error("Invalid payload for StreamItem message.")}_isCompletionMessage(t){if(t.result&&t.error)throw new Error("Invalid payload for Completion message.");!t.result&&t.error&&this._assertNotEmptyString(t.error,"Invalid payload for Completion message."),this._assertNotEmptyString(t.invocationId,"Invalid payload for Completion message.")}_isAckMessage(t){if(typeof t.sequenceId!="number")throw new Error("Invalid SequenceId for Ack message.")}_isSequenceMessage(t){if(typeof t.sequenceId!="number")throw new Error("Invalid SequenceId for Sequence message.")}_assertNotEmptyString(t,a){if(typeof t!="string"||t==="")throw new Error(a)}}const rC={trace:ge.Trace,debug:ge.Debug,info:ge.Information,information:ge.Information,warn:ge.Warning,warning:ge.Warning,error:ge.Error,critical:ge.Critical,none:ge.None};function oC(s){const t=rC[s.toLowerCase()];if(typeof t<"u")return t;throw new Error(`Unknown log level: ${s}`)}class lC{configureLogging(t){if(Ut.isRequired(t,"logging"),cC(t))this.logger=t;else if(typeof t=="string"){const a=oC(t);this.logger=new cc(a)}else this.logger=new cc(t);return this}withUrl(t,a){return Ut.isRequired(t,"url"),Ut.isNotEmpty(t,"url"),this.url=t,typeof a=="object"?this.httpConnectionOptions={...this.httpConnectionOptions,...a}:this.httpConnectionOptions={...this.httpConnectionOptions,transport:a},this}withHubProtocol(t){return Ut.isRequired(t,"protocol"),this.protocol=t,this}withAutomaticReconnect(t){if(this.reconnectPolicy)throw new Error("A reconnectPolicy has already been set.");return t?Array.isArray(t)?this.reconnectPolicy=new Px(t):this.reconnectPolicy=t:this.reconnectPolicy=new Px,this}withServerTimeout(t){return Ut.isRequired(t,"milliseconds"),this._serverTimeoutInMilliseconds=t,this}withKeepAliveInterval(t){return Ut.isRequired(t,"milliseconds"),this._keepAliveIntervalInMilliseconds=t,this}withStatefulReconnect(t){return this.httpConnectionOptions===void 0&&(this.httpConnectionOptions={}),this.httpConnectionOptions._useStatefulReconnect=!0,this._statefulReconnectBufferSize=t?.bufferSize,this}build(){const t=this.httpConnectionOptions||{};if(t.logger===void 0&&(t.logger=this.logger),!this.url)throw new Error("The 'HubConnectionBuilder.withUrl' method must be called before building the connection.");const a=new nC(this.url,t);return am.create(a,this.logger||ro.instance,this.protocol||new iC,this.reconnectPolicy,this._serverTimeoutInMilliseconds,this._keepAliveIntervalInMilliseconds,this._statefulReconnectBufferSize)}}function cC(s){return s.log!==void 0}class uC{connection=null;reconnectAttempts=0;reconnectTimer=null;eventHandlers=new Map;constructor(){this.initializeConnection()}initializeConnection(){this.connection=new lC().withUrl(`${ic.WS_URL}/ws`,{withCredentials:!0}).withAutomaticReconnect([0,2e3,1e4,3e4]).build(),this.setupEventHandlers(),this.setupConnectionHandlers()}setupEventHandlers(){this.connection&&(this.connection.on("matchCreated",t=>{console.log(" [SignalR] matchCreated event:",t),this.emit("matchCreated",t)}),this.connection.on("matchJoined",t=>{console.log(" [SignalR] matchJoined event:",t),this.emit("matchJoined",t)}),this.connection.on("matchInProgress",t=>{console.log(" [SignalR] matchInProgress event:",t),this.emit("matchInProgress",t)}),this.connection.on("matchFinalized",t=>{console.log(" [SignalR] matchFinalized event:",t),this.emit("matchFinalized",t)}),this.connection.on("matchRefunded",t=>{console.log(" [SignalR] matchRefunded event:",t),this.emit("matchRefunded",t)}),this.connection.on("feed:latest",t=>{this.emit("feed:latest",t)}),this.connection.on("feed:append",t=>{this.emit("feed:append",t)}),this.connection.on("matches:latest",t=>{this.emit("matches:latest",t)}),this.connection.on("matches:update",t=>{this.emit("matches:update",t)}),this.connection.on("match:joined",t=>{this.emit("match:joined",t)}),this.connection.on("match:left",t=>{this.emit("match:left",t)}),this.connection.on("invitationReceived",t=>{this.emit("invitationReceived",t)}),this.connection.on("invitationAccepted",t=>{this.emit("invitationAccepted",t)}),this.connection.on("invitationDeclined",t=>{this.emit("invitationDeclined",t)}),this.connection.on("invitationCancelled",t=>{this.emit("invitationCancelled",t)}))}setupConnectionHandlers(){this.connection&&(this.connection.onclose(t=>{console.log(" [SignalR] Connection closed:",t),this.emit("connectionClosed",t),this.scheduleReconnect()}),this.connection.onreconnecting(t=>{console.log(" [SignalR] Reconnecting...",t),this.emit("reconnecting",t)}),this.connection.onreconnected(t=>{console.log(" [SignalR] Reconnected! Connection ID:",t),this.reconnectAttempts=0,this.emit("reconnected",t)}))}async connect(){if(this.connection||(console.log(" [SignalR] Initializing connection..."),this.initializeConnection()),this.connection?.state===st.Connected){console.log(" [SignalR] Already connected");return}try{console.log(" [SignalR] Connecting to:",`${ic.WS_URL}/ws`),console.log(" [SignalR] State before connect:",this.connection?.state),await this.connection?.start(),console.log(" [SignalR] Connected successfully! Connection ID:",this.connection?.connectionId),console.log(" [SignalR] State after connect:",this.connection?.state),this.emit("connected")}catch(t){console.error(" [SignalR] Connection failed:",t),this.emit("connectionFailed",t),this.scheduleReconnect()}}async disconnect(){this.connection&&(await this.connection.stop(),this.connection=null)}scheduleReconnect(){if(this.reconnectAttempts>=k0.MAX_RECONNECT_ATTEMPTS){console.log("Max reconnection attempts reached"),this.emit("maxReconnectAttemptsReached");return}this.reconnectTimer&&clearTimeout(this.reconnectTimer);const t=k0.RECONNECT_INTERVAL*Math.pow(2,this.reconnectAttempts);this.reconnectAttempts++,this.reconnectTimer=window.setTimeout(()=>{this.connect()},t)}async joinLobby(){this.connection?.state===st.Connected&&await this.connection.invoke("JoinLobby")}async leaveLobby(){this.connection?.state===st.Connected&&await this.connection.invoke("LeaveLobby")}async joinMatchGroup(t){this.connection?.state===st.Connected&&await this.connection.invoke("JoinMatchGroup",t)}async leaveMatchGroup(t){this.connection?.state===st.Connected&&await this.connection.invoke("LeaveMatchGroup",t)}async getLatestFeed(){this.connection?.state===st.Connected&&await this.connection.invoke("GetLatestFeed")}async getLatestMatches(){this.connection?.state===st.Connected&&await this.connection.invoke("GetLatestMatches")}async joinMatch(t){this.connection?.state===st.Connected&&await this.connection.invoke("JoinMatch",t)}async leaveMatch(t){this.connection?.state===st.Connected&&await this.connection.invoke("LeaveMatch",t)}on(t,a){this.eventHandlers.has(t)||this.eventHandlers.set(t,[]),this.eventHandlers.get(t).push(a)}off(t,a){const o=this.eventHandlers.get(t);if(o){const l=o.indexOf(a);l>-1&&o.splice(l,1)}}emit(t,a){const o=this.eventHandlers.get(t);o&&o.forEach(l=>l(a))}get isConnected(){return this.connection?.state===st.Connected}get connectionState(){return this.connection?.state}}const Tt=new uC,ls={async getMatches(s={}){const t=new URLSearchParams;return s.status&&t.append("status",s.status),s.gameType&&t.append("gameType",s.gameType),s.gameMode&&t.append("gameMode",s.gameMode),s.matchMode&&t.append("matchMode",s.matchMode),s.teamSize&&t.append("teamSize",s.teamSize),s.isPrivate!==void 0&&t.append("isPrivate",s.isPrivate.toString()),s.page&&t.append("page",s.page.toString()),s.pageSize&&t.append("pageSize",s.pageSize.toString()),Ft.get(`/api/matches?${t.toString()}`)},async getActiveMatches(s=1,t=20){return Ft.get(`/api/matches/active?page=${s}&pageSize=${t}`)},async getRecentMatches(s=10){return Ft.get(`/api/matches/recent?count=${s}`)},async getMatch(s){return Ft.get(`/api/matches/${s}`)},async joinMatch(s){return Ft.post(`/api/matches/${s}/join`)}},dC=s=>{console.log("[gameModeMapper] Input gameMode:",s);const a={PickHigher1v3:"PickOneFromThree",PickHigher3v9:"PickThreeFromNine",PickHigher5v16:"PickFiveFromSixteen",Plinko3Balls:"Plinko3Balls",Plinko5Balls:"Plinko5Balls",Plinko7Balls:"Plinko7Balls",Miner1v9:"Miner1v9",Miner3v16:"Miner3v16",Miner5v25:"Miner5v25",GoldBars1v9:"GoldBars1v9",GoldBars3v16:"GoldBars3v16",GoldBars5v25:"GoldBars5v25"}[s]||"PickThreeFromNine";return console.log("[gameModeMapper] Mapped to:",a),a},xf=s=>({OneVOne:"Solo",TwoVTwo:"Duo",FiveVFive:"Team",OneVTen:"Team",TwoVTwenty:"Team",FourVForty:"Team","1v1":"Solo","2v2":"Duo","5v5":"Team","1v10":"Team","2v20":"Team","4v40":"Team"})[s]||"Solo",Fl=s=>({OneVOne:2,TwoVTwo:4,FiveVFive:10,OneVTen:11,TwoVTwenty:22,FourVForty:44,"1v1":2,"2v2":4,"5v5":10,"1v10":11,"2v20":22,"4v40":44})[s]||2,rb=(s,t,a)=>{const o=s==="PickHigher"?"Pick Higher":s==="Plinko"?"Plinko":s==="Miner"?"Miner":s==="GoldBars"?"Gold Bars":s;let l=t;t==="PickHigher1v3"?l="1v3":t==="PickHigher3v9"?l="3v9":t==="PickHigher5v16"?l="5v16":t==="Plinko3Balls"?l="3 balls":t==="Plinko5Balls"?l="5 balls":t==="Plinko7Balls"?l="7 balls":t==="Miner1v9"?l="1v9":t==="Miner3v16"?l="3v16":t==="Miner5v25"?l="5v25":t==="GoldBars1v9"?l="1v9":t==="GoldBars3v16"?l="3v16":t==="GoldBars5v25"&&(l="5v25");let r=a;return(a.includes("V")||a.includes("One")||a.includes("Two")||a.includes("Five")||a.includes("Four"))&&(r=a.replace("VOne","v1").replace("VTwo","v2").replace("VFive","v5").replace("VTen","v10").replace("VTwenty","v20").replace("VForty","v40").replace("One","1").replace("Two","2").replace("Four","4").replace("Five","5")),`${o}  ${l}  ${r}`},ob=()=>{const{addFeedItemToTop:s,addMatch:t,updateMatch:a,removeMatch:o,setLoading:l,setFeed:r}=Ys(),d=D.useRef(!1);return D.useEffect(()=>d.current?void 0:(Tt.on("matchCreated",g=>{if(console.log(" [Arena] Match created:",g),g.status==="Resolved"||g.status==="Refunded"){console.log(" [Arena] Match already ended, skipping");return}const h=Fl(g.teamSize||"OneVOne"),m={id:g.matchPda,matchPda:g.matchPda,creator:g.creatorPubkey||g.creator||"",stake:g.stakeLamports/1e9,playersReady:g.participants?.length||0,playersMax:h,endsAt:g.deadlineTs*1e3,createdAt:g.createdAt?new Date(g.createdAt).getTime():void 0,gameStartTime:g.gameStartTime?new Date(g.gameStartTime).getTime():void 0,gameType:g.gameType,gameMode:g.gameMode,matchMode:g.matchMode,teamSize:g.teamSize,status:g.status};t(m)}),Tt.on("matchJoined",g=>{console.log("Match joined:",g);const h=Fl(g.teamSize||"OneVOne"),m={id:g.matchPda,matchPda:g.matchPda,creator:g.creatorPubkey||g.creator||"",stake:g.stakeLamports/1e9,playersReady:g.participants?.length||0,playersMax:h,endsAt:g.deadlineTs*1e3,createdAt:g.createdAt?new Date(g.createdAt).getTime():void 0,gameStartTime:g.gameStartTime?new Date(g.gameStartTime).getTime():void 0,gameType:g.gameType,gameMode:g.gameMode,matchMode:g.matchMode,teamSize:g.teamSize,status:g.status};a(m)}),Tt.on("matchInProgress",g=>{console.log(" [Arena] Match in progress:",g);const h=Fl(g.teamSize||"OneVOne"),m={id:g.matchPda,matchPda:g.matchPda,creator:g.creatorPubkey||g.creator||"",stake:g.stakeLamports/1e9,playersReady:g.participants?.length||0,playersMax:h,endsAt:g.deadlineTs*1e3,createdAt:g.createdAt?new Date(g.createdAt).getTime():void 0,gameStartTime:g.gameStartTime?new Date(g.gameStartTime).getTime():void 0,gameType:g.gameType,gameMode:g.gameMode,matchMode:g.matchMode,teamSize:g.teamSize,status:"InProgress"};a(m)}),Tt.on("matchFinalized",g=>{console.log(" [Arena] Match finalized:",g),o(g.matchPda),console.log(" [Arena] Removed finalized match from active list")}),Tt.on("matchRefunded",g=>{console.log("Match refunded:",g),o(g.matchPda)}),Tt.on("feed:append",g=>{console.log(" [Arena] Feed item received:",g);const h=g.participants?.find(w=>w.isWinner);if(!h){console.warn("No winner found in feed data");return}const m={id:g.matchPda,matchPda:g.matchPda,username:h.username&&h.username.trim()!==""?h.username:h.pubkey.substring(0,8)+"...",solAmount:g.stakeLamports/1e9,gameType:g.gameType,gameMode:g.gameMode,matchType:g.teamSize||"OneVOne",winnerSide:g.winnerSide,timestamp:new Date(g.resolvedAt).getTime()};s(m)}),(async()=>{try{l(!0),await Tt.connect(),(await ls.getActiveMatches(1,20)).items.map(m=>{const w=Fl(m.teamSize||"OneVOne");return{id:m.matchPda,matchPda:m.matchPda,creator:m.creatorPubkey||m.creator||"",stake:m.stakeLamports/1e9,playersReady:m.participants?.length||0,playersMax:w,endsAt:m.deadlineTs*1e3,createdAt:m.createdAt?new Date(m.createdAt).getTime():void 0,gameStartTime:m.gameStartTime?new Date(m.gameStartTime).getTime():void 0,gameType:m.gameType,gameMode:m.gameMode,matchMode:m.matchMode,teamSize:m.teamSize,status:m.status}}).forEach(t);try{const w=(await ls.getRecentMatches(10)).filter(x=>x.participants&&x.participants.length>0).map(x=>{const p=x.participants.find(v=>v.isWinner);return p?{id:x.matchPda,matchPda:x.matchPda,username:p.username&&p.username.trim()!==""?p.username:p.pubkey.substring(0,8)+"...",solAmount:x.stakeLamports/1e9,gameType:x.gameType,gameMode:x.gameMode,matchType:x.teamSize||"OneVOne",winnerSide:x.winnerSide??0,timestamp:new Date(x.resolvedAt).getTime()}:null}).filter(x=>x!==null);r(w),console.log(" [Arena] Loaded initial feed:",w.length,"items")}catch(m){console.error("Failed to load initial feed:",m)}}catch(g){console.error("Failed to initialize arena:",g)}finally{l(!1)}})(),d.current=!0,()=>{d.current=!1}),[s,t,a,o,l,r]),{}},Vx=({className:s=""})=>{const t=ka(),a=()=>{t("/matches")},o=()=>{t("/demo")};return u.jsxs(ye.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,ease:"easeOut"},className:`text-center space-y-8 ${s}`,children:[u.jsxs(ye.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},className:"text-4xl md:text-5xl lg:text-6xl font-display font-bold leading-tight",style:{fontSize:"clamp(2rem, 5vw, 3.75rem)"},children:[u.jsx("span",{className:"block text-txt-base mb-2",children:"Risk your"}),u.jsx("span",{className:"block neon-text text-5xl md:text-6xl lg:text-7xl",children:"SOL"}),u.jsx("span",{className:"block text-txt-base mt-2",children:"Win big."})]}),u.jsx(ye.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.4},className:"text-lg md:text-xl text-txt-muted max-w-2xl mx-auto leading-relaxed",children:"The ultimate PvP gaming platform on Solana. Compete in exciting card and chest selection games, climb the leaderboards, and earn real SOL rewards."}),u.jsxs(ye.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.6},className:"flex flex-col sm:flex-row gap-4 justify-center items-center",children:[u.jsx(Se,{size:"lg",variant:"neon",breathing:!0,onClick:a,className:"text-xl px-8 py-4 min-w-[200px]",children:"PLAY NOW"}),u.jsx(Se,{size:"lg",variant:"glass",onClick:o,className:"text-lg px-6 py-3",children:" Try Demo"})]}),u.jsxs(ye.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.8},className:"flex flex-wrap justify-center gap-8 pt-8",children:[u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-2xl md:text-3xl font-bold text-sol-mint",children:"1,000+"}),u.jsx("div",{className:"text-sm text-txt-muted",children:"Active Players"})]}),u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-2xl md:text-3xl font-bold text-sol-purple",children:"50,000+"}),u.jsx("div",{className:"text-sm text-txt-muted",children:"SOL Won"})]}),u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-2xl md:text-3xl font-bold text-sol-mint",children:"3"}),u.jsx("div",{className:"text-sm text-txt-muted",children:"Game Modes"})]})]})]})},vt=ve.forwardRef(({className:s,variant:t="rectangular",width:a,height:o,animation:l="shimmer",...r},d)=>{const f="bg-white/10 rounded",g={text:"h-4 w-full",rectangular:"w-full",circular:"rounded-full"},h={pulse:"animate-pulse",shimmer:"animate-shimmer bg-gradient-to-r from-transparent via-white/20 to-transparent",none:""},m={width:typeof a=="number"?`${a}px`:a,height:typeof o=="number"?`${o}px`:o};return u.jsx("div",{className:Nt(f,g[t],h[l],s),style:m,ref:d,...r})});vt.displayName="Skeleton";const lb=ve.forwardRef(({lines:s=1,className:t,...a},o)=>u.jsx("div",{ref:o,className:Nt("space-y-2",t),...a,children:Array.from({length:s}).map((l,r)=>u.jsx(vt,{variant:"text",className:Nt(r===s-1&&s>1?"w-3/4":"w-full",t)},r))}));lb.displayName="SkeletonText";const fC=ve.forwardRef(({className:s,...t},a)=>u.jsxs("div",{ref:a,className:Nt("glass-card p-4 space-y-3",s),...t,children:[u.jsx(vt,{variant:"text",className:"h-6 w-1/3"}),u.jsx(lb,{lines:2}),u.jsxs("div",{className:"flex space-x-2",children:[u.jsx(vt,{className:"h-8 w-20"}),u.jsx(vt,{className:"h-8 w-20"})]})]}));fC.displayName="SkeletonCard";const mC=ve.forwardRef(({className:s,...t},a)=>u.jsx(vt,{ref:a,variant:"circular",width:40,height:40,className:Nt(s),...t}));mC.displayName="SkeletonAvatar";const Wl=43200,Fx=1440,Wx=Symbol.for("constructDateFrom");function im(s,t){return typeof s=="function"?s(t):s&&typeof s=="object"&&Wx in s?s[Wx](t):s instanceof Date?new s.constructor(t):new Date(t)}function ds(s,t){return im(s,s)}let hC={};function gC(){return hC}function qx(s){const t=ds(s),a=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return a.setUTCFullYear(t.getFullYear()),+s-+a}function rm(s,...t){const a=im.bind(null,s||t.find(o=>typeof o=="object"));return t.map(a)}function nc(s,t){const a=+ds(s)-+ds(t);return a<0?-1:a>0?1:a}function pC(s){return im(s,Date.now())}function xC(s,t,a){const[o,l]=rm(a?.in,s,t),r=o.getFullYear()-l.getFullYear(),d=o.getMonth()-l.getMonth();return r*12+d}function yC(s){return t=>{const o=(s?Math[s]:Math.trunc)(t);return o===0?0:o}}function vC(s,t){return+ds(s)-+ds(t)}function bC(s,t){const a=ds(s);return a.setHours(23,59,59,999),a}function wC(s,t){const a=ds(s),o=a.getMonth();return a.setFullYear(a.getFullYear(),o+1,0),a.setHours(23,59,59,999),a}function SC(s,t){const a=ds(s);return+bC(a)==+wC(a)}function NC(s,t,a){const[o,l,r]=rm(a?.in,s,s,t),d=nc(l,r),f=Math.abs(xC(l,r));if(f<1)return 0;l.getMonth()===1&&l.getDate()>27&&l.setDate(30),l.setMonth(l.getMonth()-d*f);let g=nc(l,r)===-d;SC(o)&&f===1&&nc(o,r)===1&&(g=!1);const h=d*(f-+g);return h===0?0:h}function _C(s,t,a){const o=vC(s,t)/1e3;return yC(a?.roundingMethod)(o)}const RC={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},EC=(s,t,a)=>{let o;const l=RC[s];return typeof l=="string"?o=l:t===1?o=l.one:o=l.other.replace("{{count}}",t.toString()),a?.addSuffix?a.comparison&&a.comparison>0?"in "+o:o+" ago":o};function yf(s){return(t={})=>{const a=t.width?String(t.width):s.defaultWidth;return s.formats[a]||s.formats[s.defaultWidth]}}const TC={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},AC={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},CC={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},MC={date:yf({formats:TC,defaultWidth:"full"}),time:yf({formats:AC,defaultWidth:"full"}),dateTime:yf({formats:CC,defaultWidth:"full"})},OC={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},jC=(s,t,a,o)=>OC[s];function Yr(s){return(t,a)=>{const o=a?.context?String(a.context):"standalone";let l;if(o==="formatting"&&s.formattingValues){const d=s.defaultFormattingWidth||s.defaultWidth,f=a?.width?String(a.width):d;l=s.formattingValues[f]||s.formattingValues[d]}else{const d=s.defaultWidth,f=a?.width?String(a.width):s.defaultWidth;l=s.values[f]||s.values[d]}const r=s.argumentCallback?s.argumentCallback(t):t;return l[r]}}const kC={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},DC={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},BC={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},IC={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},LC={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},zC={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},UC=(s,t)=>{const a=Number(s),o=a%100;if(o>20||o<10)switch(o%10){case 1:return a+"st";case 2:return a+"nd";case 3:return a+"rd"}return a+"th"},HC={ordinalNumber:UC,era:Yr({values:kC,defaultWidth:"wide"}),quarter:Yr({values:DC,defaultWidth:"wide",argumentCallback:s=>s-1}),month:Yr({values:BC,defaultWidth:"wide"}),day:Yr({values:IC,defaultWidth:"wide"}),dayPeriod:Yr({values:LC,defaultWidth:"wide",formattingValues:zC,defaultFormattingWidth:"wide"})};function Xr(s){return(t,a={})=>{const o=a.width,l=o&&s.matchPatterns[o]||s.matchPatterns[s.defaultMatchWidth],r=t.match(l);if(!r)return null;const d=r[0],f=o&&s.parsePatterns[o]||s.parsePatterns[s.defaultParseWidth],g=Array.isArray(f)?GC(f,w=>w.test(d)):PC(f,w=>w.test(d));let h;h=s.valueCallback?s.valueCallback(g):g,h=a.valueCallback?a.valueCallback(h):h;const m=t.slice(d.length);return{value:h,rest:m}}}function PC(s,t){for(const a in s)if(Object.prototype.hasOwnProperty.call(s,a)&&t(s[a]))return a}function GC(s,t){for(let a=0;a<s.length;a++)if(t(s[a]))return a}function $C(s){return(t,a={})=>{const o=t.match(s.matchPattern);if(!o)return null;const l=o[0],r=t.match(s.parsePattern);if(!r)return null;let d=s.valueCallback?s.valueCallback(r[0]):r[0];d=a.valueCallback?a.valueCallback(d):d;const f=t.slice(l.length);return{value:d,rest:f}}}const VC=/^(\d+)(th|st|nd|rd)?/i,FC=/\d+/i,WC={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},qC={any:[/^b/i,/^(a|c)/i]},YC={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},XC={any:[/1/i,/2/i,/3/i,/4/i]},ZC={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},QC={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},KC={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},JC={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},e3={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},t3={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},n3={ordinalNumber:$C({matchPattern:VC,parsePattern:FC,valueCallback:s=>parseInt(s,10)}),era:Xr({matchPatterns:WC,defaultMatchWidth:"wide",parsePatterns:qC,defaultParseWidth:"any"}),quarter:Xr({matchPatterns:YC,defaultMatchWidth:"wide",parsePatterns:XC,defaultParseWidth:"any",valueCallback:s=>s+1}),month:Xr({matchPatterns:ZC,defaultMatchWidth:"wide",parsePatterns:QC,defaultParseWidth:"any"}),day:Xr({matchPatterns:KC,defaultMatchWidth:"wide",parsePatterns:JC,defaultParseWidth:"any"}),dayPeriod:Xr({matchPatterns:e3,defaultMatchWidth:"any",parsePatterns:t3,defaultParseWidth:"any"})},a3={code:"en-US",formatDistance:EC,formatLong:MC,formatRelative:jC,localize:HC,match:n3,options:{weekStartsOn:0,firstWeekContainsDate:1}};function s3(s,t,a){const o=gC(),l=a?.locale??o.locale??a3,r=2520,d=nc(s,t);if(isNaN(d))throw new RangeError("Invalid time value");const f=Object.assign({},a,{addSuffix:a?.addSuffix,comparison:d}),[g,h]=rm(a?.in,...d>0?[t,s]:[s,t]),m=_C(h,g),w=(qx(h)-qx(g))/1e3,x=Math.round((m-w)/60);let p;if(x<2)return a?.includeSeconds?m<5?l.formatDistance("lessThanXSeconds",5,f):m<10?l.formatDistance("lessThanXSeconds",10,f):m<20?l.formatDistance("lessThanXSeconds",20,f):m<40?l.formatDistance("halfAMinute",0,f):m<60?l.formatDistance("lessThanXMinutes",1,f):l.formatDistance("xMinutes",1,f):x===0?l.formatDistance("lessThanXMinutes",1,f):l.formatDistance("xMinutes",x,f);if(x<45)return l.formatDistance("xMinutes",x,f);if(x<90)return l.formatDistance("aboutXHours",1,f);if(x<Fx){const v=Math.round(x/60);return l.formatDistance("aboutXHours",v,f)}else{if(x<r)return l.formatDistance("xDays",1,f);if(x<Wl){const v=Math.round(x/Fx);return l.formatDistance("xDays",v,f)}else if(x<Wl*2)return p=Math.round(x/Wl),l.formatDistance("aboutXMonths",p,f)}if(p=NC(h,g),p<12){const v=Math.round(x/Wl);return l.formatDistance("xMonths",v,f)}else{const v=p%12,b=Math.trunc(p/12);return v<3?l.formatDistance("aboutXYears",b,f):v<9?l.formatDistance("overXYears",b,f):l.formatDistance("almostXYears",b+1,f)}}function i3(s,t){return s3(s,pC(s),t)}const r3=s=>{const t=s.endsWith("Z")?s:`${s}Z`,a=new Date(t);return i3(a,{addSuffix:!0})},Yx=({className:s="",maxItems:t=10,showMore:a=!0})=>{const{feed:o,isLoading:l}=Ys(),[r,d]=D.useState(!1),f=ka(),g=r?o:o.slice(0,t),h=o.length>t,m=x=>{const p=new Date(x);return r3(p.toISOString())},w=x=>{switch(x){case"PickHigher3v9":return"";case"PickHigher5v16":return"";case"PickHigher1v3":return"";case"Plinko3Balls":case"Plinko5Balls":case"Plinko7Balls":return"";case"Miner1v9":case"Miner3v16":case"Miner5v25":return"";default:return""}};return l?u.jsxs(Le,{className:`p-4 ${s}`,children:[u.jsx(Ht,{children:u.jsx(Pt,{className:"text-lg font-display text-sol-purple",children:"Live Feed"})}),u.jsx("div",{className:"space-y-3",children:Array.from({length:5}).map((x,p)=>u.jsx(vt,{className:"h-16 w-full"},p))})]}):u.jsxs(Le,{className:`p-3 lg:p-4 ${s}`,children:[u.jsx(Ht,{children:u.jsxs(Pt,{className:"text-lg font-display text-sol-purple flex items-center",children:[u.jsx("span",{className:"w-2 h-2 bg-sol-mint rounded-full mr-2 animate-pulse"}),"Live Feed"]})}),u.jsxs("div",{className:"space-y-1.5 lg:space-y-2 max-h-96 overflow-y-auto",children:[u.jsx($n,{children:g.map((x,p)=>u.jsx(ye.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},transition:{duration:.3,delay:p*.05},onClick:()=>f(`/match/${x.matchPda}`),className:"feed-item cursor-pointer hover:bg-white/5 p-2 lg:p-3 rounded-lg transition-colors",children:u.jsxs("div",{className:"flex items-center justify-between gap-2 lg:gap-3",children:[u.jsxs("div",{className:"flex items-center space-x-2 lg:space-x-3 flex-1 min-w-0",children:[u.jsx("div",{className:"text-base lg:text-lg flex-shrink-0",children:w(x.gameMode)}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex items-center space-x-1.5 lg:space-x-2 flex-wrap",children:[u.jsx("span",{className:"text-txt-base font-medium text-sm lg:text-base truncate",children:x.username}),u.jsxs("span",{className:"text-sol-mint font-semibold text-sm lg:text-base flex-shrink-0",children:["+",x.solAmount.toFixed(3)," SOL"]})]}),u.jsxs("div",{className:"text-xs text-txt-muted",children:[rb(x.gameType||"PickHigher",x.gameMode,x.matchType),"  ",m(x.timestamp)]})]})]}),u.jsx("div",{className:"text-sol-mint text-xs lg:text-sm font-medium flex-shrink-0",children:"VIEW "})]})},x.id))}),o.length===0&&u.jsx("div",{className:"text-center py-8",children:u.jsx("div",{className:"text-txt-muted text-sm",children:"No recent activity"})})]}),a&&h&&u.jsx("div",{className:"mt-4 text-center",children:u.jsx(Se,{variant:"ghost",size:"sm",onClick:()=>d(!r),className:"text-sol-purple hover:text-sol-mint",children:r?"Show Less":`Show More (${o.length-t} more)`})})]})};function o3(s){if(!s)return null;if(s instanceof Date)return s.getTime();const t=Date.parse(s);return Number.isNaN(t)?null:t}function zf(s,t){const a=o3(s);if(a==null||!Number.isFinite(t)||t<=0)return 0;const l=(Date.now()-a)/1e3,r=Math.ceil(t-l);return r>0?r:0}const Uf=({className:s="",maxItems:t=8,matches:a})=>{const o=ka(),{matches:l,isLoading:r}=Ys(),f=(a||l).filter(_=>{const A=Date.now();return _.status==="Open"||_.status==="Pending"||_.status==="InProgress"?!0:_.status==="Resolved"&&_.resolvedAt?(A-_.resolvedAt)/1e3<5:!1}),[g,h]=D.useState({});D.useEffect(()=>{const _=setInterval(()=>{const A={};f.forEach(C=>{if(C.status==="InProgress"&&C.gameStartTime){const k=zf(new Date(C.gameStartTime),20);A[C.id]=k*1e3}else if((C.status==="Open"||C.status==="Pending")&&C.createdAt){const k=zf(new Date(C.createdAt),120);A[C.id]=k*1e3}else{const k=Date.now(),R=Math.max(0,C.endsAt-k);A[C.id]=R}}),h(A)},1e3);return()=>clearInterval(_)},[f]);const m=_=>{if(_<=0)return"0s";const A=Math.floor(_/6e4),C=Math.floor(_%6e4/1e3);return A>0?`${A}m ${C}s`:`${C}s`},w=_=>{switch(_){case"PickHigher3v9":return"";case"PickHigher5v16":return"";case"PickHigher1v3":return"";case"Plinko3Balls":case"Plinko5Balls":case"Plinko7Balls":return"";case"Miner1v9":case"Miner3v16":case"Miner5v25":return"";default:return""}},x=(_,A)=>Math.round(_/A*100),p=_=>_.status==="Resolved"?"bg-orange-500/10 border-orange-500/30":_.status==="Pending"||_.status==="InProgress"?"bg-blue-500/10 border-blue-500/30":_.status==="Refunded"?"bg-red-500/10 border-red-500/30":"bg-green-500/10 border-green-500/30",v=_=>{switch(_.status){case"Open":return"Open";case"Pending":return"Starting";case"InProgress":return"In Game";case"Resolved":return"Ended";case"Refunded":return"Refunded";default:return"Open"}},b=_=>{switch(_.status){case"Open":return"text-green-400";case"Pending":return"text-yellow-400";case"InProgress":return"text-blue-400";case"Resolved":return"text-orange-400";case"Refunded":return"text-red-400";default:return"text-txt-muted"}},N=_=>{const A=_.matchPda||_.id;o(`/match/${A}`)};return r?u.jsxs(Le,{className:`p-3 lg:p-4 ${s}`,children:[u.jsx(Ht,{children:u.jsx(Pt,{className:"text-lg font-display text-sol-purple",children:"Live Matches"})}),u.jsx("div",{className:"space-y-2 lg:space-y-3",children:Array.from({length:4}).map((_,A)=>u.jsx(vt,{className:"h-20 w-full"},A))})]}):u.jsxs(Le,{className:`p-3 lg:p-4 ${s}`,children:[u.jsx(Ht,{children:u.jsxs(Pt,{className:"text-lg font-display text-sol-purple flex items-center",children:[u.jsx("span",{className:"w-2 h-2 bg-sol-mint rounded-full mr-2 animate-pulse"}),"Live Matches"]})}),u.jsxs("div",{className:"space-y-2 lg:space-y-3 max-h-96 overflow-y-auto",children:[f.filter(_=>_.status!=="Resolved"&&_.status!=="Refunded").slice(0,t).map((_,A)=>{const C=x(_.playersReady,_.playersMax),k=g[_.id]||0,R=_.status==="Open",j=_.status==="Pending"||_.status==="InProgress";return u.jsx(ye.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},transition:{duration:.3,delay:A*.05},className:`match-card ${p(_)} cursor-pointer hover:bg-white/5 transition-colors`,onClick:()=>N(_),children:u.jsxs("div",{className:"flex items-center justify-between gap-2 lg:gap-3",children:[u.jsxs("div",{className:"flex items-center space-x-2 lg:space-x-3 flex-1 min-w-0",children:[u.jsx("div",{className:"text-base lg:text-lg flex-shrink-0",children:w(_.gameMode)}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex items-center space-x-1.5 lg:space-x-2 flex-wrap",children:[u.jsxs("span",{className:"text-txt-base font-medium text-sm lg:text-base",children:[_.stake," SOL"]}),u.jsx("span",{className:"text-txt-muted text-xs lg:text-sm",children:rb(_.gameType||"PickHigher",_.gameMode,_.teamSize||"OneVOne")})]}),u.jsxs("div",{className:"flex items-center space-x-1.5 lg:space-x-2 text-xs text-txt-muted",children:[u.jsxs("span",{children:[_.playersReady,"/",_.playersMax," players"]}),R&&u.jsxs(u.Fragment,{children:[u.jsx("span",{children:""}),u.jsx("span",{children:m(k)})]}),j&&u.jsxs(u.Fragment,{children:[u.jsx("span",{children:""}),_.status==="InProgress"&&(_.gameStartTime??0)>0?u.jsx("span",{className:"text-blue-400",children:m(k)}):u.jsx("span",{className:"text-blue-400",children:"Playing..."})]})]})]})]}),u.jsxs("div",{className:"text-right flex-shrink-0",children:[u.jsx("div",{className:`text-xs lg:text-sm font-semibold mb-0.5 lg:mb-1 ${b(_)}`,children:v(_)}),R&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"text-xs text-txt-muted mb-0.5 lg:mb-1",children:[C,"% full"]}),u.jsx("div",{className:"w-12 lg:w-16 h-1 bg-txt-muted/20 rounded-full overflow-hidden",children:u.jsx("div",{className:"h-full bg-gradient-to-r from-sol-purple to-sol-mint transition-all duration-300",style:{width:`${C}%`}})})]})]})]})},_.id)}),f.length===0&&u.jsx("div",{className:"text-center py-8",children:u.jsx("div",{className:"text-txt-muted text-sm",children:"No active matches"})})]})]})},cb=({isOpen:s,onClose:t})=>{const{joinModalMatchId:a,matches:o}=Ys(),[l,r]=D.useState(!1),[d,f]=D.useState(null),g=o.find(x=>x.id===a);D.useEffect(()=>(s?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[s]),D.useEffect(()=>{const x=p=>{p.key==="Escape"&&t()};return s&&document.addEventListener("keydown",x),()=>{document.removeEventListener("keydown",x)}},[s,t]);const h=async()=>{if(g){r(!0),f(null);try{f("Join match functionality is being implemented via blockchain"),console.log("Join match requested for:",g.id)}catch(x){console.error("Failed to join match:",x),f(x instanceof Error?x.message:"Failed to join match")}finally{r(!1)}}},m=x=>{switch(x){case"PickHigher3v9":return"";case"PickHigher5v16":return"";case"PickHigher1v3":return"";case"Plinko3Balls":case"Plinko5Balls":case"Plinko7Balls":return"";case"Miner1v9":case"Miner3v16":case"Miner5v25":return"";default:return""}},w=x=>{switch(x){case"PickHigher3v9":return"Choose 3 cards from 9 available options. Each card has a hidden value. The player with the highest total wins!";case"PickHigher5v16":return"Select 5 chests from a 4x4 grid. Each chest contains treasures. Find the best combination to win!";case"PickHigher1v3":return"Quick decision time! Choose 1 card from 3 options. Fast-paced action with high stakes!";case"Plinko3Balls":return"Drop 3 balls down the Plinko board. Watch them bounce and land in multiplier slots!";case"Plinko5Balls":return"Drop 5 balls down the Plinko board. More balls, more chances to win!";case"Plinko7Balls":return"Drop 7 balls down the Plinko board. Maximum excitement with maximum balls!";case"Miner1v9":return"Open tiles on a 3x3 grid. Find the prize before hitting the bomb!";case"Miner3v16":return"Open tiles on a 4x4 grid. Find 3 prizes before hitting 3 bombs!";case"Miner5v25":return"Open tiles on a 5x5 grid. Find 5 prizes before hitting 5 bombs!";default:return"An exciting game mode with real SOL rewards."}};return g?u.jsx($n,{children:s&&u.jsxs(u.Fragment,{children:[u.jsx(ye.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50",onClick:t}),u.jsx(ye.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:25,stiffness:200},className:"fixed bottom-0 left-0 right-0 z-50 md:bottom-auto md:top-1/2 md:left-1/2 md:right-auto md:-translate-x-1/2 md:-translate-y-1/2 md:max-w-md md:w-full",children:u.jsxs(Le,{className:"m-4 md:m-0",children:[u.jsx(Ht,{children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx(Pt,{className:"text-xl font-display text-sol-purple",children:"Join Match"}),u.jsx("button",{onClick:t,className:"text-txt-muted hover:text-txt-base transition-colors",children:u.jsx(io,{className:"w-6 h-6"})})]})}),u.jsxs(Zi,{className:"space-y-6",children:[u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-4xl mb-2",children:m(g.gameMode)}),u.jsx("h3",{className:"text-lg font-semibold text-txt-base mb-1",children:g.gameMode}),u.jsx("p",{className:"text-sm text-txt-muted",children:w(g.gameMode)})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-white/10",children:[u.jsx("span",{className:"text-txt-muted",children:"Stake"}),u.jsxs("span",{className:"text-sol-mint font-semibold",children:[g.stake," SOL"]})]}),u.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-white/10",children:[u.jsx("span",{className:"text-txt-muted",children:"Players"}),u.jsxs("span",{className:"text-txt-base",children:[g.playersReady,"/",g.playersMax]})]}),u.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-white/10",children:[u.jsx("span",{className:"text-txt-muted",children:"Time Left"}),u.jsxs("span",{className:"text-txt-base",children:[Math.max(0,Math.floor((g.endsAt-Date.now())/1e3)),"s"]})]})]}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex justify-between text-xs text-txt-muted mb-1",children:[u.jsx("span",{children:"Match Progress"}),u.jsxs("span",{children:[Math.round(g.playersReady/g.playersMax*100),"%"]})]}),u.jsx("div",{className:"w-full h-2 bg-txt-muted/20 rounded-full overflow-hidden",children:u.jsx("div",{className:"h-full bg-gradient-to-r from-sol-purple to-sol-mint transition-all duration-300",style:{width:`${g.playersReady/g.playersMax*100}%`}})})]}),d&&u.jsx("div",{className:"p-3 bg-red-500/10 border border-red-500/20 rounded-lg",children:u.jsx("p",{className:"text-red-400 text-sm",children:d})}),u.jsxs("div",{className:"flex space-x-3",children:[u.jsx(Se,{variant:"ghost",onClick:t,className:"flex-1",disabled:l,children:"Cancel"}),u.jsx(Se,{variant:"neon",onClick:h,className:"flex-1",disabled:g.playersReady>=g.playersMax||l,isLoading:l,children:l?"Joining...":g.playersReady>=g.playersMax?"Match Full":"Join Match"})]})]})]})})]})}):null},nn=()=>u.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden",children:[u.jsx(ye.div,{className:"absolute -top-40 -left-40 w-[680px] h-[680px] rounded-full opacity-50 mix-blend-screen",style:{background:"radial-gradient(circle, rgba(153,69,255,0.4), transparent 60%)",willChange:"transform"},animate:{x:[0,20,0],y:[0,30,0]},transition:{duration:35,repeat:1/0,ease:"easeInOut"}}),u.jsx(ye.div,{className:"absolute -right-52 -top-16 w-[740px] h-[740px] rounded-full opacity-50 mix-blend-screen",style:{background:"radial-gradient(circle, rgba(0,255,163,0.3), transparent 60%)",willChange:"transform"},animate:{x:[0,-25,0],y:[0,40,0]},transition:{duration:40,repeat:1/0,ease:"easeInOut"}}),u.jsx(ye.div,{className:"absolute -bottom-56 left-[15%] w-[700px] h-[700px] rounded-full opacity-50 mix-blend-screen",style:{background:"radial-gradient(circle, rgba(20,241,149,0.2), transparent 65%)",willChange:"transform"},animate:{x:[0,30,0],y:[0,-20,0]},transition:{duration:30,repeat:1/0,ease:"easeInOut"}}),u.jsx("div",{className:"absolute inset-0 opacity-[0.14]",style:{backgroundImage:"linear-gradient(transparent 95%, rgba(255,255,255,0.08) 96%), linear-gradient(90deg, transparent 95%, rgba(255,255,255,0.08) 96%)",backgroundSize:"18px 18px"}})]}),l3=()=>{const{joinModalMatchId:s,setJoinModal:t}=Ys();ob();const a=()=>{t(null)};return u.jsxs("div",{className:"relative min-h-screen bg-bg overflow-hidden",children:[u.jsx(nn,{}),u.jsxs("main",{className:"relative z-10",children:[u.jsx("div",{className:"hidden lg:block",children:u.jsxs("div",{className:"max-w-7xl mx-auto px-4 lg:px-6 py-4 lg:py-8 space-y-4 lg:space-y-8",children:[u.jsx("div",{className:"flex justify-center",children:u.jsx(Vx,{})}),u.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[u.jsx("div",{className:"space-y-6",children:u.jsx(Yx,{className:"h-fit"})}),u.jsx("div",{id:"matches-section",className:"space-y-6",children:u.jsx(Uf,{className:"h-fit"})})]})]})}),u.jsx("div",{className:"lg:hidden",children:u.jsxs("div",{className:"max-w-7xl mx-auto px-3 py-4 space-y-3",children:[u.jsx("div",{className:"text-center",children:u.jsx(Vx,{})}),u.jsx("div",{children:u.jsx(Yx,{})}),u.jsx("div",{id:"matches-section",children:u.jsx(Uf,{})})]})})]}),u.jsx(cb,{isOpen:!!s,onClose:a})]})},c3=()=>{const s=ka(),{connected:t,publicKey:a}=fs(),{matches:o,joinModalMatchId:l,setJoinModal:r,isLoading:d}=Ys(),{refundLobby:f,isRefunding:g}=em(),[h,m]=D.useState("all"),[w,x]=D.useState("all"),[p,v]=D.useState("all"),[b,N]=D.useState("all"),[_,A]=D.useState("timeLeft"),[C,k]=D.useState(null),[R,j]=D.useState(null),[B,M]=D.useState(null),[I,L]=D.useState(null),{program:P}=qs();ob();const U=a?o.find(Y=>Y.matchPda&&(Y.status==="Open"||Y.status==="Pending")&&Y.creator===a.toBase58()):null,q=U?.matchPda?new Ze(U.matchPda):void 0,{lobby:H}=Ec(q);D.useEffect(()=>{(async()=>{if(!(!a||!P))try{const[ee]=la.getActiveLobbyPda(a),de=await Jf.fetchLobby(P,ee);if(!de){L(null);return}try{await ls.getMatch(ee.toBase58()),L(null)}catch{console.log("[Matches] Found blockchain-only lobby:",ee.toBase58()),L(de)}}catch(ee){console.error("[Matches] Error checking blockchain lobby:",ee),L(null)}})()},[a,P,o]);const V=()=>{if(!t){k("Connect your wallet to create a match"),setTimeout(()=>k(null),5e3);return}if(U){k("You already have an active lobby"),setTimeout(()=>k(null),5e3);return}s(Et.CREATE_LOBBY)},$=async()=>{if(!(!U||!a||!H))try{j(null),M(null);const Y=new Ze(U.matchPda||U.id),ee=[...H.team1,...H.team2];console.log("[Matches] Requesting refund for lobby:",Y.toString()),console.log("[Matches] Participants:",ee.map(re=>re.toString()));const de=await f({lobbyPda:Y,creator:H.creator,participants:ee});console.log("[Matches] Refund successful! Transaction:",de),M("Refund successful! Your funds have been returned."),setTimeout(()=>{window.location.reload()},2e3)}catch(Y){console.error("[Matches] Refund failed:",Y),j(Y.message||"Failed to refund lobby"),setTimeout(()=>j(null),5e3)}},Z=async()=>{if(!(!I||!a))try{j(null),M(null);const[Y]=la.getActiveLobbyPda(a),ee=[...I.team1,...I.team2];console.log("[Matches] Requesting refund for blockchain-only lobby:",Y.toString()),console.log("[Matches] Participants:",ee.map(re=>re.toString()));const de=await f({lobbyPda:Y,creator:I.creator,participants:ee,lobbyAccount:I});console.log("[Matches] Refund successful! Transaction:",de),M("Refund successful! Your funds have been returned."),L(null),setTimeout(()=>{window.location.reload()},2e3)}catch(Y){console.error("[Matches] Refund failed:",Y),j(Y.message||"Failed to refund lobby"),setTimeout(()=>j(null),5e3)}},Q=()=>{if(!U)return!1;const Y=U.endsAt/1e3;return Math.floor(Date.now()/1e3)>=Y},F=o.filter(Y=>Y.status==="Open"||Y.status==="Pending"||Y.status==="InProgress"),T=F.filter(Y=>{if(h==="PickHigher"){if(!["PickHigher1v3","PickHigher3v9","PickHigher5v16"].includes(Y.gameMode))return!1}else if(h==="GoldBars"){if(!["GoldBars1v9","GoldBars3v16","GoldBars5v25"].includes(Y.gameMode))return!1}else if(h==="Plinko"){if(!["Plinko3Balls","Plinko5Balls","Plinko7Balls"].includes(Y.gameMode))return!1}else if(h==="Miner"&&!["Miner1v9","Miner3v16","Miner5v25"].includes(Y.gameMode))return!1;if(w!=="all"&&Y.gameMode!==w)return!1;if(p!=="all")switch(p){case"low":if(Y.stake>=2)return!1;break;case"medium":if(Y.stake<2||Y.stake>=5)return!1;break;case"high":if(Y.stake<5)return!1;break}return!(b!=="all"&&Y.teamSize!==b)}),O=[...T].sort((Y,ee)=>{switch(_){case"stake":return ee.stake-Y.stake;case"players":return ee.playersReady-Y.playersReady;case"timeLeft":default:return Y.endsAt-ee.endsAt}}),G=()=>{r(null)},W=Y=>{switch(Y){case"all":return"All";case"low":return"0-2 SOL";case"medium":return"2-5 SOL";case"high":return"5+ SOL";default:return"All"}};return d?u.jsxs("div",{className:"relative min-h-screen bg-bg py-4 lg:py-8 overflow-hidden",children:[u.jsx(nn,{}),u.jsxs("div",{className:"max-w-7xl mx-auto px-3 lg:px-6",children:[u.jsxs("div",{className:"text-center mb-8",children:[u.jsx(vt,{className:"h-12 w-64 mx-auto mb-4"}),u.jsx(vt,{className:"h-6 w-96 mx-auto"})]}),u.jsx("div",{className:"space-y-4",children:Array.from({length:8}).map((Y,ee)=>u.jsx(vt,{className:"h-20 w-full"},ee))})]})]}):u.jsxs("div",{className:"relative min-h-screen bg-bg py-8 overflow-hidden",children:[u.jsx(nn,{}),u.jsxs("div",{className:"relative z-10",children:[u.jsx($n,{children:C&&u.jsx(ye.div,{className:"fixed top-0 left-0 right-0 z-[100] flex justify-center md:pt-[14vh] pt-[12vh] px-4 pointer-events-none",initial:{opacity:0,y:-50},animate:{opacity:1,y:0},exit:{opacity:0,y:-50},transition:{duration:.4},children:u.jsx("div",{className:"glass-card p-4 border-yellow-500/50 bg-yellow-500/10 max-w-md w-full pointer-events-auto",children:u.jsx("p",{className:"text-yellow-400 text-sm text-center font-semibold",children:C})})})}),u.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[I&&u.jsx(ye.div,{className:"mb-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:u.jsx(Le,{className:"p-6 border-2 border-red-500/50 bg-red-500/5 shadow-lg",children:u.jsxs("div",{className:"flex items-start gap-4",children:[u.jsx("div",{className:"flex-shrink-0",children:u.jsx("div",{className:"w-12 h-12 rounded-full bg-red-500/20 flex items-center justify-center",children:u.jsx("span",{className:"text-2xl",children:""})})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"text-red-400 font-bold text-lg mb-2",children:"   "}),u.jsx("p",{className:"text-txt-muted text-sm mb-4",children:"     ,      .       ."}),u.jsx(Se,{variant:"ghost",size:"sm",onClick:Z,disabled:g,className:"border-red-500/50 hover:border-red-500 text-red-400",children:g?"Processing...":"Refund"}),R&&u.jsx("p",{className:"text-red-400 text-sm mt-3 p-2 bg-red-500/10 rounded",children:R}),B&&u.jsx("p",{className:"text-sol-mint text-sm mt-3 p-2 bg-sol-mint/10 rounded",children:B})]})]})})}),U&&u.jsx(ye.div,{className:"mb-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:u.jsx(Le,{className:"p-6 border-2 border-yellow-500/50 bg-yellow-500/5 shadow-lg",children:u.jsxs("div",{className:"flex items-start gap-4",children:[u.jsx("div",{className:"flex-shrink-0",children:u.jsx("div",{className:"w-12 h-12 rounded-full bg-yellow-500/20 flex items-center justify-center",children:u.jsx("span",{className:"text-2xl",children:""})})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"text-yellow-400 font-bold text-lg mb-2",children:"You have an active lobby"}),u.jsx("div",{className:"space-y-2 mb-4",children:u.jsxs("p",{className:"text-sm text-txt-muted",children:[u.jsxs("span",{className:"text-txt-base font-semibold",children:[U.stake," SOL"]}),"  ",u.jsxs("span",{children:[U.playersReady,"/",U.playersMax," players"]}),"  ",u.jsx("span",{className:"text-yellow-400",children:U.status})]})}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx(Se,{variant:"neon",size:"sm",onClick:()=>s(`/match/${U.matchPda||U.id}`),className:"flex-1",children:"View"}),Q()?u.jsx(Se,{variant:"ghost",size:"sm",onClick:$,disabled:g||!H,className:"flex-1 border-red-500/50 hover:border-red-500 text-red-400",children:g?"...":"Refund"}):u.jsx("span",{className:"text-xs text-txt-muted self-center flex-1 text-center",children:"Refund after deadline"})]}),R&&u.jsx("p",{className:"text-red-400 text-sm mt-3 p-2 bg-red-500/10 rounded",children:R}),B&&u.jsx("p",{className:"text-sol-mint text-sm mt-3 p-2 bg-sol-mint/10 rounded",children:B})]})]})})}),u.jsxs("div",{className:"text-center mb-8",children:[u.jsx(ye.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-4xl md:text-5xl font-display font-bold text-txt-base mb-4",children:"Arena"}),u.jsx(ye.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"text-lg text-txt-muted mb-6",children:"Join matches and compete for SOL rewards"}),u.jsx(ye.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:u.jsxs(Se,{variant:t?"neon":"ghost",onClick:V,className:`inline-flex items-center gap-2 ${t?"":"opacity-50 cursor-not-allowed"}`,children:[u.jsx(VT,{className:"w-5 h-5"}),"Create New Match"]})})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4 md:gap-4 mb-4",children:[u.jsxs(Le,{className:"p-4 text-center",children:[u.jsx(Q1,{className:"w-5 h-5 md:w-6 md:h-6 text-sol-mint mx-auto mb-2"}),u.jsx("div",{className:"text-lg md:text-xl font-bold text-txt-base",children:F.length}),u.jsx("div",{className:"text-xs md:text-sm text-txt-muted",children:"Active Matches"})]}),u.jsxs(Le,{className:"p-4 text-center",children:[u.jsx(UT,{className:"w-5 h-5 md:w-6 md:h-6 text-sol-purple mx-auto mb-2"}),u.jsx("div",{className:"text-lg md:text-xl font-bold text-txt-base",children:T.length}),u.jsx("div",{className:"text-xs md:text-sm text-txt-muted",children:"Filtered Results"})]})]}),u.jsxs("div",{className:"space-y-4 mb-8",children:[u.jsx(Le,{className:"p-4",children:u.jsxs("div",{className:"space-y-3",children:[u.jsx("span",{className:"text-txt-muted text-sm font-medium block",children:"Game"}),u.jsxs("div",{className:"flex gap-3 md:gap-4 overflow-x-scroll pb-2 -mx-1 px-1 game-scroll",children:[u.jsxs("button",{onClick:()=>{m("all"),x("all")},className:Nt("flex-shrink-0 flex flex-col items-center justify-center gap-2 p-3 rounded-xl border-2 transition-all min-w-[90px] md:min-w-[100px]",h==="all"?"bg-gradient-to-br from-purple-600 to-blue-600 border-purple-400/50 shadow-lg":"bg-white/5 border-white/10 hover:bg-white/10"),children:[u.jsx("div",{className:"text-3xl md:text-4xl",children:""}),u.jsx("span",{className:"text-xs md:text-sm font-semibold text-white",children:"All"})]}),u.jsxs("button",{onClick:()=>{m("PickHigher"),x("all")},className:Nt("flex-shrink-0 flex flex-col items-center justify-center gap-2 p-3 rounded-xl border-2 transition-all min-w-[90px] md:min-w-[100px]",h==="PickHigher"?"bg-gradient-to-br from-green-500 to-emerald-600 border-green-400/50 shadow-lg":"bg-white/5 border-white/10 hover:bg-white/10"),children:[u.jsx("div",{className:"text-3xl md:text-4xl",children:""}),u.jsx("span",{className:"text-xs md:text-sm font-semibold text-white",children:"Pick Higher"})]}),u.jsxs("button",{onClick:()=>{m("GoldBars"),x("all")},className:Nt("flex-shrink-0 flex flex-col items-center justify-center gap-2 p-3 rounded-xl border-2 transition-all min-w-[90px] md:min-w-[100px]",h==="GoldBars"?"bg-gradient-to-br from-yellow-500 to-orange-600 border-yellow-400/50 shadow-lg":"bg-white/5 border-white/10 hover:bg-white/10"),children:[u.jsx("div",{className:"text-3xl md:text-4xl",children:""}),u.jsx("span",{className:"text-xs md:text-sm font-semibold text-white",children:"Gold Bars"})]}),u.jsxs("button",{onClick:()=>{m("Plinko"),x("all")},className:Nt("flex-shrink-0 flex flex-col items-center justify-center gap-2 p-3 rounded-xl border-2 transition-all min-w-[90px] md:min-w-[100px]",h==="Plinko"?"bg-gradient-to-br from-purple-500 to-pink-600 border-purple-400/50 shadow-lg":"bg-white/5 border-white/10 hover:bg-white/10"),children:[u.jsx("div",{className:"text-3xl md:text-4xl",children:""}),u.jsx("span",{className:"text-xs md:text-sm font-semibold text-white",children:"Plinko"})]}),u.jsxs("button",{onClick:()=>{m("Miner"),x("all")},className:Nt("flex-shrink-0 flex flex-col items-center justify-center gap-2 p-3 rounded-xl border-2 transition-all min-w-[90px] md:min-w-[100px]",h==="Miner"?"bg-gradient-to-br from-red-500 to-orange-600 border-red-400/50 shadow-lg":"bg-white/5 border-white/10 hover:bg-white/10"),children:[u.jsx("div",{className:"text-3xl md:text-4xl",children:""}),u.jsx("span",{className:"text-xs md:text-sm font-semibold text-white",children:"Miner"})]})]})]})}),h!=="all"&&u.jsx(Le,{className:"p-4",children:u.jsxs("div",{className:"space-y-3",children:[u.jsx("span",{className:"text-txt-muted text-sm font-medium block",children:"Game mode"}),u.jsxs("div",{className:"flex flex-wrap items-center gap-2 md:gap-4",children:[u.jsx(Se,{variant:w==="all"?"purple":"ghost",size:"sm",onClick:()=>x("all"),className:"text-xs",children:"All"}),h==="PickHigher"&&u.jsxs(u.Fragment,{children:[u.jsx(Se,{variant:w==="PickHigher3v9"?"mint":"ghost",size:"sm",onClick:()=>x("PickHigher3v9"),className:"text-xs",children:u.jsxs("span",{className:"flex items-center",children:[u.jsx("span",{className:"mr-1",children:""}),"3v9"]})}),u.jsx(Se,{variant:w==="PickHigher5v16"?"orange":"ghost",size:"sm",onClick:()=>x("PickHigher5v16"),className:"text-xs",children:u.jsxs("span",{className:"flex items-center",children:[u.jsx("span",{className:"mr-1",children:""}),"5v16"]})}),u.jsx(Se,{variant:w==="PickHigher1v3"?"blue":"ghost",size:"sm",onClick:()=>x("PickHigher1v3"),className:"text-xs",children:u.jsxs("span",{className:"flex items-center",children:[u.jsx("span",{className:"mr-1",children:""}),"1v3"]})})]}),h==="GoldBars"&&u.jsxs(u.Fragment,{children:[u.jsx(Se,{variant:w==="GoldBars1v9"?"mint":"ghost",size:"sm",onClick:()=>x("GoldBars1v9"),className:"text-xs",children:u.jsxs("span",{className:"flex items-center",children:[u.jsx("span",{className:"mr-1",children:""}),"1v9"]})}),u.jsx(Se,{variant:w==="GoldBars3v16"?"orange":"ghost",size:"sm",onClick:()=>x("GoldBars3v16"),className:"text-xs",children:u.jsxs("span",{className:"flex items-center",children:[u.jsx("span",{className:"mr-1",children:""}),"3v16"]})}),u.jsx(Se,{variant:w==="GoldBars5v25"?"blue":"ghost",size:"sm",onClick:()=>x("GoldBars5v25"),className:"text-xs",children:u.jsxs("span",{className:"flex items-center",children:[u.jsx("span",{className:"mr-1",children:""}),"5v25"]})})]}),h==="Plinko"&&u.jsxs(u.Fragment,{children:[u.jsx(Se,{variant:w==="Plinko3Balls"?"mint":"ghost",size:"sm",onClick:()=>x("Plinko3Balls"),className:"text-xs",children:u.jsxs("span",{className:"flex items-center",children:[u.jsx("span",{className:"mr-1",children:""}),"3 Balls"]})}),u.jsx(Se,{variant:w==="Plinko5Balls"?"orange":"ghost",size:"sm",onClick:()=>x("Plinko5Balls"),className:"text-xs",children:u.jsxs("span",{className:"flex items-center",children:[u.jsx("span",{className:"mr-1",children:""}),"5 Balls"]})}),u.jsx(Se,{variant:w==="Plinko7Balls"?"blue":"ghost",size:"sm",onClick:()=>x("Plinko7Balls"),className:"text-xs",children:u.jsxs("span",{className:"flex items-center",children:[u.jsx("span",{className:"mr-1",children:""}),"7 Balls"]})})]}),h==="Miner"&&u.jsxs(u.Fragment,{children:[u.jsx(Se,{variant:w==="Miner1v9"?"mint":"ghost",size:"sm",onClick:()=>x("Miner1v9"),className:"text-xs",children:u.jsxs("span",{className:"flex items-center",children:[u.jsx("span",{className:"mr-1",children:""}),"1v9"]})}),u.jsx(Se,{variant:w==="Miner3v16"?"orange":"ghost",size:"sm",onClick:()=>x("Miner3v16"),className:"text-xs",children:u.jsxs("span",{className:"flex items-center",children:[u.jsx("span",{className:"mr-1",children:""}),"3v16"]})}),u.jsx(Se,{variant:w==="Miner5v25"?"blue":"ghost",size:"sm",onClick:()=>x("Miner5v25"),className:"text-xs",children:u.jsxs("span",{className:"flex items-center",children:[u.jsx("span",{className:"mr-1",children:""}),"5v25"]})})]})]})]})}),u.jsx(Le,{className:"p-4",children:u.jsxs("div",{className:"space-y-3",children:[u.jsx("span",{className:"text-txt-muted text-sm font-medium block",children:"Stake Range"}),u.jsx("div",{className:"flex flex-wrap items-center gap-2 md:gap-4",children:["all","low","medium","high"].map((Y,ee)=>{const de=["purple","mint","orange","blue"];return u.jsx(Se,{variant:p===Y?de[ee]:"ghost",size:"sm",onClick:()=>v(Y),className:"text-xs",children:W(Y)},Y)})})]})}),u.jsx(Le,{className:"p-4",children:u.jsxs("div",{className:"space-y-3",children:[u.jsx("span",{className:"text-txt-muted text-sm font-medium block",children:"Mode"}),u.jsx("div",{className:"flex flex-wrap items-center gap-2 md:gap-4",children:["all","Solo","Duo","Team"].map((Y,ee)=>{const de=["blue","mint","purple","orange"];return u.jsx(Se,{variant:b===Y?de[ee]:"ghost",size:"sm",onClick:()=>N(Y),className:"text-xs",children:Y},Y)})})]})}),u.jsx(Le,{className:"p-4",children:u.jsxs("div",{className:"space-y-3",children:[u.jsx("span",{className:"text-txt-muted text-sm font-medium block",children:"Sort by"}),u.jsx("div",{className:"flex flex-wrap items-center gap-2 md:gap-4",children:["timeLeft","stake","players"].map((Y,ee)=>{const de=["orange","purple","blue"];return u.jsx(Se,{variant:_===Y?de[ee]:"ghost",size:"sm",onClick:()=>A(Y),className:"text-xs capitalize",children:Y==="timeLeft"?"Time Left":Y==="stake"?"Stake":"Players"},Y)})})]})})]}),u.jsx(Uf,{className:"max-h-none",maxItems:50,matches:O}),u.jsx(cb,{isOpen:!!l,onClose:G})]})]})]})},u3=()=>{const{matchId:s}=$f();return u.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-8",children:u.jsx("div",{className:"max-w-7xl mx-auto px-6",children:u.jsxs("div",{className:"text-center",children:[u.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-4",children:"Game Room"}),u.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Match ID: ",s]}),u.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Coming soon - Interactive game interface"})]})})})};var om=(s=>(s[s.WinRate=0]="WinRate",s[s.Earnings=1]="Earnings",s))(om||{}),Ui=(s=>(s[s.AllTime=0]="AllTime",s[s.Monthly=1]="Monthly",s))(Ui||{});const d3={async getLeaderboard(s=om.WinRate,t=Ui.AllTime,a=1,o=50){const l=new URLSearchParams({type:s.toString(),period:t.toString(),page:a.toString(),pageSize:o.toString()});return Ft.get(`/api/leaderboard?${l.toString()}`)},async getWinRateLeaderboard(s=Ui.AllTime,t=1,a=50){const o=new URLSearchParams({period:s.toString(),page:t.toString(),pageSize:a.toString()});return Ft.get(`/api/leaderboard/winrate?${o.toString()}`)},async getEarningsLeaderboard(s=Ui.AllTime,t=1,a=50){const o=new URLSearchParams({period:s.toString(),page:t.toString(),pageSize:a.toString()});return Ft.get(`/api/leaderboard/earnings?${o.toString()}`)}},Xx=s=>{switch(s){case 1:return"";case 2:return"";case 3:return"";default:return""}},Zx=s=>{switch(s){case 1:return"text-yellow-400";case 2:return"text-gray-400";case 3:return"text-orange-400";default:return"text-txt-base"}},Qx=s=>s>=.7?"text-sol-mint":s>=.5?"text-blue-400":s>=.3?"text-yellow-400":"text-red-400",Kx=s=>s>0?"text-sol-mint":s<0?"text-red-400":"text-txt-muted",f3=()=>{const[s,t]=D.useState([]),[a,o]=D.useState(!0),[l,r]=D.useState("allTime");D.useEffect(()=>{(async()=>{try{o(!0),console.log(" [Leaderboard] Loading leaderboard for period:",l);const p=l==="month"?Ui.Monthly:Ui.AllTime,v=await d3.getLeaderboard(om.WinRate,p,1,50);console.log(" [Leaderboard] Loaded entries:",v.entries.length),console.log(" [Leaderboard] Data:",v),t(v.entries)}catch(p){console.error(" [Leaderboard] Failed to load:",p)}finally{o(!1)}})()},[l]);const d=s,f=x=>`${((Number.isFinite(x)?x:0)*100).toFixed(1)}%`,g=x=>{const v=(Number.isFinite(x)?x:0)/1e9,b=Number.isFinite(v)?v:0;return`${b>=0?"+":""}${b.toFixed(2)} SOL`},h=x=>{const p=(Number.isFinite(x.totalEarningsLamports)?x.totalEarningsLamports:void 0)??(Number.isFinite(x.totalEarnings)?x.totalEarnings:0),v=p/1e9;return Number.isFinite(p)&&Number.isFinite(v)?p:0},m=s.length||0,w=s.reduce((x,p)=>{const v=Number.isFinite(p.totalMatches)?p.totalMatches:0;return x+v},0);return a?u.jsxs("div",{className:"relative min-h-screen bg-bg py-4 lg:py-8 overflow-hidden",children:[u.jsx(nn,{}),u.jsxs("div",{className:"max-w-7xl mx-auto px-3 lg:px-6",children:[u.jsxs("div",{className:"text-center mb-8",children:[u.jsx(vt,{className:"h-12 w-64 mx-auto mb-4"}),u.jsx(vt,{className:"h-6 w-96 mx-auto"})]}),u.jsx("div",{className:"space-y-4",children:Array.from({length:10}).map((x,p)=>u.jsx(vt,{className:"h-20 w-full"},p))})]})]}):u.jsxs("div",{className:"relative min-h-screen bg-bg py-4 lg:py-8 overflow-hidden",children:[u.jsx(nn,{}),u.jsx("div",{className:"relative z-10",children:u.jsxs("div",{className:"max-w-7xl mx-auto px-3 lg:px-6",children:[u.jsxs("div",{className:"text-center mb-8",children:[u.jsx(ye.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-4xl md:text-5xl font-display font-bold text-txt-base mb-4",children:"Leaderboard"}),u.jsx(ye.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"text-lg text-txt-muted",children:"Top players competing for SOL rewards"})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[u.jsxs(Le,{className:"p-4 text-center",children:[u.jsx(Vs,{className:"w-6 h-6 text-sol-mint mx-auto mb-2"}),u.jsx("div",{className:"text-xl font-bold text-txt-base",children:m}),u.jsx("div",{className:"text-sm text-txt-muted",children:"Total Players"})]}),u.jsxs(Le,{className:"p-4 text-center",children:[u.jsx(J1,{className:"w-6 h-6 text-sol-purple mx-auto mb-2"}),u.jsx("div",{className:"text-xl font-bold text-txt-base",children:w}),u.jsx("div",{className:"text-sm text-txt-muted",children:"Games Played"})]})]}),u.jsx("div",{className:"mb-4",children:u.jsx(Le,{className:"p-4",children:u.jsxs("div",{className:"flex items-center ",children:[u.jsx("span",{className:"text-txt-muted text-sm font-medium block",children:"Time Period"}),u.jsx("div",{className:"flex flex-wrap items-center gap-4 ml-2",children:["month","allTime"].map(x=>u.jsx(Se,{variant:l===x?"neon":"ghost",size:"sm",onClick:()=>r(x),className:"text-xs",children:x==="month"?"Month":"All time"},x))})]})})}),u.jsxs(Le,{className:"overflow-hidden",children:[u.jsx(Ht,{children:u.jsx(Pt,{className:"text-xl font-display text-sol-purple px-6 py-4",children:"Player Rankings"})}),u.jsx("div",{className:"hidden md:block overflow-x-auto",children:u.jsxs("table",{className:"w-full",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"border-b border-white/10",children:[u.jsx("th",{className:"text-left py-4 px-6 text-txt-muted font-medium",children:"Rank"}),u.jsx("th",{className:"text-left py-4 px-6 text-txt-muted font-medium",children:"Player"}),u.jsx("th",{className:"text-right py-4 px-6 text-txt-muted font-medium",children:"W/L"}),u.jsx("th",{className:"text-right py-4 px-6 text-txt-muted font-medium",children:"Win Rate"}),u.jsx("th",{className:"text-right py-4 px-6 text-txt-muted font-medium",children:"P&L"})]})}),u.jsx("tbody",{children:d.map((x,p)=>u.jsxs(ye.tr,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:p*.05},className:`border-b border-white/5 hover:bg-white/5 transition-colors ${x.rank<=3?"bg-gradient-to-r from-sol-purple/5 to-sol-mint/5":""}`,children:[u.jsx("td",{className:"py-4 px-6",children:u.jsxs("div",{className:`flex items-center font-bold ${Zx(x.rank)}`,children:[u.jsx("span",{className:"text-lg mr-2",children:Xx(x.rank)}),u.jsxs("span",{children:["#",x.rank]})]})}),u.jsx("td",{className:"py-4 px-6",children:u.jsx("span",{className:"text-txt-base font-medium",children:x.username||`${x.pubkey.slice(0,6)}...${x.pubkey.slice(-4)}`})}),u.jsx("td",{className:"py-4 px-6 text-right",children:(()=>{const v=(Number.isFinite(x.wins)?x.wins:void 0)??(Number.isFinite(x.wonMatches)?x.wonMatches:0),b=Number(v)||0,N=Number.isFinite(x.totalMatches)?x.totalMatches:b,_=Number.isFinite(x.losses)&&x.losses!==void 0?x.losses:N-b,A=Math.max(0,Number(_)||0);return u.jsxs("span",{className:"text-txt-base",children:[b,"/",A]})})()}),u.jsx("td",{className:"py-4 px-6 text-right",children:u.jsx("span",{className:`font-semibold ${Qx(x.winRate)}`,children:f(x.winRate)})}),u.jsx("td",{className:"py-4 px-6 text-right",children:(()=>{const v=h(x);return u.jsx("span",{className:`font-semibold ${Kx(v)}`,children:g(v)})})()})]},x.pubkey))})]})}),u.jsx("div",{className:"md:hidden space-y-4 p-4",children:d.map((x,p)=>u.jsxs(ye.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:p*.05},className:`glass-card p-4 ${x.rank<=3?"border-sol-mint shadow-glow-mint":""}`,children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:`text-2xl mr-3 ${Zx(x.rank)}`,children:Xx(x.rank)}),u.jsx("div",{children:u.jsx("div",{className:"text-txt-base font-medium",children:x.username||`${x.pubkey.slice(0,6)}...${x.pubkey.slice(-4)}`})})]}),u.jsx("div",{className:"text-right",children:(()=>{const v=h(x);return u.jsx("div",{className:`text-lg font-bold ${Kx(v)}`,children:g(v)})})()})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[u.jsxs("div",{children:[u.jsx("div",{className:"text-txt-muted",children:"W/L"}),(()=>{const v=(Number.isFinite(x.wins)?x.wins:void 0)??(Number.isFinite(x.wonMatches)?x.wonMatches:0),b=Number(v)||0,N=Number.isFinite(x.totalMatches)?x.totalMatches:b,_=Number.isFinite(x.losses)&&x.losses!==void 0?x.losses:N-b,A=Math.max(0,Number(_)||0);return u.jsxs("div",{className:"text-txt-base font-medium",children:[b,"/",A]})})()]}),u.jsxs("div",{className:"text-right",children:[u.jsx("div",{className:"text-txt-muted",children:"Win Rate"}),u.jsx("div",{className:`font-semibold ${Qx(x.winRate)}`,children:f(Number.isFinite(x.winRate)?x.winRate:0)})]})]})]},x.pubkey))})]})]})})]})},m3=({isOpen:s,currentUsername:t,onClose:a,onSuccess:o})=>{const[l,r]=D.useState(""),[d,f]=D.useState(!1),[g,h]=D.useState(null),[m,w]=D.useState(null),[x,p]=D.useState(!1);D.useEffect(()=>{s&&(r(""),h(null),w(null),p(!1))},[s]),D.useEffect(()=>{const b=l.trim();if(!b||b===t){h(null);return}if(b.length<3){h(null);return}if(/\s/.test(b)){h(null);return}const N=setTimeout(async()=>{try{h("checking");const _=await zs.checkUsernameAvailability(b);h(_.isAvailable?"available":"taken")}catch(_){console.error("Failed to check username availability:",_),h(null)}},500);return()=>clearTimeout(N)},[l,t]);const v=async b=>{b.preventDefault();const N=l.trim();if(!(!N||N===t)){if(/\s/.test(N)){w("Username cannot contain spaces");return}if(g==="available")try{f(!0),w(null),await zs.changeUsername({username:N}),p(!0),setTimeout(()=>{o(N),a()},1500)}catch(_){console.error("Failed to change username:",_),w(_.response?.data?.message||_.message||"Failed to change username")}finally{f(!1)}}};return s?Pf.createPortal(u.jsx($n,{children:u.jsx(ye.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4",onClick:a,children:u.jsx(ye.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},onClick:b=>b.stopPropagation(),className:"w-full max-w-md",children:u.jsxs(Le,{className:"p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsx("h2",{className:"text-2xl font-display font-bold text-sol-purple",children:"Change Username"}),u.jsx("button",{onClick:a,className:"text-txt-muted hover:text-txt-base transition-colors",disabled:d,children:u.jsx(io,{className:"w-6 h-6"})})]}),x?u.jsxs("div",{className:"text-center py-8",children:[u.jsx(Dx,{className:"w-16 h-16 text-sol-mint mx-auto mb-4"}),u.jsx("p",{className:"text-xl font-semibold text-sol-mint mb-2",children:"Username Changed!"}),u.jsxs("p",{className:"text-txt-muted",children:["Your username has been updated to"," ",u.jsx("span",{className:"text-sol-purple font-semibold",children:l})]})]}):u.jsxs("form",{onSubmit:v,children:[u.jsx("div",{className:"bg-sol-purple/10 border border-sol-purple/30 rounded-lg p-4 mb-6",children:u.jsx("p",{className:"text-sm text-txt-muted text-center",children:" You can change your username once every 24 hours"})}),u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{className:"block text-sm font-medium text-txt-muted mb-2",children:"Current Username"}),u.jsx("div",{className:"bg-white/5 rounded-lg px-4 py-3 text-txt-base",children:t})]}),u.jsxs("div",{className:"mb-6",children:[u.jsx("label",{className:"block text-sm font-medium text-txt-muted mb-2",children:"New Username"}),u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"text",value:l,onChange:b=>r(b.target.value),placeholder:"Enter new username",className:"w-full bg-white/5 border border-white/10 rounded-lg px-4 py-3 text-txt-base placeholder-txt-muted focus:outline-none focus:border-sol-purple transition-colors",pattern:"^\\S+$",title:"Username cannot contain spaces",minLength:3,maxLength:20,required:!0,disabled:d}),g&&l.length>=3&&u.jsxs("div",{className:"absolute right-3 top-1/2 -translate-y-1/2",children:[g==="checking"&&u.jsx("div",{className:"w-5 h-5 border-2 border-sol-purple border-t-transparent rounded-full animate-spin"}),g==="available"&&u.jsx(Dx,{className:"w-5 h-5 text-sol-mint"}),g==="taken"&&u.jsx(LT,{className:"w-5 h-5 text-red-400"})]})]}),g==="taken"&&u.jsx("p",{className:"mt-2 text-sm text-red-400",children:" This username is already taken"}),g==="available"&&u.jsx("p",{className:"mt-2 text-sm text-sol-mint",children:" This username is available"}),l.length>0&&l.trim().length===0&&u.jsx("p",{className:"mt-2 text-sm text-red-400",children:" Username cannot contain only spaces"}),l.length>0&&l.trim().length>0&&/\s/.test(l.trim())&&u.jsx("p",{className:"mt-2 text-sm text-red-400",children:" Username cannot contain spaces"}),l.length>0&&l.trim().length>0&&!/\s/.test(l.trim())&&l.trim().length<3&&u.jsx("p",{className:"mt-2 text-sm text-txt-muted",children:" Username must be at least 3 characters"})]}),m&&u.jsx("div",{className:"bg-red-500/10 border border-red-500/30 rounded-lg p-4 mb-6",children:u.jsx("p",{className:"text-sm text-red-400",children:m})}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx(Se,{type:"button",variant:"ghost",onClick:a,disabled:d,className:"flex-1 py-2 text-sm",children:"Cancel"}),u.jsx(Se,{type:"submit",variant:"mint",disabled:d||!l.trim()||l.trim()===t||/\s/.test(l.trim())||g!=="available",className:"flex-1 py-2 text-sm",children:d?"Changing...":"Change Username"})]})]})]})})})}),document.body):null},h3=s=>{switch(s){case"PickHigher3v9":return"";case"PickHigher5v16":return"";case"PickHigher1v3":return"";case"Plinko3Balls":case"Plinko5Balls":case"Plinko7Balls":return"";case"Miner1v9":case"Miner3v16":case"Miner5v25":return"";default:return""}},vf=s=>s==="win"?"text-sol-mint":"text-red-400",g3=s=>s==="win"?"":"",ql=s=>{const t=new Date(s),o=Date.now()-t.getTime(),l=Math.floor(o/(1e3*60*60)),r=Math.floor(l/24);if(r>0)return`${r} day${r>1?"s":""} ago`;if(l>0)return`${l} hour${l>1?"s":""} ago`;{const d=Math.floor(o/6e4);return`${d} minute${d>1?"s":""} ago`}},Jx=()=>{const{publicKey:s}=fs(),{balance:t,refetch:a}=U1(),[o,l]=D.useState(null),[r,d]=D.useState(!0),[f,g]=D.useState(null),[h,m]=D.useState("overview"),[w,x]=D.useState(!1),p=N=>{o&&l({...o,username:N})};D.useEffect(()=>{if(!s){d(!1);return}(async()=>{try{d(!0),g(null),console.log(" [Profile] Loading profile for:",s.toString());const _=await zs.getUser(s.toString());console.log(" [Profile] Loaded profile:",_),console.log(" [Profile] Recent matches:",_.recentMatches?.length||0),l(_),a()}catch(_){console.error(" [Profile] Failed to load:",_),g(_.message||"Failed to load profile")}finally{d(!1)}})()},[s,a]);const v=N=>`${(N*100).toFixed(1)}%`;if(!s)return u.jsxs("div",{className:"relative min-h-screen bg-bg py-4 lg:py-8 flex items-center justify-center overflow-hidden",children:[u.jsx(nn,{}),u.jsxs("div",{className:"text-center px-3",children:[u.jsx("h2",{className:"text-xl lg:text-2xl font-display font-bold text-txt-base mb-4",children:"Connect Your Wallet"}),u.jsx("p",{className:"text-txt-muted text-sm lg:text-base",children:"Please connect your wallet to view your profile"})]})]});if(r)return u.jsxs("div",{className:"relative min-h-screen bg-bg py-4 lg:py-8 overflow-hidden",children:[u.jsx(nn,{}),u.jsxs("div",{className:"max-w-6xl mx-auto px-3 lg:px-6",children:[u.jsxs("div",{className:"text-center mb-8",children:[u.jsx(vt,{className:"h-12 w-64 mx-auto mb-4"}),u.jsx(vt,{className:"h-6 w-96 mx-auto"})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[u.jsx("div",{className:"lg:col-span-1",children:u.jsx(vt,{className:"h-96 w-full"})}),u.jsx("div",{className:"lg:col-span-2",children:u.jsx(vt,{className:"h-96 w-full"})})]})]})]});if(f||!o)return u.jsxs("div",{className:"relative min-h-screen bg-bg py-4 lg:py-8 flex items-center justify-center overflow-hidden",children:[u.jsx(nn,{}),u.jsxs("div",{className:"text-center px-3",children:[u.jsx("h2",{className:"text-xl lg:text-2xl font-display font-bold text-red-400 mb-4",children:"Error Loading Profile"}),u.jsx("p",{className:"text-txt-muted text-sm lg:text-base",children:f||"Profile not found"})]})]});const b=o.matchesPlayed>0?o.wins/o.matchesPlayed:0;return u.jsxs("div",{className:"relative min-h-screen bg-bg py-4 lg:py-8 overflow-hidden",children:[u.jsx(nn,{}),u.jsxs("div",{className:"relative z-10",children:[u.jsxs("div",{className:"max-w-6xl mx-auto px-3 lg:px-6",children:[u.jsxs("div",{className:"text-center mb-8",children:[u.jsx(ye.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-4xl md:text-5xl font-display font-bold text-txt-base mb-4",children:"Profile"}),u.jsx(ye.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"text-lg text-txt-muted",children:"Your gaming statistics and match history"})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[u.jsx("div",{className:"lg:col-span-1",children:u.jsxs(Le,{className:"p-6",children:[u.jsxs("div",{className:"text-center mb-6",children:[u.jsx("div",{className:"w-24 h-24 bg-gradient-to-r from-sol-purple to-sol-mint rounded-full flex items-center justify-center mx-auto mb-4",children:u.jsx("span",{className:"text-white font-bold text-2xl",children:o.username.charAt(0).toUpperCase()})}),u.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[u.jsx("h2",{className:"text-2xl font-display font-bold text-txt-base",children:o.username}),u.jsx("button",{onClick:()=>x(!0),className:"text-sol-purple hover:text-sol-mint transition-colors",title:"Change username",children:u.jsx(GT,{className:"w-5 h-5"})})]}),u.jsx("div",{className:"text-xs text-txt-muted break-all px-4 mb-3",children:s.toString()}),u.jsxs("div",{className:"text-center py-2 px-4 bg-sol-purple/10 border border-sol-purple/30 rounded-lg mx-4",children:[u.jsx("div",{className:"text-xs text-txt-muted mb-1",children:"Wallet Balance"}),u.jsxs("div",{className:"text-lg font-bold text-sol-mint",children:[t.toFixed(4)," SOL"]})]})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-white/10",children:[u.jsx("span",{className:"text-txt-muted",children:"Games Played"}),u.jsx("span",{className:"text-txt-base font-semibold",children:o.matchesPlayed})]}),u.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-white/10",children:[u.jsx("span",{className:"text-txt-muted",children:"Win Rate"}),u.jsx("span",{className:`font-semibold ${vf(b>.5?"win":"loss")}`,children:v(b)})]}),u.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-white/10",children:[u.jsx("span",{className:"text-txt-muted",children:"Total Earnings"}),u.jsxs("span",{className:"font-semibold text-sol-mint",children:[(o.totalEarningsLamports/1e9).toFixed(2)," ","SOL"]})]}),u.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-white/10",children:[u.jsx("span",{className:"text-txt-muted",children:"Wins"}),u.jsx("span",{className:"text-txt-base font-semibold",children:o.wins})]}),u.jsxs("div",{className:"flex justify-between items-center py-2",children:[u.jsx("span",{className:"text-txt-muted",children:"Losses"}),u.jsx("span",{className:"text-txt-base font-semibold",children:o.losses})]})]})]})}),u.jsxs("div",{className:"lg:col-span-2",children:[u.jsx("div",{className:"flex justify-center space-x-2 mb-6",children:[{id:"overview",label:"Overview",icon:kx,color:"purple"},{id:"history",label:"History",icon:Q1,color:"blue"},{id:"stats",label:"Statistics",icon:Vs,color:"mint"}].map(N=>u.jsxs(Se,{variant:h===N.id?N.color:"ghost",onClick:()=>m(N.id),className:"flex items-center space-x-2 px-3 py-2 text-sm",children:[u.jsx(N.icon,{className:"w-4 h-4"}),u.jsx("span",{children:N.label})]},N.id))}),h==="overview"&&u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsx(Le,{className:"p-6",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("div",{className:"text-2xl font-bold text-txt-base",children:o.wins}),u.jsx("div",{className:"text-sm text-txt-muted",children:"Total Wins"})]}),u.jsx(Vs,{className:"w-8 h-8 text-sol-mint"})]})}),u.jsx(Le,{className:"p-6",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("div",{className:"text-2xl font-bold text-txt-base",children:o.losses}),u.jsx("div",{className:"text-sm text-txt-muted",children:"Total Losses"})]}),u.jsx(kx,{className:"w-8 h-8 text-red-400"})]})}),u.jsx(Le,{className:"p-6",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("div",{className:"text-2xl font-bold text-txt-base",children:o.matchesPlayed}),u.jsx("div",{className:"text-sm text-txt-muted",children:"Games Played"})]}),u.jsx(Tc,{className:"w-8 h-8 text-sol-purple"})]})}),u.jsx(Le,{className:"p-6",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("div",{className:"text-2xl font-bold text-txt-base",children:(o.totalEarningsLamports/1e9).toFixed(2)}),u.jsx("div",{className:"text-sm text-txt-muted",children:"Total Earned (SOL)"})]}),u.jsx(WT,{className:"w-8 h-8 text-sol-mint"})]})})]}),u.jsxs(Le,{className:"p-6",children:[u.jsx("h3",{className:"text-lg font-display font-bold text-sol-purple mb-4",children:"Account Info"}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"text-txt-muted",children:"First Seen"}),u.jsx("span",{className:"text-txt-base",children:ql(o.firstSeen)})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"text-txt-muted",children:"Last Seen"}),u.jsx("span",{className:"text-txt-base",children:ql(o.lastSeen)})]})]})]})]}),h==="history"&&u.jsxs(Le,{className:"overflow-hidden",children:[u.jsx(Ht,{children:u.jsx(Pt,{className:"text-xl font-display text-sol-purple",children:"Recent Matches"})}),u.jsx(Zi,{className:"p-0",children:u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"border-b border-white/10",children:[u.jsx("th",{className:"text-left py-3 px-4 text-txt-muted font-medium",children:"Game"}),u.jsx("th",{className:"text-left py-3 px-4 text-txt-muted font-medium",children:"Stake"}),u.jsx("th",{className:"text-center py-3 px-4 text-txt-muted font-medium",children:"Status"}),u.jsx("th",{className:"text-right py-3 px-4 text-txt-muted font-medium",children:"Tx"})]})}),u.jsx("tbody",{children:o.recentMatches&&o.recentMatches.length>0?o.recentMatches.map((N,_)=>{const C=N.isWinner?"win":"loss";return u.jsxs(ye.tr,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:_*.05},className:"border-b border-white/5 hover:bg-white/5 transition-colors",children:[u.jsx("td",{className:"py-3 px-4",children:u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("span",{className:"text-lg",children:h3(N.gameMode)}),u.jsx("span",{className:"text-txt-base",children:N.gameMode})]})}),u.jsx("td",{className:"py-3 px-4",children:u.jsxs("span",{className:"text-txt-base",children:[(N.stakeLamports/1e9).toFixed(2)," ","SOL"]})}),u.jsx("td",{className:"py-3 px-4 text-center",children:u.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[N.status==="Resolved"&&u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"text-lg",children:g3(C)}),u.jsx("span",{className:`font-semibold ${vf(C)}`,children:C.toUpperCase()})]}),N.status!=="Resolved"&&u.jsx("span",{className:"text-txt-muted",children:N.status})]})}),u.jsx("td",{className:"py-3 px-4 text-right",children:u.jsx("a",{href:`https://explorer.solana.com/address/${N.matchPda}?cluster=devnet`,target:"_blank",rel:"noopener noreferrer",className:"text-sol-mint hover:text-sol-purple transition-colors text-sm",children:"View Tx"})})]},N.matchPda)}):u.jsx("tr",{children:u.jsx("td",{colSpan:4,className:"py-8 text-center text-txt-muted",children:"No match history yet"})})})]})})})]}),h==="stats"&&u.jsx("div",{className:"space-y-6",children:u.jsxs(Le,{className:"p-6",children:[u.jsx("h3",{className:"text-lg font-display font-bold text-sol-purple mb-4",children:"Performance Metrics"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsxs("div",{children:[u.jsx("div",{className:"text-sm text-txt-muted mb-4",children:"Overall Statistics"}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"text-txt-base",children:"Total Matches"}),u.jsx("span",{className:"text-txt-base font-semibold",children:o.matchesPlayed})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"text-txt-base",children:"Win Rate"}),u.jsx("span",{className:`font-semibold ${vf(b>.5?"win":"loss")}`,children:v(b)})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"text-txt-base",children:"Total Earnings"}),u.jsxs("span",{className:"text-sol-mint font-semibold",children:[(o.totalEarningsLamports/1e9).toFixed(2)," ","SOL"]})]})]})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-sm text-txt-muted mb-4",children:"Account Activity"}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"text-txt-base",children:"Last Active"}),u.jsx("span",{className:"text-txt-muted",children:ql(o.lastSeen)})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"text-txt-base",children:"First Seen"}),u.jsx("span",{className:"text-txt-muted",children:ql(o.firstSeen)})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"text-txt-base",children:"Username"}),u.jsx("span",{className:"text-sol-mint font-semibold",children:o.username})]})]})]})]})]})})]})]})]}),u.jsx(m3,{isOpen:w,currentUsername:o.username,onClose:()=>x(!1),onSuccess:p})]})]})},ey=()=>{const s=ka();return u.jsx("div",{className:"min-h-screen bg-bg flex items-center justify-center py-8 px-4",children:u.jsx("div",{className:"max-w-2xl w-full",children:u.jsx(ye.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-center",children:u.jsxs(Le,{className:"p-8 md:p-12",children:[u.jsx(ye.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.2,duration:.5},className:"mb-6",children:u.jsx("h1",{className:"text-8xl md:text-9xl font-display font-bold bg-gradient-to-r from-sol-purple via-sol-mint to-sol-purple bg-clip-text text-transparent",children:"404"})}),u.jsx(ye.h2,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3,duration:.5},className:"text-3xl md:text-4xl font-display font-bold text-txt-base mb-4",children:"Page Not Found"}),u.jsx(ye.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4,duration:.5},className:"text-lg text-txt-muted mb-8 max-w-md mx-auto",children:"The page you're looking for doesn't exist or has been moved. Let's get you back to the action!"}),u.jsxs(ye.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5,duration:.5},className:"flex flex-col sm:flex-row gap-4 justify-center items-center",children:[u.jsxs(Se,{variant:"neon",size:"lg",onClick:()=>s(Et.HOME),className:"inline-flex items-center gap-2",children:[u.jsx(K1,{className:"w-5 h-5"}),"Go Home"]}),u.jsx(Se,{variant:"ghost",size:"lg",onClick:()=>s(-1),className:"inline-flex items-center gap-2",children:"Go Back"})]}),u.jsxs(ye.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6,duration:.5},className:"mt-8 pt-8 border-t border-white/10",children:[u.jsx("p",{className:"text-sm text-txt-muted mb-4",children:"Quick Links:"}),u.jsxs("div",{className:"flex flex-wrap justify-center gap-3",children:[u.jsx(Se,{variant:"ghost",size:"sm",onClick:()=>s(Et.MATCHES),children:"Matches"}),u.jsx(Se,{variant:"ghost",size:"sm",onClick:()=>s(Et.LEADERBOARD),children:"Leaderboard"}),u.jsx(Se,{variant:"ghost",size:"sm",onClick:()=>s(Et.CREATE_LOBBY),children:"Create Match"})]})]})]})})})})};var yt=(s=>(s.PickHigher="PickHigher",s.Plinko="Plinko",s.Miner="Miner",s.GoldBars="GoldBars",s))(yt||{}),lm=(s=>(s.Team="Team",s.DeathMatch="DeathMatch",s))(lm||{});const Ps=({value:s,duration:t=1,className:a="",onComplete:o})=>{const[l,r]=D.useState(0),[d,f]=D.useState(!1),g=HS(0,{stiffness:100,damping:30}),h=PS(g,w=>Math.round(w));D.useEffect(()=>{if(s===0)return;f(!0),g.set(s);const w=h.on("change",p=>{r(p)}),x=setTimeout(()=>{f(!1),o?.()},t*1e3);return()=>{w(),clearTimeout(x)}},[s,t]);const m=()=>s>=1e3?"text-sol-purple":s>=500?"text-sol-mint":"text-txt-base";return u.jsx(ye.div,{className:`font-bold text-2xl ${m()} ${a}`,style:{filter:`drop-shadow(0 0 10px ${s>=1e3?"#9945FF":s>=500?"#14F195":"currentColor"})`},animate:d?{scale:[1,1.1,1]}:{},transition:{duration:.5,repeat:d?1/0:0,repeatType:"reverse"},children:l.toLocaleString()})};function p3(s,t){if(t===0)return[];if(t===1)return[s];const a=[];let o=s;for(let l=0;l<t;l++)if(l===t-1)a.push(o);else{const r=.2+Math.random()*.4,d=Math.floor(o*r);a.push(d),o-=d}return a}function x3(s,t,a,o,l){const r=a==="Duo"||a==="Team",d=f=>l?f.targetScore:f.currentScore;if(r){const f=a==="Duo"?2:5,g=s.slice(0,f),h=s.slice(f,f*2),m=g.reduce((_,A)=>_+d(A),0),w=h.reduce((_,A)=>_+d(A),0),x=m>w?"Team A":"Team B",v=m>w?t*2:0,b={};return s.forEach(_=>{b[_.username]=d(_)}),{winner:x,scores:b,winAmount:v,duration:0,isTeamBattle:!0,teamScores:{"Team A":m,"Team B":w}}}else{const g=[...s].sort((x,p)=>d(p)-d(x))[0],m=g.username===(o||"You")?t*2:0,w={};return s.forEach(x=>{w[x.username]=d(x)}),{winner:g.username,scores:w,winAmount:m,duration:0,isTeamBattle:!1}}}function $i(s){switch(s){case"PickThreeFromNine":return{gridSize:3,maxSelections:3,icon:"",name:"Pick 3 from 9 Chests"};case"PickFiveFromSixteen":return{gridSize:4,maxSelections:5,icon:"",name:"Pick 5 from 16 Tiles"};case"PickOneFromThree":return{gridSize:1,maxSelections:1,icon:"",name:"Pick 1 from 3 Cards"};case"Plinko3Balls":return{gridSize:5,maxSelections:3,icon:"",name:"Plinko: 3 Balls",rows:5,slots:5};case"Plinko5Balls":return{gridSize:7,maxSelections:5,icon:"",name:"Plinko: 5 Balls",rows:7,slots:7};case"Plinko7Balls":return{gridSize:9,maxSelections:7,icon:"",name:"Plinko: 7 Balls",rows:9,slots:9};case"Miner1v9":return{gridSize:3,maxSelections:8,icon:"",name:"Miner: 1v9",tileCount:9};case"Miner3v16":return{gridSize:4,maxSelections:13,icon:"",name:"Miner: 3v16",tileCount:16};case"Miner5v25":return{gridSize:5,maxSelections:20,icon:"",name:"Miner: 5v25",tileCount:25};case"GoldBars1v9":return{gridSize:3,maxSelections:8,icon:"",name:"Gold Bars: 1v9",tileCount:9,goldBars:8,bombs:1};case"GoldBars3v16":return{gridSize:4,maxSelections:13,icon:"",name:"Gold Bars: 3v16",tileCount:16,goldBars:13,bombs:3};case"GoldBars5v25":return{gridSize:5,maxSelections:20,icon:"",name:"Gold Bars: 5v25",tileCount:25,goldBars:20,bombs:5};default:return{gridSize:3,maxSelections:3,icon:"",name:"Unknown Game Mode"}}}const y3=({player:s,isCurrentPlayer:t=!1,isWinner:a=!1,className:o="",hideScore:l=!1,gameType:r,gameStatus:d="waiting",aiTimerInfo:f,gameMode:g})=>{const h=r===yt.Miner,m=r===yt.GoldBars,w=D.useMemo(()=>{if(!m||!g)return!1;const B=$i(g).goldBars||0;return s.currentScore===s.targetScore&&s.targetScore===B&&s.currentScore>0},[m,g,s.currentScore,s.targetScore]),[x,p]=D.useState(null),[v,b]=D.useState(""),[N,_]=D.useState(!1),A=D.useRef(!1);D.useEffect(()=>{if(h&&s.isScoreRevealed&&s.willWin!==void 0){const j=s.willWin===!0?"Alive":"Bombed";if(A.current)v!==j&&b(j);else{A.current=!0,b(""),_(!0);let B=0;const M=setInterval(()=>{B<j.length?(B++,b(j.slice(0,B))):(clearInterval(M),setTimeout(()=>_(!1),1e3))},120);return()=>clearInterval(M)}}else s.isScoreRevealed||(A.current=!1,b(""),_(!1))},[h,s.isScoreRevealed,s.willWin]),D.useEffect(()=>{if(!f||!l||t||s.isScoreRevealed){p(null);return}const j=()=>{if(s.isScoreRevealed){p(null);return}const M=Date.now()-f.startTime,I=Math.max(0,Math.ceil((f.delay-M)/1e3));p(I>0?I:null)};j();const B=setInterval(j,1e3);return()=>clearInterval(B)},[f,l,t,s.isScoreRevealed]);const C=()=>w?"border-orange-500 shadow-glow-orange":a?"border-sol-mint shadow-glow-mint":t?"border-sol-purple shadow-glow-purple":"border-white/20",k=()=>w?"":a?"":t?"":s.isReady&&!l?"":(s.isReady&&l,""),R=h&&s.isScoreRevealed&&s.willWin!==void 0;return u.jsxs(ye.div,{className:`glass-card p-4 rounded-xl border-2 ${C()} ${o}`,animate:R?{boxShadow:s.willWin===!0?["0 0 0px rgba(20, 241, 149, 0)","0 0 20px rgba(20, 241, 149, 0.5)","0 0 0px rgba(20, 241, 149, 0)"]:["0 0 0px rgba(239, 68, 68, 0)","0 0 20px rgba(239, 68, 68, 0.5)","0 0 0px rgba(239, 68, 68, 0)"]}:{},transition:{duration:.6,repeat:R?1:0,ease:"easeInOut"},children:[u.jsx("div",{className:"flex items-center justify-between mb-3",children:u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("h3",{className:"font-semibold text-txt-base truncate",children:s.username}),u.jsx("span",{className:"text-lg",children:k()})]}),u.jsx("div",{className:"text-xs text-txt-muted",children:h?s.isReady?"Ready":"Waiting...":s.isReady?x!==null&&x>0?`Revealing in ${x}s`:"Ready":"Waiting..."})]})}),u.jsx("div",{className:"space-y-2",children:u.jsx("div",{className:"flex justify-between items-center",children:h?(()=>{if(s.isScoreRevealed&&console.log(`[PlayerCard] Miner - Player ${s.username}: isScoreRevealed=${s.isScoreRevealed}, willWin=${s.willWin}, willShow=${s.isScoreRevealed&&s.willWin!==void 0}`),s.isScoreRevealed&&s.willWin!==void 0){const j=s.willWin===!0?"Alive":"Bombed",B=s.willWin===!0;return u.jsxs(ye.span,{className:`text-2xl font-bold w-full text-center ${B?"text-sol-mint":"text-red-500"}`,animate:N?{scale:[1,1.1,1]}:{},transition:{duration:.5,repeat:N?1:0,ease:"easeInOut"},children:[v||j,v.length<j.length&&u.jsx("span",{className:"inline-block w-0.5 h-5 bg-current ml-1 align-middle animate-pulse"})]})}return u.jsx("span",{className:"text-2xl font-bold text-txt-muted w-full text-center",children:"???"})})():m?l&&!t||!t&&s.currentScore===0&&!s.isScoreRevealed?u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"text-sm text-txt-muted",children:"Gold Bars"}),u.jsx("span",{className:"text-2xl font-bold text-txt-muted",children:"???"})]}):u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"text-sm text-txt-muted",children:"Gold Bars"}),u.jsx(Ps,{value:s.currentScore})]}):l&&!t?u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"text-sm text-txt-muted",children:"Score"}),u.jsx("span",{className:"text-2xl font-bold text-txt-muted",children:"???"})]}):u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"text-sm text-txt-muted",children:"Score"}),u.jsx(Ps,{value:s.currentScore})]})})})]})},uc=D.memo(y3,(s,t)=>{const a=!s.aiTimerInfo&&!t.aiTimerInfo||s.aiTimerInfo&&t.aiTimerInfo&&s.aiTimerInfo.delay===t.aiTimerInfo.delay&&s.aiTimerInfo.startTime===t.aiTimerInfo.startTime;return!(s.player.id!==t.player.id||s.player.username!==t.player.username||s.player.isScoreRevealed!==t.player.isScoreRevealed||s.player.willWin!==t.player.willWin||s.player.isReady!==t.player.isReady||s.isCurrentPlayer!==t.isCurrentPlayer||s.isWinner!==t.isWinner||s.hideScore!==t.hideScore||s.gameType!==t.gameType||s.gameStatus!==t.gameStatus||s.player.currentScore!==t.player.currentScore||s.player.targetScore!==t.player.targetScore||s.gameMode!==t.gameMode||!a)}),cm=({players:s,maxPlayers:t,timeRemaining:a,onCancel:o,className:l=""})=>{const r=f=>{const g=Math.floor(f/60),h=f%60;return`${g}:${h.toString().padStart(2,"0")}`},d=()=>Array.from({length:t-s.length},(f,g)=>g);return u.jsxs("div",{className:`space-y-6 ${l}`,children:[u.jsxs("div",{className:"text-center",children:[u.jsx(ye.h2,{className:"text-2xl font-display font-bold text-sol-purple mb-2",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:"Waiting for Players"}),u.jsxs(ye.p,{className:"text-txt-muted",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},children:[s.length,"/",t," players joined"]})]}),u.jsxs(ye.div,{className:"text-center",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.5,delay:.2},children:[u.jsxs("div",{className:"inline-flex items-center space-x-2 bg-white/5 rounded-full px-4 py-2 border border-white/10",children:[u.jsx("div",{className:"w-2 h-2 bg-sol-mint rounded-full animate-pulse"}),u.jsx("span",{className:"text-lg font-mono font-bold text-sol-mint",children:r(a)})]}),u.jsx("p",{className:"text-xs text-txt-muted mt-2",children:"Match will start when all players join or time runs out"})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.map((f,g)=>u.jsx(ye.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:g*.1},children:u.jsx(uc,{player:f,isCurrentPlayer:f.username==="You"})},f.id)),d().map((f,g)=>u.jsxs(ye.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:(s.length+g)*.1},className:"glass-card p-4 rounded-xl border-2 border-dashed border-white/20",children:[u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx(vt,{className:"w-10 h-10 rounded-full"}),u.jsxs("div",{className:"flex-1",children:[u.jsx(vt,{className:"h-4 w-24 mb-2"}),u.jsx(vt,{className:"h-3 w-16"})]}),u.jsx("div",{className:"w-6 h-6 rounded-full bg-white/10 animate-pulse"})]}),u.jsxs("div",{className:"mt-3 space-y-2",children:[u.jsx(vt,{className:"h-2 w-full"}),u.jsx(vt,{className:"h-2 w-3/4"})]})]},`empty-${g}`))]}),u.jsx(ye.div,{className:"text-center",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},children:u.jsx(Se,{variant:"ghost",onClick:o,className:"text-txt-muted hover:text-txt-base",children:"Cancel Match"})})]})},v3=({players:s,currentPlayer:t,gameStatus:a,gameResult:o,shouldHideScores:l,hideTeamScores:r=!1,gameType:d,aiPlayerTimerInfo:f})=>{const g=d===yt.Miner,h=s.length/2,m=s.slice(0,h),w=s.slice(h,h*2),x=r?0:g?m.filter(N=>N.isScoreRevealed===!0&&N.willWin===!0).length:m.reduce((N,_)=>N+_.currentScore,0),p=r?0:g?w.filter(N=>N.isScoreRevealed===!0&&N.willWin===!0).length:w.reduce((N,_)=>N+_.currentScore,0),v=o?.winner==="Team A",b=o?.winner==="Team B";return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx(ye.div,{className:`glass-card p-4 rounded-xl border-2 ${v?"border-sol-mint shadow-glow-mint":"border-white/20"}`,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},children:u.jsxs("div",{className:"text-center",children:[u.jsx("h3",{className:"text-lg font-bold text-sol-purple mb-2",children:"Team A"}),r?u.jsx("span",{className:"text-2xl font-bold text-txt-muted",children:"???"}):u.jsx(Ps,{value:x,className:"text-2xl font-bold"})]})}),u.jsx(ye.div,{className:"text-2xl font-bold text-txt-muted",animate:{scale:[1,1.1,1]},transition:{duration:2,repeat:1/0},children:"VS"}),u.jsx(ye.div,{className:`glass-card p-4 rounded-xl border-2 ${b?"border-sol-mint shadow-glow-mint":"border-white/20"}`,initial:{opacity:0,x:20},animate:{opacity:1,x:0},children:u.jsxs("div",{className:"text-center",children:[u.jsx("h3",{className:"text-lg font-bold text-sol-mint mb-2",children:"Team B"}),r?u.jsx("span",{className:"text-2xl font-bold text-txt-muted",children:"???"}):u.jsx(Ps,{value:p,className:"text-2xl font-bold"})]})})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[u.jsxs(ye.div,{className:"space-y-3",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1},children:[u.jsx("h4",{className:"text-lg font-semibold text-sol-purple text-center mb-4",children:"Team A"}),u.jsx("div",{className:"space-y-2",children:m.map(N=>u.jsx(uc,{player:N,isCurrentPlayer:N.username===t&&a==="playing",isWinner:v,hideScore:l?l(N.username):!1,className:"text-sm",gameType:d,gameStatus:a,aiTimerInfo:f?.get(N.username)},N.id))})]}),u.jsxs(ye.div,{className:"space-y-3",initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.2},children:[u.jsx("h4",{className:"text-lg font-semibold text-sol-mint text-center mb-4",children:"Team B"}),u.jsx("div",{className:"space-y-2",children:w.map(N=>u.jsx(uc,{player:N,isCurrentPlayer:N.username===t&&a==="playing",isWinner:b,hideScore:l?l(N.username):!1,className:"text-sm",gameType:d,gameStatus:a,aiTimerInfo:f?.get(N.username)},N.id))})]})]})]})},ub=D.memo(({timeRemaining:s})=>u.jsxs("span",{children:["Time: ",s,"s"]}),(s,t)=>s.timeRemaining===t.timeRemaining);ub.displayName="TimeDisplay";const um=({gameName:s,stakeSol:t,matchType:a,timeRemaining:o,players:l,currentPlayer:r,currentPlayerPubkey:d,gameStatus:f,gameResult:g,shouldHideScores:h,hideTeamScores:m=!1,children:w,gameType:x,aiPlayerTimerInfo:p,gameMode:v})=>{const b=D.useMemo(()=>l.map(N=>({...N})),[l.map(N=>`${N.id}-${N.username}-${N.isScoreRevealed}-${N.willWin}-${N.isReady}-${N.currentScore}-${N.isAlive}-${N.pubkey||""}`).join("|")]);return u.jsxs("div",{className:"space-y-4 md:space-y-8 overflow-hidden w-full py-4 md:py-6",children:[u.jsxs("div",{className:"text-center",children:[u.jsx(ye.h2,{className:"text-lg md:text-2xl font-display font-bold text-sol-purple mb-1 md:mb-2",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:s}),u.jsxs("div",{className:"flex items-center justify-center space-x-2 md:space-x-4 text-xs md:text-sm text-txt-muted",children:[u.jsxs("span",{children:["Stake: ",t," SOL"]}),u.jsx("span",{children:""}),u.jsxs("span",{children:["Mode: ",a]}),u.jsx("span",{children:""}),u.jsx(ub,{timeRemaining:o})]})]}),a==="Duo"||a==="Team"?u.jsx(v3,{players:b,currentPlayer:r,gameStatus:f,gameResult:g,shouldHideScores:h,hideTeamScores:m,gameType:x,aiPlayerTimerInfo:p}):u.jsx("div",{className:"flex gap-2 md:gap-4 justify-center",children:b.map(N=>u.jsx(uc,{player:N,isCurrentPlayer:(d?N.pubkey===d:N.username===r)&&f==="playing",isWinner:g?.winner===N.username,hideScore:h(N.username),className:"w-36 md:w-44 flex-shrink-0",gameType:x,gameStatus:f,aiTimerInfo:p?.get(N.username),gameMode:v},N.id))}),w]})},b3=({tile:s,isSelectedByCurrentPlayer:t,isFlipped:a,disabled:o,valueShadow:l,onTileClick:r,allTilesRevealed:d=!1})=>{const[f,g]=D.useState(!1);D.useEffect(()=>{if(t&&a){const m=setTimeout(()=>{g(!0)},300);return()=>clearTimeout(m)}else g(!1)},[t,a]);const h=()=>{o||s.selected||s.revealed||r(s.index)};return u.jsxs("div",{className:"relative w-full aspect-square",style:{perspective:"800px"},children:[u.jsxs("div",{className:`relative w-full h-full transition-all duration-300 ${o?"cursor-not-allowed":"cursor-pointer"}`,style:{transformStyle:"preserve-3d",transform:a?"rotateY(180deg)":"rotateY(0deg)",willChange:"transform"},onClick:h,children:[u.jsxs("div",{className:"absolute inset-0 rounded-lg border-2 border-purple-500/30 shadow-lg",style:{backfaceVisibility:"hidden",WebkitBackfaceVisibility:"hidden",background:"linear-gradient(135deg, rgba(153,69,255,0.2) 0%, rgba(20,241,149,0.2) 100%)"},children:[u.jsx("div",{className:"absolute inset-0 rounded-lg opacity-20",style:{backgroundImage:"radial-gradient(circle, rgba(255,255,255,0.2) 1px, transparent 1px)",backgroundSize:"8px 8px"}}),u.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-3xl md:text-4xl opacity-60",children:""}),!o&&!a&&u.jsx("div",{className:"absolute inset-0 bg-purple-500/0 hover:bg-purple-500/20 transition-colors duration-200 rounded-lg"})]}),u.jsxs("div",{className:"absolute inset-0 rounded-lg border-2 shadow-lg",style:{backfaceVisibility:"hidden",WebkitBackfaceVisibility:"hidden",transform:"rotateY(180deg)",opacity:a?1:0,transition:"opacity 0.3s cubic-bezier(0.4, 0.0, 0.2, 1)",background:s.isBonus?"linear-gradient(135deg, #fbbf24 0%, #f59e0b 50%, #dc2626 100%)":s.value>=901?"linear-gradient(135deg, #fb923c 0%, #f97316 30%, #dc2626 60%, #7c2d12 100%)":s.value>=600?"linear-gradient(135deg, #14F195 0%, #00D9FF 40%, #0891b2 70%, #0e7490 100%)":s.value>=401?"linear-gradient(135deg, #fef08a 0%, #d9f99d 12%, #bef264 25%, #86efac 38%, #4ade80 50%, #22c55e 63%, #16a34a 75%, #15803d 88%, #14532d 100%)":s.value>=201?"linear-gradient(135deg, #e0e7ff 0%, #c7d2fe 12%, #a5b4fc 25%, #93c5fd 35%, #60a5fa 47%, #3b82f6 58%, #2563eb 70%, #1d4ed8 82%, #1e3a8a 100%)":"linear-gradient(135deg, #d1d5db 0%, #9ca3af 40%, #6b7280 70%, #374151 100%)",borderColor:s.isBonus?"#fbbf24":s.value>=901?"#fb923c":s.value>=600?"#14F195":s.value>=401?"#4ade80":s.value>=201?"#60a5fa":"#9ca3af"},children:[d&&!t&&a&&u.jsx("div",{className:"absolute inset-0 rounded-lg bg-black/60 z-10 transition-opacity duration-300",style:{pointerEvents:"none"}}),u.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:u.jsx("div",{className:"text-2xl md:text-4xl font-extrabold text-white",style:{textShadow:l},children:s.value})}),u.jsx("div",{className:"absolute inset-0 rounded-lg opacity-20",style:{background:"linear-gradient(135deg, rgba(255,255,255,0.3) 0%, transparent 50%, rgba(255,255,255,0.1) 100%)"}})]})]}),t&&f&&u.jsx("div",{className:"absolute inset-0 rounded-lg border-4 border-purple-500 pointer-events-none z-10 transition-opacity duration-300 opacity-100"})]})},w3=({tiles:s,onTileClick:t,disabled:a=!1,playerSelections:o=[],allTilesRevealed:l=!1})=>{const r=f=>f>=901?"0 0 10px rgba(254, 215, 170, 1), 0 0 20px rgba(251, 146, 60, 0.9), 0 0 30px rgba(249, 115, 22, 0.7), 0 0 40px rgba(234, 88, 12, 0.5)":f>=600?"0 0 10px rgba(167, 243, 208, 1), 0 0 20px rgba(20, 241, 149, 0.9), 0 0 30px rgba(0, 217, 255, 0.7), 0 0 40px rgba(6, 182, 212, 0.5)":f>=401?"0 0 10px rgba(187, 247, 208, 1), 0 0 20px rgba(74, 222, 128, 0.9), 0 0 30px rgba(34, 197, 94, 0.7), 0 0 40px rgba(22, 163, 74, 0.5)":f>=201?"0 0 10px rgba(191, 219, 254, 1), 0 0 20px rgba(96, 165, 250, 0.9), 0 0 30px rgba(59, 130, 246, 0.7), 0 0 40px rgba(37, 99, 235, 0.5)":"0 0 10px rgba(209, 213, 219, 0.8), 0 0 20px rgba(156, 163, 175, 0.6), 0 0 30px rgba(107, 114, 128, 0.4)",d=D.useMemo(()=>s.every(f=>f.revealed),[s]);return u.jsx("div",{className:"grid grid-cols-4 gap-1.5 md:gap-2 p-2 mx-auto",style:{width:"100%",maxWidth:"min(100%, 512px)",boxSizing:"border-box",overflow:"hidden"},children:s.map(f=>{const g=o.includes(f.index),h=f.revealed||g,m=r(f.value),w=l||d;return u.jsx(b3,{tile:f,isSelectedByCurrentPlayer:g,isFlipped:h,disabled:a,valueShadow:m,onTileClick:t,allTilesRevealed:w},f.index)})})},S3=({tiles:s,onTileClick:t,disabled:a=!1,playerSelections:o=[]})=>{const l=d=>{a||s[d].selected||s[d].revealed||t(d)},r=d=>d>=901?"0 0 10px rgba(254, 215, 170, 1), 0 0 20px rgba(251, 146, 60, 0.9), 0 0 30px rgba(249, 115, 22, 0.7), 0 0 40px rgba(234, 88, 12, 0.5)":d>=600?"0 0 10px rgba(167, 243, 208, 1), 0 0 20px rgba(20, 241, 149, 0.9), 0 0 30px rgba(0, 217, 255, 0.7), 0 0 40px rgba(6, 182, 212, 0.5)":d>=401?"0 0 10px rgba(187, 247, 208, 1), 0 0 20px rgba(74, 222, 128, 0.9), 0 0 30px rgba(34, 197, 94, 0.7), 0 0 40px rgba(22, 163, 74, 0.5)":d>=201?"0 0 10px rgba(191, 219, 254, 1), 0 0 20px rgba(96, 165, 250, 0.9), 0 0 30px rgba(59, 130, 246, 0.7), 0 0 40px rgba(37, 99, 235, 0.5)":"0 0 10px rgba(209, 213, 219, 0.8), 0 0 20px rgba(156, 163, 175, 0.6), 0 0 30px rgba(107, 114, 128, 0.4)";return u.jsx("div",{className:"grid grid-cols-3 gap-4 md:gap-5 lg:gap-6 max-w-sm md:max-w-md lg:max-w-lg xl:max-w-xl 2xl:max-w-2xl mx-auto",children:s.map(d=>{const f=o.includes(d.index),g=d.revealed||f,h=r(d.value);return u.jsx("div",{className:`relative w-full aspect-square ${a?"cursor-not-allowed":"cursor-pointer"}`,onClick:()=>l(d.index),style:{perspective:"800px"},children:u.jsxs("div",{className:"relative w-full h-full",children:[u.jsx("div",{className:"absolute inset-0 top-1/3 rounded-b-lg border-2 border-yellow-700/50 shadow-lg",style:{background:"linear-gradient(180deg, #f4d03f 0%, #d4af37 30%, #b8860b 60%, #8b6914 100%)"},children:!g&&u.jsx("div",{className:"absolute top-2 left-1/2 -translate-x-1/2 w-4 h-5 md:w-5 md:h-6 rounded-sm bg-gray-700 border border-gray-600 flex items-end justify-center",children:u.jsx("div",{className:"w-1.5 h-2 md:w-2 md:h-2.5 bg-gray-600 rounded-b-sm"})})}),g&&u.jsx("div",{className:"absolute left-1/2 -translate-x-1/2 flex flex-col items-center justify-center transition-all duration-700 ease-out pointer-events-none",style:{top:"30%",transform:g?"translate(-50%, -100%) translateZ(30px)":"translate(-50%, 0%) translateZ(0px)",opacity:g?1:0,willChange:"transform, opacity"},children:u.jsx("div",{className:"text-2xl md:text-4xl font-extrabold text-white animate-pulse",style:{textShadow:h},children:d.value})}),u.jsxs("div",{className:"absolute inset-0 bottom-2/3 rounded-t-lg border-2 border-yellow-700/50 shadow-xl transition-all duration-500 ease-out",style:{background:"linear-gradient(180deg, #ffd700 0%, #f4d03f 25%, #d4af37 60%, #b8860b 100%)",transformOrigin:"bottom center",transformStyle:"preserve-3d",transform:g?"rotateX(-85deg)":"rotateX(0deg)",willChange:"transform"},children:[u.jsx("div",{className:"absolute inset-0 rounded-t-lg opacity-30",style:{background:"linear-gradient(135deg, rgba(255,255,255,0.4) 0%, transparent 50%, rgba(0,0,0,0.2) 100%)"}}),u.jsx("div",{className:"absolute left-0 right-0 bottom-0 h-1 md:h-1.5 bg-yellow-800/60"})]}),f&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"absolute -inset-2 rounded-lg bg-gradient-to-r from-purple-500 to-green-400 opacity-80 blur-md -z-10 animate-pulse"}),u.jsx("div",{className:"absolute inset-0 rounded-lg border-4 border-sol-mint shadow-[0_0_30px_rgba(20,241,149,0.8)] pointer-events-none"})]}),!a&&!g&&u.jsx("div",{className:"absolute -inset-1 rounded-lg bg-yellow-400/0 hover:bg-yellow-400/30 transition-all duration-300 blur-sm -z-10"})]})},d.index)})})},N3=({tiles:s,onTileClick:t,disabled:a=!1,playerSelections:o=[],allTilesRevealed:l=!1})=>{const r=m=>{a||s[m].selected||s[m].revealed||t(m)},d=m=>m>=700?"":m>=500?"":m>=300?"":"",f=m=>m>=901?"text-orange-500":m>=600?"text-sol-mint":m>=401?"text-green-500":m>=201?"text-blue-500":"text-gray-600",g=m=>f(m),h=D.useMemo(()=>s.every(m=>m.revealed),[s]);return u.jsx("div",{className:"flex justify-center gap-4 md:gap-6 lg:gap-8 py-6 md:py-8 px-4 md:px-6",children:s.map(m=>{const w=o.includes(m.index),x=m.revealed||w,p=d(m.value),v=g(m.value),b=l||h;return u.jsxs("div",{className:"relative w-28 h-40 md:w-40 md:h-56 lg:w-44 lg:h-64 xl:w-48 xl:h-72",style:{perspective:"1000px"},children:[w&&u.jsx("div",{className:"absolute -inset-3 rounded-xl bg-gradient-to-br from-purple-500 to-green-400 opacity-80 blur-lg animate-pulse"}),u.jsxs("div",{className:`relative w-full h-full transition-transform duration-500 cursor-pointer ${a?"cursor-not-allowed":""}`,style:{transformStyle:"preserve-3d",transform:x?"rotateY(180deg)":"rotateY(0deg)",willChange:"transform"},onClick:()=>r(m.index),children:[u.jsxs("div",{className:"absolute inset-0 rounded-xl border-4 border-white/20 shadow-2xl overflow-hidden",style:{backfaceVisibility:"hidden",WebkitBackfaceVisibility:"hidden",background:"linear-gradient(135deg, #9945FF 0%, #14F195 100%)"},children:[u.jsx("div",{className:"absolute inset-0 opacity-30",children:u.jsx("div",{className:"w-full h-full",style:{backgroundImage:`repeating-linear-gradient(
                        45deg,
                        transparent,
                        transparent 10px,
                        rgba(255,255,255,0.1) 10px,
                        rgba(255,255,255,0.1) 20px
                      )`}})}),u.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:u.jsx("div",{className:"text-6xl opacity-80",children:""})}),!a&&!x&&u.jsx("div",{className:"absolute inset-0 bg-white/0 hover:bg-white/10 transition-colors duration-300"})]}),u.jsxs("div",{className:"absolute inset-0 rounded-xl border-4 border-gray-300 shadow-2xl bg-white",style:{backfaceVisibility:"hidden",WebkitBackfaceVisibility:"hidden",transform:"rotateY(180deg)",opacity:x?1:0,transition:"opacity 0.3s cubic-bezier(0.4, 0.0, 0.2, 1)"},children:[b&&!w&&x&&u.jsx("div",{className:"absolute inset-0 rounded-xl bg-black/60 z-10 transition-opacity duration-300",style:{pointerEvents:"none"}}),u.jsx("div",{className:`absolute top-2 left-2 ${v} text-xl md:text-2xl font-bold`,children:p}),u.jsx("div",{className:`absolute top-2 right-2 ${v} text-xl md:text-2xl font-bold`,children:p}),u.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:u.jsx("div",{className:`${v} font-extrabold text-4xl md:text-6xl`,children:m.value})}),u.jsx("div",{className:`absolute bottom-2 left-2 ${v} text-xl md:text-2xl font-bold`,style:{transform:"rotate(180deg)"},children:p}),u.jsx("div",{className:`absolute bottom-2 right-2 ${v} text-xl md:text-2xl font-bold`,style:{transform:"rotate(180deg)"},children:p})]})]}),!a&&!x&&u.jsx("div",{className:"absolute -inset-1 rounded-xl bg-gradient-to-r from-purple-500 to-green-400 opacity-0 hover:opacity-30 transition-opacity duration-300 -z-10 blur-sm"})]},m.index)})})},_3=({gameMode:s,tiles:t,onTileClick:a,disabled:o,currentPlayer:l,players:r})=>{const f=r.find(g=>g.username===l)?.selections||[];switch(s){case"PickThreeFromNine":return u.jsx(S3,{tiles:t,onTileClick:a,disabled:o,currentPlayer:l,playerSelections:f});case"PickFiveFromSixteen":return u.jsx(w3,{tiles:t,onTileClick:a,disabled:o,currentPlayer:l,playerSelections:f});case"PickOneFromThree":return u.jsx(N3,{tiles:t,onTileClick:a,disabled:o,currentPlayer:l,playerSelections:f});default:return null}};function Vi(s){return s===5?[50,10,5,10,50]:s===7?[100,50,10,5,10,50,100]:s===9?[200,100,50,20,5,20,50,100,200]:s===11?[500,250,150,75,20,5,20,75,150,250,500]:[50,10,5,10,50]}function R3(s,t,a){const o=Vi(a),l=[];let r=s;const d=new Map,f=m=>{const w=[];for(let x=0;x<o.length;x++)o[x]===m&&w.push(x);return w},g=m=>{const w=f(m),x=d.get(m)||[],p=w.filter(N=>!x.includes(N)),v=p.length>0?p:w,b=v[Math.floor(Math.random()*v.length)];return d.has(m)||d.set(m,[]),d.get(m).push(b),b},h=o.map((m,w)=>({value:m,index:w})).sort((m,w)=>w.value-m.value);for(let m=0;m<t;m++)if(m===t-1){let w=0,x=Math.abs(o[0]-r);for(let b=0;b<o.length;b++){const N=Math.abs(o[b]-r);N<x&&(x=N,w=b)}const p=o[w],v=g(p);l.push(v),r-=o[v]}else{const w=r/(t-m);let x=h[0].index,p=Math.abs(h[0].value-w);for(const N of h){const _=Math.abs(N.value-w);_<p&&N.value<=r&&(p=_,x=N.index)}const v=o[x],b=g(v);l.push(b),r-=o[b]}return l}function db(s){const t=[];for(let a=0;a<s.rows;a++){const o=a+2,l=dc(s,a);for(let r=0;r<o;r++){const d=Zr(s,a,r);t.push({row:a,col:r,x:d,y:l,r:s.pinRadius})}}return t}function dc(s,t){return s.topMargin+(t+1)*s.rowSpacingY}function Zr(s,t,a){return dm(s,t)+a*s.pinSpacingX}function dm(s,t){const a=t+2;return s.width/2-(a-1)*s.pinSpacingX/2}function fm(s,t){const a=s.rows-1,o=a+2,l=dm(s,a);if(t<0||t>=o-1){const f=s.width/s.slotCount;return(t+.5)*f}const r=l+t*s.pinSpacingX,d=l+(t+1)*s.pinSpacingX;return(r+d)/2}function mm(s){return s.height-s.slotHeight}function E3(s){return s.pinSpacingX}function fb(s,t){const a=s.rows-1,o=dm(s,a),l=t-o,r=Math.floor(l/s.pinSpacingX);return Math.max(0,Math.min(s.slotCount-1,r))}function T3(s,t,a=800,o=600){const h=(o-64-48-40)/(s+1),m=a/(t+1);return{rows:s,slotCount:t,width:a,height:o,slotHeight:64,topMargin:48,pinRadius:8,ballRadius:12,gravity:40,rowSpacingY:h,pinSpacingX:m}}class A3{state;constructor(t=Date.now()){this.state=t}next(){let t=this.state+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296}nextInt(t,a){return Math.floor(this.next()*(a-t))+t}shuffle(t){const a=[...t];for(let o=a.length-1;o>0;o--){const l=Math.floor(this.next()*(o+1));[a[o],a[l]]=[a[l],a[o]]}return a}}function C3(s){return new A3(s??Date.now())}function M3(s,t){const a=new Array(s).fill(-1);let o=0,l=0;for(let r=0;r<s&&o<t;r++)l+=t,l>=s&&(a[r]=1,o++,l-=s);for(let r=s-1;r>=0&&o<t;r--)a[r]===-1&&(a[r]=1,o++);return a}function O3(s,t,a){if(t<0||t>=s.slotCount)throw new Error(`Invalid targetSlot: ${t}, must be in [0, ${s.slotCount-1}]`);const o=(s.slotCount-1)/2,l=t-o;let r=Math.round((s.rows+l)/2);r=Math.max(0,Math.min(s.rows,r));const d=M3(s.rows,r);let f=d;if(a!==void 0&&(f=C3(a).shuffle([...d])),t===o&&s.rows>0){const C=(a!==void 0?Math.floor(a):0)%2===0;if(C&&f[0]===-1){for(let k=1;k<f.length;k++)if(f[k]===1){[f[0],f[k]]=[f[k],f[0]];break}}else if(!C&&f[0]===1){for(let k=1;k<f.length;k++)if(f[k]===-1){[f[0],f[k]]=[f[k],f[0]];break}}}const h=[],m=s.rows-1,x=m+2-1;let p=t;p=Math.max(0,Math.min(x-1,p));const v=Zr(s,m,p),b=Zr(s,m,p+1),N=(v+b)/2,_=[];_[m]=N;for(let A=m-1;A>=0;A--){const k=A+2-1;f[A]===1&&(p=Math.max(0,p-1)),p=Math.max(0,Math.min(k-1,p));const j=Zr(s,A,p),B=Zr(s,A,p+1),M=(j+B)/2;_[A]=M}for(let A=0;A<s.rows;A++)h.push(_[A]);return{decisions:f,targetPinsX:h}}var ac={exports:{}};/*!
 * matter-js 0.20.0 by @liabru
 * http://brm.io/matter-js/
 * License MIT
 * 
 * The MIT License (MIT)
 * 
 * Copyright (c) Liam Brummitt and contributors.
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var j3=ac.exports,ty;function k3(){return ty||(ty=1,(function(s,t){(function(o,l){s.exports=l()})(j3,function(){return(function(a){var o={};function l(r){if(o[r])return o[r].exports;var d=o[r]={i:r,l:!1,exports:{}};return a[r].call(d.exports,d,d.exports,l),d.l=!0,d.exports}return l.m=a,l.c=o,l.d=function(r,d,f){l.o(r,d)||Object.defineProperty(r,d,{enumerable:!0,get:f})},l.r=function(r){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},l.t=function(r,d){if(d&1&&(r=l(r)),d&8||d&4&&typeof r=="object"&&r&&r.__esModule)return r;var f=Object.create(null);if(l.r(f),Object.defineProperty(f,"default",{enumerable:!0,value:r}),d&2&&typeof r!="string")for(var g in r)l.d(f,g,(function(h){return r[h]}).bind(null,g));return f},l.n=function(r){var d=r&&r.__esModule?(function(){return r.default}):(function(){return r});return l.d(d,"a",d),d},l.o=function(r,d){return Object.prototype.hasOwnProperty.call(r,d)},l.p="",l(l.s=20)})([(function(a,o){var l={};a.exports=l,(function(){l._baseDelta=1e3/60,l._nextId=0,l._seed=0,l._nowStartTime=+new Date,l._warnedOnce={},l._decomp=null,l.extend=function(d,f){var g,h;typeof f=="boolean"?(g=2,h=f):(g=1,h=!0);for(var m=g;m<arguments.length;m++){var w=arguments[m];if(w)for(var x in w)h&&w[x]&&w[x].constructor===Object&&(!d[x]||d[x].constructor===Object)?(d[x]=d[x]||{},l.extend(d[x],h,w[x])):d[x]=w[x]}return d},l.clone=function(d,f){return l.extend({},f,d)},l.keys=function(d){if(Object.keys)return Object.keys(d);var f=[];for(var g in d)f.push(g);return f},l.values=function(d){var f=[];if(Object.keys){for(var g=Object.keys(d),h=0;h<g.length;h++)f.push(d[g[h]]);return f}for(var m in d)f.push(d[m]);return f},l.get=function(d,f,g,h){f=f.split(".").slice(g,h);for(var m=0;m<f.length;m+=1)d=d[f[m]];return d},l.set=function(d,f,g,h,m){var w=f.split(".").slice(h,m);return l.get(d,f,0,-1)[w[w.length-1]]=g,g},l.shuffle=function(d){for(var f=d.length-1;f>0;f--){var g=Math.floor(l.random()*(f+1)),h=d[f];d[f]=d[g],d[g]=h}return d},l.choose=function(d){return d[Math.floor(l.random()*d.length)]},l.isElement=function(d){return typeof HTMLElement<"u"?d instanceof HTMLElement:!!(d&&d.nodeType&&d.nodeName)},l.isArray=function(d){return Object.prototype.toString.call(d)==="[object Array]"},l.isFunction=function(d){return typeof d=="function"},l.isPlainObject=function(d){return typeof d=="object"&&d.constructor===Object},l.isString=function(d){return toString.call(d)==="[object String]"},l.clamp=function(d,f,g){return d<f?f:d>g?g:d},l.sign=function(d){return d<0?-1:1},l.now=function(){if(typeof window<"u"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-l._nowStartTime},l.random=function(d,f){return d=typeof d<"u"?d:0,f=typeof f<"u"?f:1,d+r()*(f-d)};var r=function(){return l._seed=(l._seed*9301+49297)%233280,l._seed/233280};l.colorToNumber=function(d){return d=d.replace("#",""),d.length==3&&(d=d.charAt(0)+d.charAt(0)+d.charAt(1)+d.charAt(1)+d.charAt(2)+d.charAt(2)),parseInt(d,16)},l.logLevel=1,l.log=function(){console&&l.logLevel>0&&l.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},l.info=function(){console&&l.logLevel>0&&l.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},l.warn=function(){console&&l.logLevel>0&&l.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},l.warnOnce=function(){var d=Array.prototype.slice.call(arguments).join(" ");l._warnedOnce[d]||(l.warn(d),l._warnedOnce[d]=!0)},l.deprecated=function(d,f,g){d[f]=l.chain(function(){l.warnOnce(" deprecated ",g)},d[f])},l.nextId=function(){return l._nextId++},l.indexOf=function(d,f){if(d.indexOf)return d.indexOf(f);for(var g=0;g<d.length;g++)if(d[g]===f)return g;return-1},l.map=function(d,f){if(d.map)return d.map(f);for(var g=[],h=0;h<d.length;h+=1)g.push(f(d[h]));return g},l.topologicalSort=function(d){var f=[],g=[],h=[];for(var m in d)!g[m]&&!h[m]&&l._topologicalSort(m,g,h,d,f);return f},l._topologicalSort=function(d,f,g,h,m){var w=h[d]||[];g[d]=!0;for(var x=0;x<w.length;x+=1){var p=w[x];g[p]||f[p]||l._topologicalSort(p,f,g,h,m)}g[d]=!1,f[d]=!0,m.push(d)},l.chain=function(){for(var d=[],f=0;f<arguments.length;f+=1){var g=arguments[f];g._chained?d.push.apply(d,g._chained):d.push(g)}var h=function(){for(var m,w=new Array(arguments.length),x=0,p=arguments.length;x<p;x++)w[x]=arguments[x];for(x=0;x<d.length;x+=1){var v=d[x].apply(m,w);typeof v<"u"&&(m=v)}return m};return h._chained=d,h},l.chainPathBefore=function(d,f,g){return l.set(d,f,l.chain(g,l.get(d,f)))},l.chainPathAfter=function(d,f,g){return l.set(d,f,l.chain(l.get(d,f),g))},l.setDecomp=function(d){l._decomp=d},l.getDecomp=function(){var d=l._decomp;try{!d&&typeof window<"u"&&(d=window.decomp),!d&&typeof globalThis<"u"&&(d=globalThis.decomp)}catch{d=null}return d}})()}),(function(a,o){var l={};a.exports=l,(function(){l.create=function(r){var d={min:{x:0,y:0},max:{x:0,y:0}};return r&&l.update(d,r),d},l.update=function(r,d,f){r.min.x=1/0,r.max.x=-1/0,r.min.y=1/0,r.max.y=-1/0;for(var g=0;g<d.length;g++){var h=d[g];h.x>r.max.x&&(r.max.x=h.x),h.x<r.min.x&&(r.min.x=h.x),h.y>r.max.y&&(r.max.y=h.y),h.y<r.min.y&&(r.min.y=h.y)}f&&(f.x>0?r.max.x+=f.x:r.min.x+=f.x,f.y>0?r.max.y+=f.y:r.min.y+=f.y)},l.contains=function(r,d){return d.x>=r.min.x&&d.x<=r.max.x&&d.y>=r.min.y&&d.y<=r.max.y},l.overlaps=function(r,d){return r.min.x<=d.max.x&&r.max.x>=d.min.x&&r.max.y>=d.min.y&&r.min.y<=d.max.y},l.translate=function(r,d){r.min.x+=d.x,r.max.x+=d.x,r.min.y+=d.y,r.max.y+=d.y},l.shift=function(r,d){var f=r.max.x-r.min.x,g=r.max.y-r.min.y;r.min.x=d.x,r.max.x=d.x+f,r.min.y=d.y,r.max.y=d.y+g}})()}),(function(a,o){var l={};a.exports=l,(function(){l.create=function(r,d){return{x:r||0,y:d||0}},l.clone=function(r){return{x:r.x,y:r.y}},l.magnitude=function(r){return Math.sqrt(r.x*r.x+r.y*r.y)},l.magnitudeSquared=function(r){return r.x*r.x+r.y*r.y},l.rotate=function(r,d,f){var g=Math.cos(d),h=Math.sin(d);f||(f={});var m=r.x*g-r.y*h;return f.y=r.x*h+r.y*g,f.x=m,f},l.rotateAbout=function(r,d,f,g){var h=Math.cos(d),m=Math.sin(d);g||(g={});var w=f.x+((r.x-f.x)*h-(r.y-f.y)*m);return g.y=f.y+((r.x-f.x)*m+(r.y-f.y)*h),g.x=w,g},l.normalise=function(r){var d=l.magnitude(r);return d===0?{x:0,y:0}:{x:r.x/d,y:r.y/d}},l.dot=function(r,d){return r.x*d.x+r.y*d.y},l.cross=function(r,d){return r.x*d.y-r.y*d.x},l.cross3=function(r,d,f){return(d.x-r.x)*(f.y-r.y)-(d.y-r.y)*(f.x-r.x)},l.add=function(r,d,f){return f||(f={}),f.x=r.x+d.x,f.y=r.y+d.y,f},l.sub=function(r,d,f){return f||(f={}),f.x=r.x-d.x,f.y=r.y-d.y,f},l.mult=function(r,d){return{x:r.x*d,y:r.y*d}},l.div=function(r,d){return{x:r.x/d,y:r.y/d}},l.perp=function(r,d){return d=d===!0?-1:1,{x:d*-r.y,y:d*r.x}},l.neg=function(r){return{x:-r.x,y:-r.y}},l.angle=function(r,d){return Math.atan2(d.y-r.y,d.x-r.x)},l._temp=[l.create(),l.create(),l.create(),l.create(),l.create(),l.create()]})()}),(function(a,o,l){var r={};a.exports=r;var d=l(2),f=l(0);(function(){r.create=function(g,h){for(var m=[],w=0;w<g.length;w++){var x=g[w],p={x:x.x,y:x.y,index:w,body:h,isInternal:!1};m.push(p)}return m},r.fromPath=function(g,h){var m=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,w=[];return g.replace(m,function(x,p,v){w.push({x:parseFloat(p),y:parseFloat(v)})}),r.create(w,h)},r.centre=function(g){for(var h=r.area(g,!0),m={x:0,y:0},w,x,p,v=0;v<g.length;v++)p=(v+1)%g.length,w=d.cross(g[v],g[p]),x=d.mult(d.add(g[v],g[p]),w),m=d.add(m,x);return d.div(m,6*h)},r.mean=function(g){for(var h={x:0,y:0},m=0;m<g.length;m++)h.x+=g[m].x,h.y+=g[m].y;return d.div(h,g.length)},r.area=function(g,h){for(var m=0,w=g.length-1,x=0;x<g.length;x++)m+=(g[w].x-g[x].x)*(g[w].y+g[x].y),w=x;return h?m/2:Math.abs(m)/2},r.inertia=function(g,h){for(var m=0,w=0,x=g,p,v,b=0;b<x.length;b++)v=(b+1)%x.length,p=Math.abs(d.cross(x[v],x[b])),m+=p*(d.dot(x[v],x[v])+d.dot(x[v],x[b])+d.dot(x[b],x[b])),w+=p;return h/6*(m/w)},r.translate=function(g,h,m){m=typeof m<"u"?m:1;var w=g.length,x=h.x*m,p=h.y*m,v;for(v=0;v<w;v++)g[v].x+=x,g[v].y+=p;return g},r.rotate=function(g,h,m){if(h!==0){var w=Math.cos(h),x=Math.sin(h),p=m.x,v=m.y,b=g.length,N,_,A,C;for(C=0;C<b;C++)N=g[C],_=N.x-p,A=N.y-v,N.x=p+(_*w-A*x),N.y=v+(_*x+A*w);return g}},r.contains=function(g,h){for(var m=h.x,w=h.y,x=g.length,p=g[x-1],v,b=0;b<x;b++){if(v=g[b],(m-p.x)*(v.y-p.y)+(w-p.y)*(p.x-v.x)>0)return!1;p=v}return!0},r.scale=function(g,h,m,w){if(h===1&&m===1)return g;w=w||r.centre(g);for(var x,p,v=0;v<g.length;v++)x=g[v],p=d.sub(x,w),g[v].x=w.x+p.x*h,g[v].y=w.y+p.y*m;return g},r.chamfer=function(g,h,m,w,x){typeof h=="number"?h=[h]:h=h||[8],m=typeof m<"u"?m:-1,w=w||2,x=x||14;for(var p=[],v=0;v<g.length;v++){var b=g[v-1>=0?v-1:g.length-1],N=g[v],_=g[(v+1)%g.length],A=h[v<h.length?v:h.length-1];if(A===0){p.push(N);continue}var C=d.normalise({x:N.y-b.y,y:b.x-N.x}),k=d.normalise({x:_.y-N.y,y:N.x-_.x}),R=Math.sqrt(2*Math.pow(A,2)),j=d.mult(f.clone(C),A),B=d.normalise(d.mult(d.add(C,k),.5)),M=d.sub(N,d.mult(B,R)),I=m;m===-1&&(I=Math.pow(A,.32)*1.75),I=f.clamp(I,w,x),I%2===1&&(I+=1);for(var L=Math.acos(d.dot(C,k)),P=L/I,U=0;U<I;U++)p.push(d.add(d.rotate(j,P*U),M))}return p},r.clockwiseSort=function(g){var h=r.mean(g);return g.sort(function(m,w){return d.angle(h,m)-d.angle(h,w)}),g},r.isConvex=function(g){var h=0,m=g.length,w,x,p,v;if(m<3)return null;for(w=0;w<m;w++)if(x=(w+1)%m,p=(w+2)%m,v=(g[x].x-g[w].x)*(g[p].y-g[x].y),v-=(g[x].y-g[w].y)*(g[p].x-g[x].x),v<0?h|=1:v>0&&(h|=2),h===3)return!1;return h!==0?!0:null},r.hull=function(g){var h=[],m=[],w,x;for(g=g.slice(0),g.sort(function(p,v){var b=p.x-v.x;return b!==0?b:p.y-v.y}),x=0;x<g.length;x+=1){for(w=g[x];m.length>=2&&d.cross3(m[m.length-2],m[m.length-1],w)<=0;)m.pop();m.push(w)}for(x=g.length-1;x>=0;x-=1){for(w=g[x];h.length>=2&&d.cross3(h[h.length-2],h[h.length-1],w)<=0;)h.pop();h.push(w)}return h.pop(),m.pop(),h.concat(m)}})()}),(function(a,o,l){var r={};a.exports=r;var d=l(3),f=l(2),g=l(7),h=l(0),m=l(1),w=l(11);(function(){r._timeCorrection=!0,r._inertiaScale=4,r._nextCollidingGroupId=1,r._nextNonCollidingGroupId=-1,r._nextCategory=1,r._baseDelta=1e3/60,r.create=function(p){var v={id:h.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:d.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"),position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,render:{visible:!0,opacity:1,strokeStyle:null,fillStyle:null,lineWidth:null,sprite:{xScale:1,yScale:1,xOffset:0,yOffset:0}},events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inertia:0,deltaTime:16.666666666666668,_original:null},b=h.extend(v,p);return x(b,p),b},r.nextGroup=function(p){return p?r._nextNonCollidingGroupId--:r._nextCollidingGroupId++},r.nextCategory=function(){return r._nextCategory=r._nextCategory<<1,r._nextCategory};var x=function(p,v){v=v||{},r.set(p,{bounds:p.bounds||m.create(p.vertices),positionPrev:p.positionPrev||f.clone(p.position),anglePrev:p.anglePrev||p.angle,vertices:p.vertices,parts:p.parts||[p],isStatic:p.isStatic,isSleeping:p.isSleeping,parent:p.parent||p}),d.rotate(p.vertices,p.angle,p.position),w.rotate(p.axes,p.angle),m.update(p.bounds,p.vertices,p.velocity),r.set(p,{axes:v.axes||p.axes,area:v.area||p.area,mass:v.mass||p.mass,inertia:v.inertia||p.inertia});var b=p.isStatic?"#14151f":h.choose(["#f19648","#f5d259","#f55a3c","#063e7b","#ececd1"]),N=p.isStatic?"#555":"#ccc",_=p.isStatic&&p.render.fillStyle===null?1:0;p.render.fillStyle=p.render.fillStyle||b,p.render.strokeStyle=p.render.strokeStyle||N,p.render.lineWidth=p.render.lineWidth||_,p.render.sprite.xOffset+=-(p.bounds.min.x-p.position.x)/(p.bounds.max.x-p.bounds.min.x),p.render.sprite.yOffset+=-(p.bounds.min.y-p.position.y)/(p.bounds.max.y-p.bounds.min.y)};r.set=function(p,v,b){var N;typeof v=="string"&&(N=v,v={},v[N]=b);for(N in v)if(Object.prototype.hasOwnProperty.call(v,N))switch(b=v[N],N){case"isStatic":r.setStatic(p,b);break;case"isSleeping":g.set(p,b);break;case"mass":r.setMass(p,b);break;case"density":r.setDensity(p,b);break;case"inertia":r.setInertia(p,b);break;case"vertices":r.setVertices(p,b);break;case"position":r.setPosition(p,b);break;case"angle":r.setAngle(p,b);break;case"velocity":r.setVelocity(p,b);break;case"angularVelocity":r.setAngularVelocity(p,b);break;case"speed":r.setSpeed(p,b);break;case"angularSpeed":r.setAngularSpeed(p,b);break;case"parts":r.setParts(p,b);break;case"centre":r.setCentre(p,b);break;default:p[N]=b}},r.setStatic=function(p,v){for(var b=0;b<p.parts.length;b++){var N=p.parts[b];v?(N.isStatic||(N._original={restitution:N.restitution,friction:N.friction,mass:N.mass,inertia:N.inertia,density:N.density,inverseMass:N.inverseMass,inverseInertia:N.inverseInertia}),N.restitution=0,N.friction=1,N.mass=N.inertia=N.density=1/0,N.inverseMass=N.inverseInertia=0,N.positionPrev.x=N.position.x,N.positionPrev.y=N.position.y,N.anglePrev=N.angle,N.angularVelocity=0,N.speed=0,N.angularSpeed=0,N.motion=0):N._original&&(N.restitution=N._original.restitution,N.friction=N._original.friction,N.mass=N._original.mass,N.inertia=N._original.inertia,N.density=N._original.density,N.inverseMass=N._original.inverseMass,N.inverseInertia=N._original.inverseInertia,N._original=null),N.isStatic=v}},r.setMass=function(p,v){var b=p.inertia/(p.mass/6);p.inertia=b*(v/6),p.inverseInertia=1/p.inertia,p.mass=v,p.inverseMass=1/p.mass,p.density=p.mass/p.area},r.setDensity=function(p,v){r.setMass(p,v*p.area),p.density=v},r.setInertia=function(p,v){p.inertia=v,p.inverseInertia=1/p.inertia},r.setVertices=function(p,v){v[0].body===p?p.vertices=v:p.vertices=d.create(v,p),p.axes=w.fromVertices(p.vertices),p.area=d.area(p.vertices),r.setMass(p,p.density*p.area);var b=d.centre(p.vertices);d.translate(p.vertices,b,-1),r.setInertia(p,r._inertiaScale*d.inertia(p.vertices,p.mass)),d.translate(p.vertices,p.position),m.update(p.bounds,p.vertices,p.velocity)},r.setParts=function(p,v,b){var N;for(v=v.slice(0),p.parts.length=0,p.parts.push(p),p.parent=p,N=0;N<v.length;N++){var _=v[N];_!==p&&(_.parent=p,p.parts.push(_))}if(p.parts.length!==1){if(b=typeof b<"u"?b:!0,b){var A=[];for(N=0;N<v.length;N++)A=A.concat(v[N].vertices);d.clockwiseSort(A);var C=d.hull(A),k=d.centre(C);r.setVertices(p,C),d.translate(p.vertices,k)}var R=r._totalProperties(p);p.area=R.area,p.parent=p,p.position.x=R.centre.x,p.position.y=R.centre.y,p.positionPrev.x=R.centre.x,p.positionPrev.y=R.centre.y,r.setMass(p,R.mass),r.setInertia(p,R.inertia),r.setPosition(p,R.centre)}},r.setCentre=function(p,v,b){b?(p.positionPrev.x+=v.x,p.positionPrev.y+=v.y,p.position.x+=v.x,p.position.y+=v.y):(p.positionPrev.x=v.x-(p.position.x-p.positionPrev.x),p.positionPrev.y=v.y-(p.position.y-p.positionPrev.y),p.position.x=v.x,p.position.y=v.y)},r.setPosition=function(p,v,b){var N=f.sub(v,p.position);b?(p.positionPrev.x=p.position.x,p.positionPrev.y=p.position.y,p.velocity.x=N.x,p.velocity.y=N.y,p.speed=f.magnitude(N)):(p.positionPrev.x+=N.x,p.positionPrev.y+=N.y);for(var _=0;_<p.parts.length;_++){var A=p.parts[_];A.position.x+=N.x,A.position.y+=N.y,d.translate(A.vertices,N),m.update(A.bounds,A.vertices,p.velocity)}},r.setAngle=function(p,v,b){var N=v-p.angle;b?(p.anglePrev=p.angle,p.angularVelocity=N,p.angularSpeed=Math.abs(N)):p.anglePrev+=N;for(var _=0;_<p.parts.length;_++){var A=p.parts[_];A.angle+=N,d.rotate(A.vertices,N,p.position),w.rotate(A.axes,N),m.update(A.bounds,A.vertices,p.velocity),_>0&&f.rotateAbout(A.position,N,p.position,A.position)}},r.setVelocity=function(p,v){var b=p.deltaTime/r._baseDelta;p.positionPrev.x=p.position.x-v.x*b,p.positionPrev.y=p.position.y-v.y*b,p.velocity.x=(p.position.x-p.positionPrev.x)/b,p.velocity.y=(p.position.y-p.positionPrev.y)/b,p.speed=f.magnitude(p.velocity)},r.getVelocity=function(p){var v=r._baseDelta/p.deltaTime;return{x:(p.position.x-p.positionPrev.x)*v,y:(p.position.y-p.positionPrev.y)*v}},r.getSpeed=function(p){return f.magnitude(r.getVelocity(p))},r.setSpeed=function(p,v){r.setVelocity(p,f.mult(f.normalise(r.getVelocity(p)),v))},r.setAngularVelocity=function(p,v){var b=p.deltaTime/r._baseDelta;p.anglePrev=p.angle-v*b,p.angularVelocity=(p.angle-p.anglePrev)/b,p.angularSpeed=Math.abs(p.angularVelocity)},r.getAngularVelocity=function(p){return(p.angle-p.anglePrev)*r._baseDelta/p.deltaTime},r.getAngularSpeed=function(p){return Math.abs(r.getAngularVelocity(p))},r.setAngularSpeed=function(p,v){r.setAngularVelocity(p,h.sign(r.getAngularVelocity(p))*v)},r.translate=function(p,v,b){r.setPosition(p,f.add(p.position,v),b)},r.rotate=function(p,v,b,N){if(!b)r.setAngle(p,p.angle+v,N);else{var _=Math.cos(v),A=Math.sin(v),C=p.position.x-b.x,k=p.position.y-b.y;r.setPosition(p,{x:b.x+(C*_-k*A),y:b.y+(C*A+k*_)},N),r.setAngle(p,p.angle+v,N)}},r.scale=function(p,v,b,N){var _=0,A=0;N=N||p.position;for(var C=0;C<p.parts.length;C++){var k=p.parts[C];d.scale(k.vertices,v,b,N),k.axes=w.fromVertices(k.vertices),k.area=d.area(k.vertices),r.setMass(k,p.density*k.area),d.translate(k.vertices,{x:-k.position.x,y:-k.position.y}),r.setInertia(k,r._inertiaScale*d.inertia(k.vertices,k.mass)),d.translate(k.vertices,{x:k.position.x,y:k.position.y}),C>0&&(_+=k.area,A+=k.inertia),k.position.x=N.x+(k.position.x-N.x)*v,k.position.y=N.y+(k.position.y-N.y)*b,m.update(k.bounds,k.vertices,p.velocity)}p.parts.length>1&&(p.area=_,p.isStatic||(r.setMass(p,p.density*_),r.setInertia(p,A))),p.circleRadius&&(v===b?p.circleRadius*=v:p.circleRadius=null)},r.update=function(p,v){v=(typeof v<"u"?v:1e3/60)*p.timeScale;var b=v*v,N=r._timeCorrection?v/(p.deltaTime||v):1,_=1-p.frictionAir*(v/h._baseDelta),A=(p.position.x-p.positionPrev.x)*N,C=(p.position.y-p.positionPrev.y)*N;p.velocity.x=A*_+p.force.x/p.mass*b,p.velocity.y=C*_+p.force.y/p.mass*b,p.positionPrev.x=p.position.x,p.positionPrev.y=p.position.y,p.position.x+=p.velocity.x,p.position.y+=p.velocity.y,p.deltaTime=v,p.angularVelocity=(p.angle-p.anglePrev)*_*N+p.torque/p.inertia*b,p.anglePrev=p.angle,p.angle+=p.angularVelocity;for(var k=0;k<p.parts.length;k++){var R=p.parts[k];d.translate(R.vertices,p.velocity),k>0&&(R.position.x+=p.velocity.x,R.position.y+=p.velocity.y),p.angularVelocity!==0&&(d.rotate(R.vertices,p.angularVelocity,p.position),w.rotate(R.axes,p.angularVelocity),k>0&&f.rotateAbout(R.position,p.angularVelocity,p.position,R.position)),m.update(R.bounds,R.vertices,p.velocity)}},r.updateVelocities=function(p){var v=r._baseDelta/p.deltaTime,b=p.velocity;b.x=(p.position.x-p.positionPrev.x)*v,b.y=(p.position.y-p.positionPrev.y)*v,p.speed=Math.sqrt(b.x*b.x+b.y*b.y),p.angularVelocity=(p.angle-p.anglePrev)*v,p.angularSpeed=Math.abs(p.angularVelocity)},r.applyForce=function(p,v,b){var N={x:v.x-p.position.x,y:v.y-p.position.y};p.force.x+=b.x,p.force.y+=b.y,p.torque+=N.x*b.y-N.y*b.x},r._totalProperties=function(p){for(var v={mass:0,area:0,inertia:0,centre:{x:0,y:0}},b=p.parts.length===1?0:1;b<p.parts.length;b++){var N=p.parts[b],_=N.mass!==1/0?N.mass:1;v.mass+=_,v.area+=N.area,v.inertia+=N.inertia,v.centre=f.add(v.centre,f.mult(N.position,_))}return v.centre=f.div(v.centre,v.mass),v}})()}),(function(a,o,l){var r={};a.exports=r;var d=l(0);(function(){r.on=function(f,g,h){for(var m=g.split(" "),w,x=0;x<m.length;x++)w=m[x],f.events=f.events||{},f.events[w]=f.events[w]||[],f.events[w].push(h);return h},r.off=function(f,g,h){if(!g){f.events={};return}typeof g=="function"&&(h=g,g=d.keys(f.events).join(" "));for(var m=g.split(" "),w=0;w<m.length;w++){var x=f.events[m[w]],p=[];if(h&&x)for(var v=0;v<x.length;v++)x[v]!==h&&p.push(x[v]);f.events[m[w]]=p}},r.trigger=function(f,g,h){var m,w,x,p,v=f.events;if(v&&d.keys(v).length>0){h||(h={}),m=g.split(" ");for(var b=0;b<m.length;b++)if(w=m[b],x=v[w],x){p=d.clone(h,!1),p.name=w,p.source=f;for(var N=0;N<x.length;N++)x[N].apply(f,[p])}}}})()}),(function(a,o,l){var r={};a.exports=r;var d=l(5),f=l(0),g=l(1),h=l(4);(function(){r.create=function(m){return f.extend({id:f.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},cache:{allBodies:null,allConstraints:null,allComposites:null}},m)},r.setModified=function(m,w,x,p){if(m.isModified=w,w&&m.cache&&(m.cache.allBodies=null,m.cache.allConstraints=null,m.cache.allComposites=null),x&&m.parent&&r.setModified(m.parent,w,x,p),p)for(var v=0;v<m.composites.length;v++){var b=m.composites[v];r.setModified(b,w,x,p)}},r.add=function(m,w){var x=[].concat(w);d.trigger(m,"beforeAdd",{object:w});for(var p=0;p<x.length;p++){var v=x[p];switch(v.type){case"body":if(v.parent!==v){f.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}r.addBody(m,v);break;case"constraint":r.addConstraint(m,v);break;case"composite":r.addComposite(m,v);break;case"mouseConstraint":r.addConstraint(m,v.constraint);break}}return d.trigger(m,"afterAdd",{object:w}),m},r.remove=function(m,w,x){var p=[].concat(w);d.trigger(m,"beforeRemove",{object:w});for(var v=0;v<p.length;v++){var b=p[v];switch(b.type){case"body":r.removeBody(m,b,x);break;case"constraint":r.removeConstraint(m,b,x);break;case"composite":r.removeComposite(m,b,x);break;case"mouseConstraint":r.removeConstraint(m,b.constraint);break}}return d.trigger(m,"afterRemove",{object:w}),m},r.addComposite=function(m,w){return m.composites.push(w),w.parent=m,r.setModified(m,!0,!0,!1),m},r.removeComposite=function(m,w,x){var p=f.indexOf(m.composites,w);if(p!==-1){var v=r.allBodies(w);r.removeCompositeAt(m,p);for(var b=0;b<v.length;b++)v[b].sleepCounter=0}if(x)for(var b=0;b<m.composites.length;b++)r.removeComposite(m.composites[b],w,!0);return m},r.removeCompositeAt=function(m,w){return m.composites.splice(w,1),r.setModified(m,!0,!0,!1),m},r.addBody=function(m,w){return m.bodies.push(w),r.setModified(m,!0,!0,!1),m},r.removeBody=function(m,w,x){var p=f.indexOf(m.bodies,w);if(p!==-1&&(r.removeBodyAt(m,p),w.sleepCounter=0),x)for(var v=0;v<m.composites.length;v++)r.removeBody(m.composites[v],w,!0);return m},r.removeBodyAt=function(m,w){return m.bodies.splice(w,1),r.setModified(m,!0,!0,!1),m},r.addConstraint=function(m,w){return m.constraints.push(w),r.setModified(m,!0,!0,!1),m},r.removeConstraint=function(m,w,x){var p=f.indexOf(m.constraints,w);if(p!==-1&&r.removeConstraintAt(m,p),x)for(var v=0;v<m.composites.length;v++)r.removeConstraint(m.composites[v],w,!0);return m},r.removeConstraintAt=function(m,w){return m.constraints.splice(w,1),r.setModified(m,!0,!0,!1),m},r.clear=function(m,w,x){if(x)for(var p=0;p<m.composites.length;p++)r.clear(m.composites[p],w,!0);return w?m.bodies=m.bodies.filter(function(v){return v.isStatic}):m.bodies.length=0,m.constraints.length=0,m.composites.length=0,r.setModified(m,!0,!0,!1),m},r.allBodies=function(m){if(m.cache&&m.cache.allBodies)return m.cache.allBodies;for(var w=[].concat(m.bodies),x=0;x<m.composites.length;x++)w=w.concat(r.allBodies(m.composites[x]));return m.cache&&(m.cache.allBodies=w),w},r.allConstraints=function(m){if(m.cache&&m.cache.allConstraints)return m.cache.allConstraints;for(var w=[].concat(m.constraints),x=0;x<m.composites.length;x++)w=w.concat(r.allConstraints(m.composites[x]));return m.cache&&(m.cache.allConstraints=w),w},r.allComposites=function(m){if(m.cache&&m.cache.allComposites)return m.cache.allComposites;for(var w=[].concat(m.composites),x=0;x<m.composites.length;x++)w=w.concat(r.allComposites(m.composites[x]));return m.cache&&(m.cache.allComposites=w),w},r.get=function(m,w,x){var p,v;switch(x){case"body":p=r.allBodies(m);break;case"constraint":p=r.allConstraints(m);break;case"composite":p=r.allComposites(m).concat(m);break}return p?(v=p.filter(function(b){return b.id.toString()===w.toString()}),v.length===0?null:v[0]):null},r.move=function(m,w,x){return r.remove(m,w),r.add(x,w),m},r.rebase=function(m){for(var w=r.allBodies(m).concat(r.allConstraints(m)).concat(r.allComposites(m)),x=0;x<w.length;x++)w[x].id=f.nextId();return m},r.translate=function(m,w,x){for(var p=x?r.allBodies(m):m.bodies,v=0;v<p.length;v++)h.translate(p[v],w);return m},r.rotate=function(m,w,x,p){for(var v=Math.cos(w),b=Math.sin(w),N=p?r.allBodies(m):m.bodies,_=0;_<N.length;_++){var A=N[_],C=A.position.x-x.x,k=A.position.y-x.y;h.setPosition(A,{x:x.x+(C*v-k*b),y:x.y+(C*b+k*v)}),h.rotate(A,w)}return m},r.scale=function(m,w,x,p,v){for(var b=v?r.allBodies(m):m.bodies,N=0;N<b.length;N++){var _=b[N],A=_.position.x-p.x,C=_.position.y-p.y;h.setPosition(_,{x:p.x+A*w,y:p.y+C*x}),h.scale(_,w,x)}return m},r.bounds=function(m){for(var w=r.allBodies(m),x=[],p=0;p<w.length;p+=1){var v=w[p];x.push(v.bounds.min,v.bounds.max)}return g.create(x)}})()}),(function(a,o,l){var r={};a.exports=r;var d=l(4),f=l(5),g=l(0);(function(){r._motionWakeThreshold=.18,r._motionSleepThreshold=.08,r._minBias=.9,r.update=function(h,m){for(var w=m/g._baseDelta,x=r._motionSleepThreshold,p=0;p<h.length;p++){var v=h[p],b=d.getSpeed(v),N=d.getAngularSpeed(v),_=b*b+N*N;if(v.force.x!==0||v.force.y!==0){r.set(v,!1);continue}var A=Math.min(v.motion,_),C=Math.max(v.motion,_);v.motion=r._minBias*A+(1-r._minBias)*C,v.sleepThreshold>0&&v.motion<x?(v.sleepCounter+=1,v.sleepCounter>=v.sleepThreshold/w&&r.set(v,!0)):v.sleepCounter>0&&(v.sleepCounter-=1)}},r.afterCollisions=function(h){for(var m=r._motionSleepThreshold,w=0;w<h.length;w++){var x=h[w];if(x.isActive){var p=x.collision,v=p.bodyA.parent,b=p.bodyB.parent;if(!(v.isSleeping&&b.isSleeping||v.isStatic||b.isStatic)&&(v.isSleeping||b.isSleeping)){var N=v.isSleeping&&!v.isStatic?v:b,_=N===v?b:v;!N.isStatic&&_.motion>m&&r.set(N,!1)}}}},r.set=function(h,m){var w=h.isSleeping;m?(h.isSleeping=!0,h.sleepCounter=h.sleepThreshold,h.positionImpulse.x=0,h.positionImpulse.y=0,h.positionPrev.x=h.position.x,h.positionPrev.y=h.position.y,h.anglePrev=h.angle,h.speed=0,h.angularSpeed=0,h.motion=0,w||f.trigger(h,"sleepStart")):(h.isSleeping=!1,h.sleepCounter=0,w&&f.trigger(h,"sleepEnd"))}})()}),(function(a,o,l){var r={};a.exports=r;var d=l(3),f=l(9);(function(){var g=[],h={overlap:0,axis:null},m={overlap:0,axis:null};r.create=function(w,x){return{pair:null,collided:!1,bodyA:w,bodyB:x,parentA:w.parent,parentB:x.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[null,null],supportCount:0}},r.collides=function(w,x,p){if(r._overlapAxes(h,w.vertices,x.vertices,w.axes),h.overlap<=0||(r._overlapAxes(m,x.vertices,w.vertices,x.axes),m.overlap<=0))return null;var v=p&&p.table[f.id(w,x)],b;v?b=v.collision:(b=r.create(w,x),b.collided=!0,b.bodyA=w.id<x.id?w:x,b.bodyB=w.id<x.id?x:w,b.parentA=b.bodyA.parent,b.parentB=b.bodyB.parent),w=b.bodyA,x=b.bodyB;var N;h.overlap<m.overlap?N=h:N=m;var _=b.normal,A=b.tangent,C=b.penetration,k=b.supports,R=N.overlap,j=N.axis,B=j.x,M=j.y,I=x.position.x-w.position.x,L=x.position.y-w.position.y;B*I+M*L>=0&&(B=-B,M=-M),_.x=B,_.y=M,A.x=-M,A.y=B,C.x=B*R,C.y=M*R,b.depth=R;var P=r._findSupports(w,x,_,1),U=0;if(d.contains(w.vertices,P[0])&&(k[U++]=P[0]),d.contains(w.vertices,P[1])&&(k[U++]=P[1]),U<2){var q=r._findSupports(x,w,_,-1);d.contains(x.vertices,q[0])&&(k[U++]=q[0]),U<2&&d.contains(x.vertices,q[1])&&(k[U++]=q[1])}return U===0&&(k[U++]=P[0]),b.supportCount=U,b},r._overlapAxes=function(w,x,p,v){var b=x.length,N=p.length,_=x[0].x,A=x[0].y,C=p[0].x,k=p[0].y,R=v.length,j=Number.MAX_VALUE,B=0,M,I,L,P,U,q;for(U=0;U<R;U++){var H=v[U],V=H.x,$=H.y,Z=_*V+A*$,Q=C*V+k*$,F=Z,T=Q;for(q=1;q<b;q+=1)P=x[q].x*V+x[q].y*$,P>F?F=P:P<Z&&(Z=P);for(q=1;q<N;q+=1)P=p[q].x*V+p[q].y*$,P>T?T=P:P<Q&&(Q=P);if(I=F-Q,L=T-Z,M=I<L?I:L,M<j&&(j=M,B=U,M<=0))break}w.axis=v[B],w.overlap=j},r._findSupports=function(w,x,p,v){var b=x.vertices,N=b.length,_=w.position.x,A=w.position.y,C=p.x*v,k=p.y*v,R=b[0],j=R,B=C*(_-j.x)+k*(A-j.y),M,I,L;for(L=1;L<N;L+=1)j=b[L],I=C*(_-j.x)+k*(A-j.y),I<B&&(B=I,R=j);return M=b[(N+R.index-1)%N],B=C*(_-M.x)+k*(A-M.y),j=b[(R.index+1)%N],C*(_-j.x)+k*(A-j.y)<B?(g[0]=R,g[1]=j,g):(g[0]=R,g[1]=M,g)}})()}),(function(a,o,l){var r={};a.exports=r;var d=l(16);(function(){r.create=function(f,g){var h=f.bodyA,m=f.bodyB,w={id:r.id(h,m),bodyA:h,bodyB:m,collision:f,contacts:[d.create(),d.create()],contactCount:0,separation:0,isActive:!0,isSensor:h.isSensor||m.isSensor,timeCreated:g,timeUpdated:g,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return r.update(w,f,g),w},r.update=function(f,g,h){var m=g.supports,w=g.supportCount,x=f.contacts,p=g.parentA,v=g.parentB;f.isActive=!0,f.timeUpdated=h,f.collision=g,f.separation=g.depth,f.inverseMass=p.inverseMass+v.inverseMass,f.friction=p.friction<v.friction?p.friction:v.friction,f.frictionStatic=p.frictionStatic>v.frictionStatic?p.frictionStatic:v.frictionStatic,f.restitution=p.restitution>v.restitution?p.restitution:v.restitution,f.slop=p.slop>v.slop?p.slop:v.slop,f.contactCount=w,g.pair=f;var b=m[0],N=x[0],_=m[1],A=x[1];(A.vertex===b||N.vertex===_)&&(x[1]=N,x[0]=N=A,A=x[1]),N.vertex=b,A.vertex=_},r.setActive=function(f,g,h){g?(f.isActive=!0,f.timeUpdated=h):(f.isActive=!1,f.contactCount=0)},r.id=function(f,g){return f.id<g.id?f.id.toString(36)+":"+g.id.toString(36):g.id.toString(36)+":"+f.id.toString(36)}})()}),(function(a,o,l){var r={};a.exports=r;var d=l(3),f=l(2),g=l(7),h=l(1),m=l(11),w=l(0);(function(){r._warming=.4,r._torqueDampen=1,r._minLength=1e-6,r.create=function(x){var p=x;p.bodyA&&!p.pointA&&(p.pointA={x:0,y:0}),p.bodyB&&!p.pointB&&(p.pointB={x:0,y:0});var v=p.bodyA?f.add(p.bodyA.position,p.pointA):p.pointA,b=p.bodyB?f.add(p.bodyB.position,p.pointB):p.pointB,N=f.magnitude(f.sub(v,b));p.length=typeof p.length<"u"?p.length:N,p.id=p.id||w.nextId(),p.label=p.label||"Constraint",p.type="constraint",p.stiffness=p.stiffness||(p.length>0?1:.7),p.damping=p.damping||0,p.angularStiffness=p.angularStiffness||0,p.angleA=p.bodyA?p.bodyA.angle:p.angleA,p.angleB=p.bodyB?p.bodyB.angle:p.angleB,p.plugin={};var _={visible:!0,lineWidth:2,strokeStyle:"#ffffff",type:"line",anchors:!0};return p.length===0&&p.stiffness>.1?(_.type="pin",_.anchors=!1):p.stiffness<.9&&(_.type="spring"),p.render=w.extend(_,p.render),p},r.preSolveAll=function(x){for(var p=0;p<x.length;p+=1){var v=x[p],b=v.constraintImpulse;v.isStatic||b.x===0&&b.y===0&&b.angle===0||(v.position.x+=b.x,v.position.y+=b.y,v.angle+=b.angle)}},r.solveAll=function(x,p){for(var v=w.clamp(p/w._baseDelta,0,1),b=0;b<x.length;b+=1){var N=x[b],_=!N.bodyA||N.bodyA&&N.bodyA.isStatic,A=!N.bodyB||N.bodyB&&N.bodyB.isStatic;(_||A)&&r.solve(x[b],v)}for(b=0;b<x.length;b+=1)N=x[b],_=!N.bodyA||N.bodyA&&N.bodyA.isStatic,A=!N.bodyB||N.bodyB&&N.bodyB.isStatic,!_&&!A&&r.solve(x[b],v)},r.solve=function(x,p){var v=x.bodyA,b=x.bodyB,N=x.pointA,_=x.pointB;if(!(!v&&!b)){v&&!v.isStatic&&(f.rotate(N,v.angle-x.angleA,N),x.angleA=v.angle),b&&!b.isStatic&&(f.rotate(_,b.angle-x.angleB,_),x.angleB=b.angle);var A=N,C=_;if(v&&(A=f.add(v.position,N)),b&&(C=f.add(b.position,_)),!(!A||!C)){var k=f.sub(A,C),R=f.magnitude(k);R<r._minLength&&(R=r._minLength);var j=(R-x.length)/R,B=x.stiffness>=1||x.length===0,M=B?x.stiffness*p:x.stiffness*p*p,I=x.damping*p,L=f.mult(k,j*M),P=(v?v.inverseMass:0)+(b?b.inverseMass:0),U=(v?v.inverseInertia:0)+(b?b.inverseInertia:0),q=P+U,H,V,$,Z,Q;if(I>0){var F=f.create();$=f.div(k,R),Q=f.sub(b&&f.sub(b.position,b.positionPrev)||F,v&&f.sub(v.position,v.positionPrev)||F),Z=f.dot($,Q)}v&&!v.isStatic&&(V=v.inverseMass/P,v.constraintImpulse.x-=L.x*V,v.constraintImpulse.y-=L.y*V,v.position.x-=L.x*V,v.position.y-=L.y*V,I>0&&(v.positionPrev.x-=I*$.x*Z*V,v.positionPrev.y-=I*$.y*Z*V),H=f.cross(N,L)/q*r._torqueDampen*v.inverseInertia*(1-x.angularStiffness),v.constraintImpulse.angle-=H,v.angle-=H),b&&!b.isStatic&&(V=b.inverseMass/P,b.constraintImpulse.x+=L.x*V,b.constraintImpulse.y+=L.y*V,b.position.x+=L.x*V,b.position.y+=L.y*V,I>0&&(b.positionPrev.x+=I*$.x*Z*V,b.positionPrev.y+=I*$.y*Z*V),H=f.cross(_,L)/q*r._torqueDampen*b.inverseInertia*(1-x.angularStiffness),b.constraintImpulse.angle+=H,b.angle+=H)}}},r.postSolveAll=function(x){for(var p=0;p<x.length;p++){var v=x[p],b=v.constraintImpulse;if(!(v.isStatic||b.x===0&&b.y===0&&b.angle===0)){g.set(v,!1);for(var N=0;N<v.parts.length;N++){var _=v.parts[N];d.translate(_.vertices,b),N>0&&(_.position.x+=b.x,_.position.y+=b.y),b.angle!==0&&(d.rotate(_.vertices,b.angle,v.position),m.rotate(_.axes,b.angle),N>0&&f.rotateAbout(_.position,b.angle,v.position,_.position)),h.update(_.bounds,_.vertices,v.velocity)}b.angle*=r._warming,b.x*=r._warming,b.y*=r._warming}}},r.pointAWorld=function(x){return{x:(x.bodyA?x.bodyA.position.x:0)+(x.pointA?x.pointA.x:0),y:(x.bodyA?x.bodyA.position.y:0)+(x.pointA?x.pointA.y:0)}},r.pointBWorld=function(x){return{x:(x.bodyB?x.bodyB.position.x:0)+(x.pointB?x.pointB.x:0),y:(x.bodyB?x.bodyB.position.y:0)+(x.pointB?x.pointB.y:0)}},r.currentLength=function(x){var p=(x.bodyA?x.bodyA.position.x:0)+(x.pointA?x.pointA.x:0),v=(x.bodyA?x.bodyA.position.y:0)+(x.pointA?x.pointA.y:0),b=(x.bodyB?x.bodyB.position.x:0)+(x.pointB?x.pointB.x:0),N=(x.bodyB?x.bodyB.position.y:0)+(x.pointB?x.pointB.y:0),_=p-b,A=v-N;return Math.sqrt(_*_+A*A)}})()}),(function(a,o,l){var r={};a.exports=r;var d=l(2),f=l(0);(function(){r.fromVertices=function(g){for(var h={},m=0;m<g.length;m++){var w=(m+1)%g.length,x=d.normalise({x:g[w].y-g[m].y,y:g[m].x-g[w].x}),p=x.y===0?1/0:x.x/x.y;p=p.toFixed(3).toString(),h[p]=x}return f.values(h)},r.rotate=function(g,h){if(h!==0)for(var m=Math.cos(h),w=Math.sin(h),x=0;x<g.length;x++){var p=g[x],v;v=p.x*m-p.y*w,p.y=p.x*w+p.y*m,p.x=v}}})()}),(function(a,o,l){var r={};a.exports=r;var d=l(3),f=l(0),g=l(4),h=l(1),m=l(2);(function(){r.rectangle=function(w,x,p,v,b){b=b||{};var N={label:"Rectangle Body",position:{x:w,y:x},vertices:d.fromPath("L 0 0 L "+p+" 0 L "+p+" "+v+" L 0 "+v)};if(b.chamfer){var _=b.chamfer;N.vertices=d.chamfer(N.vertices,_.radius,_.quality,_.qualityMin,_.qualityMax),delete b.chamfer}return g.create(f.extend({},N,b))},r.trapezoid=function(w,x,p,v,b,N){N=N||{},b>=1&&f.warn("Bodies.trapezoid: slope parameter must be < 1."),b*=.5;var _=(1-b*2)*p,A=p*b,C=A+_,k=C+A,R;b<.5?R="L 0 0 L "+A+" "+-v+" L "+C+" "+-v+" L "+k+" 0":R="L 0 0 L "+C+" "+-v+" L "+k+" 0";var j={label:"Trapezoid Body",position:{x:w,y:x},vertices:d.fromPath(R)};if(N.chamfer){var B=N.chamfer;j.vertices=d.chamfer(j.vertices,B.radius,B.quality,B.qualityMin,B.qualityMax),delete N.chamfer}return g.create(f.extend({},j,N))},r.circle=function(w,x,p,v,b){v=v||{};var N={label:"Circle Body",circleRadius:p};b=b||25;var _=Math.ceil(Math.max(10,Math.min(b,p)));return _%2===1&&(_+=1),r.polygon(w,x,_,p,f.extend({},N,v))},r.polygon=function(w,x,p,v,b){if(b=b||{},p<3)return r.circle(w,x,v,b);for(var N=2*Math.PI/p,_="",A=N*.5,C=0;C<p;C+=1){var k=A+C*N,R=Math.cos(k)*v,j=Math.sin(k)*v;_+="L "+R.toFixed(3)+" "+j.toFixed(3)+" "}var B={label:"Polygon Body",position:{x:w,y:x},vertices:d.fromPath(_)};if(b.chamfer){var M=b.chamfer;B.vertices=d.chamfer(B.vertices,M.radius,M.quality,M.qualityMin,M.qualityMax),delete b.chamfer}return g.create(f.extend({},B,b))},r.fromVertices=function(w,x,p,v,b,N,_,A){var C=f.getDecomp(),k,R,j,B,M,I,L,P,U,q,H;for(k=!!(C&&C.quickDecomp),v=v||{},j=[],b=typeof b<"u"?b:!1,N=typeof N<"u"?N:.01,_=typeof _<"u"?_:10,A=typeof A<"u"?A:.01,f.isArray(p[0])||(p=[p]),q=0;q<p.length;q+=1)if(I=p[q],B=d.isConvex(I),M=!B,M&&!k&&f.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),B||!k)B?I=d.clockwiseSort(I):I=d.hull(I),j.push({position:{x:w,y:x},vertices:I});else{var V=I.map(function(de){return[de.x,de.y]});C.makeCCW(V),N!==!1&&C.removeCollinearPoints(V,N),A!==!1&&C.removeDuplicatePoints&&C.removeDuplicatePoints(V,A);var $=C.quickDecomp(V);for(L=0;L<$.length;L++){var Z=$[L],Q=Z.map(function(de){return{x:de[0],y:de[1]}});_>0&&d.area(Q)<_||j.push({position:d.centre(Q),vertices:Q})}}for(L=0;L<j.length;L++)j[L]=g.create(f.extend(j[L],v));if(b){var F=5;for(L=0;L<j.length;L++){var T=j[L];for(P=L+1;P<j.length;P++){var O=j[P];if(h.overlaps(T.bounds,O.bounds)){var G=T.vertices,W=O.vertices;for(U=0;U<T.vertices.length;U++)for(H=0;H<O.vertices.length;H++){var Y=m.magnitudeSquared(m.sub(G[(U+1)%G.length],W[H])),ee=m.magnitudeSquared(m.sub(G[U],W[(H+1)%W.length]));Y<F&&ee<F&&(G[U].isInternal=!0,W[H].isInternal=!0)}}}}}return j.length>1?(R=g.create(f.extend({parts:j.slice(0)},v)),g.setPosition(R,{x:w,y:x}),R):j[0]}})()}),(function(a,o,l){var r={};a.exports=r;var d=l(0),f=l(8);(function(){r.create=function(g){var h={bodies:[],collisions:[],pairs:null};return d.extend(h,g)},r.setBodies=function(g,h){g.bodies=h.slice(0)},r.clear=function(g){g.bodies=[],g.collisions=[]},r.collisions=function(g){var h=g.pairs,m=g.bodies,w=m.length,x=r.canCollide,p=f.collides,v=g.collisions,b=0,N,_;for(m.sort(r._compareBoundsX),N=0;N<w;N++){var A=m[N],C=A.bounds,k=A.bounds.max.x,R=A.bounds.max.y,j=A.bounds.min.y,B=A.isStatic||A.isSleeping,M=A.parts.length,I=M===1;for(_=N+1;_<w;_++){var L=m[_],P=L.bounds;if(P.min.x>k)break;if(!(R<P.min.y||j>P.max.y)&&!(B&&(L.isStatic||L.isSleeping))&&x(A.collisionFilter,L.collisionFilter)){var U=L.parts.length;if(I&&U===1){var q=p(A,L,h);q&&(v[b++]=q)}else for(var H=M>1?1:0,V=U>1?1:0,$=H;$<M;$++)for(var Z=A.parts[$],C=Z.bounds,Q=V;Q<U;Q++){var F=L.parts[Q],P=F.bounds;if(!(C.min.x>P.max.x||C.max.x<P.min.x||C.max.y<P.min.y||C.min.y>P.max.y)){var q=p(Z,F,h);q&&(v[b++]=q)}}}}}return v.length!==b&&(v.length=b),v},r.canCollide=function(g,h){return g.group===h.group&&g.group!==0?g.group>0:(g.mask&h.category)!==0&&(h.mask&g.category)!==0},r._compareBoundsX=function(g,h){return g.bounds.min.x-h.bounds.min.x}})()}),(function(a,o,l){var r={};a.exports=r;var d=l(0);(function(){r.create=function(f){var g={};return f||d.log("Mouse.create: element was undefined, defaulting to document.body","warn"),g.element=f||document.body,g.absolute={x:0,y:0},g.position={x:0,y:0},g.mousedownPosition={x:0,y:0},g.mouseupPosition={x:0,y:0},g.offset={x:0,y:0},g.scale={x:1,y:1},g.wheelDelta=0,g.button=-1,g.pixelRatio=parseInt(g.element.getAttribute("data-pixel-ratio"),10)||1,g.sourceEvents={mousemove:null,mousedown:null,mouseup:null,mousewheel:null},g.mousemove=function(h){var m=r._getRelativeMousePosition(h,g.element,g.pixelRatio),w=h.changedTouches;w&&(g.button=0,h.preventDefault()),g.absolute.x=m.x,g.absolute.y=m.y,g.position.x=g.absolute.x*g.scale.x+g.offset.x,g.position.y=g.absolute.y*g.scale.y+g.offset.y,g.sourceEvents.mousemove=h},g.mousedown=function(h){var m=r._getRelativeMousePosition(h,g.element,g.pixelRatio),w=h.changedTouches;w?(g.button=0,h.preventDefault()):g.button=h.button,g.absolute.x=m.x,g.absolute.y=m.y,g.position.x=g.absolute.x*g.scale.x+g.offset.x,g.position.y=g.absolute.y*g.scale.y+g.offset.y,g.mousedownPosition.x=g.position.x,g.mousedownPosition.y=g.position.y,g.sourceEvents.mousedown=h},g.mouseup=function(h){var m=r._getRelativeMousePosition(h,g.element,g.pixelRatio),w=h.changedTouches;w&&h.preventDefault(),g.button=-1,g.absolute.x=m.x,g.absolute.y=m.y,g.position.x=g.absolute.x*g.scale.x+g.offset.x,g.position.y=g.absolute.y*g.scale.y+g.offset.y,g.mouseupPosition.x=g.position.x,g.mouseupPosition.y=g.position.y,g.sourceEvents.mouseup=h},g.mousewheel=function(h){g.wheelDelta=Math.max(-1,Math.min(1,h.wheelDelta||-h.detail)),h.preventDefault(),g.sourceEvents.mousewheel=h},r.setElement(g,g.element),g},r.setElement=function(f,g){f.element=g,g.addEventListener("mousemove",f.mousemove,{passive:!0}),g.addEventListener("mousedown",f.mousedown,{passive:!0}),g.addEventListener("mouseup",f.mouseup,{passive:!0}),g.addEventListener("wheel",f.mousewheel,{passive:!1}),g.addEventListener("touchmove",f.mousemove,{passive:!1}),g.addEventListener("touchstart",f.mousedown,{passive:!1}),g.addEventListener("touchend",f.mouseup,{passive:!1})},r.clearSourceEvents=function(f){f.sourceEvents.mousemove=null,f.sourceEvents.mousedown=null,f.sourceEvents.mouseup=null,f.sourceEvents.mousewheel=null,f.wheelDelta=0},r.setOffset=function(f,g){f.offset.x=g.x,f.offset.y=g.y,f.position.x=f.absolute.x*f.scale.x+f.offset.x,f.position.y=f.absolute.y*f.scale.y+f.offset.y},r.setScale=function(f,g){f.scale.x=g.x,f.scale.y=g.y,f.position.x=f.absolute.x*f.scale.x+f.offset.x,f.position.y=f.absolute.y*f.scale.y+f.offset.y},r._getRelativeMousePosition=function(f,g,h){var m=g.getBoundingClientRect(),w=document.documentElement||document.body.parentNode||document.body,x=window.pageXOffset!==void 0?window.pageXOffset:w.scrollLeft,p=window.pageYOffset!==void 0?window.pageYOffset:w.scrollTop,v=f.changedTouches,b,N;return v?(b=v[0].pageX-m.left-x,N=v[0].pageY-m.top-p):(b=f.pageX-m.left-x,N=f.pageY-m.top-p),{x:b/(g.clientWidth/(g.width||g.clientWidth)*h),y:N/(g.clientHeight/(g.height||g.clientHeight)*h)}}})()}),(function(a,o,l){var r={};a.exports=r;var d=l(0);(function(){r._registry={},r.register=function(f){if(r.isPlugin(f)||d.warn("Plugin.register:",r.toString(f),"does not implement all required fields."),f.name in r._registry){var g=r._registry[f.name],h=r.versionParse(f.version).number,m=r.versionParse(g.version).number;h>m?(d.warn("Plugin.register:",r.toString(g),"was upgraded to",r.toString(f)),r._registry[f.name]=f):h<m?d.warn("Plugin.register:",r.toString(g),"can not be downgraded to",r.toString(f)):f!==g&&d.warn("Plugin.register:",r.toString(f),"is already registered to different plugin object")}else r._registry[f.name]=f;return f},r.resolve=function(f){return r._registry[r.dependencyParse(f).name]},r.toString=function(f){return typeof f=="string"?f:(f.name||"anonymous")+"@"+(f.version||f.range||"0.0.0")},r.isPlugin=function(f){return f&&f.name&&f.version&&f.install},r.isUsed=function(f,g){return f.used.indexOf(g)>-1},r.isFor=function(f,g){var h=f.for&&r.dependencyParse(f.for);return!f.for||g.name===h.name&&r.versionSatisfies(g.version,h.range)},r.use=function(f,g){if(f.uses=(f.uses||[]).concat(g||[]),f.uses.length===0){d.warn("Plugin.use:",r.toString(f),"does not specify any dependencies to install.");return}for(var h=r.dependencies(f),m=d.topologicalSort(h),w=[],x=0;x<m.length;x+=1)if(m[x]!==f.name){var p=r.resolve(m[x]);if(!p){w.push(" "+m[x]);continue}r.isUsed(f,p.name)||(r.isFor(p,f)||(d.warn("Plugin.use:",r.toString(p),"is for",p.for,"but installed on",r.toString(f)+"."),p._warned=!0),p.install?p.install(f):(d.warn("Plugin.use:",r.toString(p),"does not specify an install function."),p._warned=!0),p._warned?(w.push(" "+r.toString(p)),delete p._warned):w.push(" "+r.toString(p)),f.used.push(p.name))}w.length>0&&d.info(w.join("  "))},r.dependencies=function(f,g){var h=r.dependencyParse(f),m=h.name;if(g=g||{},!(m in g)){f=r.resolve(f)||f,g[m]=d.map(f.uses||[],function(x){r.isPlugin(x)&&r.register(x);var p=r.dependencyParse(x),v=r.resolve(x);return v&&!r.versionSatisfies(v.version,p.range)?(d.warn("Plugin.dependencies:",r.toString(v),"does not satisfy",r.toString(p),"used by",r.toString(h)+"."),v._warned=!0,f._warned=!0):v||(d.warn("Plugin.dependencies:",r.toString(x),"used by",r.toString(h),"could not be resolved."),f._warned=!0),p.name});for(var w=0;w<g[m].length;w+=1)r.dependencies(g[m][w],g);return g}},r.dependencyParse=function(f){if(d.isString(f)){var g=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/;return g.test(f)||d.warn("Plugin.dependencyParse:",f,"is not a valid dependency string."),{name:f.split("@")[0],range:f.split("@")[1]||"*"}}return{name:f.name,range:f.range||f.version}},r.versionParse=function(f){var g=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;g.test(f)||d.warn("Plugin.versionParse:",f,"is not a valid version or range.");var h=g.exec(f),m=Number(h[4]),w=Number(h[5]),x=Number(h[6]);return{isRange:!!(h[1]||h[2]),version:h[3],range:f,operator:h[1]||h[2]||"",major:m,minor:w,patch:x,parts:[m,w,x],prerelease:h[7],number:m*1e8+w*1e4+x}},r.versionSatisfies=function(f,g){g=g||"*";var h=r.versionParse(g),m=r.versionParse(f);if(h.isRange){if(h.operator==="*"||f==="*")return!0;if(h.operator===">")return m.number>h.number;if(h.operator===">=")return m.number>=h.number;if(h.operator==="~")return m.major===h.major&&m.minor===h.minor&&m.patch>=h.patch;if(h.operator==="^")return h.major>0?m.major===h.major&&m.number>=h.number:h.minor>0?m.minor===h.minor&&m.patch>=h.patch:m.patch===h.patch}return f===g||f==="*"}})()}),(function(a,o){var l={};a.exports=l,(function(){l.create=function(r){return{vertex:r,normalImpulse:0,tangentImpulse:0}}})()}),(function(a,o,l){var r={};a.exports=r;var d=l(7),f=l(18),g=l(13),h=l(19),m=l(5),w=l(6),x=l(10),p=l(0),v=l(4);(function(){r._deltaMax=1e3/60,r.create=function(b){b=b||{};var N={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0,lastUpdatesPerFrame:0}},_=p.extend(N,b);return _.world=b.world||w.create({label:"World"}),_.pairs=b.pairs||h.create(),_.detector=b.detector||g.create(),_.detector.pairs=_.pairs,_.grid={buckets:[]},_.world.gravity=_.gravity,_.broadphase=_.grid,_.metrics={},_},r.update=function(b,N){var _=p.now(),A=b.world,C=b.detector,k=b.pairs,R=b.timing,j=R.timestamp,B;N>r._deltaMax&&p.warnOnce("Matter.Engine.update: delta argument is recommended to be less than or equal to",r._deltaMax.toFixed(3),"ms."),N=typeof N<"u"?N:p._baseDelta,N*=R.timeScale,R.timestamp+=N,R.lastDelta=N;var M={timestamp:R.timestamp,delta:N};m.trigger(b,"beforeUpdate",M);var I=w.allBodies(A),L=w.allConstraints(A);for(A.isModified&&(g.setBodies(C,I),w.setModified(A,!1,!1,!0)),b.enableSleeping&&d.update(I,N),r._bodiesApplyGravity(I,b.gravity),N>0&&r._bodiesUpdate(I,N),m.trigger(b,"beforeSolve",M),x.preSolveAll(I),B=0;B<b.constraintIterations;B++)x.solveAll(L,N);x.postSolveAll(I);var P=g.collisions(C);h.update(k,P,j),b.enableSleeping&&d.afterCollisions(k.list),k.collisionStart.length>0&&m.trigger(b,"collisionStart",{pairs:k.collisionStart,timestamp:R.timestamp,delta:N});var U=p.clamp(20/b.positionIterations,0,1);for(f.preSolvePosition(k.list),B=0;B<b.positionIterations;B++)f.solvePosition(k.list,N,U);for(f.postSolvePosition(I),x.preSolveAll(I),B=0;B<b.constraintIterations;B++)x.solveAll(L,N);for(x.postSolveAll(I),f.preSolveVelocity(k.list),B=0;B<b.velocityIterations;B++)f.solveVelocity(k.list,N);return r._bodiesUpdateVelocities(I),k.collisionActive.length>0&&m.trigger(b,"collisionActive",{pairs:k.collisionActive,timestamp:R.timestamp,delta:N}),k.collisionEnd.length>0&&m.trigger(b,"collisionEnd",{pairs:k.collisionEnd,timestamp:R.timestamp,delta:N}),r._bodiesClearForces(I),m.trigger(b,"afterUpdate",M),b.timing.lastElapsed=p.now()-_,b},r.merge=function(b,N){if(p.extend(b,N),N.world){b.world=N.world,r.clear(b);for(var _=w.allBodies(b.world),A=0;A<_.length;A++){var C=_[A];d.set(C,!1),C.id=p.nextId()}}},r.clear=function(b){h.clear(b.pairs),g.clear(b.detector)},r._bodiesClearForces=function(b){for(var N=b.length,_=0;_<N;_++){var A=b[_];A.force.x=0,A.force.y=0,A.torque=0}},r._bodiesApplyGravity=function(b,N){var _=typeof N.scale<"u"?N.scale:.001,A=b.length;if(!(N.x===0&&N.y===0||_===0))for(var C=0;C<A;C++){var k=b[C];k.isStatic||k.isSleeping||(k.force.y+=k.mass*N.y*_,k.force.x+=k.mass*N.x*_)}},r._bodiesUpdate=function(b,N){for(var _=b.length,A=0;A<_;A++){var C=b[A];C.isStatic||C.isSleeping||v.update(C,N)}},r._bodiesUpdateVelocities=function(b){for(var N=b.length,_=0;_<N;_++)v.updateVelocities(b[_])}})()}),(function(a,o,l){var r={};a.exports=r;var d=l(3),f=l(0),g=l(1);(function(){r._restingThresh=2,r._restingThreshTangent=Math.sqrt(6),r._positionDampen=.9,r._positionWarming=.8,r._frictionNormalMultiplier=5,r._frictionMaxStatic=Number.MAX_VALUE,r.preSolvePosition=function(h){var m,w,x,p=h.length;for(m=0;m<p;m++)w=h[m],w.isActive&&(x=w.contactCount,w.collision.parentA.totalContacts+=x,w.collision.parentB.totalContacts+=x)},r.solvePosition=function(h,m,w){var x,p,v,b,N,_,A,C,k=r._positionDampen*(w||1),R=f.clamp(m/f._baseDelta,0,1),j=h.length;for(x=0;x<j;x++)p=h[x],!(!p.isActive||p.isSensor)&&(v=p.collision,b=v.parentA,N=v.parentB,_=v.normal,p.separation=v.depth+_.x*(N.positionImpulse.x-b.positionImpulse.x)+_.y*(N.positionImpulse.y-b.positionImpulse.y));for(x=0;x<j;x++)p=h[x],!(!p.isActive||p.isSensor)&&(v=p.collision,b=v.parentA,N=v.parentB,_=v.normal,C=p.separation-p.slop*R,(b.isStatic||N.isStatic)&&(C*=2),b.isStatic||b.isSleeping||(A=k/b.totalContacts,b.positionImpulse.x+=_.x*C*A,b.positionImpulse.y+=_.y*C*A),N.isStatic||N.isSleeping||(A=k/N.totalContacts,N.positionImpulse.x-=_.x*C*A,N.positionImpulse.y-=_.y*C*A))},r.postSolvePosition=function(h){for(var m=r._positionWarming,w=h.length,x=d.translate,p=g.update,v=0;v<w;v++){var b=h[v],N=b.positionImpulse,_=N.x,A=N.y,C=b.velocity;if(b.totalContacts=0,_!==0||A!==0){for(var k=0;k<b.parts.length;k++){var R=b.parts[k];x(R.vertices,N),p(R.bounds,R.vertices,C),R.position.x+=_,R.position.y+=A}b.positionPrev.x+=_,b.positionPrev.y+=A,_*C.x+A*C.y<0?(N.x=0,N.y=0):(N.x*=m,N.y*=m)}}},r.preSolveVelocity=function(h){var m=h.length,w,x;for(w=0;w<m;w++){var p=h[w];if(!(!p.isActive||p.isSensor)){var v=p.contacts,b=p.contactCount,N=p.collision,_=N.parentA,A=N.parentB,C=N.normal,k=N.tangent;for(x=0;x<b;x++){var R=v[x],j=R.vertex,B=R.normalImpulse,M=R.tangentImpulse;if(B!==0||M!==0){var I=C.x*B+k.x*M,L=C.y*B+k.y*M;_.isStatic||_.isSleeping||(_.positionPrev.x+=I*_.inverseMass,_.positionPrev.y+=L*_.inverseMass,_.anglePrev+=_.inverseInertia*((j.x-_.position.x)*L-(j.y-_.position.y)*I)),A.isStatic||A.isSleeping||(A.positionPrev.x-=I*A.inverseMass,A.positionPrev.y-=L*A.inverseMass,A.anglePrev-=A.inverseInertia*((j.x-A.position.x)*L-(j.y-A.position.y)*I))}}}}},r.solveVelocity=function(h,m){var w=m/f._baseDelta,x=w*w,p=x*w,v=-r._restingThresh*w,b=r._restingThreshTangent,N=r._frictionNormalMultiplier*w,_=r._frictionMaxStatic,A=h.length,C,k,R,j;for(R=0;R<A;R++){var B=h[R];if(!(!B.isActive||B.isSensor)){var M=B.collision,I=M.parentA,L=M.parentB,P=M.normal.x,U=M.normal.y,q=M.tangent.x,H=M.tangent.y,V=B.inverseMass,$=B.friction*B.frictionStatic*N,Z=B.contacts,Q=B.contactCount,F=1/Q,T=I.position.x-I.positionPrev.x,O=I.position.y-I.positionPrev.y,G=I.angle-I.anglePrev,W=L.position.x-L.positionPrev.x,Y=L.position.y-L.positionPrev.y,ee=L.angle-L.anglePrev;for(j=0;j<Q;j++){var de=Z[j],re=de.vertex,ie=re.x-I.position.x,be=re.y-I.position.y,fe=re.x-L.position.x,J=re.y-L.position.y,le=T-be*G,je=O+ie*G,Ne=W-J*ee,Ce=Y+fe*ee,Ue=le-Ne,$e=je-Ce,Oe=P*Ue+U*$e,Be=q*Ue+H*$e,ke=B.separation+Oe,lt=Math.min(ke,1);lt=ke<0?0:lt;var it=lt*$;Be<-it||Be>it?(k=Be>0?Be:-Be,C=B.friction*(Be>0?1:-1)*p,C<-k?C=-k:C>k&&(C=k)):(C=Be,k=_);var tt=ie*U-be*P,Ye=fe*U-J*P,yn=F/(V+I.inverseInertia*tt*tt+L.inverseInertia*Ye*Ye),xt=(1+B.restitution)*Oe*yn;if(C*=yn,Oe<v)de.normalImpulse=0;else{var vn=de.normalImpulse;de.normalImpulse+=xt,de.normalImpulse>0&&(de.normalImpulse=0),xt=de.normalImpulse-vn}if(Be<-b||Be>b)de.tangentImpulse=0;else{var rn=de.tangentImpulse;de.tangentImpulse+=C,de.tangentImpulse<-k&&(de.tangentImpulse=-k),de.tangentImpulse>k&&(de.tangentImpulse=k),C=de.tangentImpulse-rn}var Wn=P*xt+q*C,ca=U*xt+H*C;I.isStatic||I.isSleeping||(I.positionPrev.x+=Wn*I.inverseMass,I.positionPrev.y+=ca*I.inverseMass,I.anglePrev+=(ie*ca-be*Wn)*I.inverseInertia),L.isStatic||L.isSleeping||(L.positionPrev.x-=Wn*L.inverseMass,L.positionPrev.y-=ca*L.inverseMass,L.anglePrev-=(fe*ca-J*Wn)*L.inverseInertia)}}}}})()}),(function(a,o,l){var r={};a.exports=r;var d=l(9),f=l(0);(function(){r.create=function(g){return f.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},g)},r.update=function(g,h,m){var w=d.update,x=d.create,p=d.setActive,v=g.table,b=g.list,N=b.length,_=N,A=g.collisionStart,C=g.collisionEnd,k=g.collisionActive,R=h.length,j=0,B=0,M=0,I,L,P;for(P=0;P<R;P++)I=h[P],L=I.pair,L?(L.isActive&&(k[M++]=L),w(L,I,m)):(L=x(I,m),v[L.id]=L,A[j++]=L,b[_++]=L);for(_=0,N=b.length,P=0;P<N;P++)L=b[P],L.timeUpdated>=m?b[_++]=L:(p(L,!1,m),L.collision.bodyA.sleepCounter>0&&L.collision.bodyB.sleepCounter>0?b[_++]=L:(C[B++]=L,delete v[L.id]));b.length!==_&&(b.length=_),A.length!==j&&(A.length=j),C.length!==B&&(C.length=B),k.length!==M&&(k.length=M)},r.clear=function(g){return g.table={},g.list.length=0,g.collisionStart.length=0,g.collisionActive.length=0,g.collisionEnd.length=0,g}})()}),(function(a,o,l){var r=a.exports=l(21);r.Axes=l(11),r.Bodies=l(12),r.Body=l(4),r.Bounds=l(1),r.Collision=l(8),r.Common=l(0),r.Composite=l(6),r.Composites=l(22),r.Constraint=l(10),r.Contact=l(16),r.Detector=l(13),r.Engine=l(17),r.Events=l(5),r.Grid=l(23),r.Mouse=l(14),r.MouseConstraint=l(24),r.Pair=l(9),r.Pairs=l(19),r.Plugin=l(15),r.Query=l(25),r.Render=l(26),r.Resolver=l(18),r.Runner=l(27),r.SAT=l(28),r.Sleeping=l(7),r.Svg=l(29),r.Vector=l(2),r.Vertices=l(3),r.World=l(30),r.Engine.run=r.Runner.run,r.Common.deprecated(r.Engine,"run","Engine.run  use Matter.Runner.run(engine) instead")}),(function(a,o,l){var r={};a.exports=r;var d=l(15),f=l(0);(function(){r.name="matter-js",r.version="0.20.0",r.uses=[],r.used=[],r.use=function(){d.use(r,Array.prototype.slice.call(arguments))},r.before=function(g,h){return g=g.replace(/^Matter./,""),f.chainPathBefore(r,g,h)},r.after=function(g,h){return g=g.replace(/^Matter./,""),f.chainPathAfter(r,g,h)}})()}),(function(a,o,l){var r={};a.exports=r;var d=l(6),f=l(10),g=l(0),h=l(4),m=l(12),w=g.deprecated;(function(){r.stack=function(x,p,v,b,N,_,A){for(var C=d.create({label:"Stack"}),k=x,R=p,j,B=0,M=0;M<b;M++){for(var I=0,L=0;L<v;L++){var P=A(k,R,L,M,j,B);if(P){var U=P.bounds.max.y-P.bounds.min.y,q=P.bounds.max.x-P.bounds.min.x;U>I&&(I=U),h.translate(P,{x:q*.5,y:U*.5}),k=P.bounds.max.x+N,d.addBody(C,P),j=P,B+=1}else k+=N}R+=I+_,k=x}return C},r.chain=function(x,p,v,b,N,_){for(var A=x.bodies,C=1;C<A.length;C++){var k=A[C-1],R=A[C],j=k.bounds.max.y-k.bounds.min.y,B=k.bounds.max.x-k.bounds.min.x,M=R.bounds.max.y-R.bounds.min.y,I=R.bounds.max.x-R.bounds.min.x,L={bodyA:k,pointA:{x:B*p,y:j*v},bodyB:R,pointB:{x:I*b,y:M*N}},P=g.extend(L,_);d.addConstraint(x,f.create(P))}return x.label+=" Chain",x},r.mesh=function(x,p,v,b,N){var _=x.bodies,A,C,k,R,j;for(A=0;A<v;A++){for(C=1;C<p;C++)k=_[C-1+A*p],R=_[C+A*p],d.addConstraint(x,f.create(g.extend({bodyA:k,bodyB:R},N)));if(A>0)for(C=0;C<p;C++)k=_[C+(A-1)*p],R=_[C+A*p],d.addConstraint(x,f.create(g.extend({bodyA:k,bodyB:R},N))),b&&C>0&&(j=_[C-1+(A-1)*p],d.addConstraint(x,f.create(g.extend({bodyA:j,bodyB:R},N)))),b&&C<p-1&&(j=_[C+1+(A-1)*p],d.addConstraint(x,f.create(g.extend({bodyA:j,bodyB:R},N))))}return x.label+=" Mesh",x},r.pyramid=function(x,p,v,b,N,_,A){return r.stack(x,p,v,b,N,_,function(C,k,R,j,B,M){var I=Math.min(b,Math.ceil(v/2)),L=B?B.bounds.max.x-B.bounds.min.x:0;if(!(j>I)){j=I-j;var P=j,U=v-1-j;if(!(R<P||R>U)){M===1&&h.translate(B,{x:(R+(v%2===1?1:-1))*L,y:0});var q=B?R*L:0;return A(x+q+R*N,k,R,j,B,M)}}})},r.newtonsCradle=function(x,p,v,b,N){for(var _=d.create({label:"Newtons Cradle"}),A=0;A<v;A++){var C=1.9,k=m.circle(x+A*(b*C),p+N,b,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),R=f.create({pointA:{x:x+A*(b*C),y:p},bodyB:k});d.addBody(_,k),d.addConstraint(_,R)}return _},w(r,"newtonsCradle","Composites.newtonsCradle  moved to newtonsCradle example"),r.car=function(x,p,v,b,N){var _=h.nextGroup(!0),A=20,C=-v*.5+A,k=v*.5-A,R=0,j=d.create({label:"Car"}),B=m.rectangle(x,p,v,b,{collisionFilter:{group:_},chamfer:{radius:b*.5},density:2e-4}),M=m.circle(x+C,p+R,N,{collisionFilter:{group:_},friction:.8}),I=m.circle(x+k,p+R,N,{collisionFilter:{group:_},friction:.8}),L=f.create({bodyB:B,pointB:{x:C,y:R},bodyA:M,stiffness:1,length:0}),P=f.create({bodyB:B,pointB:{x:k,y:R},bodyA:I,stiffness:1,length:0});return d.addBody(j,B),d.addBody(j,M),d.addBody(j,I),d.addConstraint(j,L),d.addConstraint(j,P),j},w(r,"car","Composites.car  moved to car example"),r.softBody=function(x,p,v,b,N,_,A,C,k,R){k=g.extend({inertia:1/0},k),R=g.extend({stiffness:.2,render:{type:"line",anchors:!1}},R);var j=r.stack(x,p,v,b,N,_,function(B,M){return m.circle(B,M,C,k)});return r.mesh(j,v,b,A,R),j.label="Soft Body",j},w(r,"softBody","Composites.softBody  moved to softBody and cloth examples")})()}),(function(a,o,l){var r={};a.exports=r;var d=l(9),f=l(0),g=f.deprecated;(function(){r.create=function(h){var m={buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return f.extend(m,h)},r.update=function(h,m,w,x){var p,v,b,N=w.world,_=h.buckets,A,C,k=!1;for(p=0;p<m.length;p++){var R=m[p];if(!(R.isSleeping&&!x)&&!(N.bounds&&(R.bounds.max.x<N.bounds.min.x||R.bounds.min.x>N.bounds.max.x||R.bounds.max.y<N.bounds.min.y||R.bounds.min.y>N.bounds.max.y))){var j=r._getRegion(h,R);if(!R.region||j.id!==R.region.id||x){(!R.region||x)&&(R.region=j);var B=r._regionUnion(j,R.region);for(v=B.startCol;v<=B.endCol;v++)for(b=B.startRow;b<=B.endRow;b++){C=r._getBucketId(v,b),A=_[C];var M=v>=j.startCol&&v<=j.endCol&&b>=j.startRow&&b<=j.endRow,I=v>=R.region.startCol&&v<=R.region.endCol&&b>=R.region.startRow&&b<=R.region.endRow;!M&&I&&I&&A&&r._bucketRemoveBody(h,A,R),(R.region===j||M&&!I||x)&&(A||(A=r._createBucket(_,C)),r._bucketAddBody(h,A,R))}R.region=j,k=!0}}}k&&(h.pairsList=r._createActivePairsList(h))},g(r,"update","Grid.update  replaced by Matter.Detector"),r.clear=function(h){h.buckets={},h.pairs={},h.pairsList=[]},g(r,"clear","Grid.clear  replaced by Matter.Detector"),r._regionUnion=function(h,m){var w=Math.min(h.startCol,m.startCol),x=Math.max(h.endCol,m.endCol),p=Math.min(h.startRow,m.startRow),v=Math.max(h.endRow,m.endRow);return r._createRegion(w,x,p,v)},r._getRegion=function(h,m){var w=m.bounds,x=Math.floor(w.min.x/h.bucketWidth),p=Math.floor(w.max.x/h.bucketWidth),v=Math.floor(w.min.y/h.bucketHeight),b=Math.floor(w.max.y/h.bucketHeight);return r._createRegion(x,p,v,b)},r._createRegion=function(h,m,w,x){return{id:h+","+m+","+w+","+x,startCol:h,endCol:m,startRow:w,endRow:x}},r._getBucketId=function(h,m){return"C"+h+"R"+m},r._createBucket=function(h,m){var w=h[m]=[];return w},r._bucketAddBody=function(h,m,w){var x=h.pairs,p=d.id,v=m.length,b;for(b=0;b<v;b++){var N=m[b];if(!(w.id===N.id||w.isStatic&&N.isStatic)){var _=p(w,N),A=x[_];A?A[2]+=1:x[_]=[w,N,1]}}m.push(w)},r._bucketRemoveBody=function(h,m,w){var x=h.pairs,p=d.id,v;m.splice(f.indexOf(m,w),1);var b=m.length;for(v=0;v<b;v++){var N=x[p(w,m[v])];N&&(N[2]-=1)}},r._createActivePairsList=function(h){var m,w=h.pairs,x=f.keys(w),p=x.length,v=[],b;for(b=0;b<p;b++)m=w[x[b]],m[2]>0?v.push(m):delete w[x[b]];return v}})()}),(function(a,o,l){var r={};a.exports=r;var d=l(3),f=l(7),g=l(14),h=l(5),m=l(13),w=l(10),x=l(6),p=l(0),v=l(1);(function(){r.create=function(b,N){var _=(b?b.mouse:null)||(N?N.mouse:null);_||(b&&b.render&&b.render.canvas?_=g.create(b.render.canvas):N&&N.element?_=g.create(N.element):(_=g.create(),p.warn("MouseConstraint.create: options.mouse was undefined, options.element was undefined, may not function as expected")));var A=w.create({label:"Mouse Constraint",pointA:_.position,pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,render:{strokeStyle:"#90EE90",lineWidth:3}}),C={type:"mouseConstraint",mouse:_,element:null,body:null,constraint:A,collisionFilter:{category:1,mask:4294967295,group:0}},k=p.extend(C,N);return h.on(b,"beforeUpdate",function(){var R=x.allBodies(b.world);r.update(k,R),r._triggerEvents(k)}),k},r.update=function(b,N){var _=b.mouse,A=b.constraint,C=b.body;if(_.button===0){if(A.bodyB)f.set(A.bodyB,!1),A.pointA=_.position;else for(var k=0;k<N.length;k++)if(C=N[k],v.contains(C.bounds,_.position)&&m.canCollide(C.collisionFilter,b.collisionFilter))for(var R=C.parts.length>1?1:0;R<C.parts.length;R++){var j=C.parts[R];if(d.contains(j.vertices,_.position)){A.pointA=_.position,A.bodyB=b.body=C,A.pointB={x:_.position.x-C.position.x,y:_.position.y-C.position.y},A.angleB=C.angle,f.set(C,!1),h.trigger(b,"startdrag",{mouse:_,body:C});break}}}else A.bodyB=b.body=null,A.pointB=null,C&&h.trigger(b,"enddrag",{mouse:_,body:C})},r._triggerEvents=function(b){var N=b.mouse,_=N.sourceEvents;_.mousemove&&h.trigger(b,"mousemove",{mouse:N}),_.mousedown&&h.trigger(b,"mousedown",{mouse:N}),_.mouseup&&h.trigger(b,"mouseup",{mouse:N}),g.clearSourceEvents(N)}})()}),(function(a,o,l){var r={};a.exports=r;var d=l(2),f=l(8),g=l(1),h=l(12),m=l(3);(function(){r.collides=function(w,x){for(var p=[],v=x.length,b=w.bounds,N=f.collides,_=g.overlaps,A=0;A<v;A++){var C=x[A],k=C.parts.length,R=k===1?0:1;if(_(C.bounds,b))for(var j=R;j<k;j++){var B=C.parts[j];if(_(B.bounds,b)){var M=N(B,w);if(M){p.push(M);break}}}}return p},r.ray=function(w,x,p,v){v=v||1e-100;for(var b=d.angle(x,p),N=d.magnitude(d.sub(x,p)),_=(p.x+x.x)*.5,A=(p.y+x.y)*.5,C=h.rectangle(_,A,N,v,{angle:b}),k=r.collides(C,w),R=0;R<k.length;R+=1){var j=k[R];j.body=j.bodyB=j.bodyA}return k},r.region=function(w,x,p){for(var v=[],b=0;b<w.length;b++){var N=w[b],_=g.overlaps(N.bounds,x);(_&&!p||!_&&p)&&v.push(N)}return v},r.point=function(w,x){for(var p=[],v=0;v<w.length;v++){var b=w[v];if(g.contains(b.bounds,x))for(var N=b.parts.length===1?0:1;N<b.parts.length;N++){var _=b.parts[N];if(g.contains(_.bounds,x)&&m.contains(_.vertices,x)){p.push(b);break}}}return p}})()}),(function(a,o,l){var r={};a.exports=r;var d=l(4),f=l(0),g=l(6),h=l(1),m=l(5),w=l(2),x=l(14);(function(){var p,v;typeof window<"u"&&(p=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(R){window.setTimeout(function(){R(f.now())},1e3/60)},v=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),r._goodFps=30,r._goodDelta=1e3/60,r.create=function(R){var j={engine:null,element:null,canvas:null,mouse:null,frameRequestId:null,timing:{historySize:60,delta:0,deltaHistory:[],lastTime:0,lastTimestamp:0,lastElapsed:0,timestampElapsed:0,timestampElapsedHistory:[],engineDeltaHistory:[],engineElapsedHistory:[],engineUpdatesHistory:[],elapsedHistory:[]},options:{width:800,height:600,pixelRatio:1,background:"#14151f",wireframeBackground:"#14151f",wireframeStrokeStyle:"#bbb",hasBounds:!!R.bounds,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showStats:!1,showPerformance:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showSeparations:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showVertexNumbers:!1,showConvexHulls:!1,showInternalEdges:!1,showMousePosition:!1}},B=f.extend(j,R);return B.canvas&&(B.canvas.width=B.options.width||B.canvas.width,B.canvas.height=B.options.height||B.canvas.height),B.mouse=R.mouse,B.engine=R.engine,B.canvas=B.canvas||_(B.options.width,B.options.height),B.context=B.canvas.getContext("2d"),B.textures={},B.bounds=B.bounds||{min:{x:0,y:0},max:{x:B.canvas.width,y:B.canvas.height}},B.controller=r,B.options.showBroadphase=!1,B.options.pixelRatio!==1&&r.setPixelRatio(B,B.options.pixelRatio),f.isElement(B.element)&&B.element.appendChild(B.canvas),B},r.run=function(R){(function j(B){R.frameRequestId=p(j),b(R,B),r.world(R,B),R.context.setTransform(R.options.pixelRatio,0,0,R.options.pixelRatio,0,0),(R.options.showStats||R.options.showDebug)&&r.stats(R,R.context,B),(R.options.showPerformance||R.options.showDebug)&&r.performance(R,R.context,B),R.context.setTransform(1,0,0,1,0,0)})()},r.stop=function(R){v(R.frameRequestId)},r.setPixelRatio=function(R,j){var B=R.options,M=R.canvas;j==="auto"&&(j=A(M)),B.pixelRatio=j,M.setAttribute("data-pixel-ratio",j),M.width=B.width*j,M.height=B.height*j,M.style.width=B.width+"px",M.style.height=B.height+"px"},r.setSize=function(R,j,B){R.options.width=j,R.options.height=B,R.bounds.max.x=R.bounds.min.x+j,R.bounds.max.y=R.bounds.min.y+B,R.options.pixelRatio!==1?r.setPixelRatio(R,R.options.pixelRatio):(R.canvas.width=j,R.canvas.height=B)},r.lookAt=function(R,j,B,M){M=typeof M<"u"?M:!0,j=f.isArray(j)?j:[j],B=B||{x:0,y:0};for(var I={min:{x:1/0,y:1/0},max:{x:-1/0,y:-1/0}},L=0;L<j.length;L+=1){var P=j[L],U=P.bounds?P.bounds.min:P.min||P.position||P,q=P.bounds?P.bounds.max:P.max||P.position||P;U&&q&&(U.x<I.min.x&&(I.min.x=U.x),q.x>I.max.x&&(I.max.x=q.x),U.y<I.min.y&&(I.min.y=U.y),q.y>I.max.y&&(I.max.y=q.y))}var H=I.max.x-I.min.x+2*B.x,V=I.max.y-I.min.y+2*B.y,$=R.canvas.height,Z=R.canvas.width,Q=Z/$,F=H/V,T=1,O=1;F>Q?O=F/Q:T=Q/F,R.options.hasBounds=!0,R.bounds.min.x=I.min.x,R.bounds.max.x=I.min.x+H*T,R.bounds.min.y=I.min.y,R.bounds.max.y=I.min.y+V*O,M&&(R.bounds.min.x+=H*.5-H*T*.5,R.bounds.max.x+=H*.5-H*T*.5,R.bounds.min.y+=V*.5-V*O*.5,R.bounds.max.y+=V*.5-V*O*.5),R.bounds.min.x-=B.x,R.bounds.max.x-=B.x,R.bounds.min.y-=B.y,R.bounds.max.y-=B.y,R.mouse&&(x.setScale(R.mouse,{x:(R.bounds.max.x-R.bounds.min.x)/R.canvas.width,y:(R.bounds.max.y-R.bounds.min.y)/R.canvas.height}),x.setOffset(R.mouse,R.bounds.min))},r.startViewTransform=function(R){var j=R.bounds.max.x-R.bounds.min.x,B=R.bounds.max.y-R.bounds.min.y,M=j/R.options.width,I=B/R.options.height;R.context.setTransform(R.options.pixelRatio/M,0,0,R.options.pixelRatio/I,0,0),R.context.translate(-R.bounds.min.x,-R.bounds.min.y)},r.endViewTransform=function(R){R.context.setTransform(R.options.pixelRatio,0,0,R.options.pixelRatio,0,0)},r.world=function(R,j){var B=f.now(),M=R.engine,I=M.world,L=R.canvas,P=R.context,U=R.options,q=R.timing,H=g.allBodies(I),V=g.allConstraints(I),$=U.wireframes?U.wireframeBackground:U.background,Z=[],Q=[],F,T={timestamp:M.timing.timestamp};if(m.trigger(R,"beforeRender",T),R.currentBackground!==$&&k(R,$),P.globalCompositeOperation="source-in",P.fillStyle="transparent",P.fillRect(0,0,L.width,L.height),P.globalCompositeOperation="source-over",U.hasBounds){for(F=0;F<H.length;F++){var O=H[F];h.overlaps(O.bounds,R.bounds)&&Z.push(O)}for(F=0;F<V.length;F++){var G=V[F],W=G.bodyA,Y=G.bodyB,ee=G.pointA,de=G.pointB;W&&(ee=w.add(W.position,G.pointA)),Y&&(de=w.add(Y.position,G.pointB)),!(!ee||!de)&&(h.contains(R.bounds,ee)||h.contains(R.bounds,de))&&Q.push(G)}r.startViewTransform(R),R.mouse&&(x.setScale(R.mouse,{x:(R.bounds.max.x-R.bounds.min.x)/R.options.width,y:(R.bounds.max.y-R.bounds.min.y)/R.options.height}),x.setOffset(R.mouse,R.bounds.min))}else Q=V,Z=H,R.options.pixelRatio!==1&&R.context.setTransform(R.options.pixelRatio,0,0,R.options.pixelRatio,0,0);!U.wireframes||M.enableSleeping&&U.showSleeping?r.bodies(R,Z,P):(U.showConvexHulls&&r.bodyConvexHulls(R,Z,P),r.bodyWireframes(R,Z,P)),U.showBounds&&r.bodyBounds(R,Z,P),(U.showAxes||U.showAngleIndicator)&&r.bodyAxes(R,Z,P),U.showPositions&&r.bodyPositions(R,Z,P),U.showVelocity&&r.bodyVelocity(R,Z,P),U.showIds&&r.bodyIds(R,Z,P),U.showSeparations&&r.separations(R,M.pairs.list,P),U.showCollisions&&r.collisions(R,M.pairs.list,P),U.showVertexNumbers&&r.vertexNumbers(R,Z,P),U.showMousePosition&&r.mousePosition(R,R.mouse,P),r.constraints(Q,P),U.hasBounds&&r.endViewTransform(R),m.trigger(R,"afterRender",T),q.lastElapsed=f.now()-B},r.stats=function(R,j,B){for(var M=R.engine,I=M.world,L=g.allBodies(I),P=0,U=55,q=44,H=0,V=0,$=0;$<L.length;$+=1)P+=L[$].parts.length;var Z={Part:P,Body:L.length,Cons:g.allConstraints(I).length,Comp:g.allComposites(I).length,Pair:M.pairs.list.length};j.fillStyle="#0e0f19",j.fillRect(H,V,U*5.5,q),j.font="12px Arial",j.textBaseline="top",j.textAlign="right";for(var Q in Z){var F=Z[Q];j.fillStyle="#aaa",j.fillText(Q,H+U,V+8),j.fillStyle="#eee",j.fillText(F,H+U,V+26),H+=U}},r.performance=function(R,j){var B=R.engine,M=R.timing,I=M.deltaHistory,L=M.elapsedHistory,P=M.timestampElapsedHistory,U=M.engineDeltaHistory,q=M.engineUpdatesHistory,H=M.engineElapsedHistory,V=B.timing.lastUpdatesPerFrame,$=B.timing.lastDelta,Z=N(I),Q=N(L),F=N(U),T=N(q),O=N(H),G=N(P),W=G/Z||0,Y=Math.round(Z/$),ee=1e3/Z||0,de=4,re=12,ie=60,be=34,fe=10,J=69;j.fillStyle="#0e0f19",j.fillRect(0,50,re*5+ie*6+22,be),r.status(j,fe,J,ie,de,I.length,Math.round(ee)+" fps",ee/r._goodFps,function(le){return I[le]/Z-1}),r.status(j,fe+re+ie,J,ie,de,U.length,$.toFixed(2)+" dt",r._goodDelta/$,function(le){return U[le]/F-1}),r.status(j,fe+(re+ie)*2,J,ie,de,q.length,V+" upf",Math.pow(f.clamp(T/Y||1,0,1),4),function(le){return q[le]/T-1}),r.status(j,fe+(re+ie)*3,J,ie,de,H.length,O.toFixed(2)+" ut",1-V*O/r._goodFps,function(le){return H[le]/O-1}),r.status(j,fe+(re+ie)*4,J,ie,de,L.length,Q.toFixed(2)+" rt",1-Q/r._goodFps,function(le){return L[le]/Q-1}),r.status(j,fe+(re+ie)*5,J,ie,de,P.length,W.toFixed(2)+" x",W*W*W,function(le){return(P[le]/I[le]/W||0)-1})},r.status=function(R,j,B,M,I,L,P,U,q){R.strokeStyle="#888",R.fillStyle="#444",R.lineWidth=1,R.fillRect(j,B+7,M,1),R.beginPath(),R.moveTo(j,B+7-I*f.clamp(.4*q(0),-2,2));for(var H=0;H<M;H+=1)R.lineTo(j+H,B+7-(H<L?I*f.clamp(.4*q(H),-2,2):0));R.stroke(),R.fillStyle="hsl("+f.clamp(25+95*U,0,120)+",100%,60%)",R.fillRect(j,B-7,4,4),R.font="12px Arial",R.textBaseline="middle",R.textAlign="right",R.fillStyle="#eee",R.fillText(P,j+M,B-5)},r.constraints=function(R,j){for(var B=j,M=0;M<R.length;M++){var I=R[M];if(!(!I.render.visible||!I.pointA||!I.pointB)){var L=I.bodyA,P=I.bodyB,U,q;if(L?U=w.add(L.position,I.pointA):U=I.pointA,I.render.type==="pin")B.beginPath(),B.arc(U.x,U.y,3,0,2*Math.PI),B.closePath();else{if(P?q=w.add(P.position,I.pointB):q=I.pointB,B.beginPath(),B.moveTo(U.x,U.y),I.render.type==="spring")for(var H=w.sub(q,U),V=w.perp(w.normalise(H)),$=Math.ceil(f.clamp(I.length/5,12,20)),Z,Q=1;Q<$;Q+=1)Z=Q%2===0?1:-1,B.lineTo(U.x+H.x*(Q/$)+V.x*Z*4,U.y+H.y*(Q/$)+V.y*Z*4);B.lineTo(q.x,q.y)}I.render.lineWidth&&(B.lineWidth=I.render.lineWidth,B.strokeStyle=I.render.strokeStyle,B.stroke()),I.render.anchors&&(B.fillStyle=I.render.strokeStyle,B.beginPath(),B.arc(U.x,U.y,3,0,2*Math.PI),B.arc(q.x,q.y,3,0,2*Math.PI),B.closePath(),B.fill())}}},r.bodies=function(R,j,B){var M=B;R.engine;var I=R.options,L=I.showInternalEdges||!I.wireframes,P,U,q,H;for(q=0;q<j.length;q++)if(P=j[q],!!P.render.visible){for(H=P.parts.length>1?1:0;H<P.parts.length;H++)if(U=P.parts[H],!!U.render.visible){if(I.showSleeping&&P.isSleeping?M.globalAlpha=.5*U.render.opacity:U.render.opacity!==1&&(M.globalAlpha=U.render.opacity),U.render.sprite&&U.render.sprite.texture&&!I.wireframes){var V=U.render.sprite,$=C(R,V.texture);M.translate(U.position.x,U.position.y),M.rotate(U.angle),M.drawImage($,$.width*-V.xOffset*V.xScale,$.height*-V.yOffset*V.yScale,$.width*V.xScale,$.height*V.yScale),M.rotate(-U.angle),M.translate(-U.position.x,-U.position.y)}else{if(U.circleRadius)M.beginPath(),M.arc(U.position.x,U.position.y,U.circleRadius,0,2*Math.PI);else{M.beginPath(),M.moveTo(U.vertices[0].x,U.vertices[0].y);for(var Z=1;Z<U.vertices.length;Z++)!U.vertices[Z-1].isInternal||L?M.lineTo(U.vertices[Z].x,U.vertices[Z].y):M.moveTo(U.vertices[Z].x,U.vertices[Z].y),U.vertices[Z].isInternal&&!L&&M.moveTo(U.vertices[(Z+1)%U.vertices.length].x,U.vertices[(Z+1)%U.vertices.length].y);M.lineTo(U.vertices[0].x,U.vertices[0].y),M.closePath()}I.wireframes?(M.lineWidth=1,M.strokeStyle=R.options.wireframeStrokeStyle,M.stroke()):(M.fillStyle=U.render.fillStyle,U.render.lineWidth&&(M.lineWidth=U.render.lineWidth,M.strokeStyle=U.render.strokeStyle,M.stroke()),M.fill())}M.globalAlpha=1}}},r.bodyWireframes=function(R,j,B){var M=B,I=R.options.showInternalEdges,L,P,U,q,H;for(M.beginPath(),U=0;U<j.length;U++)if(L=j[U],!!L.render.visible)for(H=L.parts.length>1?1:0;H<L.parts.length;H++){for(P=L.parts[H],M.moveTo(P.vertices[0].x,P.vertices[0].y),q=1;q<P.vertices.length;q++)!P.vertices[q-1].isInternal||I?M.lineTo(P.vertices[q].x,P.vertices[q].y):M.moveTo(P.vertices[q].x,P.vertices[q].y),P.vertices[q].isInternal&&!I&&M.moveTo(P.vertices[(q+1)%P.vertices.length].x,P.vertices[(q+1)%P.vertices.length].y);M.lineTo(P.vertices[0].x,P.vertices[0].y)}M.lineWidth=1,M.strokeStyle=R.options.wireframeStrokeStyle,M.stroke()},r.bodyConvexHulls=function(R,j,B){var M=B,I,L,P;for(M.beginPath(),L=0;L<j.length;L++)if(I=j[L],!(!I.render.visible||I.parts.length===1)){for(M.moveTo(I.vertices[0].x,I.vertices[0].y),P=1;P<I.vertices.length;P++)M.lineTo(I.vertices[P].x,I.vertices[P].y);M.lineTo(I.vertices[0].x,I.vertices[0].y)}M.lineWidth=1,M.strokeStyle="rgba(255,255,255,0.2)",M.stroke()},r.vertexNumbers=function(R,j,B){var M=B,I,L,P;for(I=0;I<j.length;I++){var U=j[I].parts;for(P=U.length>1?1:0;P<U.length;P++){var q=U[P];for(L=0;L<q.vertices.length;L++)M.fillStyle="rgba(255,255,255,0.2)",M.fillText(I+"_"+L,q.position.x+(q.vertices[L].x-q.position.x)*.8,q.position.y+(q.vertices[L].y-q.position.y)*.8)}}},r.mousePosition=function(R,j,B){var M=B;M.fillStyle="rgba(255,255,255,0.8)",M.fillText(j.position.x+"  "+j.position.y,j.position.x+5,j.position.y-5)},r.bodyBounds=function(R,j,B){var M=B;R.engine;var I=R.options;M.beginPath();for(var L=0;L<j.length;L++){var P=j[L];if(P.render.visible)for(var U=j[L].parts,q=U.length>1?1:0;q<U.length;q++){var H=U[q];M.rect(H.bounds.min.x,H.bounds.min.y,H.bounds.max.x-H.bounds.min.x,H.bounds.max.y-H.bounds.min.y)}}I.wireframes?M.strokeStyle="rgba(255,255,255,0.08)":M.strokeStyle="rgba(0,0,0,0.1)",M.lineWidth=1,M.stroke()},r.bodyAxes=function(R,j,B){var M=B;R.engine;var I=R.options,L,P,U,q;for(M.beginPath(),P=0;P<j.length;P++){var H=j[P],V=H.parts;if(H.render.visible)if(I.showAxes)for(U=V.length>1?1:0;U<V.length;U++)for(L=V[U],q=0;q<L.axes.length;q++){var $=L.axes[q];M.moveTo(L.position.x,L.position.y),M.lineTo(L.position.x+$.x*20,L.position.y+$.y*20)}else for(U=V.length>1?1:0;U<V.length;U++)for(L=V[U],q=0;q<L.axes.length;q++)M.moveTo(L.position.x,L.position.y),M.lineTo((L.vertices[0].x+L.vertices[L.vertices.length-1].x)/2,(L.vertices[0].y+L.vertices[L.vertices.length-1].y)/2)}I.wireframes?(M.strokeStyle="indianred",M.lineWidth=1):(M.strokeStyle="rgba(255, 255, 255, 0.4)",M.globalCompositeOperation="overlay",M.lineWidth=2),M.stroke(),M.globalCompositeOperation="source-over"},r.bodyPositions=function(R,j,B){var M=B;R.engine;var I=R.options,L,P,U,q;for(M.beginPath(),U=0;U<j.length;U++)if(L=j[U],!!L.render.visible)for(q=0;q<L.parts.length;q++)P=L.parts[q],M.arc(P.position.x,P.position.y,3,0,2*Math.PI,!1),M.closePath();for(I.wireframes?M.fillStyle="indianred":M.fillStyle="rgba(0,0,0,0.5)",M.fill(),M.beginPath(),U=0;U<j.length;U++)L=j[U],L.render.visible&&(M.arc(L.positionPrev.x,L.positionPrev.y,2,0,2*Math.PI,!1),M.closePath());M.fillStyle="rgba(255,165,0,0.8)",M.fill()},r.bodyVelocity=function(R,j,B){var M=B;M.beginPath();for(var I=0;I<j.length;I++){var L=j[I];if(L.render.visible){var P=d.getVelocity(L);M.moveTo(L.position.x,L.position.y),M.lineTo(L.position.x+P.x,L.position.y+P.y)}}M.lineWidth=3,M.strokeStyle="cornflowerblue",M.stroke()},r.bodyIds=function(R,j,B){var M=B,I,L;for(I=0;I<j.length;I++)if(j[I].render.visible){var P=j[I].parts;for(L=P.length>1?1:0;L<P.length;L++){var U=P[L];M.font="12px Arial",M.fillStyle="rgba(255,255,255,0.5)",M.fillText(U.id,U.position.x+10,U.position.y-10)}}},r.collisions=function(R,j,B){var M=B,I=R.options,L,P,U,q;for(M.beginPath(),U=0;U<j.length;U++)if(L=j[U],!!L.isActive)for(P=L.collision,q=0;q<L.contactCount;q++){var H=L.contacts[q],V=H.vertex;M.rect(V.x-1.5,V.y-1.5,3.5,3.5)}for(I.wireframes?M.fillStyle="rgba(255,255,255,0.7)":M.fillStyle="orange",M.fill(),M.beginPath(),U=0;U<j.length;U++)if(L=j[U],!!L.isActive&&(P=L.collision,L.contactCount>0)){var $=L.contacts[0].vertex.x,Z=L.contacts[0].vertex.y;L.contactCount===2&&($=(L.contacts[0].vertex.x+L.contacts[1].vertex.x)/2,Z=(L.contacts[0].vertex.y+L.contacts[1].vertex.y)/2),P.bodyB===P.supports[0].body||P.bodyA.isStatic===!0?M.moveTo($-P.normal.x*8,Z-P.normal.y*8):M.moveTo($+P.normal.x*8,Z+P.normal.y*8),M.lineTo($,Z)}I.wireframes?M.strokeStyle="rgba(255,165,0,0.7)":M.strokeStyle="orange",M.lineWidth=1,M.stroke()},r.separations=function(R,j,B){var M=B,I=R.options,L,P,U,q,H;for(M.beginPath(),H=0;H<j.length;H++)if(L=j[H],!!L.isActive){P=L.collision,U=P.bodyA,q=P.bodyB;var V=1;!q.isStatic&&!U.isStatic&&(V=.5),q.isStatic&&(V=0),M.moveTo(q.position.x,q.position.y),M.lineTo(q.position.x-P.penetration.x*V,q.position.y-P.penetration.y*V),V=1,!q.isStatic&&!U.isStatic&&(V=.5),U.isStatic&&(V=0),M.moveTo(U.position.x,U.position.y),M.lineTo(U.position.x+P.penetration.x*V,U.position.y+P.penetration.y*V)}I.wireframes?M.strokeStyle="rgba(255,165,0,0.5)":M.strokeStyle="orange",M.stroke()},r.inspector=function(R,j){R.engine;var B=R.selected,M=R.render,I=M.options,L;if(I.hasBounds){var P=M.bounds.max.x-M.bounds.min.x,U=M.bounds.max.y-M.bounds.min.y,q=P/M.options.width,H=U/M.options.height;j.scale(1/q,1/H),j.translate(-M.bounds.min.x,-M.bounds.min.y)}for(var V=0;V<B.length;V++){var $=B[V].data;switch(j.translate(.5,.5),j.lineWidth=1,j.strokeStyle="rgba(255,165,0,0.9)",j.setLineDash([1,2]),$.type){case"body":L=$.bounds,j.beginPath(),j.rect(Math.floor(L.min.x-3),Math.floor(L.min.y-3),Math.floor(L.max.x-L.min.x+6),Math.floor(L.max.y-L.min.y+6)),j.closePath(),j.stroke();break;case"constraint":var Z=$.pointA;$.bodyA&&(Z=$.pointB),j.beginPath(),j.arc(Z.x,Z.y,10,0,2*Math.PI),j.closePath(),j.stroke();break}j.setLineDash([]),j.translate(-.5,-.5)}R.selectStart!==null&&(j.translate(.5,.5),j.lineWidth=1,j.strokeStyle="rgba(255,165,0,0.6)",j.fillStyle="rgba(255,165,0,0.1)",L=R.selectBounds,j.beginPath(),j.rect(Math.floor(L.min.x),Math.floor(L.min.y),Math.floor(L.max.x-L.min.x),Math.floor(L.max.y-L.min.y)),j.closePath(),j.stroke(),j.fill(),j.translate(-.5,-.5)),I.hasBounds&&j.setTransform(1,0,0,1,0,0)};var b=function(R,j){var B=R.engine,M=R.timing,I=M.historySize,L=B.timing.timestamp;M.delta=j-M.lastTime||r._goodDelta,M.lastTime=j,M.timestampElapsed=L-M.lastTimestamp||0,M.lastTimestamp=L,M.deltaHistory.unshift(M.delta),M.deltaHistory.length=Math.min(M.deltaHistory.length,I),M.engineDeltaHistory.unshift(B.timing.lastDelta),M.engineDeltaHistory.length=Math.min(M.engineDeltaHistory.length,I),M.timestampElapsedHistory.unshift(M.timestampElapsed),M.timestampElapsedHistory.length=Math.min(M.timestampElapsedHistory.length,I),M.engineUpdatesHistory.unshift(B.timing.lastUpdatesPerFrame),M.engineUpdatesHistory.length=Math.min(M.engineUpdatesHistory.length,I),M.engineElapsedHistory.unshift(B.timing.lastElapsed),M.engineElapsedHistory.length=Math.min(M.engineElapsedHistory.length,I),M.elapsedHistory.unshift(M.lastElapsed),M.elapsedHistory.length=Math.min(M.elapsedHistory.length,I)},N=function(R){for(var j=0,B=0;B<R.length;B+=1)j+=R[B];return j/R.length||0},_=function(R,j){var B=document.createElement("canvas");return B.width=R,B.height=j,B.oncontextmenu=function(){return!1},B.onselectstart=function(){return!1},B},A=function(R){var j=R.getContext("2d"),B=window.devicePixelRatio||1,M=j.webkitBackingStorePixelRatio||j.mozBackingStorePixelRatio||j.msBackingStorePixelRatio||j.oBackingStorePixelRatio||j.backingStorePixelRatio||1;return B/M},C=function(R,j){var B=R.textures[j];return B||(B=R.textures[j]=new Image,B.src=j,B)},k=function(R,j){var B=j;/(jpg|gif|png)$/.test(j)&&(B="url("+j+")"),R.canvas.style.background=B,R.canvas.style.backgroundSize="contain",R.currentBackground=j}})()}),(function(a,o,l){var r={};a.exports=r;var d=l(5),f=l(17),g=l(0);(function(){r._maxFrameDelta=1e3/15,r._frameDeltaFallback=1e3/60,r._timeBufferMargin=1.5,r._elapsedNextEstimate=1,r._smoothingLowerBound=.1,r._smoothingUpperBound=.9,r.create=function(m){var w={delta:16.666666666666668,frameDelta:null,frameDeltaSmoothing:!0,frameDeltaSnapping:!0,frameDeltaHistory:[],frameDeltaHistorySize:100,frameRequestId:null,timeBuffer:0,timeLastTick:null,maxUpdates:null,maxFrameTime:33.333333333333336,lastUpdatesDeferred:0,enabled:!0},x=g.extend(w,m);return x.fps=0,x},r.run=function(m,w){return m.timeBuffer=r._frameDeltaFallback,(function x(p){m.frameRequestId=r._onNextFrame(m,x),p&&m.enabled&&r.tick(m,w,p)})(),m},r.tick=function(m,w,x){var p=g.now(),v=m.delta,b=0,N=x-m.timeLastTick;if((!N||!m.timeLastTick||N>Math.max(r._maxFrameDelta,m.maxFrameTime))&&(N=m.frameDelta||r._frameDeltaFallback),m.frameDeltaSmoothing){m.frameDeltaHistory.push(N),m.frameDeltaHistory=m.frameDeltaHistory.slice(-m.frameDeltaHistorySize);var _=m.frameDeltaHistory.slice(0).sort(),A=m.frameDeltaHistory.slice(_.length*r._smoothingLowerBound,_.length*r._smoothingUpperBound),C=h(A);N=C||N}m.frameDeltaSnapping&&(N=1e3/Math.round(1e3/N)),m.frameDelta=N,m.timeLastTick=x,m.timeBuffer+=m.frameDelta,m.timeBuffer=g.clamp(m.timeBuffer,0,m.frameDelta+v*r._timeBufferMargin),m.lastUpdatesDeferred=0;var k=m.maxUpdates||Math.ceil(m.maxFrameTime/v),R={timestamp:w.timing.timestamp};d.trigger(m,"beforeTick",R),d.trigger(m,"tick",R);for(var j=g.now();v>0&&m.timeBuffer>=v*r._timeBufferMargin;){d.trigger(m,"beforeUpdate",R),f.update(w,v),d.trigger(m,"afterUpdate",R),m.timeBuffer-=v,b+=1;var B=g.now()-p,M=g.now()-j,I=B+r._elapsedNextEstimate*M/b;if(b>=k||I>m.maxFrameTime){m.lastUpdatesDeferred=Math.round(Math.max(0,m.timeBuffer/v-r._timeBufferMargin));break}}w.timing.lastUpdatesPerFrame=b,d.trigger(m,"afterTick",R),m.frameDeltaHistory.length>=100&&(m.lastUpdatesDeferred&&Math.round(m.frameDelta/v)>k?g.warnOnce("Matter.Runner: runner reached runner.maxUpdates, see docs."):m.lastUpdatesDeferred&&g.warnOnce("Matter.Runner: runner reached runner.maxFrameTime, see docs."),typeof m.isFixed<"u"&&g.warnOnce("Matter.Runner: runner.isFixed is now redundant, see docs."),(m.deltaMin||m.deltaMax)&&g.warnOnce("Matter.Runner: runner.deltaMin and runner.deltaMax were removed, see docs."),m.fps!==0&&g.warnOnce("Matter.Runner: runner.fps was replaced by runner.delta, see docs."))},r.stop=function(m){r._cancelNextFrame(m)},r._onNextFrame=function(m,w){if(typeof window<"u"&&window.requestAnimationFrame)m.frameRequestId=window.requestAnimationFrame(w);else throw new Error("Matter.Runner: missing required global window.requestAnimationFrame.");return m.frameRequestId},r._cancelNextFrame=function(m){if(typeof window<"u"&&window.cancelAnimationFrame)window.cancelAnimationFrame(m.frameRequestId);else throw new Error("Matter.Runner: missing required global window.cancelAnimationFrame.")};var h=function(m){for(var w=0,x=m.length,p=0;p<x;p+=1)w+=m[p];return w/x||0}})()}),(function(a,o,l){var r={};a.exports=r;var d=l(8),f=l(0),g=f.deprecated;(function(){r.collides=function(h,m){return d.collides(h,m)},g(r,"collides","SAT.collides  replaced by Collision.collides")})()}),(function(a,o,l){var r={};a.exports=r,l(1);var d=l(0);(function(){r.pathToVertices=function(f,g){typeof window<"u"&&!("SVGPathSeg"in window)&&d.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var h,m,w,x,p,v,b,N,_,A,C=[],k,R,j=0,B=0,M=0;g=g||15;var I=function(P,U,q){var H=q%2===1&&q>1;if(!_||P!=_.x||U!=_.y){_&&H?(k=_.x,R=_.y):(k=0,R=0);var V={x:k+P,y:R+U};(H||!_)&&(_=V),C.push(V),B=k+P,M=R+U}},L=function(P){var U=P.pathSegTypeAsLetter.toUpperCase();if(U!=="Z"){switch(U){case"M":case"L":case"T":case"C":case"S":case"Q":B=P.x,M=P.y;break;case"H":B=P.x;break;case"V":M=P.y;break}I(B,M,P.pathSegType)}};for(r._svgPathToAbsolute(f),w=f.getTotalLength(),v=[],h=0;h<f.pathSegList.numberOfItems;h+=1)v.push(f.pathSegList.getItem(h));for(b=v.concat();j<w;){if(A=f.getPathSegAtLength(j),p=v[A],p!=N){for(;b.length&&b[0]!=p;)L(b.shift());N=p}switch(p.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":x=f.getPointAtLength(j),I(x.x,x.y,0);break}j+=g}for(h=0,m=b.length;h<m;++h)L(b[h]);return C},r._svgPathToAbsolute=function(f){for(var g,h,m,w,x,p,v=f.pathSegList,b=0,N=0,_=v.numberOfItems,A=0;A<_;++A){var C=v.getItem(A),k=C.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(k))"x"in C&&(b=C.x),"y"in C&&(N=C.y);else switch("x1"in C&&(m=b+C.x1),"x2"in C&&(x=b+C.x2),"y1"in C&&(w=N+C.y1),"y2"in C&&(p=N+C.y2),"x"in C&&(b+=C.x),"y"in C&&(N+=C.y),k){case"m":v.replaceItem(f.createSVGPathSegMovetoAbs(b,N),A);break;case"l":v.replaceItem(f.createSVGPathSegLinetoAbs(b,N),A);break;case"h":v.replaceItem(f.createSVGPathSegLinetoHorizontalAbs(b),A);break;case"v":v.replaceItem(f.createSVGPathSegLinetoVerticalAbs(N),A);break;case"c":v.replaceItem(f.createSVGPathSegCurvetoCubicAbs(b,N,m,w,x,p),A);break;case"s":v.replaceItem(f.createSVGPathSegCurvetoCubicSmoothAbs(b,N,x,p),A);break;case"q":v.replaceItem(f.createSVGPathSegCurvetoQuadraticAbs(b,N,m,w),A);break;case"t":v.replaceItem(f.createSVGPathSegCurvetoQuadraticSmoothAbs(b,N),A);break;case"a":v.replaceItem(f.createSVGPathSegArcAbs(b,N,C.r1,C.r2,C.angle,C.largeArcFlag,C.sweepFlag),A);break;case"z":case"Z":b=g,N=h;break}(k=="M"||k=="m")&&(g=b,h=N)}}})()}),(function(a,o,l){var r={};a.exports=r;var d=l(6);l(0),(function(){r.create=d.create,r.add=d.add,r.remove=d.remove,r.clear=d.clear,r.addComposite=d.addComposite,r.addBody=d.addBody,r.addConstraint=d.addConstraint})()})])})})(ac)),ac.exports}var D3=k3();const kt=mc(D3),B3=25,I3=.95,Ii=1,mb=2,Qr=2;let Gn=null;const fc=new Map,lo=new Map,co=new Map,Cc=new Map,Mc=new Map;let Hf=null;function ny(s){Hf=s}function L3(s){Gn&&hb();const t=kt.Engine.create();t.world.gravity.y=s.gravity,t.world.gravity.scale=1e-4,t.timing.timeScale=.3;const a=[kt.Bodies.rectangle(0,s.height/2,1,s.height,{isStatic:!0,render:{visible:!1},collisionFilter:{category:Qr,mask:Ii}}),kt.Bodies.rectangle(s.width,s.height/2,1,s.height,{isStatic:!0,render:{visible:!1},collisionFilter:{category:Qr,mask:Ii}}),kt.Bodies.rectangle(s.width/2,0,s.width,1,{isStatic:!0,render:{visible:!1},collisionFilter:{category:Qr,mask:Ii}}),kt.Bodies.rectangle(s.width/2,mm(s)-1,s.width,1,{isStatic:!0,render:{visible:!1},collisionFilter:{category:Qr,mask:Ii}})];kt.World.add(t.world,a);const o=db(s);fc.clear();const l=[];return o.forEach(r=>{const d=kt.Bodies.circle(r.x,r.y,r.r,{isStatic:!0,restitution:.8,friction:.1,frictionAir:0,collisionFilter:{category:mb,mask:Ii},render:{fillStyle:"#c084fc",strokeStyle:"#e9d5ff",lineWidth:2}}),f=`${r.row}-${r.col}`;fc.set(f,d),l.push(d)}),kt.World.add(t.world,l),kt.Events.on(t,"collisionStart",r=>{console.log(`[COLLISION EVENT] collisionStart triggered with ${r.pairs.length} pairs`),z3(r.pairs)}),kt.Events.on(t,"collisionActive",r=>{Math.random()<.01&&console.log(`[COLLISION EVENT] collisionActive triggered with ${r.pairs.length} pairs`)}),Gn=t,t}function z3(s){s.forEach(t=>{const{bodyA:a,bodyB:o}=t;let l=null,r=null,d=null;const f=co.get(a.id),g=co.get(o.id);if(f!==void 0?(l=a,d=f,r=o):g!==void 0&&(l=o,d=g,r=a),!l||!r||d===null)return;console.log(`[COLLISION] Ball ${d} collided with body ${r.id}`);let h=-1,m=null;for(const[T,O]of fc.entries())if(O.id===r.id){m=T;const[G]=T.split("-").map(Number);h=G;break}if(h===-1||!m)return;console.log(`[COLLISION] Ball ${d} hit pin at row ${h}`),Hf&&Hf(m);const w=Cc.get(d),x=Mc.get(d);if(!w||!x){console.log(`[COLLISION] No path or config for ball ${d}`);return}const p=w.targetPinsX[h];if(p===void 0)return;const v=r.position.x,b=r.position.y,N=l.position.x,_=l.position.y,A=p-v;if(Math.abs(A)<.1)return;const k=Math.sign(A),R=l.velocity.x,j=l.velocity.y,B=N-v,M=_-b,I=Math.sqrt(B*B+M*M);if(I<.001)return;const L=B/I,P=M/I,U=R*L+j*P,q=.8;let H=R,V=j;U<0&&(H=R-2*U*L,V=j-2*U*P);let $=H*q,Z=V*q;$+=k*B3,Z*=I3,Z<5&&(Z=5),kt.Body.setVelocity(l,{x:$,y:Z}),console.log(`[COLLISION] Applied strong bounce: vx=${$.toFixed(2)}, vy=${Z.toFixed(2)}, direction=${k>0?"RIGHT":"LEFT"}, targetHoleX=${p.toFixed(2)}, pinX=${v.toFixed(2)}, row=${h}`)})}function U3(s,t,a,o){if(!Gn)throw new Error("Matter.js engine not initialized. Call initMatterEngine first.");const l=kt.Bodies.circle(s.width/2,s.ballRadius+5,s.ballRadius,{restitution:.7,friction:.2,frictionAir:.05,density:.001,collisionFilter:{category:Ii,mask:mb|Qr}});kt.Body.setVelocity(l,{x:0,y:.01}),kt.World.add(Gn.world,l);const r={id:a,p:{x:l.position.x,y:l.position.y},v:{x:l.velocity.x,y:l.velocity.y},radius:s.ballRadius,nextRow:0,ignoreCollisionsUntilY:0,lastCollidedRow:-1,lastCollidedPinCol:-1,hasLanded:!1,targetSlot:t};return lo.set(a,l),co.set(l.id,a),Cc.set(a,o),Mc.set(a,s),{ballState:r,matterBody:l}}function H3(s){Gn&&kt.Engine.update(Gn,s*1e3)}function P3(s,t,a,o,l){if(t.hasLanded)return;if(!Gn)throw new Error("Matter.js engine not initialized.");const r=lo.get(t.id);if(!r){l.warn("PHYS",`Ball ${t.id} has no Matter.js body`,{},t.id);return}t.p.x=r.position.x,t.p.y=r.position.y,t.v.x=r.velocity.x,t.v.y=r.velocity.y;const d=Math.max(0,Math.min(s.rows-1,t.nextRow)),f=a.targetPinsX[d];if(f!==void 0){const x=r.position.x,p=f-x,v=Math.abs(p);if(Math.random()<.05&&console.log(`[ATTRACTION] Ball ${t.id} row ${d}: ballX=${x.toFixed(2)}, targetHoleX=${f.toFixed(2)}, distance=${v.toFixed(2)}, vx=${r.velocity.x.toFixed(2)}`),v>5){const b=Math.min(v*.05,2),N=Math.sign(p),_=r.velocity.x,A=N*b,C=.1,k=_*(1-C)+A*C;kt.Body.setVelocity(r,{x:k,y:r.velocity.y})}else Math.random()<.1&&console.log(`[ATTRACTION] Ball ${t.id} row ${d}: CLOSE to target! ballX=${x.toFixed(2)}, targetHoleX=${f.toFixed(2)}, distance=${v.toFixed(2)}`)}else Math.random()<.01&&console.log(`[ATTRACTION] Ball ${t.id} row ${d}: NO TARGET HOLE! path.targetPinsX=${JSON.stringify(a.targetPinsX)}`);if(t.nextRow<s.rows){const x=dc(s,t.nextRow);if(t.p.y>=x){const p=t.nextRow;t.nextRow++,l.info("ROW",` ROW CROSSED: ${p}  ${t.nextRow}`,{oldRow:p,newRow:t.nextRow,ballY:t.p.y,rowY:x,ballX:t.p.x,vx:t.v.x,vy:t.v.y},t.id)}}const g=mm(s),h=g,m=t.nextRow>=s.rows,w=t.p.y+t.radius>=h-5;if(m&&!t.hasLanded&&Math.random()<.1&&console.log(`[LANDING CHECK] Ball ${t.id}: nextRow=${t.nextRow}, rows=${s.rows}, ballY=${t.p.y.toFixed(2)}, ballRadius=${t.radius}, slotYPos=${g}, hasReachedLandingZone=${w}`),m&&w&&!t.hasLanded){const x=fm(s,t.targetSlot);kt.Body.setPosition(r,{x,y:g-t.radius}),kt.Body.setVelocity(r,{x:0,y:0}),t.p.x=x,t.p.y=g-t.radius,t.v.x=0,t.v.y=0,t.hasLanded=!0;const p=fb(s,t.p.x);l.info("LAND",`Ball landed in slot ${p}`,{targetSlot:t.targetSlot,finalSlot:p,x:t.p.x,y:t.p.y},t.id);return}t.p.x=Math.max(t.radius,Math.min(s.width-t.radius,t.p.x)),t.p.y=Math.max(t.radius,Math.min(s.height-t.radius,t.p.y)),(r.position.x!==t.p.x||r.position.y!==t.p.y)&&kt.Body.setPosition(r,{x:t.p.x,y:t.p.y})}function G3(s){if(!Gn)return;const t=lo.get(s);t&&(kt.World.remove(Gn.world,t),lo.delete(s),co.delete(t.id),Cc.delete(s),Mc.delete(s))}function hb(){Gn&&(kt.Engine.clear(Gn),Gn=null),fc.clear(),lo.clear(),co.clear(),Cc.clear(),Mc.clear()}function $3(s){L3(s)}function V3(){hb()}function F3(s){H3(s)}function W3(s,t,a,o,l){P3(s,t,a,o,l)}function q3(s,t,a=0,o){const{ballState:l}=U3(s,t,a,o);return l}function Y3(s){G3(s)}class X3{buffer;size;head=0;count=0;constructor(t){this.size=t,this.buffer=new Array(t)}push(t){this.buffer[this.head]=t,this.head=(this.head+1)%this.size,this.count<this.size&&this.count++}getAll(){const t=[],a=this.count===this.size?this.head:0;for(let o=0;o<this.count;o++)t.push(this.buffer[(a+o)%this.size]);return t}clear(){this.head=0,this.count=0}}function Z3(s={}){const t=s.bufferSize??1e4,a=s.throttleMs??{PHYS:16,ROW:0,HIT:0,STEER:16,MAG:16,LAND:0,INIT:0,CFG:0},o=new X3(t),l={};let r=0;function d(g){const h=a[g];if(h===0)return!1;const m=g,w=Date.now(),x=l[m]??0;return w-x<h?!0:(l[m]=w,!1)}function f(g,h,m,w,x){if(d(h))return;const p={level:g,channel:h,message:m,data:w,timestamp:Date.now(),step:r++,ballId:x};if(o.push(p),h==="LAND"||h==="INIT"||h==="ROW"||h==="HIT"){const v=`[${h}]`,b=x!==void 0?`[Ball#${x}]`:"";console.log(`${v}${b} ${m}`,w??"")}}return{log(g,h,m,w,x){f(g,h,m,w,x)},trace(g,h,m,w){f("trace",g,h,m,w)},debug(g,h,m,w){f("debug",g,h,m,w)},info(g,h,m,w){f("info",g,h,m,w)},warn(g,h,m,w){f("warn",g,h,m,w)},error(g,h,m,w){f("error",g,h,m,w)},exportLogs(){return JSON.stringify(o.getAll(),null,2)},clearLogs(){o.clear()},getLogs(){return o.getAll()}}}const Q3=({cfg:s,balls:t,paths:a,showTargetPath:o,showCorridors:l,showVelocities:r,showMagnetZone:d})=>{const f=ve.useRef(null);return ve.useEffect(()=>{const g=f.current;if(!g)return;const h=g.getContext("2d");if(h){if(g.width=s.width,g.height=s.height,h.clearRect(0,0,g.width,g.height),d){const m=dc(s,Math.max(0,s.rows-2));h.fillStyle="rgba(255, 255, 0, 0.1)",h.fillRect(0,m,s.width,s.height-m)}t.forEach(m=>{if(m.hasLanded)return;const w=a.get(m.id);if(w){if(h.save(),o){const x=fm(s,m.targetSlot);h.strokeStyle="rgba(0, 255, 0, 0.5)",h.lineWidth=2,h.setLineDash([5,5]),h.beginPath(),h.moveTo(m.p.x,m.p.y),h.lineTo(x,s.height-s.slotHeight/2),h.stroke(),h.setLineDash([])}if(l)for(let x=m.nextRow;x<s.rows;x++){const p=w.targetPinsX[x];if(p===void 0)continue;const v=dc(s,x),b=x===m.nextRow?.8:.4;h.strokeStyle=`rgba(255, 165, 0, ${b})`,h.lineWidth=x===m.nextRow?3:2,h.beginPath(),h.moveTo(p-25,v-15),h.lineTo(p-25,v+15),h.moveTo(p+25,v-15),h.lineTo(p+25,v+15),h.stroke(),h.fillStyle=`rgba(255, 165, 0, ${b})`,h.beginPath(),h.arc(p,v,x===m.nextRow?6:4,0,Math.PI*2),h.fill(),h.fillStyle=`rgba(255, 165, 0, ${b})`,h.font="10px monospace",h.fillText(`R${x}`,p-15,v-20)}r&&(h.strokeStyle="rgba(255, 0, 0, 0.8)",h.lineWidth=2,h.beginPath(),h.moveTo(m.p.x,m.p.y),h.lineTo(m.p.x+m.v.x*.1,m.p.y+m.v.y*.1),h.stroke(),h.fillStyle="rgba(255, 0, 0, 0.9)",h.font="10px monospace",h.fillText(`vx:${m.v.x.toFixed(0)} vy:${m.v.y.toFixed(0)}`,m.p.x+15,m.p.y-10)),h.restore()}})}},[s,t,a,o,l,r,d]),u.jsx("canvas",{ref:f,style:{position:"absolute",top:0,left:0,pointerEvents:"none",zIndex:10}})},Yl=1/120,K3=s=>{const t=2*Math.PI/3;return s===0?0:s===1?1:Math.pow(2,-10*s)*Math.sin((s*10-.75)*t)+1},J3=s=>s<1/2.75?7.5625*s*s:s<2/2.75?7.5625*(s-=1.5/2.75)*s+.75:s<2.5/2.75?7.5625*(s-=2.25/2.75)*s+.9375:7.5625*(s-=2.625/2.75)*s+.984375,eM=({rows:s,slots:t,onBallLand:a,allTargetSlots:o,ballDropCount:l=0})=>{const r=D.useRef(null),d=D.useRef(void 0),f=D.useRef(0),g=D.useRef(0),h=D.useRef(new Map),m=D.useRef(new Map),w=D.useRef(a),x=D.useRef(0),p=D.useRef(Z3({bufferSize:5e3})),v=D.useMemo(()=>Vi(t),[t]),b=s,[N,_]=D.useState(new Map),[A,C]=D.useState(new Map),[k,R]=D.useState([]),[j,B]=D.useState(!1);D.useEffect(()=>{w.current=a},[a]);const M=D.useRef(null);if(!M.current&&typeof window<"u"){const F=window.innerWidth<768,T=window.innerWidth<400,O=s===9;let G;T?G=O?6:8:F?G=O?8:10:G=12,M.current={isMobile:F,isVerySmall:T,WIDTH:T?Math.min(window.innerWidth-20,380):F?Math.min(window.innerWidth-40,600):800,HEIGHT:T?360:F?480:600,PIN_RADIUS:T?4:F?6:8,BALL_RADIUS:G,SLOT_HEIGHT:T?48:F?56:80}}const{isVerySmall:I,WIDTH:L,HEIGHT:P,PIN_RADIUS:U,BALL_RADIUS:q,SLOT_HEIGHT:H}=M.current||{isVerySmall:!1,WIDTH:800,HEIGHT:600,PIN_RADIUS:8,BALL_RADIUS:12,SLOT_HEIGHT:80},V=T3(b,t,L,P);V.pinRadius=U,V.ballRadius=q,V.slotHeight=H;const $=db(V);D.useEffect(()=>($3(V),ny(F=>{const[T,O]=F.split("-"),G=parseInt(T),W=parseInt(O),Y=$.find(ee=>ee.row===G&&ee.col===W);if(Y){const de=[];for(let re=0;re<8;re++){const ie=Math.PI*2*re/8+Math.random()*.3,be=2+Math.random()*3;de.push({x:Y.x,y:Y.y,vx:Math.cos(ie)*be,vy:Math.sin(ie)*be-1,life:1,maxLife:.6+Math.random()*.4,color:`hsl(${280+Math.random()*40}, 100%, ${60+Math.random()*20}%)`,size:2+Math.random()*2})}R(re=>[...re,...de]),C(re=>{const ie=new Map(re);return ie.set(F,{startTime:Date.now(),duration:400}),ie}),setTimeout(()=>{C(re=>{const ie=new Map(re);return ie.delete(F),ie})},400)}}),()=>{ny(null),V3()}),[b,t,L,P]);const Z=D.useCallback(()=>{if(l<=x.current||o.length===0)return;const F=l-1,T=o[F];if(T===void 0){console.log(" No target slot for ball",F);return}console.log(` Dropping ball #${l}  target slot ${T}`),x.current=l;const O=Date.now()+Math.random(),G=O3(V,T,O),W=q3(V,T,O,G);h.current.set(O,W),m.current.set(O,G),p.current.info("INIT","Ball dropped",{ballId:O,targetSlot:T,rows:V.rows,slotCount:V.slotCount})},[l,o,V]);D.useEffect(()=>{Z()},[Z]),D.useEffect(()=>{x.current=0,h.current.clear(),m.current.clear()},[b,t]);const Q=D.useCallback(()=>{const F=r.current;if(!F)return;const T=F.getContext("2d");if(!T)return;T.roundRect||(T.roundRect=function(ie,be,fe,J,le){fe<2*le&&(le=fe/2),J<2*le&&(le=J/2),this.beginPath(),this.moveTo(ie+le,be),this.arcTo(ie+fe,be,ie+fe,be+J,le),this.arcTo(ie+fe,be+J,ie,be+J,le),this.arcTo(ie,be+J,ie,be,le),this.arcTo(ie,be,ie+fe,be,le),this.closePath()}),T.clearRect(0,0,F.width,F.height);const O=T.createLinearGradient(0,0,0,P);O.addColorStop(0,"#1a1a2e"),O.addColorStop(1,"#16213e"),T.fillStyle=O,T.fillRect(0,0,L,P);const G=Date.now();$.forEach(ie=>{const be=`${ie.row}-${ie.col}`,fe=A.get(be);let J=1,le=0;if(fe){const Ne=G-fe.startTime,Ce=Math.min(Ne/fe.duration,1);J=1+K3(Ce)*.5,le=(1-Ce)*1}le>0?(T.shadowBlur=25*le,T.shadowColor="#c084fc"):T.shadowBlur=0;const je=T.createRadialGradient(ie.x-ie.r*.3,ie.y-ie.r*.3,0,ie.x,ie.y,ie.r*J);je.addColorStop(0,le>0?"#f0abfc":"#e9d5ff"),je.addColorStop(1,"#c084fc"),T.fillStyle=je,T.strokeStyle=le>0?"#f0abfc":"#e9d5ff",T.lineWidth=2+le*2,T.beginPath(),T.arc(ie.x,ie.y,ie.r*J,0,Math.PI*2),T.fill(),T.stroke(),T.shadowBlur=0}),k.forEach(ie=>{T.save(),T.globalAlpha=ie.life,T.shadowBlur=10*ie.life,T.shadowColor=ie.color,T.fillStyle=ie.color,T.beginPath(),T.arc(ie.x,ie.y,ie.size*ie.life,0,Math.PI*2),T.fill(),T.restore()});const W=mm(V)-20,Y=E3(V),ee=4,de=1,re=8;v.forEach((ie,be)=>{const fe=fm(V,be),J=fe-Y/2,le=N.get(be),je=J+ee,Ne=Y-ee*2,Ce=H-ee*2;let Ue=1,$e=0,Oe=0;if(le){const xt=G-le.startTime,vn=Math.min(xt/le.duration,1),rn=J3(vn);Oe=-20*(1-rn),Ue=1+(1-rn)*.15,$e=(1-vn)*1}const Be=je-Ne*(Ue-1)/2,ke=W+ee+Oe-Ce*(Ue-1)/2,lt=Ne*Ue,it=Ce*Ue;let tt;ie===1?tt={bgStart:"rgba(239, 68, 68, 0.3)",bgEnd:"rgba(185, 28, 28, 0.2)",border:"rgba(239, 68, 68, 0.5)",text:"#fca5a5"}:ie>=200?tt={bgStart:"rgba(250, 204, 21, 0.3)",bgEnd:"rgba(202, 138, 4, 0.2)",border:"rgba(250, 204, 21, 0.5)",text:"#fde047"}:ie>=100?tt={bgStart:"rgba(251, 146, 60, 0.3)",bgEnd:"rgba(234, 88, 12, 0.2)",border:"rgba(251, 146, 60, 0.5)",text:"#fed7aa"}:ie>=50?tt={bgStart:"rgba(74, 222, 128, 0.3)",bgEnd:"rgba(22, 163, 74, 0.2)",border:"rgba(74, 222, 128, 0.5)",text:"#bbf7d0"}:ie>=20?tt={bgStart:"rgba(34, 211, 238, 0.3)",bgEnd:"rgba(8, 145, 178, 0.2)",border:"rgba(34, 211, 238, 0.5)",text:"#a5f3fc"}:tt={bgStart:"rgba(96, 165, 250, 0.3)",bgEnd:"rgba(37, 99, 235, 0.2)",border:"rgba(96, 165, 250, 0.5)",text:"#bfdbfe"};const Ye=T.createLinearGradient(Be,ke,Be,ke+it);Ye.addColorStop(0,tt.bgStart),Ye.addColorStop(1,tt.bgEnd),$e>0?(T.shadowBlur=30*$e,T.shadowColor=tt.border):T.shadowBlur=0,T.fillStyle=Ye,T.beginPath(),T.roundRect(Be,ke,lt,it,re),T.fill(),T.strokeStyle=tt.border,T.lineWidth=de,T.beginPath(),T.roundRect(Be,ke,lt,it,re),T.stroke(),T.shadowBlur=0;const yn=W+H/2+Oe;T.font=`${I?"11px":"14px"} bold sans-serif`,T.textAlign="center",T.textBaseline="middle",T.fillStyle="rgba(0, 0, 0, 0.5)",T.fillText(ie.toString(),fe+1,yn+1),T.fillStyle=tt.text,T.fillText(ie.toString(),fe,yn)}),h.current.forEach(ie=>{if(ie.hasLanded)return;T.fillStyle="rgba(0, 0, 0, 0.3)",T.beginPath(),T.ellipse(ie.p.x,ie.p.y+ie.radius+2,ie.radius*.8,ie.radius*.4,0,0,Math.PI*2),T.fill();const be=T.createRadialGradient(ie.p.x-ie.radius*.3,ie.p.y-ie.radius*.3,0,ie.p.x,ie.p.y,ie.radius);be.addColorStop(0,"#fbbf24"),be.addColorStop(1,"#f59e0b"),T.fillStyle=be,T.strokeStyle="#ffffff",T.lineWidth=2,T.beginPath(),T.arc(ie.p.x,ie.p.y,ie.radius,0,Math.PI*2),T.fill(),T.stroke()})},[L,P,$,v,N,A,k,V,I,H]);return D.useEffect(()=>{let F=!0;const T=O=>{if(!F)return;g.current===0&&(g.current=O);const G=(O-g.current)/1e3;g.current=O,f.current+=G;const W=.25;for(f.current=Math.min(f.current,W),R(Y=>Y.map(ee=>({...ee,x:ee.x+ee.vx,y:ee.y+ee.vy,vy:ee.vy+.15,life:ee.life-1/60/ee.maxLife})).filter(ee=>ee.life>0));f.current>=Yl;)F3(Yl),h.current.forEach((Y,ee)=>{if(Y.hasLanded)return;const de=m.current.get(ee);if(de&&(W3(V,Y,de,Yl,p.current),Y.hasLanded)){const re=fb(V,Y.p.x),ie=Math.max(0,Math.min(v.length-1,re)),be=v[ie];re!==ie&&console.warn(` Ball #${ee} slot clamped: ${re}  ${ie} (slots: ${t}, slotValues length: ${v.length})`),console.log(` Ball #${ee} landed in slot ${ie} (target: ${Y.targetSlot}) Value: ${be}`),_(fe=>{const J=new Map(fe);return J.set(ie,{startTime:Date.now(),duration:600}),J}),setTimeout(()=>{_(fe=>{const J=new Map(fe);return J.delete(ie),J})},600),w.current(ie,be),setTimeout(()=>{Y3(ee),h.current.delete(ee),m.current.delete(ee)},500)}}),f.current-=Yl;Q(),d.current=requestAnimationFrame(T)};return d.current=requestAnimationFrame(T),()=>{F=!1,d.current&&cancelAnimationFrame(d.current)}},[V,Q,v,t]),D.useEffect(()=>{const F=r.current;F&&(F.width=L,F.height=P,Q())},[L,P,Q]),u.jsxs("div",{className:"relative w-full mx-auto",style:{maxWidth:L+"px"},children:[u.jsx("canvas",{ref:r,className:`relative ${I?"rounded-lg":"rounded-xl"}`,style:{width:L+"px",height:P+"px",margin:"0 auto",border:I?"none":"1px solid rgba(168, 85, 247, 0.2)",display:"block"}}),j&&u.jsx(Q3,{cfg:V,balls:Array.from(h.current.values()),paths:m.current,showTargetPath:!0,showCorridors:!0,showVelocities:!0,showMagnetZone:!0}),!1]})},gb=D.forwardRef(({gameMode:s,onBallDrop:t,disabled:a,allTargetSlots:o},l)=>{const[r,d]=D.useState([]),[f,g]=D.useState(0),[h,m]=D.useState(!1),w=D.useRef(!1),x=D.useRef(t),p=tM(s);D.useEffect(()=>{x.current=t},[t]),D.useEffect(()=>{if(d([]),g(0),m(!1),w.current=!1,o.length>0){const A=Vi(p.slots),k=o.map(j=>A[j]).reduce((j,B)=>j+B,0),R=o.map((j,B)=>{const M=A[j];return`Ball ${B+1}: Slot ${j}  +${M}`}).join(`
  `);console.log(" [PlinkoGame] Initialized!"),console.log(`  Mode: ${s}`),console.log(`  Balls: ${p.balls}`),console.log(`  Slots: ${p.slots}`),console.log(`
 [EXPECTED RESULTS]`),console.log(`  Target Total Score: ${k}`),console.log("  Combinations:"),console.log(`  ${R}`),console.log(`
 Target slots: [${o.join(", ")}]`)}else console.log(` [PlinkoGame] Initialized! Mode: ${s}, Balls: ${p.balls}, Target slots: []`)},[s,p.balls,p.slots,o]);const v=()=>{a||f>=p.balls||o.length<p.balls||h||(m(!0),g(A=>A+1),setTimeout(()=>{m(!1)},500))},b=()=>{if(console.log(" AUTO-DROP triggered!"),w.current){console.log(" AUTO-DROP already triggered, skipping");return}const A=p.balls-f;if(console.log(" Remaining balls to drop:",A),!(A<=0)){w.current=!0;for(let C=0;C<A;C++)setTimeout(()=>{console.log(` AUTO-DROPPING ball ${C+1}/${A}`),g(k=>{const R=k+1;return console.log(` Ball count: ${k}  ${R}`),Math.min(R,p.balls)})},C*500)}};D.useImperativeHandle(l,()=>({dropAllRemainingBalls:b,wasAutoDropped:()=>w.current,getAllBallsLanded:()=>r.length>=p.balls}));const N=A=>A===1?{bg:"bg-gradient-to-br from-red-500/30 to-red-700/20",border:"border-red-500/50",text:"text-red-300",shadow:"shadow-red-500/20"}:A>=200?{bg:"bg-gradient-to-br from-yellow-400/30 to-yellow-600/20",border:"border-yellow-400/50",text:"text-yellow-200",shadow:"shadow-yellow-400/20"}:A>=100?{bg:"bg-gradient-to-br from-orange-400/30 to-orange-600/20",border:"border-orange-400/50",text:"text-orange-200",shadow:"shadow-orange-400/20"}:A>=50?{bg:"bg-gradient-to-br from-green-400/30 to-green-600/20",border:"border-green-400/50",text:"text-green-200",shadow:"shadow-green-400/20"}:A>=20?{bg:"bg-gradient-to-br from-cyan-400/30 to-cyan-600/20",border:"border-cyan-400/50",text:"text-cyan-200",shadow:"shadow-cyan-400/20"}:{bg:"bg-gradient-to-br from-blue-400/30 to-blue-600/20",border:"border-blue-400/50",text:"text-blue-200",shadow:"shadow-blue-400/20"},_=(A,C)=>{const k=r.length+1;console.log(` Ball #${k} landed! Slot: ${A}, Value: +${C}`),d(R=>{const j=[...R,C],B=j.reduce((P,U)=>P+U,0),M=Vi(p.slots),L=o.map(P=>M[P]).reduce((P,U)=>P+U,0);return console.log(` Progress: ${k}/${p.balls} balls`),console.log(`   Current Total: ${B}`),console.log(`   Expected Total: ${L}`),console.log(`   Remaining: ${L-B}`),console.log(`   Wins so far: [${j.join(", ")}]`),k===p.balls&&(console.log(`
 [GAME COMPLETE]`),console.log(`   Final Score: ${B}`),console.log(`   Expected Score: ${L}`),console.log(`   Match: ${B===L?" PERFECT!":" Mismatch"}`)),j}),x.current(A)};return u.jsxs("div",{className:"space-y-3 md:space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between px-2 md:px-3 py-1.5 md:py-2 bg-white/5 rounded-lg border border-purple-500/20",children:[u.jsxs("div",{className:"flex items-center gap-1.5 md:gap-2",children:[u.jsx("span",{className:"text-txt-muted text-xs md:text-sm",children:"Balls:"}),u.jsx("span",{className:"text-lg md:text-xl font-bold text-sol-purple",children:p.balls-f})]}),u.jsx("div",{className:"flex items-center gap-0.5 md:gap-1 justify-end flex-1 overflow-x-auto max-w-[60%] md:max-w-none scrollbar-hide",children:r.map((A,C)=>{const k=N(A);return u.jsx(ye.div,{className:`px-2 md:px-3 py-1 md:py-1.5 rounded ${k.bg} border ${k.border} shadow-lg ${k.shadow} min-w-[32px] md:min-w-[42px] flex items-center justify-center flex-shrink-0`,initial:{scale:0,x:20},animate:{scale:1,x:0},transition:{duration:.3},children:u.jsxs("span",{className:`text-[10px] md:text-xs font-bold ${k.text} drop-shadow-sm whitespace-nowrap`,children:["+",A]})},`win-${C}-${A}`)})})]}),u.jsx(eM,{rows:p.rows,slots:p.slots,onBallLand:_,allTargetSlots:o,ballDropCount:f}),u.jsx(ye.div,{className:"text-center",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:u.jsx(Se,{size:"lg",variant:"neon",onClick:v,disabled:a||f>=p.balls||h,className:"text-base md:text-xl px-6 md:px-12 py-2.5 md:py-4 min-w-[140px] md:min-w-[200px]",children:f>=p.balls?"All Dropped":h?" Wait...":" Drop"})})]})});gb.displayName="PlinkoGame";function tM(s){switch(s){case"Plinko3Balls":return{balls:3,rows:5,slots:5};case"Plinko5Balls":return{balls:5,rows:7,slots:7};case"Plinko7Balls":return{balls:7,rows:9,slots:9};default:return{balls:3,rows:5,slots:5}}}const nM=(s,t)=>{switch(s.type){case"prize":return{background:"linear-gradient(135deg, #fbbf24 0%, #f59e0b 30%, #d97706 60%, #92400e 100%)",borderColor:"#fbbf24"};case"bomb":return{background:"linear-gradient(135deg, #dc2626 0%, #b91c1c 30%, #991b1b 60%, #7f1d1d 100%)",borderColor:"#dc2626"};case"empty":default:return{background:"linear-gradient(135deg, #d1d5db 0%, #9ca3af 40%, #6b7280 70%, #374151 100%)",borderColor:"#9ca3af"}}},aM=(s,t)=>{if(!t)return"?!";switch(s.type){case"prize":return"";case"bomb":return"";case"empty":default:return""}},sM=s=>{switch(s.type){case"prize":return"0 0 20px rgba(251, 191, 36, 1), 0 0 40px rgba(245, 158, 11, 0.9), 0 0 60px rgba(217, 119, 6, 0.7)";case"bomb":return"0 0 20px rgba(220, 38, 38, 1), 0 0 40px rgba(185, 28, 28, 0.9), 0 0 60px rgba(153, 27, 27, 0.7)";default:return"0 0 10px rgba(209, 213, 219, 0.8)"}},pb=({tile:s,isSelectedByPlayer:t,isFlipped:a,disabled:o,gameEnded:l,onTileClick:r,gameMode:d,allTilesRevealed:f=!1})=>{const[g,h]=D.useState(!1);D.useEffect(()=>{if(t&&a){const b=setTimeout(()=>{h(!0)},300);return()=>clearTimeout(b)}else h(!1)},[t,a]);const m=()=>{o||s.revealed||s.selected||l||r(s.index)},w=aM(s,a),x=sM(s),v=(b=>{if(!b)return"text-xl md:text-2xl";switch(d){case"Miner1v9":return"text-5xl md:text-6xl lg:text-7xl";case"Miner3v16":return"text-4xl md:text-5xl lg:text-6xl";case"Miner5v25":return"text-3xl md:text-4xl lg:text-5xl";default:return"text-4xl md:text-5xl lg:text-6xl"}})(a);return u.jsxs("div",{className:"relative w-full aspect-square",style:{perspective:"800px"},children:[u.jsxs("div",{className:`relative w-full h-full transition-all duration-300 ${o||l?"cursor-not-allowed":"cursor-pointer"}`,style:{transformStyle:"preserve-3d",transform:a?"rotateY(180deg)":"rotateY(0deg)",willChange:"transform"},onClick:m,children:[u.jsxs("div",{className:"absolute inset-0 rounded-lg border-2 border-orange-500/40 shadow-lg",style:{backfaceVisibility:"hidden",WebkitBackfaceVisibility:"hidden",background:"linear-gradient(135deg, rgba(220,38,38,0.3) 0%, rgba(153,69,255,0.3) 100%)"},children:[u.jsx("div",{className:"absolute inset-0 rounded-lg opacity-30",style:{backgroundImage:"repeating-linear-gradient(45deg, transparent, transparent 8px, rgba(255,255,255,0.1) 8px, rgba(255,255,255,0.1) 16px)"}}),u.jsx("div",{className:`absolute inset-0 flex items-center justify-center ${v} font-bold opacity-70`,style:{textShadow:"0 0 10px rgba(220, 38, 38, 0.8), 0 0 20px rgba(153, 69, 255, 0.6)"},children:w}),!o&&!l&&!a&&u.jsx("div",{className:"absolute inset-0 bg-orange-500/0 hover:bg-orange-500/25 transition-colors duration-200 rounded-lg"})]}),u.jsxs("div",{className:"absolute inset-0 rounded-lg border-2 shadow-lg",style:{backfaceVisibility:"hidden",WebkitBackfaceVisibility:"hidden",transform:"rotateY(180deg)",opacity:a?1:0,transition:"opacity 0.3s cubic-bezier(0.4, 0.0, 0.2, 1)",...nM(s)},children:[f&&!t&&a&&u.jsx("div",{className:"absolute inset-0 rounded-lg bg-black/60 z-10 transition-opacity duration-300",style:{pointerEvents:"none"}}),u.jsx("div",{className:"absolute inset-0 flex items-center justify-center overflow-hidden",children:u.jsx("div",{className:v,style:{textShadow:x,transformOrigin:"center center"},children:w})}),u.jsx("div",{className:"absolute inset-0 rounded-lg opacity-20",style:{background:"linear-gradient(135deg, rgba(255,255,255,0.3) 0%, transparent 50%, rgba(255,255,255,0.1) 100%)"}}),a&&s.type==="empty"&&u.jsx("div",{className:"absolute inset-0 rounded-lg opacity-30",style:{backgroundImage:"repeating-linear-gradient(45deg, transparent, transparent 10px, rgba(0,0,0,0.1) 10px, rgba(0,0,0,0.1) 20px)"}})]})]}),g&&u.jsx("div",{className:"absolute inset-0 rounded-lg border-4 border-sol-mint pointer-events-none z-10 transition-opacity duration-300 opacity-100"})]})};pb.displayName="MinerTileComponent";const xb=({gameMode:s,tiles:t,onTileClick:a,disabled:o=!1,playerSelections:l=[],gameEnded:r=!1,allTilesRevealed:d=!1})=>{const f=D.useCallback(x=>{o||t[x].selected||t[x].revealed||r||a(x)},[o,t,r,a]),g=()=>{switch(s){case"Miner1v9":return"grid-cols-3";case"Miner3v16":return"grid-cols-4";case"Miner5v25":return"grid-cols-5";default:return"grid-cols-3"}},h=D.useMemo(()=>new Set(l||[]),[l]),m=g(),w=D.useMemo(()=>t.every(x=>x.revealed),[t]);return u.jsx("div",{className:"w-full overflow-hidden",style:{maxWidth:"100vw"},children:u.jsx("div",{className:`grid ${m} gap-1.5 md:gap-2 p-2 mx-auto`,style:{width:"100%",maxWidth:"min(100%, 512px)",boxSizing:"border-box",overflow:"hidden"},children:t.map(x=>{const p=h.has(x.index),v=x.revealed,b=d||w;return u.jsx(pb,{tile:x,isSelectedByPlayer:p,isFlipped:v,disabled:o,gameEnded:r,onTileClick:f,gameMode:s,allTilesRevealed:b},x.index)})})})};xb.displayName="MinerGame";const iM=D.memo(xb,(s,t)=>{if(s.gameMode!==t.gameMode||s.disabled!==t.disabled||s.gameEnded!==t.gameEnded||s.currentPlayer!==t.currentPlayer||s.tiles.length!==t.tiles.length||s.playerSelections?.length!==t.playerSelections?.length)return!1;for(let a=0;a<s.tiles.length;a++){const o=s.tiles[a],l=t.tiles[a];if(o.index!==l.index||o.revealed!==l.revealed||o.selected!==l.selected||o.type!==l.type)return!1}if(s.playerSelections&&t.playerSelections){const a=[...s.playerSelections].sort(),o=[...t.playerSelections].sort();if(a.length!==o.length)return!1;for(let l=0;l<a.length;l++)if(a[l]!==o[l])return!1}return!0});function rM(s,t,a){const o=s-t-a,l=1,r=Math.floor(Math.random()*(o-l+1))+l;return console.log(`[determineResultClick] Result click determined: ${r} (range: 1 to ${o}, out of ${s} tiles, ${t} prizes, ${a} bombs)`),r}function oM(s,t,a,o,l){const r=s.map((v,b)=>({tile:v,idx:b})).filter(({tile:v,idx:b})=>!v.revealed&&b!==t).map(({idx:v})=>v),d=a-(l?1:0),f=o-(l?0:1);console.log(`[distributePrizesAndBombs] Distributing: ${d} prizes, ${f} bombs. Closed slots available: ${r.length}`);const g=[...r].sort(()=>Math.random()-.5),h=new Set,m=new Set,w=Math.min(d,g.length);for(let v=0;v<w;v++)h.add(g[v]);const x=g.length-w,p=Math.min(f,x);for(let v=w;v<w+p;v++)m.add(g[v]);return d+f>g.length?console.warn(`[distributePrizesAndBombs]  Not enough closed slots! Need ${d+f} items but only ${g.length} closed slots available. Assigning ${w} prizes and ${p} bombs. Missing: ${d+f-g.length} items.`):console.log(`[distributePrizesAndBombs]  All items distributed to closed slots: ${w} prizes, ${p} bombs. Remaining empty slots: ${g.length-w-p}`),l?h.add(t):m.add(t),console.log("[distributePrizesAndBombs] Prize indices:",Array.from(h)),console.log("[distributePrizesAndBombs] Bomb indices:",Array.from(m)),s.map(v=>v.index===t?{...v,type:l?"prize":"bomb",selected:!0,revealed:!0}:h.has(v.index)?{...v,type:"prize",revealed:!0}:m.has(v.index)?{...v,type:"bomb",revealed:!0}:v.revealed?v:{...v,type:"empty",revealed:!0})}function ay(s,t,a,o,l,r){const d=s.map((w,x)=>({tile:w,index:x})).filter(({tile:w})=>!w.revealed);if(d.length===0)return console.log("[autoOpenTiles] No unopened tiles, completing immediately"),r(),()=>{};const f=[...d].sort(()=>Math.random()-.5);let g=a;const h=[];console.log(`[autoOpenTiles] Starting auto-open: ${d.length} unopened tiles, result on click ${t}, current click ${a}`);let m=!1;return f.forEach(({index:w},x)=>{g++;const p=setTimeout(()=>{if(m){console.log(`[autoOpenTiles] Result already found, skipping tile ${w}`);return}if(console.log(`[autoOpenTiles] Auto-opening tile: index=${w}, clickNumber=${g}`),g===t){console.log(`[autoOpenTiles]  Result found on click ${g}!`),m=!0;for(let v=x+1;v<f.length;v++)h[v]&&clearTimeout(h[v]);l(w,g),setTimeout(()=>{r()},100)}else l(w,g)},x*500);h.push(p)}),()=>{h.forEach(w=>clearTimeout(w))}}function lM(s,t,a,o,l,r){const d=a==="Duo"||a==="Team";if(console.log(`[calculateMinerGameResult] Calculating result for ${a} match`),console.log("[calculateMinerGameResult] Players:",s.map(f=>({username:f.username,willWin:f.willWin}))),d){const f=a==="Duo"?2:5,g=s.slice(0,f),h=s.slice(f,f*2),m=g.filter(R=>R.willWin===!0).length,w=h.filter(R=>R.willWin===!0).length,x=m>=w,p=x?"Team A":"Team B";console.log(`[calculateMinerGameResult] Team A: ${m} Alive, Team B: ${w} Alive, Winner: ${p}${m===w?" (tie - Team A wins)":""}`);let v=!1;if(l&&r){const R=r.participants?.find(j=>j.pubkey===l);R&&(v=R.isWinner??!1)}else{const R=s.find(j=>j.username===o||j.pubkey===l);R&&(v=g.some(B=>B.username===R.username||B.pubkey===R.pubkey)?x:!x)}const b=r?.participants?.length||s.length,N=t*b,_=v?N:0,A={};s.forEach(R=>{A[R.username]=R.willWin===!0?1:0});const C={"Team A":m,"Team B":w},k={};return s.forEach(R=>{k[R.username]=R.willWin===!0}),console.log("[calculateMinerGameResult] Team result:",{winner:p,playerResults:k,teamScores:C,winAmount:_}),{winner:p,scores:A,winAmount:_,duration:0,isTeamBattle:!0,teamScores:C,isCurrentPlayerWinner:v,gameType:yt.Miner,playerResults:k}}else{const f=s.filter(b=>b.willWin===!0),g=s.find(b=>b.username===o||b.pubkey===l);let h;s.length!==2?h=f[0]||s[0]:f.length===1?h=f[0]:f.length===2?(h=g||f[0],console.log(`[calculateMinerGameResult] Both players have willWin=true, current player wins: ${h.username}`)):(h=s.find(N=>N.username!==o&&N.pubkey!==l)||s[0],console.log(`[calculateMinerGameResult] No players have willWin=true, opponent wins: ${h.username}`)),h||(console.error("[calculateMinerGameResult] ERROR: No winner determined! Using first player as fallback."),h=s[0]||{username:"Unknown",pubkey:""});let m=!1;if(l&&r){const b=r.participants?.find(N=>N.pubkey===l);b&&(m=b.isWinner??!1)}else m=s.find(N=>N.username===o||N.pubkey===l)?.willWin===!0;const w=t*2,x=m?w:0,p={};s.forEach(b=>{p[b.username]=b.willWin===!0?1:0});const v={};return s.forEach(b=>{const N=b.willWin===!0;v[b.username]=N,console.log(`[calculateMinerGameResult] Player ${b.username}: willWin=${b.willWin}, playerResults=${N}`),(b.willWin===void 0||b.willWin===null)&&console.warn(`[calculateMinerGameResult] Player ${b.username} has undefined willWin, defaulting to false`)}),console.log("[calculateMinerGameResult] Solo result:",{winner:h.username,playerResults:v,scores:p,winAmount:x}),{winner:h.username,scores:p,winAmount:x,duration:0,isTeamBattle:!1,isCurrentPlayerWinner:m,gameType:yt.Miner,playerResults:v}}}const hm=({gameMode:s,matchType:t="Solo",stakeSol:a,players:o,currentPlayer:l="You",currentPlayerPubkey:r,matchFromBackend:d,timeLimit:f=20,onGameComplete:g,isDemoMode:h=!1})=>{const m=$i(s),w=m.tileCount||9,x=t==="Solo"?2:t==="Duo"?4:10,p=D.useMemo(()=>r?o.find(fe=>fe.pubkey===r):o.find(fe=>fe.username===l),[o,r,l]),v=D.useMemo(()=>{switch(s){case"Miner1v9":return{prizes:1,bombs:1,total:2};case"Miner3v16":return{prizes:3,bombs:3,total:6};case"Miner5v25":return{prizes:5,bombs:5,total:10};default:return{prizes:1,bombs:1,total:2}}},[s]),b=D.useRef(null),N=D.useRef(!1),[_,A]=D.useState({status:"waiting",timeRemaining:f,tiles:[],players:o.map(fe=>({id:fe.id||fe.username,username:fe.username,pubkey:fe.pubkey,targetScore:fe.targetScore,currentScore:fe.currentScore||0,selections:[],isReady:fe.isReady,isScoreRevealed:!1,willWin:fe.willWin,openedTileCount:0,isAlive:!0})),currentPlayerTurn:l,winner:void 0}),[C,k]=D.useState([]),[R,j]=D.useState(!1),B=D.useRef(!1),[M,I]=D.useState(new Map),L=D.useRef(new Map),P=D.useRef(null),U=D.useRef(null),[q,H]=D.useState(f),V=D.useRef(null),$=D.useRef(!1),Z=D.useRef(!1),Q=D.useRef(null),F=D.useRef(!1),T=h?!1:_.players.length<x,O=_.status==="loading",[G,W]=D.useState(null),Y=D.useCallback(fe=>{const J=_.players.find(le=>le.username===fe);return r&&J?.pubkey===r||!r&&fe===l?!1:!J?.isScoreRevealed},[l,r,_.players]);D.useEffect(()=>{if(_.status!=="waiting"){console.log(`[MinerGameBoard] Status is ${_.status}, not initializing (already started or loading)`);return}if(T||O){console.log(`[MinerGameBoard] Skipping init: isWaitingForPlayers=${T}, isWaitingForScores=${O}`);return}if(Z.current){console.log("[MinerGameBoard] Initialization already started (ref check), skipping");return}if(!h&&_.players.length<x){console.log(`[MinerGameBoard] Not enough players: ${_.players.length} < ${x}, not initializing`);return}if(Z.current=!0,F.current=!0,console.log("[MinerGameBoard]  Setting initializationStartedRef to true - starting initialization"),p&&!b.current){const{prizes:J,bombs:le}=v,je=rM(w,J,le);b.current=je,console.log(`[MinerGameBoard] Current player ${p.username}: willWin=${p.willWin}, will find result on ${je}-th click`)}console.log("========================================"),console.log("[MinerGameBoard]  GAME START - Expected Results:"),console.log("[MinerGameBoard] Initializing game with players:"),_.players.forEach(J=>{const le=J.willWin===!0?" WILL WIN (Alive)":" WILL LOSE (Bombed)";console.log(`  - ${J.username}: willWin=${J.willWin} ${le}, pubkey=${J.pubkey}`)}),console.log("[MinerGameBoard] Expected playerResults in modal:");const fe={};return _.players.forEach(J=>{fe[J.username]=J.willWin===!0}),console.log("[MinerGameBoard] Expected:",fe),console.log("========================================"),A(J=>({...J,status:"loading"})),Q.current&&clearTimeout(Q.current),Q.current=setTimeout(()=>{Q.current=null;const J=Array.from({length:w},(Ne,Ce)=>({index:Ce,type:"empty",selected:!1,revealed:!1}));N.current=!1,k(J);const le=new Map,je=r?_.players.filter(Ne=>Ne.pubkey!==r):_.players.filter(Ne=>Ne.username!==l);console.log(`[MinerGameBoard] Setting up timers for ${je.length} AI players`),je.forEach(Ne=>{console.log(`  - AI player ${Ne.username}: willWin=${Ne.willWin}`);const Ce=Math.random()*6e3+12e3,Ue=Ne.username,$e=Ne.willWin,Oe=setTimeout(()=>{console.log(`[MinerGameBoard] Revealing result for AI player: ${Ue}, willWin=${$e}`),A(Be=>{const ke=Be.players.find(it=>it.username===Ue);if(console.log("[MinerGameBoard] Player before update:",ke?{username:ke.username,willWin:ke.willWin,isScoreRevealed:ke.isScoreRevealed}:"NOT FOUND"),ke?.isScoreRevealed)return console.log(`[MinerGameBoard] Player ${Ue} already revealed, skipping`),Be;const lt=Be.players.map(it=>{if(it.username===Ue){const tt={...it,isScoreRevealed:!0,isAlive:$e===!0,willWin:$e};return console.log("[MinerGameBoard] Player after update:",{username:tt.username,willWin:tt.willWin,isScoreRevealed:tt.isScoreRevealed,isAlive:tt.isAlive}),tt}return it});return console.log("[MinerGameBoard] State update - new players:",lt.map(it=>({username:it.username,isScoreRevealed:it.isScoreRevealed,willWin:it.willWin}))),{...Be,players:lt}})},Ce);le.set(Ne.username,Oe)}),I(le),L.current=le,H(f),A(Ne=>({...Ne,status:"playing"}))},2e3),()=>{if(F.current||Z.current){console.log(`[MinerGameBoard] Cleanup: initialization started (refs: started=${Z.current}, completed=${F.current}), KEEPING timeout`);return}Q.current&&(console.log("[MinerGameBoard] Cleanup: initialization not started, clearing timeout"),clearTimeout(Q.current),Q.current=null,Z.current=!1)}},[T,O,_.status,_.players.length,x,h]);const ee=D.useRef(null),de=D.useCallback((fe,J=!1)=>{if(_.status!=="playing"||!J&&R)return;const le=C[fe];if(le?.selected||le?.revealed)return;const je=r?_.players.find(Oe=>Oe.pubkey===r):_.players.find(Oe=>Oe.username===l);if(!je)return;const Ne=(je.openedTileCount||0)+1,Ce=b.current;let Ue="empty",$e=!1;Ce!==null&&Ne===Ce?(je.willWin===!0?Ue="prize":Ue="bomb",$e=!0):(Ue="empty",$e=!1),Ce===null&&console.warn(`[MinerGameBoard]  resultClick is NULL! currentPlayerResultClickRef.current=${b.current}`),console.log(`[MinerGameBoard] Tile clicked: index=${fe}, clickNumber=${Ne}, resultClick=${Ce}, tileType=${Ue}, shouldEndGame=${$e}`),k(Oe=>Oe[fe]?.selected||Oe[fe]?.revealed?Oe:Oe.map(ke=>ke.index===fe?{...ke,type:Ue,selected:!0,revealed:!0}:ke)),A(Oe=>{const Be=Oe.players.map(ke=>(r?ke.pubkey===r:ke.username===l)?{...ke,openedTileCount:Ne,isAlive:$e?ke.willWin===!0:ke.isAlive,isScoreRevealed:$e?!0:ke.isScoreRevealed,selections:[...ke.selections,fe]}:ke);return{...Oe,players:Be}}),$e&&(console.log(`[MinerGameBoard]  Player found result on ${Ne}-th click! Type: ${Ue}`),j(!0),V.current&&(console.log("[MinerGameBoard] Stopping auto-open - player found result manually"),V.current(),V.current=null,$.current=!1),q<=0?(console.log("[MinerGameBoard] Timer already at 0, changing status to revealing immediately"),A(Oe=>({...Oe,status:"revealing"}))):console.log(`[MinerGameBoard] Timer still running (${q}s), will change status when timer reaches 0`),k(Oe=>{const{prizes:Be,bombs:ke}=v,lt=je.willWin===!0;return oM(Oe,fe,Be,ke,lt)}),N.current=!0)},[_.status,R,l,r,_.players,C,v]);ve.useLayoutEffect(()=>{ee.current=de},[de]),D.useEffect(()=>{if(_.status!=="playing"){P.current&&(console.log(`[MinerGameBoard] Status is ${_.status}, clearing timer`),clearInterval(P.current),P.current=null);return}if(P.current){console.log(`[MinerGameBoard] Timer interval already exists (ID: ${P.current}), skipping recreation`);return}console.log(`[MinerGameBoard] Starting timer, status=${_.status}, initial timeRemaining=${q}`);const fe=setInterval(()=>{H(J=>{const le=J>0?J-1:0;if(console.log(`[MinerGameBoard]  Timer tick: ${J} -> ${le}`),le<=0){console.log("[MinerGameBoard]  Timer reached 0, clearing interval");const je=P.current;return je&&(clearInterval(je),P.current=null),0}return le})},1e3);return P.current=fe,U.current=fe,console.log(`[MinerGameBoard]  Timer interval created (ID: ${fe}), will tick in 1 second`),()=>{const J=U.current,le=P.current;console.log(`[MinerGameBoard] Cleanup timer - created here: ${J}, current: ${le}`),J&&(console.log(`[MinerGameBoard] Clearing interval ${J} (created in this call)`),clearInterval(J),P.current===J&&(P.current=null)),U.current=null}},[_.status]),D.useEffect(()=>{if(q<=0&&_.status==="playing"){if(console.log(`[MinerGameBoard]  Timer reached 0, status=${_.status}`),$.current){console.log("[MinerGameBoard] Auto-open already started, skipping (prevent double in StrictMode)");return}if(R)console.log("[MinerGameBoard] Player already found result, changing status to revealing"),A(fe=>({...fe,status:"revealing"}));else{$.current=!0,console.log(`[MinerGameBoard]  Timer reached 0, starting auto-open for player: ${l}`),console.log('[MinerGameBoard]  Status will remain "playing" until result is found');const fe=r?_.players.find(J=>J.pubkey===r):_.players.find(J=>J.username===l);if(fe&&b.current!==null){if(!ee.current){console.warn("[MinerGameBoard] handleTileClickRef not set yet, waiting..."),setTimeout(()=>{if(ee.current&&q<=0&&_.status==="playing"){const Ce=b.current,Ue=fe.openedTileCount||0,$e=fe.willWin===!0;if(Ce===null){console.warn("[MinerGameBoard] retryResultClick is null, cannot auto-open");return}V.current&&V.current();const Oe=ay(C,Ce,Ue,$e,(Be,ke)=>{console.log(`[MinerGameBoard] Auto-opening tile: index=${Be}, clickNumber=${ke}`),ee.current?ee.current(Be,!0):console.error("[MinerGameBoard] handleTileClickRef still not set during auto-open!")},()=>{console.log("[MinerGameBoard] Auto-open completed, waiting before changing status to revealing"),setTimeout(()=>{A(Be=>Be.status==="playing"?{...Be,status:"revealing"}:Be)},500)});V.current=Oe}},100);return}const J=b.current,le=fe.openedTileCount||0,je=fe.willWin===!0;V.current&&V.current(),console.log(`[MinerGameBoard] Starting auto-open: resultClick=${J}, currentClickCount=${le}, playerWillWin=${je}`);const Ne=ay(C,J,le,je,(Ce,Ue)=>{if(R){console.log("[MinerGameBoard] Player already found result, stopping auto-open"),V.current&&(V.current(),V.current=null,$.current=!1);return}console.log(`[MinerGameBoard] Auto-opening tile: index=${Ce}, clickNumber=${Ue}`),ee.current?ee.current(Ce,!0):console.error("[MinerGameBoard] handleTileClickRef not set during auto-open! This should not happen.")},()=>{console.log("[MinerGameBoard] Auto-open completed, waiting before changing status to revealing"),setTimeout(()=>{A(Ce=>Ce.status==="playing"?{...Ce,status:"revealing"}:Ce)},500),$.current=!1});V.current=Ne}else console.log("[MinerGameBoard] Auto-open fallback: missing currentPlayerData or resultClick"),$.current=!1,A(J=>({...J,status:"revealing"}))}}(q>0||_.status!=="playing")&&($.current=!1)},[q,_.status,R,l,r,_.players,C,v]),D.useEffect(()=>()=>{console.log(`[MinerGameBoard] Component unmounting - status: ${_.status}`),Z.current=!1,F.current=!1,B.current=!1,P.current&&(clearInterval(P.current),P.current=null),L.current.forEach(fe=>clearTimeout(fe)),V.current&&(V.current(),V.current=null),$.current=!1,Q.current&&(clearTimeout(Q.current),Q.current=null),b.current=null,N.current=!1},[]);const re=D.useRef(g);D.useEffect(()=>{re.current=g},[g]),D.useEffect(()=>{if(_.status!=="revealing"||B.current)return;console.log("[MinerGameBoard] Processing game completion, status=revealing"),B.current=!0,L.current.forEach(le=>clearTimeout(le)),I(new Map),L.current=new Map,V.current&&(V.current(),V.current=null),k(le=>le.map(Ne=>Ne.revealed?Ne:{...Ne,revealed:!0})),console.log("[MinerGameBoard] Calculating result when status=revealing"),console.log("[MinerGameBoard] Players:",_.players.map(le=>({username:le.username,willWin:le.willWin,isAlive:le.isAlive,isScoreRevealed:le.isScoreRevealed})));const fe=lM(_.players,a,t,l,r,d);console.log("[MinerGameBoard] Calculated result:",fe),console.log("[MinerGameBoard] Result playerResults:",fe.playerResults),console.log("[MinerGameBoard] Result scores:",fe.scores),console.log("[MinerGameBoard] Result gameType:",fe.gameType),W(fe);const J={...fe,gameType:fe.gameType||yt.Miner,playerResults:fe.playerResults||{}};console.log("[MinerGameBoard] Result to pass:",J),console.log("[MinerGameBoard] Result to pass gameType:",J.gameType),console.log("[MinerGameBoard] Result to pass playerResults:",J.playerResults),console.log("[MinerGameBoard] Result to pass keys:",Object.keys(J)),setTimeout(()=>{re.current&&(console.log("[MinerGameBoard] Calling onGameComplete with result:",J),re.current(J))},0)},[_.status,_.players,a,t,l,r,d]),D.useEffect(()=>()=>{L.current.forEach(fe=>clearTimeout(fe)),V.current&&V.current(),P.current&&clearInterval(P.current)},[]);const ie=D.useMemo(()=>t==="Solo"?!1:!_.players.some(J=>J.isScoreRevealed===!0),[t,_.players]);if(T)return u.jsx(cm,{players:_.players,maxPlayers:x,timeRemaining:q,onCancel:()=>A(fe=>({...fe,status:"finished"}))});if(O)return u.jsxs("div",{className:"text-center py-12",children:[u.jsx("div",{className:"text-6xl mb-4",style:{animation:"spin 1s linear infinite"},children:""}),u.jsx("h2",{className:"text-2xl font-display font-bold text-sol-purple mb-2",children:"Loading Battle..."}),u.jsx("p",{className:"text-txt-muted",children:"Preparing your match with epic rewards!"})]});const be=r?_.players.find(fe=>fe.pubkey===r):_.players.find(fe=>fe.username===l);return u.jsx(u.Fragment,{children:u.jsx(um,{gameName:m.name,stakeSol:a,matchType:t,timeRemaining:q,players:_.players,currentPlayer:l,currentPlayerPubkey:r,gameStatus:_.status,gameResult:G,shouldHideScores:Y,hideTeamScores:ie,gameType:yt.Miner,children:l!==""||h?u.jsx(iM,{gameMode:s,tiles:C,onTileClick:de,disabled:_.status!=="playing"||R,currentPlayer:l,playerSelections:be?.selections||[],gameEnded:R}):u.jsx("div",{className:"text-center py-12",children:u.jsxs("div",{className:"glass-card p-8 max-w-md mx-auto",children:[u.jsx("h3",{className:"text-2xl font-bold text-sol-purple mb-4",children:" Spectator Mode"}),u.jsx("p",{className:"text-txt-muted",children:"You are watching this match as a spectator. The game board is hidden, but you can see all player scores and team progress above."})]})})})})},yb=({isOpen:s,result:t,onClose:a,onPlayAgain:o,onViewLeaderboard:l,onBackToLobby:r,isDemoMode:d=!1})=>{const f=D.useMemo(()=>!t||!t.playerResults?!1:(t.playerResults.You??t.playerResults[t.winner]??!1)===!0,[t]);if(D.useEffect(()=>(s?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[s]),D.useEffect(()=>{s&&(console.log("[MinerResultModal] Modal opened, result=",t),t&&t.playerResults&&(console.log("[MinerResultModal] playerResults=",t.playerResults),console.log("[MinerResultModal] isWinner=",f)))},[s,t,f]),!t||!t.playerResults||Object.keys(t.playerResults).length===0)return console.log("[MinerResultModal] Returning null - result=",t),console.log("[MinerResultModal] playerResults=",t?.playerResults),console.log("[MinerResultModal] playerResults keys=",t?.playerResults?Object.keys(t.playerResults):"none"),null;const g=Object.entries(t.playerResults).sort(([,h],[,m])=>(m?1:0)-(h?1:0));return u.jsx($n,{children:s&&u.jsxs(u.Fragment,{children:[u.jsx(ye.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 backdrop-blur-md",style:{zIndex:9999,top:0},onClick:a}),u.jsx(ye.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{type:"spring",damping:25,stiffness:200},className:"fixed inset-0 flex items-center justify-center p-4 pointer-events-none",style:{zIndex:1e4},children:u.jsx(Le,{className:"w-full max-w-md mx-auto pointer-events-auto",children:u.jsxs(Zi,{className:"p-6",children:[u.jsxs("div",{className:"text-center mb-4",children:[u.jsx(ye.div,{className:"text-6xl mb-4",initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",stiffness:200},children:f?"":""}),u.jsx(ye.h2,{className:`text-3xl font-display font-bold mb-2 ${f?"text-sol-mint":"text-red-500"}`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:f?"Alive!":"Bombed!"}),u.jsx(ye.p,{className:"text-txt-muted",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:f?"Congratulations! You found the prize!":"Better luck next time!"})]}),f&&u.jsx(ye.div,{className:"text-center mb-4 p-3 bg-gradient-to-r from-sol-purple/10 to-sol-mint/10 rounded-xl border border-sol-purple/20",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.5},children:u.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[u.jsx(Tc,{className:"w-6 h-6 text-sol-mint"}),u.jsx("span",{className:"text-txt-muted",children:"You won"}),u.jsx("span",{className:"text-xl text-sol-mint",children:Number(t.winAmount).toLocaleString(void 0,{minimumFractionDigits:t.winAmount<1?1:0,maximumFractionDigits:3})}),u.jsx("span",{className:"text-xl text-txt-muted",children:"SOL"})]})}),u.jsxs(ye.div,{className:"mb-4",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},children:[u.jsxs("h3",{className:"text-lg font-semibold text-txt-base mb-3 flex items-center",children:[u.jsx(Vs,{className:"w-5 h-5 mr-2 text-sol-purple"}),t.isTeamBattle?"Team Results":"Results"]}),t.isTeamBattle&&t.teamScores?u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-sol-purple/10 border border-sol-purple/20",children:[u.jsx("span",{className:"font-medium text-txt-base",children:"Team A"}),u.jsx("span",{className:"text-lg font-bold text-sol-mint",children:t.teamScores["Team A"]||0})]}),u.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-sol-mint/10 border border-sol-mint/20",children:[u.jsx("span",{className:"font-medium text-txt-base",children:"Team B"}),u.jsx("span",{className:"text-lg font-bold text-sol-mint",children:t.teamScores["Team B"]||0})]})]}):u.jsx("div",{className:"space-y-2",children:g.map(([h,m],w)=>{const x=m?"Alive":"Bombed";return u.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg ${h==="You"?"bg-sol-purple/10 border border-sol-purple/20":"bg-white/5"}`,children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("span",{className:"text-lg",children:w===0?"":w===1?"":w===2?"":""}),u.jsx("span",{className:"font-medium text-txt-base",children:h})]}),u.jsx("span",{className:`text-lg font-bold ${x==="Alive"?"text-sol-mint":"text-red-500"}`,children:x})]},h)})})]}),u.jsx(ye.div,{className:"space-y-3",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},children:d?u.jsxs(u.Fragment,{children:[u.jsx(Se,{variant:"neon",onClick:o,className:"w-full",children:"Play Again"}),u.jsx(Se,{variant:"glass",onClick:a,className:"w-full",children:"Close"})]}):u.jsxs(u.Fragment,{children:[u.jsx(Se,{variant:"neon",onClick:o,className:"w-full",children:"Back to Arena"}),u.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[u.jsx(Se,{variant:"glass",onClick:l,className:"w-full",children:"Leaderboard"}),u.jsx(Se,{variant:"ghost",onClick:r,className:"w-full",children:"Stats"})]})]})})]})})})]})})},cM=["CryptoKing","SolanaMaster","BlockchainPro","DeFiWarrior","NFTCollector","Web3Ninja","CryptoQueen","DiamondHands","MoonWalker","HodlHero","CryptoWhale","BlockchainBeast","SolanaSniper","DeFiDragon","CryptoEagle","Web3Wizard"];function sy(s,t){const a=Vi(t);let o=0;const l=[],r=Math.floor(a.length/2);for(let d=0;d<a.length;d++){const f=Math.abs(d-r),g=a.length-f;for(let h=0;h<g;h++)l.push(d)}for(let d=0;d<s;d++){const f=Math.floor(Math.random()*l.length),g=l[f];o+=a[g]}return o}const bf=(s,t="You",a)=>{const o=[],l=a?.startsWith("Plinko"),r=a?.startsWith("Miner"),d=a?.startsWith("GoldBars");if(r){const h=Math.random()>.3;o.push({id:"current-user",username:t,targetScore:0,currentScore:0,selections:[],isReady:!0,willWin:h,openedTileCount:0,isAlive:!0}),o.__currentPlayerWillWin=h}else{let h;if(l)h=sy(a==="Plinko3Balls"?3:a==="Plinko5Balls"?5:7,a==="Plinko3Balls"?5:a==="Plinko5Balls"?7:9);else if(d)if(a){const w=$i(a).goldBars||8;h=Math.floor(Math.random()*(w+1))}else h=Math.floor(Math.random()*9);else h=Math.floor(Math.random()*400)+400;o.push({id:"current-user",username:t,targetScore:h,currentScore:0,selections:[],isReady:!0})}const f=s==="Solo"?1:s==="Duo"?3:9,g=[...cM].sort(()=>Math.random()-.5);if(r){const h=o.__currentPlayerWillWin??!0;let m=h?1:0,w=0;s==="Solo"?h?(m=1,w=0):(m=0,w=1):s==="Duo"?h?(m=2,w=Math.random()>.7?1:0):(m=Math.random()>.7?1:0,w=2):s==="Team"&&(h?(m=1+(2+Math.floor(Math.random()*3)),w=Math.floor(Math.random()*3)):(m=Math.floor(Math.random()*3),w=3+Math.floor(Math.random()*3)));let x=0,p=0;for(let v=0;v<f;v++){const b=g[v%g.length];let N;s==="Solo"?N=!h:s==="Duo"?v===0?(N=h?!0:x<m,x++):(N=p<w,p++):v<4?(N=x<m-(h?1:0),x++):(N=p<w,p++),o.push({id:`ai-player-${v}`,username:b,targetScore:0,currentScore:0,selections:[],isReady:!0,willWin:N,openedTileCount:0,isAlive:!0})}delete o.__currentPlayerWillWin}else for(let h=0;h<f;h++){const m=g[h%g.length];let w;if(l)w=sy(a==="Plinko3Balls"?3:a==="Plinko5Balls"?5:7,a==="Plinko3Balls"?5:a==="Plinko5Balls"?7:9);else if(d)if(a){const p=$i(a).goldBars||8;w=Math.floor(Math.random()*(p+1))}else w=Math.floor(Math.random()*9);else{const x=o[0]?.targetScore||600,p=.8+Math.random()*.4;w=Math.floor(x*p)}o.push({id:`ai-player-${h}`,username:m,targetScore:w,currentScore:0,selections:[],isReady:!0})}return o},uM=(s,t)=>{let a;switch(s){case"PickThreeFromNine":a=9;break;case"PickFiveFromSixteen":a=16;break;case"PickOneFromThree":a=3;break;default:a=9}const o=[],l=s==="PickThreeFromNine"?3:s==="PickFiveFromSixteen"?5:1,r=[];for(let f=0;f<l;f++)if(f===0)l===1?r.push(Math.floor(t*1.1)):r.push(Math.floor(t/l)+Math.floor(Math.random()*200));else{const g=t-r.reduce((w,x)=>w+x,0),h=Math.floor(g/(l-f)),m=Math.floor(h*.5);r.push(Math.max(150,h+Math.floor(Math.random()*m*2)-m))}for(let f=l;f<a;f++)r.push(Math.floor(Math.random()*400)+100);const d=r.sort(()=>Math.random()-.5);for(let f=0;f<a;f++)o.push({index:f,value:d[f],selected:!1,revealed:!1,isBonus:d[f]>600&&Math.random()<.1});return o},dM=(s,t,a)=>{let o;switch(s){case"PickThreeFromNine":o=9;break;case"PickFiveFromSixteen":o=16;break;case"PickOneFromThree":o=3;break;default:o=9}const l=p3(t,a),r=Array.from({length:o},(g,h)=>h).sort(()=>Math.random()-.5).slice(0,a),d=[];let f=0;for(let g=0;g<o;g++){let h;if(r.includes(g))h=l[f++];else{const m=t/a,w=Math.max(50,Math.floor(m*.3)),x=Math.min(800,Math.floor(m*1.3));h=Math.floor(Math.random()*(x-w))+w;let p=0;for(;p<10&&l.some(v=>Math.abs(h-v)/v<.05);)h=Math.floor(Math.random()*(x-w))+w,p++}d.push({index:g,value:h,selected:!1,revealed:!1,isBonus:h>500&&Math.random()<.1})}return d},vb=({gameType:s=yt.PickHigher,gameMode:t,matchMode:a=lm.Team,teamSize:o,stakeSol:l,players:r,currentPlayer:d="You",currentPlayerPubkey:f,matchFromBackend:g,timeLimit:h=20,onGameComplete:m,isDemoMode:w=!1})=>{const x=o||"Solo",p=s===yt.Plinko||t.startsWith("Plinko"),v=s===yt.Miner||t.startsWith("Miner"),[b,N]=D.useState({status:"waiting",timeRemaining:h,tiles:[],players:r.map(W=>({id:W.username,username:W.username,pubkey:W.pubkey,targetScore:W.targetScore,currentScore:W.currentScore||0,selections:[],isReady:W.isReady,isScoreRevealed:f?W.pubkey===f:W.username===d,willWin:W.willWin,isAlive:W.isAlive,openedTileCount:W.openedTileCount})),currentPlayerTurn:d,winner:void 0}),[_,A]=D.useState(new Map),C=D.useRef(!1),k=D.useRef(!1),R=D.useRef(null),[j,B]=D.useState([]),[M,I]=D.useState(0),L=$i(t),P=x==="Solo"||x==="Duo"?2:5,U=w?!1:b.players.length<P,q=b.status==="loading",[H,V]=D.useState(null),$=D.useCallback(W=>{const Y=b.players.find(de=>de.username===W);if(f&&Y?.pubkey===f||!f&&W===d)return!1;const ee=!Y?.isScoreRevealed;return console.log(`shouldHideScores(${W}): isScoreRevealed=${Y?.isScoreRevealed}, shouldHide=${ee}`),ee},[d,f,b]),Z=(x==="Duo"||x==="Team")&&b.status==="playing",Q=D.useRef(new Set),F=D.useCallback(W=>{if(Q.current.has(W)){console.log(`showOpponentScore: ${W} already revealed, skipping`);return}console.log(`showOpponentScore called for: ${W}`),Q.current.add(W),N(Y=>{if(Y.players.find(re=>re.username===W)?.isScoreRevealed)return console.log(`showOpponentScore: ${W} already revealed in state, skipping`),Y;const de=Y.players.map(re=>re.username===W?(console.log(`Setting isScoreRevealed: true and currentScore = targetScore for ${W}`),{...re,isScoreRevealed:!0,currentScore:re.targetScore}):re);return{...Y,players:de}})},[]);D.useEffect(()=>{U||q||b.status==="waiting"&&(w||b.players.length>=P)&&(N(W=>({...W,status:"loading"})),setTimeout(()=>{let W,Y;if(f?(W=b.players.find(ee=>ee.pubkey===f),Y=b.players.filter(ee=>ee.pubkey!==f),console.log("[Real Game] Current player:",W?.username,f),console.log("[Real Game] AI opponents:",Y.map(ee=>ee.username))):(W=b.players.find(ee=>ee.username===d),Y=b.players.filter(ee=>ee.username!==d)),p){const ee=W?.targetScore||1e3,de=L.maxSelections,re=L.slots||6,ie=R3(ee,de,re);B(ie),I(0),N(be=>({...be,status:"playing",tiles:[],timeRemaining:h}))}else{const ee=w?(()=>{const de=b.players.map(J=>J.targetScore),re=Math.max(...de),ie=Math.floor(re*1.05),be=W?.currentScore||0,fe=Math.max(0,ie-be);return uM(t,fe)})():dM(t,W?.targetScore||1e3,L.maxSelections);N(de=>({...de,status:"playing",tiles:ee,timeRemaining:h}))}if(Q.current.clear(),!v){const ee=new Map;console.log(`Setting up timers for ${Y.length} AI players in ${x} mode`),Y.forEach(de=>{const re=Math.random()*6e3+12e3,ie=setTimeout(()=>{console.log(`Revealing score for AI player: ${de.username}`),F(de.username)},re);ee.set(de.username,ie)}),A(ee)}},2e3))},[U,q,b.status,b.players.length,b.players,P,t,h,d,f,F,x,w,g,L,p,v]);const T=D.useCallback(W=>{if(console.log(" handleBallDrop called! Slot:",W,"Status:",b.status),b.status!=="playing"&&b.status!=="revealing"){console.log(" BLOCKED by status:",b.status);return}const Y=f?b.players.find(be=>be.pubkey===f):b.players.find(be=>be.username===d);if(!Y){console.log(" BLOCKED: current player not found");return}if(console.log(" Current player:",d,"Selections:",Y.selections.length,"/",L.maxSelections),b.status==="playing"&&Y.selections.length>=L.maxSelections){console.log(" BLOCKED: max selections in playing mode");return}const ee=L.slots||6,de=Vi(ee),re=Math.max(0,Math.min(ee-1,W)),ie=de[re];W!==re&&console.warn(` Slot index clamped: ${W}  ${re} (slotCount: ${ee}, slotValues length: ${de.length})`),console.log(` Ball landed in slot ${re} (was ${W}), value: ${ie}, slotCount: ${ee}, slotValues: [${de.join(", ")}]`),N(be=>{const fe=be.players.map(le=>{if(f?le.pubkey===f:le.username===d){const Ne=[...le.selections,W],Ce=le.currentScore+ie;return console.log(" Player update:",le.username,"Score:",le.currentScore,"",Ce,"Selections:",le.selections.length,"",Ne.length),{...le,selections:Ne,currentScore:Ce}}return le}),J=f?fe.find(le=>le.pubkey===f):fe.find(le=>le.username===d);return J&&J.selections.length>=L.maxSelections,I(le=>le+1),{...be,players:fe}})},[b.status,d,f,b.players,L]),O=D.useCallback(W=>{if(b.status!=="playing")return;const Y=f?b.players.find(ee=>ee.pubkey===f):b.players.find(ee=>ee.username===d);Y&&(Y.selections.length>=L.maxSelections||N(ee=>{let de=ee.tiles[W]?.value||0;const re=f?ee.players.find(J=>J.pubkey===f):ee.players.find(J=>J.username===d);if(re&&!w&&re.targetScore>0){const J=re.selections.length+1,le=L.maxSelections-J;if(le===0)de=re.targetScore-re.currentScore;else{const je=re.targetScore-re.currentScore,Ne=Math.floor(je/(le+1)),Ce=Math.floor(Ne*.3);de=Ne+Math.floor(Math.random()*Ce*2)-Ce,de=Math.max(1,de)}}const ie=ee.players.map(J=>{if(f?J.pubkey===f:J.username===d){const je=[...J.selections,W];return{...J,selections:je,currentScore:J.currentScore+de}}return J}),be=ee.tiles.map((J,le)=>le===W?{...J,selected:!0,revealed:!0,value:de}:J),fe=f?ie.find(J=>J.pubkey===f):ie.find(J=>J.username===d);if(fe&&fe.selections.length>=L.maxSelections){const J=be.map(le=>({...le,revealed:!0}));return{...ee,tiles:J,players:ie}}return{...ee,tiles:be,players:ie}}))},[b.status,d,f,b.players,L.maxSelections,w]),G=D.useCallback(W=>{if(k.current)return;k.current=!0;const Y=b.players.find(be=>be.username===W);if(!Y){k.current=!1;return}const ee=L.maxSelections-Y.selections.length;if(ee<=0){k.current=!1;return}const ie=[...b.tiles.map((be,fe)=>({tile:be,index:fe})).filter(({tile:be})=>!be.selected&&!be.revealed)].sort(()=>Math.random()-.5).slice(0,ee).map(({index:be})=>be);console.log(`[AutoSelect] Player: ${W}, Remaining: ${ee}, Selecting: ${ie}`),ie.forEach(be=>{O(be)}),setTimeout(()=>{k.current=!1},500)},[b.players,b.tiles,L.maxSelections,O]);return D.useEffect(()=>{if(b.status!=="playing"&&b.status!=="waiting")return;const W=setInterval(()=>{N(Y=>{if(Y.timeRemaining<=0){if(Y.status==="waiting")return{...Y,status:"finished"};if(Y.status==="playing"){if(!v){const ee=Y.players.find(de=>de.username===d);ee&&ee.selections.length<L.maxSelections&&(p?R.current?.dropAllRemainingBalls():G(d))}return{...Y,status:"revealing"}}}return{...Y,timeRemaining:Y.timeRemaining-1}})},1e3);return()=>clearInterval(W)},[b.status,G,d,L.maxSelections,p,v]),D.useEffect(()=>{if(!v&&b.status==="revealing"&&!C.current){C.current=!0,_.forEach(Y=>clearTimeout(Y)),A(new Map);const W=()=>{const Y=x3(b.players,l,x,d,!w);let ee=Y.winner===d||Y.winner==="You",de=Y.winAmount;if(g&&f){const ie=g.participants?.find(be=>be.pubkey===f);if(ie)if(ee=ie.isWinner??!1,ee){const be=g.participants?.length||2;de=l*be}else de=0}const re={...Y,isCurrentPlayerWinner:ee,winAmount:de};V(re),m&&m(re)};if(p&&R.current?.wasAutoDropped()){const Y=setInterval(()=>{R.current?.getAllBallsLanded()&&(clearInterval(Y),setTimeout(W,2e3))},100)}else setTimeout(W,3e3)}},[b.status,b.players,l,x,m,_,d,f,g,p,v,w]),D.useEffect(()=>()=>{_.forEach(W=>clearTimeout(W))},[_]),U?u.jsx(cm,{players:b.players,maxPlayers:P,timeRemaining:b.timeRemaining,onCancel:()=>N(W=>({...W,status:"finished"}))}):q?u.jsxs("div",{className:"text-center py-12",children:[u.jsx(ye.div,{className:"text-6xl mb-4",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:""}),u.jsx("h2",{className:"text-2xl font-display font-bold text-sol-purple mb-2",children:"Loading Battle..."}),u.jsx("p",{className:"text-txt-muted",children:"Preparing your match with epic rewards!"})]}):v?u.jsx(hm,{gameMode:t,matchType:x,stakeSol:l,players:b.players,currentPlayer:d,currentPlayerPubkey:f,matchFromBackend:g,timeLimit:h,onGameComplete:m,isDemoMode:w}):u.jsx(u.Fragment,{children:u.jsx(um,{gameName:L.name,stakeSol:l,matchType:x,timeRemaining:b.timeRemaining,players:b.players,currentPlayer:d,currentPlayerPubkey:f,gameStatus:b.status,gameResult:H,shouldHideScores:$,hideTeamScores:Z,children:d!==""||w?p?u.jsx(gb,{ref:R,gameMode:t,onBallDrop:T,disabled:b.status!=="playing",currentPlayer:d,players:b.players,currentBallIndex:M,targetSlotIndex:j[M],allTargetSlots:j}):u.jsx(_3,{gameMode:t,tiles:b.tiles,onTileClick:O,disabled:b.status!=="playing",currentPlayer:d,players:b.players}):u.jsx("div",{className:"text-center py-12",children:u.jsxs("div",{className:"glass-card p-8 max-w-md mx-auto",children:[u.jsx("h3",{className:"text-2xl font-bold text-sol-purple mb-4",children:" Spectator Mode"}),u.jsx("p",{className:"text-txt-muted",children:"You are watching this match as a spectator. The game board is hidden, but you can see all player scores and team progress above."})]})})})})},fM=["Connecting to Solana","Creating new arena","Preparing match","Waiting for VRF","Locking escrow...","Match starting soon"],mM=(s,t=80,a=40)=>{const[o,l]=D.useState(""),[r,d]=D.useState(0),[f,g]=D.useState(!1),[h,m]=D.useState(!1);return D.useEffect(()=>{if(h)return;const w=s[r],x=setTimeout(()=>{f?o.length>0?l(w.slice(0,o.length-1)):(m(!0),setTimeout(()=>{m(!1),g(!1),d(p=>(p+1)%s.length)},1e3)):o.length<w.length?l(w.slice(0,o.length+1)):(m(!0),setTimeout(()=>{m(!1),g(!0)},5e3))},f?a:t);return()=>clearTimeout(x)},[o,r,f,h,s,t,a]),o},bb=({team1:s,team2:t,statusMessages:a=fM})=>{const o=mM(a);return u.jsxs("div",{className:"relative min-h-screen overflow-hidden bg-loader-bg",children:[u.jsx(nn,{}),u.jsxs("section",{className:"relative z-10 flex flex-col md:flex-row items-stretch md:items-center justify-center gap-1 tablet:gap-3 lg:gap-6 mx-auto mt-16 mb-8 px-4 tablet:px-6 lg:px-8 max-w-7xl",children:[u.jsx("div",{className:"w-full md:flex-1 flex justify-center",children:u.jsx(iy,{team:s,type:"bevel"})}),u.jsx("div",{className:"flex justify-center md:flex-shrink-0",children:u.jsx(hM,{})}),u.jsx("div",{className:"w-full md:flex-1 flex justify-center",children:u.jsx(iy,{team:t,type:"hex"})})]}),u.jsx("div",{className:"relative z-10 w-full max-w-[600px] mx-auto mb-6 px-4",children:u.jsxs("div",{className:"flex items-center justify-center gap-2 md:gap-3 py-3 px-4 md:py-5 md:px-8 rounded-2xl border-2 border-white/20 shadow-[0_0_40px_rgba(153,69,255,0.2)]",style:{background:"rgba(11,15,23,0.9)"},children:[u.jsx("div",{className:"flex gap-1.5",children:[0,1,2].map(l=>u.jsx(ye.div,{className:"w-2 h-2 rounded-full",style:{background:"#14F195"},animate:{opacity:[.3,1,.3]},transition:{duration:1.5,repeat:1/0,delay:l*.2}},l))}),u.jsxs("span",{className:"text-lg text-white font-semibold tracking-wide",children:[o,u.jsx("span",{className:"inline-block w-0.5 h-5 bg-white/80 ml-2 align-middle animate-blink-caret"})]})]})})]})},iy=({team:s,type:t})=>{const a=t==="bevel",o=a?"linear-gradient(135deg, #9945FF 0%, #7F5AF0 50%, #14F195 100%)":"linear-gradient(225deg, #00FFA3 0%, #14F195 50%, #9945FF 100%)",l=a?"#9945FF":"#14F195",r=a?0:.8,d=1.2;return u.jsx(ye.div,{className:"relative w-full md:w-[360px] tablet:w-[390px] lg:w-[420px]",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5,delay:r,ease:"easeOut"},children:u.jsxs("div",{className:"relative",children:[u.jsx(ye.div,{className:"absolute inset-0 rounded-2xl",style:{background:o,opacity:.15},animate:{opacity:[.1,.2,.1]},transition:{duration:3,repeat:1/0,ease:"easeInOut"}}),u.jsxs("div",{className:"relative rounded-2xl overflow-hidden shadow-2xl",style:{background:"rgba(11,15,23,0.95)",border:`2px solid ${l}40`},children:[u.jsx("div",{className:"h-1",style:{background:o}}),u.jsx("div",{className:"absolute left-0 right-0 top-0 h-32 animate-scan pointer-events-none opacity-20",style:{background:`linear-gradient(to bottom, ${l}20, transparent)`,willChange:"transform"}}),u.jsxs("div",{className:"relative p-4 md:p-8 z-10",children:[u.jsx(ye.h3,{className:"font-display font-extrabold text-white mb-3",style:{fontSize:"clamp(26px, 3.5vw, 36px)",textShadow:`0 0 20px ${l}50`},initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.3,delay:r+.2},children:s.name}),u.jsxs("div",{className:"space-y-2",children:[s.players.map((f,g)=>u.jsxs(ye.div,{className:"flex items-center gap-3 group",initial:{opacity:0,x:a?-10:10},animate:{opacity:1,x:0},transition:{delay:d+g*.15,duration:.3,ease:"easeOut"},children:[u.jsx(ye.div,{className:"w-1.5 h-1.5 rounded-full",style:{background:l,boxShadow:`0 0 8px ${l}80`},animate:{opacity:[.4,1,.4],scale:[.9,1.1,.9]},transition:{duration:1.5,repeat:1/0,delay:g*.2,ease:"easeInOut"}}),u.jsx("span",{className:"text-base text-white font-medium group-hover:text-white/90 transition-colors",children:f})]},g)),s.additionalCount&&s.additionalCount>0&&u.jsxs(ye.div,{className:"text-sm font-medium ml-5 mt-2",style:{color:`${l}cc`},initial:{opacity:0},animate:{opacity:1},transition:{delay:d+s.players.length*.15},children:["+ ",s.additionalCount," more"]})]})]}),u.jsx("div",{className:"absolute bottom-0 right-0 w-20 h-20 opacity-20 pointer-events-none",style:{background:`radial-gradient(circle at bottom right, ${l}, transparent 70%)`}})]})]})})},hM=()=>u.jsx(ye.div,{className:"flex-shrink-0 flex items-center justify-center px-4 py-4",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.5,delay:.4,ease:"easeOut"},children:u.jsxs("div",{className:"relative w-24 md:w-26 tablet:w-30 lg:w-32 h-24 md:h-26 tablet:h-30 lg:h-32",children:[u.jsx(ye.div,{className:"absolute inset-0 rounded-full",style:{background:"conic-gradient(from 0deg, transparent 0%, #9945FF 25%, transparent 50%, #14F195 75%, transparent 100%)",opacity:.4},animate:{rotate:360},transition:{duration:8,repeat:1/0,ease:"linear"}}),u.jsx(ye.div,{className:"absolute inset-2 rounded-full",style:{background:"conic-gradient(from 180deg, transparent 0%, #00FFA3 30%, transparent 50%, #9945FF 80%, transparent 100%)",opacity:.3},animate:{rotate:-360},transition:{duration:6,repeat:1/0,ease:"linear"}}),u.jsx(ye.div,{className:"absolute inset-6 rounded-full",style:{background:"radial-gradient(circle, rgba(153,69,255,0.25), rgba(20,241,149,0.15), transparent 70%)"},animate:{scale:[1,1.15,1],opacity:[.3,.5,.3]},transition:{duration:2.5,repeat:1/0,ease:"easeInOut"}}),u.jsx("div",{className:"absolute inset-0",children:[{angle:Math.random()*360,delay:0,color:"#9945FF"},{angle:Math.random()*360,delay:.4,color:"#14F195"},{angle:Math.random()*360,delay:.8,color:"#00FFA3"}].map((s,t)=>{const a=45+Math.random()*15;return u.jsx(ye.div,{className:"absolute w-1.5 h-1.5 rounded-full",style:{top:"50%",left:"50%",background:s.color,boxShadow:`0 0 10px ${s.color}`,willChange:"transform, opacity"},animate:{x:[0,Math.cos(s.angle*Math.PI/180)*a,Math.cos(s.angle*Math.PI/180)*(a+10)],y:[0,Math.sin(s.angle*Math.PI/180)*a,Math.sin(s.angle*Math.PI/180)*(a+10)],opacity:[0,.9,0],scale:[.4,1,.4]},transition:{duration:2.5,repeat:1/0,delay:s.delay,ease:"easeOut"}},t)})}),u.jsx(ye.div,{className:"absolute inset-0 flex items-center justify-center",animate:{scale:[1,1.03,1]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:u.jsx("div",{className:"font-display font-black tracking-[0.25em] text-4xl md:text-5xl",style:{color:"transparent",background:"linear-gradient(135deg, #9945FF 0%, #fff 50%, #14F195 100%)",WebkitBackgroundClip:"text",backgroundClip:"text",textShadow:"0 0 15px rgba(153,69,255,0.5), 0 0 30px rgba(20,241,149,0.3)"},children:"VS"})}),u.jsx(ye.div,{className:"absolute inset-3",style:{clipPath:"polygon(30% 0%, 70% 0%, 100% 30%, 100% 70%, 70% 100%, 30% 100%, 0% 70%, 0% 30%)",border:"1px solid rgba(255,255,255,0.15)"},animate:{opacity:[.15,.4,.15]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"}})]})}),wb=({isOpen:s,result:t,onClose:a,onPlayAgain:o,onViewLeaderboard:l,onBackToLobby:r,isDemoMode:d=!1})=>{const f=D.useMemo(()=>t?t.isCurrentPlayerWinner!==void 0?t.isCurrentPlayerWinner:t.isTeamBattle?t.winner==="Team A":t.winner==="You":!1,[t]);return D.useEffect(()=>(s?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[s]),t?u.jsx($n,{children:s&&u.jsxs(u.Fragment,{children:[u.jsx(ye.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 backdrop-blur-md",style:{zIndex:1e3,top:"-10%"},onClick:a}),u.jsx(ye.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{type:"spring",damping:25,stiffness:200},className:"fixed inset-0 flex items-center justify-center p-4",style:{zIndex:1001},children:u.jsx(Le,{className:"w-full max-w-md mx-auto",children:u.jsxs(Zi,{className:"p-6",children:[u.jsxs("div",{className:"text-center mb-4",children:[u.jsx(ye.div,{className:"text-6xl mb-4",initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",stiffness:200},children:f?"":t.winner==="Tie"?"":""}),u.jsx(ye.h2,{className:`text-3xl font-display font-bold mb-2 ${f?"text-sol-mint":"text-txt-base"}`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:f?"Victory!":t.winner==="Tie"?"Tie Game!":"Defeat"}),u.jsx(ye.p,{className:"text-txt-muted",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:t.isTeamBattle?u.jsxs(u.Fragment,{children:[t.winner==="Team A"?"Team A":"Team B"," won!",u.jsx("br",{}),f?"Congratulations! Your team won!":"Your team lost this time."]}):f?"Congratulations! You won the match!":t.winner==="Tie"?"It's a tie! No winner this time.":"Better luck next time!"})]}),f&&u.jsx(ye.div,{className:"text-center mb-4 p-3 bg-gradient-to-r from-sol-purple/10 to-sol-mint/10 rounded-xl border border-sol-purple/20",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.5},children:u.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[u.jsx(Tc,{className:"w-6 h-6 text-sol-mint"}),u.jsx("span",{className:"text-txt-muted",children:"You won"}),u.jsx("span",{className:"text-xl text-sol-mint",children:Number(t.winAmount).toLocaleString(void 0,{minimumFractionDigits:t.winAmount<1?1:0,maximumFractionDigits:3})}),u.jsx("span",{className:"text-xl text-txt-muted",children:"SOL"})]})}),u.jsxs(ye.div,{className:"mb-4",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},children:[u.jsxs("h3",{className:"text-lg font-semibold text-txt-base mb-3 flex items-center",children:[u.jsx(Vs,{className:"w-5 h-5 mr-2 text-sol-purple"}),t.isTeamBattle?"Team Results":"Final Scores"]}),t.isTeamBattle?u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg bg-sol-purple/10 border border-sol-purple/20",children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("span",{className:"text-2xl",children:""}),u.jsx("span",{className:"font-medium text-txt-base",children:"Team A"})]}),u.jsx(Ps,{value:t.teamScores?.["Team A"]||0,className:"text-xl font-bold"})]}),u.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg bg-sol-mint/10 border border-sol-mint/20",children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("span",{className:"text-2xl",children:""}),u.jsx("span",{className:"font-medium text-txt-base",children:"Team B"})]}),u.jsx(Ps,{value:t.teamScores?.["Team B"]||0,className:"text-xl font-bold"})]})]}):u.jsx("div",{className:"space-y-2",children:Object.entries(t.scores).sort(([,h],[,m])=>m-h).map(([h,m],w)=>u.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg ${h==="You"?"bg-sol-purple/10 border border-sol-purple/20":"bg-white/5"}`,children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("span",{className:"text-lg",children:w===0?"":w===1?"":w===2?"":""}),u.jsx("span",{className:"font-medium text-txt-base",children:h})]}),u.jsx(Ps,{value:m,className:"text-lg"})]},h))})]}),u.jsx(ye.div,{className:"space-y-3",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},children:d?u.jsxs(u.Fragment,{children:[u.jsx(Se,{variant:"neon",onClick:o,className:"w-full",children:"Play Again"}),u.jsx(Se,{variant:"glass",onClick:a,className:"w-full",children:"Close"})]}):u.jsxs(u.Fragment,{children:[u.jsx(Se,{variant:"neon",onClick:o,className:"w-full",children:"Back to Arena"}),u.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[u.jsx(Se,{variant:"glass",onClick:l,className:"w-full",children:"Leaderboard"}),u.jsx(Se,{variant:"ghost",onClick:r,className:"w-full",children:"Stats"})]})]})})]})})})]})}):null},Sb=({isOpen:s,result:t,onClose:a,onPlayAgain:o,onViewLeaderboard:l,onBackToLobby:r,isDemoMode:d=!1})=>{const f=D.useMemo(()=>t?t.isCurrentPlayerWinner===!0:!1,[t]);if(D.useEffect(()=>(s?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[s]),D.useEffect(()=>{s&&(console.log("[GoldBarsResultModal] Modal opened, result=",t),t&&(console.log("[GoldBarsResultModal] scores=",t.scores),console.log("[GoldBarsResultModal] isWinner=",f)))},[s,t,f]),!t||!t.scores||Object.keys(t.scores).length===0)return console.log("[GoldBarsResultModal] Returning null - result=",t),null;const g=Object.entries(t.scores).sort(([,h],[,m])=>m-h);return u.jsx($n,{children:s&&u.jsxs(u.Fragment,{children:[u.jsx(ye.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 backdrop-blur-md",style:{zIndex:9999,top:0},onClick:a}),u.jsx(ye.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{type:"spring",damping:25,stiffness:200},className:"fixed inset-0 flex items-center justify-center p-4 pointer-events-none",style:{zIndex:1e4},children:u.jsx(Le,{className:"w-full max-w-md mx-auto pointer-events-auto",children:u.jsxs(Zi,{className:"p-6",children:[u.jsxs("div",{className:"text-center mb-4",children:[u.jsx(ye.div,{className:"text-6xl mb-4",initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",stiffness:200},children:f?"":""}),u.jsx(ye.h2,{className:`text-3xl font-display font-bold mb-2 ${f?"text-sol-mint":"text-yellow-500"}`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:f?"Victory!":"Game Over"}),u.jsx(ye.p,{className:"text-txt-muted",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:f?"Congratulations! You collected the most gold bars!":"Better luck next time!"})]}),f&&u.jsx(ye.div,{className:"text-center mb-4 p-3 bg-gradient-to-r from-sol-purple/10 to-sol-mint/10 rounded-xl border border-sol-purple/20",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.5},children:u.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[u.jsx(Tc,{className:"w-6 h-6 text-sol-mint"}),u.jsx("span",{className:"text-txt-muted",children:"You won"}),u.jsx("span",{className:"text-xl text-sol-mint",children:Number(t.winAmount).toLocaleString(void 0,{minimumFractionDigits:t.winAmount<1?1:0,maximumFractionDigits:3})}),u.jsx("span",{className:"text-xl text-txt-muted",children:"SOL"})]})}),u.jsxs(ye.div,{className:"mb-4",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},children:[u.jsxs("h3",{className:"text-lg font-semibold text-txt-base mb-3 flex items-center",children:[u.jsx(Vs,{className:"w-5 h-5 mr-2 text-sol-purple"}),t.isTeamBattle?"Team Results":"Results"]}),t.isTeamBattle&&t.teamScores?u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-sol-purple/10 border border-sol-purple/20",children:[u.jsx("span",{className:"font-medium text-txt-base",children:"Team A"}),u.jsxs("span",{className:"text-lg font-bold text-yellow-500 flex items-center gap-1",children:[u.jsx("span",{children:""}),t.teamScores["Team A"]||0]})]}),u.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-sol-mint/10 border border-sol-mint/20",children:[u.jsx("span",{className:"font-medium text-txt-base",children:"Team B"}),u.jsxs("span",{className:"text-lg font-bold text-yellow-500 flex items-center gap-1",children:[u.jsx("span",{children:""}),t.teamScores["Team B"]||0]})]})]}):u.jsx("div",{className:"space-y-2",children:g.map(([h,m],w)=>u.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg ${h==="You"?"bg-sol-purple/10 border border-sol-purple/20":"bg-white/5"}`,children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("span",{className:"text-lg",children:w===0?"":w===1?"":w===2?"":""}),u.jsx("span",{className:"font-medium text-txt-base",children:h})]}),u.jsxs("span",{className:"text-lg font-bold text-yellow-500 flex items-center gap-1",children:[u.jsx("span",{children:""}),m]})]},h))})]}),u.jsx(ye.div,{className:"space-y-3",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},children:d?u.jsxs(u.Fragment,{children:[u.jsx(Se,{variant:"neon",onClick:o,className:"w-full",children:"Play Again"}),u.jsx(Se,{variant:"glass",onClick:a,className:"w-full",children:"Close"})]}):u.jsxs(u.Fragment,{children:[u.jsx(Se,{variant:"neon",onClick:o,className:"w-full",children:"Back to Arena"}),u.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[u.jsx(Se,{variant:"glass",onClick:l,className:"w-full",children:"Leaderboard"}),u.jsx(Se,{variant:"ghost",onClick:r,className:"w-full",children:"Stats"})]})]})})]})})})]})})},gM=(s,t)=>{switch(s.type){case"gold":return{background:"linear-gradient(135deg, #fbbf24 0%, #f59e0b 30%, #d97706 60%, #92400e 100%)",borderColor:"#fbbf24"};case"bomb":return{background:"linear-gradient(135deg, #dc2626 0%, #b91c1c 30%, #991b1b 60%, #7f1d1d 100%)",borderColor:"#dc2626"};case"empty":default:return{background:"linear-gradient(135deg, #d1d5db 0%, #9ca3af 40%, #6b7280 70%, #374151 100%)",borderColor:"#9ca3af"}}},pM=(s,t)=>{if(!t)return"?!";switch(s.type){case"gold":return"";case"bomb":return"";case"empty":default:return""}},xM=s=>{switch(s.type){case"gold":return"0 0 20px rgba(251, 191, 36, 1), 0 0 40px rgba(245, 158, 11, 0.9), 0 0 60px rgba(217, 119, 6, 0.7)";case"bomb":return"0 0 20px rgba(220, 38, 38, 1), 0 0 40px rgba(185, 28, 28, 0.9), 0 0 60px rgba(153, 27, 27, 0.7)";default:return"0 0 10px rgba(209, 213, 219, 0.8)"}},Nb=({tile:s,isSelectedByPlayer:t,isFlipped:a,disabled:o,gameEnded:l,onTileClick:r,gameMode:d,allTilesRevealed:f=!1})=>{const[g,h]=D.useState(!1);D.useEffect(()=>{if(t&&a){const b=setTimeout(()=>{h(!0)},300);return()=>clearTimeout(b)}else h(!1)},[t,a]);const m=()=>{o||s.revealed||s.selected||l||r(s.index)},w=pM(s,a),x=xM(s),v=(b=>{if(!b)return"text-xl md:text-2xl";switch(d){case"GoldBars1v9":return"text-5xl md:text-6xl lg:text-7xl";case"GoldBars3v16":return"text-4xl md:text-5xl lg:text-6xl";case"GoldBars5v25":return"text-3xl md:text-4xl lg:text-5xl";default:return"text-4xl md:text-5xl lg:text-6xl"}})(a);return u.jsxs("div",{className:"relative w-full aspect-square",style:{perspective:"800px"},children:[u.jsxs("div",{className:`relative w-full h-full transition-all duration-300 ${o||l?"cursor-not-allowed":"cursor-pointer"}`,style:{transformStyle:"preserve-3d",transform:a?"rotateY(180deg)":"rotateY(0deg)",willChange:"transform"},onClick:m,children:[u.jsxs("div",{className:"absolute inset-0 rounded-lg border-2 border-yellow-500/40 shadow-lg",style:{backfaceVisibility:"hidden",WebkitBackfaceVisibility:"hidden",background:"linear-gradient(135deg, rgba(251,191,36,0.3) 0%, rgba(245,158,11,0.3) 100%)"},children:[u.jsx("div",{className:"absolute inset-0 rounded-lg opacity-30",style:{backgroundImage:"repeating-linear-gradient(45deg, transparent, transparent 8px, rgba(255,255,255,0.1) 8px, rgba(255,255,255,0.1) 16px)"}}),u.jsx("div",{className:`absolute inset-0 flex items-center justify-center ${v} font-bold opacity-70`,style:{textShadow:"0 0 10px rgba(251, 191, 36, 0.8), 0 0 20px rgba(245, 158, 11, 0.6)"},children:w}),!o&&!l&&!a&&u.jsx("div",{className:"absolute inset-0 bg-yellow-500/0 hover:bg-yellow-500/25 transition-colors duration-200 rounded-lg"})]}),u.jsxs("div",{className:"absolute inset-0 rounded-lg border-2 shadow-lg",style:{backfaceVisibility:"hidden",WebkitBackfaceVisibility:"hidden",transform:"rotateY(180deg)",opacity:a?1:0,transition:"opacity 0.3s cubic-bezier(0.4, 0.0, 0.2, 1)",...gM(s)},children:[f&&!t&&a&&u.jsx("div",{className:"absolute inset-0 rounded-lg bg-black/60 z-10 transition-opacity duration-300",style:{pointerEvents:"none"}}),u.jsx("div",{className:"absolute inset-0 flex items-center justify-center overflow-hidden",children:u.jsx("div",{className:v,style:{textShadow:x,transformOrigin:"center center"},children:w})}),u.jsx("div",{className:"absolute inset-0 rounded-lg opacity-20",style:{background:"linear-gradient(135deg, rgba(255,255,255,0.3) 0%, transparent 50%, rgba(255,255,255,0.1) 100%)"}}),a&&s.type==="empty"&&u.jsx("div",{className:"absolute inset-0 rounded-lg opacity-30",style:{backgroundImage:"repeating-linear-gradient(45deg, transparent, transparent 10px, rgba(0,0,0,0.1) 10px, rgba(0,0,0,0.1) 20px)"}})]})]}),g&&u.jsx("div",{className:"absolute inset-0 rounded-lg border-4 border-sol-mint pointer-events-none z-10 transition-opacity duration-300 opacity-100"})]})};Nb.displayName="GoldBarsTileComponent";const _b=({gameMode:s,tiles:t,onTileClick:a,disabled:o=!1,playerSelections:l=[],gameEnded:r=!1,allTilesRevealed:d=!1})=>{const f=D.useCallback(w=>{o||t[w].selected||t[w].revealed||r||a(w)},[o,t,r,a]),g=D.useMemo(()=>new Set(l||[]),[l]),h=D.useMemo(()=>{switch(s){case"GoldBars1v9":return"grid-cols-3";case"GoldBars3v16":return"grid-cols-4";case"GoldBars5v25":return"grid-cols-5";default:return"grid-cols-3"}},[s]),m=D.useMemo(()=>t.every(w=>w.revealed),[t]);return u.jsx("div",{className:"w-full overflow-hidden",style:{maxWidth:"100vw"},children:u.jsx("div",{className:`grid ${h} gap-1.5 md:gap-2 p-2 mx-auto`,style:{width:"100%",maxWidth:"min(100%, 512px)",boxSizing:"border-box",overflow:"hidden"},children:t.map(w=>{const x=g.has(w.index),p=w.revealed,v=d||m;return u.jsx(Nb,{tile:w,isSelectedByPlayer:x,isFlipped:p,disabled:o,gameEnded:r,onTileClick:f,gameMode:s,allTilesRevealed:v},w.index)})})})};_b.displayName="GoldBarsGame";const yM=D.memo(_b,(s,t)=>{if(s.gameMode!==t.gameMode||s.disabled!==t.disabled||s.gameEnded!==t.gameEnded||s.currentPlayer!==t.currentPlayer||s.tiles.length!==t.tiles.length||s.playerSelections?.length!==t.playerSelections?.length)return!1;for(let a=0;a<s.tiles.length;a++){const o=s.tiles[a],l=t.tiles[a];if(o.index!==l.index||o.revealed!==l.revealed||o.selected!==l.selected||o.type!==l.type)return!1}if(s.playerSelections&&t.playerSelections){const a=[...s.playerSelections].sort(),o=[...t.playerSelections].sort();if(a.length!==o.length)return!1;for(let l=0;l<a.length;l++)if(a[l]!==o[l])return!1}return!0});function vM(s){const t=s+1;return console.log(`[determineBombClick] Bomb will appear on click ${t} (targetScore: ${s})`),t}function bM(s,t,a,o,l,r,d){const f=s.map((N,_)=>({tile:N,idx:_})).filter(({tile:N,idx:_})=>!N.revealed&&_!==t).map(({idx:N})=>N),g=a-r,h=o-(l?0:1);console.log(`[distributeGoldBarsAndBombs] Distributing: ${g} gold bars, ${h} bombs. Closed slots available: ${f.length}, currentScore: ${r}, targetScore: ${d}`);const m=[...f].sort(()=>Math.random()-.5),w=new Set,x=new Set,p=Math.min(g,m.length);for(let N=0;N<p;N++)w.add(m[N]);const v=m.length-p,b=Math.min(h,v);for(let N=p;N<p+b;N++)x.add(m[N]);return g+h>m.length?console.warn(`[distributeGoldBarsAndBombs]  Not enough closed slots! Need ${g+h} items but only ${m.length} closed slots available. Assigning ${p} gold bars and ${b} bombs. Missing: ${g+h-m.length} items.`):console.log(`[distributeGoldBarsAndBombs]  All items distributed to closed slots: ${p} gold bars, ${b} bombs. Remaining empty slots: ${m.length-p-b}`),l?w.add(t):x.add(t),console.log("[distributeGoldBarsAndBombs] Gold indices:",Array.from(w)),console.log("[distributeGoldBarsAndBombs] Bomb indices:",Array.from(x)),s.map(N=>N.index===t?{...N,type:l?"gold":"bomb",selected:!0,revealed:!0}:w.has(N.index)?{...N,type:"gold",revealed:!0}:x.has(N.index)?{...N,type:"bomb",revealed:!0}:N.revealed?N:{...N,type:"empty",revealed:!0})}function ry(s,t,a,o,l,r,d){const f=s.map((x,p)=>({tile:x,index:p})).filter(({tile:x})=>!x.revealed);if(f.length===0)return console.log("[autoOpenTiles] No unopened tiles, completing immediately"),d(),()=>{};const g=[...f].sort(()=>Math.random()-.5);let h=a;const m=[];console.log(`[autoOpenTiles] Starting auto-open: ${f.length} unopened tiles, bomb on click ${t}, current click ${a}, targetScore: ${o}`);let w=!1;return g.forEach(({index:x},p)=>{h++;const v=setTimeout(()=>{if(w){console.log(`[autoOpenTiles] Result already found, skipping tile ${x}`);return}if(console.log(`[autoOpenTiles] Auto-opening tile: index=${x}, clickNumber=${h}`),h===t){console.log(`[autoOpenTiles]  Bomb found on click ${h}!`),w=!0;for(let b=p+1;b<g.length;b++)m[b]&&clearTimeout(m[b]);r(x,h),setTimeout(()=>{d()},100)}else r(x,h)},p*500);m.push(v)}),()=>{m.forEach(x=>clearTimeout(x))}}function wM(s,t,a,o,l,r){const d=a==="Duo"||a==="Team";if(console.log(`[calculateGoldBarsGameResult] Calculating result for ${a} match`),console.log("[calculateGoldBarsGameResult] Players:",s.map(f=>({username:f.username,currentScore:f.currentScore,targetScore:f.targetScore}))),d){const f=a==="Duo"?2:5,g=s.slice(0,f),h=s.slice(f,f*2),m=g.reduce((k,R)=>k+R.currentScore,0),w=h.reduce((k,R)=>k+R.currentScore,0),x=m>=w,p=x?"Team A":"Team B";console.log(`[calculateGoldBarsGameResult] Team A: ${m} gold bars, Team B: ${w} gold bars, Winner: ${p}${m===w?" (tie - Team A wins)":""}`);let v=!1;if(l&&r){const k=r.participants?.find(R=>R.pubkey===l);k&&(v=k.isWinner??!1)}else{const k=s.find(R=>R.username===o||R.pubkey===l);k&&(v=g.some(j=>j.username===k.username||j.pubkey===k.pubkey)?x:!x)}const b=r?.participants?.length||s.length,N=t*b,_=v?N:0,A={};s.forEach(k=>{A[k.username]=k.currentScore});const C={"Team A":m,"Team B":w};return console.log("[calculateGoldBarsGameResult] Team result:",{winner:p,scores:A,teamScores:C,winAmount:_}),{winner:p,scores:A,winAmount:_,duration:0,isTeamBattle:!0,teamScores:C,isCurrentPlayerWinner:v,gameType:yt.GoldBars}}else{const f=[...s].sort((v,b)=>{if(b.currentScore!==v.currentScore)return b.currentScore-v.currentScore;const N=s.findIndex(A=>A.id===v.id),_=s.findIndex(A=>A.id===b.id);return N-_}),g=f[0];let h=g;if(f.length>1&&f[0].currentScore===f[1].currentScore&&(console.log(`[calculateGoldBarsGameResult]  Equal scores detected! First player wins: ${s[0].username} (${f[0].currentScore} vs ${f[1].currentScore})`),h=s[0],console.log(`[calculateGoldBarsGameResult] Winner explicitly set to first player: ${h.username}`)),!g)return console.error("[calculateGoldBarsGameResult] ERROR: No winner determined! Using first player as fallback."),{winner:(s[0]||{username:"Unknown"}).username,scores:{},winAmount:0,duration:0,isTeamBattle:!1,isCurrentPlayerWinner:!1,gameType:yt.GoldBars};let m=!1;if(l&&r){const v=r.participants?.find(b=>b.pubkey===l);v&&(m=v.isWinner??!1)}else m=s.find(b=>b.username===o||b.pubkey===l)?.username===h.username;const w=t*2,x=m?w:0,p={};return s.forEach(v=>{p[v.username]=v.currentScore}),console.log("[calculateGoldBarsGameResult] Solo result:",{winner:h.username,scores:p,winAmount:x,isCurrentPlayerWinner:m}),{winner:h.username,scores:p,winAmount:x,duration:0,isTeamBattle:!1,isCurrentPlayerWinner:m,gameType:yt.GoldBars}}}const Rb=({gameMode:s,matchType:t="Solo",stakeSol:a,players:o,currentPlayer:l="You",currentPlayerPubkey:r,matchFromBackend:d,timeLimit:f=20,onGameComplete:g,isDemoMode:h=!1})=>{const m=$i(s),w=m.tileCount||9,x=m.goldBars||8,p=m.bombs||1,v=t==="Solo"?2:t==="Duo"?4:10,b=D.useMemo(()=>r?o.find(J=>J.pubkey===r):o.find(J=>J.username===l),[o,r,l]),N=D.useRef(null),_=D.useRef(!1),[A,C]=D.useState({status:"waiting",timeRemaining:f,tiles:[],players:o.map(J=>({id:J.id||J.username,username:J.username,pubkey:J.pubkey,targetScore:J.targetScore,currentScore:J.currentScore||0,selections:[],isReady:J.isReady,isScoreRevealed:!1,openedTileCount:0,reachedAllGoldBars:!1})),currentPlayerTurn:l,winner:void 0}),[k,R]=D.useState([]),[j,B]=D.useState(!1),M=D.useRef(!1),[I,L]=D.useState(new Map),P=D.useRef(new Map),U=D.useRef(null),q=D.useRef(null),[H,V]=D.useState(f),$=D.useRef(null),Z=D.useRef(!1),Q=D.useRef(!1),F=D.useRef(null),T=D.useRef(!1),O=h?!1:A.players.length<v,G=A.status==="loading",[W,Y]=D.useState(null),ee=D.useCallback(J=>{const le=A.players.find(je=>je.username===J);return r&&le?.pubkey===r||!r&&J===l?!1:!le?.isScoreRevealed},[l,r,A.players]);D.useEffect(()=>{if(A.status==="waiting"&&!(O||G)&&!Q.current&&!(!h&&A.players.length<v)){if(Q.current=!0,T.current=!0,b&&!N.current){let J=b.targetScore;J>x&&(console.warn(`[GoldBarsGameBoard]  targetScore (${J}) exceeds totalGoldBars (${x}). Normalizing to ${x}.`),J=x),J<0&&(console.warn(`[GoldBarsGameBoard]  targetScore (${J}) is negative. Normalizing to 0.`),J=0);const le=vM(J);N.current=le,console.log(`[GoldBarsGameBoard] Current player ${b.username}: targetScore=${b.targetScore} (normalized: ${J}), bomb on click ${le}`)}return console.log("========================================"),console.log("[GoldBarsGameBoard]  GAME START"),console.log("[GoldBarsGameBoard] Initializing game with players:"),A.players.forEach(J=>{console.log(`  - ${J.username}: targetScore=${J.targetScore}, pubkey=${J.pubkey}`)}),console.log("========================================"),C(J=>({...J,status:"loading"})),F.current&&clearTimeout(F.current),F.current=setTimeout(()=>{F.current=null;const J=Array.from({length:w},(Ne,Ce)=>({index:Ce,type:"empty",selected:!1,revealed:!1}));_.current=!1,R(J);const le=new Map,je=r?A.players.filter(Ne=>Ne.pubkey!==r):A.players.filter(Ne=>Ne.username!==l);console.log(`[GoldBarsGameBoard] Setting up timers for ${je.length} AI players`),je.forEach(Ne=>{const Ce=Math.random()*6e3+12e3,Ue=Ne.username,$e=setTimeout(()=>{console.log(`[GoldBarsGameBoard] Revealing result for AI player: ${Ue}`),C(Oe=>{const Be=Oe.players.find(it=>it.username===Ue);if(Be?.isScoreRevealed)return Oe;let ke=Be?.targetScore||0;ke>x&&(ke=x),ke<0&&(ke=0);const lt=Oe.players.map(it=>it.username===Ue?(console.log(`[GoldBarsGameBoard] Updating AI player ${it.username}: currentScore=${it.currentScore} -> ${ke} (targetScore=${it.targetScore})`),{...it,currentScore:ke,isScoreRevealed:!0}):it);return{...Oe,players:lt}})},Ce);le.set(Ne.username,$e)}),L(le),P.current=le,V(f),C(Ne=>({...Ne,status:"playing"}))},2e3),()=>{T.current||Q.current||F.current&&(clearTimeout(F.current),F.current=null,Q.current=!1)}}},[O,G,A.status,A.players.length,x,v,h]);const de=D.useRef(null),re=D.useCallback((J,le=!1)=>{if(A.status!=="playing"||!le&&j)return;const je=k[J];if(je?.selected||je?.revealed)return;const Ne=r?A.players.find(Ye=>Ye.pubkey===r):A.players.find(Ye=>Ye.username===l);if(!Ne)return;const Ce=(Ne.openedTileCount||0)+1,Ue=N.current,$e=Ne.currentScore||0;let Oe=Ne.targetScore;Oe>x&&(console.warn(`[GoldBarsGameBoard]  targetScore (${Oe}) exceeds totalGoldBars (${x}). Normalizing to ${x}.`),Oe=x),Oe<0&&(console.warn(`[GoldBarsGameBoard]  targetScore (${Oe}) is negative. Normalizing to 0.`),Oe=0);let Be="empty",ke=!1,lt=$e,it=!1;const tt=$e+1;$e>=x?(Be="bomb",ke=!0,console.log(`[GoldBarsGameBoard]  Bomb: Player already opened all ${x} gold bars (currentScore=${$e})`)):tt>x?(Be="bomb",ke=!0,console.log(`[GoldBarsGameBoard]  Bomb: Opening this tile would exceed totalGoldBars (${x})`)):Oe===x&&tt===x?(Be="gold",lt=tt,it=!0,ke=!0,console.log(`[GoldBarsGameBoard]  Reached all gold bars! (targetScore=${Oe} === totalGoldBars=${x})`)):Oe<x&&$e===Oe?(Be="bomb",ke=!0,console.log(`[GoldBarsGameBoard]  Bomb: Player reached targetScore (${Oe} < ${x})`)):Oe<x&&tt===Oe?(Be="gold",lt=tt,console.log(`[GoldBarsGameBoard]  Gold: Player will reach targetScore (${Oe}) after this tile`)):Oe>=x?(Be="gold",lt=tt,console.log(`[GoldBarsGameBoard]  Gold: targetScore (${Oe}) >= totalGoldBars (${x}), opening gold bar ${tt}/${x}`)):Ue!==null&&Ce===Ue?(Be="bomb",ke=!0,console.log(`[GoldBarsGameBoard]  Bomb: Fallback check - bombClick=${Ue}`)):(Be="gold",lt=tt,console.log(`[GoldBarsGameBoard]  Gold: Default case - opening gold bar ${tt}`)),console.log(`[GoldBarsGameBoard] Tile clicked: index=${J}, clickNumber=${Ce}, bombClick=${Ue}, currentScore=${$e}, targetScore=${Oe}, tileType=${Be}, shouldEndGame=${ke}`),R(Ye=>Ye[J]?.selected||Ye[J]?.revealed?Ye:Ye.map(xt=>xt.index===J?{...xt,type:Be,selected:!0,revealed:!0}:xt)),C(Ye=>{const yn=Ye.players.map(xt=>(r?xt.pubkey===r:xt.username===l)?{...xt,openedTileCount:Ce,currentScore:lt,isScoreRevealed:ke?!0:xt.isScoreRevealed,reachedAllGoldBars:it,selections:[...xt.selections,J]}:xt);return{...Ye,players:yn}}),ke&&(console.log(`[GoldBarsGameBoard]  Player ${it?"reached all gold bars":"hit bomb"} on ${Ce}-th click!`),B(!0),$.current&&($.current(),$.current=null,Z.current=!1),H<=0&&C(Ye=>({...Ye,status:"revealing"})),R(Ye=>bM(Ye,J,x,p,Be==="gold",lt,Oe)),_.current=!0)},[A.status,j,l,r,A.players,k,x,p]);ve.useLayoutEffect(()=>{de.current=re},[re]),D.useEffect(()=>{if(A.status!=="playing"){U.current&&(clearInterval(U.current),U.current=null);return}if(U.current)return;const J=setInterval(()=>{V(le=>{const je=le>0?le-1:0;if(je<=0){const Ne=U.current;return Ne&&(clearInterval(Ne),U.current=null),0}return je})},1e3);return U.current=J,q.current=J,()=>{const le=q.current;le&&(clearInterval(le),U.current===le&&(U.current=null)),q.current=null}},[A.status]),D.useEffect(()=>{if(H<=0&&A.status==="playing"){if(Z.current)return;if(j)C(J=>({...J,status:"revealing"}));else{Z.current=!0;const J=r?A.players.find(le=>le.pubkey===r):A.players.find(le=>le.username===l);if(J&&N.current!==null){if(!de.current){setTimeout(()=>{if(de.current&&H<=0&&A.status==="playing"){const Ue=N.current,$e=J.openedTileCount||0,Oe=J.targetScore;$.current&&$.current();const Be=ry(k,Ue,$e,Oe,x,ke=>{de.current&&de.current(ke,!0)},()=>{setTimeout(()=>{C(ke=>ke.status==="playing"?{...ke,status:"revealing"}:ke)},500)});$.current=Be}},100);return}const le=N.current,je=J.openedTileCount||0,Ne=J.targetScore;$.current&&$.current();const Ce=ry(k,le,je,Ne,x,Ue=>{if(j){$.current&&($.current(),$.current=null,Z.current=!1);return}de.current&&de.current(Ue,!0)},()=>{setTimeout(()=>{C(Ue=>Ue.status==="playing"?{...Ue,status:"revealing"}:Ue)},500),Z.current=!1});$.current=Ce}else Z.current=!1,C(le=>({...le,status:"revealing"}))}}(H>0||A.status!=="playing")&&(Z.current=!1)},[H,A.status,j,l,r,A.players,k,x]),D.useEffect(()=>()=>{Q.current=!1,T.current=!1,M.current=!1,U.current&&(clearInterval(U.current),U.current=null),P.current.forEach(J=>clearTimeout(J)),$.current&&($.current(),$.current=null),Z.current=!1,F.current&&(clearTimeout(F.current),F.current=null),N.current=null,_.current=!1},[]);const ie=D.useRef(g);D.useEffect(()=>{ie.current=g},[g]),D.useEffect(()=>{A.status!=="revealing"||M.current||(console.log("[GoldBarsGameBoard] Processing game completion, status=revealing"),M.current=!0,P.current.forEach(J=>clearTimeout(J)),L(new Map),P.current=new Map,$.current&&($.current(),$.current=null),R(J=>J.map(je=>je.revealed?je:{...je,revealed:!0})),C(J=>{const le=J.players.map(Ce=>{if(r?Ce.pubkey===r:Ce.username===l)return Ce;let $e=Ce.targetScore;return $e>x&&($e=x),$e<0&&($e=0),Ce.currentScore===0||Ce.currentScore<$e?(console.log(`[GoldBarsGameBoard] Updating AI player ${Ce.username}: currentScore=${Ce.currentScore} -> ${$e} (targetScore=${Ce.targetScore})`),{...Ce,currentScore:$e,isScoreRevealed:!0}):Ce});console.log("[GoldBarsGameBoard] Calculating result when status=revealing");const je=wM(le,a,t,l,r,d);console.log("[GoldBarsGameBoard] Calculated result:",je),Y(je);const Ne={...je,gameType:yt.GoldBars};return setTimeout(()=>{ie.current&&ie.current(Ne)},0),{...J,players:le}}))},[A.status,A.players,a,t,l,r,d,x]),D.useEffect(()=>()=>{P.current.forEach(J=>clearTimeout(J)),$.current&&$.current(),U.current&&clearInterval(U.current)},[]);const be=D.useMemo(()=>t==="Solo"?!1:!A.players.some(le=>le.isScoreRevealed===!0),[t,A.players]);if(O)return u.jsx(cm,{players:A.players,maxPlayers:v,timeRemaining:H,onCancel:()=>C(J=>({...J,status:"finished"}))});if(G)return u.jsxs("div",{className:"text-center py-12",children:[u.jsx("div",{className:"text-6xl mb-4",style:{animation:"spin 1s linear infinite"},children:""}),u.jsx("h2",{className:"text-2xl font-display font-bold text-sol-purple mb-2",children:"Loading Battle..."}),u.jsx("p",{className:"text-txt-muted",children:"Preparing your match with epic rewards!"})]});const fe=r?A.players.find(J=>J.pubkey===r):A.players.find(J=>J.username===l);return u.jsx(u.Fragment,{children:u.jsx(um,{gameName:m.name,stakeSol:a,matchType:t,timeRemaining:H,players:A.players,currentPlayer:l,currentPlayerPubkey:r,gameStatus:A.status,gameResult:W,shouldHideScores:ee,hideTeamScores:be,gameType:yt.GoldBars,gameMode:s,children:l!==""||h?u.jsx(yM,{gameMode:s,tiles:k,onTileClick:re,disabled:A.status!=="playing"||j,currentPlayer:l,playerSelections:fe?.selections||[],gameEnded:j}):u.jsx("div",{className:"text-center py-12",children:u.jsxs("div",{className:"glass-card p-8 max-w-md mx-auto",children:[u.jsx("h3",{className:"text-2xl font-bold text-sol-purple mb-4",children:" Spectator Mode"}),u.jsx("p",{className:"text-txt-muted",children:"You are watching this match as a spectator. The game board is hidden, but you can see all player scores and team progress above."})]})})})})},SM=()=>{const[s,t]=D.useState("PickHigher"),[a,o]=D.useState("PickThreeFromNine"),[l,r]=D.useState("Solo"),[d,f]=D.useState(!1),[g,h]=D.useState(!1),[m,w]=D.useState(0),[x,p]=D.useState(.1),[v,b]=D.useState(null),k=s==="Plinko"?[{mode:"Plinko3Balls",label:"3 Balls",icon:""},{mode:"Plinko5Balls",label:"5 Balls",icon:""},{mode:"Plinko7Balls",label:"7 Balls",icon:""}]:s==="Miner"?[{mode:"Miner1v9",label:"1v9",icon:""},{mode:"Miner3v16",label:"3v16",icon:""},{mode:"Miner5v25",label:"5v25",icon:""}]:s==="GoldBars"?[{mode:"GoldBars1v9",label:"1v9",icon:""},{mode:"GoldBars3v16",label:"3v16",icon:""},{mode:"GoldBars5v25",label:"5v25",icon:""}]:[{mode:"PickThreeFromNine",label:"3v9",icon:""},{mode:"PickFiveFromSixteen",label:"5v16",icon:""},{mode:"PickOneFromThree",label:"1v3",icon:""}],R=[{type:"Solo",label:"1v1",description:"Solo"},{type:"Duo",label:"2v2",description:"Duo"},{type:"Team",label:"5v5",description:"Team"}],j=()=>{window.scrollTo({top:0,behavior:"smooth"}),f(!0);const I=[.1,.5,1],L=I[Math.floor(Math.random()*I.length)];p(L),setTimeout(()=>{f(!1),h(!0),w(P=>P+1),setTimeout(()=>window.scrollTo({top:0,behavior:"smooth"}),100)},5e3)},B=I=>{if(console.log("Game completed:",I),console.log("Game type:",I.gameType),console.log("Is Miner?",I.gameType===yt.Miner),console.log("PlayerResults:",I.playerResults),console.log("[GameDemo] Result keys:",Object.keys(I)),console.log("[GameDemo] Result has gameType:","gameType"in I),console.log("[GameDemo] Result has playerResults:","playerResults"in I),s==="Miner"){const L={...I,gameType:I.gameType||yt.Miner,playerResults:I.playerResults||I.playerResults||{}};console.log("[GameDemo] Final Miner result:",L),console.log("[GameDemo] Final gameType:",L.gameType),console.log("[GameDemo] Final playerResults:",L.playerResults),b(L)}else b(I)},M=()=>{f(!1),h(!1),w(I=>I+1)};if(d){const I=l==="Solo"?1:l==="Duo"?2:5,L=[["@demo_player","@ai_opponent","@test_user","@random_guy","@mock_player"],["@bot_alpha","@bot_beta","@bot_gamma","@bot_delta","@bot_omega"]];return u.jsx(bb,{team1:{name:"Team 1",players:L[0].slice(0,I).map(P=>P)},team2:{name:"Team 2",players:L[1].slice(0,I).map(P=>P)},statusMessages:["Connecting to Solana","Creating demo arena",`Preparing ${I}v${I} match`,"Loading game board","Match starting soon"]})}return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"relative min-h-screen bg-bg overflow-hidden",children:[u.jsx(nn,{}),u.jsxs("div",{className:"relative z-10 max-w-7xl mx-auto px-1 md:px-6 py-2 md:py-8",children:[u.jsxs(ye.div,{className:"text-center mb-4 md:mb-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[u.jsx("h1",{className:"text-4xl md:text-5xl font-display font-bold text-txt-base mb-4",children:" Game Demo"}),u.jsx("p",{className:"text-lg text-txt-muted max-w-2xl mx-auto",children:"Experience the thrill of Solana PvP gaming. Choose your game mode and battle against AI opponents!"})]}),g?u.jsxs("div",{className:"space-y-6",children:[u.jsx("div",{className:"flex justify-center",children:u.jsx(Se,{variant:"ghost",onClick:M,className:"text-txt-muted hover:text-txt-base",children:"Reset Game"})}),s==="Miner"?u.jsx(hm,{gameMode:a,matchType:l,stakeSol:x,players:bf(l,"You",a).map(I=>({id:I.pubkey||I.username,username:I.username,pubkey:I.pubkey,targetScore:I.targetScore,currentScore:I.currentScore,selections:I.selections,isReady:I.isReady,isScoreRevealed:!1,willWin:I.willWin,isAlive:I.isAlive,openedTileCount:I.openedTileCount})),currentPlayer:"You",timeLimit:20,onGameComplete:B,isDemoMode:!0},m):s==="GoldBars"?u.jsx(Rb,{gameMode:a,matchType:l,stakeSol:x,players:bf(l,"You",a).map(I=>({id:I.pubkey||I.username,username:I.username,pubkey:I.pubkey,targetScore:I.targetScore,currentScore:I.currentScore,selections:I.selections,isReady:I.isReady,isScoreRevealed:!1,openedTileCount:I.openedTileCount||0,reachedAllGoldBars:!1})),currentPlayer:"You",timeLimit:20,onGameComplete:B,isDemoMode:!0},m):u.jsx(vb,{gameType:s==="Plinko"?yt.Plinko:yt.PickHigher,gameMode:a,teamSize:l,stakeSol:x,players:bf(l,"You",a),currentPlayer:"You",timeLimit:20,onGameComplete:B,isDemoMode:!0},m)]}):u.jsxs("div",{className:"space-y-4 md:space-y-6",children:[u.jsxs(Le,{className:"p-4 md:p-6 mt-4 md:mt-8",children:[u.jsx(Ht,{children:u.jsx(Pt,{className:"md:text-2xl text-lg font-display text-sol-purple",children:"Game"})}),u.jsxs("div",{className:"flex gap-3 md:gap-4 overflow-x-scroll pb-2 -mx-1 px-1 mt-0 game-scroll",children:[u.jsxs("button",{onClick:()=>{t("PickHigher"),o("PickThreeFromNine")},className:Nt("flex-shrink-0 flex flex-col items-center justify-center gap-2 p-4 rounded-xl border-2 transition-all min-w-[100px]",s==="PickHigher"?"bg-gradient-to-br from-green-500 to-emerald-600 border-green-400/50 shadow-lg":"bg-white/5 border-white/10 hover:bg-white/10"),children:[u.jsx("div",{className:"text-4xl md:text-5xl",children:""}),u.jsx("span",{className:"text-sm font-semibold text-white",children:"Pick Higher"})]}),u.jsxs("button",{onClick:()=>{t("GoldBars"),o("GoldBars1v9")},className:Nt("flex-shrink-0 flex flex-col items-center justify-center gap-2 p-4 rounded-xl border-2 transition-all min-w-[100px]",s==="GoldBars"?"bg-gradient-to-br from-yellow-500 to-orange-600 border-yellow-400/50 shadow-lg":"bg-white/5 border-white/10 hover:bg-white/10"),children:[u.jsx("div",{className:"text-4xl md:text-5xl",children:""}),u.jsx("span",{className:"text-sm font-semibold text-white",children:"Gold Bars"})]}),u.jsxs("button",{onClick:()=>{t("Plinko"),o("Plinko3Balls")},className:Nt("flex-shrink-0 flex flex-col items-center justify-center gap-2 p-4 rounded-xl border-2 transition-all min-w-[100px]",s==="Plinko"?"bg-gradient-to-br from-purple-500 to-pink-600 border-purple-400/50 shadow-lg":"bg-white/5 border-white/10 hover:bg-white/10"),children:[u.jsx("div",{className:"text-4xl md:text-5xl",children:""}),u.jsx("span",{className:"text-sm font-semibold text-white",children:"Plinko"})]}),u.jsxs("button",{onClick:()=>{t("Miner"),o("Miner1v9")},className:Nt("flex-shrink-0 flex flex-col items-center justify-center gap-2 p-4 rounded-xl border-2 transition-all min-w-[100px]",s==="Miner"?"bg-gradient-to-br from-red-500 to-orange-600 border-red-400/50 shadow-lg":"bg-white/5 border-white/10 hover:bg-white/10"),children:[u.jsx("div",{className:"text-4xl md:text-5xl",children:""}),u.jsx("span",{className:"text-sm font-semibold text-white",children:"Miner"})]})]})]}),u.jsxs(Le,{className:"p-4 md:p-6",children:[u.jsx(Ht,{children:u.jsx(Pt,{className:"md:text-2xl text-lg font-display text-sol-purple",children:"Game mode"})}),u.jsx("div",{className:"grid grid-cols-3 gap-3 md:gap-4 mt-3 md:mt-4",children:k.map(({mode:I,label:L,icon:P},U)=>{const H=a===I?["mint","orange","blue"][U]:"ghost";return u.jsxs(Se,{variant:H,onClick:()=>o(I),className:"flex flex-col items-center space-y-1 p-3 h-16",children:[u.jsx("span",{className:"text-2xl",children:P}),u.jsx("span",{className:"text-sm font-medium",children:L})]},I)})})]}),u.jsxs(Le,{className:"p-4 md:p-6",children:[u.jsx(Ht,{children:u.jsx(Pt,{className:"md:text-2xl text-lg font-display text-sol-purple",children:"Match Type"})}),u.jsx("div",{className:"grid grid-cols-3 gap-3 md:gap-4 mt-0 md:mt-4",children:R.map(({type:I,label:L,description:P},U)=>{const H=l===I?["blue","purple","orange"][U]:"ghost";return u.jsxs(Se,{variant:H,onClick:()=>r(I),className:"flex flex-col items-center space-y-1 p-3 h-16",children:[u.jsx("span",{className:"text-lg font-bold",children:L}),u.jsx("span",{className:"text-xs",children:P})]},I)})})]}),u.jsxs(Le,{className:"p-4 md:p-6",children:[u.jsx(Ht,{children:u.jsx(Pt,{className:"md:text-2xl text-lg font-display text-sol-purple",children:"Game Information"})}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6 mt-0 md:mt-4",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold text-txt-base mb-2",children:"How to Play"}),u.jsx("ul",{className:"text-sm text-txt-muted space-y-1",children:s==="Plinko"?u.jsxs(u.Fragment,{children:[u.jsxs("li",{children:[" Drop"," ",a==="Plinko3Balls"?"3":a==="Plinko5Balls"?"5":"7"," ","balls down the board"]}),u.jsx("li",{children:" Each ball bounces off pins and lands in a slot"}),u.jsx("li",{children:" Reach your target score to win"}),u.jsx("li",{children:" Edge slots give higher scores"})]}):s==="Miner"?u.jsxs(u.Fragment,{children:[u.jsx("li",{children:" Open tiles until you find a prize or bomb"}),u.jsxs("li",{children:[""," ",a==="Miner1v9"?"1 prize, 1 bomb in 9 tiles":a==="Miner3v16"?"3 prizes, 3 bombs in 16 tiles":"5 prizes, 5 bombs in 25 tiles"]}),u.jsx("li",{children:" Find prize to win, hit bomb to lose"}),u.jsx("li",{children:" Game ends immediately when you find prize or bomb"})]}):s==="GoldBars"?u.jsxs(u.Fragment,{children:[u.jsx("li",{children:" Open tiles to find gold bars. Each gold bar = +1 score"}),u.jsxs("li",{children:[""," ",a==="GoldBars1v9"?"8 gold bars, 1 bomb in 9 tiles":a==="GoldBars3v16"?"13 gold bars, 3 bombs in 16 tiles":"20 gold bars, 5 bombs in 25 tiles"]}),u.jsx("li",{children:" When you reach targetScore, next tile is a bomb"}),u.jsx("li",{children:" If targetScore = all gold bars, you win!"})]}):u.jsxs(u.Fragment,{children:[u.jsxs("li",{children:[""," ",a==="PickThreeFromNine"?"Pick 3 from 9 tiles":a==="PickFiveFromSixteen"?"Pick 5 from 16 tiles":"Pick 1 from 3 cards"]}),u.jsx("li",{children:" Each selection reveals a point value"}),u.jsx("li",{children:" Reach your target score to win"}),u.jsx("li",{children:" Higher values give you better chances"})]})})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold text-txt-base mb-2",children:"Demo Features"}),u.jsxs("ul",{className:"text-sm text-txt-muted space-y-1",children:[u.jsx("li",{children:" Play against AI opponents"}),u.jsx("li",{children:" Experience real game mechanics"}),u.jsx("li",{children:" No real SOL required"}),u.jsx("li",{children:" Full animations and effects"})]})]})]})]}),u.jsx(ye.div,{className:"text-center",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3},children:u.jsx(Se,{size:"lg",variant:"neon",onClick:j,className:"text-xl px-8 py-4 min-w-[200px]",children:"Start Demo Game"})})]}),u.jsx(ye.div,{className:"text-center mt-12",initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.5},children:u.jsx("p",{className:"text-sm text-txt-muted",children:"This is a demo version. In real games, you'll compete for actual SOL rewards!"})})]})]}),v&&u.jsx(u.Fragment,{children:v.gameType===yt.Miner||s==="Miner"?u.jsx(yb,{isOpen:!!v,onClose:()=>{b(null)},onPlayAgain:()=>{b(null),M()},result:{...v,gameType:yt.Miner,playerResults:v.playerResults||{}},isDemoMode:!0}):v.gameType===yt.GoldBars||s==="GoldBars"?u.jsx(Sb,{isOpen:!!v,onClose:()=>{b(null)},onPlayAgain:()=>{b(null),M()},result:{...v,gameType:yt.GoldBars},isDemoMode:!0}):u.jsx(wb,{isOpen:!!v,onClose:()=>{b(null)},onPlayAgain:()=>{b(null),M()},result:v,isDemoMode:!0})})]})};function NM(){const{program:s,publicKey:t,isInitialized:a}=qs(),[o,l]=D.useState(null),[r,d]=D.useState(!1),[f,g]=D.useState(null),[h,m]=D.useState(!1),w=D.useCallback(async()=>{if(!s||!t||!a){l(null);return}if(!h)try{d(!0),g(null);const[p]=la.getActiveLobbyPda(t),v=await s.account.activeLobby.fetchNullable(p);l(v),m(!0),v&&console.log("[useActiveLobby] User has active lobby:",v.lobby.toString())}catch(p){const v=oa(p);g(v),console.error("[useActiveLobby] Failed to fetch active lobby:",p),l(null),m(!0)}finally{d(!1)}},[s,t,a,h]);D.useEffect(()=>{w()},[t?.toString(),a]);const x=D.useCallback(async()=>{m(!1),await w()},[w]);return{activeLobby:o,hasActiveLobby:!!o,isLoading:r,error:f,refetch:x}}const _M=()=>{const s=ka(),{publicKey:t,connected:a}=fs(),{isInitialized:o}=qs(),{createLobby:l,refundLobby:r,isCreating:d,isRefunding:f}=em(),{hasActiveLobby:g,activeLobby:h,isLoading:m}=NM(),[w,x]=D.useState("PickHigher"),[p,v]=D.useState("Pick3from9"),[b,N]=D.useState(1),[_,A]=D.useState(.1),[C,k]=D.useState(0),[R]=D.useState(Date.now());D.useEffect(()=>{w==="PickHigher"?v("Pick3from9"):w==="GoldBars"?v("GoldBars1v9"):w==="Plinko"?v("Plinko3Balls"):w==="Miner"&&v("Miner1v9")},[w]);const[j,B]=D.useState(null),[M,I]=D.useState(null),[L,P]=D.useState(null),[U,q]=D.useState(null),[H,V]=D.useState(null),[$,Z]=D.useState(0),{lobby:Q}=Ec(h?.lobby),F=[{mode:"Pick3from9",label:"3v9",icon:""},{mode:"Pick5from16",label:"5v16",icon:""},{mode:"Pick1from3",label:"1v3",icon:""}],T=[{mode:"Plinko3Balls",label:"3 Balls",icon:""},{mode:"Plinko5Balls",label:"5 Balls",icon:""},{mode:"Plinko7Balls",label:"7 Balls",icon:""}],O=[{mode:"GoldBars1v9",label:"1v9",icon:""},{mode:"GoldBars3v16",label:"3v16",icon:""},{mode:"GoldBars5v25",label:"5v25",icon:""}],G=[{mode:"Miner1v9",label:"1v9",icon:""},{mode:"Miner3v16",label:"3v16",icon:""},{mode:"Miner5v25",label:"5v25",icon:""}],W=[{size:1,label:"1v1",description:"Solo"},{size:2,label:"2v2",description:"Duo"},{size:5,label:"5v5",description:"Team"}];D.useEffect(()=>{(async()=>{if(t&&a)try{const be=await new Vf("https://api.devnet.solana.com").getBalance(t);Z(be/ra)}catch(ie){console.error("Failed to fetch balance:",ie)}})()},[t,a]),D.useEffect(()=>{const re=Tx/ra;_<re?B(`Minimum stake is ${re} SOL`):B(null)},[_]);const Y=async()=>{if(!a||!t){I("Connect your wallet to create a match"),setTimeout(()=>I(null),5e3);return}if(g&&h){I("You already have an active lobby. Please finish or cancel it first."),setTimeout(()=>I(null),5e3);return}if(j){I(j),setTimeout(()=>I(null),5e3);return}if($<_){I(`Insufficient funds (need ${_} SOL, have ${$.toFixed(2)} SOL)`),setTimeout(()=>I(null),5e3);return}if(!o){I("Program not initialized. Please wait..."),setTimeout(()=>I(null),5e3);return}try{const re=Math.floor(_*ra),ie={Pick3from9:"PickHigher3v9",Pick5from16:"PickHigher5v16",Pick1from3:"PickHigher1v3",GoldBars1v9:"GoldBars1v9",GoldBars3v16:"GoldBars3v16",GoldBars5v25:"GoldBars5v25",Plinko3Balls:"Plinko3Balls",Plinko5Balls:"Plinko5Balls",Plinko7Balls:"Plinko7Balls",Miner1v9:"Miner1v9",Miner3v16:"Miner3v16",Miner5v25:"Miner5v25"},be={1:"1v1",2:"2v2",5:"5v5"};console.log("[CreateLobby] Creating lobby with params:",{lobbyId:R,teamSize:b,stakeLamports:re,side:C,creator:t.toString(),game:w,gameMode:ie[p],arenaType:"SingleBattle",teamSizeStr:be[b]});const fe=await l({lobbyId:R,teamSize:b,stakeLamports:re,side:C,game:w,gameMode:ie[p],arenaType:"SingleBattle",teamSizeStr:be[b]});console.log("[CreateLobby] Transaction successful:",fe),P("Lobby created successfully! Redirecting...");const[J]=la.getLobbyPda(t,R);console.log("[CreateLobby] Lobby PDA:",J.toString()),setTimeout(()=>{s(`/match/${J.toString()}`)},1e3)}catch(re){console.error("[CreateLobby] Failed to create lobby:",re);let ie="Failed to create lobby";if(re?.message?ie=re.message:typeof re=="string"?ie=re:re?.toString&&(ie=re.toString()),ie.toLowerCase().includes("already been processed")){console.log("[CreateLobby] Transaction was already processed - treating as success"),P("Lobby created successfully! Redirecting...");const[fe]=la.getLobbyPda(t,R);console.log("[CreateLobby] Lobby PDA:",fe.toString()),setTimeout(()=>{s(`/match/${fe.toString()}`)},1e3)}else I(ie),setTimeout(()=>I(null),5e3)}},ee=async()=>{if(!(!h||!t||!Q))try{q(null),V(null);const re=[...Q.team1,...Q.team2];console.log("[CreateLobby] Requesting refund for lobby:",h.lobby.toString()),console.log("[CreateLobby] Participants:",re.map(be=>be.toString()));const ie=await r({lobbyPda:h.lobby,creator:Q.creator,participants:re});console.log("[CreateLobby] Refund successful! Transaction:",ie),V("Refund successful! Your funds have been returned."),setTimeout(()=>{window.location.reload()},2e3)}catch(re){console.error("[CreateLobby] Refund failed:",re),q(re.message||"Failed to refund lobby"),setTimeout(()=>q(null),5e3)}},de=()=>!(!a||!t||g||j||_<Tx/ra||$<_||!o||m);return u.jsxs("div",{className:"relative min-h-screen bg-bg py-4 lg:py-8 overflow-hidden",children:[u.jsx(nn,{}),u.jsxs("div",{className:"relative z-10",children:[u.jsx($n,{children:M&&u.jsx(ye.div,{className:"fixed top-0 left-0 right-0 z-[100] flex justify-center md:pt-[8vh] pt-[6vh] px-3 pointer-events-none",initial:{opacity:0,y:-50},animate:{opacity:1,y:0},exit:{opacity:0,y:-50},transition:{duration:.4},children:u.jsx("div",{className:"glass-card p-4 border-yellow-500/50 bg-yellow-500/10 max-w-md w-full pointer-events-auto",children:u.jsx("p",{className:"text-yellow-400 text-sm text-center font-semibold",children:M})})})}),u.jsx($n,{children:L&&u.jsx(ye.div,{className:"fixed top-0 left-0 right-0 z-[100] flex justify-center md:pt-[6vh] pt-[6vh] px-3 pointer-events-none",initial:{opacity:0,y:-50},animate:{opacity:1,y:0},exit:{opacity:0,y:-50},transition:{duration:.4},children:u.jsx("div",{className:"glass-card p-4 border-sol-mint/50 bg-sol-mint/10 max-w-md w-full pointer-events-auto",children:u.jsx("p",{className:"text-sol-mint text-sm text-center font-semibold",children:L})})})}),u.jsxs("div",{className:"max-w-4xl mx-auto px-3 lg:px-6",children:[u.jsxs(ye.div,{className:"text-center mb-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[u.jsx("h1",{className:"text-4xl md:text-5xl font-display font-bold text-txt-base mb-4",children:" Create Match"}),u.jsx("p",{className:"text-lg text-txt-muted",children:"Choose your game mode, team size, and stake to start a new match"})]}),u.jsxs("div",{className:"space-y-4",children:[g&&h&&u.jsx(Le,{className:"p-6 border-2 border-yellow-500/50 bg-yellow-500/5 shadow-lg",children:u.jsxs("div",{className:"flex items-start gap-4",children:[u.jsx("div",{className:"flex-shrink-0",children:u.jsx("div",{className:"w-12 h-12 rounded-full bg-yellow-500/20 flex items-center justify-center",children:u.jsx("span",{className:"text-2xl",children:""})})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"text-yellow-400 font-bold text-lg mb-2",children:"You have an active lobby"}),u.jsx("div",{className:"space-y-2 mb-4",children:u.jsx("p",{className:"text-sm text-txt-muted",children:"Please finish or request a refund for your current lobby before creating a new one."})}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx(Se,{variant:"neon",size:"sm",onClick:()=>s(`/match/${h.lobby.toString()}`),className:"flex-1",children:"View"}),u.jsx(Se,{variant:"ghost",size:"sm",onClick:ee,disabled:f||!Q,className:"flex-1 border-red-500/50 hover:border-red-500 text-red-400",children:f?"...":"Refund"})]}),U&&u.jsx("p",{className:"text-red-400 text-sm mt-3 p-2 bg-red-500/10 rounded",children:U}),H&&u.jsx("p",{className:"text-sol-mint text-sm mt-3 p-2 bg-sol-mint/10 rounded",children:H})]})]})}),u.jsxs(Le,{className:"p-4",children:[u.jsx(Ht,{children:u.jsx(Pt,{className:"text-lg font-display text-txt-base",children:"Game"})}),u.jsxs("div",{className:"flex gap-3 md:gap-4 overflow-x-scroll pb-2 -mx-1 px-1 mt-4 game-scroll",children:[u.jsxs("button",{onClick:()=>x("PickHigher"),className:Nt("flex-shrink-0 flex flex-col items-center justify-center gap-2 p-4 rounded-xl border-2 transition-all min-w-[100px]",w==="PickHigher"?"bg-gradient-to-br from-green-500 to-emerald-600 border-green-400/50 shadow-lg":"bg-white/5 border-white/10 hover:bg-white/10"),children:[u.jsx("div",{className:"text-4xl md:text-5xl",children:""}),u.jsx("span",{className:"text-sm font-semibold text-white",children:"Pick Higher"})]}),u.jsxs("button",{onClick:()=>x("GoldBars"),className:Nt("flex-shrink-0 flex flex-col items-center justify-center gap-2 p-4 rounded-xl border-2 transition-all min-w-[100px]",w==="GoldBars"?"bg-gradient-to-br from-yellow-500 to-orange-600 border-yellow-400/50 shadow-lg":"bg-white/5 border-white/10 hover:bg-white/10"),children:[u.jsx("div",{className:"text-4xl md:text-5xl",children:""}),u.jsx("span",{className:"text-sm font-semibold text-white",children:"Gold Bars"})]}),u.jsxs("button",{onClick:()=>x("Plinko"),className:Nt("flex-shrink-0 flex flex-col items-center justify-center gap-2 p-4 rounded-xl border-2 transition-all min-w-[100px]",w==="Plinko"?"bg-gradient-to-br from-purple-500 to-pink-600 border-purple-400/50 shadow-lg":"bg-white/5 border-white/10 hover:bg-white/10"),children:[u.jsx("div",{className:"text-4xl md:text-5xl",children:""}),u.jsx("span",{className:"text-sm font-semibold text-white",children:"Plinko"})]}),u.jsxs("button",{onClick:()=>x("Miner"),className:Nt("flex-shrink-0 flex flex-col items-center justify-center gap-2 p-4 rounded-xl border-2 transition-all min-w-[100px]",w==="Miner"?"bg-gradient-to-br from-red-500 to-orange-600 border-red-400/50 shadow-lg":"bg-white/5 border-white/10 hover:bg-white/10"),children:[u.jsx("div",{className:"text-4xl md:text-5xl",children:""}),u.jsx("span",{className:"text-sm font-semibold text-white",children:"Miner"})]})]})]}),(w==="PickHigher"||w==="GoldBars"||w==="Plinko"||w==="Miner")&&u.jsxs(Le,{className:"p-4",children:[u.jsx(Ht,{children:u.jsx(Pt,{className:"text-lg font-display text-txt-base",children:"Game mode"})}),u.jsx("div",{className:"grid grid-cols-3 gap-3 md:gap-4 mt-1",children:w==="PickHigher"?F.map(({mode:re,label:ie,icon:be},fe)=>{const le=p===re?["mint","orange","blue"][fe]:"ghost";return u.jsxs(Se,{variant:le,onClick:()=>v(re),className:"flex flex-col items-center space-y-1 p-3 h-18",children:[u.jsx("span",{className:"text-xl md:text-2xl",children:be}),u.jsx("span",{className:"text-xs md:text-sm font-medium",children:ie})]},re)}):w==="GoldBars"?O.map(({mode:re,label:ie,icon:be},fe)=>{const le=p===re?["mint","orange","blue"][fe]:"ghost";return u.jsxs(Se,{variant:le,onClick:()=>v(re),className:"flex flex-col items-center space-y-1 p-3 h-18",children:[u.jsx("span",{className:"text-xl md:text-2xl",children:be}),u.jsx("span",{className:"text-xs md:text-sm font-medium",children:ie})]},re)}):w==="Plinko"?T.map(({mode:re,label:ie,icon:be},fe)=>{const le=p===re?["mint","orange","blue"][fe]:"ghost";return u.jsxs(Se,{variant:le,onClick:()=>v(re),className:"flex flex-col items-center space-y-1 p-3 h-18",children:[u.jsx("span",{className:"text-xl md:text-2xl",children:be}),u.jsx("span",{className:"text-xs md:text-sm font-medium",children:ie})]},re)}):w==="Miner"?G.map(({mode:re,label:ie,icon:be},fe)=>{const le=p===re?["mint","orange","blue"][fe]:"ghost";return u.jsxs(Se,{variant:le,onClick:()=>v(re),className:"flex flex-col items-center space-y-1 p-3 h-18",children:[u.jsx("span",{className:"text-xl md:text-2xl",children:be}),u.jsx("span",{className:"text-xs md:text-sm font-medium",children:ie})]},re)}):u.jsx(u.Fragment,{children:[{label:"3x5",icon:""},{label:"5x7",icon:""},{label:"7x10",icon:""}].map(re=>u.jsxs(Se,{variant:"ghost",disabled:!0,className:"flex flex-col items-center space-y-1 p-3 h-18 opacity-50 cursor-not-allowed",children:[u.jsx("span",{className:"text-xl md:text-2xl",children:re.icon}),u.jsx("span",{className:"text-xs md:text-sm font-medium",children:re.label})]},re.label))})})]}),u.jsxs(Le,{className:"p-4",children:[u.jsx(Ht,{children:u.jsx(Pt,{className:"text-xl font-display text-sol-purple",children:"Team Size"})}),u.jsx("div",{className:"grid grid-cols-3 gap-3 md:gap-4 mt-1",children:W.map(({size:re,label:ie,description:be},fe)=>{const le=b===re?["purple","blue","orange"][fe]:"ghost";return u.jsxs(Se,{variant:le,onClick:()=>N(re),className:"flex flex-col items-center space-y-1 p-3 h-18",children:[u.jsx("span",{className:"text-sm md:text-lg font-bold",children:ie}),u.jsx("span",{className:"text-xs",children:be})]},re)})})]}),u.jsxs(Le,{className:"p-4",children:[u.jsx(Ht,{children:u.jsx(Pt,{className:"text-xl font-display text-sol-purple",children:"Stake Amount"})}),u.jsx("div",{className:"mt-1",children:u.jsxs("div",{className:"flex flex-col space-y-4",children:[u.jsx("input",{type:"number",min:"0.05",step:"0.01",value:_,onChange:re=>A(parseFloat(re.target.value)||.05),className:`px-4 py-3 bg-transparent border rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-sol-purple ${j?"border-red-500 focus:ring-red-500":"border-sol-purple/30"}`,placeholder:"0.10"}),j&&u.jsx("p",{className:"text-sm text-red-400",children:j}),u.jsx("div",{className:"flex gap-2",children:[.05,.1,.5,1,2].map(re=>u.jsx(Se,{variant:"ghost",size:"sm",onClick:()=>A(re),className:"flex-1 text-xs md:text-sm",children:re},re))}),u.jsx("p",{className:"text-sm text-txt-muted",children:"Minimum: 0.05 SOL"})]})})]}),u.jsxs(Le,{className:"p-4",children:[u.jsx(Ht,{children:u.jsx(Pt,{className:"text-xl font-display text-sol-purple",children:"Your Team"})}),u.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-1",children:[u.jsx(Se,{variant:C===0?"blue":"ghost",onClick:()=>k(0),className:"p-4 h-18",children:u.jsxs("div",{className:"flex flex-col items-center",children:[u.jsx("span",{className:"text-lg font-bold",children:"Team 1"}),u.jsx("span",{className:"text-xs",children:"Left Side"})]})}),u.jsx(Se,{variant:C===1?"orange":"ghost",onClick:()=>k(1),className:"p-4 h-18",children:u.jsxs("div",{className:"flex flex-col items-center",children:[u.jsx("span",{className:"text-lg font-bold",children:"Team 2"}),u.jsx("span",{className:"text-xs",children:"Right Side"})]})})]})]}),u.jsxs("div",{className:"flex gap-4",children:[u.jsx(Se,{variant:"neon",onClick:Y,disabled:d,className:`flex-1 ${de()?"":"opacity-50 cursor-not-allowed"}`,children:d?"Creating...":"Create Match"}),u.jsx(Se,{variant:"ghost",onClick:()=>s("/matches"),className:"flex-1",children:"Cancel"})]})]})]})]})]})},RM=eb(s=>({isConnected:!1,isConnecting:!1,connectionError:null,reconnectAttempts:0,connect:async()=>{s({isConnecting:!0,connectionError:null});try{await Tt.connect(),s({isConnected:!0,isConnecting:!1,connectionError:null,reconnectAttempts:0})}catch(t){console.error("WebSocket connection failed:",t),s({isConnected:!1,isConnecting:!1,connectionError:t.message||"Connection failed"})}},disconnect:async()=>{s({isConnecting:!0});try{await Tt.disconnect(),s({isConnected:!1,isConnecting:!1,connectionError:null})}catch(t){console.error("WebSocket disconnection failed:",t),s({isConnecting:!1,connectionError:t.message||"Disconnection failed"})}},setConnected:t=>{s({isConnected:t})},setConnecting:t=>{s({isConnecting:t})},setConnectionError:t=>{s({connectionError:t})},setReconnectAttempts:t=>{s({reconnectAttempts:t})},joinLobby:async()=>{try{await Tt.joinLobby()}catch(t){console.error("Failed to join lobby:",t)}},leaveLobby:async()=>{try{await Tt.leaveLobby()}catch(t){console.error("Failed to leave lobby:",t)}},joinMatchGroup:async t=>{try{await Tt.joinMatchGroup(t)}catch(a){console.error("Failed to join match group:",a)}},leaveMatchGroup:async t=>{try{await Tt.leaveMatchGroup(t)}catch(a){console.error("Failed to leave match group:",a)}},onMatchCreated:t=>{Tt.on("matchCreated",t)},onMatchJoined:t=>{Tt.on("matchJoined",t)},onMatchInProgress:t=>{Tt.on("matchInProgress",t)},onMatchFinalized:t=>{Tt.on("matchFinalized",t)},onMatchRefunded:t=>{Tt.on("matchRefunded",t)},onFeedAppend:t=>{Tt.on("feed:append",t)},onInvitationReceived:t=>{Tt.on("invitationReceived",t)},onInvitationAccepted:t=>{Tt.on("invitationAccepted",t)},onInvitationDeclined:t=>{Tt.on("invitationDeclined",t)},onInvitationCancelled:t=>{Tt.on("invitationCancelled",t)},removeAllListeners:()=>{console.log("Remove all listeners called - not implemented")}})),EM=()=>{const{matchPda:s}=$f(),t=ka(),{publicKey:a,connected:o}=fs(),{joinLobby:l,refundLobby:r,isJoining:d,isRefunding:f}=em(),g=s&&!s.startsWith("mock-")?new Ze(s):void 0,{lobby:h,isLoading:m,error:w,refetch:x}=Ec(g),[p,v]=D.useState(null),[b,N]=D.useState(null),_=s?.startsWith("mock-")?p:h,A=s?.startsWith("mock-")?p===null:m,C=s?.startsWith("mock-")?null:w,[k,R]=D.useState(null),[j,B]=D.useState(!1),[M,I]=D.useState("preview"),[L,P]=D.useState(null),U=D.useRef(null),[q,H]=D.useState(0),[V,$]=D.useState(0),[Z,Q]=D.useState(null),[F,T]=D.useState({}),[O,G]=D.useState(20),W=D.useRef(null),[Y,ee]=D.useState(!1),[de,re]=D.useState(null),{onMatchInProgress:ie,onMatchFinalized:be,onMatchJoined:fe}=RM();D.useEffect(()=>((async()=>{if(!(!s||s.startsWith("mock-")))try{console.log(" [MatchPreview] Loading match from backend:",s);const _e=await ls.getMatch(s);console.log(" [MatchPreview] Backend match status:",_e.status),N(_e)}catch(_e){console.log(" [MatchPreview] Match not in backend yet (normal for new lobbies)"),console.error(" [MatchPreview] Error loading match from backend:",_e)}})(),()=>{W.current&&(clearTimeout(W.current),W.current=null)}),[s]),D.useEffect(()=>{const xe=async Ie=>{if(console.log(" [MatchPreview] Match InProgress event received:",Ie),Ie.matchPda===s&&s){console.log(" [MatchPreview] This is OUR match! Updating backend data..."),N(Ie);try{const Pe=await ls.getMatch(s);N(Pe),console.log(" [MatchPreview] Full match data fetched:",Pe)}catch(Pe){console.error(" [MatchPreview] Failed to fetch full match data:",Pe)}}},_e=Ie=>{console.log(" [MatchPreview] Match finalized event received:",Ie),Ie.matchPda===s&&(console.log(" [MatchPreview] This is OUR match! Match complete!"),N(Ie))},He=async Ie=>{if(console.log(" [MatchPreview] Match joined event received:",Ie),Ie.matchPda===s){console.log(" [MatchPreview] This is OUR match! Updating backend data..."),N(Ie),console.log(" [MatchPreview] Starting polling for InProgress status...");let Pe=0;const ft=setInterval(async()=>{Pe++;try{const bt=await ls.getMatch(s);console.log(`[MatchPreview] Poll ${Pe}/60 - Status: ${bt.status}`),bt.status==="InProgress"||bt.status==="Resolved"?(console.log(" [MatchPreview] Match became InProgress! Updating..."),clearInterval(ft),N(bt)):Pe>=60&&(console.log(" [MatchPreview] Polling timeout (60 attempts)"),clearInterval(ft))}catch(bt){console.error("[MatchPreview] Polling error:",bt)}},1e3)}};ie(xe),be(_e),fe(He)},[s,ie,be,fe]),D.useEffect(()=>{if(M==="game"){const xe=()=>{const He=b?.gameStartTime||b?.gameData?.generatedAt||void 0,Ie=zf(He,20);G(Ie)};xe();const _e=setInterval(xe,1e3);return()=>clearInterval(_e)}},[M,b?.gameStartTime,b?.gameData?.generatedAt]),D.useEffect(()=>{(async()=>{if(!_)return;const _e=[..._.team1,..._.team2],He={};await Promise.all(_e.map(async Ie=>{const Pe=Ie.toString();try{const ft=await zs.getUser(Pe);He[Pe]=ft.username}catch{console.debug(`Could not fetch username for ${Pe}`)}})),T(He)})()},[_]),D.useEffect(()=>{if(!a||!o){console.log(" [MatchPreview] Wallet not connected yet, waiting...");return}if(!_&&!b){console.log(" [MatchPreview] Match data not loaded yet, waiting...");return}let xe=!1;_&&(xe=[..._.team1,..._.team2].some(Pe=>Pe.toString()===a.toString()));let _e=!1;b?.participants&&(_e=b.participants.some(Ie=>Ie.pubkey===a.toString()));const He=xe||_e;B(!He),console.log(He?" [MatchPreview] User IS participant, can play game":" [MatchPreview] User is viewer, cannot play")},[_,a,o,b]),D.useEffect(()=>{(async()=>{if(a&&o)try{const He=await new Vf("https://api.devnet.solana.com").getBalance(a);H(He/ra)}catch(_e){console.error("Failed to fetch balance:",_e)}})()},[a,o]),D.useEffect(()=>{if(!_)return;const xe=()=>{const He=Date.now()/1e3;if(b?.status==="Resolved"&&b?.resolvedAt){const Da=new Date(b.resolvedAt).getTime()/1e3+20,Xs=Math.max(0,Da-He);$(Math.floor(Xs));return}const Ie=_.createdAt.toNumber(),Pe=He-Ie,ft=_.teamSize===1?120:_.teamSize===2?300:600,bt=Math.max(0,ft-Pe);$(Math.floor(bt))};xe();const _e=setInterval(xe,1e3);return()=>clearInterval(_e)},[_,b]),D.useEffect(()=>{if(!_)return;const xe=b?.status||_.status;console.log(" [MatchPreview] Effective status:",xe,"(backend:",b?.status,", chain:",_.status,")"),xe==="Open"&&!V5(_)?I("preview"):xe==="Pending"?I("preparing"):xe==="InProgress"?I(L?"game":"preparing"):xe==="Resolved"?M==="game"&&!W.current?W.current=setTimeout(()=>{I("results"),W.current=null},2e4):M!=="game"&&I("results"):I("preview")},[_,L,b,M]),D.useEffect(()=>{if(M==="preparing"&&_&&s){const xe=async()=>{try{console.log("[MatchPreview] Polling for game data from backend...");const _e=await ls.getMatch(s);if(_e.gameData&&_e.participants){console.log("[MatchPreview] Game data received from backend"),console.log("[MatchPreview] Usernames mapping:",F),console.log("[MatchPreview] Participants:",_e.participants);const Ie=[..._e.participants].sort((ft,bt)=>ft.side!==bt.side?ft.side-bt.side:ft.position-bt.position).map(ft=>{const bt=ft.username||F[ft.pubkey]||ft.pubkey.substring(0,8)+"...";console.log(`[MatchPreview] Player ${ft.pubkey.substring(0,8)}: side=${ft.side}, position=${ft.position}, username from backend = ${ft.username}, from mapping = ${F[ft.pubkey]}, final = ${bt}`);const Qi=ft.targetScore||0,Da=_e.gameType==="Miner"?Qi===1:void 0;return{username:bt,pubkey:ft.pubkey,targetScore:Qi,currentScore:0,selections:[],isReady:!0,willWin:Da}});console.log("[MatchPreview] Backend gameData:",_e.gameData);const Pe=dC(_e.gameData.gameMode);console.log("[MatchPreview] Mapped gameMode:",Pe),console.log("[MatchPreview] Players:",Ie),P({players:Ie,gameMode:Pe})}}catch(_e){console.error("[MatchPreview] Failed to poll game data:",_e)}};return xe(),U.current=setInterval(xe,2e3),()=>{U.current&&(clearInterval(U.current),U.current=null)}}},[M,_,s,F]),D.useEffect(()=>{if(!s||!s.startsWith("mock-"))return;const xe={bump:255,lobbyId:new sn(1),creator:new Ze("11111111111111111111111111111111"),stakeLamports:new sn(2.5*1e9),teamSize:3,team1:[new Ze("11111111111111111111111111111112"),new Ze("11111111111111111111111111111113")],team2:[new Ze("11111111111111111111111111111114")],status:Tn.Open,createdAt:new sn(Math.floor(Date.now()/1e3)),finalized:!1,vrfSeed:Array(32).fill(0),vrfRequest:new Ze("11111111111111111111111111111115"),winnerSide:0,game:"PickHigher",gameMode:"PickHigher3v9",arenaType:"SingleBattle",teamSizeStr:"5v5"};setTimeout(()=>{v(xe)},500)},[s]);const J=async xe=>{if(!(!a||!s||!_))try{R(null);const _e=new Ze(s);console.log("[MatchPreview] Joining lobby:",{lobbyPda:_e.toString(),creator:_.creator.toString(),player:a.toString(),side:xe});const He=await l({lobbyPda:_e,creator:_.creator,side:xe});console.log("[MatchPreview] Join transaction successful:",He),await x(),console.log("[MatchPreview] Starting to poll for match status updates...");let Ie=0;const Pe=60,ft=setInterval(async()=>{Ie++,console.log(`[MatchPreview] Polling attempt ${Ie}/${Pe}`);try{const bt=await ls.getMatch(s);console.log("[MatchPreview] Polled match status:",bt.status),bt.status==="InProgress"||bt.status==="Resolved"?(console.log("[MatchPreview]  Match started! Status:",bt.status),clearInterval(ft),N(bt),await x()):Ie>=Pe&&(console.log("[MatchPreview]  Polling timeout reached, reloading page..."),clearInterval(ft),window.location.reload())}catch(bt){console.error("[MatchPreview] Polling error:",bt),Ie>=Pe&&(clearInterval(ft),window.location.reload())}},1e3)}catch(_e){console.error("[MatchPreview] Failed to join lobby:",_e),R(_e.message||"Failed to join match")}},le=xe=>{console.log("Game completed:",xe),re(xe),ee(!0)},je=()=>{W.current&&(clearTimeout(W.current),W.current=null),t("/matches")},Ne=()=>{W.current&&(clearTimeout(W.current),W.current=null),t("/leaderboard")},Ce=()=>{W.current&&(clearTimeout(W.current),W.current=null),I("results")},Ue=xe=>{if(!_||!o||!a||_.status!==Tn.Open||lt()||V<=2)return!1;const He=(xe===0?_.team1:_.team2).length<_.teamSize,Ie=_.stakeLamports.toNumber()/ra,Pe=q>=Ie;return He&&Pe},$e=xe=>{if(!_)return"Match not found";if(!o||!a)return"Connect your wallet to join";if(_.status!==Tn.Open)return"Match is not open";if(lt())return"You are already in this match";const He=(xe===0?_.team1:_.team2).length<_.teamSize,Ie=_.stakeLamports.toNumber()/ra,Pe=q>=Ie;return He?Pe?null:`Insufficient funds (need ${Ie} SOL, have ${q.toFixed(2)} SOL)`:"Team is full"},Oe=xe=>{const _e=$e(xe);if(_e){Q(_e),setTimeout(()=>Q(null),5e3);return}J(xe)},Be=async()=>{if(!a||!s||!_)return;if(!(_.creator.toString()===a?.toString())){R("Only the lobby creator can request a refund");return}try{R(null);const _e=new Ze(s),He=[..._.team1,..._.team2];console.log("[MatchPreview] Requesting refund:",{lobbyPda:_e.toString(),creator:_.creator.toString(),requester:a.toString(),participantsCount:He.length});const Ie=await r({lobbyPda:_e,creator:_.creator,participants:He,lobbyAccount:_});console.log("[MatchPreview] Refund transaction successful:",Ie),setTimeout(()=>{t("/matches")},1500)}catch(_e){console.error("[MatchPreview] Failed to refund:",_e),R(_e.message||"Failed to refund")}},ke=()=>{if(!_||!a||_.status!==Tn.Open||!(_.creator.toString()===a?.toString()))return!1;const _e=_.createdAt.toNumber(),Ie=Date.now()/1e3-_e,Pe=_.teamSize===1?120:_.teamSize===2?300:600;return Ie>=Pe},lt=()=>!_||!a?!1:[..._.team1,..._.team2].some(_e=>_e.toString()===a?.toString()),it=xe=>{switch(xe){case Tn.Open:return"text-green-400";case Tn.Pending:return"text-yellow-400";case Tn.Resolved:return"text-blue-400";case Tn.Refunded:return"text-gray-400";default:return"text-txt-muted"}},tt=()=>(_?.arenaType||b?.matchMode||"SingleBattle")==="DeathMatch"?"Death Match":"Single Battle",Ye=xe=>{const _e=Math.floor(xe/60),He=xe%60;return`${_e.toString().padStart(2,"0")}:${He.toString().padStart(2,"0")}`},yn=xe=>xe.length<=8?xe:`${xe.slice(0,4)}...${xe.slice(-4)}`,xt=xe=>{const _e=b?.participants?.find(He=>He.pubkey===xe);return _e?.username?_e.username:F[xe]||yn(xe)},vn=()=>b?.participants?b.participants.filter(xe=>xe.side===0).sort((xe,_e)=>xe.position-_e.position).map(xe=>xe.pubkey):[],rn=()=>b?.participants?b.participants.filter(xe=>xe.side===1).sort((xe,_e)=>xe.position-_e.position).map(xe=>xe.pubkey):[];if(A)return u.jsxs("div",{className:"relative min-h-screen bg-bg py-4 lg:py-8 overflow-hidden",children:[u.jsx(nn,{}),u.jsxs("div",{className:"max-w-4xl mx-auto px-3 lg:px-4",children:[u.jsx(vt,{className:"h-20 w-full mb-4 lg:mb-6"}),u.jsx(vt,{className:"h-64 w-full mb-4 lg:mb-6"}),u.jsx(vt,{className:"h-64 w-full mb-4 lg:mb-6"})]})]});if(!_&&!A)return u.jsxs("div",{className:"relative min-h-screen bg-bg flex items-center justify-center overflow-hidden",children:[u.jsx(nn,{}),u.jsxs(Le,{className:"p-8 text-center",children:[u.jsx("h2",{className:"text-2xl font-bold text-txt-base mb-4",children:"Match Not Found"}),u.jsx("p",{className:"text-txt-muted mb-6",children:C||"This match does not exist or has been removed"}),u.jsx(Se,{onClick:()=>t("/matches"),variant:"neon",children:"Go Back"})]})]});if(!_)return null;const Wn=_.stakeLamports.toNumber()/ra,ca=vn().length/_.teamSize*100,Oc=rn().length/_.teamSize*100;return M==="game"&&L?u.jsxs("div",{className:"relative min-h-screen bg-bg py-4 lg:py-8 overflow-hidden",children:[u.jsx(nn,{}),u.jsxs("div",{className:"max-w-7xl mx-auto px-3 lg:px-6",children:[u.jsx(ye.div,{className:"text-center mb-4 lg:mb-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:u.jsxs("h1",{className:"text-xl lg:text-4xl font-display font-bold text-txt-base mb-2",children:[tt()," #",_.lobbyId.toString()]})}),b?.gameType==="Miner"?u.jsx(hm,{gameMode:L.gameMode,matchType:xf(b?.teamSize||"OneVOne"),stakeSol:Wn,players:L.players.map(xe=>({id:xe.pubkey||xe.username,username:xe.username,pubkey:xe.pubkey,targetScore:xe.targetScore,currentScore:xe.currentScore,selections:xe.selections,isReady:xe.isReady,isScoreRevealed:!1,willWin:xe.willWin,isAlive:xe.isAlive,openedTileCount:xe.openedTileCount})),currentPlayer:j?"":"You",currentPlayerPubkey:j?void 0:a?.toBase58(),matchFromBackend:b,timeLimit:O,onGameComplete:le,isDemoMode:!1}):b?.gameType==="GoldBars"?u.jsx(Rb,{gameMode:L.gameMode,matchType:xf(b?.teamSize||"OneVOne"),stakeSol:Wn,players:L.players.map(xe=>({id:xe.pubkey||xe.username,username:xe.username,pubkey:xe.pubkey,targetScore:xe.targetScore,currentScore:xe.currentScore,selections:xe.selections,isReady:xe.isReady,isScoreRevealed:!1,openedTileCount:xe.openedTileCount||0,reachedAllGoldBars:!1})),currentPlayer:j?"":"You",currentPlayerPubkey:j?void 0:a?.toBase58(),matchFromBackend:b,timeLimit:O,onGameComplete:le,isDemoMode:!1}):u.jsx(vb,{gameType:b?.gameType==="Plinko"?yt.Plinko:yt.PickHigher,gameMode:L.gameMode,matchMode:lm.Team,teamSize:xf(b?.teamSize||"OneVOne"),stakeSol:Wn,players:L.players,currentPlayer:j?"":"You",currentPlayerPubkey:j?void 0:a?.toBase58(),matchFromBackend:b,timeLimit:O,onGameComplete:le,isDemoMode:!1}),u.jsx("div",{className:"mt-8 flex justify-center",children:u.jsx(Se,{variant:"ghost",onClick:()=>t("/matches"),children:"Exit Match"})})]}),b?.gameType==="Miner"?u.jsx(yb,{isOpen:Y,result:de,onClose:()=>ee(!1),onPlayAgain:je,onViewLeaderboard:Ne,onBackToLobby:Ce,isDemoMode:!1}):b?.gameType==="GoldBars"?u.jsx(Sb,{isOpen:Y,result:de,onClose:()=>ee(!1),onPlayAgain:je,onViewLeaderboard:Ne,onBackToLobby:Ce,isDemoMode:!1}):u.jsx(wb,{isOpen:Y,result:de,onClose:()=>ee(!1),onPlayAgain:je,onViewLeaderboard:Ne,onBackToLobby:Ce,isDemoMode:!1})]}):u.jsxs("div",{className:"relative min-h-screen bg-bg py-4 lg:py-8 overflow-hidden",children:[u.jsx(nn,{}),u.jsxs("div",{className:"relative z-10",children:[u.jsx($n,{children:Z&&u.jsx(ye.div,{className:"fixed top-0 left-0 right-0 z-[100] flex justify-center md:pt-[6vh] pt-[6vh] px-3 pointer-events-none",initial:{opacity:0,y:-50},animate:{opacity:1,y:0},exit:{opacity:0,y:-50},transition:{duration:.4},children:u.jsx("div",{className:"glass-card p-4 border-yellow-500/50 bg-yellow-500/10 max-w-md w-full pointer-events-auto",children:u.jsx("p",{className:"text-yellow-400 text-sm text-center font-semibold",children:Z})})})}),u.jsx($n,{children:M==="preparing"&&u.jsx(ye.div,{className:"fixed inset-0 z-50 pt-[6vh] md:pt-[6vh]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:u.jsx(bb,{team1:{name:"Team 1",players:vn().map(xe=>`@${xt(xe)}`)},team2:{name:"Team 2",players:rn().map(xe=>`@${xt(xe)}`)},statusMessages:["Connecting to Solana","Creating new arena",`Preparing ${_.teamSize}v${_.teamSize} match`,"Waiting for VRF","Locking escrow...","Match starting soon"]})})}),u.jsxs("div",{className:"max-w-6xl mx-auto px-3 lg:px-6",children:[u.jsx(ye.div,{className:"text-center mb-4 lg:mb-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:u.jsxs("h1",{className:"text-xl lg:text-4xl font-display font-bold text-txt-base mb-2",children:[tt()," #",_.lobbyId.toString()]})}),u.jsx(Le,{className:"p-3 lg:p-6 mb-3 lg:mb-4",children:u.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 text-center",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-xs lg:text-sm text-txt-muted mb-1",children:"Status"}),u.jsx("p",{className:`text-sm lg:text-lg font-semibold ${it(_.status)}`,children:_.status})]}),u.jsxs("div",{children:[u.jsx("p",{className:"text-xs lg:text-sm text-txt-muted mb-1",children:"Stake"}),u.jsxs("p",{className:"text-sm lg:text-lg font-semibold text-txt-base",children:[Wn," SOL"]})]}),u.jsxs("div",{children:[u.jsx("p",{className:"text-xs lg:text-sm text-txt-muted mb-1",children:"Time"}),u.jsx("p",{className:"text-sm lg:text-lg font-semibold text-txt-base",children:Ye(V)})]}),u.jsxs("div",{children:[u.jsx("p",{className:"text-xs lg:text-sm text-txt-muted mb-1",children:"Game"}),u.jsx("p",{className:"text-sm lg:text-lg font-semibold text-txt-base",children:(()=>{const xe=_?.game||b?.gameType||"PickHigher";return xe==="PickHigher"?"Pick Higher":xe==="Plinko"?" Plinko":xe})()})]}),u.jsxs("div",{children:[u.jsx("p",{className:"text-xs lg:text-sm text-txt-muted mb-1",children:"Game Mode"}),u.jsx("p",{className:"text-sm lg:text-lg font-semibold text-txt-base",children:(()=>{const xe=_?.gameMode||b?.gameMode||"PickHigher3v9";return xe==="Plinko3Balls"?" 3 balls":xe==="Plinko5Balls"?" 5 balls":xe==="Plinko7Balls"?" 7 balls":xe})()})]}),u.jsxs("div",{children:[u.jsx("p",{className:"text-xs lg:text-sm text-txt-muted mb-1",children:"Team Size"}),u.jsx("p",{className:"text-sm lg:text-lg font-semibold text-txt-base",children:_?.teamSizeStr||b?.teamSize||`${_.teamSize}v${_.teamSize}`})]})]})}),u.jsxs("div",{className:"grid grid-cols-2 gap-4 lg:gap-6 mb-6",children:[u.jsxs(Le,{className:`p-4 ${b?.status==="Resolved"&&b?.winnerSide===0?"border-2 border-sol-mint shadow-glow-mint":""}`,children:[u.jsx(Ht,{children:u.jsxs(Pt,{className:"text-base lg:text-xl font-display text-sol-purple flex items-center justify-between",children:[u.jsxs("span",{children:["Team 1 (",vn().length,"/",_.teamSize,")"]}),b?.status==="Resolved"&&b?.winnerSide===0&&u.jsx("span",{className:"text-green-400 font-bold text-xs",children:"WIN"})]})}),u.jsx("div",{className:"mt-2 lg:mt-4 space-y-1 lg:space-y-2",children:Array.from({length:_.teamSize}).map((xe,_e)=>{const Ie=vn()[_e];return u.jsx("div",{className:"p-2 lg:p-3 bg-bg-dark rounded-lg flex items-center gap-2",children:Ie?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"w-1.5 h-1.5 lg:w-2 lg:h-2 bg-green-400 rounded-full flex-shrink-0"}),u.jsx("span",{className:"text-txt-base text-xs lg:text-sm flex-1 truncate",children:xt(Ie)}),a?.toString()===Ie&&u.jsx("span",{className:"text-xs text-sol-purple flex-shrink-0",children:"You"})]}):u.jsx("span",{className:"text-txt-muted text-xs lg:text-sm",children:"Empty slot"})},_e)})}),u.jsx("div",{className:"mt-2 lg:mt-4",children:u.jsx("div",{className:"h-1.5 lg:h-2 bg-bg-dark rounded-full overflow-hidden",children:u.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-purple-500 transition-all duration-300",style:{width:`${ca}%`}})})}),_.status===Tn.Open&&!lt()&&u.jsx("div",{className:"mt-3 lg:mt-4",children:u.jsx(Se,{variant:"blue",size:"sm",onClick:()=>Oe(0),disabled:d,className:`w-full ${Ue(0)?"":"opacity-50 cursor-not-allowed"}`,children:d?"Joining...":"Join Team 1"})})]}),u.jsxs(Le,{className:`p-4 ${b?.status==="Resolved"&&b?.winnerSide===1?"border-2 border-sol-mint shadow-glow-mint":""}`,children:[u.jsx(Ht,{children:u.jsxs(Pt,{className:"text-base lg:text-xl font-display text-sol-purple flex items-center justify-between",children:[u.jsxs("span",{children:["Team 2 (",rn().length,"/",_.teamSize,")"]}),b?.status==="Resolved"&&b?.winnerSide===1&&u.jsx("span",{className:"text-green-400 font-bold text-xs",children:"WIN"})]})}),u.jsx("div",{className:"mt-2 lg:mt-4 space-y-1 lg:space-y-2",children:Array.from({length:_.teamSize}).map((xe,_e)=>{const Ie=rn()[_e];return u.jsx("div",{className:"p-2 lg:p-3 bg-bg-dark rounded-lg flex items-center gap-2",children:Ie?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"w-1.5 h-1.5 lg:w-2 lg:h-2 bg-green-400 rounded-full flex-shrink-0"}),u.jsx("span",{className:"text-txt-base text-xs lg:text-sm flex-1 truncate",children:xt(Ie)}),a?.toString()===Ie&&u.jsx("span",{className:"text-xs text-sol-purple flex-shrink-0",children:"You"})]}):u.jsx("span",{className:"text-txt-muted text-xs lg:text-sm",children:"Empty slot"})},_e)})}),u.jsx("div",{className:"mt-2 lg:mt-4",children:u.jsx("div",{className:"h-1.5 lg:h-2 bg-bg-dark rounded-full overflow-hidden",children:u.jsx("div",{className:"h-full bg-gradient-to-r from-orange-500 to-red-500 transition-all duration-300",style:{width:`${Oc}%`}})})}),_.status===Tn.Open&&!lt()&&u.jsx("div",{className:"mt-3 lg:mt-4",children:u.jsx(Se,{variant:"orange",size:"sm",onClick:()=>Oe(1),disabled:d,className:`w-full ${Ue(1)?"":"opacity-50 cursor-not-allowed"}`,children:d?"Joining...":"Join Team 2"})})]})]}),!j&&lt()&&_.status===Tn.Open&&b?.status==="Open"&&u.jsxs(Le,{className:"p-6 mb-6 text-center",children:[u.jsx("p",{className:"text-sol-mint font-semibold",children:" You are already in this match"}),u.jsx("p",{className:"text-txt-muted text-sm mt-2",children:"Waiting for other players to join..."})]}),_.creator.toString()===a?.toString()&&!j&&_.status===Tn.Open&&b?.status==="Open"&&u.jsxs(Le,{className:"p-6 mb-6 border-red-500/30",children:[u.jsx(Ht,{children:u.jsx(Pt,{className:"text-xl font-display text-red-400",children:"Refund Match"})}),u.jsx("div",{className:"mt-4",children:ke()?u.jsxs(u.Fragment,{children:[u.jsx("p",{className:"text-sm text-txt-muted mb-4",children:"No one joined your match? Request a refund to get your stake back."}),u.jsx(Se,{variant:"ghost",onClick:Be,disabled:f,className:"w-full border-red-500/30",children:f?"Processing...":"Request Refund"})]}):u.jsxs("p",{className:"text-sm text-txt-muted",children:["Refund will be available in ",Ye(V)]})})]}),k&&u.jsx(Le,{className:"p-4 mb-6 border-red-500/50",children:u.jsx("p",{className:"text-red-400 text-sm",children:k})}),M==="results"&&b?.payoutTx&&u.jsx(ye.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-8",children:u.jsx(Le,{children:u.jsxs("div",{children:[u.jsx("h3",{className:"text-sm font-semibold text-txt-muted mb-2",children:"Blockchain Transaction"}),u.jsx("a",{href:`https://solscan.io/tx/${b.payoutTx}?cluster=devnet`,target:"_blank",rel:"noopener noreferrer",className:"text-sol-purple hover:text-sol-mint transition-colors break-all text-sm inline-flex items-center gap-1",children:u.jsx("span",{children:b.payoutTx})})]})})}),u.jsx("div",{className:"mt-8 flex justify-center",children:u.jsx(Se,{variant:"ghost",onClick:()=>t("/matches"),children:"Back to Matches"})})]})]})]})};function TM(){const{lobbyPda:s}=$f(),t=ka(),{program:a}=qs(),{publicKey:o}=fs(),{lobby:l,isLoading:r}=Ec(s?new Ze(s):void 0),[d,f]=D.useState(""),[g,h]=D.useState(!1),m=async()=>{if(!s||!l||!a||!o){alert("Lobby, program or wallet not found");return}try{h(!0),f("Sending force_refund transaction...");const[w]=la.getActiveLobbyPda(l.creator),x=[...l.team1,...l.team2];console.log("[ForceRefund] Lobby PDA:",s),console.log("[ForceRefund] Creator:",l.creator.toString()),console.log("[ForceRefund] Requester:",o.toString()),console.log("[ForceRefund] Participants:",x.map(v=>v.toString()));const p=await a.methods.forceRefund().accountsStrict({lobby:new Ze(s),creator:l.creator,requester:o,active:w,systemProgram:Kr.programId}).remainingAccounts(x.map(v=>({pubkey:v,isSigner:!1,isWritable:!0}))).rpc({skipPreflight:!1,commitment:"confirmed"});f(` Force refund successful! Signature: ${p}`),console.log(" Force refund transaction sent! Signature:",p),setTimeout(()=>{t("/")},3e3)}catch(w){console.error("Force refund error:",w),f(` Error: ${w.message||w}`),alert(`Error: ${w.message||w}`)}finally{h(!1)}};return r?u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-black flex items-center justify-center",children:u.jsx("div",{className:"text-white text-xl",children:"Loading lobby data..."})}):l?u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-black flex items-center justify-center p-4",children:u.jsxs("div",{className:"bg-black/50 backdrop-blur-xl border border-purple-500/30 rounded-2xl p-8 max-w-2xl w-full",children:[u.jsx("h1",{className:"text-3xl font-bold text-white mb-6",children:" Force Refund (ADMIN/CREATOR ONLY)"}),u.jsxs("div",{className:"space-y-4 mb-6",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-gray-400",children:"Lobby PDA:"}),u.jsx("p",{className:"text-white font-mono text-sm break-all",children:s})]}),u.jsxs("div",{children:[u.jsx("p",{className:"text-gray-400",children:"Creator:"}),u.jsx("p",{className:"text-white font-mono text-sm break-all",children:l.creator.toString()})]}),u.jsxs("div",{children:[u.jsx("p",{className:"text-gray-400",children:"Status:"}),u.jsx("p",{className:"text-white font-bold",children:l.status})]}),u.jsxs("div",{children:[u.jsx("p",{className:"text-gray-400",children:"Finalized:"}),u.jsx("p",{className:"text-white",children:l.finalized?"Yes":"No"})]}),u.jsxs("div",{children:[u.jsx("p",{className:"text-gray-400",children:"Team 1:"}),u.jsxs("p",{className:"text-white",children:[l.team1.length," players"]})]}),u.jsxs("div",{children:[u.jsx("p",{className:"text-gray-400",children:"Team 2:"}),u.jsxs("p",{className:"text-white",children:[l.team2.length," players"]})]}),u.jsxs("div",{children:[u.jsx("p",{className:"text-gray-400",children:"Total Participants:"}),u.jsx("p",{className:"text-white",children:l.team1.length+l.team2.length})]})]}),d&&u.jsx("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-4 mb-6",children:u.jsx("p",{className:"text-white font-mono text-sm break-all",children:d})}),u.jsx("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-4 mb-6",children:u.jsxs("p",{className:"text-yellow-400 text-sm",children:[" ",u.jsx("strong",{children:"Force Refund"})," bypasses status checks and works in ANY status.",u.jsx("br",{}),"Only use this to unstuck broken lobbies!",u.jsx("br",{}),u.jsx("br",{}),"You must be the creator or admin to use this."]})}),u.jsx("button",{onClick:m,disabled:g||!o,className:"w-full bg-red-600 hover:bg-red-700 disabled:bg-gray-600 text-white font-bold py-4 px-6 rounded-lg transition-all disabled:cursor-not-allowed",children:g?"Sending Force Refund...":" Force Refund"}),u.jsx("button",{onClick:()=>t("/"),className:"w-full mt-4 bg-gray-700 hover:bg-gray-600 text-white font-bold py-3 px-6 rounded-lg transition-all",children:" Back to Home"}),u.jsx("p",{className:"text-gray-500 text-sm mt-4 text-center",children:" This is a temporary testing endpoint. Will be removed in production."})]})}):u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-black flex items-center justify-center",children:u.jsx("div",{className:"text-white text-xl",children:"Lobby not found"})})}function AM(){return u.jsx(EA,{children:u.jsxs(VS,{children:[u.jsx(TA,{}),u.jsx(xA,{children:u.jsxs(FS,{children:[u.jsx(Pn,{path:Et.HOME,element:u.jsx(l3,{})}),u.jsx(Pn,{path:Et.MATCHES,element:u.jsx(c3,{})}),u.jsx(Pn,{path:Et.CREATE_LOBBY,element:u.jsx(_M,{})}),u.jsx(Pn,{path:Et.MATCH_PREVIEW,element:u.jsx(EM,{})}),u.jsx(Pn,{path:Et.GAME,element:u.jsx(u3,{})}),u.jsx(Pn,{path:"/f/:lobbyPda",element:u.jsx(TM,{})}),u.jsx(Pn,{path:"/demo",element:u.jsx(SM,{})}),u.jsx(Pn,{path:Et.LEADERBOARD,element:u.jsx(f3,{})}),u.jsx(Pn,{path:Et.PROFILE,element:u.jsx(zx,{children:u.jsx(Jx,{})})}),u.jsx(Pn,{path:Et.PROFILE_USER,element:u.jsx(zx,{children:u.jsx(Jx,{})})}),u.jsx(Pn,{path:Et.NOT_FOUND,element:u.jsx(ey,{})}),u.jsx(Pn,{path:"*",element:u.jsx(ey,{})})]})})]})})}bN.createRoot(document.getElementById("root")).render(u.jsx(D.StrictMode,{children:u.jsx(AM,{})}));
