import{r as de,R as Ba}from"./router-CiO_RyxF.js";import{b as Ra,g as ci}from"./vendor-Dcsd2E38.js";var Vs={},Fr={},gc;function Zf(){if(gc)return Fr;gc=1,Fr.byteLength=a,Fr.toByteArray=g,Fr.fromByteArray=E;for(var r=[],e=[],t=typeof Uint8Array<"u"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,i=n.length;s<i;++s)r[s]=n[s],e[n.charCodeAt(s)]=s;e[45]=62,e[95]=63;function o(b){var A=b.length;if(A%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var x=b.indexOf("=");x===-1&&(x=A);var C=x===A?0:4-x%4;return[x,C]}function a(b){var A=o(b),x=A[0],C=A[1];return(x+C)*3/4-C}function u(b,A,x){return(A+x)*3/4-x}function g(b){var A,x=o(b),C=x[0],P=x[1],W=new t(u(b,C,P)),N=0,V=P>0?C-4:C,Y;for(Y=0;Y<V;Y+=4)A=e[b.charCodeAt(Y)]<<18|e[b.charCodeAt(Y+1)]<<12|e[b.charCodeAt(Y+2)]<<6|e[b.charCodeAt(Y+3)],W[N++]=A>>16&255,W[N++]=A>>8&255,W[N++]=A&255;return P===2&&(A=e[b.charCodeAt(Y)]<<2|e[b.charCodeAt(Y+1)]>>4,W[N++]=A&255),P===1&&(A=e[b.charCodeAt(Y)]<<10|e[b.charCodeAt(Y+1)]<<4|e[b.charCodeAt(Y+2)]>>2,W[N++]=A>>8&255,W[N++]=A&255),W}function w(b){return r[b>>18&63]+r[b>>12&63]+r[b>>6&63]+r[b&63]}function S(b,A,x){for(var C,P=[],W=A;W<x;W+=3)C=(b[W]<<16&16711680)+(b[W+1]<<8&65280)+(b[W+2]&255),P.push(w(C));return P.join("")}function E(b){for(var A,x=b.length,C=x%3,P=[],W=16383,N=0,V=x-C;N<V;N+=W)P.push(S(b,N,N+W>V?V:N+W));return C===1?(A=b[x-1],P.push(r[A>>2]+r[A<<4&63]+"==")):C===2&&(A=(b[x-2]<<8)+b[x-1],P.push(r[A>>10]+r[A>>4&63]+r[A<<2&63]+"=")),P.join("")}return Fr}var wi={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var yc;function Jf(){return yc||(yc=1,wi.read=function(r,e,t,n,s){var i,o,a=s*8-n-1,u=(1<<a)-1,g=u>>1,w=-7,S=t?s-1:0,E=t?-1:1,b=r[e+S];for(S+=E,i=b&(1<<-w)-1,b>>=-w,w+=a;w>0;i=i*256+r[e+S],S+=E,w-=8);for(o=i&(1<<-w)-1,i>>=-w,w+=n;w>0;o=o*256+r[e+S],S+=E,w-=8);if(i===0)i=1-g;else{if(i===u)return o?NaN:(b?-1:1)*(1/0);o=o+Math.pow(2,n),i=i-g}return(b?-1:1)*o*Math.pow(2,i-n)},wi.write=function(r,e,t,n,s,i){var o,a,u,g=i*8-s-1,w=(1<<g)-1,S=w>>1,E=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,b=n?0:i-1,A=n?1:-1,x=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=w):(o=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-o))<1&&(o--,u*=2),o+S>=1?e+=E/u:e+=E*Math.pow(2,1-S),e*u>=2&&(o++,u/=2),o+S>=w?(a=0,o=w):o+S>=1?(a=(e*u-1)*Math.pow(2,s),o=o+S):(a=e*Math.pow(2,S-1)*Math.pow(2,s),o=0));s>=8;r[t+b]=a&255,b+=A,a/=256,s-=8);for(o=o<<s|a,g+=s;g>0;r[t+b]=o&255,b+=A,o/=256,g-=8);r[t+b-A]|=x*128}),wi}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var mc;function Ma(){return mc||(mc=1,(function(r){const e=Zf(),t=Jf(),n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=a,r.SlowBuffer=W,r.INSPECT_MAX_BYTES=50;const s=2147483647;r.kMaxLength=s,a.TYPED_ARRAY_SUPPORT=i(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{const v=new Uint8Array(1),d={foo:function(){return 42}};return Object.setPrototypeOf(d,Uint8Array.prototype),Object.setPrototypeOf(v,d),v.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function o(v){if(v>s)throw new RangeError('The value "'+v+'" is invalid for option "size"');const d=new Uint8Array(v);return Object.setPrototypeOf(d,a.prototype),d}function a(v,d,p){if(typeof v=="number"){if(typeof d=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return S(v)}return u(v,d,p)}a.poolSize=8192;function u(v,d,p){if(typeof v=="string")return E(v,d);if(ArrayBuffer.isView(v))return A(v);if(v==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof v);if(qt(v,ArrayBuffer)||v&&qt(v.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(qt(v,SharedArrayBuffer)||v&&qt(v.buffer,SharedArrayBuffer)))return x(v,d,p);if(typeof v=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const R=v.valueOf&&v.valueOf();if(R!=null&&R!==v)return a.from(R,d,p);const K=C(v);if(K)return K;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof v[Symbol.toPrimitive]=="function")return a.from(v[Symbol.toPrimitive]("string"),d,p);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof v)}a.from=function(v,d,p){return u(v,d,p)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function g(v){if(typeof v!="number")throw new TypeError('"size" argument must be of type number');if(v<0)throw new RangeError('The value "'+v+'" is invalid for option "size"')}function w(v,d,p){return g(v),v<=0?o(v):d!==void 0?typeof p=="string"?o(v).fill(d,p):o(v).fill(d):o(v)}a.alloc=function(v,d,p){return w(v,d,p)};function S(v){return g(v),o(v<0?0:P(v)|0)}a.allocUnsafe=function(v){return S(v)},a.allocUnsafeSlow=function(v){return S(v)};function E(v,d){if((typeof d!="string"||d==="")&&(d="utf8"),!a.isEncoding(d))throw new TypeError("Unknown encoding: "+d);const p=N(v,d)|0;let R=o(p);const K=R.write(v,d);return K!==p&&(R=R.slice(0,K)),R}function b(v){const d=v.length<0?0:P(v.length)|0,p=o(d);for(let R=0;R<d;R+=1)p[R]=v[R]&255;return p}function A(v){if(qt(v,Uint8Array)){const d=new Uint8Array(v);return x(d.buffer,d.byteOffset,d.byteLength)}return b(v)}function x(v,d,p){if(d<0||v.byteLength<d)throw new RangeError('"offset" is outside of buffer bounds');if(v.byteLength<d+(p||0))throw new RangeError('"length" is outside of buffer bounds');let R;return d===void 0&&p===void 0?R=new Uint8Array(v):p===void 0?R=new Uint8Array(v,d):R=new Uint8Array(v,d,p),Object.setPrototypeOf(R,a.prototype),R}function C(v){if(a.isBuffer(v)){const d=P(v.length)|0,p=o(d);return p.length===0||v.copy(p,0,0,d),p}if(v.length!==void 0)return typeof v.length!="number"||ze(v.length)?o(0):b(v);if(v.type==="Buffer"&&Array.isArray(v.data))return b(v.data)}function P(v){if(v>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return v|0}function W(v){return+v!=v&&(v=0),a.alloc(+v)}a.isBuffer=function(d){return d!=null&&d._isBuffer===!0&&d!==a.prototype},a.compare=function(d,p){if(qt(d,Uint8Array)&&(d=a.from(d,d.offset,d.byteLength)),qt(p,Uint8Array)&&(p=a.from(p,p.offset,p.byteLength)),!a.isBuffer(d)||!a.isBuffer(p))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(d===p)return 0;let R=d.length,K=p.length;for(let H=0,X=Math.min(R,K);H<X;++H)if(d[H]!==p[H]){R=d[H],K=p[H];break}return R<K?-1:K<R?1:0},a.isEncoding=function(d){switch(String(d).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(d,p){if(!Array.isArray(d))throw new TypeError('"list" argument must be an Array of Buffers');if(d.length===0)return a.alloc(0);let R;if(p===void 0)for(p=0,R=0;R<d.length;++R)p+=d[R].length;const K=a.allocUnsafe(p);let H=0;for(R=0;R<d.length;++R){let X=d[R];if(qt(X,Uint8Array))H+X.length>K.length?(a.isBuffer(X)||(X=a.from(X)),X.copy(K,H)):Uint8Array.prototype.set.call(K,X,H);else if(a.isBuffer(X))X.copy(K,H);else throw new TypeError('"list" argument must be an Array of Buffers');H+=X.length}return K};function N(v,d){if(a.isBuffer(v))return v.length;if(ArrayBuffer.isView(v)||qt(v,ArrayBuffer))return v.byteLength;if(typeof v!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof v);const p=v.length,R=arguments.length>2&&arguments[2]===!0;if(!R&&p===0)return 0;let K=!1;for(;;)switch(d){case"ascii":case"latin1":case"binary":return p;case"utf8":case"utf-8":return We(v).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return p*2;case"hex":return p>>>1;case"base64":return De(v).length;default:if(K)return R?-1:We(v).length;d=(""+d).toLowerCase(),K=!0}}a.byteLength=N;function V(v,d,p){let R=!1;if((d===void 0||d<0)&&(d=0),d>this.length||((p===void 0||p>this.length)&&(p=this.length),p<=0)||(p>>>=0,d>>>=0,p<=d))return"";for(v||(v="utf8");;)switch(v){case"hex":return L(this,d,p);case"utf8":case"utf-8":return c(this,d,p);case"ascii":return _(this,d,p);case"latin1":case"binary":return B(this,d,p);case"base64":return y(this,d,p);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return z(this,d,p);default:if(R)throw new TypeError("Unknown encoding: "+v);v=(v+"").toLowerCase(),R=!0}}a.prototype._isBuffer=!0;function Y(v,d,p){const R=v[d];v[d]=v[p],v[p]=R}a.prototype.swap16=function(){const d=this.length;if(d%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let p=0;p<d;p+=2)Y(this,p,p+1);return this},a.prototype.swap32=function(){const d=this.length;if(d%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let p=0;p<d;p+=4)Y(this,p,p+3),Y(this,p+1,p+2);return this},a.prototype.swap64=function(){const d=this.length;if(d%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let p=0;p<d;p+=8)Y(this,p,p+7),Y(this,p+1,p+6),Y(this,p+2,p+5),Y(this,p+3,p+4);return this},a.prototype.toString=function(){const d=this.length;return d===0?"":arguments.length===0?c(this,0,d):V.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(d){if(!a.isBuffer(d))throw new TypeError("Argument must be a Buffer");return this===d?!0:a.compare(this,d)===0},a.prototype.inspect=function(){let d="";const p=r.INSPECT_MAX_BYTES;return d=this.toString("hex",0,p).replace(/(.{2})/g,"$1 ").trim(),this.length>p&&(d+=" ... "),"<Buffer "+d+">"},n&&(a.prototype[n]=a.prototype.inspect),a.prototype.compare=function(d,p,R,K,H){if(qt(d,Uint8Array)&&(d=a.from(d,d.offset,d.byteLength)),!a.isBuffer(d))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof d);if(p===void 0&&(p=0),R===void 0&&(R=d?d.length:0),K===void 0&&(K=0),H===void 0&&(H=this.length),p<0||R>d.length||K<0||H>this.length)throw new RangeError("out of range index");if(K>=H&&p>=R)return 0;if(K>=H)return-1;if(p>=R)return 1;if(p>>>=0,R>>>=0,K>>>=0,H>>>=0,this===d)return 0;let X=H-K,we=R-p;const me=Math.min(X,we),ye=this.slice(K,H),Ue=d.slice(p,R);for(let ge=0;ge<me;++ge)if(ye[ge]!==Ue[ge]){X=ye[ge],we=Ue[ge];break}return X<we?-1:we<X?1:0};function $(v,d,p,R,K){if(v.length===0)return-1;if(typeof p=="string"?(R=p,p=0):p>2147483647?p=2147483647:p<-2147483648&&(p=-2147483648),p=+p,ze(p)&&(p=K?0:v.length-1),p<0&&(p=v.length+p),p>=v.length){if(K)return-1;p=v.length-1}else if(p<0)if(K)p=0;else return-1;if(typeof d=="string"&&(d=a.from(d,R)),a.isBuffer(d))return d.length===0?-1:Q(v,d,p,R,K);if(typeof d=="number")return d=d&255,typeof Uint8Array.prototype.indexOf=="function"?K?Uint8Array.prototype.indexOf.call(v,d,p):Uint8Array.prototype.lastIndexOf.call(v,d,p):Q(v,[d],p,R,K);throw new TypeError("val must be string, number or Buffer")}function Q(v,d,p,R,K){let H=1,X=v.length,we=d.length;if(R!==void 0&&(R=String(R).toLowerCase(),R==="ucs2"||R==="ucs-2"||R==="utf16le"||R==="utf-16le")){if(v.length<2||d.length<2)return-1;H=2,X/=2,we/=2,p/=2}function me(Ue,ge){return H===1?Ue[ge]:Ue.readUInt16BE(ge*H)}let ye;if(K){let Ue=-1;for(ye=p;ye<X;ye++)if(me(v,ye)===me(d,Ue===-1?0:ye-Ue)){if(Ue===-1&&(Ue=ye),ye-Ue+1===we)return Ue*H}else Ue!==-1&&(ye-=ye-Ue),Ue=-1}else for(p+we>X&&(p=X-we),ye=p;ye>=0;ye--){let Ue=!0;for(let ge=0;ge<we;ge++)if(me(v,ye+ge)!==me(d,ge)){Ue=!1;break}if(Ue)return ye}return-1}a.prototype.includes=function(d,p,R){return this.indexOf(d,p,R)!==-1},a.prototype.indexOf=function(d,p,R){return $(this,d,p,R,!0)},a.prototype.lastIndexOf=function(d,p,R){return $(this,d,p,R,!1)};function Z(v,d,p,R){p=Number(p)||0;const K=v.length-p;R?(R=Number(R),R>K&&(R=K)):R=K;const H=d.length;R>H/2&&(R=H/2);let X;for(X=0;X<R;++X){const we=parseInt(d.substr(X*2,2),16);if(ze(we))return X;v[p+X]=we}return X}function M(v,d,p,R){return Oe(We(d,v.length-p),v,p,R)}function O(v,d,p,R){return Oe(je(d),v,p,R)}function F(v,d,p,R){return Oe(De(d),v,p,R)}function D(v,d,p,R){return Oe(mi(d,v.length-p),v,p,R)}a.prototype.write=function(d,p,R,K){if(p===void 0)K="utf8",R=this.length,p=0;else if(R===void 0&&typeof p=="string")K=p,R=this.length,p=0;else if(isFinite(p))p=p>>>0,isFinite(R)?(R=R>>>0,K===void 0&&(K="utf8")):(K=R,R=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const H=this.length-p;if((R===void 0||R>H)&&(R=H),d.length>0&&(R<0||p<0)||p>this.length)throw new RangeError("Attempt to write outside buffer bounds");K||(K="utf8");let X=!1;for(;;)switch(K){case"hex":return Z(this,d,p,R);case"utf8":case"utf-8":return M(this,d,p,R);case"ascii":case"latin1":case"binary":return O(this,d,p,R);case"base64":return F(this,d,p,R);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,d,p,R);default:if(X)throw new TypeError("Unknown encoding: "+K);K=(""+K).toLowerCase(),X=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function y(v,d,p){return d===0&&p===v.length?e.fromByteArray(v):e.fromByteArray(v.slice(d,p))}function c(v,d,p){p=Math.min(v.length,p);const R=[];let K=d;for(;K<p;){const H=v[K];let X=null,we=H>239?4:H>223?3:H>191?2:1;if(K+we<=p){let me,ye,Ue,ge;switch(we){case 1:H<128&&(X=H);break;case 2:me=v[K+1],(me&192)===128&&(ge=(H&31)<<6|me&63,ge>127&&(X=ge));break;case 3:me=v[K+1],ye=v[K+2],(me&192)===128&&(ye&192)===128&&(ge=(H&15)<<12|(me&63)<<6|ye&63,ge>2047&&(ge<55296||ge>57343)&&(X=ge));break;case 4:me=v[K+1],ye=v[K+2],Ue=v[K+3],(me&192)===128&&(ye&192)===128&&(Ue&192)===128&&(ge=(H&15)<<18|(me&63)<<12|(ye&63)<<6|Ue&63,ge>65535&&ge<1114112&&(X=ge))}}X===null?(X=65533,we=1):X>65535&&(X-=65536,R.push(X>>>10&1023|55296),X=56320|X&1023),R.push(X),K+=we}return m(R)}const f=4096;function m(v){const d=v.length;if(d<=f)return String.fromCharCode.apply(String,v);let p="",R=0;for(;R<d;)p+=String.fromCharCode.apply(String,v.slice(R,R+=f));return p}function _(v,d,p){let R="";p=Math.min(v.length,p);for(let K=d;K<p;++K)R+=String.fromCharCode(v[K]&127);return R}function B(v,d,p){let R="";p=Math.min(v.length,p);for(let K=d;K<p;++K)R+=String.fromCharCode(v[K]);return R}function L(v,d,p){const R=v.length;(!d||d<0)&&(d=0),(!p||p<0||p>R)&&(p=R);let K="";for(let H=d;H<p;++H)K+=Ge[v[H]];return K}function z(v,d,p){const R=v.slice(d,p);let K="";for(let H=0;H<R.length-1;H+=2)K+=String.fromCharCode(R[H]+R[H+1]*256);return K}a.prototype.slice=function(d,p){const R=this.length;d=~~d,p=p===void 0?R:~~p,d<0?(d+=R,d<0&&(d=0)):d>R&&(d=R),p<0?(p+=R,p<0&&(p=0)):p>R&&(p=R),p<d&&(p=d);const K=this.subarray(d,p);return Object.setPrototypeOf(K,a.prototype),K};function I(v,d,p){if(v%1!==0||v<0)throw new RangeError("offset is not uint");if(v+d>p)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(d,p,R){d=d>>>0,p=p>>>0,R||I(d,p,this.length);let K=this[d],H=1,X=0;for(;++X<p&&(H*=256);)K+=this[d+X]*H;return K},a.prototype.readUintBE=a.prototype.readUIntBE=function(d,p,R){d=d>>>0,p=p>>>0,R||I(d,p,this.length);let K=this[d+--p],H=1;for(;p>0&&(H*=256);)K+=this[d+--p]*H;return K},a.prototype.readUint8=a.prototype.readUInt8=function(d,p){return d=d>>>0,p||I(d,1,this.length),this[d]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(d,p){return d=d>>>0,p||I(d,2,this.length),this[d]|this[d+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(d,p){return d=d>>>0,p||I(d,2,this.length),this[d]<<8|this[d+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(d,p){return d=d>>>0,p||I(d,4,this.length),(this[d]|this[d+1]<<8|this[d+2]<<16)+this[d+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(d,p){return d=d>>>0,p||I(d,4,this.length),this[d]*16777216+(this[d+1]<<16|this[d+2]<<8|this[d+3])},a.prototype.readBigUInt64LE=Gt(function(d){d=d>>>0,jt(d,"offset");const p=this[d],R=this[d+7];(p===void 0||R===void 0)&&Ce(d,this.length-8);const K=p+this[++d]*2**8+this[++d]*2**16+this[++d]*2**24,H=this[++d]+this[++d]*2**8+this[++d]*2**16+R*2**24;return BigInt(K)+(BigInt(H)<<BigInt(32))}),a.prototype.readBigUInt64BE=Gt(function(d){d=d>>>0,jt(d,"offset");const p=this[d],R=this[d+7];(p===void 0||R===void 0)&&Ce(d,this.length-8);const K=p*2**24+this[++d]*2**16+this[++d]*2**8+this[++d],H=this[++d]*2**24+this[++d]*2**16+this[++d]*2**8+R;return(BigInt(K)<<BigInt(32))+BigInt(H)}),a.prototype.readIntLE=function(d,p,R){d=d>>>0,p=p>>>0,R||I(d,p,this.length);let K=this[d],H=1,X=0;for(;++X<p&&(H*=256);)K+=this[d+X]*H;return H*=128,K>=H&&(K-=Math.pow(2,8*p)),K},a.prototype.readIntBE=function(d,p,R){d=d>>>0,p=p>>>0,R||I(d,p,this.length);let K=p,H=1,X=this[d+--K];for(;K>0&&(H*=256);)X+=this[d+--K]*H;return H*=128,X>=H&&(X-=Math.pow(2,8*p)),X},a.prototype.readInt8=function(d,p){return d=d>>>0,p||I(d,1,this.length),this[d]&128?(255-this[d]+1)*-1:this[d]},a.prototype.readInt16LE=function(d,p){d=d>>>0,p||I(d,2,this.length);const R=this[d]|this[d+1]<<8;return R&32768?R|4294901760:R},a.prototype.readInt16BE=function(d,p){d=d>>>0,p||I(d,2,this.length);const R=this[d+1]|this[d]<<8;return R&32768?R|4294901760:R},a.prototype.readInt32LE=function(d,p){return d=d>>>0,p||I(d,4,this.length),this[d]|this[d+1]<<8|this[d+2]<<16|this[d+3]<<24},a.prototype.readInt32BE=function(d,p){return d=d>>>0,p||I(d,4,this.length),this[d]<<24|this[d+1]<<16|this[d+2]<<8|this[d+3]},a.prototype.readBigInt64LE=Gt(function(d){d=d>>>0,jt(d,"offset");const p=this[d],R=this[d+7];(p===void 0||R===void 0)&&Ce(d,this.length-8);const K=this[d+4]+this[d+5]*2**8+this[d+6]*2**16+(R<<24);return(BigInt(K)<<BigInt(32))+BigInt(p+this[++d]*2**8+this[++d]*2**16+this[++d]*2**24)}),a.prototype.readBigInt64BE=Gt(function(d){d=d>>>0,jt(d,"offset");const p=this[d],R=this[d+7];(p===void 0||R===void 0)&&Ce(d,this.length-8);const K=(p<<24)+this[++d]*2**16+this[++d]*2**8+this[++d];return(BigInt(K)<<BigInt(32))+BigInt(this[++d]*2**24+this[++d]*2**16+this[++d]*2**8+R)}),a.prototype.readFloatLE=function(d,p){return d=d>>>0,p||I(d,4,this.length),t.read(this,d,!0,23,4)},a.prototype.readFloatBE=function(d,p){return d=d>>>0,p||I(d,4,this.length),t.read(this,d,!1,23,4)},a.prototype.readDoubleLE=function(d,p){return d=d>>>0,p||I(d,8,this.length),t.read(this,d,!0,52,8)},a.prototype.readDoubleBE=function(d,p){return d=d>>>0,p||I(d,8,this.length),t.read(this,d,!1,52,8)};function l(v,d,p,R,K,H){if(!a.isBuffer(v))throw new TypeError('"buffer" argument must be a Buffer instance');if(d>K||d<H)throw new RangeError('"value" argument is out of bounds');if(p+R>v.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(d,p,R,K){if(d=+d,p=p>>>0,R=R>>>0,!K){const we=Math.pow(2,8*R)-1;l(this,d,p,R,we,0)}let H=1,X=0;for(this[p]=d&255;++X<R&&(H*=256);)this[p+X]=d/H&255;return p+R},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(d,p,R,K){if(d=+d,p=p>>>0,R=R>>>0,!K){const we=Math.pow(2,8*R)-1;l(this,d,p,R,we,0)}let H=R-1,X=1;for(this[p+H]=d&255;--H>=0&&(X*=256);)this[p+H]=d/X&255;return p+R},a.prototype.writeUint8=a.prototype.writeUInt8=function(d,p,R){return d=+d,p=p>>>0,R||l(this,d,p,1,255,0),this[p]=d&255,p+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(d,p,R){return d=+d,p=p>>>0,R||l(this,d,p,2,65535,0),this[p]=d&255,this[p+1]=d>>>8,p+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(d,p,R){return d=+d,p=p>>>0,R||l(this,d,p,2,65535,0),this[p]=d>>>8,this[p+1]=d&255,p+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(d,p,R){return d=+d,p=p>>>0,R||l(this,d,p,4,4294967295,0),this[p+3]=d>>>24,this[p+2]=d>>>16,this[p+1]=d>>>8,this[p]=d&255,p+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(d,p,R){return d=+d,p=p>>>0,R||l(this,d,p,4,4294967295,0),this[p]=d>>>24,this[p+1]=d>>>16,this[p+2]=d>>>8,this[p+3]=d&255,p+4};function h(v,d,p,R,K){Te(d,R,K,v,p,7);let H=Number(d&BigInt(4294967295));v[p++]=H,H=H>>8,v[p++]=H,H=H>>8,v[p++]=H,H=H>>8,v[p++]=H;let X=Number(d>>BigInt(32)&BigInt(4294967295));return v[p++]=X,X=X>>8,v[p++]=X,X=X>>8,v[p++]=X,X=X>>8,v[p++]=X,p}function k(v,d,p,R,K){Te(d,R,K,v,p,7);let H=Number(d&BigInt(4294967295));v[p+7]=H,H=H>>8,v[p+6]=H,H=H>>8,v[p+5]=H,H=H>>8,v[p+4]=H;let X=Number(d>>BigInt(32)&BigInt(4294967295));return v[p+3]=X,X=X>>8,v[p+2]=X,X=X>>8,v[p+1]=X,X=X>>8,v[p]=X,p+8}a.prototype.writeBigUInt64LE=Gt(function(d,p=0){return h(this,d,p,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=Gt(function(d,p=0){return k(this,d,p,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(d,p,R,K){if(d=+d,p=p>>>0,!K){const me=Math.pow(2,8*R-1);l(this,d,p,R,me-1,-me)}let H=0,X=1,we=0;for(this[p]=d&255;++H<R&&(X*=256);)d<0&&we===0&&this[p+H-1]!==0&&(we=1),this[p+H]=(d/X>>0)-we&255;return p+R},a.prototype.writeIntBE=function(d,p,R,K){if(d=+d,p=p>>>0,!K){const me=Math.pow(2,8*R-1);l(this,d,p,R,me-1,-me)}let H=R-1,X=1,we=0;for(this[p+H]=d&255;--H>=0&&(X*=256);)d<0&&we===0&&this[p+H+1]!==0&&(we=1),this[p+H]=(d/X>>0)-we&255;return p+R},a.prototype.writeInt8=function(d,p,R){return d=+d,p=p>>>0,R||l(this,d,p,1,127,-128),d<0&&(d=255+d+1),this[p]=d&255,p+1},a.prototype.writeInt16LE=function(d,p,R){return d=+d,p=p>>>0,R||l(this,d,p,2,32767,-32768),this[p]=d&255,this[p+1]=d>>>8,p+2},a.prototype.writeInt16BE=function(d,p,R){return d=+d,p=p>>>0,R||l(this,d,p,2,32767,-32768),this[p]=d>>>8,this[p+1]=d&255,p+2},a.prototype.writeInt32LE=function(d,p,R){return d=+d,p=p>>>0,R||l(this,d,p,4,2147483647,-2147483648),this[p]=d&255,this[p+1]=d>>>8,this[p+2]=d>>>16,this[p+3]=d>>>24,p+4},a.prototype.writeInt32BE=function(d,p,R){return d=+d,p=p>>>0,R||l(this,d,p,4,2147483647,-2147483648),d<0&&(d=4294967295+d+1),this[p]=d>>>24,this[p+1]=d>>>16,this[p+2]=d>>>8,this[p+3]=d&255,p+4},a.prototype.writeBigInt64LE=Gt(function(d,p=0){return h(this,d,p,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=Gt(function(d,p=0){return k(this,d,p,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function T(v,d,p,R,K,H){if(p+R>v.length)throw new RangeError("Index out of range");if(p<0)throw new RangeError("Index out of range")}function q(v,d,p,R,K){return d=+d,p=p>>>0,K||T(v,d,p,4),t.write(v,d,p,R,23,4),p+4}a.prototype.writeFloatLE=function(d,p,R){return q(this,d,p,!0,R)},a.prototype.writeFloatBE=function(d,p,R){return q(this,d,p,!1,R)};function J(v,d,p,R,K){return d=+d,p=p>>>0,K||T(v,d,p,8),t.write(v,d,p,R,52,8),p+8}a.prototype.writeDoubleLE=function(d,p,R){return J(this,d,p,!0,R)},a.prototype.writeDoubleBE=function(d,p,R){return J(this,d,p,!1,R)},a.prototype.copy=function(d,p,R,K){if(!a.isBuffer(d))throw new TypeError("argument should be a Buffer");if(R||(R=0),!K&&K!==0&&(K=this.length),p>=d.length&&(p=d.length),p||(p=0),K>0&&K<R&&(K=R),K===R||d.length===0||this.length===0)return 0;if(p<0)throw new RangeError("targetStart out of bounds");if(R<0||R>=this.length)throw new RangeError("Index out of range");if(K<0)throw new RangeError("sourceEnd out of bounds");K>this.length&&(K=this.length),d.length-p<K-R&&(K=d.length-p+R);const H=K-R;return this===d&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(p,R,K):Uint8Array.prototype.set.call(d,this.subarray(R,K),p),H},a.prototype.fill=function(d,p,R,K){if(typeof d=="string"){if(typeof p=="string"?(K=p,p=0,R=this.length):typeof R=="string"&&(K=R,R=this.length),K!==void 0&&typeof K!="string")throw new TypeError("encoding must be a string");if(typeof K=="string"&&!a.isEncoding(K))throw new TypeError("Unknown encoding: "+K);if(d.length===1){const X=d.charCodeAt(0);(K==="utf8"&&X<128||K==="latin1")&&(d=X)}}else typeof d=="number"?d=d&255:typeof d=="boolean"&&(d=Number(d));if(p<0||this.length<p||this.length<R)throw new RangeError("Out of range index");if(R<=p)return this;p=p>>>0,R=R===void 0?this.length:R>>>0,d||(d=0);let H;if(typeof d=="number")for(H=p;H<R;++H)this[H]=d;else{const X=a.isBuffer(d)?d:a.from(d,K),we=X.length;if(we===0)throw new TypeError('The value "'+d+'" is invalid for argument "value"');for(H=0;H<R-p;++H)this[H+p]=X[H%we]}return this};const ne={};function oe(v,d,p){ne[v]=class extends p{constructor(){super(),Object.defineProperty(this,"message",{value:d.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${v}]`,this.stack,delete this.name}get code(){return v}set code(K){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:K,writable:!0})}toString(){return`${this.name} [${v}]: ${this.message}`}}}oe("ERR_BUFFER_OUT_OF_BOUNDS",function(v){return v?`${v} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),oe("ERR_INVALID_ARG_TYPE",function(v,d){return`The "${v}" argument must be of type number. Received type ${typeof d}`},TypeError),oe("ERR_OUT_OF_RANGE",function(v,d,p){let R=`The value of "${v}" is out of range.`,K=p;return Number.isInteger(p)&&Math.abs(p)>2**32?K=Ee(String(p)):typeof p=="bigint"&&(K=String(p),(p>BigInt(2)**BigInt(32)||p<-(BigInt(2)**BigInt(32)))&&(K=Ee(K)),K+="n"),R+=` It must be ${d}. Received ${K}`,R},RangeError);function Ee(v){let d="",p=v.length;const R=v[0]==="-"?1:0;for(;p>=R+4;p-=3)d=`_${v.slice(p-3,p)}${d}`;return`${v.slice(0,p)}${d}`}function xe(v,d,p){jt(d,"offset"),(v[d]===void 0||v[d+p]===void 0)&&Ce(d,v.length-(p+1))}function Te(v,d,p,R,K,H){if(v>p||v<d){const X=typeof d=="bigint"?"n":"";let we;throw d===0||d===BigInt(0)?we=`>= 0${X} and < 2${X} ** ${(H+1)*8}${X}`:we=`>= -(2${X} ** ${(H+1)*8-1}${X}) and < 2 ** ${(H+1)*8-1}${X}`,new ne.ERR_OUT_OF_RANGE("value",we,v)}xe(R,K,H)}function jt(v,d){if(typeof v!="number")throw new ne.ERR_INVALID_ARG_TYPE(d,"number",v)}function Ce(v,d,p){throw Math.floor(v)!==v?(jt(v,p),new ne.ERR_OUT_OF_RANGE("offset","an integer",v)):d<0?new ne.ERR_BUFFER_OUT_OF_BOUNDS:new ne.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${d}`,v)}const He=/[^+/0-9A-Za-z-_]/g;function yi(v){if(v=v.split("=")[0],v=v.trim().replace(He,""),v.length<2)return"";for(;v.length%4!==0;)v=v+"=";return v}function We(v,d){d=d||1/0;let p;const R=v.length;let K=null;const H=[];for(let X=0;X<R;++X){if(p=v.charCodeAt(X),p>55295&&p<57344){if(!K){if(p>56319){(d-=3)>-1&&H.push(239,191,189);continue}else if(X+1===R){(d-=3)>-1&&H.push(239,191,189);continue}K=p;continue}if(p<56320){(d-=3)>-1&&H.push(239,191,189),K=p;continue}p=(K-55296<<10|p-56320)+65536}else K&&(d-=3)>-1&&H.push(239,191,189);if(K=null,p<128){if((d-=1)<0)break;H.push(p)}else if(p<2048){if((d-=2)<0)break;H.push(p>>6|192,p&63|128)}else if(p<65536){if((d-=3)<0)break;H.push(p>>12|224,p>>6&63|128,p&63|128)}else if(p<1114112){if((d-=4)<0)break;H.push(p>>18|240,p>>12&63|128,p>>6&63|128,p&63|128)}else throw new Error("Invalid code point")}return H}function je(v){const d=[];for(let p=0;p<v.length;++p)d.push(v.charCodeAt(p)&255);return d}function mi(v,d){let p,R,K;const H=[];for(let X=0;X<v.length&&!((d-=2)<0);++X)p=v.charCodeAt(X),R=p>>8,K=p%256,H.push(K),H.push(R);return H}function De(v){return e.toByteArray(yi(v))}function Oe(v,d,p,R){let K;for(K=0;K<R&&!(K+p>=d.length||K>=v.length);++K)d[K+p]=v[K];return K}function qt(v,d){return v instanceof d||v!=null&&v.constructor!=null&&v.constructor.name!=null&&v.constructor.name===d.name}function ze(v){return v!==v}const Ge=(function(){const v="0123456789abcdef",d=new Array(256);for(let p=0;p<16;++p){const R=p*16;for(let K=0;K<16;++K)d[R+K]=v[p]+v[K]}return d})();function Gt(v){return typeof BigInt>"u"?Ye:v}function Ye(){throw new Error("BigInt not supported")}})(Vs)),Vs}var pe=Ma();const fr=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function ui(r){return r instanceof Uint8Array||ArrayBuffer.isView(r)&&r.constructor.name==="Uint8Array"}function ti(r){if(!Number.isSafeInteger(r)||r<0)throw new Error("positive integer expected, got "+r)}function Sn(r,...e){if(!ui(r))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(r.length))throw new Error("Uint8Array expected of length "+e+", got length="+r.length)}function al(r){if(typeof r!="function"||typeof r.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");ti(r.outputLen),ti(r.blockLen)}function Mr(r,e=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(e&&r.finished)throw new Error("Hash#digest() has already been called")}function cl(r,e){Sn(r);const t=e.outputLen;if(r.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}function Xf(r){return new Uint32Array(r.buffer,r.byteOffset,Math.floor(r.byteLength/4))}function Un(...r){for(let e=0;e<r.length;e++)r[e].fill(0)}function Hs(r){return new DataView(r.buffer,r.byteOffset,r.byteLength)}function Qt(r,e){return r<<32-e|r>>>e}const Qf=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function eh(r){return r<<24&4278190080|r<<8&16711680|r>>>8&65280|r>>>24&255}function th(r){for(let e=0;e<r.length;e++)r[e]=eh(r[e]);return r}const wc=Qf?r=>r:th,ul=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",nh=Array.from({length:256},(r,e)=>e.toString(16).padStart(2,"0"));function er(r){if(Sn(r),ul)return r.toHex();let e="";for(let t=0;t<r.length;t++)e+=nh[r[t]];return e}const fn={_0:48,_9:57,A:65,F:70,a:97,f:102};function bc(r){if(r>=fn._0&&r<=fn._9)return r-fn._0;if(r>=fn.A&&r<=fn.F)return r-(fn.A-10);if(r>=fn.a&&r<=fn.f)return r-(fn.a-10)}function Gi(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);if(ul)return Uint8Array.fromHex(r);const e=r.length,t=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(t);for(let s=0,i=0;s<t;s++,i+=2){const o=bc(r.charCodeAt(i)),a=bc(r.charCodeAt(i+1));if(o===void 0||a===void 0){const u=r[i]+r[i+1];throw new Error('hex string expected, got non-hex character "'+u+'" at index '+i)}n[s]=o*16+a}return n}function rh(r){if(typeof r!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(r))}function ls(r){return typeof r=="string"&&(r=rh(r)),Sn(r),r}function nn(...r){let e=0;for(let n=0;n<r.length;n++){const s=r[n];Sn(s),e+=s.length}const t=new Uint8Array(e);for(let n=0,s=0;n<r.length;n++){const i=r[n];t.set(i,s),s+=i.length}return t}class Ta{}function Ca(r){const e=n=>r().update(ls(n)).digest(),t=r();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>r(),e}function La(r=32){if(fr&&typeof fr.getRandomValues=="function")return fr.getRandomValues(new Uint8Array(r));if(fr&&typeof fr.randomBytes=="function")return Uint8Array.from(fr.randomBytes(r));throw new Error("crypto.getRandomValues must be defined")}function ih(r,e,t,n){if(typeof r.setBigUint64=="function")return r.setBigUint64(e,t,n);const s=BigInt(32),i=BigInt(4294967295),o=Number(t>>s&i),a=Number(t&i),u=n?4:0,g=n?0:4;r.setUint32(e+u,o,n),r.setUint32(e+g,a,n)}function sh(r,e,t){return r&e^~r&t}function oh(r,e,t){return r&e^r&t^e&t}class ll extends Ta{constructor(e,t,n,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=s,this.buffer=new Uint8Array(e),this.view=Hs(this.buffer)}update(e){Mr(this),e=ls(e),Sn(e);const{view:t,buffer:n,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const u=Hs(e);for(;s<=i-o;o+=s)this.process(u,o);continue}n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Mr(this),cl(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:s,isLE:i}=this;let{pos:o}=this;t[o++]=128,Un(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(n,0),o=0);for(let S=o;S<s;S++)t[S]=0;ih(n,s-8,BigInt(this.length*8),i),this.process(n,0);const a=Hs(e),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const g=u/4,w=this.get();if(g>w.length)throw new Error("_sha2: outputLen bigger than state");for(let S=0;S<g;S++)a.setUint32(4*S,w[S],i)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:s,finished:i,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=a,s%t&&e.buffer.set(n),e}clone(){return this._cloneInto()}}const _n=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Mt=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),bi=BigInt(2**32-1),vc=BigInt(32);function ah(r,e=!1){return e?{h:Number(r&bi),l:Number(r>>vc&bi)}:{h:Number(r>>vc&bi)|0,l:Number(r&bi)|0}}function fl(r,e=!1){const t=r.length;let n=new Uint32Array(t),s=new Uint32Array(t);for(let i=0;i<t;i++){const{h:o,l:a}=ah(r[i],e);[n[i],s[i]]=[o,a]}return[n,s]}const Sc=(r,e,t)=>r>>>t,Ec=(r,e,t)=>r<<32-t|e>>>t,hr=(r,e,t)=>r>>>t|e<<32-t,dr=(r,e,t)=>r<<32-t|e>>>t,vi=(r,e,t)=>r<<64-t|e>>>t-32,Si=(r,e,t)=>r>>>t-32|e<<64-t,ch=(r,e,t)=>r<<t|e>>>32-t,uh=(r,e,t)=>e<<t|r>>>32-t,lh=(r,e,t)=>e<<t-32|r>>>64-t,fh=(r,e,t)=>r<<t-32|e>>>64-t;function hn(r,e,t,n){const s=(e>>>0)+(n>>>0);return{h:r+t+(s/2**32|0)|0,l:s|0}}const hh=(r,e,t)=>(r>>>0)+(e>>>0)+(t>>>0),dh=(r,e,t,n)=>e+t+n+(r/2**32|0)|0,ph=(r,e,t,n)=>(r>>>0)+(e>>>0)+(t>>>0)+(n>>>0),gh=(r,e,t,n,s)=>e+t+n+s+(r/2**32|0)|0,yh=(r,e,t,n,s)=>(r>>>0)+(e>>>0)+(t>>>0)+(n>>>0)+(s>>>0),mh=(r,e,t,n,s,i)=>e+t+n+s+i+(r/2**32|0)|0,wh=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),An=new Uint32Array(64);class bh extends ll{constructor(e=32){super(64,e,8,!1),this.A=_n[0]|0,this.B=_n[1]|0,this.C=_n[2]|0,this.D=_n[3]|0,this.E=_n[4]|0,this.F=_n[5]|0,this.G=_n[6]|0,this.H=_n[7]|0}get(){const{A:e,B:t,C:n,D:s,E:i,F:o,G:a,H:u}=this;return[e,t,n,s,i,o,a,u]}set(e,t,n,s,i,o,a,u){this.A=e|0,this.B=t|0,this.C=n|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=u|0}process(e,t){for(let S=0;S<16;S++,t+=4)An[S]=e.getUint32(t,!1);for(let S=16;S<64;S++){const E=An[S-15],b=An[S-2],A=Qt(E,7)^Qt(E,18)^E>>>3,x=Qt(b,17)^Qt(b,19)^b>>>10;An[S]=x+An[S-7]+A+An[S-16]|0}let{A:n,B:s,C:i,D:o,E:a,F:u,G:g,H:w}=this;for(let S=0;S<64;S++){const E=Qt(a,6)^Qt(a,11)^Qt(a,25),b=w+E+sh(a,u,g)+wh[S]+An[S]|0,x=(Qt(n,2)^Qt(n,13)^Qt(n,22))+oh(n,s,i)|0;w=g,g=u,u=a,a=o+b|0,o=i,i=s,s=n,n=b+x|0}n=n+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,u=u+this.F|0,g=g+this.G|0,w=w+this.H|0,this.set(n,s,i,o,a,u,g,w)}roundClean(){Un(An)}destroy(){this.set(0,0,0,0,0,0,0,0),Un(this.buffer)}}const hl=fl(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(r=>BigInt(r))),vh=hl[0],Sh=hl[1],In=new Uint32Array(80),xn=new Uint32Array(80);class Eh extends ll{constructor(e=64){super(128,e,16,!1),this.Ah=Mt[0]|0,this.Al=Mt[1]|0,this.Bh=Mt[2]|0,this.Bl=Mt[3]|0,this.Ch=Mt[4]|0,this.Cl=Mt[5]|0,this.Dh=Mt[6]|0,this.Dl=Mt[7]|0,this.Eh=Mt[8]|0,this.El=Mt[9]|0,this.Fh=Mt[10]|0,this.Fl=Mt[11]|0,this.Gh=Mt[12]|0,this.Gl=Mt[13]|0,this.Hh=Mt[14]|0,this.Hl=Mt[15]|0}get(){const{Ah:e,Al:t,Bh:n,Bl:s,Ch:i,Cl:o,Dh:a,Dl:u,Eh:g,El:w,Fh:S,Fl:E,Gh:b,Gl:A,Hh:x,Hl:C}=this;return[e,t,n,s,i,o,a,u,g,w,S,E,b,A,x,C]}set(e,t,n,s,i,o,a,u,g,w,S,E,b,A,x,C){this.Ah=e|0,this.Al=t|0,this.Bh=n|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=u|0,this.Eh=g|0,this.El=w|0,this.Fh=S|0,this.Fl=E|0,this.Gh=b|0,this.Gl=A|0,this.Hh=x|0,this.Hl=C|0}process(e,t){for(let N=0;N<16;N++,t+=4)In[N]=e.getUint32(t),xn[N]=e.getUint32(t+=4);for(let N=16;N<80;N++){const V=In[N-15]|0,Y=xn[N-15]|0,$=hr(V,Y,1)^hr(V,Y,8)^Sc(V,Y,7),Q=dr(V,Y,1)^dr(V,Y,8)^Ec(V,Y,7),Z=In[N-2]|0,M=xn[N-2]|0,O=hr(Z,M,19)^vi(Z,M,61)^Sc(Z,M,6),F=dr(Z,M,19)^Si(Z,M,61)^Ec(Z,M,6),D=ph(Q,F,xn[N-7],xn[N-16]),y=gh(D,$,O,In[N-7],In[N-16]);In[N]=y|0,xn[N]=D|0}let{Ah:n,Al:s,Bh:i,Bl:o,Ch:a,Cl:u,Dh:g,Dl:w,Eh:S,El:E,Fh:b,Fl:A,Gh:x,Gl:C,Hh:P,Hl:W}=this;for(let N=0;N<80;N++){const V=hr(S,E,14)^hr(S,E,18)^vi(S,E,41),Y=dr(S,E,14)^dr(S,E,18)^Si(S,E,41),$=S&b^~S&x,Q=E&A^~E&C,Z=yh(W,Y,Q,Sh[N],xn[N]),M=mh(Z,P,V,$,vh[N],In[N]),O=Z|0,F=hr(n,s,28)^vi(n,s,34)^vi(n,s,39),D=dr(n,s,28)^Si(n,s,34)^Si(n,s,39),y=n&i^n&a^i&a,c=s&o^s&u^o&u;P=x|0,W=C|0,x=b|0,C=A|0,b=S|0,A=E|0,{h:S,l:E}=hn(g|0,w|0,M|0,O|0),g=a|0,w=u|0,a=i|0,u=o|0,i=n|0,o=s|0;const f=hh(O,D,c);n=dh(f,M,F,y),s=f|0}({h:n,l:s}=hn(this.Ah|0,this.Al|0,n|0,s|0)),{h:i,l:o}=hn(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:u}=hn(this.Ch|0,this.Cl|0,a|0,u|0),{h:g,l:w}=hn(this.Dh|0,this.Dl|0,g|0,w|0),{h:S,l:E}=hn(this.Eh|0,this.El|0,S|0,E|0),{h:b,l:A}=hn(this.Fh|0,this.Fl|0,b|0,A|0),{h:x,l:C}=hn(this.Gh|0,this.Gl|0,x|0,C|0),{h:P,l:W}=hn(this.Hh|0,this.Hl|0,P|0,W|0),this.set(n,s,i,o,a,u,g,w,S,E,b,A,x,C,P,W)}roundClean(){Un(In,xn)}destroy(){Un(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const dl=Ca(()=>new bh),kh=Ca(()=>new Eh);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Pa=BigInt(0),Xo=BigInt(1);function nr(r,e=""){if(typeof r!="boolean"){const t=e&&`"${e}"`;throw new Error(t+"expected boolean, got type="+typeof r)}return r}function Zt(r,e,t=""){const n=ui(r),s=r?.length,i=e!==void 0;if(!n||i&&s!==e){const o=t&&`"${t}" `,a=i?` of length ${e}`:"",u=n?`length=${s}`:`type=${typeof r}`;throw new Error(o+"expected Uint8Array"+a+", got "+u)}return r}function Ei(r){const e=r.toString(16);return e.length&1?"0"+e:e}function pl(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);return r===""?Pa:BigInt("0x"+r)}function fs(r){return pl(er(r))}function ni(r){return Sn(r),pl(er(Uint8Array.from(r).reverse()))}function Na(r,e){return Gi(r.toString(16).padStart(e*2,"0"))}function gl(r,e){return Na(r,e).reverse()}function Je(r,e,t){let n;if(typeof e=="string")try{n=Gi(e)}catch(i){throw new Error(r+" must be hex string or Uint8Array, cause: "+i)}else if(ui(e))n=Uint8Array.from(e);else throw new Error(r+" must be hex string or Uint8Array");const s=n.length;if(typeof t=="number"&&s!==t)throw new Error(r+" of length "+t+" expected, got "+s);return n}function kc(r){return Uint8Array.from(r)}const js=r=>typeof r=="bigint"&&Pa<=r;function _h(r,e,t){return js(r)&&js(e)&&js(t)&&e<=r&&r<t}function Qo(r,e,t,n){if(!_h(e,t,n))throw new Error("expected valid "+r+": "+t+" <= n < "+n+", got "+e)}function yl(r){let e;for(e=0;r>Pa;r>>=Xo,e+=1);return e}const li=r=>(Xo<<BigInt(r))-Xo;function Ah(r,e,t){if(typeof r!="number"||r<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");const n=b=>new Uint8Array(b),s=b=>Uint8Array.of(b);let i=n(r),o=n(r),a=0;const u=()=>{i.fill(1),o.fill(0),a=0},g=(...b)=>t(o,i,...b),w=(b=n(0))=>{o=g(s(0),b),i=g(),b.length!==0&&(o=g(s(1),b),i=g())},S=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let b=0;const A=[];for(;b<e;){i=g();const x=i.slice();A.push(x),b+=i.length}return nn(...A)};return(b,A)=>{u(),w(b);let x;for(;!(x=A(S()));)w();return u(),x}}function fi(r,e,t={}){if(!r||typeof r!="object")throw new Error("expected valid options object");function n(s,i,o){const a=r[s];if(o&&a===void 0)return;const u=typeof a;if(u!==i||a===null)throw new Error(`param "${s}" is invalid: expected ${i}, got ${u}`)}Object.entries(e).forEach(([s,i])=>n(s,i,!1)),Object.entries(t).forEach(([s,i])=>n(s,i,!0))}function Yi(r){const e=new WeakMap;return(t,...n)=>{const s=e.get(t);if(s!==void 0)return s;const i=r(t,...n);return e.set(t,i),i}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Kt=BigInt(0),Rt=BigInt(1),qn=BigInt(2),ml=BigInt(3),wl=BigInt(4),bl=BigInt(5),Ih=BigInt(7),vl=BigInt(8),xh=BigInt(9),Sl=BigInt(16);function bt(r,e){const t=r%e;return t>=Kt?t:e+t}function Ze(r,e,t){let n=r;for(;e-- >Kt;)n*=n,n%=t;return n}function _c(r,e){if(r===Kt)throw new Error("invert: expected non-zero number");if(e<=Kt)throw new Error("invert: expected positive modulus, got "+e);let t=bt(r,e),n=e,s=Kt,i=Rt;for(;t!==Kt;){const a=n/t,u=n%t,g=s-i*a;n=t,t=u,s=i,i=g}if(n!==Rt)throw new Error("invert: does not exist");return bt(s,e)}function Oa(r,e,t){if(!r.eql(r.sqr(e),t))throw new Error("Cannot find square root")}function El(r,e){const t=(r.ORDER+Rt)/wl,n=r.pow(e,t);return Oa(r,n,e),n}function Bh(r,e){const t=(r.ORDER-bl)/vl,n=r.mul(e,qn),s=r.pow(n,t),i=r.mul(e,s),o=r.mul(r.mul(i,qn),s),a=r.mul(i,r.sub(o,r.ONE));return Oa(r,a,e),a}function Rh(r){const e=sr(r),t=kl(r),n=t(e,e.neg(e.ONE)),s=t(e,n),i=t(e,e.neg(n)),o=(r+Ih)/Sl;return(a,u)=>{let g=a.pow(u,o),w=a.mul(g,n);const S=a.mul(g,s),E=a.mul(g,i),b=a.eql(a.sqr(w),u),A=a.eql(a.sqr(S),u);g=a.cmov(g,w,b),w=a.cmov(E,S,A);const x=a.eql(a.sqr(w),u),C=a.cmov(g,w,x);return Oa(a,C,u),C}}function kl(r){if(r<ml)throw new Error("sqrt is not defined for small field");let e=r-Rt,t=0;for(;e%qn===Kt;)e/=qn,t++;let n=qn;const s=sr(r);for(;Ac(s,n)===1;)if(n++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(t===1)return El;let i=s.pow(n,e);const o=(e+Rt)/qn;return function(u,g){if(u.is0(g))return g;if(Ac(u,g)!==1)throw new Error("Cannot find square root");let w=t,S=u.mul(u.ONE,i),E=u.pow(g,e),b=u.pow(g,o);for(;!u.eql(E,u.ONE);){if(u.is0(E))return u.ZERO;let A=1,x=u.sqr(E);for(;!u.eql(x,u.ONE);)if(A++,x=u.sqr(x),A===w)throw new Error("Cannot find square root");const C=Rt<<BigInt(w-A-1),P=u.pow(S,C);w=A,S=u.sqr(P),E=u.mul(E,S),b=u.mul(b,P)}return b}}function Mh(r){return r%wl===ml?El:r%vl===bl?Bh:r%Sl===xh?Rh(r):kl(r)}const Th=(r,e)=>(bt(r,e)&Rt)===Rt,Ch=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Lh(r){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},t=Ch.reduce((n,s)=>(n[s]="function",n),e);return fi(r,t),r}function Ph(r,e,t){if(t<Kt)throw new Error("invalid exponent, negatives unsupported");if(t===Kt)return r.ONE;if(t===Rt)return e;let n=r.ONE,s=e;for(;t>Kt;)t&Rt&&(n=r.mul(n,s)),s=r.sqr(s),t>>=Rt;return n}function _l(r,e,t=!1){const n=new Array(e.length).fill(t?r.ZERO:void 0),s=e.reduce((o,a,u)=>r.is0(a)?o:(n[u]=o,r.mul(o,a)),r.ONE),i=r.inv(s);return e.reduceRight((o,a,u)=>r.is0(a)?o:(n[u]=r.mul(o,n[u]),r.mul(o,a)),i),n}function Ac(r,e){const t=(r.ORDER-Rt)/qn,n=r.pow(e,t),s=r.eql(n,r.ONE),i=r.eql(n,r.ZERO),o=r.eql(n,r.neg(r.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function Al(r,e){e!==void 0&&ti(e);const t=e!==void 0?e:r.toString(2).length,n=Math.ceil(t/8);return{nBitLength:t,nByteLength:n}}function sr(r,e,t=!1,n={}){if(r<=Kt)throw new Error("invalid field: expected ORDER > 0, got "+r);let s,i,o=!1,a;if(typeof e=="object"&&e!=null){if(n.sqrt||t)throw new Error("cannot specify opts in two arguments");const E=e;E.BITS&&(s=E.BITS),E.sqrt&&(i=E.sqrt),typeof E.isLE=="boolean"&&(t=E.isLE),typeof E.modFromBytes=="boolean"&&(o=E.modFromBytes),a=E.allowedLengths}else typeof e=="number"&&(s=e),n.sqrt&&(i=n.sqrt);const{nBitLength:u,nByteLength:g}=Al(r,s);if(g>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let w;const S=Object.freeze({ORDER:r,isLE:t,BITS:u,BYTES:g,MASK:li(u),ZERO:Kt,ONE:Rt,allowedLengths:a,create:E=>bt(E,r),isValid:E=>{if(typeof E!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof E);return Kt<=E&&E<r},is0:E=>E===Kt,isValidNot0:E=>!S.is0(E)&&S.isValid(E),isOdd:E=>(E&Rt)===Rt,neg:E=>bt(-E,r),eql:(E,b)=>E===b,sqr:E=>bt(E*E,r),add:(E,b)=>bt(E+b,r),sub:(E,b)=>bt(E-b,r),mul:(E,b)=>bt(E*b,r),pow:(E,b)=>Ph(S,E,b),div:(E,b)=>bt(E*_c(b,r),r),sqrN:E=>E*E,addN:(E,b)=>E+b,subN:(E,b)=>E-b,mulN:(E,b)=>E*b,inv:E=>_c(E,r),sqrt:i||(E=>(w||(w=Mh(r)),w(S,E))),toBytes:E=>t?gl(E,g):Na(E,g),fromBytes:(E,b=!0)=>{if(a){if(!a.includes(E.length)||E.length>g)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+E.length);const x=new Uint8Array(g);x.set(E,t?0:x.length-E.length),E=x}if(E.length!==g)throw new Error("Field.fromBytes: expected "+g+" bytes, got "+E.length);let A=t?ni(E):fs(E);if(o&&(A=bt(A,r)),!b&&!S.isValid(A))throw new Error("invalid field element: outside of range 0..ORDER");return A},invertBatch:E=>_l(S,E),cmov:(E,b,A)=>A?b:E});return Object.freeze(S)}function Il(r){if(typeof r!="bigint")throw new Error("field order must be bigint");const e=r.toString(2).length;return Math.ceil(e/8)}function xl(r){const e=Il(r);return e+Math.ceil(e/2)}function Nh(r,e,t=!1){const n=r.length,s=Il(e),i=xl(e);if(n<16||n<i||n>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+n);const o=t?ni(r):fs(r),a=bt(o,e-Rt)+Rt;return t?gl(a,s):Na(a,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Tr=BigInt(0),$n=BigInt(1);function Zi(r,e){const t=e.negate();return r?t:e}function Vn(r,e){const t=_l(r.Fp,e.map(n=>n.Z));return e.map((n,s)=>r.fromAffine(n.toAffine(t[s])))}function Bl(r,e){if(!Number.isSafeInteger(r)||r<=0||r>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+r)}function Gs(r,e){Bl(r,e);const t=Math.ceil(e/r)+1,n=2**(r-1),s=2**r,i=li(r),o=BigInt(r);return{windows:t,windowSize:n,mask:i,maxNumber:s,shiftBy:o}}function Ic(r,e,t){const{windowSize:n,mask:s,maxNumber:i,shiftBy:o}=t;let a=Number(r&s),u=r>>o;a>n&&(a-=i,u+=$n);const g=e*n,w=g+Math.abs(a)-1,S=a===0,E=a<0,b=e%2!==0;return{nextN:u,offset:w,isZero:S,isNeg:E,isNegF:b,offsetF:g}}function Oh(r,e){if(!Array.isArray(r))throw new Error("array expected");r.forEach((t,n)=>{if(!(t instanceof e))throw new Error("invalid point at index "+n)})}function Uh(r,e){if(!Array.isArray(r))throw new Error("array of scalars expected");r.forEach((t,n)=>{if(!e.isValid(t))throw new Error("invalid scalar at index "+n)})}const Ys=new WeakMap,Rl=new WeakMap;function Zs(r){return Rl.get(r)||1}function xc(r){if(r!==Tr)throw new Error("invalid wNAF")}class Ml{constructor(e,t){this.BASE=e.BASE,this.ZERO=e.ZERO,this.Fn=e.Fn,this.bits=t}_unsafeLadder(e,t,n=this.ZERO){let s=e;for(;t>Tr;)t&$n&&(n=n.add(s)),s=s.double(),t>>=$n;return n}precomputeWindow(e,t){const{windows:n,windowSize:s}=Gs(t,this.bits),i=[];let o=e,a=o;for(let u=0;u<n;u++){a=o,i.push(a);for(let g=1;g<s;g++)a=a.add(o),i.push(a);o=a.double()}return i}wNAF(e,t,n){if(!this.Fn.isValid(n))throw new Error("invalid scalar");let s=this.ZERO,i=this.BASE;const o=Gs(e,this.bits);for(let a=0;a<o.windows;a++){const{nextN:u,offset:g,isZero:w,isNeg:S,isNegF:E,offsetF:b}=Ic(n,a,o);n=u,w?i=i.add(Zi(E,t[b])):s=s.add(Zi(S,t[g]))}return xc(n),{p:s,f:i}}wNAFUnsafe(e,t,n,s=this.ZERO){const i=Gs(e,this.bits);for(let o=0;o<i.windows&&n!==Tr;o++){const{nextN:a,offset:u,isZero:g,isNeg:w}=Ic(n,o,i);if(n=a,!g){const S=t[u];s=s.add(w?S.negate():S)}}return xc(n),s}getPrecomputes(e,t,n){let s=Ys.get(t);return s||(s=this.precomputeWindow(t,e),e!==1&&(typeof n=="function"&&(s=n(s)),Ys.set(t,s))),s}cached(e,t,n){const s=Zs(e);return this.wNAF(s,this.getPrecomputes(s,e,n),t)}unsafe(e,t,n,s){const i=Zs(e);return i===1?this._unsafeLadder(e,t,s):this.wNAFUnsafe(i,this.getPrecomputes(i,e,n),t,s)}createCache(e,t){Bl(t,this.bits),Rl.set(e,t),Ys.delete(e)}hasCache(e){return Zs(e)!==1}}function Wh(r,e,t,n){let s=e,i=r.ZERO,o=r.ZERO;for(;t>Tr||n>Tr;)t&$n&&(i=i.add(s)),n&$n&&(o=o.add(s)),s=s.double(),t>>=$n,n>>=$n;return{p1:i,p2:o}}function Tl(r,e,t,n){Oh(t,r),Uh(n,e);const s=t.length,i=n.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=r.ZERO,a=yl(BigInt(s));let u=1;a>12?u=a-3:a>4?u=a-2:a>0&&(u=2);const g=li(u),w=new Array(Number(g)+1).fill(o),S=Math.floor((e.BITS-1)/u)*u;let E=o;for(let b=S;b>=0;b-=u){w.fill(o);for(let x=0;x<i;x++){const C=n[x],P=Number(C>>BigInt(b)&g);w[P]=w[P].add(t[x])}let A=o;for(let x=w.length-1,C=o;x>0;x--)C=C.add(w[x]),A=A.add(C);if(E=E.add(A),b!==0)for(let x=0;x<u;x++)E=E.double()}return E}function Bc(r,e,t){if(e){if(e.ORDER!==r)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return Lh(e),e}else return sr(r,{isLE:t})}function Cl(r,e,t={},n){if(n===void 0&&(n=r==="edwards"),!e||typeof e!="object")throw new Error(`expected valid ${r} CURVE object`);for(const u of["p","n","h"]){const g=e[u];if(!(typeof g=="bigint"&&g>Tr))throw new Error(`CURVE.${u} must be positive bigint`)}const s=Bc(e.p,t.Fp,n),i=Bc(e.n,t.Fn,n),a=["Gx","Gy","a",r==="weierstrass"?"b":"d"];for(const u of a)if(!s.isValid(e[u]))throw new Error(`CURVE.${u} must be valid field element of CURVE.Fp`);return e=Object.freeze(Object.assign({},e)),{CURVE:e,Fp:s,Fn:i}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Bn=BigInt(0),kt=BigInt(1),Js=BigInt(2),zh=BigInt(8);function Fh(r,e,t,n){const s=r.sqr(t),i=r.sqr(n),o=r.add(r.mul(e.a,s),i),a=r.add(r.ONE,r.mul(e.d,r.mul(s,i)));return r.eql(o,a)}function Dh(r,e={}){const t=Cl("edwards",r,e,e.FpFnLE),{Fp:n,Fn:s}=t;let i=t.CURVE;const{h:o}=i;fi(e,{},{uvRatio:"function"});const a=Js<<BigInt(s.BYTES*8)-kt,u=C=>n.create(C),g=e.uvRatio||((C,P)=>{try{return{isValid:!0,value:n.sqrt(n.div(C,P))}}catch{return{isValid:!1,value:Bn}}});if(!Fh(n,i,i.Gx,i.Gy))throw new Error("bad curve params: generator point");function w(C,P,W=!1){const N=W?kt:Bn;return Qo("coordinate "+C,P,N,a),P}function S(C){if(!(C instanceof A))throw new Error("ExtendedPoint expected")}const E=Yi((C,P)=>{const{X:W,Y:N,Z:V}=C,Y=C.is0();P==null&&(P=Y?zh:n.inv(V));const $=u(W*P),Q=u(N*P),Z=n.mul(V,P);if(Y)return{x:Bn,y:kt};if(Z!==kt)throw new Error("invZ was invalid");return{x:$,y:Q}}),b=Yi(C=>{const{a:P,d:W}=i;if(C.is0())throw new Error("bad point: ZERO");const{X:N,Y:V,Z:Y,T:$}=C,Q=u(N*N),Z=u(V*V),M=u(Y*Y),O=u(M*M),F=u(Q*P),D=u(M*u(F+Z)),y=u(O+u(W*u(Q*Z)));if(D!==y)throw new Error("bad point: equation left != right (1)");const c=u(N*V),f=u(Y*$);if(c!==f)throw new Error("bad point: equation left != right (2)");return!0});class A{constructor(P,W,N,V){this.X=w("x",P),this.Y=w("y",W),this.Z=w("z",N,!0),this.T=w("t",V),Object.freeze(this)}static CURVE(){return i}static fromAffine(P){if(P instanceof A)throw new Error("extended point not allowed");const{x:W,y:N}=P||{};return w("x",W),w("y",N),new A(W,N,kt,u(W*N))}static fromBytes(P,W=!1){const N=n.BYTES,{a:V,d:Y}=i;P=kc(Zt(P,N,"point")),nr(W,"zip215");const $=kc(P),Q=P[N-1];$[N-1]=Q&-129;const Z=ni($),M=W?a:n.ORDER;Qo("point.y",Z,Bn,M);const O=u(Z*Z),F=u(O-kt),D=u(Y*O-V);let{isValid:y,value:c}=g(F,D);if(!y)throw new Error("bad point: invalid y coordinate");const f=(c&kt)===kt,m=(Q&128)!==0;if(!W&&c===Bn&&m)throw new Error("bad point: x=0 and x_0=1");return m!==f&&(c=u(-c)),A.fromAffine({x:c,y:Z})}static fromHex(P,W=!1){return A.fromBytes(Je("point",P),W)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(P=8,W=!0){return x.createCache(this,P),W||this.multiply(Js),this}assertValidity(){b(this)}equals(P){S(P);const{X:W,Y:N,Z:V}=this,{X:Y,Y:$,Z:Q}=P,Z=u(W*Q),M=u(Y*V),O=u(N*Q),F=u($*V);return Z===M&&O===F}is0(){return this.equals(A.ZERO)}negate(){return new A(u(-this.X),this.Y,this.Z,u(-this.T))}double(){const{a:P}=i,{X:W,Y:N,Z:V}=this,Y=u(W*W),$=u(N*N),Q=u(Js*u(V*V)),Z=u(P*Y),M=W+N,O=u(u(M*M)-Y-$),F=Z+$,D=F-Q,y=Z-$,c=u(O*D),f=u(F*y),m=u(O*y),_=u(D*F);return new A(c,f,_,m)}add(P){S(P);const{a:W,d:N}=i,{X:V,Y,Z:$,T:Q}=this,{X:Z,Y:M,Z:O,T:F}=P,D=u(V*Z),y=u(Y*M),c=u(Q*N*F),f=u($*O),m=u((V+Y)*(Z+M)-D-y),_=f-c,B=f+c,L=u(y-W*D),z=u(m*_),I=u(B*L),l=u(m*L),h=u(_*B);return new A(z,I,h,l)}subtract(P){return this.add(P.negate())}multiply(P){if(!s.isValidNot0(P))throw new Error("invalid scalar: expected 1 <= sc < curve.n");const{p:W,f:N}=x.cached(this,P,V=>Vn(A,V));return Vn(A,[W,N])[0]}multiplyUnsafe(P,W=A.ZERO){if(!s.isValid(P))throw new Error("invalid scalar: expected 0 <= sc < curve.n");return P===Bn?A.ZERO:this.is0()||P===kt?this:x.unsafe(this,P,N=>Vn(A,N),W)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}isTorsionFree(){return x.unsafe(this,i.n).is0()}toAffine(P){return E(this,P)}clearCofactor(){return o===kt?this:this.multiplyUnsafe(o)}toBytes(){const{x:P,y:W}=this.toAffine(),N=n.toBytes(W);return N[N.length-1]|=P&kt?128:0,N}toHex(){return er(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get ex(){return this.X}get ey(){return this.Y}get ez(){return this.Z}get et(){return this.T}static normalizeZ(P){return Vn(A,P)}static msm(P,W){return Tl(A,s,P,W)}_setWindowSize(P){this.precompute(P)}toRawBytes(){return this.toBytes()}}A.BASE=new A(i.Gx,i.Gy,kt,u(i.Gx*i.Gy)),A.ZERO=new A(Bn,kt,kt,Bn),A.Fp=n,A.Fn=s;const x=new Ml(A,s.BITS);return A.BASE.precompute(8),A}function Kh(r,e,t={}){if(typeof e!="function")throw new Error('"hash" function param is required');fi(t,{},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});const{prehash:n}=t,{BASE:s,Fp:i,Fn:o}=r,a=t.randomBytes||La,u=t.adjustScalarBytes||(M=>M),g=t.domain||((M,O,F)=>{if(nr(F,"phflag"),O.length||F)throw new Error("Contexts/pre-hash are not supported");return M});function w(M){return o.create(ni(M))}function S(M){const O=N.secretKey;M=Je("private key",M,O);const F=Je("hashed private key",e(M),2*O),D=u(F.slice(0,O)),y=F.slice(O,2*O),c=w(D);return{head:D,prefix:y,scalar:c}}function E(M){const{head:O,prefix:F,scalar:D}=S(M),y=s.multiply(D),c=y.toBytes();return{head:O,prefix:F,scalar:D,point:y,pointBytes:c}}function b(M){return E(M).pointBytes}function A(M=Uint8Array.of(),...O){const F=nn(...O);return w(e(g(F,Je("context",M),!!n)))}function x(M,O,F={}){M=Je("message",M),n&&(M=n(M));const{prefix:D,scalar:y,pointBytes:c}=E(O),f=A(F.context,D,M),m=s.multiply(f).toBytes(),_=A(F.context,m,c,M),B=o.create(f+_*y);if(!o.isValid(B))throw new Error("sign failed: invalid s");const L=nn(m,o.toBytes(B));return Zt(L,N.signature,"result")}const C={zip215:!0};function P(M,O,F,D=C){const{context:y,zip215:c}=D,f=N.signature;M=Je("signature",M,f),O=Je("message",O),F=Je("publicKey",F,N.publicKey),c!==void 0&&nr(c,"zip215"),n&&(O=n(O));const m=f/2,_=M.subarray(0,m),B=ni(M.subarray(m,f));let L,z,I;try{L=r.fromBytes(F,c),z=r.fromBytes(_,c),I=s.multiplyUnsafe(B)}catch{return!1}if(!c&&L.isSmallOrder())return!1;const l=A(y,z.toBytes(),L.toBytes(),O);return z.add(L.multiplyUnsafe(l)).subtract(I).clearCofactor().is0()}const W=i.BYTES,N={secretKey:W,publicKey:W,signature:2*W,seed:W};function V(M=a(N.seed)){return Zt(M,N.seed,"seed")}function Y(M){const O=Z.randomSecretKey(M);return{secretKey:O,publicKey:b(O)}}function $(M){return ui(M)&&M.length===o.BYTES}function Q(M,O){try{return!!r.fromBytes(M,O)}catch{return!1}}const Z={getExtendedPublicKey:E,randomSecretKey:V,isValidSecretKey:$,isValidPublicKey:Q,toMontgomery(M){const{y:O}=r.fromBytes(M),F=N.publicKey,D=F===32;if(!D&&F!==57)throw new Error("only defined for 25519 and 448");const y=D?i.div(kt+O,kt-O):i.div(O-kt,O+kt);return i.toBytes(y)},toMontgomerySecret(M){const O=N.secretKey;Zt(M,O);const F=e(M.subarray(0,O));return u(F).subarray(0,O)},randomPrivateKey:V,precompute(M=8,O=r.BASE){return O.precompute(M,!1)}};return Object.freeze({keygen:Y,getPublicKey:b,sign:x,verify:P,utils:Z,Point:r,lengths:N})}function qh(r){const e={a:r.a,d:r.d,p:r.Fp.ORDER,n:r.n,h:r.h,Gx:r.Gx,Gy:r.Gy},t=r.Fp,n=sr(e.n,r.nBitLength,!0),s={Fp:t,Fn:n,uvRatio:r.uvRatio},i={randomBytes:r.randomBytes,adjustScalarBytes:r.adjustScalarBytes,domain:r.domain,prehash:r.prehash,mapToCurve:r.mapToCurve};return{CURVE:e,curveOpts:s,hash:r.hash,eddsaOpts:i}}function $h(r,e){const t=e.Point;return Object.assign({},e,{ExtendedPoint:t,CURVE:r,nBitLength:t.Fn.BITS,nByteLength:t.Fn.BYTES})}function Vh(r){const{CURVE:e,curveOpts:t,hash:n,eddsaOpts:s}=qh(r),i=Dh(e,t),o=Kh(i,n,s);return $h(r,o)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Hh=BigInt(1),Rc=BigInt(2);BigInt(3);const jh=BigInt(5),Gh=BigInt(8),Ua=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),Ll={p:Ua,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:Gh,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function Yh(r){const e=BigInt(10),t=BigInt(20),n=BigInt(40),s=BigInt(80),i=Ua,a=r*r%i*r%i,u=Ze(a,Rc,i)*a%i,g=Ze(u,Hh,i)*r%i,w=Ze(g,jh,i)*g%i,S=Ze(w,e,i)*w%i,E=Ze(S,t,i)*S%i,b=Ze(E,n,i)*E%i,A=Ze(b,s,i)*b%i,x=Ze(A,s,i)*b%i,C=Ze(x,e,i)*w%i;return{pow_p_5_8:Ze(C,Rc,i)*r%i,b2:a}}function Zh(r){return r[0]&=248,r[31]&=127,r[31]|=64,r}const Mc=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function Jh(r,e){const t=Ua,n=bt(e*e*e,t),s=bt(n*n*e,t),i=Yh(r*s).pow_p_5_8;let o=bt(r*n*i,t);const a=bt(e*o*o,t),u=o,g=bt(o*Mc,t),w=a===r,S=a===bt(-r,t),E=a===bt(-r*Mc,t);return w&&(o=u),(S||E)&&(o=g),Th(o,t)&&(o=bt(-o,t)),{isValid:w||S,value:o}}const Xh=sr(Ll.p,{isLE:!0}),Qh={...Ll,Fp:Xh,hash:kh,adjustScalarBytes:Zh,uvRatio:Jh},Or=Vh(Qh);var Ri={exports:{}};const ed={},td=Object.freeze(Object.defineProperty({__proto__:null,default:ed},Symbol.toStringTag,{value:"Module"})),nd=Ra(td);var rd=Ri.exports,Tc;function Pl(){return Tc||(Tc=1,(function(r){(function(e,t){function n(y,c){if(!y)throw new Error(c||"Assertion failed")}function s(y,c){y.super_=c;var f=function(){};f.prototype=c.prototype,y.prototype=new f,y.prototype.constructor=y}function i(y,c,f){if(i.isBN(y))return y;this.negative=0,this.words=null,this.length=0,this.red=null,y!==null&&((c==="le"||c==="be")&&(f=c,c=10),this._init(y||0,c||10,f||"be"))}typeof e=="object"?e.exports=i:t.BN=i,i.BN=i,i.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=nd.Buffer}catch{}i.isBN=function(c){return c instanceof i?!0:c!==null&&typeof c=="object"&&c.constructor.wordSize===i.wordSize&&Array.isArray(c.words)},i.max=function(c,f){return c.cmp(f)>0?c:f},i.min=function(c,f){return c.cmp(f)<0?c:f},i.prototype._init=function(c,f,m){if(typeof c=="number")return this._initNumber(c,f,m);if(typeof c=="object")return this._initArray(c,f,m);f==="hex"&&(f=16),n(f===(f|0)&&f>=2&&f<=36),c=c.toString().replace(/\s+/g,"");var _=0;c[0]==="-"&&(_++,this.negative=1),_<c.length&&(f===16?this._parseHex(c,_,m):(this._parseBase(c,f,_),m==="le"&&this._initArray(this.toArray(),f,m)))},i.prototype._initNumber=function(c,f,m){c<0&&(this.negative=1,c=-c),c<67108864?(this.words=[c&67108863],this.length=1):c<4503599627370496?(this.words=[c&67108863,c/67108864&67108863],this.length=2):(n(c<9007199254740992),this.words=[c&67108863,c/67108864&67108863,1],this.length=3),m==="le"&&this._initArray(this.toArray(),f,m)},i.prototype._initArray=function(c,f,m){if(n(typeof c.length=="number"),c.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(c.length/3),this.words=new Array(this.length);for(var _=0;_<this.length;_++)this.words[_]=0;var B,L,z=0;if(m==="be")for(_=c.length-1,B=0;_>=0;_-=3)L=c[_]|c[_-1]<<8|c[_-2]<<16,this.words[B]|=L<<z&67108863,this.words[B+1]=L>>>26-z&67108863,z+=24,z>=26&&(z-=26,B++);else if(m==="le")for(_=0,B=0;_<c.length;_+=3)L=c[_]|c[_+1]<<8|c[_+2]<<16,this.words[B]|=L<<z&67108863,this.words[B+1]=L>>>26-z&67108863,z+=24,z>=26&&(z-=26,B++);return this._strip()};function a(y,c){var f=y.charCodeAt(c);if(f>=48&&f<=57)return f-48;if(f>=65&&f<=70)return f-55;if(f>=97&&f<=102)return f-87;n(!1,"Invalid character in "+y)}function u(y,c,f){var m=a(y,f);return f-1>=c&&(m|=a(y,f-1)<<4),m}i.prototype._parseHex=function(c,f,m){this.length=Math.ceil((c.length-f)/6),this.words=new Array(this.length);for(var _=0;_<this.length;_++)this.words[_]=0;var B=0,L=0,z;if(m==="be")for(_=c.length-1;_>=f;_-=2)z=u(c,f,_)<<B,this.words[L]|=z&67108863,B>=18?(B-=18,L+=1,this.words[L]|=z>>>26):B+=8;else{var I=c.length-f;for(_=I%2===0?f+1:f;_<c.length;_+=2)z=u(c,f,_)<<B,this.words[L]|=z&67108863,B>=18?(B-=18,L+=1,this.words[L]|=z>>>26):B+=8}this._strip()};function g(y,c,f,m){for(var _=0,B=0,L=Math.min(y.length,f),z=c;z<L;z++){var I=y.charCodeAt(z)-48;_*=m,I>=49?B=I-49+10:I>=17?B=I-17+10:B=I,n(I>=0&&B<m,"Invalid character"),_+=B}return _}i.prototype._parseBase=function(c,f,m){this.words=[0],this.length=1;for(var _=0,B=1;B<=67108863;B*=f)_++;_--,B=B/f|0;for(var L=c.length-m,z=L%_,I=Math.min(L,L-z)+m,l=0,h=m;h<I;h+=_)l=g(c,h,h+_,f),this.imuln(B),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l);if(z!==0){var k=1;for(l=g(c,h,c.length,f),h=0;h<z;h++)k*=f;this.imuln(k),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l)}this._strip()},i.prototype.copy=function(c){c.words=new Array(this.length);for(var f=0;f<this.length;f++)c.words[f]=this.words[f];c.length=this.length,c.negative=this.negative,c.red=this.red};function w(y,c){y.words=c.words,y.length=c.length,y.negative=c.negative,y.red=c.red}if(i.prototype._move=function(c){w(c,this)},i.prototype.clone=function(){var c=new i(null);return this.copy(c),c},i.prototype._expand=function(c){for(;this.length<c;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=S}catch{i.prototype.inspect=S}else i.prototype.inspect=S;function S(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var E=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],b=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],A=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(c,f){c=c||10,f=f|0||1;var m;if(c===16||c==="hex"){m="";for(var _=0,B=0,L=0;L<this.length;L++){var z=this.words[L],I=((z<<_|B)&16777215).toString(16);B=z>>>24-_&16777215,_+=2,_>=26&&(_-=26,L--),B!==0||L!==this.length-1?m=E[6-I.length]+I+m:m=I+m}for(B!==0&&(m=B.toString(16)+m);m.length%f!==0;)m="0"+m;return this.negative!==0&&(m="-"+m),m}if(c===(c|0)&&c>=2&&c<=36){var l=b[c],h=A[c];m="";var k=this.clone();for(k.negative=0;!k.isZero();){var T=k.modrn(h).toString(c);k=k.idivn(h),k.isZero()?m=T+m:m=E[l-T.length]+T+m}for(this.isZero()&&(m="0"+m);m.length%f!==0;)m="0"+m;return this.negative!==0&&(m="-"+m),m}n(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var c=this.words[0];return this.length===2?c+=this.words[1]*67108864:this.length===3&&this.words[2]===1?c+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-c:c},i.prototype.toJSON=function(){return this.toString(16,2)},o&&(i.prototype.toBuffer=function(c,f){return this.toArrayLike(o,c,f)}),i.prototype.toArray=function(c,f){return this.toArrayLike(Array,c,f)};var x=function(c,f){return c.allocUnsafe?c.allocUnsafe(f):new c(f)};i.prototype.toArrayLike=function(c,f,m){this._strip();var _=this.byteLength(),B=m||Math.max(1,_);n(_<=B,"byte array longer than desired length"),n(B>0,"Requested array length <= 0");var L=x(c,B),z=f==="le"?"LE":"BE";return this["_toArrayLike"+z](L,_),L},i.prototype._toArrayLikeLE=function(c,f){for(var m=0,_=0,B=0,L=0;B<this.length;B++){var z=this.words[B]<<L|_;c[m++]=z&255,m<c.length&&(c[m++]=z>>8&255),m<c.length&&(c[m++]=z>>16&255),L===6?(m<c.length&&(c[m++]=z>>24&255),_=0,L=0):(_=z>>>24,L+=2)}if(m<c.length)for(c[m++]=_;m<c.length;)c[m++]=0},i.prototype._toArrayLikeBE=function(c,f){for(var m=c.length-1,_=0,B=0,L=0;B<this.length;B++){var z=this.words[B]<<L|_;c[m--]=z&255,m>=0&&(c[m--]=z>>8&255),m>=0&&(c[m--]=z>>16&255),L===6?(m>=0&&(c[m--]=z>>24&255),_=0,L=0):(_=z>>>24,L+=2)}if(m>=0)for(c[m--]=_;m>=0;)c[m--]=0},Math.clz32?i.prototype._countBits=function(c){return 32-Math.clz32(c)}:i.prototype._countBits=function(c){var f=c,m=0;return f>=4096&&(m+=13,f>>>=13),f>=64&&(m+=7,f>>>=7),f>=8&&(m+=4,f>>>=4),f>=2&&(m+=2,f>>>=2),m+f},i.prototype._zeroBits=function(c){if(c===0)return 26;var f=c,m=0;return(f&8191)===0&&(m+=13,f>>>=13),(f&127)===0&&(m+=7,f>>>=7),(f&15)===0&&(m+=4,f>>>=4),(f&3)===0&&(m+=2,f>>>=2),(f&1)===0&&m++,m},i.prototype.bitLength=function(){var c=this.words[this.length-1],f=this._countBits(c);return(this.length-1)*26+f};function C(y){for(var c=new Array(y.bitLength()),f=0;f<c.length;f++){var m=f/26|0,_=f%26;c[f]=y.words[m]>>>_&1}return c}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var c=0,f=0;f<this.length;f++){var m=this._zeroBits(this.words[f]);if(c+=m,m!==26)break}return c},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(c){return this.negative!==0?this.abs().inotn(c).iaddn(1):this.clone()},i.prototype.fromTwos=function(c){return this.testn(c-1)?this.notn(c).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(c){for(;this.length<c.length;)this.words[this.length++]=0;for(var f=0;f<c.length;f++)this.words[f]=this.words[f]|c.words[f];return this._strip()},i.prototype.ior=function(c){return n((this.negative|c.negative)===0),this.iuor(c)},i.prototype.or=function(c){return this.length>c.length?this.clone().ior(c):c.clone().ior(this)},i.prototype.uor=function(c){return this.length>c.length?this.clone().iuor(c):c.clone().iuor(this)},i.prototype.iuand=function(c){var f;this.length>c.length?f=c:f=this;for(var m=0;m<f.length;m++)this.words[m]=this.words[m]&c.words[m];return this.length=f.length,this._strip()},i.prototype.iand=function(c){return n((this.negative|c.negative)===0),this.iuand(c)},i.prototype.and=function(c){return this.length>c.length?this.clone().iand(c):c.clone().iand(this)},i.prototype.uand=function(c){return this.length>c.length?this.clone().iuand(c):c.clone().iuand(this)},i.prototype.iuxor=function(c){var f,m;this.length>c.length?(f=this,m=c):(f=c,m=this);for(var _=0;_<m.length;_++)this.words[_]=f.words[_]^m.words[_];if(this!==f)for(;_<f.length;_++)this.words[_]=f.words[_];return this.length=f.length,this._strip()},i.prototype.ixor=function(c){return n((this.negative|c.negative)===0),this.iuxor(c)},i.prototype.xor=function(c){return this.length>c.length?this.clone().ixor(c):c.clone().ixor(this)},i.prototype.uxor=function(c){return this.length>c.length?this.clone().iuxor(c):c.clone().iuxor(this)},i.prototype.inotn=function(c){n(typeof c=="number"&&c>=0);var f=Math.ceil(c/26)|0,m=c%26;this._expand(f),m>0&&f--;for(var _=0;_<f;_++)this.words[_]=~this.words[_]&67108863;return m>0&&(this.words[_]=~this.words[_]&67108863>>26-m),this._strip()},i.prototype.notn=function(c){return this.clone().inotn(c)},i.prototype.setn=function(c,f){n(typeof c=="number"&&c>=0);var m=c/26|0,_=c%26;return this._expand(m+1),f?this.words[m]=this.words[m]|1<<_:this.words[m]=this.words[m]&~(1<<_),this._strip()},i.prototype.iadd=function(c){var f;if(this.negative!==0&&c.negative===0)return this.negative=0,f=this.isub(c),this.negative^=1,this._normSign();if(this.negative===0&&c.negative!==0)return c.negative=0,f=this.isub(c),c.negative=1,f._normSign();var m,_;this.length>c.length?(m=this,_=c):(m=c,_=this);for(var B=0,L=0;L<_.length;L++)f=(m.words[L]|0)+(_.words[L]|0)+B,this.words[L]=f&67108863,B=f>>>26;for(;B!==0&&L<m.length;L++)f=(m.words[L]|0)+B,this.words[L]=f&67108863,B=f>>>26;if(this.length=m.length,B!==0)this.words[this.length]=B,this.length++;else if(m!==this)for(;L<m.length;L++)this.words[L]=m.words[L];return this},i.prototype.add=function(c){var f;return c.negative!==0&&this.negative===0?(c.negative=0,f=this.sub(c),c.negative^=1,f):c.negative===0&&this.negative!==0?(this.negative=0,f=c.sub(this),this.negative=1,f):this.length>c.length?this.clone().iadd(c):c.clone().iadd(this)},i.prototype.isub=function(c){if(c.negative!==0){c.negative=0;var f=this.iadd(c);return c.negative=1,f._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(c),this.negative=1,this._normSign();var m=this.cmp(c);if(m===0)return this.negative=0,this.length=1,this.words[0]=0,this;var _,B;m>0?(_=this,B=c):(_=c,B=this);for(var L=0,z=0;z<B.length;z++)f=(_.words[z]|0)-(B.words[z]|0)+L,L=f>>26,this.words[z]=f&67108863;for(;L!==0&&z<_.length;z++)f=(_.words[z]|0)+L,L=f>>26,this.words[z]=f&67108863;if(L===0&&z<_.length&&_!==this)for(;z<_.length;z++)this.words[z]=_.words[z];return this.length=Math.max(this.length,z),_!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(c){return this.clone().isub(c)};function P(y,c,f){f.negative=c.negative^y.negative;var m=y.length+c.length|0;f.length=m,m=m-1|0;var _=y.words[0]|0,B=c.words[0]|0,L=_*B,z=L&67108863,I=L/67108864|0;f.words[0]=z;for(var l=1;l<m;l++){for(var h=I>>>26,k=I&67108863,T=Math.min(l,c.length-1),q=Math.max(0,l-y.length+1);q<=T;q++){var J=l-q|0;_=y.words[J]|0,B=c.words[q]|0,L=_*B+k,h+=L/67108864|0,k=L&67108863}f.words[l]=k|0,I=h|0}return I!==0?f.words[l]=I|0:f.length--,f._strip()}var W=function(c,f,m){var _=c.words,B=f.words,L=m.words,z=0,I,l,h,k=_[0]|0,T=k&8191,q=k>>>13,J=_[1]|0,ne=J&8191,oe=J>>>13,Ee=_[2]|0,xe=Ee&8191,Te=Ee>>>13,jt=_[3]|0,Ce=jt&8191,He=jt>>>13,yi=_[4]|0,We=yi&8191,je=yi>>>13,mi=_[5]|0,De=mi&8191,Oe=mi>>>13,qt=_[6]|0,ze=qt&8191,Ge=qt>>>13,Gt=_[7]|0,Ye=Gt&8191,v=Gt>>>13,d=_[8]|0,p=d&8191,R=d>>>13,K=_[9]|0,H=K&8191,X=K>>>13,we=B[0]|0,me=we&8191,ye=we>>>13,Ue=B[1]|0,ge=Ue&8191,et=Ue>>>13,ac=B[2]|0,tt=ac&8191,nt=ac>>>13,cc=B[3]|0,rt=cc&8191,it=cc>>>13,uc=B[4]|0,st=uc&8191,ot=uc>>>13,lc=B[5]|0,at=lc&8191,ct=lc>>>13,fc=B[6]|0,ut=fc&8191,lt=fc>>>13,hc=B[7]|0,ft=hc&8191,ht=hc>>>13,dc=B[8]|0,dt=dc&8191,pt=dc>>>13,pc=B[9]|0,gt=pc&8191,yt=pc>>>13;m.negative=c.negative^f.negative,m.length=19,I=Math.imul(T,me),l=Math.imul(T,ye),l=l+Math.imul(q,me)|0,h=Math.imul(q,ye);var Is=(z+I|0)+((l&8191)<<13)|0;z=(h+(l>>>13)|0)+(Is>>>26)|0,Is&=67108863,I=Math.imul(ne,me),l=Math.imul(ne,ye),l=l+Math.imul(oe,me)|0,h=Math.imul(oe,ye),I=I+Math.imul(T,ge)|0,l=l+Math.imul(T,et)|0,l=l+Math.imul(q,ge)|0,h=h+Math.imul(q,et)|0;var xs=(z+I|0)+((l&8191)<<13)|0;z=(h+(l>>>13)|0)+(xs>>>26)|0,xs&=67108863,I=Math.imul(xe,me),l=Math.imul(xe,ye),l=l+Math.imul(Te,me)|0,h=Math.imul(Te,ye),I=I+Math.imul(ne,ge)|0,l=l+Math.imul(ne,et)|0,l=l+Math.imul(oe,ge)|0,h=h+Math.imul(oe,et)|0,I=I+Math.imul(T,tt)|0,l=l+Math.imul(T,nt)|0,l=l+Math.imul(q,tt)|0,h=h+Math.imul(q,nt)|0;var Bs=(z+I|0)+((l&8191)<<13)|0;z=(h+(l>>>13)|0)+(Bs>>>26)|0,Bs&=67108863,I=Math.imul(Ce,me),l=Math.imul(Ce,ye),l=l+Math.imul(He,me)|0,h=Math.imul(He,ye),I=I+Math.imul(xe,ge)|0,l=l+Math.imul(xe,et)|0,l=l+Math.imul(Te,ge)|0,h=h+Math.imul(Te,et)|0,I=I+Math.imul(ne,tt)|0,l=l+Math.imul(ne,nt)|0,l=l+Math.imul(oe,tt)|0,h=h+Math.imul(oe,nt)|0,I=I+Math.imul(T,rt)|0,l=l+Math.imul(T,it)|0,l=l+Math.imul(q,rt)|0,h=h+Math.imul(q,it)|0;var Rs=(z+I|0)+((l&8191)<<13)|0;z=(h+(l>>>13)|0)+(Rs>>>26)|0,Rs&=67108863,I=Math.imul(We,me),l=Math.imul(We,ye),l=l+Math.imul(je,me)|0,h=Math.imul(je,ye),I=I+Math.imul(Ce,ge)|0,l=l+Math.imul(Ce,et)|0,l=l+Math.imul(He,ge)|0,h=h+Math.imul(He,et)|0,I=I+Math.imul(xe,tt)|0,l=l+Math.imul(xe,nt)|0,l=l+Math.imul(Te,tt)|0,h=h+Math.imul(Te,nt)|0,I=I+Math.imul(ne,rt)|0,l=l+Math.imul(ne,it)|0,l=l+Math.imul(oe,rt)|0,h=h+Math.imul(oe,it)|0,I=I+Math.imul(T,st)|0,l=l+Math.imul(T,ot)|0,l=l+Math.imul(q,st)|0,h=h+Math.imul(q,ot)|0;var Ms=(z+I|0)+((l&8191)<<13)|0;z=(h+(l>>>13)|0)+(Ms>>>26)|0,Ms&=67108863,I=Math.imul(De,me),l=Math.imul(De,ye),l=l+Math.imul(Oe,me)|0,h=Math.imul(Oe,ye),I=I+Math.imul(We,ge)|0,l=l+Math.imul(We,et)|0,l=l+Math.imul(je,ge)|0,h=h+Math.imul(je,et)|0,I=I+Math.imul(Ce,tt)|0,l=l+Math.imul(Ce,nt)|0,l=l+Math.imul(He,tt)|0,h=h+Math.imul(He,nt)|0,I=I+Math.imul(xe,rt)|0,l=l+Math.imul(xe,it)|0,l=l+Math.imul(Te,rt)|0,h=h+Math.imul(Te,it)|0,I=I+Math.imul(ne,st)|0,l=l+Math.imul(ne,ot)|0,l=l+Math.imul(oe,st)|0,h=h+Math.imul(oe,ot)|0,I=I+Math.imul(T,at)|0,l=l+Math.imul(T,ct)|0,l=l+Math.imul(q,at)|0,h=h+Math.imul(q,ct)|0;var Ts=(z+I|0)+((l&8191)<<13)|0;z=(h+(l>>>13)|0)+(Ts>>>26)|0,Ts&=67108863,I=Math.imul(ze,me),l=Math.imul(ze,ye),l=l+Math.imul(Ge,me)|0,h=Math.imul(Ge,ye),I=I+Math.imul(De,ge)|0,l=l+Math.imul(De,et)|0,l=l+Math.imul(Oe,ge)|0,h=h+Math.imul(Oe,et)|0,I=I+Math.imul(We,tt)|0,l=l+Math.imul(We,nt)|0,l=l+Math.imul(je,tt)|0,h=h+Math.imul(je,nt)|0,I=I+Math.imul(Ce,rt)|0,l=l+Math.imul(Ce,it)|0,l=l+Math.imul(He,rt)|0,h=h+Math.imul(He,it)|0,I=I+Math.imul(xe,st)|0,l=l+Math.imul(xe,ot)|0,l=l+Math.imul(Te,st)|0,h=h+Math.imul(Te,ot)|0,I=I+Math.imul(ne,at)|0,l=l+Math.imul(ne,ct)|0,l=l+Math.imul(oe,at)|0,h=h+Math.imul(oe,ct)|0,I=I+Math.imul(T,ut)|0,l=l+Math.imul(T,lt)|0,l=l+Math.imul(q,ut)|0,h=h+Math.imul(q,lt)|0;var Cs=(z+I|0)+((l&8191)<<13)|0;z=(h+(l>>>13)|0)+(Cs>>>26)|0,Cs&=67108863,I=Math.imul(Ye,me),l=Math.imul(Ye,ye),l=l+Math.imul(v,me)|0,h=Math.imul(v,ye),I=I+Math.imul(ze,ge)|0,l=l+Math.imul(ze,et)|0,l=l+Math.imul(Ge,ge)|0,h=h+Math.imul(Ge,et)|0,I=I+Math.imul(De,tt)|0,l=l+Math.imul(De,nt)|0,l=l+Math.imul(Oe,tt)|0,h=h+Math.imul(Oe,nt)|0,I=I+Math.imul(We,rt)|0,l=l+Math.imul(We,it)|0,l=l+Math.imul(je,rt)|0,h=h+Math.imul(je,it)|0,I=I+Math.imul(Ce,st)|0,l=l+Math.imul(Ce,ot)|0,l=l+Math.imul(He,st)|0,h=h+Math.imul(He,ot)|0,I=I+Math.imul(xe,at)|0,l=l+Math.imul(xe,ct)|0,l=l+Math.imul(Te,at)|0,h=h+Math.imul(Te,ct)|0,I=I+Math.imul(ne,ut)|0,l=l+Math.imul(ne,lt)|0,l=l+Math.imul(oe,ut)|0,h=h+Math.imul(oe,lt)|0,I=I+Math.imul(T,ft)|0,l=l+Math.imul(T,ht)|0,l=l+Math.imul(q,ft)|0,h=h+Math.imul(q,ht)|0;var Ls=(z+I|0)+((l&8191)<<13)|0;z=(h+(l>>>13)|0)+(Ls>>>26)|0,Ls&=67108863,I=Math.imul(p,me),l=Math.imul(p,ye),l=l+Math.imul(R,me)|0,h=Math.imul(R,ye),I=I+Math.imul(Ye,ge)|0,l=l+Math.imul(Ye,et)|0,l=l+Math.imul(v,ge)|0,h=h+Math.imul(v,et)|0,I=I+Math.imul(ze,tt)|0,l=l+Math.imul(ze,nt)|0,l=l+Math.imul(Ge,tt)|0,h=h+Math.imul(Ge,nt)|0,I=I+Math.imul(De,rt)|0,l=l+Math.imul(De,it)|0,l=l+Math.imul(Oe,rt)|0,h=h+Math.imul(Oe,it)|0,I=I+Math.imul(We,st)|0,l=l+Math.imul(We,ot)|0,l=l+Math.imul(je,st)|0,h=h+Math.imul(je,ot)|0,I=I+Math.imul(Ce,at)|0,l=l+Math.imul(Ce,ct)|0,l=l+Math.imul(He,at)|0,h=h+Math.imul(He,ct)|0,I=I+Math.imul(xe,ut)|0,l=l+Math.imul(xe,lt)|0,l=l+Math.imul(Te,ut)|0,h=h+Math.imul(Te,lt)|0,I=I+Math.imul(ne,ft)|0,l=l+Math.imul(ne,ht)|0,l=l+Math.imul(oe,ft)|0,h=h+Math.imul(oe,ht)|0,I=I+Math.imul(T,dt)|0,l=l+Math.imul(T,pt)|0,l=l+Math.imul(q,dt)|0,h=h+Math.imul(q,pt)|0;var Ps=(z+I|0)+((l&8191)<<13)|0;z=(h+(l>>>13)|0)+(Ps>>>26)|0,Ps&=67108863,I=Math.imul(H,me),l=Math.imul(H,ye),l=l+Math.imul(X,me)|0,h=Math.imul(X,ye),I=I+Math.imul(p,ge)|0,l=l+Math.imul(p,et)|0,l=l+Math.imul(R,ge)|0,h=h+Math.imul(R,et)|0,I=I+Math.imul(Ye,tt)|0,l=l+Math.imul(Ye,nt)|0,l=l+Math.imul(v,tt)|0,h=h+Math.imul(v,nt)|0,I=I+Math.imul(ze,rt)|0,l=l+Math.imul(ze,it)|0,l=l+Math.imul(Ge,rt)|0,h=h+Math.imul(Ge,it)|0,I=I+Math.imul(De,st)|0,l=l+Math.imul(De,ot)|0,l=l+Math.imul(Oe,st)|0,h=h+Math.imul(Oe,ot)|0,I=I+Math.imul(We,at)|0,l=l+Math.imul(We,ct)|0,l=l+Math.imul(je,at)|0,h=h+Math.imul(je,ct)|0,I=I+Math.imul(Ce,ut)|0,l=l+Math.imul(Ce,lt)|0,l=l+Math.imul(He,ut)|0,h=h+Math.imul(He,lt)|0,I=I+Math.imul(xe,ft)|0,l=l+Math.imul(xe,ht)|0,l=l+Math.imul(Te,ft)|0,h=h+Math.imul(Te,ht)|0,I=I+Math.imul(ne,dt)|0,l=l+Math.imul(ne,pt)|0,l=l+Math.imul(oe,dt)|0,h=h+Math.imul(oe,pt)|0,I=I+Math.imul(T,gt)|0,l=l+Math.imul(T,yt)|0,l=l+Math.imul(q,gt)|0,h=h+Math.imul(q,yt)|0;var Ns=(z+I|0)+((l&8191)<<13)|0;z=(h+(l>>>13)|0)+(Ns>>>26)|0,Ns&=67108863,I=Math.imul(H,ge),l=Math.imul(H,et),l=l+Math.imul(X,ge)|0,h=Math.imul(X,et),I=I+Math.imul(p,tt)|0,l=l+Math.imul(p,nt)|0,l=l+Math.imul(R,tt)|0,h=h+Math.imul(R,nt)|0,I=I+Math.imul(Ye,rt)|0,l=l+Math.imul(Ye,it)|0,l=l+Math.imul(v,rt)|0,h=h+Math.imul(v,it)|0,I=I+Math.imul(ze,st)|0,l=l+Math.imul(ze,ot)|0,l=l+Math.imul(Ge,st)|0,h=h+Math.imul(Ge,ot)|0,I=I+Math.imul(De,at)|0,l=l+Math.imul(De,ct)|0,l=l+Math.imul(Oe,at)|0,h=h+Math.imul(Oe,ct)|0,I=I+Math.imul(We,ut)|0,l=l+Math.imul(We,lt)|0,l=l+Math.imul(je,ut)|0,h=h+Math.imul(je,lt)|0,I=I+Math.imul(Ce,ft)|0,l=l+Math.imul(Ce,ht)|0,l=l+Math.imul(He,ft)|0,h=h+Math.imul(He,ht)|0,I=I+Math.imul(xe,dt)|0,l=l+Math.imul(xe,pt)|0,l=l+Math.imul(Te,dt)|0,h=h+Math.imul(Te,pt)|0,I=I+Math.imul(ne,gt)|0,l=l+Math.imul(ne,yt)|0,l=l+Math.imul(oe,gt)|0,h=h+Math.imul(oe,yt)|0;var Os=(z+I|0)+((l&8191)<<13)|0;z=(h+(l>>>13)|0)+(Os>>>26)|0,Os&=67108863,I=Math.imul(H,tt),l=Math.imul(H,nt),l=l+Math.imul(X,tt)|0,h=Math.imul(X,nt),I=I+Math.imul(p,rt)|0,l=l+Math.imul(p,it)|0,l=l+Math.imul(R,rt)|0,h=h+Math.imul(R,it)|0,I=I+Math.imul(Ye,st)|0,l=l+Math.imul(Ye,ot)|0,l=l+Math.imul(v,st)|0,h=h+Math.imul(v,ot)|0,I=I+Math.imul(ze,at)|0,l=l+Math.imul(ze,ct)|0,l=l+Math.imul(Ge,at)|0,h=h+Math.imul(Ge,ct)|0,I=I+Math.imul(De,ut)|0,l=l+Math.imul(De,lt)|0,l=l+Math.imul(Oe,ut)|0,h=h+Math.imul(Oe,lt)|0,I=I+Math.imul(We,ft)|0,l=l+Math.imul(We,ht)|0,l=l+Math.imul(je,ft)|0,h=h+Math.imul(je,ht)|0,I=I+Math.imul(Ce,dt)|0,l=l+Math.imul(Ce,pt)|0,l=l+Math.imul(He,dt)|0,h=h+Math.imul(He,pt)|0,I=I+Math.imul(xe,gt)|0,l=l+Math.imul(xe,yt)|0,l=l+Math.imul(Te,gt)|0,h=h+Math.imul(Te,yt)|0;var Us=(z+I|0)+((l&8191)<<13)|0;z=(h+(l>>>13)|0)+(Us>>>26)|0,Us&=67108863,I=Math.imul(H,rt),l=Math.imul(H,it),l=l+Math.imul(X,rt)|0,h=Math.imul(X,it),I=I+Math.imul(p,st)|0,l=l+Math.imul(p,ot)|0,l=l+Math.imul(R,st)|0,h=h+Math.imul(R,ot)|0,I=I+Math.imul(Ye,at)|0,l=l+Math.imul(Ye,ct)|0,l=l+Math.imul(v,at)|0,h=h+Math.imul(v,ct)|0,I=I+Math.imul(ze,ut)|0,l=l+Math.imul(ze,lt)|0,l=l+Math.imul(Ge,ut)|0,h=h+Math.imul(Ge,lt)|0,I=I+Math.imul(De,ft)|0,l=l+Math.imul(De,ht)|0,l=l+Math.imul(Oe,ft)|0,h=h+Math.imul(Oe,ht)|0,I=I+Math.imul(We,dt)|0,l=l+Math.imul(We,pt)|0,l=l+Math.imul(je,dt)|0,h=h+Math.imul(je,pt)|0,I=I+Math.imul(Ce,gt)|0,l=l+Math.imul(Ce,yt)|0,l=l+Math.imul(He,gt)|0,h=h+Math.imul(He,yt)|0;var Ws=(z+I|0)+((l&8191)<<13)|0;z=(h+(l>>>13)|0)+(Ws>>>26)|0,Ws&=67108863,I=Math.imul(H,st),l=Math.imul(H,ot),l=l+Math.imul(X,st)|0,h=Math.imul(X,ot),I=I+Math.imul(p,at)|0,l=l+Math.imul(p,ct)|0,l=l+Math.imul(R,at)|0,h=h+Math.imul(R,ct)|0,I=I+Math.imul(Ye,ut)|0,l=l+Math.imul(Ye,lt)|0,l=l+Math.imul(v,ut)|0,h=h+Math.imul(v,lt)|0,I=I+Math.imul(ze,ft)|0,l=l+Math.imul(ze,ht)|0,l=l+Math.imul(Ge,ft)|0,h=h+Math.imul(Ge,ht)|0,I=I+Math.imul(De,dt)|0,l=l+Math.imul(De,pt)|0,l=l+Math.imul(Oe,dt)|0,h=h+Math.imul(Oe,pt)|0,I=I+Math.imul(We,gt)|0,l=l+Math.imul(We,yt)|0,l=l+Math.imul(je,gt)|0,h=h+Math.imul(je,yt)|0;var zs=(z+I|0)+((l&8191)<<13)|0;z=(h+(l>>>13)|0)+(zs>>>26)|0,zs&=67108863,I=Math.imul(H,at),l=Math.imul(H,ct),l=l+Math.imul(X,at)|0,h=Math.imul(X,ct),I=I+Math.imul(p,ut)|0,l=l+Math.imul(p,lt)|0,l=l+Math.imul(R,ut)|0,h=h+Math.imul(R,lt)|0,I=I+Math.imul(Ye,ft)|0,l=l+Math.imul(Ye,ht)|0,l=l+Math.imul(v,ft)|0,h=h+Math.imul(v,ht)|0,I=I+Math.imul(ze,dt)|0,l=l+Math.imul(ze,pt)|0,l=l+Math.imul(Ge,dt)|0,h=h+Math.imul(Ge,pt)|0,I=I+Math.imul(De,gt)|0,l=l+Math.imul(De,yt)|0,l=l+Math.imul(Oe,gt)|0,h=h+Math.imul(Oe,yt)|0;var Fs=(z+I|0)+((l&8191)<<13)|0;z=(h+(l>>>13)|0)+(Fs>>>26)|0,Fs&=67108863,I=Math.imul(H,ut),l=Math.imul(H,lt),l=l+Math.imul(X,ut)|0,h=Math.imul(X,lt),I=I+Math.imul(p,ft)|0,l=l+Math.imul(p,ht)|0,l=l+Math.imul(R,ft)|0,h=h+Math.imul(R,ht)|0,I=I+Math.imul(Ye,dt)|0,l=l+Math.imul(Ye,pt)|0,l=l+Math.imul(v,dt)|0,h=h+Math.imul(v,pt)|0,I=I+Math.imul(ze,gt)|0,l=l+Math.imul(ze,yt)|0,l=l+Math.imul(Ge,gt)|0,h=h+Math.imul(Ge,yt)|0;var Ds=(z+I|0)+((l&8191)<<13)|0;z=(h+(l>>>13)|0)+(Ds>>>26)|0,Ds&=67108863,I=Math.imul(H,ft),l=Math.imul(H,ht),l=l+Math.imul(X,ft)|0,h=Math.imul(X,ht),I=I+Math.imul(p,dt)|0,l=l+Math.imul(p,pt)|0,l=l+Math.imul(R,dt)|0,h=h+Math.imul(R,pt)|0,I=I+Math.imul(Ye,gt)|0,l=l+Math.imul(Ye,yt)|0,l=l+Math.imul(v,gt)|0,h=h+Math.imul(v,yt)|0;var Ks=(z+I|0)+((l&8191)<<13)|0;z=(h+(l>>>13)|0)+(Ks>>>26)|0,Ks&=67108863,I=Math.imul(H,dt),l=Math.imul(H,pt),l=l+Math.imul(X,dt)|0,h=Math.imul(X,pt),I=I+Math.imul(p,gt)|0,l=l+Math.imul(p,yt)|0,l=l+Math.imul(R,gt)|0,h=h+Math.imul(R,yt)|0;var qs=(z+I|0)+((l&8191)<<13)|0;z=(h+(l>>>13)|0)+(qs>>>26)|0,qs&=67108863,I=Math.imul(H,gt),l=Math.imul(H,yt),l=l+Math.imul(X,gt)|0,h=Math.imul(X,yt);var $s=(z+I|0)+((l&8191)<<13)|0;return z=(h+(l>>>13)|0)+($s>>>26)|0,$s&=67108863,L[0]=Is,L[1]=xs,L[2]=Bs,L[3]=Rs,L[4]=Ms,L[5]=Ts,L[6]=Cs,L[7]=Ls,L[8]=Ps,L[9]=Ns,L[10]=Os,L[11]=Us,L[12]=Ws,L[13]=zs,L[14]=Fs,L[15]=Ds,L[16]=Ks,L[17]=qs,L[18]=$s,z!==0&&(L[19]=z,m.length++),m};Math.imul||(W=P);function N(y,c,f){f.negative=c.negative^y.negative,f.length=y.length+c.length;for(var m=0,_=0,B=0;B<f.length-1;B++){var L=_;_=0;for(var z=m&67108863,I=Math.min(B,c.length-1),l=Math.max(0,B-y.length+1);l<=I;l++){var h=B-l,k=y.words[h]|0,T=c.words[l]|0,q=k*T,J=q&67108863;L=L+(q/67108864|0)|0,J=J+z|0,z=J&67108863,L=L+(J>>>26)|0,_+=L>>>26,L&=67108863}f.words[B]=z,m=L,L=_}return m!==0?f.words[B]=m:f.length--,f._strip()}function V(y,c,f){return N(y,c,f)}i.prototype.mulTo=function(c,f){var m,_=this.length+c.length;return this.length===10&&c.length===10?m=W(this,c,f):_<63?m=P(this,c,f):_<1024?m=N(this,c,f):m=V(this,c,f),m},i.prototype.mul=function(c){var f=new i(null);return f.words=new Array(this.length+c.length),this.mulTo(c,f)},i.prototype.mulf=function(c){var f=new i(null);return f.words=new Array(this.length+c.length),V(this,c,f)},i.prototype.imul=function(c){return this.clone().mulTo(c,this)},i.prototype.imuln=function(c){var f=c<0;f&&(c=-c),n(typeof c=="number"),n(c<67108864);for(var m=0,_=0;_<this.length;_++){var B=(this.words[_]|0)*c,L=(B&67108863)+(m&67108863);m>>=26,m+=B/67108864|0,m+=L>>>26,this.words[_]=L&67108863}return m!==0&&(this.words[_]=m,this.length++),this.length=c===0?1:this.length,f?this.ineg():this},i.prototype.muln=function(c){return this.clone().imuln(c)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(c){var f=C(c);if(f.length===0)return new i(1);for(var m=this,_=0;_<f.length&&f[_]===0;_++,m=m.sqr());if(++_<f.length)for(var B=m.sqr();_<f.length;_++,B=B.sqr())f[_]!==0&&(m=m.mul(B));return m},i.prototype.iushln=function(c){n(typeof c=="number"&&c>=0);var f=c%26,m=(c-f)/26,_=67108863>>>26-f<<26-f,B;if(f!==0){var L=0;for(B=0;B<this.length;B++){var z=this.words[B]&_,I=(this.words[B]|0)-z<<f;this.words[B]=I|L,L=z>>>26-f}L&&(this.words[B]=L,this.length++)}if(m!==0){for(B=this.length-1;B>=0;B--)this.words[B+m]=this.words[B];for(B=0;B<m;B++)this.words[B]=0;this.length+=m}return this._strip()},i.prototype.ishln=function(c){return n(this.negative===0),this.iushln(c)},i.prototype.iushrn=function(c,f,m){n(typeof c=="number"&&c>=0);var _;f?_=(f-f%26)/26:_=0;var B=c%26,L=Math.min((c-B)/26,this.length),z=67108863^67108863>>>B<<B,I=m;if(_-=L,_=Math.max(0,_),I){for(var l=0;l<L;l++)I.words[l]=this.words[l];I.length=L}if(L!==0)if(this.length>L)for(this.length-=L,l=0;l<this.length;l++)this.words[l]=this.words[l+L];else this.words[0]=0,this.length=1;var h=0;for(l=this.length-1;l>=0&&(h!==0||l>=_);l--){var k=this.words[l]|0;this.words[l]=h<<26-B|k>>>B,h=k&z}return I&&h!==0&&(I.words[I.length++]=h),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(c,f,m){return n(this.negative===0),this.iushrn(c,f,m)},i.prototype.shln=function(c){return this.clone().ishln(c)},i.prototype.ushln=function(c){return this.clone().iushln(c)},i.prototype.shrn=function(c){return this.clone().ishrn(c)},i.prototype.ushrn=function(c){return this.clone().iushrn(c)},i.prototype.testn=function(c){n(typeof c=="number"&&c>=0);var f=c%26,m=(c-f)/26,_=1<<f;if(this.length<=m)return!1;var B=this.words[m];return!!(B&_)},i.prototype.imaskn=function(c){n(typeof c=="number"&&c>=0);var f=c%26,m=(c-f)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=m)return this;if(f!==0&&m++,this.length=Math.min(m,this.length),f!==0){var _=67108863^67108863>>>f<<f;this.words[this.length-1]&=_}return this._strip()},i.prototype.maskn=function(c){return this.clone().imaskn(c)},i.prototype.iaddn=function(c){return n(typeof c=="number"),n(c<67108864),c<0?this.isubn(-c):this.negative!==0?this.length===1&&(this.words[0]|0)<=c?(this.words[0]=c-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(c),this.negative=1,this):this._iaddn(c)},i.prototype._iaddn=function(c){this.words[0]+=c;for(var f=0;f<this.length&&this.words[f]>=67108864;f++)this.words[f]-=67108864,f===this.length-1?this.words[f+1]=1:this.words[f+1]++;return this.length=Math.max(this.length,f+1),this},i.prototype.isubn=function(c){if(n(typeof c=="number"),n(c<67108864),c<0)return this.iaddn(-c);if(this.negative!==0)return this.negative=0,this.iaddn(c),this.negative=1,this;if(this.words[0]-=c,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var f=0;f<this.length&&this.words[f]<0;f++)this.words[f]+=67108864,this.words[f+1]-=1;return this._strip()},i.prototype.addn=function(c){return this.clone().iaddn(c)},i.prototype.subn=function(c){return this.clone().isubn(c)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(c,f,m){var _=c.length+m,B;this._expand(_);var L,z=0;for(B=0;B<c.length;B++){L=(this.words[B+m]|0)+z;var I=(c.words[B]|0)*f;L-=I&67108863,z=(L>>26)-(I/67108864|0),this.words[B+m]=L&67108863}for(;B<this.length-m;B++)L=(this.words[B+m]|0)+z,z=L>>26,this.words[B+m]=L&67108863;if(z===0)return this._strip();for(n(z===-1),z=0,B=0;B<this.length;B++)L=-(this.words[B]|0)+z,z=L>>26,this.words[B]=L&67108863;return this.negative=1,this._strip()},i.prototype._wordDiv=function(c,f){var m=this.length-c.length,_=this.clone(),B=c,L=B.words[B.length-1]|0,z=this._countBits(L);m=26-z,m!==0&&(B=B.ushln(m),_.iushln(m),L=B.words[B.length-1]|0);var I=_.length-B.length,l;if(f!=="mod"){l=new i(null),l.length=I+1,l.words=new Array(l.length);for(var h=0;h<l.length;h++)l.words[h]=0}var k=_.clone()._ishlnsubmul(B,1,I);k.negative===0&&(_=k,l&&(l.words[I]=1));for(var T=I-1;T>=0;T--){var q=(_.words[B.length+T]|0)*67108864+(_.words[B.length+T-1]|0);for(q=Math.min(q/L|0,67108863),_._ishlnsubmul(B,q,T);_.negative!==0;)q--,_.negative=0,_._ishlnsubmul(B,1,T),_.isZero()||(_.negative^=1);l&&(l.words[T]=q)}return l&&l._strip(),_._strip(),f!=="div"&&m!==0&&_.iushrn(m),{div:l||null,mod:_}},i.prototype.divmod=function(c,f,m){if(n(!c.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var _,B,L;return this.negative!==0&&c.negative===0?(L=this.neg().divmod(c,f),f!=="mod"&&(_=L.div.neg()),f!=="div"&&(B=L.mod.neg(),m&&B.negative!==0&&B.iadd(c)),{div:_,mod:B}):this.negative===0&&c.negative!==0?(L=this.divmod(c.neg(),f),f!=="mod"&&(_=L.div.neg()),{div:_,mod:L.mod}):(this.negative&c.negative)!==0?(L=this.neg().divmod(c.neg(),f),f!=="div"&&(B=L.mod.neg(),m&&B.negative!==0&&B.isub(c)),{div:L.div,mod:B}):c.length>this.length||this.cmp(c)<0?{div:new i(0),mod:this}:c.length===1?f==="div"?{div:this.divn(c.words[0]),mod:null}:f==="mod"?{div:null,mod:new i(this.modrn(c.words[0]))}:{div:this.divn(c.words[0]),mod:new i(this.modrn(c.words[0]))}:this._wordDiv(c,f)},i.prototype.div=function(c){return this.divmod(c,"div",!1).div},i.prototype.mod=function(c){return this.divmod(c,"mod",!1).mod},i.prototype.umod=function(c){return this.divmod(c,"mod",!0).mod},i.prototype.divRound=function(c){var f=this.divmod(c);if(f.mod.isZero())return f.div;var m=f.div.negative!==0?f.mod.isub(c):f.mod,_=c.ushrn(1),B=c.andln(1),L=m.cmp(_);return L<0||B===1&&L===0?f.div:f.div.negative!==0?f.div.isubn(1):f.div.iaddn(1)},i.prototype.modrn=function(c){var f=c<0;f&&(c=-c),n(c<=67108863);for(var m=(1<<26)%c,_=0,B=this.length-1;B>=0;B--)_=(m*_+(this.words[B]|0))%c;return f?-_:_},i.prototype.modn=function(c){return this.modrn(c)},i.prototype.idivn=function(c){var f=c<0;f&&(c=-c),n(c<=67108863);for(var m=0,_=this.length-1;_>=0;_--){var B=(this.words[_]|0)+m*67108864;this.words[_]=B/c|0,m=B%c}return this._strip(),f?this.ineg():this},i.prototype.divn=function(c){return this.clone().idivn(c)},i.prototype.egcd=function(c){n(c.negative===0),n(!c.isZero());var f=this,m=c.clone();f.negative!==0?f=f.umod(c):f=f.clone();for(var _=new i(1),B=new i(0),L=new i(0),z=new i(1),I=0;f.isEven()&&m.isEven();)f.iushrn(1),m.iushrn(1),++I;for(var l=m.clone(),h=f.clone();!f.isZero();){for(var k=0,T=1;(f.words[0]&T)===0&&k<26;++k,T<<=1);if(k>0)for(f.iushrn(k);k-- >0;)(_.isOdd()||B.isOdd())&&(_.iadd(l),B.isub(h)),_.iushrn(1),B.iushrn(1);for(var q=0,J=1;(m.words[0]&J)===0&&q<26;++q,J<<=1);if(q>0)for(m.iushrn(q);q-- >0;)(L.isOdd()||z.isOdd())&&(L.iadd(l),z.isub(h)),L.iushrn(1),z.iushrn(1);f.cmp(m)>=0?(f.isub(m),_.isub(L),B.isub(z)):(m.isub(f),L.isub(_),z.isub(B))}return{a:L,b:z,gcd:m.iushln(I)}},i.prototype._invmp=function(c){n(c.negative===0),n(!c.isZero());var f=this,m=c.clone();f.negative!==0?f=f.umod(c):f=f.clone();for(var _=new i(1),B=new i(0),L=m.clone();f.cmpn(1)>0&&m.cmpn(1)>0;){for(var z=0,I=1;(f.words[0]&I)===0&&z<26;++z,I<<=1);if(z>0)for(f.iushrn(z);z-- >0;)_.isOdd()&&_.iadd(L),_.iushrn(1);for(var l=0,h=1;(m.words[0]&h)===0&&l<26;++l,h<<=1);if(l>0)for(m.iushrn(l);l-- >0;)B.isOdd()&&B.iadd(L),B.iushrn(1);f.cmp(m)>=0?(f.isub(m),_.isub(B)):(m.isub(f),B.isub(_))}var k;return f.cmpn(1)===0?k=_:k=B,k.cmpn(0)<0&&k.iadd(c),k},i.prototype.gcd=function(c){if(this.isZero())return c.abs();if(c.isZero())return this.abs();var f=this.clone(),m=c.clone();f.negative=0,m.negative=0;for(var _=0;f.isEven()&&m.isEven();_++)f.iushrn(1),m.iushrn(1);do{for(;f.isEven();)f.iushrn(1);for(;m.isEven();)m.iushrn(1);var B=f.cmp(m);if(B<0){var L=f;f=m,m=L}else if(B===0||m.cmpn(1)===0)break;f.isub(m)}while(!0);return m.iushln(_)},i.prototype.invm=function(c){return this.egcd(c).a.umod(c)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(c){return this.words[0]&c},i.prototype.bincn=function(c){n(typeof c=="number");var f=c%26,m=(c-f)/26,_=1<<f;if(this.length<=m)return this._expand(m+1),this.words[m]|=_,this;for(var B=_,L=m;B!==0&&L<this.length;L++){var z=this.words[L]|0;z+=B,B=z>>>26,z&=67108863,this.words[L]=z}return B!==0&&(this.words[L]=B,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(c){var f=c<0;if(this.negative!==0&&!f)return-1;if(this.negative===0&&f)return 1;this._strip();var m;if(this.length>1)m=1;else{f&&(c=-c),n(c<=67108863,"Number is too big");var _=this.words[0]|0;m=_===c?0:_<c?-1:1}return this.negative!==0?-m|0:m},i.prototype.cmp=function(c){if(this.negative!==0&&c.negative===0)return-1;if(this.negative===0&&c.negative!==0)return 1;var f=this.ucmp(c);return this.negative!==0?-f|0:f},i.prototype.ucmp=function(c){if(this.length>c.length)return 1;if(this.length<c.length)return-1;for(var f=0,m=this.length-1;m>=0;m--){var _=this.words[m]|0,B=c.words[m]|0;if(_!==B){_<B?f=-1:_>B&&(f=1);break}}return f},i.prototype.gtn=function(c){return this.cmpn(c)===1},i.prototype.gt=function(c){return this.cmp(c)===1},i.prototype.gten=function(c){return this.cmpn(c)>=0},i.prototype.gte=function(c){return this.cmp(c)>=0},i.prototype.ltn=function(c){return this.cmpn(c)===-1},i.prototype.lt=function(c){return this.cmp(c)===-1},i.prototype.lten=function(c){return this.cmpn(c)<=0},i.prototype.lte=function(c){return this.cmp(c)<=0},i.prototype.eqn=function(c){return this.cmpn(c)===0},i.prototype.eq=function(c){return this.cmp(c)===0},i.red=function(c){return new F(c)},i.prototype.toRed=function(c){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),c.convertTo(this)._forceRed(c)},i.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(c){return this.red=c,this},i.prototype.forceRed=function(c){return n(!this.red,"Already a number in reduction context"),this._forceRed(c)},i.prototype.redAdd=function(c){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,c)},i.prototype.redIAdd=function(c){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,c)},i.prototype.redSub=function(c){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,c)},i.prototype.redISub=function(c){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,c)},i.prototype.redShl=function(c){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,c)},i.prototype.redMul=function(c){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,c),this.red.mul(this,c)},i.prototype.redIMul=function(c){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,c),this.red.imul(this,c)},i.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(c){return n(this.red&&!c.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,c)};var Y={k256:null,p224:null,p192:null,p25519:null};function $(y,c){this.name=y,this.p=new i(c,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}$.prototype._tmp=function(){var c=new i(null);return c.words=new Array(Math.ceil(this.n/13)),c},$.prototype.ireduce=function(c){var f=c,m;do this.split(f,this.tmp),f=this.imulK(f),f=f.iadd(this.tmp),m=f.bitLength();while(m>this.n);var _=m<this.n?-1:f.ucmp(this.p);return _===0?(f.words[0]=0,f.length=1):_>0?f.isub(this.p):f.strip!==void 0?f.strip():f._strip(),f},$.prototype.split=function(c,f){c.iushrn(this.n,0,f)},$.prototype.imulK=function(c){return c.imul(this.k)};function Q(){$.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(Q,$),Q.prototype.split=function(c,f){for(var m=4194303,_=Math.min(c.length,9),B=0;B<_;B++)f.words[B]=c.words[B];if(f.length=_,c.length<=9){c.words[0]=0,c.length=1;return}var L=c.words[9];for(f.words[f.length++]=L&m,B=10;B<c.length;B++){var z=c.words[B]|0;c.words[B-10]=(z&m)<<4|L>>>22,L=z}L>>>=22,c.words[B-10]=L,L===0&&c.length>10?c.length-=10:c.length-=9},Q.prototype.imulK=function(c){c.words[c.length]=0,c.words[c.length+1]=0,c.length+=2;for(var f=0,m=0;m<c.length;m++){var _=c.words[m]|0;f+=_*977,c.words[m]=f&67108863,f=_*64+(f/67108864|0)}return c.words[c.length-1]===0&&(c.length--,c.words[c.length-1]===0&&c.length--),c};function Z(){$.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(Z,$);function M(){$.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(M,$);function O(){$.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s(O,$),O.prototype.imulK=function(c){for(var f=0,m=0;m<c.length;m++){var _=(c.words[m]|0)*19+f,B=_&67108863;_>>>=26,c.words[m]=B,f=_}return f!==0&&(c.words[c.length++]=f),c},i._prime=function(c){if(Y[c])return Y[c];var f;if(c==="k256")f=new Q;else if(c==="p224")f=new Z;else if(c==="p192")f=new M;else if(c==="p25519")f=new O;else throw new Error("Unknown prime "+c);return Y[c]=f,f};function F(y){if(typeof y=="string"){var c=i._prime(y);this.m=c.p,this.prime=c}else n(y.gtn(1),"modulus must be greater than 1"),this.m=y,this.prime=null}F.prototype._verify1=function(c){n(c.negative===0,"red works only with positives"),n(c.red,"red works only with red numbers")},F.prototype._verify2=function(c,f){n((c.negative|f.negative)===0,"red works only with positives"),n(c.red&&c.red===f.red,"red works only with red numbers")},F.prototype.imod=function(c){return this.prime?this.prime.ireduce(c)._forceRed(this):(w(c,c.umod(this.m)._forceRed(this)),c)},F.prototype.neg=function(c){return c.isZero()?c.clone():this.m.sub(c)._forceRed(this)},F.prototype.add=function(c,f){this._verify2(c,f);var m=c.add(f);return m.cmp(this.m)>=0&&m.isub(this.m),m._forceRed(this)},F.prototype.iadd=function(c,f){this._verify2(c,f);var m=c.iadd(f);return m.cmp(this.m)>=0&&m.isub(this.m),m},F.prototype.sub=function(c,f){this._verify2(c,f);var m=c.sub(f);return m.cmpn(0)<0&&m.iadd(this.m),m._forceRed(this)},F.prototype.isub=function(c,f){this._verify2(c,f);var m=c.isub(f);return m.cmpn(0)<0&&m.iadd(this.m),m},F.prototype.shl=function(c,f){return this._verify1(c),this.imod(c.ushln(f))},F.prototype.imul=function(c,f){return this._verify2(c,f),this.imod(c.imul(f))},F.prototype.mul=function(c,f){return this._verify2(c,f),this.imod(c.mul(f))},F.prototype.isqr=function(c){return this.imul(c,c.clone())},F.prototype.sqr=function(c){return this.mul(c,c)},F.prototype.sqrt=function(c){if(c.isZero())return c.clone();var f=this.m.andln(3);if(n(f%2===1),f===3){var m=this.m.add(new i(1)).iushrn(2);return this.pow(c,m)}for(var _=this.m.subn(1),B=0;!_.isZero()&&_.andln(1)===0;)B++,_.iushrn(1);n(!_.isZero());var L=new i(1).toRed(this),z=L.redNeg(),I=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new i(2*l*l).toRed(this);this.pow(l,I).cmp(z)!==0;)l.redIAdd(z);for(var h=this.pow(l,_),k=this.pow(c,_.addn(1).iushrn(1)),T=this.pow(c,_),q=B;T.cmp(L)!==0;){for(var J=T,ne=0;J.cmp(L)!==0;ne++)J=J.redSqr();n(ne<q);var oe=this.pow(h,new i(1).iushln(q-ne-1));k=k.redMul(oe),h=oe.redSqr(),T=T.redMul(h),q=ne}return k},F.prototype.invm=function(c){var f=c._invmp(this.m);return f.negative!==0?(f.negative=0,this.imod(f).redNeg()):this.imod(f)},F.prototype.pow=function(c,f){if(f.isZero())return new i(1).toRed(this);if(f.cmpn(1)===0)return c.clone();var m=4,_=new Array(1<<m);_[0]=new i(1).toRed(this),_[1]=c;for(var B=2;B<_.length;B++)_[B]=this.mul(_[B-1],c);var L=_[0],z=0,I=0,l=f.bitLength()%26;for(l===0&&(l=26),B=f.length-1;B>=0;B--){for(var h=f.words[B],k=l-1;k>=0;k--){var T=h>>k&1;if(L!==_[0]&&(L=this.sqr(L)),T===0&&z===0){I=0;continue}z<<=1,z|=T,I++,!(I!==m&&(B!==0||k!==0))&&(L=this.mul(L,_[z]),I=0,z=0)}l=26}return L},F.prototype.convertTo=function(c){var f=c.umod(this.m);return f===c?f.clone():f},F.prototype.convertFrom=function(c){var f=c.clone();return f.red=null,f},i.mont=function(c){return new D(c)};function D(y){F.call(this,y),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s(D,F),D.prototype.convertTo=function(c){return this.imod(c.ushln(this.shift))},D.prototype.convertFrom=function(c){var f=this.imod(c.mul(this.rinv));return f.red=null,f},D.prototype.imul=function(c,f){if(c.isZero()||f.isZero())return c.words[0]=0,c.length=1,c;var m=c.imul(f),_=m.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),B=m.isub(_).iushrn(this.shift),L=B;return B.cmp(this.m)>=0?L=B.isub(this.m):B.cmpn(0)<0&&(L=B.iadd(this.m)),L._forceRed(this)},D.prototype.mul=function(c,f){if(c.isZero()||f.isZero())return new i(0)._forceRed(this);var m=c.mul(f),_=m.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),B=m.isub(_).iushrn(this.shift),L=B;return B.cmp(this.m)>=0?L=B.isub(this.m):B.cmpn(0)<0&&(L=B.iadd(this.m)),L._forceRed(this)},D.prototype.invm=function(c){var f=this.imod(c._invmp(this.m).mul(this.r2));return f._forceRed(this)}})(r,rd)})(Ri)),Ri.exports}var id=Pl();const Cc=ci(id);var ki={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var Lc;function Nl(){return Lc||(Lc=1,(function(r,e){var t=Ma(),n=t.Buffer;function s(o,a){for(var u in o)a[u]=o[u]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?r.exports=t:(s(t,e),e.Buffer=i);function i(o,a,u){return n(o,a,u)}i.prototype=Object.create(n.prototype),s(n,i),i.from=function(o,a,u){if(typeof o=="number")throw new TypeError("Argument must not be a number");return n(o,a,u)},i.alloc=function(o,a,u){if(typeof o!="number")throw new TypeError("Argument must be a number");var g=n(o);return a!==void 0?typeof u=="string"?g.fill(a,u):g.fill(a):g.fill(0),g},i.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n(o)},i.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return t.SlowBuffer(o)}})(ki,ki.exports)),ki.exports}var Xs,Pc;function sd(){if(Pc)return Xs;Pc=1;var r=Nl().Buffer;function e(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),s=0;s<n.length;s++)n[s]=255;for(var i=0;i<t.length;i++){var o=t.charAt(i),a=o.charCodeAt(0);if(n[a]!==255)throw new TypeError(o+" is ambiguous");n[a]=i}var u=t.length,g=t.charAt(0),w=Math.log(u)/Math.log(256),S=Math.log(256)/Math.log(u);function E(x){if((Array.isArray(x)||x instanceof Uint8Array)&&(x=r.from(x)),!r.isBuffer(x))throw new TypeError("Expected Buffer");if(x.length===0)return"";for(var C=0,P=0,W=0,N=x.length;W!==N&&x[W]===0;)W++,C++;for(var V=(N-W)*S+1>>>0,Y=new Uint8Array(V);W!==N;){for(var $=x[W],Q=0,Z=V-1;($!==0||Q<P)&&Z!==-1;Z--,Q++)$+=256*Y[Z]>>>0,Y[Z]=$%u>>>0,$=$/u>>>0;if($!==0)throw new Error("Non-zero carry");P=Q,W++}for(var M=V-P;M!==V&&Y[M]===0;)M++;for(var O=g.repeat(C);M<V;++M)O+=t.charAt(Y[M]);return O}function b(x){if(typeof x!="string")throw new TypeError("Expected String");if(x.length===0)return r.alloc(0);for(var C=0,P=0,W=0;x[C]===g;)P++,C++;for(var N=(x.length-C)*w+1>>>0,V=new Uint8Array(N);C<x.length;){var Y=x.charCodeAt(C);if(Y>255)return;var $=n[Y];if($===255)return;for(var Q=0,Z=N-1;($!==0||Q<W)&&Z!==-1;Z--,Q++)$+=u*V[Z]>>>0,V[Z]=$%256>>>0,$=$/256>>>0;if($!==0)throw new Error("Non-zero carry");W=Q,C++}for(var M=N-W;M!==N&&V[M]===0;)M++;var O=r.allocUnsafe(P+(N-M));O.fill(0,0,P);for(var F=P;M!==N;)O[F++]=V[M++];return O}function A(x){var C=b(x);if(C)return C;throw new Error("Non-base"+u+" character")}return{encode:E,decodeUnsafe:b,decode:A}}return Xs=e,Xs}var Qs,Nc;function od(){if(Nc)return Qs;Nc=1;var r=sd(),e="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";return Qs=r(e),Qs}var ad=od();const Bt=ci(ad),Oc=dl;var Re={},eo,Uc;function cd(){if(Uc)return eo;Uc=1;var r=Nl().Buffer;function e(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),s=0;s<n.length;s++)n[s]=255;for(var i=0;i<t.length;i++){var o=t.charAt(i),a=o.charCodeAt(0);if(n[a]!==255)throw new TypeError(o+" is ambiguous");n[a]=i}var u=t.length,g=t.charAt(0),w=Math.log(u)/Math.log(256),S=Math.log(256)/Math.log(u);function E(x){if((Array.isArray(x)||x instanceof Uint8Array)&&(x=r.from(x)),!r.isBuffer(x))throw new TypeError("Expected Buffer");if(x.length===0)return"";for(var C=0,P=0,W=0,N=x.length;W!==N&&x[W]===0;)W++,C++;for(var V=(N-W)*S+1>>>0,Y=new Uint8Array(V);W!==N;){for(var $=x[W],Q=0,Z=V-1;($!==0||Q<P)&&Z!==-1;Z--,Q++)$+=256*Y[Z]>>>0,Y[Z]=$%u>>>0,$=$/u>>>0;if($!==0)throw new Error("Non-zero carry");P=Q,W++}for(var M=V-P;M!==V&&Y[M]===0;)M++;for(var O=g.repeat(C);M<V;++M)O+=t.charAt(Y[M]);return O}function b(x){if(typeof x!="string")throw new TypeError("Expected String");if(x.length===0)return r.alloc(0);for(var C=0,P=0,W=0;x[C]===g;)P++,C++;for(var N=(x.length-C)*w+1>>>0,V=new Uint8Array(N);C<x.length;){var Y=x.charCodeAt(C);if(Y>255)return;var $=n[Y];if($===255)return;for(var Q=0,Z=N-1;($!==0||Q<W)&&Z!==-1;Z--,Q++)$+=u*V[Z]>>>0,V[Z]=$%256>>>0,$=$/256>>>0;if($!==0)throw new Error("Non-zero carry");W=Q,C++}for(var M=N-W;M!==N&&V[M]===0;)M++;var O=r.allocUnsafe(P+(N-M));O.fill(0,0,P);for(var F=P;M!==N;)O[F++]=V[M++];return O}function A(x){var C=b(x);if(C)return C;throw new Error("Non-base"+u+" character")}return{encode:E,decodeUnsafe:b,decode:A}}return eo=e,eo}var to,Wc;function ud(){if(Wc)return to;Wc=1;var r=cd(),e="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";return to=r(e),to}function mn(r,e,t){return e<=r&&r<=t}function hs(r){if(r===void 0)return{};if(r===Object(r))return r;throw TypeError("Could not convert argument to dictionary")}function ld(r){for(var e=String(r),t=e.length,n=0,s=[];n<t;){var i=e.charCodeAt(n);if(i<55296||i>57343)s.push(i);else if(56320<=i&&i<=57343)s.push(65533);else if(55296<=i&&i<=56319)if(n===t-1)s.push(65533);else{var o=r.charCodeAt(n+1);if(56320<=o&&o<=57343){var a=i&1023,u=o&1023;s.push(65536+(a<<10)+u),n+=1}else s.push(65533)}n+=1}return s}function fd(r){for(var e="",t=0;t<r.length;++t){var n=r[t];n<=65535?e+=String.fromCharCode(n):(n-=65536,e+=String.fromCharCode((n>>10)+55296,(n&1023)+56320))}return e}var Ji=-1;function Wa(r){this.tokens=[].slice.call(r)}Wa.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():Ji},prepend:function(r){if(Array.isArray(r))for(var e=r;e.length;)this.tokens.unshift(e.pop());else this.tokens.unshift(r)},push:function(r){if(Array.isArray(r))for(var e=r;e.length;)this.tokens.push(e.shift());else this.tokens.push(r)}};var Cr=-1;function no(r,e){if(r)throw TypeError("Decoder error");return e||65533}var Xi="utf-8";function Qi(r,e){if(!(this instanceof Qi))return new Qi(r,e);if(r=r!==void 0?String(r).toLowerCase():Xi,r!==Xi)throw new Error("Encoding not supported. Only utf-8 is supported");e=hs(e),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!e.fatal,this._ignoreBOM=!!e.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}Qi.prototype={decode:function(e,t){var n;typeof e=="object"&&e instanceof ArrayBuffer?n=new Uint8Array(e):typeof e=="object"&&"buffer"in e&&e.buffer instanceof ArrayBuffer?n=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):n=new Uint8Array(0),t=hs(t),this._streaming||(this._decoder=new hd({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!t.stream;for(var s=new Wa(n),i=[],o;!s.endOfStream()&&(o=this._decoder.handler(s,s.read()),o!==Cr);)o!==null&&(Array.isArray(o)?i.push.apply(i,o):i.push(o));if(!this._streaming){do{if(o=this._decoder.handler(s,s.read()),o===Cr)break;o!==null&&(Array.isArray(o)?i.push.apply(i,o):i.push(o))}while(!s.endOfStream());this._decoder=null}return i.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(i[0]===65279?(this._BOMseen=!0,i.shift()):this._BOMseen=!0),fd(i)}};function es(r,e){if(!(this instanceof es))return new es(r,e);if(r=r!==void 0?String(r).toLowerCase():Xi,r!==Xi)throw new Error("Encoding not supported. Only utf-8 is supported");e=hs(e),this._streaming=!1,this._encoder=null,this._options={fatal:!!e.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}es.prototype={encode:function(e,t){e=e?String(e):"",t=hs(t),this._streaming||(this._encoder=new dd(this._options)),this._streaming=!!t.stream;for(var n=[],s=new Wa(ld(e)),i;!s.endOfStream()&&(i=this._encoder.handler(s,s.read()),i!==Cr);)Array.isArray(i)?n.push.apply(n,i):n.push(i);if(!this._streaming){for(;i=this._encoder.handler(s,s.read()),i!==Cr;)Array.isArray(i)?n.push.apply(n,i):n.push(i);this._encoder=null}return new Uint8Array(n)}};function hd(r){var e=r.fatal,t=0,n=0,s=0,i=128,o=191;this.handler=function(a,u){if(u===Ji&&s!==0)return s=0,no(e);if(u===Ji)return Cr;if(s===0){if(mn(u,0,127))return u;if(mn(u,194,223))s=1,t=u-192;else if(mn(u,224,239))u===224&&(i=160),u===237&&(o=159),s=2,t=u-224;else if(mn(u,240,244))u===240&&(i=144),u===244&&(o=143),s=3,t=u-240;else return no(e);return t=t<<6*s,null}if(!mn(u,i,o))return t=s=n=0,i=128,o=191,a.prepend(u),no(e);if(i=128,o=191,n+=1,t+=u-128<<6*(s-n),n!==s)return null;var g=t;return t=s=n=0,g}}function dd(r){r.fatal,this.handler=function(e,t){if(t===Ji)return Cr;if(mn(t,0,127))return t;var n,s;mn(t,128,2047)?(n=1,s=192):mn(t,2048,65535)?(n=2,s=224):mn(t,65536,1114111)&&(n=3,s=240);for(var i=[(t>>6*n)+s];n>0;){var o=t>>6*(n-1);i.push(128|o&63),n-=1}return i}}const pd=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:Qi,TextEncoder:es},Symbol.toStringTag,{value:"Module"})),gd=Ra(pd);var zc;function yd(){if(zc)return Re;zc=1;var r=Re&&Re.__createBinding||(Object.create?(function(M,O,F,D){D===void 0&&(D=F),Object.defineProperty(M,D,{enumerable:!0,get:function(){return O[F]}})}):(function(M,O,F,D){D===void 0&&(D=F),M[D]=O[F]})),e=Re&&Re.__setModuleDefault||(Object.create?(function(M,O){Object.defineProperty(M,"default",{enumerable:!0,value:O})}):function(M,O){M.default=O}),t=Re&&Re.__decorate||function(M,O,F,D){var y=arguments.length,c=y<3?O:D===null?D=Object.getOwnPropertyDescriptor(O,F):D,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(M,O,F,D);else for(var m=M.length-1;m>=0;m--)(f=M[m])&&(c=(y<3?f(c):y>3?f(O,F,c):f(O,F))||c);return y>3&&c&&Object.defineProperty(O,F,c),c},n=Re&&Re.__importStar||function(M){if(M&&M.__esModule)return M;var O={};if(M!=null)for(var F in M)F!=="default"&&Object.hasOwnProperty.call(M,F)&&r(O,M,F);return e(O,M),O},s=Re&&Re.__importDefault||function(M){return M&&M.__esModule?M:{default:M}};Object.defineProperty(Re,"__esModule",{value:!0}),Re.deserializeUnchecked=Re.deserialize=Re.serialize=Re.BinaryReader=Re.BinaryWriter=Re.BorshError=Re.baseDecode=Re.baseEncode=void 0;const i=s(Pl()),o=s(ud()),a=n(gd),u=typeof TextDecoder!="function"?a.TextDecoder:TextDecoder,g=new u("utf-8",{fatal:!0});function w(M){return typeof M=="string"&&(M=Buffer.from(M,"utf8")),o.default.encode(Buffer.from(M))}Re.baseEncode=w;function S(M){return Buffer.from(o.default.decode(M))}Re.baseDecode=S;const E=1024;class b extends Error{constructor(O){super(O),this.fieldPath=[],this.originalMessage=O}addToFieldPath(O){this.fieldPath.splice(0,0,O),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}Re.BorshError=b;class A{constructor(){this.buf=Buffer.alloc(E),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(E)]))}writeU8(O){this.maybeResize(),this.buf.writeUInt8(O,this.length),this.length+=1}writeU16(O){this.maybeResize(),this.buf.writeUInt16LE(O,this.length),this.length+=2}writeU32(O){this.maybeResize(),this.buf.writeUInt32LE(O,this.length),this.length+=4}writeU64(O){this.maybeResize(),this.writeBuffer(Buffer.from(new i.default(O).toArray("le",8)))}writeU128(O){this.maybeResize(),this.writeBuffer(Buffer.from(new i.default(O).toArray("le",16)))}writeU256(O){this.maybeResize(),this.writeBuffer(Buffer.from(new i.default(O).toArray("le",32)))}writeU512(O){this.maybeResize(),this.writeBuffer(Buffer.from(new i.default(O).toArray("le",64)))}writeBuffer(O){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),O,Buffer.alloc(E)]),this.length+=O.length}writeString(O){this.maybeResize();const F=Buffer.from(O,"utf8");this.writeU32(F.length),this.writeBuffer(F)}writeFixedArray(O){this.writeBuffer(Buffer.from(O))}writeArray(O,F){this.maybeResize(),this.writeU32(O.length);for(const D of O)this.maybeResize(),F(D)}toArray(){return this.buf.subarray(0,this.length)}}Re.BinaryWriter=A;function x(M,O,F){const D=F.value;F.value=function(...y){try{return D.apply(this,y)}catch(c){if(c instanceof RangeError){const f=c.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(f)>=0)throw new b("Reached the end of buffer when deserializing")}throw c}}}class C{constructor(O){this.buf=O,this.offset=0}readU8(){const O=this.buf.readUInt8(this.offset);return this.offset+=1,O}readU16(){const O=this.buf.readUInt16LE(this.offset);return this.offset+=2,O}readU32(){const O=this.buf.readUInt32LE(this.offset);return this.offset+=4,O}readU64(){const O=this.readBuffer(8);return new i.default(O,"le")}readU128(){const O=this.readBuffer(16);return new i.default(O,"le")}readU256(){const O=this.readBuffer(32);return new i.default(O,"le")}readU512(){const O=this.readBuffer(64);return new i.default(O,"le")}readBuffer(O){if(this.offset+O>this.buf.length)throw new b(`Expected buffer length ${O} isn't within bounds`);const F=this.buf.slice(this.offset,this.offset+O);return this.offset+=O,F}readString(){const O=this.readU32(),F=this.readBuffer(O);try{return g.decode(F)}catch(D){throw new b(`Error decoding UTF-8 string: ${D}`)}}readFixedArray(O){return new Uint8Array(this.readBuffer(O))}readArray(O){const F=this.readU32(),D=Array();for(let y=0;y<F;++y)D.push(O());return D}}t([x],C.prototype,"readU8",null),t([x],C.prototype,"readU16",null),t([x],C.prototype,"readU32",null),t([x],C.prototype,"readU64",null),t([x],C.prototype,"readU128",null),t([x],C.prototype,"readU256",null),t([x],C.prototype,"readU512",null),t([x],C.prototype,"readString",null),t([x],C.prototype,"readFixedArray",null),t([x],C.prototype,"readArray",null),Re.BinaryReader=C;function P(M){return M.charAt(0).toUpperCase()+M.slice(1)}function W(M,O,F,D,y){try{if(typeof D=="string")y[`write${P(D)}`](F);else if(D instanceof Array)if(typeof D[0]=="number"){if(F.length!==D[0])throw new b(`Expecting byte array of length ${D[0]}, but got ${F.length} bytes`);y.writeFixedArray(F)}else if(D.length===2&&typeof D[1]=="number"){if(F.length!==D[1])throw new b(`Expecting byte array of length ${D[1]}, but got ${F.length} bytes`);for(let c=0;c<D[1];c++)W(M,null,F[c],D[0],y)}else y.writeArray(F,c=>{W(M,O,c,D[0],y)});else if(D.kind!==void 0)switch(D.kind){case"option":{F==null?y.writeU8(0):(y.writeU8(1),W(M,O,F,D.type,y));break}case"map":{y.writeU32(F.size),F.forEach((c,f)=>{W(M,O,f,D.key,y),W(M,O,c,D.value,y)});break}default:throw new b(`FieldType ${D} unrecognized`)}else N(M,F,y)}catch(c){throw c instanceof b&&c.addToFieldPath(O),c}}function N(M,O,F){if(typeof O.borshSerialize=="function"){O.borshSerialize(F);return}const D=M.get(O.constructor);if(!D)throw new b(`Class ${O.constructor.name} is missing in schema`);if(D.kind==="struct")D.fields.map(([y,c])=>{W(M,y,O[y],c,F)});else if(D.kind==="enum"){const y=O[D.field];for(let c=0;c<D.values.length;++c){const[f,m]=D.values[c];if(f===y){F.writeU8(c),W(M,f,O[f],m,F);break}}}else throw new b(`Unexpected schema kind: ${D.kind} for ${O.constructor.name}`)}function V(M,O,F=A){const D=new F;return N(M,O,D),D.toArray()}Re.serialize=V;function Y(M,O,F,D){try{if(typeof F=="string")return D[`read${P(F)}`]();if(F instanceof Array){if(typeof F[0]=="number")return D.readFixedArray(F[0]);if(typeof F[1]=="number"){const y=[];for(let c=0;c<F[1];c++)y.push(Y(M,null,F[0],D));return y}else return D.readArray(()=>Y(M,O,F[0],D))}if(F.kind==="option")return D.readU8()?Y(M,O,F.type,D):void 0;if(F.kind==="map"){let y=new Map;const c=D.readU32();for(let f=0;f<c;f++){const m=Y(M,O,F.key,D),_=Y(M,O,F.value,D);y.set(m,_)}return y}return $(M,F,D)}catch(y){throw y instanceof b&&y.addToFieldPath(O),y}}function $(M,O,F){if(typeof O.borshDeserialize=="function")return O.borshDeserialize(F);const D=M.get(O);if(!D)throw new b(`Class ${O.name} is missing in schema`);if(D.kind==="struct"){const y={};for(const[c,f]of M.get(O).fields)y[c]=Y(M,c,f,F);return new O(y)}if(D.kind==="enum"){const y=F.readU8();if(y>=D.values.length)throw new b(`Enum index: ${y} is out of range`);const[c,f]=D.values[y],m=Y(M,c,f,F);return new O({[c]:m})}throw new b(`Unexpected schema kind: ${D.kind} for ${O.constructor.name}`)}function Q(M,O,F,D=C){const y=new D(F),c=$(M,O,y);if(y.offset<F.length)throw new b(`Unexpected ${F.length-y.offset} bytes after deserialized data`);return c}Re.deserialize=Q;function Z(M,O,F,D=C){const y=new D(F);return $(M,O,y)}return Re.deserializeUnchecked=Z,Re}var ro=yd(),G={},Fc;function md(){if(Fc)return G;Fc=1,Object.defineProperty(G,"__esModule",{value:!0}),G.s16=G.s8=G.nu64be=G.u48be=G.u40be=G.u32be=G.u24be=G.u16be=G.nu64=G.u48=G.u40=G.u32=G.u24=G.u16=G.u8=G.offset=G.greedy=G.Constant=G.UTF8=G.CString=G.Blob=G.Boolean=G.BitField=G.BitStructure=G.VariantLayout=G.Union=G.UnionLayoutDiscriminator=G.UnionDiscriminator=G.Structure=G.Sequence=G.DoubleBE=G.Double=G.FloatBE=G.Float=G.NearInt64BE=G.NearInt64=G.NearUInt64BE=G.NearUInt64=G.IntBE=G.Int=G.UIntBE=G.UInt=G.OffsetLayout=G.GreedyCount=G.ExternalLayout=G.bindConstructorLayout=G.nameWithProperty=G.Layout=G.uint8ArrayToBuffer=G.checkUint8Array=void 0,G.constant=G.utf8=G.cstr=G.blob=G.unionLayoutDiscriminator=G.union=G.seq=G.bits=G.struct=G.f64be=G.f64=G.f32be=G.f32=G.ns64be=G.s48be=G.s40be=G.s32be=G.s24be=G.s16be=G.ns64=G.s48=G.s40=G.s32=G.s24=void 0;const r=Ma();function e(l){if(!(l instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}G.checkUint8Array=e;function t(l){return e(l),r.Buffer.from(l.buffer,l.byteOffset,l.length)}G.uint8ArrayToBuffer=t;let n=class{constructor(h,k){if(!Number.isInteger(h))throw new TypeError("span must be an integer");this.span=h,this.property=k}makeDestinationObject(){return{}}getSpan(h,k){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(h){const k=Object.create(this.constructor.prototype);return Object.assign(k,this),k.property=h,k}fromArray(h){}};G.Layout=n;function s(l,h){return h.property?l+"["+h.property+"]":l}G.nameWithProperty=s;function i(l,h){if(typeof l!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(l,"layout_"))throw new Error("Class is already bound to a layout");if(!(h&&h instanceof n))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(h,"boundConstructor_"))throw new Error("layout is already bound to a constructor");l.layout_=h,h.boundConstructor_=l,h.makeDestinationObject=(()=>new l),Object.defineProperty(l.prototype,"encode",{value(k,T){return h.encode(this,k,T)},writable:!0}),Object.defineProperty(l,"decode",{value(k,T){return h.decode(k,T)},writable:!0})}G.bindConstructorLayout=i;class o extends n{isCount(){throw new Error("ExternalLayout is abstract")}}G.ExternalLayout=o;class a extends o{constructor(h=1,k){if(!Number.isInteger(h)||0>=h)throw new TypeError("elementSpan must be a (positive) integer");super(-1,k),this.elementSpan=h}isCount(){return!0}decode(h,k=0){e(h);const T=h.length-k;return Math.floor(T/this.elementSpan)}encode(h,k,T){return 0}}G.GreedyCount=a;class u extends o{constructor(h,k=0,T){if(!(h instanceof n))throw new TypeError("layout must be a Layout");if(!Number.isInteger(k))throw new TypeError("offset must be integer or undefined");super(h.span,T||h.property),this.layout=h,this.offset=k}isCount(){return this.layout instanceof g||this.layout instanceof w}decode(h,k=0){return this.layout.decode(h,k+this.offset)}encode(h,k,T=0){return this.layout.encode(h,k,T+this.offset)}}G.OffsetLayout=u;class g extends n{constructor(h,k){if(super(h,k),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(h,k=0){return t(h).readUIntLE(k,this.span)}encode(h,k,T=0){return t(k).writeUIntLE(h,T,this.span),this.span}}G.UInt=g;class w extends n{constructor(h,k){if(super(h,k),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(h,k=0){return t(h).readUIntBE(k,this.span)}encode(h,k,T=0){return t(k).writeUIntBE(h,T,this.span),this.span}}G.UIntBE=w;class S extends n{constructor(h,k){if(super(h,k),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(h,k=0){return t(h).readIntLE(k,this.span)}encode(h,k,T=0){return t(k).writeIntLE(h,T,this.span),this.span}}G.Int=S;class E extends n{constructor(h,k){if(super(h,k),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(h,k=0){return t(h).readIntBE(k,this.span)}encode(h,k,T=0){return t(k).writeIntBE(h,T,this.span),this.span}}G.IntBE=E;const b=Math.pow(2,32);function A(l){const h=Math.floor(l/b),k=l-h*b;return{hi32:h,lo32:k}}function x(l,h){return l*b+h}class C extends n{constructor(h){super(8,h)}decode(h,k=0){const T=t(h),q=T.readUInt32LE(k),J=T.readUInt32LE(k+4);return x(J,q)}encode(h,k,T=0){const q=A(h),J=t(k);return J.writeUInt32LE(q.lo32,T),J.writeUInt32LE(q.hi32,T+4),8}}G.NearUInt64=C;class P extends n{constructor(h){super(8,h)}decode(h,k=0){const T=t(h),q=T.readUInt32BE(k),J=T.readUInt32BE(k+4);return x(q,J)}encode(h,k,T=0){const q=A(h),J=t(k);return J.writeUInt32BE(q.hi32,T),J.writeUInt32BE(q.lo32,T+4),8}}G.NearUInt64BE=P;class W extends n{constructor(h){super(8,h)}decode(h,k=0){const T=t(h),q=T.readUInt32LE(k),J=T.readInt32LE(k+4);return x(J,q)}encode(h,k,T=0){const q=A(h),J=t(k);return J.writeUInt32LE(q.lo32,T),J.writeInt32LE(q.hi32,T+4),8}}G.NearInt64=W;class N extends n{constructor(h){super(8,h)}decode(h,k=0){const T=t(h),q=T.readInt32BE(k),J=T.readUInt32BE(k+4);return x(q,J)}encode(h,k,T=0){const q=A(h),J=t(k);return J.writeInt32BE(q.hi32,T),J.writeUInt32BE(q.lo32,T+4),8}}G.NearInt64BE=N;class V extends n{constructor(h){super(4,h)}decode(h,k=0){return t(h).readFloatLE(k)}encode(h,k,T=0){return t(k).writeFloatLE(h,T),4}}G.Float=V;class Y extends n{constructor(h){super(4,h)}decode(h,k=0){return t(h).readFloatBE(k)}encode(h,k,T=0){return t(k).writeFloatBE(h,T),4}}G.FloatBE=Y;class $ extends n{constructor(h){super(8,h)}decode(h,k=0){return t(h).readDoubleLE(k)}encode(h,k,T=0){return t(k).writeDoubleLE(h,T),8}}G.Double=$;class Q extends n{constructor(h){super(8,h)}decode(h,k=0){return t(h).readDoubleBE(k)}encode(h,k,T=0){return t(k).writeDoubleBE(h,T),8}}G.DoubleBE=Q;class Z extends n{constructor(h,k,T){if(!(h instanceof n))throw new TypeError("elementLayout must be a Layout");if(!(k instanceof o&&k.isCount()||Number.isInteger(k)&&0<=k))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let q=-1;!(k instanceof o)&&0<h.span&&(q=k*h.span),super(q,T),this.elementLayout=h,this.count=k}getSpan(h,k=0){if(0<=this.span)return this.span;let T=0,q=this.count;if(q instanceof o&&(q=q.decode(h,k)),0<this.elementLayout.span)T=q*this.elementLayout.span;else{let J=0;for(;J<q;)T+=this.elementLayout.getSpan(h,k+T),++J}return T}decode(h,k=0){const T=[];let q=0,J=this.count;for(J instanceof o&&(J=J.decode(h,k));q<J;)T.push(this.elementLayout.decode(h,k)),k+=this.elementLayout.getSpan(h,k),q+=1;return T}encode(h,k,T=0){const q=this.elementLayout,J=h.reduce((ne,oe)=>ne+q.encode(oe,k,T+ne),0);return this.count instanceof o&&this.count.encode(h.length,k,T),J}}G.Sequence=Z;class M extends n{constructor(h,k,T){if(!(Array.isArray(h)&&h.reduce((J,ne)=>J&&ne instanceof n,!0)))throw new TypeError("fields must be array of Layout instances");typeof k=="boolean"&&T===void 0&&(T=k,k=void 0);for(const J of h)if(0>J.span&&J.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let q=-1;try{q=h.reduce((J,ne)=>J+ne.getSpan(),0)}catch{}super(q,k),this.fields=h,this.decodePrefixes=!!T}getSpan(h,k=0){if(0<=this.span)return this.span;let T=0;try{T=this.fields.reduce((q,J)=>{const ne=J.getSpan(h,k);return k+=ne,q+ne},0)}catch{throw new RangeError("indeterminate span")}return T}decode(h,k=0){e(h);const T=this.makeDestinationObject();for(const q of this.fields)if(q.property!==void 0&&(T[q.property]=q.decode(h,k)),k+=q.getSpan(h,k),this.decodePrefixes&&h.length===k)break;return T}encode(h,k,T=0){const q=T;let J=0,ne=0;for(const oe of this.fields){let Ee=oe.span;if(ne=0<Ee?Ee:0,oe.property!==void 0){const xe=h[oe.property];xe!==void 0&&(ne=oe.encode(xe,k,T),0>Ee&&(Ee=oe.getSpan(k,T)))}J=T,T+=Ee}return J+ne-q}fromArray(h){const k=this.makeDestinationObject();for(const T of this.fields)T.property!==void 0&&0<h.length&&(k[T.property]=h.shift());return k}layoutFor(h){if(typeof h!="string")throw new TypeError("property must be string");for(const k of this.fields)if(k.property===h)return k}offsetOf(h){if(typeof h!="string")throw new TypeError("property must be string");let k=0;for(const T of this.fields){if(T.property===h)return k;0>T.span?k=-1:0<=k&&(k+=T.span)}}}G.Structure=M;class O{constructor(h){this.property=h}decode(h,k){throw new Error("UnionDiscriminator is abstract")}encode(h,k,T){throw new Error("UnionDiscriminator is abstract")}}G.UnionDiscriminator=O;class F extends O{constructor(h,k){if(!(h instanceof o&&h.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(k||h.property||"variant"),this.layout=h}decode(h,k){return this.layout.decode(h,k)}encode(h,k,T){return this.layout.encode(h,k,T)}}G.UnionLayoutDiscriminator=F;class D extends n{constructor(h,k,T){let q;if(h instanceof g||h instanceof w)q=new F(new u(h));else if(h instanceof o&&h.isCount())q=new F(h);else if(h instanceof O)q=h;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(k===void 0&&(k=null),!(k===null||k instanceof n))throw new TypeError("defaultLayout must be null or a Layout");if(k!==null){if(0>k.span)throw new Error("defaultLayout must have constant span");k.property===void 0&&(k=k.replicate("content"))}let J=-1;k&&(J=k.span,0<=J&&(h instanceof g||h instanceof w)&&(J+=q.layout.span)),super(J,T),this.discriminator=q,this.usesPrefixDiscriminator=h instanceof g||h instanceof w,this.defaultLayout=k,this.registry={};let ne=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(oe){return ne(oe)},this.configGetSourceVariant=function(oe){ne=oe.bind(this)}}getSpan(h,k=0){if(0<=this.span)return this.span;const T=this.getVariant(h,k);if(!T)throw new Error("unable to determine span for unrecognized variant");return T.getSpan(h,k)}defaultGetSourceVariant(h){if(Object.prototype.hasOwnProperty.call(h,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(h,this.defaultLayout.property))return;const k=this.registry[h[this.discriminator.property]];if(k&&(!k.layout||k.property&&Object.prototype.hasOwnProperty.call(h,k.property)))return k}else for(const k in this.registry){const T=this.registry[k];if(T.property&&Object.prototype.hasOwnProperty.call(h,T.property))return T}throw new Error("unable to infer src variant")}decode(h,k=0){let T;const q=this.discriminator,J=q.decode(h,k),ne=this.registry[J];if(ne===void 0){const oe=this.defaultLayout;let Ee=0;this.usesPrefixDiscriminator&&(Ee=q.layout.span),T=this.makeDestinationObject(),T[q.property]=J,T[oe.property]=oe.decode(h,k+Ee)}else T=ne.decode(h,k);return T}encode(h,k,T=0){const q=this.getSourceVariant(h);if(q===void 0){const J=this.discriminator,ne=this.defaultLayout;let oe=0;return this.usesPrefixDiscriminator&&(oe=J.layout.span),J.encode(h[J.property],k,T),oe+ne.encode(h[ne.property],k,T+oe)}return q.encode(h,k,T)}addVariant(h,k,T){const q=new y(this,h,k,T);return this.registry[h]=q,q}getVariant(h,k=0){let T;return h instanceof Uint8Array?T=this.discriminator.decode(h,k):T=h,this.registry[T]}}G.Union=D;class y extends n{constructor(h,k,T,q){if(!(h instanceof D))throw new TypeError("union must be a Union");if(!Number.isInteger(k)||0>k)throw new TypeError("variant must be a (non-negative) integer");if(typeof T=="string"&&q===void 0&&(q=T,T=null),T){if(!(T instanceof n))throw new TypeError("layout must be a Layout");if(h.defaultLayout!==null&&0<=T.span&&T.span>h.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof q!="string")throw new TypeError("variant must have a String property")}let J=h.span;0>h.span&&(J=T?T.span:0,0<=J&&h.usesPrefixDiscriminator&&(J+=h.discriminator.layout.span)),super(J,q),this.union=h,this.variant=k,this.layout=T||null}getSpan(h,k=0){if(0<=this.span)return this.span;let T=0;this.union.usesPrefixDiscriminator&&(T=this.union.discriminator.layout.span);let q=0;return this.layout&&(q=this.layout.getSpan(h,k+T)),T+q}decode(h,k=0){const T=this.makeDestinationObject();if(this!==this.union.getVariant(h,k))throw new Error("variant mismatch");let q=0;return this.union.usesPrefixDiscriminator&&(q=this.union.discriminator.layout.span),this.layout?T[this.property]=this.layout.decode(h,k+q):this.property?T[this.property]=!0:this.union.usesPrefixDiscriminator&&(T[this.union.discriminator.property]=this.variant),T}encode(h,k,T=0){let q=0;if(this.union.usesPrefixDiscriminator&&(q=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(h,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,k,T);let J=q;if(this.layout&&(this.layout.encode(h[this.property],k,T+q),J+=this.layout.getSpan(k,T+q),0<=this.union.span&&J>this.union.span))throw new Error("encoded variant overruns containing union");return J}fromArray(h){if(this.layout)return this.layout.fromArray(h)}}G.VariantLayout=y;function c(l){return 0>l&&(l+=4294967296),l}class f extends n{constructor(h,k,T){if(!(h instanceof g||h instanceof w))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof k=="string"&&T===void 0&&(T=k,k=!1),4<h.span)throw new RangeError("word cannot exceed 32 bits");super(h.span,T),this.word=h,this.msb=!!k,this.fields=[];let q=0;this._packedSetValue=function(J){return q=c(J),this},this._packedGetValue=function(){return q}}decode(h,k=0){const T=this.makeDestinationObject(),q=this.word.decode(h,k);this._packedSetValue(q);for(const J of this.fields)J.property!==void 0&&(T[J.property]=J.decode(h));return T}encode(h,k,T=0){const q=this.word.decode(k,T);this._packedSetValue(q);for(const J of this.fields)if(J.property!==void 0){const ne=h[J.property];ne!==void 0&&J.encode(ne)}return this.word.encode(this._packedGetValue(),k,T)}addField(h,k){const T=new m(this,h,k);return this.fields.push(T),T}addBoolean(h){const k=new _(this,h);return this.fields.push(k),k}fieldFor(h){if(typeof h!="string")throw new TypeError("property must be string");for(const k of this.fields)if(k.property===h)return k}}G.BitStructure=f;class m{constructor(h,k,T){if(!(h instanceof f))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(k)||0>=k)throw new TypeError("bits must be positive integer");const q=8*h.span,J=h.fields.reduce((ne,oe)=>ne+oe.bits,0);if(k+J>q)throw new Error("bits too long for span remainder ("+(q-J)+" of "+q+" remain)");this.container=h,this.bits=k,this.valueMask=(1<<k)-1,k===32&&(this.valueMask=4294967295),this.start=J,this.container.msb&&(this.start=q-J-k),this.wordMask=c(this.valueMask<<this.start),this.property=T}decode(h,k){const T=this.container._packedGetValue();return c(T&this.wordMask)>>>this.start}encode(h){if(typeof h!="number"||!Number.isInteger(h)||h!==c(h&this.valueMask))throw new TypeError(s("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const k=this.container._packedGetValue(),T=c(h<<this.start);this.container._packedSetValue(c(k&~this.wordMask)|T)}}G.BitField=m;class _ extends m{constructor(h,k){super(h,1,k)}decode(h,k){return!!super.decode(h,k)}encode(h){typeof h=="boolean"&&(h=+h),super.encode(h)}}G.Boolean=_;class B extends n{constructor(h,k){if(!(h instanceof o&&h.isCount()||Number.isInteger(h)&&0<=h))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let T=-1;h instanceof o||(T=h),super(T,k),this.length=h}getSpan(h,k){let T=this.span;return 0>T&&(T=this.length.decode(h,k)),T}decode(h,k=0){let T=this.span;return 0>T&&(T=this.length.decode(h,k)),t(h).slice(k,k+T)}encode(h,k,T){let q=this.length;if(this.length instanceof o&&(q=h.length),!(h instanceof Uint8Array&&q===h.length))throw new TypeError(s("Blob.encode",this)+" requires (length "+q+") Uint8Array as src");if(T+q>k.length)throw new RangeError("encoding overruns Uint8Array");const J=t(h);return t(k).write(J.toString("hex"),T,q,"hex"),this.length instanceof o&&this.length.encode(q,k,T),q}}G.Blob=B;class L extends n{constructor(h){super(-1,h)}getSpan(h,k=0){e(h);let T=k;for(;T<h.length&&h[T]!==0;)T+=1;return 1+T-k}decode(h,k=0){const T=this.getSpan(h,k);return t(h).slice(k,k+T-1).toString("utf-8")}encode(h,k,T=0){typeof h!="string"&&(h=String(h));const q=r.Buffer.from(h,"utf8"),J=q.length;if(T+J>k.length)throw new RangeError("encoding overruns Buffer");const ne=t(k);return q.copy(ne,T),ne[T+J]=0,J+1}}G.CString=L;class z extends n{constructor(h,k){if(typeof h=="string"&&k===void 0&&(k=h,h=void 0),h===void 0)h=-1;else if(!Number.isInteger(h))throw new TypeError("maxSpan must be an integer");super(-1,k),this.maxSpan=h}getSpan(h,k=0){return e(h),h.length-k}decode(h,k=0){const T=this.getSpan(h,k);if(0<=this.maxSpan&&this.maxSpan<T)throw new RangeError("text length exceeds maxSpan");return t(h).slice(k,k+T).toString("utf-8")}encode(h,k,T=0){typeof h!="string"&&(h=String(h));const q=r.Buffer.from(h,"utf8"),J=q.length;if(0<=this.maxSpan&&this.maxSpan<J)throw new RangeError("text length exceeds maxSpan");if(T+J>k.length)throw new RangeError("encoding overruns Buffer");return q.copy(t(k),T),J}}G.UTF8=z;class I extends n{constructor(h,k){super(0,k),this.value=h}decode(h,k){return this.value}encode(h,k,T){return 0}}return G.Constant=I,G.greedy=((l,h)=>new a(l,h)),G.offset=((l,h,k)=>new u(l,h,k)),G.u8=(l=>new g(1,l)),G.u16=(l=>new g(2,l)),G.u24=(l=>new g(3,l)),G.u32=(l=>new g(4,l)),G.u40=(l=>new g(5,l)),G.u48=(l=>new g(6,l)),G.nu64=(l=>new C(l)),G.u16be=(l=>new w(2,l)),G.u24be=(l=>new w(3,l)),G.u32be=(l=>new w(4,l)),G.u40be=(l=>new w(5,l)),G.u48be=(l=>new w(6,l)),G.nu64be=(l=>new P(l)),G.s8=(l=>new S(1,l)),G.s16=(l=>new S(2,l)),G.s24=(l=>new S(3,l)),G.s32=(l=>new S(4,l)),G.s40=(l=>new S(5,l)),G.s48=(l=>new S(6,l)),G.ns64=(l=>new W(l)),G.s16be=(l=>new E(2,l)),G.s24be=(l=>new E(3,l)),G.s32be=(l=>new E(4,l)),G.s40be=(l=>new E(5,l)),G.s48be=(l=>new E(6,l)),G.ns64be=(l=>new N(l)),G.f32=(l=>new V(l)),G.f32be=(l=>new Y(l)),G.f64=(l=>new $(l)),G.f64be=(l=>new Q(l)),G.struct=((l,h,k)=>new M(l,h,k)),G.bits=((l,h,k)=>new f(l,h,k)),G.seq=((l,h,k)=>new Z(l,h,k)),G.union=((l,h,k)=>new D(l,h,k)),G.unionLayoutDiscriminator=((l,h)=>new F(l,h)),G.blob=((l,h)=>new B(l,h)),G.cstr=(l=>new L(l)),G.utf8=((l,h)=>new z(l,h)),G.constant=((l,h)=>new I(l,h)),G}var U=md(),wd=8078e3,bd=8078001,vd=8078004,Sd=8078005,Ed=8078006,kd=8078011;function Ol(r){return Array.isArray(r)?"%5B"+r.map(Ol).join("%2C%20")+"%5D":typeof r=="bigint"?`${r}n`:encodeURIComponent(String(r!=null&&Object.getPrototypeOf(r)===null?{...r}:r))}function _d([r,e]){return`${r}=${Ol(e)}`}function Ad(r){const e=Object.entries(r).map(_d).join("&");return btoa(e)}function Id(r,e={}){{let t=`Solana error #${r}; Decode this error by running \`npx @solana/errors decode -- ${r}`;return Object.keys(e).length&&(t+=` '${Ad(e)}'`),`${t}\``}}var Ar=class extends Error{cause=this.cause;context;constructor(...[r,e]){let t,n;if(e){const{cause:i,...o}=e;i&&(n={cause:i}),Object.keys(o).length>0&&(t=o)}const s=Id(r,t);super(s,n),this.context={__code:r,...t},this.name="SolanaError"}};function xd(r,e){return"fixedSize"in e?e.fixedSize:e.getSizeFromValue(r)}function Bd(r){return Object.freeze({...r,encode:e=>{const t=new Uint8Array(xd(e,r));return r.write(e,t,0),t}})}function Rd(r){return Object.freeze({...r,decode:(e,t=0)=>r.read(e,t)[0]})}function pr(r){return"fixedSize"in r&&typeof r.fixedSize=="number"}function Md(r,e){if(pr(r)!==pr(e))throw new Ar(vd);if(pr(r)&&pr(e)&&r.fixedSize!==e.fixedSize)throw new Ar(Sd,{decoderFixedSize:e.fixedSize,encoderFixedSize:r.fixedSize});if(!pr(r)&&!pr(e)&&r.maxSize!==e.maxSize)throw new Ar(Ed,{decoderMaxSize:e.maxSize,encoderMaxSize:r.maxSize});return{...e,...r,decode:e.decode,encode:r.encode,read:e.read,write:r.write}}function Td(r,e,t=0){if(e.length-t<=0)throw new Ar(wd,{codecDescription:r})}function Cd(r,e,t,n=0){const s=t.length-n;if(s<e)throw new Ar(bd,{bytesLength:s,codecDescription:r,expected:e})}function Ld(r,e,t,n){if(n<e||n>t)throw new Ar(kd,{codecDescription:r,max:t,min:e,value:n})}function Ul(r){return r?.endian!==1}function Pd(r){return Bd({fixedSize:r.size,write(e,t,n){r.range&&Ld(r.name,r.range[0],r.range[1],e);const s=new ArrayBuffer(r.size);return r.set(new DataView(s),e,Ul(r.config)),t.set(new Uint8Array(s),n),n+r.size}})}function Nd(r){return Rd({fixedSize:r.size,read(e,t=0){Td(r.name,e,t),Cd(r.name,r.size,e,t);const n=new DataView(Od(e,t,r.size));return[r.get(n,Ul(r.config)),t+r.size]}})}function Od(r,e,t){const n=r.byteOffset+(e??0),s=t??r.byteLength;return r.buffer.slice(n,n+s)}var Wl=(r={})=>Pd({config:r,name:"u64",range:[0n,BigInt("0xffffffffffffffff")],set:(e,t,n)=>e.setBigUint64(0,BigInt(t),n),size:8}),Ud=(r={})=>Nd({config:r,get:(e,t)=>e.getBigUint64(0,t),name:"u64",size:8}),Wd=(r={})=>Md(Wl(r),Ud(r));class zd extends TypeError{constructor(e,t){let n;const{message:s,explanation:i,...o}=e,{path:a}=e,u=a.length===0?s:`At path: ${a.join(".")} -- ${s}`;super(i??u),i!=null&&(this.cause=u),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>n??(n=[e,...t()])}}function Fd(r){return hi(r)&&typeof r[Symbol.iterator]=="function"}function hi(r){return typeof r=="object"&&r!=null}function ts(r){return hi(r)&&!Array.isArray(r)}function Jt(r){return typeof r=="symbol"?r.toString():typeof r=="string"?JSON.stringify(r):`${r}`}function Dd(r){const{done:e,value:t}=r.next();return e?void 0:t}function Kd(r,e,t,n){if(r===!0)return;r===!1?r={}:typeof r=="string"&&(r={message:r});const{path:s,branch:i}=e,{type:o}=t,{refinement:a,message:u=`Expected a value of type \`${o}\`${a?` with refinement \`${a}\``:""}, but received: \`${Jt(n)}\``}=r;return{value:n,type:o,refinement:a,key:s[s.length-1],path:s,branch:i,...r,message:u}}function*Dc(r,e,t,n){Fd(r)||(r=[r]);for(const s of r){const i=Kd(s,e,t,n);i&&(yield i)}}function*za(r,e,t={}){const{path:n=[],branch:s=[r],coerce:i=!1,mask:o=!1}=t,a={path:n,branch:s,mask:o};i&&(r=e.coercer(r,a));let u="valid";for(const g of e.validator(r,a))g.explanation=t.message,u="not_valid",yield[g,void 0];for(let[g,w,S]of e.entries(r,a)){const E=za(w,S,{path:g===void 0?n:[...n,g],branch:g===void 0?s:[...s,w],coerce:i,mask:o,message:t.message});for(const b of E)b[0]?(u=b[0].refinement!=null?"not_refined":"not_valid",yield[b[0],void 0]):i&&(w=b[1],g===void 0?r=w:r instanceof Map?r.set(g,w):r instanceof Set?r.add(w):hi(r)&&(w!==void 0||g in r)&&(r[g]=w))}if(u!=="not_valid")for(const g of e.refiner(r,a))g.explanation=t.message,u="not_refined",yield[g,void 0];u==="valid"&&(yield[void 0,r])}let ln=class{constructor(e){const{type:t,schema:n,validator:s,refiner:i,coercer:o=u=>u,entries:a=function*(){}}=e;this.type=t,this.schema=n,this.entries=a,this.coercer=o,s?this.validator=(u,g)=>{const w=s(u,g);return Dc(w,g,this,u)}:this.validator=()=>[],i?this.refiner=(u,g)=>{const w=i(u,g);return Dc(w,g,this,u)}:this.refiner=()=>[]}assert(e,t){return zl(e,this,t)}create(e,t){return se(e,this,t)}is(e){return Fl(e,this)}mask(e,t){return qd(e,this,t)}validate(e,t={}){return di(e,this,t)}};function zl(r,e,t){const n=di(r,e,{message:t});if(n[0])throw n[0]}function se(r,e,t){const n=di(r,e,{coerce:!0,message:t});if(n[0])throw n[0];return n[1]}function qd(r,e,t){const n=di(r,e,{coerce:!0,mask:!0,message:t});if(n[0])throw n[0];return n[1]}function Fl(r,e){return!di(r,e)[0]}function di(r,e,t={}){const n=za(r,e,t),s=Dd(n);return s[0]?[new zd(s[0],function*(){for(const o of n)o[0]&&(yield o[0])}),void 0]:[void 0,s[1]]}function or(r,e){return new ln({type:r,schema:null,validator:e})}function $d(){return or("any",()=>!0)}function ae(r){return new ln({type:"array",schema:r,*entries(e){if(r&&Array.isArray(e))for(const[t,n]of e.entries())yield[t,n,r]},coercer(e){return Array.isArray(e)?e.slice():e},validator(e){return Array.isArray(e)||`Expected an array value, but received: ${Jt(e)}`}})}function un(){return or("boolean",r=>typeof r=="boolean")}function Fa(r){return or("instance",e=>e instanceof r||`Expected a \`${r.name}\` instance, but received: ${Jt(e)}`)}function $e(r){const e=Jt(r),t=typeof r;return new ln({type:"literal",schema:t==="string"||t==="number"||t==="boolean"?r:null,validator(n){return n===r||`Expected the literal \`${e}\`, but received: ${Jt(n)}`}})}function Vd(){return or("never",()=>!1)}function ce(r){return new ln({...r,validator:(e,t)=>e===null||r.validator(e,t),refiner:(e,t)=>e===null||r.refiner(e,t)})}function j(){return or("number",r=>typeof r=="number"&&!isNaN(r)||`Expected a number, but received: ${Jt(r)}`)}function fe(r){return new ln({...r,validator:(e,t)=>e===void 0||r.validator(e,t),refiner:(e,t)=>e===void 0||r.refiner(e,t)})}function Dl(r,e){return new ln({type:"record",schema:null,*entries(t){if(hi(t))for(const n in t){const s=t[n];yield[n,n,r],yield[n,s,e]}},validator(t){return ts(t)||`Expected an object, but received: ${Jt(t)}`},coercer(t){return ts(t)?{...t}:t}})}function re(){return or("string",r=>typeof r=="string"||`Expected a string, but received: ${Jt(r)}`)}function Da(r){const e=Vd();return new ln({type:"tuple",schema:null,*entries(t){if(Array.isArray(t)){const n=Math.max(r.length,t.length);for(let s=0;s<n;s++)yield[s,t[s],r[s]||e]}},validator(t){return Array.isArray(t)||`Expected an array, but received: ${Jt(t)}`},coercer(t){return Array.isArray(t)?t.slice():t}})}function te(r){const e=Object.keys(r);return new ln({type:"type",schema:r,*entries(t){if(hi(t))for(const n of e)yield[n,t[n],r[n]]},validator(t){return ts(t)||`Expected an object, but received: ${Jt(t)}`},coercer(t){return ts(t)?{...t}:t}})}function Ot(r){const e=r.map(t=>t.type).join(" | ");return new ln({type:"union",schema:null,coercer(t,n){for(const s of r){const[i,o]=s.validate(t,{coerce:!0,mask:n.mask});if(!i)return o}return t},validator(t,n){const s=[];for(const i of r){const[...o]=za(t,i,n),[a]=o;if(a[0])for(const[u]of o)u&&s.push(u);else return[]}return[`Expected the value to satisfy a union of \`${e}\`, but received: ${Jt(t)}`,...s]}})}function Ur(){return or("unknown",()=>!0)}function pi(r,e,t){return new ln({...r,coercer:(n,s)=>Fl(n,e)?r.coercer(t(n,s),s):r.coercer(n,s)})}var _i,Hd=new Uint8Array(16);function Kl(){if(!_i&&(_i=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!_i))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return _i(Hd)}const jd=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function ds(r){return typeof r=="string"&&jd.test(r)}var It=[];for(var io=0;io<256;++io)It.push((io+256).toString(16).substr(1));function ps(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=(It[r[e+0]]+It[r[e+1]]+It[r[e+2]]+It[r[e+3]]+"-"+It[r[e+4]]+It[r[e+5]]+"-"+It[r[e+6]]+It[r[e+7]]+"-"+It[r[e+8]]+It[r[e+9]]+"-"+It[r[e+10]]+It[r[e+11]]+It[r[e+12]]+It[r[e+13]]+It[r[e+14]]+It[r[e+15]]).toLowerCase();if(!ds(t))throw TypeError("Stringified UUID is invalid");return t}var Kc,so,oo=0,ao=0;function Gd(r,e,t){var n=e&&t||0,s=e||new Array(16);r=r||{};var i=r.node||Kc,o=r.clockseq!==void 0?r.clockseq:so;if(i==null||o==null){var a=r.random||(r.rng||Kl)();i==null&&(i=Kc=[a[0]|1,a[1],a[2],a[3],a[4],a[5]]),o==null&&(o=so=(a[6]<<8|a[7])&16383)}var u=r.msecs!==void 0?r.msecs:Date.now(),g=r.nsecs!==void 0?r.nsecs:ao+1,w=u-oo+(g-ao)/1e4;if(w<0&&r.clockseq===void 0&&(o=o+1&16383),(w<0||u>oo)&&r.nsecs===void 0&&(g=0),g>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");oo=u,ao=g,so=o,u+=122192928e5;var S=((u&268435455)*1e4+g)%4294967296;s[n++]=S>>>24&255,s[n++]=S>>>16&255,s[n++]=S>>>8&255,s[n++]=S&255;var E=u/4294967296*1e4&268435455;s[n++]=E>>>8&255,s[n++]=E&255,s[n++]=E>>>24&15|16,s[n++]=E>>>16&255,s[n++]=o>>>8|128,s[n++]=o&255;for(var b=0;b<6;++b)s[n+b]=i[b];return e||ps(s)}function ql(r){if(!ds(r))throw TypeError("Invalid UUID");var e,t=new Uint8Array(16);return t[0]=(e=parseInt(r.slice(0,8),16))>>>24,t[1]=e>>>16&255,t[2]=e>>>8&255,t[3]=e&255,t[4]=(e=parseInt(r.slice(9,13),16))>>>8,t[5]=e&255,t[6]=(e=parseInt(r.slice(14,18),16))>>>8,t[7]=e&255,t[8]=(e=parseInt(r.slice(19,23),16))>>>8,t[9]=e&255,t[10]=(e=parseInt(r.slice(24,36),16))/1099511627776&255,t[11]=e/4294967296&255,t[12]=e>>>24&255,t[13]=e>>>16&255,t[14]=e>>>8&255,t[15]=e&255,t}function Yd(r){r=unescape(encodeURIComponent(r));for(var e=[],t=0;t<r.length;++t)e.push(r.charCodeAt(t));return e}var Zd="6ba7b810-9dad-11d1-80b4-00c04fd430c8",Jd="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function $l(r,e,t){function n(s,i,o,a){if(typeof s=="string"&&(s=Yd(s)),typeof i=="string"&&(i=ql(i)),i.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var u=new Uint8Array(16+s.length);if(u.set(i),u.set(s,i.length),u=t(u),u[6]=u[6]&15|e,u[8]=u[8]&63|128,o){a=a||0;for(var g=0;g<16;++g)o[a+g]=u[g];return o}return ps(u)}try{n.name=r}catch{}return n.DNS=Zd,n.URL=Jd,n}function Xd(r){if(typeof r=="string"){var e=unescape(encodeURIComponent(r));r=new Uint8Array(e.length);for(var t=0;t<e.length;++t)r[t]=e.charCodeAt(t)}return Qd(e0(t0(r),r.length*8))}function Qd(r){for(var e=[],t=r.length*32,n="0123456789abcdef",s=0;s<t;s+=8){var i=r[s>>5]>>>s%32&255,o=parseInt(n.charAt(i>>>4&15)+n.charAt(i&15),16);e.push(o)}return e}function Vl(r){return(r+64>>>9<<4)+14+1}function e0(r,e){r[e>>5]|=128<<e%32,r[Vl(e)-1]=e;for(var t=1732584193,n=-271733879,s=-1732584194,i=271733878,o=0;o<r.length;o+=16){var a=t,u=n,g=s,w=i;t=Tt(t,n,s,i,r[o],7,-680876936),i=Tt(i,t,n,s,r[o+1],12,-389564586),s=Tt(s,i,t,n,r[o+2],17,606105819),n=Tt(n,s,i,t,r[o+3],22,-1044525330),t=Tt(t,n,s,i,r[o+4],7,-176418897),i=Tt(i,t,n,s,r[o+5],12,1200080426),s=Tt(s,i,t,n,r[o+6],17,-1473231341),n=Tt(n,s,i,t,r[o+7],22,-45705983),t=Tt(t,n,s,i,r[o+8],7,1770035416),i=Tt(i,t,n,s,r[o+9],12,-1958414417),s=Tt(s,i,t,n,r[o+10],17,-42063),n=Tt(n,s,i,t,r[o+11],22,-1990404162),t=Tt(t,n,s,i,r[o+12],7,1804603682),i=Tt(i,t,n,s,r[o+13],12,-40341101),s=Tt(s,i,t,n,r[o+14],17,-1502002290),n=Tt(n,s,i,t,r[o+15],22,1236535329),t=Ct(t,n,s,i,r[o+1],5,-165796510),i=Ct(i,t,n,s,r[o+6],9,-1069501632),s=Ct(s,i,t,n,r[o+11],14,643717713),n=Ct(n,s,i,t,r[o],20,-373897302),t=Ct(t,n,s,i,r[o+5],5,-701558691),i=Ct(i,t,n,s,r[o+10],9,38016083),s=Ct(s,i,t,n,r[o+15],14,-660478335),n=Ct(n,s,i,t,r[o+4],20,-405537848),t=Ct(t,n,s,i,r[o+9],5,568446438),i=Ct(i,t,n,s,r[o+14],9,-1019803690),s=Ct(s,i,t,n,r[o+3],14,-187363961),n=Ct(n,s,i,t,r[o+8],20,1163531501),t=Ct(t,n,s,i,r[o+13],5,-1444681467),i=Ct(i,t,n,s,r[o+2],9,-51403784),s=Ct(s,i,t,n,r[o+7],14,1735328473),n=Ct(n,s,i,t,r[o+12],20,-1926607734),t=Lt(t,n,s,i,r[o+5],4,-378558),i=Lt(i,t,n,s,r[o+8],11,-2022574463),s=Lt(s,i,t,n,r[o+11],16,1839030562),n=Lt(n,s,i,t,r[o+14],23,-35309556),t=Lt(t,n,s,i,r[o+1],4,-1530992060),i=Lt(i,t,n,s,r[o+4],11,1272893353),s=Lt(s,i,t,n,r[o+7],16,-155497632),n=Lt(n,s,i,t,r[o+10],23,-1094730640),t=Lt(t,n,s,i,r[o+13],4,681279174),i=Lt(i,t,n,s,r[o],11,-358537222),s=Lt(s,i,t,n,r[o+3],16,-722521979),n=Lt(n,s,i,t,r[o+6],23,76029189),t=Lt(t,n,s,i,r[o+9],4,-640364487),i=Lt(i,t,n,s,r[o+12],11,-421815835),s=Lt(s,i,t,n,r[o+15],16,530742520),n=Lt(n,s,i,t,r[o+2],23,-995338651),t=Pt(t,n,s,i,r[o],6,-198630844),i=Pt(i,t,n,s,r[o+7],10,1126891415),s=Pt(s,i,t,n,r[o+14],15,-1416354905),n=Pt(n,s,i,t,r[o+5],21,-57434055),t=Pt(t,n,s,i,r[o+12],6,1700485571),i=Pt(i,t,n,s,r[o+3],10,-1894986606),s=Pt(s,i,t,n,r[o+10],15,-1051523),n=Pt(n,s,i,t,r[o+1],21,-2054922799),t=Pt(t,n,s,i,r[o+8],6,1873313359),i=Pt(i,t,n,s,r[o+15],10,-30611744),s=Pt(s,i,t,n,r[o+6],15,-1560198380),n=Pt(n,s,i,t,r[o+13],21,1309151649),t=Pt(t,n,s,i,r[o+4],6,-145523070),i=Pt(i,t,n,s,r[o+11],10,-1120210379),s=Pt(s,i,t,n,r[o+2],15,718787259),n=Pt(n,s,i,t,r[o+9],21,-343485551),t=Nn(t,a),n=Nn(n,u),s=Nn(s,g),i=Nn(i,w)}return[t,n,s,i]}function t0(r){if(r.length===0)return[];for(var e=r.length*8,t=new Uint32Array(Vl(e)),n=0;n<e;n+=8)t[n>>5]|=(r[n/8]&255)<<n%32;return t}function Nn(r,e){var t=(r&65535)+(e&65535),n=(r>>16)+(e>>16)+(t>>16);return n<<16|t&65535}function n0(r,e){return r<<e|r>>>32-e}function gs(r,e,t,n,s,i){return Nn(n0(Nn(Nn(e,r),Nn(n,i)),s),t)}function Tt(r,e,t,n,s,i,o){return gs(e&t|~e&n,r,e,s,i,o)}function Ct(r,e,t,n,s,i,o){return gs(e&n|t&~n,r,e,s,i,o)}function Lt(r,e,t,n,s,i,o){return gs(e^t^n,r,e,s,i,o)}function Pt(r,e,t,n,s,i,o){return gs(t^(e|~n),r,e,s,i,o)}var r0=$l("v3",48,Xd);function i0(r,e,t){r=r||{};var n=r.random||(r.rng||Kl)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){t=t||0;for(var s=0;s<16;++s)e[t+s]=n[s];return e}return ps(n)}function s0(r,e,t,n){switch(r){case 0:return e&t^~e&n;case 1:return e^t^n;case 2:return e&t^e&n^t&n;case 3:return e^t^n}}function co(r,e){return r<<e|r>>>32-e}function o0(r){var e=[1518500249,1859775393,2400959708,3395469782],t=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof r=="string"){var n=unescape(encodeURIComponent(r));r=[];for(var s=0;s<n.length;++s)r.push(n.charCodeAt(s))}else Array.isArray(r)||(r=Array.prototype.slice.call(r));r.push(128);for(var i=r.length/4+2,o=Math.ceil(i/16),a=new Array(o),u=0;u<o;++u){for(var g=new Uint32Array(16),w=0;w<16;++w)g[w]=r[u*64+w*4]<<24|r[u*64+w*4+1]<<16|r[u*64+w*4+2]<<8|r[u*64+w*4+3];a[u]=g}a[o-1][14]=(r.length-1)*8/Math.pow(2,32),a[o-1][14]=Math.floor(a[o-1][14]),a[o-1][15]=(r.length-1)*8&4294967295;for(var S=0;S<o;++S){for(var E=new Uint32Array(80),b=0;b<16;++b)E[b]=a[S][b];for(var A=16;A<80;++A)E[A]=co(E[A-3]^E[A-8]^E[A-14]^E[A-16],1);for(var x=t[0],C=t[1],P=t[2],W=t[3],N=t[4],V=0;V<80;++V){var Y=Math.floor(V/20),$=co(x,5)+s0(Y,C,P,W)+N+e[Y]+E[V]>>>0;N=W,W=P,P=co(C,30)>>>0,C=x,x=$}t[0]=t[0]+x>>>0,t[1]=t[1]+C>>>0,t[2]=t[2]+P>>>0,t[3]=t[3]+W>>>0,t[4]=t[4]+N>>>0}return[t[0]>>24&255,t[0]>>16&255,t[0]>>8&255,t[0]&255,t[1]>>24&255,t[1]>>16&255,t[1]>>8&255,t[1]&255,t[2]>>24&255,t[2]>>16&255,t[2]>>8&255,t[2]&255,t[3]>>24&255,t[3]>>16&255,t[3]>>8&255,t[3]&255,t[4]>>24&255,t[4]>>16&255,t[4]>>8&255,t[4]&255]}var a0=$l("v5",80,o0);const c0="00000000-0000-0000-0000-000000000000";function u0(r){if(!ds(r))throw TypeError("Invalid UUID");return parseInt(r.substr(14,1),16)}const l0=Object.freeze(Object.defineProperty({__proto__:null,NIL:c0,parse:ql,stringify:ps,v1:Gd,v3:r0,v4:i0,v5:a0,validate:ds,version:u0},Symbol.toStringTag,{value:"Module"})),Hl=Ra(l0);var uo,qc;function f0(){if(qc)return uo;qc=1;const r=Hl.v4;return uo=function(t,n,s,i){if(typeof t!="string")throw new TypeError(t+" must be a string");i=i||{};const o=typeof i.version=="number"?i.version:2;if(o!==1&&o!==2)throw new TypeError(o+" must be 1 or 2");const a={method:t};if(o===2&&(a.jsonrpc="2.0"),n){if(typeof n!="object"&&!Array.isArray(n))throw new TypeError(n+" must be an object, array or omitted");a.params=n}if(typeof s>"u"){const u=typeof i.generator=="function"?i.generator:function(){return r()};a.id=u(a,i)}else o===2&&s===null?i.notificationIdNull&&(a.id=null):a.id=s;return a},uo}var lo,$c;function h0(){if($c)return lo;$c=1;const r=Hl.v4,e=f0(),t=function(n,s){if(!(this instanceof t))return new t(n,s);s||(s={}),this.options={reviver:typeof s.reviver<"u"?s.reviver:null,replacer:typeof s.replacer<"u"?s.replacer:null,generator:typeof s.generator<"u"?s.generator:function(){return r()},version:typeof s.version<"u"?s.version:2,notificationIdNull:typeof s.notificationIdNull=="boolean"?s.notificationIdNull:!1},this.callServer=n};return lo=t,t.prototype.request=function(n,s,i,o){const a=this;let u=null;const g=Array.isArray(n)&&typeof s=="function";if(this.options.version===1&&g)throw new TypeError("JSON-RPC 1.0 does not support batching");if(g||!g&&n&&typeof n=="object"&&typeof s=="function")o=s,u=n;else{typeof i=="function"&&(o=i,i=void 0);const E=typeof o=="function";try{u=e(n,s,i,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(b){if(E)return o(b);throw b}if(!E)return u}let S;try{S=JSON.stringify(u,this.options.replacer)}catch(E){return o(E)}return this.callServer(S,function(E,b){a._parseResponse(E,b,o)}),u},t.prototype._parseResponse=function(n,s,i){if(n){i(n);return}if(!s)return i();let o;try{o=JSON.parse(s,this.options.reviver)}catch(a){return i(a)}if(i.length===3)if(Array.isArray(o)){const a=function(g){return typeof g.error<"u"},u=function(g){return!a(g)};return i(null,o.filter(a),o.filter(u))}else return i(null,o.error,o.result);i(null,o)},lo}var d0=h0();const p0=ci(d0);var fo={exports:{}},Vc;function g0(){return Vc||(Vc=1,(function(r){var e=Object.prototype.hasOwnProperty,t="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(t=!1));function s(u,g,w){this.fn=u,this.context=g,this.once=w||!1}function i(u,g,w,S,E){if(typeof w!="function")throw new TypeError("The listener must be a function");var b=new s(w,S||u,E),A=t?t+g:g;return u._events[A]?u._events[A].fn?u._events[A]=[u._events[A],b]:u._events[A].push(b):(u._events[A]=b,u._eventsCount++),u}function o(u,g){--u._eventsCount===0?u._events=new n:delete u._events[g]}function a(){this._events=new n,this._eventsCount=0}a.prototype.eventNames=function(){var g=[],w,S;if(this._eventsCount===0)return g;for(S in w=this._events)e.call(w,S)&&g.push(t?S.slice(1):S);return Object.getOwnPropertySymbols?g.concat(Object.getOwnPropertySymbols(w)):g},a.prototype.listeners=function(g){var w=t?t+g:g,S=this._events[w];if(!S)return[];if(S.fn)return[S.fn];for(var E=0,b=S.length,A=new Array(b);E<b;E++)A[E]=S[E].fn;return A},a.prototype.listenerCount=function(g){var w=t?t+g:g,S=this._events[w];return S?S.fn?1:S.length:0},a.prototype.emit=function(g,w,S,E,b,A){var x=t?t+g:g;if(!this._events[x])return!1;var C=this._events[x],P=arguments.length,W,N;if(C.fn){switch(C.once&&this.removeListener(g,C.fn,void 0,!0),P){case 1:return C.fn.call(C.context),!0;case 2:return C.fn.call(C.context,w),!0;case 3:return C.fn.call(C.context,w,S),!0;case 4:return C.fn.call(C.context,w,S,E),!0;case 5:return C.fn.call(C.context,w,S,E,b),!0;case 6:return C.fn.call(C.context,w,S,E,b,A),!0}for(N=1,W=new Array(P-1);N<P;N++)W[N-1]=arguments[N];C.fn.apply(C.context,W)}else{var V=C.length,Y;for(N=0;N<V;N++)switch(C[N].once&&this.removeListener(g,C[N].fn,void 0,!0),P){case 1:C[N].fn.call(C[N].context);break;case 2:C[N].fn.call(C[N].context,w);break;case 3:C[N].fn.call(C[N].context,w,S);break;case 4:C[N].fn.call(C[N].context,w,S,E);break;default:if(!W)for(Y=1,W=new Array(P-1);Y<P;Y++)W[Y-1]=arguments[Y];C[N].fn.apply(C[N].context,W)}}return!0},a.prototype.on=function(g,w,S){return i(this,g,w,S,!1)},a.prototype.once=function(g,w,S){return i(this,g,w,S,!0)},a.prototype.removeListener=function(g,w,S,E){var b=t?t+g:g;if(!this._events[b])return this;if(!w)return o(this,b),this;var A=this._events[b];if(A.fn)A.fn===w&&(!E||A.once)&&(!S||A.context===S)&&o(this,b);else{for(var x=0,C=[],P=A.length;x<P;x++)(A[x].fn!==w||E&&!A[x].once||S&&A[x].context!==S)&&C.push(A[x]);C.length?this._events[b]=C.length===1?C[0]:C:o(this,b)}return this},a.prototype.removeAllListeners=function(g){var w;return g?(w=t?t+g:g,this._events[w]&&o(this,w)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=t,a.EventEmitter=a,r.exports=a})(fo)),fo.exports}var y0=g0();const Ka=ci(y0);var m0=class extends Ka{socket;constructor(r,e,t){super(),this.socket=new window.WebSocket(r,t),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=n=>this.emit("message",n.data),this.socket.onerror=n=>this.emit("error",n),this.socket.onclose=n=>{this.emit("close",n.code,n.reason)}}send(r,e,t){const n=t||e;try{this.socket.send(r),n()}catch(s){n(s)}}close(r,e){this.socket.close(r,e)}addEventListener(r,e,t){this.socket.addEventListener(r,e,t)}};function w0(r,e){return new m0(r,e)}var b0=class{encode(r){return JSON.stringify(r)}decode(r){return JSON.parse(r)}},v0=class extends Ka{address;rpc_id;queue;options;autoconnect;ready;reconnect;reconnect_timer_id;reconnect_interval;max_reconnects;rest_options;current_reconnects;generate_request_id;socket;webSocketFactory;dataPack;constructor(r,e="ws://localhost:8080",{autoconnect:t=!0,reconnect:n=!0,reconnect_interval:s=1e3,max_reconnects:i=5,...o}={},a,u){super(),this.webSocketFactory=r,this.queue={},this.rpc_id=0,this.address=e,this.autoconnect=t,this.ready=!1,this.reconnect=n,this.reconnect_timer_id=void 0,this.reconnect_interval=s,this.max_reconnects=i,this.rest_options=o,this.current_reconnects=0,this.generate_request_id=a||(()=>typeof this.rpc_id=="number"?++this.rpc_id:Number(this.rpc_id)+1),u?this.dataPack=u:this.dataPack=new b0,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(r,e,t,n){return!n&&typeof t=="object"&&(n=t,t=null),new Promise((s,i)=>{if(!this.ready)return i(new Error("socket not ready"));const o=this.generate_request_id(r,e),a={jsonrpc:"2.0",method:r,params:e||void 0,id:o};this.socket.send(this.dataPack.encode(a),n,u=>{if(u)return i(u);this.queue[o]={promise:[s,i]},t&&(this.queue[o].timeout=setTimeout(()=>{delete this.queue[o],i(new Error("reply timeout"))},t))})})}async login(r){const e=await this.call("rpc.login",r);if(!e)throw new Error("authentication failed");return e}async listMethods(){return await this.call("__listMethods")}notify(r,e){return new Promise((t,n)=>{if(!this.ready)return n(new Error("socket not ready"));const s={jsonrpc:"2.0",method:r,params:e};this.socket.send(this.dataPack.encode(s),i=>{if(i)return n(i);t()})})}async subscribe(r){typeof r=="string"&&(r=[r]);const e=await this.call("rpc.on",r);if(typeof r=="string"&&e[r]!=="ok")throw new Error("Failed subscribing to an event '"+r+"' with: "+e[r]);return e}async unsubscribe(r){typeof r=="string"&&(r=[r]);const e=await this.call("rpc.off",r);if(typeof r=="string"&&e[r]!=="ok")throw new Error("Failed unsubscribing from an event with: "+e);return e}close(r,e){this.socket&&this.socket.close(r||1e3,e)}setAutoReconnect(r){this.reconnect=r}setReconnectInterval(r){this.reconnect_interval=r}setMaxReconnects(r){this.max_reconnects=r}getCurrentReconnects(){return this.current_reconnects}getMaxReconnects(){return this.max_reconnects}isReconnecting(){return this.reconnect_timer_id!==void 0}willReconnect(){return this.reconnect&&(this.max_reconnects===0||this.current_reconnects<this.max_reconnects)}_connect(r,e){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(r,e),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:t})=>{t instanceof ArrayBuffer&&(t=pe.Buffer.from(t).toString());try{t=this.dataPack.decode(t)}catch{return}if(t.notification&&this.listeners(t.notification).length){if(!Object.keys(t.params).length)return this.emit(t.notification);const n=[t.notification];if(t.params.constructor===Object)n.push(t.params);else for(let s=0;s<t.params.length;s++)n.push(t.params[s]);return Promise.resolve().then(()=>{this.emit.apply(this,n)})}if(!this.queue[t.id])return t.method?Promise.resolve().then(()=>{this.emit(t.method,t?.params)}):void 0;"error"in t=="result"in t&&this.queue[t.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[t.id].timeout&&clearTimeout(this.queue[t.id].timeout),t.error?this.queue[t.id].promise[1](t.error):this.queue[t.id].promise[0](t.result),delete this.queue[t.id]}),this.socket.addEventListener("error",t=>this.emit("error",t)),this.socket.addEventListener("close",({code:t,reason:n})=>{this.ready&&setTimeout(()=>this.emit("close",t,n),0),this.ready=!1,this.socket=void 0,t!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)?this.reconnect_timer_id=setTimeout(()=>this._connect(r,e),this.reconnect_interval):this.reconnect&&this.max_reconnects>0&&this.current_reconnects>=this.max_reconnects&&setTimeout(()=>this.emit("max_reconnects_reached",t,n),1))})}};const S0=BigInt(0),Dr=BigInt(1),E0=BigInt(2),k0=BigInt(7),_0=BigInt(256),A0=BigInt(113),jl=[],Gl=[],Yl=[];for(let r=0,e=Dr,t=1,n=0;r<24;r++){[t,n]=[n,(2*t+3*n)%5],jl.push(2*(5*n+t)),Gl.push((r+1)*(r+2)/2%64);let s=S0;for(let i=0;i<7;i++)e=(e<<Dr^(e>>k0)*A0)%_0,e&E0&&(s^=Dr<<(Dr<<BigInt(i))-Dr);Yl.push(s)}const Zl=fl(Yl,!0),I0=Zl[0],x0=Zl[1],Hc=(r,e,t)=>t>32?lh(r,e,t):ch(r,e,t),jc=(r,e,t)=>t>32?fh(r,e,t):uh(r,e,t);function B0(r,e=24){const t=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let o=0;o<10;o++)t[o]=r[o]^r[o+10]^r[o+20]^r[o+30]^r[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,u=(o+2)%10,g=t[u],w=t[u+1],S=Hc(g,w,1)^t[a],E=jc(g,w,1)^t[a+1];for(let b=0;b<50;b+=10)r[o+b]^=S,r[o+b+1]^=E}let s=r[2],i=r[3];for(let o=0;o<24;o++){const a=Gl[o],u=Hc(s,i,a),g=jc(s,i,a),w=jl[o];s=r[w],i=r[w+1],r[w]=u,r[w+1]=g}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)t[a]=r[o+a];for(let a=0;a<10;a++)r[o+a]^=~t[(a+2)%10]&t[(a+4)%10]}r[0]^=I0[n],r[1]^=x0[n]}Un(t)}class qa extends Ta{constructor(e,t,n,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=t,this.outputLen=n,this.enableXOF=s,this.rounds=i,ti(n),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=Xf(this.state)}clone(){return this._cloneInto()}keccak(){wc(this.state32),B0(this.state32,this.rounds),wc(this.state32),this.posOut=0,this.pos=0}update(e){Mr(this),e=ls(e),Sn(e);const{blockLen:t,state:n}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(t-this.pos,s-i);for(let a=0;a<o;a++)n[this.pos++]^=e[i++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:n,blockLen:s}=this;e[n]^=t,(t&128)!==0&&n===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){Mr(this,!1),Sn(e),this.finish();const t=this.state,{blockLen:n}=this;for(let s=0,i=e.length;s<i;){this.posOut>=n&&this.keccak();const o=Math.min(n-this.posOut,i-s);e.set(t.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return ti(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(cl(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,Un(this.state)}_cloneInto(e){const{blockLen:t,suffix:n,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new qa(t,n,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=n,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}}const R0=(r,e,t)=>Ca(()=>new qa(e,r,t)),Gc=R0(1,136,256/8);class Jl extends Ta{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,al(e);const n=ls(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(n.length>s?e.create().update(n).digest():n);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),Un(i)}update(e){return Mr(this),this.iHash.update(e),this}digestInto(e){Mr(this),Sn(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Xl=(r,e,t)=>new Jl(r,e).update(t).digest();Xl.create=(r,e)=>new Jl(r,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Yc=(r,e)=>(r+(r>=0?e:-e)/Ql)/e;function M0(r,e,t){const[[n,s],[i,o]]=e,a=Yc(o*r,t),u=Yc(-s*r,t);let g=r-a*n-u*i,w=-a*s-u*o;const S=g<vn,E=w<vn;S&&(g=-g),E&&(w=-w);const b=li(Math.ceil(yl(t)/2))+Ir;if(g<vn||g>=b||w<vn||w>=b)throw new Error("splitScalar (endomorphism): failed, k="+r);return{k1neg:S,k1:g,k2neg:E,k2:w}}function ea(r){if(!["compact","recovered","der"].includes(r))throw new Error('Signature format must be "compact", "recovered", or "der"');return r}function ho(r,e){const t={};for(let n of Object.keys(e))t[n]=r[n]===void 0?e[n]:r[n];return nr(t.lowS,"lowS"),nr(t.prehash,"prehash"),t.format!==void 0&&ea(t.format),t}class T0 extends Error{constructor(e=""){super(e)}}const gn={Err:T0,_tlv:{encode:(r,e)=>{const{Err:t}=gn;if(r<0||r>256)throw new t("tlv.encode: wrong tag");if(e.length&1)throw new t("tlv.encode: unpadded data");const n=e.length/2,s=Ei(n);if(s.length/2&128)throw new t("tlv.encode: long form length too big");const i=n>127?Ei(s.length/2|128):"";return Ei(r)+i+s+e},decode(r,e){const{Err:t}=gn;let n=0;if(r<0||r>256)throw new t("tlv.encode: wrong tag");if(e.length<2||e[n++]!==r)throw new t("tlv.decode: wrong tlv");const s=e[n++],i=!!(s&128);let o=0;if(!i)o=s;else{const u=s&127;if(!u)throw new t("tlv.decode(long): indefinite length not supported");if(u>4)throw new t("tlv.decode(long): byte length is too big");const g=e.subarray(n,n+u);if(g.length!==u)throw new t("tlv.decode: length bytes not complete");if(g[0]===0)throw new t("tlv.decode(long): zero leftmost byte");for(const w of g)o=o<<8|w;if(n+=u,o<128)throw new t("tlv.decode(long): not minimal encoding")}const a=e.subarray(n,n+o);if(a.length!==o)throw new t("tlv.decode: wrong value length");return{v:a,l:e.subarray(n+o)}}},_int:{encode(r){const{Err:e}=gn;if(r<vn)throw new e("integer: negative integers are not allowed");let t=Ei(r);if(Number.parseInt(t[0],16)&8&&(t="00"+t),t.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return t},decode(r){const{Err:e}=gn;if(r[0]&128)throw new e("invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return fs(r)}},toSig(r){const{Err:e,_int:t,_tlv:n}=gn,s=Je("signature",r),{v:i,l:o}=n.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:u}=n.decode(2,i),{v:g,l:w}=n.decode(2,u);if(w.length)throw new e("invalid signature: left bytes after parsing");return{r:t.decode(a),s:t.decode(g)}},hexFromSig(r){const{_tlv:e,_int:t}=gn,n=e.encode(2,t.encode(r.r)),s=e.encode(2,t.encode(r.s)),i=n+s;return e.encode(48,i)}},vn=BigInt(0),Ir=BigInt(1),Ql=BigInt(2),Ai=BigInt(3),C0=BigInt(4);function Sr(r,e){const{BYTES:t}=r;let n;if(typeof e=="bigint")n=e;else{let s=Je("private key",e);try{n=r.fromBytes(s)}catch{throw new Error(`invalid private key: expected ui8a of size ${t}, got ${typeof e}`)}}if(!r.isValidNot0(n))throw new Error("invalid private key: out of range [1..N-1]");return n}function L0(r,e={}){const t=Cl("weierstrass",r,e),{Fp:n,Fn:s}=t;let i=t.CURVE;const{h:o,n:a}=i;fi(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:u}=e;if(u&&(!n.is0(i.a)||typeof u.beta!="bigint"||!Array.isArray(u.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const g=tf(n,s);function w(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function S(D,y,c){const{x:f,y:m}=y.toAffine(),_=n.toBytes(f);if(nr(c,"isCompressed"),c){w();const B=!n.isOdd(m);return nn(ef(B),_)}else return nn(Uint8Array.of(4),_,n.toBytes(m))}function E(D){Zt(D,void 0,"Point");const{publicKey:y,publicKeyUncompressed:c}=g,f=D.length,m=D[0],_=D.subarray(1);if(f===y&&(m===2||m===3)){const B=n.fromBytes(_);if(!n.isValid(B))throw new Error("bad point: is not on curve, wrong x");const L=x(B);let z;try{z=n.sqrt(L)}catch(h){const k=h instanceof Error?": "+h.message:"";throw new Error("bad point: is not on curve, sqrt error"+k)}w();const I=n.isOdd(z);return(m&1)===1!==I&&(z=n.neg(z)),{x:B,y:z}}else if(f===c&&m===4){const B=n.BYTES,L=n.fromBytes(_.subarray(0,B)),z=n.fromBytes(_.subarray(B,B*2));if(!C(L,z))throw new Error("bad point: is not on curve");return{x:L,y:z}}else throw new Error(`bad point: got length ${f}, expected compressed=${y} or uncompressed=${c}`)}const b=e.toBytes||S,A=e.fromBytes||E;function x(D){const y=n.sqr(D),c=n.mul(y,D);return n.add(n.add(c,n.mul(D,i.a)),i.b)}function C(D,y){const c=n.sqr(y),f=x(D);return n.eql(c,f)}if(!C(i.Gx,i.Gy))throw new Error("bad curve params: generator point");const P=n.mul(n.pow(i.a,Ai),C0),W=n.mul(n.sqr(i.b),BigInt(27));if(n.is0(n.add(P,W)))throw new Error("bad curve params: a or b");function N(D,y,c=!1){if(!n.isValid(y)||c&&n.is0(y))throw new Error(`bad point coordinate ${D}`);return y}function V(D){if(!(D instanceof M))throw new Error("ProjectivePoint expected")}function Y(D){if(!u||!u.basises)throw new Error("no endo");return M0(D,u.basises,s.ORDER)}const $=Yi((D,y)=>{const{X:c,Y:f,Z:m}=D;if(n.eql(m,n.ONE))return{x:c,y:f};const _=D.is0();y==null&&(y=_?n.ONE:n.inv(m));const B=n.mul(c,y),L=n.mul(f,y),z=n.mul(m,y);if(_)return{x:n.ZERO,y:n.ZERO};if(!n.eql(z,n.ONE))throw new Error("invZ was invalid");return{x:B,y:L}}),Q=Yi(D=>{if(D.is0()){if(e.allowInfinityPoint&&!n.is0(D.Y))return;throw new Error("bad point: ZERO")}const{x:y,y:c}=D.toAffine();if(!n.isValid(y)||!n.isValid(c))throw new Error("bad point: x or y not field elements");if(!C(y,c))throw new Error("bad point: equation left != right");if(!D.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function Z(D,y,c,f,m){return c=new M(n.mul(c.X,D),c.Y,c.Z),y=Zi(f,y),c=Zi(m,c),y.add(c)}class M{constructor(y,c,f){this.X=N("x",y),this.Y=N("y",c,!0),this.Z=N("z",f),Object.freeze(this)}static CURVE(){return i}static fromAffine(y){const{x:c,y:f}=y||{};if(!y||!n.isValid(c)||!n.isValid(f))throw new Error("invalid affine point");if(y instanceof M)throw new Error("projective point not allowed");return n.is0(c)&&n.is0(f)?M.ZERO:new M(c,f,n.ONE)}static fromBytes(y){const c=M.fromAffine(A(Zt(y,void 0,"point")));return c.assertValidity(),c}static fromHex(y){return M.fromBytes(Je("pointHex",y))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(y=8,c=!0){return F.createCache(this,y),c||this.multiply(Ai),this}assertValidity(){Q(this)}hasEvenY(){const{y}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(y)}equals(y){V(y);const{X:c,Y:f,Z:m}=this,{X:_,Y:B,Z:L}=y,z=n.eql(n.mul(c,L),n.mul(_,m)),I=n.eql(n.mul(f,L),n.mul(B,m));return z&&I}negate(){return new M(this.X,n.neg(this.Y),this.Z)}double(){const{a:y,b:c}=i,f=n.mul(c,Ai),{X:m,Y:_,Z:B}=this;let L=n.ZERO,z=n.ZERO,I=n.ZERO,l=n.mul(m,m),h=n.mul(_,_),k=n.mul(B,B),T=n.mul(m,_);return T=n.add(T,T),I=n.mul(m,B),I=n.add(I,I),L=n.mul(y,I),z=n.mul(f,k),z=n.add(L,z),L=n.sub(h,z),z=n.add(h,z),z=n.mul(L,z),L=n.mul(T,L),I=n.mul(f,I),k=n.mul(y,k),T=n.sub(l,k),T=n.mul(y,T),T=n.add(T,I),I=n.add(l,l),l=n.add(I,l),l=n.add(l,k),l=n.mul(l,T),z=n.add(z,l),k=n.mul(_,B),k=n.add(k,k),l=n.mul(k,T),L=n.sub(L,l),I=n.mul(k,h),I=n.add(I,I),I=n.add(I,I),new M(L,z,I)}add(y){V(y);const{X:c,Y:f,Z:m}=this,{X:_,Y:B,Z:L}=y;let z=n.ZERO,I=n.ZERO,l=n.ZERO;const h=i.a,k=n.mul(i.b,Ai);let T=n.mul(c,_),q=n.mul(f,B),J=n.mul(m,L),ne=n.add(c,f),oe=n.add(_,B);ne=n.mul(ne,oe),oe=n.add(T,q),ne=n.sub(ne,oe),oe=n.add(c,m);let Ee=n.add(_,L);return oe=n.mul(oe,Ee),Ee=n.add(T,J),oe=n.sub(oe,Ee),Ee=n.add(f,m),z=n.add(B,L),Ee=n.mul(Ee,z),z=n.add(q,J),Ee=n.sub(Ee,z),l=n.mul(h,oe),z=n.mul(k,J),l=n.add(z,l),z=n.sub(q,l),l=n.add(q,l),I=n.mul(z,l),q=n.add(T,T),q=n.add(q,T),J=n.mul(h,J),oe=n.mul(k,oe),q=n.add(q,J),J=n.sub(T,J),J=n.mul(h,J),oe=n.add(oe,J),T=n.mul(q,oe),I=n.add(I,T),T=n.mul(Ee,oe),z=n.mul(ne,z),z=n.sub(z,T),T=n.mul(ne,q),l=n.mul(Ee,l),l=n.add(l,T),new M(z,I,l)}subtract(y){return this.add(y.negate())}is0(){return this.equals(M.ZERO)}multiply(y){const{endo:c}=e;if(!s.isValidNot0(y))throw new Error("invalid scalar: out of range");let f,m;const _=B=>F.cached(this,B,L=>Vn(M,L));if(c){const{k1neg:B,k1:L,k2neg:z,k2:I}=Y(y),{p:l,f:h}=_(L),{p:k,f:T}=_(I);m=h.add(T),f=Z(c.beta,l,k,B,z)}else{const{p:B,f:L}=_(y);f=B,m=L}return Vn(M,[f,m])[0]}multiplyUnsafe(y){const{endo:c}=e,f=this;if(!s.isValid(y))throw new Error("invalid scalar: out of range");if(y===vn||f.is0())return M.ZERO;if(y===Ir)return f;if(F.hasCache(this))return this.multiply(y);if(c){const{k1neg:m,k1:_,k2neg:B,k2:L}=Y(y),{p1:z,p2:I}=Wh(M,f,_,L);return Z(c.beta,z,I,m,B)}else return F.unsafe(f,y)}multiplyAndAddUnsafe(y,c,f){const m=this.multiplyUnsafe(c).add(y.multiplyUnsafe(f));return m.is0()?void 0:m}toAffine(y){return $(this,y)}isTorsionFree(){const{isTorsionFree:y}=e;return o===Ir?!0:y?y(M,this):F.unsafe(this,a).is0()}clearCofactor(){const{clearCofactor:y}=e;return o===Ir?this:y?y(M,this):this.multiplyUnsafe(o)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}toBytes(y=!0){return nr(y,"isCompressed"),this.assertValidity(),b(M,this,y)}toHex(y=!0){return er(this.toBytes(y))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(y=!0){return this.toBytes(y)}_setWindowSize(y){this.precompute(y)}static normalizeZ(y){return Vn(M,y)}static msm(y,c){return Tl(M,s,y,c)}static fromPrivateKey(y){return M.BASE.multiply(Sr(s,y))}}M.BASE=new M(i.Gx,i.Gy,n.ONE),M.ZERO=new M(n.ZERO,n.ONE,n.ZERO),M.Fp=n,M.Fn=s;const O=s.BITS,F=new Ml(M,e.endo?Math.ceil(O/2):O);return M.BASE.precompute(8),M}function ef(r){return Uint8Array.of(r?2:3)}function tf(r,e){return{secretKey:e.BYTES,publicKey:1+r.BYTES,publicKeyUncompressed:1+2*r.BYTES,publicKeyHasPrefix:!0,signature:2*e.BYTES}}function P0(r,e={}){const{Fn:t}=r,n=e.randomBytes||La,s=Object.assign(tf(r.Fp,t),{seed:xl(t.ORDER)});function i(b){try{return!!Sr(t,b)}catch{return!1}}function o(b,A){const{publicKey:x,publicKeyUncompressed:C}=s;try{const P=b.length;return A===!0&&P!==x||A===!1&&P!==C?!1:!!r.fromBytes(b)}catch{return!1}}function a(b=n(s.seed)){return Nh(Zt(b,s.seed,"seed"),t.ORDER)}function u(b,A=!0){return r.BASE.multiply(Sr(t,b)).toBytes(A)}function g(b){const A=a(b);return{secretKey:A,publicKey:u(A)}}function w(b){if(typeof b=="bigint")return!1;if(b instanceof r)return!0;const{secretKey:A,publicKey:x,publicKeyUncompressed:C}=s;if(t.allowedLengths||A===x)return;const P=Je("key",b).length;return P===x||P===C}function S(b,A,x=!0){if(w(b)===!0)throw new Error("first arg must be private key");if(w(A)===!1)throw new Error("second arg must be public key");const C=Sr(t,b);return r.fromHex(A).multiply(C).toBytes(x)}return Object.freeze({getPublicKey:u,getSharedSecret:S,keygen:g,Point:r,utils:{isValidSecretKey:i,isValidPublicKey:o,randomSecretKey:a,isValidPrivateKey:i,randomPrivateKey:a,normPrivateKeyToScalar:b=>Sr(t,b),precompute(b=8,A=r.BASE){return A.precompute(b,!1)}},lengths:s})}function N0(r,e,t={}){al(e),fi(t,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const n=t.randomBytes||La,s=t.hmac||((c,...f)=>Xl(e,c,nn(...f))),{Fp:i,Fn:o}=r,{ORDER:a,BITS:u}=o,{keygen:g,getPublicKey:w,getSharedSecret:S,utils:E,lengths:b}=P0(r,t),A={prehash:!1,lowS:typeof t.lowS=="boolean"?t.lowS:!1,format:void 0,extraEntropy:!1},x="compact";function C(c){const f=a>>Ir;return c>f}function P(c,f){if(!o.isValidNot0(f))throw new Error(`invalid signature ${c}: out of range 1..Point.Fn.ORDER`);return f}function W(c,f){ea(f);const m=b.signature,_=f==="compact"?m:f==="recovered"?m+1:void 0;return Zt(c,_,`${f} signature`)}class N{constructor(f,m,_){this.r=P("r",f),this.s=P("s",m),_!=null&&(this.recovery=_),Object.freeze(this)}static fromBytes(f,m=x){W(f,m);let _;if(m==="der"){const{r:I,s:l}=gn.toSig(Zt(f));return new N(I,l)}m==="recovered"&&(_=f[0],m="compact",f=f.subarray(1));const B=o.BYTES,L=f.subarray(0,B),z=f.subarray(B,B*2);return new N(o.fromBytes(L),o.fromBytes(z),_)}static fromHex(f,m){return this.fromBytes(Gi(f),m)}addRecoveryBit(f){return new N(this.r,this.s,f)}recoverPublicKey(f){const m=i.ORDER,{r:_,s:B,recovery:L}=this;if(L==null||![0,1,2,3].includes(L))throw new Error("recovery id invalid");if(a*Ql<m&&L>1)throw new Error("recovery id is ambiguous for h>1 curve");const I=L===2||L===3?_+a:_;if(!i.isValid(I))throw new Error("recovery id 2 or 3 invalid");const l=i.toBytes(I),h=r.fromBytes(nn(ef((L&1)===0),l)),k=o.inv(I),T=Y(Je("msgHash",f)),q=o.create(-T*k),J=o.create(B*k),ne=r.BASE.multiplyUnsafe(q).add(h.multiplyUnsafe(J));if(ne.is0())throw new Error("point at infinify");return ne.assertValidity(),ne}hasHighS(){return C(this.s)}toBytes(f=x){if(ea(f),f==="der")return Gi(gn.hexFromSig(this));const m=o.toBytes(this.r),_=o.toBytes(this.s);if(f==="recovered"){if(this.recovery==null)throw new Error("recovery bit must be present");return nn(Uint8Array.of(this.recovery),m,_)}return nn(m,_)}toHex(f){return er(this.toBytes(f))}assertValidity(){}static fromCompact(f){return N.fromBytes(Je("sig",f),"compact")}static fromDER(f){return N.fromBytes(Je("sig",f),"der")}normalizeS(){return this.hasHighS()?new N(this.r,o.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return er(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return er(this.toBytes("compact"))}}const V=t.bits2int||function(f){if(f.length>8192)throw new Error("input is too large");const m=fs(f),_=f.length*8-u;return _>0?m>>BigInt(_):m},Y=t.bits2int_modN||function(f){return o.create(V(f))},$=li(u);function Q(c){return Qo("num < 2^"+u,c,vn,$),o.toBytes(c)}function Z(c,f){return Zt(c,void 0,"message"),f?Zt(e(c),void 0,"prehashed message"):c}function M(c,f,m){if(["recovered","canonical"].some(q=>q in m))throw new Error("sign() legacy options not supported");const{lowS:_,prehash:B,extraEntropy:L}=ho(m,A);c=Z(c,B);const z=Y(c),I=Sr(o,f),l=[Q(I),Q(z)];if(L!=null&&L!==!1){const q=L===!0?n(b.secretKey):L;l.push(Je("extraEntropy",q))}const h=nn(...l),k=z;function T(q){const J=V(q);if(!o.isValidNot0(J))return;const ne=o.inv(J),oe=r.BASE.multiply(J).toAffine(),Ee=o.create(oe.x);if(Ee===vn)return;const xe=o.create(ne*o.create(k+Ee*I));if(xe===vn)return;let Te=(oe.x===Ee?0:2)|Number(oe.y&Ir),jt=xe;return _&&C(xe)&&(jt=o.neg(xe),Te^=1),new N(Ee,jt,Te)}return{seed:h,k2sig:T}}function O(c,f,m={}){c=Je("message",c);const{seed:_,k2sig:B}=M(c,f,m);return Ah(e.outputLen,o.BYTES,s)(_,B)}function F(c){let f;const m=typeof c=="string"||ui(c),_=!m&&c!==null&&typeof c=="object"&&typeof c.r=="bigint"&&typeof c.s=="bigint";if(!m&&!_)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(_)f=new N(c.r,c.s);else if(m){try{f=N.fromBytes(Je("sig",c),"der")}catch(B){if(!(B instanceof gn.Err))throw B}if(!f)try{f=N.fromBytes(Je("sig",c),"compact")}catch{return!1}}return f||!1}function D(c,f,m,_={}){const{lowS:B,prehash:L,format:z}=ho(_,A);if(m=Je("publicKey",m),f=Z(Je("message",f),L),"strict"in _)throw new Error("options.strict was renamed to lowS");const I=z===void 0?F(c):N.fromBytes(Je("sig",c),z);if(I===!1)return!1;try{const l=r.fromBytes(m);if(B&&I.hasHighS())return!1;const{r:h,s:k}=I,T=Y(f),q=o.inv(k),J=o.create(T*q),ne=o.create(h*q),oe=r.BASE.multiplyUnsafe(J).add(l.multiplyUnsafe(ne));return oe.is0()?!1:o.create(oe.x)===h}catch{return!1}}function y(c,f,m={}){const{prehash:_}=ho(m,A);return f=Z(f,_),N.fromBytes(c,"recovered").recoverPublicKey(f).toBytes()}return Object.freeze({keygen:g,getPublicKey:w,getSharedSecret:S,utils:E,lengths:b,Point:r,sign:O,verify:D,recoverPublicKey:y,Signature:N,hash:e})}function O0(r){const e={a:r.a,b:r.b,p:r.Fp.ORDER,n:r.n,h:r.h,Gx:r.Gx,Gy:r.Gy},t=r.Fp;let n=r.allowedPrivateKeyLengths?Array.from(new Set(r.allowedPrivateKeyLengths.map(o=>Math.ceil(o/2)))):void 0;const s=sr(e.n,{BITS:r.nBitLength,allowedLengths:n,modFromBytes:r.wrapPrivateKey}),i={Fp:t,Fn:s,allowInfinityPoint:r.allowInfinityPoint,endo:r.endo,isTorsionFree:r.isTorsionFree,clearCofactor:r.clearCofactor,fromBytes:r.fromBytes,toBytes:r.toBytes};return{CURVE:e,curveOpts:i}}function U0(r){const{CURVE:e,curveOpts:t}=O0(r),n={hmac:r.hmac,randomBytes:r.randomBytes,lowS:r.lowS,bits2int:r.bits2int,bits2int_modN:r.bits2int_modN};return{CURVE:e,curveOpts:t,hash:r.hash,ecdsaOpts:n}}function W0(r,e){const t=e.Point;return Object.assign({},e,{ProjectivePoint:t,CURVE:Object.assign({},r,Al(t.Fn.ORDER,t.Fn.BITS))})}function z0(r){const{CURVE:e,curveOpts:t,hash:n,ecdsaOpts:s}=U0(r),i=L0(e,t),o=N0(i,n,s);return W0(r,o)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function F0(r,e){const t=n=>z0({...r,hash:n});return{...t(e),create:t}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const $a={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},D0={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),basises:[[BigInt("0x3086d221a7d46bcde86c90e49284eb15"),-BigInt("0xe4437ed6010e88286f547fa90abfe4c3")],[BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),BigInt("0x3086d221a7d46bcde86c90e49284eb15")]]},Zc=BigInt(2);function K0(r){const e=$a.p,t=BigInt(3),n=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),u=BigInt(88),g=r*r*r%e,w=g*g*r%e,S=Ze(w,t,e)*w%e,E=Ze(S,t,e)*w%e,b=Ze(E,Zc,e)*g%e,A=Ze(b,s,e)*b%e,x=Ze(A,i,e)*A%e,C=Ze(x,a,e)*x%e,P=Ze(C,u,e)*C%e,W=Ze(P,a,e)*x%e,N=Ze(W,t,e)*w%e,V=Ze(N,o,e)*A%e,Y=Ze(V,n,e)*g%e,$=Ze(Y,Zc,e);if(!ta.eql(ta.sqr($),r))throw new Error("Cannot find square root");return $}const ta=sr($a.p,{sqrt:K0}),Va=F0({...$a,Fp:ta,lowS:!0,endo:D0},dl),q0=Or.utils.randomPrivateKey,Jc=()=>{const r=Or.utils.randomPrivateKey(),e=ns(r),t=new Uint8Array(64);return t.set(r),t.set(e,32),{publicKey:e,secretKey:t}},ns=Or.getPublicKey;function Xc(r){try{return Or.ExtendedPoint.fromHex(r),!0}catch{return!1}}const Ha=(r,e)=>Or.sign(r,e.slice(0,32)),$0=Or.verify,ve=r=>pe.Buffer.isBuffer(r)?r:r instanceof Uint8Array?pe.Buffer.from(r.buffer,r.byteOffset,r.byteLength):pe.Buffer.from(r);class ja{constructor(e){Object.assign(this,e)}encode(){return pe.Buffer.from(ro.serialize(Xr,this))}static decode(e){return ro.deserialize(Xr,this,e)}static decodeUnchecked(e){return ro.deserializeUnchecked(Xr,this,e)}}class V0 extends ja{constructor(e){if(super(e),this.enum="",Object.keys(e).length!==1)throw new Error("Enum can only take single value");Object.keys(e).map(t=>{this.enum=t})}}const Xr=new Map;var nf;const rf=32,cn=32;function H0(r){return r._bn!==void 0}let Qc=1;class ie extends ja{constructor(e){if(super({}),this._bn=void 0,H0(e))this._bn=e._bn;else{if(typeof e=="string"){const t=Bt.decode(e);if(t.length!=cn)throw new Error("Invalid public key input");this._bn=new Cc(t)}else this._bn=new Cc(e);if(this._bn.byteLength()>cn)throw new Error("Invalid public key input")}}static unique(){const e=new ie(Qc);return Qc+=1,new ie(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return Bt.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){const e=this._bn.toArrayLike(pe.Buffer);if(e.length===cn)return e;const t=pe.Buffer.alloc(32);return e.copy(t,32-e.length),t}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,t,n){const s=pe.Buffer.concat([e.toBuffer(),pe.Buffer.from(t),n.toBuffer()]),i=Oc(s);return new ie(i)}static createProgramAddressSync(e,t){let n=pe.Buffer.alloc(0);e.forEach(function(i){if(i.length>rf)throw new TypeError("Max seed length exceeded");n=pe.Buffer.concat([n,ve(i)])}),n=pe.Buffer.concat([n,t.toBuffer(),pe.Buffer.from("ProgramDerivedAddress")]);const s=Oc(n);if(Xc(s))throw new Error("Invalid seeds, address must fall off the curve");return new ie(s)}static async createProgramAddress(e,t){return this.createProgramAddressSync(e,t)}static findProgramAddressSync(e,t){let n=255,s;for(;n!=0;){try{const i=e.concat(pe.Buffer.from([n]));s=this.createProgramAddressSync(i,t)}catch(i){if(i instanceof TypeError)throw i;n--;continue}return[s,n]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,t){return this.findProgramAddressSync(e,t)}static isOnCurve(e){const t=new ie(e);return Xc(t.toBytes())}}nf=ie;ie.default=new nf("11111111111111111111111111111111");Xr.set(ie,{kind:"struct",fields:[["_bn","u256"]]});class j0{constructor(e){if(this._publicKey=void 0,this._secretKey=void 0,e){const t=ve(e);if(e.length!==64)throw new Error("bad secret key size");this._publicKey=t.slice(32,64),this._secretKey=t.slice(0,32)}else this._secretKey=ve(q0()),this._publicKey=ve(ns(this._secretKey))}get publicKey(){return new ie(this._publicKey)}get secretKey(){return pe.Buffer.concat([this._secretKey,this._publicKey],64)}}const G0=new ie("BPFLoader1111111111111111111111111111111111"),On=1232,ys=127,ri=64;class Ga extends Error{constructor(e){super(`Signature ${e} has expired: block height exceeded.`),this.signature=void 0,this.signature=e}}Object.defineProperty(Ga.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class Ya extends Error{constructor(e,t){super(`Transaction was not confirmed in ${t.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${e} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=e}}Object.defineProperty(Ya.prototype,"name",{value:"TransactionExpiredTimeoutError"});class Er extends Error{constructor(e){super(`Signature ${e} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=e}}Object.defineProperty(Er.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class ii{constructor(e,t){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=t}keySegments(){const e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(const t of this.keySegments()){if(e<t.length)return t[e];e-=t.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const n=new Map;this.keySegments().flat().forEach((i,o)=>{n.set(i.toBase58(),o)});const s=i=>{const o=n.get(i.toBase58());if(o===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return o};return e.map(i=>({programIdIndex:s(i.programId),accountKeyIndexes:i.keys.map(o=>s(o.pubkey)),data:i.data}))}}const Se=(r="publicKey")=>U.blob(32,r),Y0=(r="signature")=>U.blob(64,r),Hn=(r="string")=>{const e=U.struct([U.u32("length"),U.u32("lengthPadding"),U.blob(U.offset(U.u32(),-8),"chars")],r),t=e.decode.bind(e),n=e.encode.bind(e),s=e;return s.decode=(i,o)=>t(i,o).chars.toString(),s.encode=(i,o,a)=>{const u={chars:pe.Buffer.from(i,"utf8")};return n(u,o,a)},s.alloc=i=>U.u32().span+U.u32().span+pe.Buffer.from(i,"utf8").length,s},Z0=(r="authorized")=>U.struct([Se("staker"),Se("withdrawer")],r),J0=(r="lockup")=>U.struct([U.ns64("unixTimestamp"),U.ns64("epoch"),Se("custodian")],r),X0=(r="voteInit")=>U.struct([Se("nodePubkey"),Se("authorizedVoter"),Se("authorizedWithdrawer"),U.u8("commission")],r),Q0=(r="voteAuthorizeWithSeedArgs")=>U.struct([U.u32("voteAuthorizationType"),Se("currentAuthorityDerivedKeyOwnerPubkey"),Hn("currentAuthorityDerivedKeySeed"),Se("newAuthorized")],r);function sf(r,e){const t=s=>{if(s.span>=0)return s.span;if(typeof s.alloc=="function")return s.alloc(e[s.property]);if("count"in s&&"elementLayout"in s){const i=e[s.property];if(Array.isArray(i))return i.length*t(s.elementLayout)}else if("fields"in s)return sf({layout:s},e[s.property]);return 0};let n=0;return r.layout.fields.forEach(s=>{n+=t(s)}),n}function zt(r){let e=0,t=0;for(;;){let n=r.shift();if(e|=(n&127)<<t*7,t+=1,(n&128)===0)break}return e}function Ht(r,e){let t=e;for(;;){let n=t&127;if(t>>=7,t==0){r.push(n);break}else n|=128,r.push(n)}}function Ie(r,e){if(!r)throw new Error(e||"Assertion failed")}class ms{constructor(e,t){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=t}static compile(e,t){const n=new Map,s=o=>{const a=o.toBase58();let u=n.get(a);return u===void 0&&(u={isSigner:!1,isWritable:!1,isInvoked:!1},n.set(a,u)),u},i=s(t);i.isSigner=!0,i.isWritable=!0;for(const o of e){s(o.programId).isInvoked=!0;for(const a of o.keys){const u=s(a.pubkey);u.isSigner||=a.isSigner,u.isWritable||=a.isWritable}}return new ms(t,n)}getMessageComponents(){const e=[...this.keyMetaMap.entries()];Ie(e.length<=256,"Max static account keys length exceeded");const t=e.filter(([,u])=>u.isSigner&&u.isWritable),n=e.filter(([,u])=>u.isSigner&&!u.isWritable),s=e.filter(([,u])=>!u.isSigner&&u.isWritable),i=e.filter(([,u])=>!u.isSigner&&!u.isWritable),o={numRequiredSignatures:t.length+n.length,numReadonlySignedAccounts:n.length,numReadonlyUnsignedAccounts:i.length};{Ie(t.length>0,"Expected at least one writable signer key");const[u]=t[0];Ie(u===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const a=[...t.map(([u])=>new ie(u)),...n.map(([u])=>new ie(u)),...s.map(([u])=>new ie(u)),...i.map(([u])=>new ie(u))];return[o,a]}extractTableLookup(e){const[t,n]=this.drainKeysFoundInLookupTable(e.state.addresses,o=>!o.isSigner&&!o.isInvoked&&o.isWritable),[s,i]=this.drainKeysFoundInLookupTable(e.state.addresses,o=>!o.isSigner&&!o.isInvoked&&!o.isWritable);if(!(t.length===0&&s.length===0))return[{accountKey:e.key,writableIndexes:t,readonlyIndexes:s},{writable:n,readonly:i}]}drainKeysFoundInLookupTable(e,t){const n=new Array,s=new Array;for(const[i,o]of this.keyMetaMap.entries())if(t(o)){const a=new ie(i),u=e.findIndex(g=>g.equals(a));u>=0&&(Ie(u<256,"Max lookup table index exceeded"),n.push(u),s.push(a),this.keyMetaMap.delete(i))}return[n,s]}}const of="Reached end of buffer unexpectedly";function rn(r){if(r.length===0)throw new Error(of);return r.shift()}function Ft(r,...e){const[t]=e;if(e.length===2?t+(e[1]??0)>r.length:t>=r.length)throw new Error(of);return r.splice(...e)}class Xt{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map(t=>new ie(t)),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach(t=>this.indexToProgramIds.set(t.programIdIndex,this.accountKeys[t.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:Bt.decode(e.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new ii(this.staticAccountKeys)}static compile(e){const t=ms.compile(e.instructions,e.payerKey),[n,s]=t.getMessageComponents(),o=new ii(s).compileInstructions(e.instructions).map(a=>({programIdIndex:a.programIdIndex,accounts:a.accountKeyIndexes,data:Bt.encode(a.data)}));return new Xt({header:n,accountKeys:s,recentBlockhash:e.recentBlockhash,instructions:o})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures;if(e>=this.header.numRequiredSignatures){const n=e-t,i=this.accountKeys.length-t-this.header.numReadonlyUnsignedAccounts;return n<i}else{const n=t-this.header.numReadonlySignedAccounts;return e<n}}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((e,t)=>!this.isProgramId(t))}serialize(){const e=this.accountKeys.length;let t=[];Ht(t,e);const n=this.instructions.map(S=>{const{accounts:E,programIdIndex:b}=S,A=Array.from(Bt.decode(S.data));let x=[];Ht(x,E.length);let C=[];return Ht(C,A.length),{programIdIndex:b,keyIndicesCount:pe.Buffer.from(x),keyIndices:E,dataLength:pe.Buffer.from(C),data:A}});let s=[];Ht(s,n.length);let i=pe.Buffer.alloc(On);pe.Buffer.from(s).copy(i);let o=s.length;n.forEach(S=>{const b=U.struct([U.u8("programIdIndex"),U.blob(S.keyIndicesCount.length,"keyIndicesCount"),U.seq(U.u8("keyIndex"),S.keyIndices.length,"keyIndices"),U.blob(S.dataLength.length,"dataLength"),U.seq(U.u8("userdatum"),S.data.length,"data")]).encode(S,i,o);o+=b}),i=i.slice(0,o);const a=U.struct([U.blob(1,"numRequiredSignatures"),U.blob(1,"numReadonlySignedAccounts"),U.blob(1,"numReadonlyUnsignedAccounts"),U.blob(t.length,"keyCount"),U.seq(Se("key"),e,"keys"),Se("recentBlockhash")]),u={numRequiredSignatures:pe.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:pe.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:pe.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:pe.Buffer.from(t),keys:this.accountKeys.map(S=>ve(S.toBytes())),recentBlockhash:Bt.decode(this.recentBlockhash)};let g=pe.Buffer.alloc(2048);const w=a.encode(u,g);return i.copy(g,w),g.slice(0,w+i.length)}static from(e){let t=[...e];const n=rn(t);if(n!==(n&ys))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const s=rn(t),i=rn(t),o=zt(t);let a=[];for(let E=0;E<o;E++){const b=Ft(t,0,cn);a.push(new ie(pe.Buffer.from(b)))}const u=Ft(t,0,cn),g=zt(t);let w=[];for(let E=0;E<g;E++){const b=rn(t),A=zt(t),x=Ft(t,0,A),C=zt(t),P=Ft(t,0,C),W=Bt.encode(pe.Buffer.from(P));w.push({programIdIndex:b,accounts:x,data:W})}const S={header:{numRequiredSignatures:n,numReadonlySignedAccounts:s,numReadonlyUnsignedAccounts:i},recentBlockhash:Bt.encode(pe.Buffer.from(u)),accountKeys:a,instructions:w};return new Xt(S)}}class rr{constructor(e){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=e.header,this.staticAccountKeys=e.staticAccountKeys,this.recentBlockhash=e.recentBlockhash,this.compiledInstructions=e.compiledInstructions,this.addressTableLookups=e.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let e=0;for(const t of this.addressTableLookups)e+=t.readonlyIndexes.length+t.writableIndexes.length;return e}getAccountKeys(e){let t;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");t=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)t=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new ii(this.staticAccountKeys,t)}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures,n=this.staticAccountKeys.length;if(e>=n){const s=e-n,i=this.addressTableLookups.reduce((o,a)=>o+a.writableIndexes.length,0);return s<i}else if(e>=this.header.numRequiredSignatures){const s=e-t,o=n-t-this.header.numReadonlyUnsignedAccounts;return s<o}else{const s=t-this.header.numReadonlySignedAccounts;return e<s}}resolveAddressTableLookups(e){const t={writable:[],readonly:[]};for(const n of this.addressTableLookups){const s=e.find(i=>i.key.equals(n.accountKey));if(!s)throw new Error(`Failed to find address lookup table account for table key ${n.accountKey.toBase58()}`);for(const i of n.writableIndexes)if(i<s.state.addresses.length)t.writable.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${n.accountKey.toBase58()}`);for(const i of n.readonlyIndexes)if(i<s.state.addresses.length)t.readonly.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${n.accountKey.toBase58()}`)}return t}static compile(e){const t=ms.compile(e.instructions,e.payerKey),n=new Array,s={writable:new Array,readonly:new Array},i=e.addressLookupTableAccounts||[];for(const w of i){const S=t.extractTableLookup(w);if(S!==void 0){const[E,{writable:b,readonly:A}]=S;n.push(E),s.writable.push(...b),s.readonly.push(...A)}}const[o,a]=t.getMessageComponents(),g=new ii(a,s).compileInstructions(e.instructions);return new rr({header:o,staticAccountKeys:a,recentBlockhash:e.recentBlockhash,compiledInstructions:g,addressTableLookups:n})}serialize(){const e=Array();Ht(e,this.staticAccountKeys.length);const t=this.serializeInstructions(),n=Array();Ht(n,this.compiledInstructions.length);const s=this.serializeAddressTableLookups(),i=Array();Ht(i,this.addressTableLookups.length);const o=U.struct([U.u8("prefix"),U.struct([U.u8("numRequiredSignatures"),U.u8("numReadonlySignedAccounts"),U.u8("numReadonlyUnsignedAccounts")],"header"),U.blob(e.length,"staticAccountKeysLength"),U.seq(Se(),this.staticAccountKeys.length,"staticAccountKeys"),Se("recentBlockhash"),U.blob(n.length,"instructionsLength"),U.blob(t.length,"serializedInstructions"),U.blob(i.length,"addressTableLookupsLength"),U.blob(s.length,"serializedAddressTableLookups")]),a=new Uint8Array(On),g=o.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map(w=>w.toBytes()),recentBlockhash:Bt.decode(this.recentBlockhash),instructionsLength:new Uint8Array(n),serializedInstructions:t,addressTableLookupsLength:new Uint8Array(i),serializedAddressTableLookups:s},a);return a.slice(0,g)}serializeInstructions(){let e=0;const t=new Uint8Array(On);for(const n of this.compiledInstructions){const s=Array();Ht(s,n.accountKeyIndexes.length);const i=Array();Ht(i,n.data.length);const o=U.struct([U.u8("programIdIndex"),U.blob(s.length,"encodedAccountKeyIndexesLength"),U.seq(U.u8(),n.accountKeyIndexes.length,"accountKeyIndexes"),U.blob(i.length,"encodedDataLength"),U.blob(n.data.length,"data")]);e+=o.encode({programIdIndex:n.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(s),accountKeyIndexes:n.accountKeyIndexes,encodedDataLength:new Uint8Array(i),data:n.data},t,e)}return t.slice(0,e)}serializeAddressTableLookups(){let e=0;const t=new Uint8Array(On);for(const n of this.addressTableLookups){const s=Array();Ht(s,n.writableIndexes.length);const i=Array();Ht(i,n.readonlyIndexes.length);const o=U.struct([Se("accountKey"),U.blob(s.length,"encodedWritableIndexesLength"),U.seq(U.u8(),n.writableIndexes.length,"writableIndexes"),U.blob(i.length,"encodedReadonlyIndexesLength"),U.seq(U.u8(),n.readonlyIndexes.length,"readonlyIndexes")]);e+=o.encode({accountKey:n.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(s),writableIndexes:n.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(i),readonlyIndexes:n.readonlyIndexes},t,e)}return t.slice(0,e)}static deserialize(e){let t=[...e];const n=rn(t),s=n&ys;Ie(n!==s,"Expected versioned message but received legacy message");const i=s;Ie(i===0,`Expected versioned message with version 0 but found version ${i}`);const o={numRequiredSignatures:rn(t),numReadonlySignedAccounts:rn(t),numReadonlyUnsignedAccounts:rn(t)},a=[],u=zt(t);for(let A=0;A<u;A++)a.push(new ie(Ft(t,0,cn)));const g=Bt.encode(Ft(t,0,cn)),w=zt(t),S=[];for(let A=0;A<w;A++){const x=rn(t),C=zt(t),P=Ft(t,0,C),W=zt(t),N=new Uint8Array(Ft(t,0,W));S.push({programIdIndex:x,accountKeyIndexes:P,data:N})}const E=zt(t),b=[];for(let A=0;A<E;A++){const x=new ie(Ft(t,0,cn)),C=zt(t),P=Ft(t,0,C),W=zt(t),N=Ft(t,0,W);b.push({accountKey:x,writableIndexes:P,readonlyIndexes:N})}return new rr({header:o,staticAccountKeys:a,recentBlockhash:g,compiledInstructions:S,addressTableLookups:b})}}const ws={deserializeMessageVersion(r){const e=r[0],t=e&ys;return t===e?"legacy":t},deserialize:r=>{const e=ws.deserializeMessageVersion(r);if(e==="legacy")return Xt.from(r);if(e===0)return rr.deserialize(r);throw new Error(`Transaction message version ${e} deserialization is not supported`)}};let dn=(function(r){return r[r.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",r[r.PROCESSED=1]="PROCESSED",r[r.TIMED_OUT=2]="TIMED_OUT",r[r.NONCE_INVALID=3]="NONCE_INVALID",r})({});const ep=pe.Buffer.alloc(ri).fill(0);class Me{constructor(e){this.keys=void 0,this.programId=void 0,this.data=pe.Buffer.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map(({pubkey:e,isSigner:t,isWritable:n})=>({pubkey:e.toJSON(),isSigner:t,isWritable:n})),programId:this.programId.toJSON(),data:[...this.data]}}}class _e{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){const{minContextSlot:t,nonceInfo:n}=e;this.minNonceContextSlot=t,this.nonceInfo=n}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){const{blockhash:t,lastValidBlockHeight:n}=e;this.recentBlockhash=t,this.lastValidBlockHeight=n}else{const{recentBlockhash:t,nonceInfo:n}=e;n&&(this.nonceInfo=n),this.recentBlockhash=t}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(e=>e.toJSON()),signers:this.signatures.map(({publicKey:e})=>e.toJSON())}}add(...e){if(e.length===0)throw new Error("No instructions");return e.forEach(t=>{"instructions"in t?this.instructions=this.instructions.concat(t.instructions):"data"in t&&"programId"in t&&"keys"in t?this.instructions.push(t):this.instructions.push(new Me(t))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let e,t;if(this.nonceInfo?(e=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?t=[this.nonceInfo.nonceInstruction,...this.instructions]:t=this.instructions):(e=this.recentBlockhash,t=this.instructions),!e)throw new Error("Transaction recentBlockhash required");t.length<1&&console.warn("No instructions provided");let n;if(this.feePayer)n=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)n=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let x=0;x<t.length;x++)if(t[x].programId===void 0)throw new Error(`Transaction instruction index ${x} has undefined program id`);const s=[],i=[];t.forEach(x=>{x.keys.forEach(P=>{i.push({...P})});const C=x.programId.toString();s.includes(C)||s.push(C)}),s.forEach(x=>{i.push({pubkey:new ie(x),isSigner:!1,isWritable:!1})});const o=[];i.forEach(x=>{const C=x.pubkey.toString(),P=o.findIndex(W=>W.pubkey.toString()===C);P>-1?(o[P].isWritable=o[P].isWritable||x.isWritable,o[P].isSigner=o[P].isSigner||x.isSigner):o.push(x)}),o.sort(function(x,C){if(x.isSigner!==C.isSigner)return x.isSigner?-1:1;if(x.isWritable!==C.isWritable)return x.isWritable?-1:1;const P={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return x.pubkey.toBase58().localeCompare(C.pubkey.toBase58(),"en",P)});const a=o.findIndex(x=>x.pubkey.equals(n));if(a>-1){const[x]=o.splice(a,1);x.isSigner=!0,x.isWritable=!0,o.unshift(x)}else o.unshift({pubkey:n,isSigner:!0,isWritable:!0});for(const x of this.signatures){const C=o.findIndex(P=>P.pubkey.equals(x.publicKey));if(C>-1)o[C].isSigner||(o[C].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${x.publicKey.toString()}`)}let u=0,g=0,w=0;const S=[],E=[];o.forEach(({pubkey:x,isSigner:C,isWritable:P})=>{C?(S.push(x.toString()),u+=1,P||(g+=1)):(E.push(x.toString()),P||(w+=1))});const b=S.concat(E),A=t.map(x=>{const{data:C,programId:P}=x;return{programIdIndex:b.indexOf(P.toString()),accounts:x.keys.map(W=>b.indexOf(W.pubkey.toString())),data:Bt.encode(C)}});return A.forEach(x=>{Ie(x.programIdIndex>=0),x.accounts.forEach(C=>Ie(C>=0))}),new Xt({header:{numRequiredSignatures:u,numReadonlySignedAccounts:g,numReadonlyUnsignedAccounts:w},accountKeys:b,recentBlockhash:e,instructions:A})}_compile(){const e=this.compileMessage(),t=e.accountKeys.slice(0,e.header.numRequiredSignatures);return this.signatures.length===t.length&&this.signatures.every((s,i)=>t[i].equals(s.publicKey))||(this.signatures=t.map(n=>({signature:null,publicKey:n}))),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(e.length===0)throw new Error("No signers");const t=new Set;this.signatures=e.filter(n=>{const s=n.toString();return t.has(s)?!1:(t.add(s),!0)}).map(n=>({signature:null,publicKey:n}))}sign(...e){if(e.length===0)throw new Error("No signers");const t=new Set,n=[];for(const i of e){const o=i.publicKey.toString();t.has(o)||(t.add(o),n.push(i))}this.signatures=n.map(i=>({signature:null,publicKey:i.publicKey}));const s=this._compile();this._partialSign(s,...n)}partialSign(...e){if(e.length===0)throw new Error("No signers");const t=new Set,n=[];for(const i of e){const o=i.publicKey.toString();t.has(o)||(t.add(o),n.push(i))}const s=this._compile();this._partialSign(s,...n)}_partialSign(e,...t){const n=e.serialize();t.forEach(s=>{const i=Ha(n,s.secretKey);this._addSignature(s.publicKey,ve(i))})}addSignature(e,t){this._compile(),this._addSignature(e,t)}_addSignature(e,t){Ie(t.length===64);const n=this.signatures.findIndex(s=>e.equals(s.publicKey));if(n<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[n].signature=pe.Buffer.from(t)}verifySignatures(e=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),e)}_getMessageSignednessErrors(e,t){const n={};for(const{signature:s,publicKey:i}of this.signatures)s===null?t&&(n.missing||=[]).push(i):$0(s,e,i.toBytes())||(n.invalid||=[]).push(i);return n.invalid||n.missing?n:void 0}serialize(e){const{requireAllSignatures:t,verifySignatures:n}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),s=this.serializeMessage();if(n){const i=this._getMessageSignednessErrors(s,t);if(i){let o="Signature verification failed.";throw i.invalid&&(o+=`
Invalid signature for public key${i.invalid.length===1?"":"(s)"} [\`${i.invalid.map(a=>a.toBase58()).join("`, `")}\`].`),i.missing&&(o+=`
Missing signature for public key${i.missing.length===1?"":"(s)"} [\`${i.missing.map(a=>a.toBase58()).join("`, `")}\`].`),new Error(o)}}return this._serialize(s)}_serialize(e){const{signatures:t}=this,n=[];Ht(n,t.length);const s=n.length+t.length*64+e.length,i=pe.Buffer.alloc(s);return Ie(t.length<256),pe.Buffer.from(n).copy(i,0),t.forEach(({signature:o},a)=>{o!==null&&(Ie(o.length===64,"signature has invalid length"),pe.Buffer.from(o).copy(i,n.length+a*64))}),e.copy(i,n.length+t.length*64),Ie(i.length<=On,`Transaction too large: ${i.length} > ${On}`),i}get keys(){return Ie(this.instructions.length===1),this.instructions[0].keys.map(e=>e.pubkey)}get programId(){return Ie(this.instructions.length===1),this.instructions[0].programId}get data(){return Ie(this.instructions.length===1),this.instructions[0].data}static from(e){let t=[...e];const n=zt(t);let s=[];for(let i=0;i<n;i++){const o=Ft(t,0,ri);s.push(Bt.encode(pe.Buffer.from(o)))}return _e.populate(Xt.from(t),s)}static populate(e,t=[]){const n=new _e;return n.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(n.feePayer=e.accountKeys[0]),t.forEach((s,i)=>{const o={signature:s==Bt.encode(ep)?null:Bt.decode(s),publicKey:e.accountKeys[i]};n.signatures.push(o)}),e.instructions.forEach(s=>{const i=s.accounts.map(o=>{const a=e.accountKeys[o];return{pubkey:a,isSigner:n.signatures.some(u=>u.publicKey.toString()===a.toString())||e.isAccountSigner(o),isWritable:e.isAccountWritable(o)}});n.instructions.push(new Me({keys:i,programId:e.accountKeys[s.programIdIndex],data:Bt.decode(s.data)}))}),n._message=e,n._json=n.toJSON(),n}}class Za{constructor(e){this.payerKey=void 0,this.instructions=void 0,this.recentBlockhash=void 0,this.payerKey=e.payerKey,this.instructions=e.instructions,this.recentBlockhash=e.recentBlockhash}static decompile(e,t){const{header:n,compiledInstructions:s,recentBlockhash:i}=e,{numRequiredSignatures:o,numReadonlySignedAccounts:a,numReadonlyUnsignedAccounts:u}=n,g=o-a;Ie(g>0,"Message header is invalid");const w=e.staticAccountKeys.length-o-u;Ie(w>=0,"Message header is invalid");const S=e.getAccountKeys(t),E=S.get(0);if(E===void 0)throw new Error("Failed to decompile message because no account keys were found");const b=[];for(const A of s){const x=[];for(const P of A.accountKeyIndexes){const W=S.get(P);if(W===void 0)throw new Error(`Failed to find key for account key index ${P}`);const N=P<o;let V;N?V=P<g:P<S.staticAccountKeys.length?V=P-o<w:V=P-S.staticAccountKeys.length<S.accountKeysFromLookups.writable.length,x.push({pubkey:W,isSigner:P<n.numRequiredSignatures,isWritable:V})}const C=S.get(A.programIdIndex);if(C===void 0)throw new Error(`Failed to find program id for program id index ${A.programIdIndex}`);b.push(new Me({programId:C,data:ve(A.data),keys:x}))}return new Za({payerKey:E,instructions:b,recentBlockhash:i})}compileToLegacyMessage(){return Xt.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions})}compileToV0Message(e){return rr.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions,addressLookupTableAccounts:e})}}class Lr{get version(){return this.message.version}constructor(e,t){if(this.signatures=void 0,this.message=void 0,t!==void 0)Ie(t.length===e.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=t;else{const n=[];for(let s=0;s<e.header.numRequiredSignatures;s++)n.push(new Uint8Array(ri));this.signatures=n}this.message=e}serialize(){const e=this.message.serialize(),t=Array();Ht(t,this.signatures.length);const n=U.struct([U.blob(t.length,"encodedSignaturesLength"),U.seq(Y0(),this.signatures.length,"signatures"),U.blob(e.length,"serializedMessage")]),s=new Uint8Array(2048),i=n.encode({encodedSignaturesLength:new Uint8Array(t),signatures:this.signatures,serializedMessage:e},s);return s.slice(0,i)}static deserialize(e){let t=[...e];const n=[],s=zt(t);for(let o=0;o<s;o++)n.push(new Uint8Array(Ft(t,0,ri)));const i=ws.deserialize(new Uint8Array(t));return new Lr(i,n)}sign(e){const t=this.message.serialize(),n=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const s of e){const i=n.findIndex(o=>o.equals(s.publicKey));Ie(i>=0,`Cannot sign with non signer key ${s.publicKey.toBase58()}`),this.signatures[i]=Ha(t,s.secretKey)}}addSignature(e,t){Ie(t.byteLength===64,"Signature must be 64 bytes long");const s=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(i=>i.equals(e));Ie(s>=0,`Can not add signature; \`${e.toBase58()}\` is not required to sign this transaction`),this.signatures[s]=t}}const tp=160,np=64,rp=tp/np,af=1e3/rp,tn=new ie("SysvarC1ock11111111111111111111111111111111"),ip=new ie("SysvarEpochSchedu1e111111111111111111111111"),sp=new ie("Sysvar1nstructions1111111111111111111111111"),Mi=new ie("SysvarRecentB1ockHashes11111111111111111111"),Pr=new ie("SysvarRent111111111111111111111111111111111"),op=new ie("SysvarRewards111111111111111111111111111111"),ap=new ie("SysvarS1otHashes111111111111111111111111111"),cp=new ie("SysvarS1otHistory11111111111111111111111111"),Ti=new ie("SysvarStakeHistory1111111111111111111111111");class si extends Error{constructor({action:e,signature:t,transactionMessage:n,logs:s}){const i=s?`Logs: 
${JSON.stringify(s.slice(-10),null,2)}. `:"",o="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let a;switch(e){case"send":a=`Transaction ${t} resulted in an error. 
${n}. `+i+o;break;case"simulate":a=`Simulation failed. 
Message: ${n}. 
`+i+o;break;default:a=`Unknown action '${(u=>u)(e)}'`}super(a),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=t,this.transactionMessage=n,this.transactionLogs=s||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const e=this.transactionLogs;if(!(e!=null&&typeof e=="object"&&"then"in e))return e}async getLogs(e){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((t,n)=>{e.getTransaction(this.signature).then(s=>{if(s&&s.meta&&s.meta.logMessages){const i=s.meta.logMessages;this.transactionLogs=i,t(i)}else n(new Error("Log messages not found"))}).catch(n)})),await this.transactionLogs}}const up={JSON_RPC_SERVER_ERROR_BLOCK_CLEANED_UP:-32001,JSON_RPC_SERVER_ERROR_SEND_TRANSACTION_PREFLIGHT_FAILURE:-32002,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_VERIFICATION_FAILURE:-32003,JSON_RPC_SERVER_ERROR_BLOCK_NOT_AVAILABLE:-32004,JSON_RPC_SERVER_ERROR_NODE_UNHEALTHY:-32005,JSON_RPC_SERVER_ERROR_TRANSACTION_PRECOMPILE_VERIFICATION_FAILURE:-32006,JSON_RPC_SERVER_ERROR_SLOT_SKIPPED:-32007,JSON_RPC_SERVER_ERROR_NO_SNAPSHOT:-32008,JSON_RPC_SERVER_ERROR_LONG_TERM_STORAGE_SLOT_SKIPPED:-32009,JSON_RPC_SERVER_ERROR_KEY_EXCLUDED_FROM_SECONDARY_INDEX:-32010,JSON_RPC_SERVER_ERROR_TRANSACTION_HISTORY_NOT_AVAILABLE:-32011,JSON_RPC_SCAN_ERROR:-32012,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_LEN_MISMATCH:-32013,JSON_RPC_SERVER_ERROR_BLOCK_STATUS_NOT_AVAILABLE_YET:-32014,JSON_RPC_SERVER_ERROR_UNSUPPORTED_TRANSACTION_VERSION:-32015,JSON_RPC_SERVER_ERROR_MIN_CONTEXT_SLOT_NOT_REACHED:-32016};class le extends Error{constructor({code:e,message:t,data:n},s){super(s!=null?`${s}: ${t}`:t),this.code=void 0,this.data=void 0,this.code=e,this.data=n,this.name="SolanaJSONRPCError"}}async function na(r,e,t,n){const s=n&&{skipPreflight:n.skipPreflight,preflightCommitment:n.preflightCommitment||n.commitment,maxRetries:n.maxRetries,minContextSlot:n.minContextSlot},i=await r.sendTransaction(e,t,s);let o;if(e.recentBlockhash!=null&&e.lastValidBlockHeight!=null)o=(await r.confirmTransaction({abortSignal:n?.abortSignal,signature:i,blockhash:e.recentBlockhash,lastValidBlockHeight:e.lastValidBlockHeight},n&&n.commitment)).value;else if(e.minNonceContextSlot!=null&&e.nonceInfo!=null){const{nonceInstruction:a}=e.nonceInfo,u=a.keys[0].pubkey;o=(await r.confirmTransaction({abortSignal:n?.abortSignal,minContextSlot:e.minNonceContextSlot,nonceAccountPubkey:u,nonceValue:e.nonceInfo.nonce,signature:i},n&&n.commitment)).value}else n?.abortSignal!=null&&console.warn("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` or a combination of `nonceInfo` and `minNonceContextSlot` are abortable."),o=(await r.confirmTransaction(i,n&&n.commitment)).value;if(o.err)throw i!=null?new si({action:"send",signature:i,transactionMessage:`Status: (${JSON.stringify(o)})`}):new Error(`Transaction ${i} failed (${JSON.stringify(o)})`);return i}function Kn(r){return new Promise(e=>setTimeout(e,r))}function ke(r,e){const t=r.layout.span>=0?r.layout.span:sf(r,e),n=pe.Buffer.alloc(t),s=Object.assign({instruction:r.index},e);return r.layout.encode(s,n),n}function Be(r,e){let t;try{t=r.layout.decode(e)}catch(n){throw new Error("invalid instruction; "+n)}if(t.instruction!==r.index)throw new Error(`invalid instruction; instruction index mismatch ${t.instruction} != ${r.index}`);return t}const cf=U.nu64("lamportsPerSignature"),uf=U.struct([U.u32("version"),U.u32("state"),Se("authorizedPubkey"),Se("nonce"),U.struct([cf],"feeCalculator")]),ra=uf.span;class bs{constructor(e){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=e.authorizedPubkey,this.nonce=e.nonce,this.feeCalculator=e.feeCalculator}static fromAccountData(e){const t=uf.decode(ve(e),0);return new bs({authorizedPubkey:new ie(t.authorizedPubkey),nonce:new ie(t.nonce).toString(),feeCalculator:t.feeCalculator})}}function Nr(r){const e=U.blob(8,r),t=e.decode.bind(e),n=e.encode.bind(e),s=e,i=Wd();return s.decode=(o,a)=>{const u=t(o,a);return i.decode(u)},s.encode=(o,a,u)=>{const g=i.encode(o);return n(g,a,u)},s}class lp{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=U.u32("instruction").decode(e.data);let s;for(const[i,o]of Object.entries(Ne))if(o.index==n){s=i;break}if(!s)throw new Error("Instruction type incorrect; not a SystemInstruction");return s}static decodeCreateAccount(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{lamports:t,space:n,programId:s}=Be(Ne.Create,e.data);return{fromPubkey:e.keys[0].pubkey,newAccountPubkey:e.keys[1].pubkey,lamports:t,space:n,programId:new ie(s)}}static decodeTransfer(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{lamports:t}=Be(Ne.Transfer,e.data);return{fromPubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,lamports:t}}static decodeTransferWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:t,seed:n,programId:s}=Be(Ne.TransferWithSeed,e.data);return{fromPubkey:e.keys[0].pubkey,basePubkey:e.keys[1].pubkey,toPubkey:e.keys[2].pubkey,lamports:t,seed:n,programId:new ie(s)}}static decodeAllocate(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{space:t}=Be(Ne.Allocate,e.data);return{accountPubkey:e.keys[0].pubkey,space:t}}static decodeAllocateWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{base:t,seed:n,space:s,programId:i}=Be(Ne.AllocateWithSeed,e.data);return{accountPubkey:e.keys[0].pubkey,basePubkey:new ie(t),seed:n,space:s,programId:new ie(i)}}static decodeAssign(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{programId:t}=Be(Ne.Assign,e.data);return{accountPubkey:e.keys[0].pubkey,programId:new ie(t)}}static decodeAssignWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{base:t,seed:n,programId:s}=Be(Ne.AssignWithSeed,e.data);return{accountPubkey:e.keys[0].pubkey,basePubkey:new ie(t),seed:n,programId:new ie(s)}}static decodeCreateWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{base:t,seed:n,lamports:s,space:i,programId:o}=Be(Ne.CreateWithSeed,e.data);return{fromPubkey:e.keys[0].pubkey,newAccountPubkey:e.keys[1].pubkey,basePubkey:new ie(t),seed:n,lamports:s,space:i,programId:new ie(o)}}static decodeNonceInitialize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{authorized:t}=Be(Ne.InitializeNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,authorizedPubkey:new ie(t)}}static decodeNonceAdvance(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),Be(Ne.AdvanceNonceAccount,e.data),{noncePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey}}static decodeNonceWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,5);const{lamports:t}=Be(Ne.WithdrawNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey,lamports:t}}static decodeNonceAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{authorized:t}=Be(Ne.AuthorizeNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[1].pubkey,newAuthorizedPubkey:new ie(t)}}static checkProgramId(e){if(!e.equals(At.programId))throw new Error("invalid instruction; programId is not SystemProgram")}static checkKeyLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}const Ne=Object.freeze({Create:{index:0,layout:U.struct([U.u32("instruction"),U.ns64("lamports"),U.ns64("space"),Se("programId")])},Assign:{index:1,layout:U.struct([U.u32("instruction"),Se("programId")])},Transfer:{index:2,layout:U.struct([U.u32("instruction"),Nr("lamports")])},CreateWithSeed:{index:3,layout:U.struct([U.u32("instruction"),Se("base"),Hn("seed"),U.ns64("lamports"),U.ns64("space"),Se("programId")])},AdvanceNonceAccount:{index:4,layout:U.struct([U.u32("instruction")])},WithdrawNonceAccount:{index:5,layout:U.struct([U.u32("instruction"),U.ns64("lamports")])},InitializeNonceAccount:{index:6,layout:U.struct([U.u32("instruction"),Se("authorized")])},AuthorizeNonceAccount:{index:7,layout:U.struct([U.u32("instruction"),Se("authorized")])},Allocate:{index:8,layout:U.struct([U.u32("instruction"),U.ns64("space")])},AllocateWithSeed:{index:9,layout:U.struct([U.u32("instruction"),Se("base"),Hn("seed"),U.ns64("space"),Se("programId")])},AssignWithSeed:{index:10,layout:U.struct([U.u32("instruction"),Se("base"),Hn("seed"),Se("programId")])},TransferWithSeed:{index:11,layout:U.struct([U.u32("instruction"),Nr("lamports"),Hn("seed"),Se("programId")])},UpgradeNonceAccount:{index:12,layout:U.struct([U.u32("instruction")])}});class At{constructor(){}static createAccount(e){const t=Ne.Create,n=ke(t,{lamports:e.lamports,space:e.space,programId:ve(e.programId.toBuffer())});return new Me({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:n})}static transfer(e){let t,n;if("basePubkey"in e){const s=Ne.TransferWithSeed;t=ke(s,{lamports:BigInt(e.lamports),seed:e.seed,programId:ve(e.programId.toBuffer())}),n=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}else{const s=Ne.Transfer;t=ke(s,{lamports:BigInt(e.lamports)}),n=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}return new Me({keys:n,programId:this.programId,data:t})}static assign(e){let t,n;if("basePubkey"in e){const s=Ne.AssignWithSeed;t=ke(s,{base:ve(e.basePubkey.toBuffer()),seed:e.seed,programId:ve(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const s=Ne.Assign;t=ke(s,{programId:ve(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new Me({keys:n,programId:this.programId,data:t})}static createAccountWithSeed(e){const t=Ne.CreateWithSeed,n=ke(t,{base:ve(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:ve(e.programId.toBuffer())});let s=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey.equals(e.fromPubkey)||s.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new Me({keys:s,programId:this.programId,data:n})}static createNonceAccount(e){const t=new _e;"basePubkey"in e&&"seed"in e?t.add(At.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:ra,programId:this.programId})):t.add(At.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,lamports:e.lamports,space:ra,programId:this.programId}));const n={noncePubkey:e.noncePubkey,authorizedPubkey:e.authorizedPubkey};return t.add(this.nonceInitialize(n)),t}static nonceInitialize(e){const t=Ne.InitializeNonceAccount,n=ke(t,{authorized:ve(e.authorizedPubkey.toBuffer())}),s={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Mi,isSigner:!1,isWritable:!1},{pubkey:Pr,isSigner:!1,isWritable:!1}],programId:this.programId,data:n};return new Me(s)}static nonceAdvance(e){const t=Ne.AdvanceNonceAccount,n=ke(t),s={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Mi,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n};return new Me(s)}static nonceWithdraw(e){const t=Ne.WithdrawNonceAccount,n=ke(t,{lamports:e.lamports});return new Me({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:Mi,isSigner:!1,isWritable:!1},{pubkey:Pr,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static nonceAuthorize(e){const t=Ne.AuthorizeNonceAccount,n=ke(t,{authorized:ve(e.newAuthorizedPubkey.toBuffer())});return new Me({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static allocate(e){let t,n;if("basePubkey"in e){const s=Ne.AllocateWithSeed;t=ke(s,{base:ve(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:ve(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const s=Ne.Allocate;t=ke(s,{space:e.space}),n=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new Me({keys:n,programId:this.programId,data:t})}}At.programId=new ie("11111111111111111111111111111111");const fp=On-300;class ir{constructor(){}static getMinNumSignatures(e){return 2*(Math.ceil(e/ir.chunkSize)+1+1)}static async load(e,t,n,s,i){{const S=await e.getMinimumBalanceForRentExemption(i.length),E=await e.getAccountInfo(n.publicKey,"confirmed");let b=null;if(E!==null){if(E.executable)return console.error("Program load failed, account is already executable"),!1;E.data.length!==i.length&&(b=b||new _e,b.add(At.allocate({accountPubkey:n.publicKey,space:i.length}))),E.owner.equals(s)||(b=b||new _e,b.add(At.assign({accountPubkey:n.publicKey,programId:s}))),E.lamports<S&&(b=b||new _e,b.add(At.transfer({fromPubkey:t.publicKey,toPubkey:n.publicKey,lamports:S-E.lamports})))}else b=new _e().add(At.createAccount({fromPubkey:t.publicKey,newAccountPubkey:n.publicKey,lamports:S>0?S:1,space:i.length,programId:s}));b!==null&&await na(e,b,[t,n],{commitment:"confirmed"})}const o=U.struct([U.u32("instruction"),U.u32("offset"),U.u32("bytesLength"),U.u32("bytesLengthPadding"),U.seq(U.u8("byte"),U.offset(U.u32(),-8),"bytes")]),a=ir.chunkSize;let u=0,g=i,w=[];for(;g.length>0;){const S=g.slice(0,a),E=pe.Buffer.alloc(a+16);o.encode({instruction:0,offset:u,bytes:S,bytesLength:0,bytesLengthPadding:0},E);const b=new _e().add({keys:[{pubkey:n.publicKey,isSigner:!0,isWritable:!0}],programId:s,data:E});w.push(na(e,b,[t,n],{commitment:"confirmed"})),e._rpcEndpoint.includes("solana.com")&&await Kn(1e3/4),u+=a,g=g.slice(a)}await Promise.all(w);{const S=U.struct([U.u32("instruction")]),E=pe.Buffer.alloc(S.span);S.encode({instruction:1},E);const b=new _e().add({keys:[{pubkey:n.publicKey,isSigner:!0,isWritable:!0},{pubkey:Pr,isSigner:!1,isWritable:!1}],programId:s,data:E}),A="processed",x=await e.sendTransaction(b,[t,n],{preflightCommitment:A}),{context:C,value:P}=await e.confirmTransaction({signature:x,lastValidBlockHeight:b.lastValidBlockHeight,blockhash:b.recentBlockhash},A);if(P.err)throw new Error(`Transaction ${x} failed (${JSON.stringify(P)})`);for(;;){try{if(await e.getSlot({commitment:A})>C.slot)break}catch{}await new Promise(W=>setTimeout(W,Math.round(af/2)))}}return!0}}ir.chunkSize=fp;const hp=new ie("BPFLoader2111111111111111111111111111111111");class dp{static getMinNumSignatures(e){return ir.getMinNumSignatures(e)}static load(e,t,n,s,i){return ir.load(e,t,n,i,s)}}function pp(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var po,eu;function gp(){if(eu)return po;eu=1;var r=Object.prototype.toString,e=Object.keys||function(n){var s=[];for(var i in n)s.push(i);return s};function t(n,s){var i,o,a,u,g,w,S;if(n===!0)return"true";if(n===!1)return"false";switch(typeof n){case"object":if(n===null)return null;if(n.toJSON&&typeof n.toJSON=="function")return t(n.toJSON(),s);if(S=r.call(n),S==="[object Array]"){for(a="[",o=n.length-1,i=0;i<o;i++)a+=t(n[i],!0)+",";return o>-1&&(a+=t(n[i],!0)),a+"]"}else if(S==="[object Object]"){for(u=e(n).sort(),o=u.length,a="",i=0;i<o;)g=u[i],w=t(n[g],!1),w!==void 0&&(a&&(a+=","),a+=JSON.stringify(g)+":"+w),i++;return"{"+a+"}"}else return JSON.stringify(n);case"function":case"undefined":return s?null:void 0;case"string":return JSON.stringify(n);default:return isFinite(n)?n:null}}return po=function(n){var s=t(n,!1);if(s!==void 0)return""+s},po}var yp=gp(),tu=pp(yp);const Kr=32;function go(r){let e=0;for(;r>1;)r/=2,e++;return e}function mp(r){return r===0?1:(r--,r|=r>>1,r|=r>>2,r|=r>>4,r|=r>>8,r|=r>>16,r|=r>>32,r+1)}class lf{constructor(e,t,n,s,i){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=e,this.leaderScheduleSlotOffset=t,this.warmup=n,this.firstNormalEpoch=s,this.firstNormalSlot=i}getEpoch(e){return this.getEpochAndSlotIndex(e)[0]}getEpochAndSlotIndex(e){if(e<this.firstNormalSlot){const t=go(mp(e+Kr+1))-go(Kr)-1,n=this.getSlotsInEpoch(t),s=e-(n-Kr);return[t,s]}else{const t=e-this.firstNormalSlot,n=Math.floor(t/this.slotsPerEpoch),s=this.firstNormalEpoch+n,i=t%this.slotsPerEpoch;return[s,i]}}getFirstSlotInEpoch(e){return e<=this.firstNormalEpoch?(Math.pow(2,e)-1)*Kr:(e-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(e){return this.getFirstSlotInEpoch(e)+this.getSlotsInEpoch(e)-1}getSlotsInEpoch(e){return e<this.firstNormalEpoch?Math.pow(2,e+go(Kr)):this.slotsPerEpoch}}var wp=globalThis.fetch;class bp extends v0{constructor(e,t,n){const s=i=>{const o=w0(i,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...t});return"socket"in o?this.underlyingSocket=o.socket:this.underlyingSocket=o,o};super(s,e,t,n),this.underlyingSocket=void 0}call(...e){const t=this.underlyingSocket?.readyState;return t===1?super.call(...e):Promise.reject(new Error("Tried to call a JSON-RPC method `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}notify(...e){const t=this.underlyingSocket?.readyState;return t===1?super.notify(...e):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}}function vp(r,e){let t;try{t=r.layout.decode(e)}catch(n){throw new Error("invalid instruction; "+n)}if(t.typeIndex!==r.index)throw new Error(`invalid account data; account type mismatch ${t.typeIndex} != ${r.index}`);return t}const nu=56;class ia{constructor(e){this.key=void 0,this.state=void 0,this.key=e.key,this.state=e.state}isActive(){const e=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===e}static deserialize(e){const t=vp(Sp,e),n=e.length-nu;Ie(n>=0,"lookup table is invalid"),Ie(n%32===0,"lookup table is invalid");const s=n/32,{addresses:i}=U.struct([U.seq(Se(),s,"addresses")]).decode(e.slice(nu));return{deactivationSlot:t.deactivationSlot,lastExtendedSlot:t.lastExtendedSlot,lastExtendedSlotStartIndex:t.lastExtendedStartIndex,authority:t.authority.length!==0?new ie(t.authority[0]):void 0,addresses:i.map(o=>new ie(o))}}}const Sp={index:1,layout:U.struct([U.u32("typeIndex"),Nr("deactivationSlot"),U.nu64("lastExtendedSlot"),U.u8("lastExtendedStartIndex"),U.u8(),U.seq(Se(),U.offset(U.u8(),-1),"authority")])},Ep=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function kp(r){const e=r.match(Ep);if(e==null)throw TypeError(`Failed to validate endpoint URL \`${r}\``);const[t,n,s,i]=e,o=r.startsWith("https:")?"wss:":"ws:",a=s==null?null:parseInt(s.slice(1),10),u=a==null?"":`:${a+1}`;return`${o}//${n}${u}${i}`}const Ve=pi(Fa(ie),re(),r=>new ie(r)),ff=Da([re(),$e("base64")]),Ja=pi(Fa(pe.Buffer),ff,r=>pe.Buffer.from(r[0],"base64")),hf=30*1e3;function _p(r){if(/^https?:/.test(r)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return r}function Le(r){let e,t;if(typeof r=="string")e=r;else if(r){const{commitment:n,...s}=r;e=n,t=s}return{commitment:e,config:t}}function ru(r){return r.map(e=>"memcmp"in e?{...e,memcmp:{...e.memcmp,encoding:e.memcmp.encoding??"base58"}}:e)}function df(r){return Ot([te({jsonrpc:$e("2.0"),id:re(),result:r}),te({jsonrpc:$e("2.0"),id:re(),error:te({code:Ur(),message:re(),data:fe($d())})})])}const Ap=df(Ur());function be(r){return pi(df(r),Ap,e=>"error"in e?e:{...e,result:se(e.result,r)})}function Xe(r){return be(te({context:te({slot:j()}),value:r}))}function vs(r){return te({context:te({slot:j()}),value:r})}function yo(r,e){return r===0?new rr({header:e.header,staticAccountKeys:e.accountKeys.map(t=>new ie(t)),recentBlockhash:e.recentBlockhash,compiledInstructions:e.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:Bt.decode(t.data)})),addressTableLookups:e.addressTableLookups}):new Xt(e)}const Ip=te({foundation:j(),foundationTerm:j(),initial:j(),taper:j(),terminal:j()}),xp=be(ae(ce(te({epoch:j(),effectiveSlot:j(),amount:j(),postBalance:j(),commission:fe(ce(j()))})))),Bp=ae(te({slot:j(),prioritizationFee:j()})),Rp=te({total:j(),validator:j(),foundation:j(),epoch:j()}),Mp=te({epoch:j(),slotIndex:j(),slotsInEpoch:j(),absoluteSlot:j(),blockHeight:fe(j()),transactionCount:fe(j())}),Tp=te({slotsPerEpoch:j(),leaderScheduleSlotOffset:j(),warmup:un(),firstNormalEpoch:j(),firstNormalSlot:j()}),Cp=Dl(re(),ae(j())),ar=ce(Ot([te({}),re()])),Lp=te({err:ar}),Pp=$e("receivedSignature"),Np=te({"solana-core":re(),"feature-set":fe(j())}),Op=te({program:re(),programId:Ve,parsed:Ur()}),Up=te({programId:Ve,accounts:ae(Ve),data:re()}),iu=Xe(te({err:ce(Ot([te({}),re()])),logs:ce(ae(re())),accounts:fe(ce(ae(ce(te({executable:un(),owner:re(),lamports:j(),data:ae(re()),rentEpoch:fe(j())}))))),unitsConsumed:fe(j()),returnData:fe(ce(te({programId:re(),data:Da([re(),$e("base64")])}))),innerInstructions:fe(ce(ae(te({index:j(),instructions:ae(Ot([Op,Up]))}))))})),Wp=Xe(te({byIdentity:Dl(re(),ae(j())),range:te({firstSlot:j(),lastSlot:j()})}));function zp(r,e,t,n,s,i){const o=t||wp;let a;i!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let u;return n&&(u=async(w,S)=>{const E=await new Promise((b,A)=>{try{n(w,S,(x,C)=>b([x,C]))}catch(x){A(x)}});return await o(...E)}),new p0(async(w,S)=>{const E={method:"POST",body:w,agent:a,headers:Object.assign({"Content-Type":"application/json"},e||{},zg)};try{let b=5,A,x=500;for(;u?A=await u(r,E):A=await o(r,E),!(A.status!==429||s===!0||(b-=1,b===0));)console.error(`Server responded with ${A.status} ${A.statusText}.  Retrying after ${x}ms delay...`),await Kn(x),x*=2;const C=await A.text();A.ok?S(null,C):S(new Error(`${A.status} ${A.statusText}: ${C}`))}catch(b){b instanceof Error&&S(b)}},{})}function Fp(r){return(e,t)=>new Promise((n,s)=>{r.request(e,t,(i,o)=>{if(i){s(i);return}n(o)})})}function Dp(r){return e=>new Promise((t,n)=>{e.length===0&&t([]);const s=e.map(i=>r.request(i.methodName,i.args));r.request(s,(i,o)=>{if(i){n(i);return}t(o)})})}const Kp=be(Ip),qp=be(Rp),$p=be(Bp),Vp=be(Mp),Hp=be(Tp),jp=be(Cp),Gp=be(j()),Yp=Xe(te({total:j(),circulating:j(),nonCirculating:j(),nonCirculatingAccounts:ae(Ve)})),sa=te({amount:re(),uiAmount:ce(j()),decimals:j(),uiAmountString:fe(re())}),Zp=Xe(ae(te({address:Ve,amount:re(),uiAmount:ce(j()),decimals:j(),uiAmountString:fe(re())}))),Jp=Xe(ae(te({pubkey:Ve,account:te({executable:un(),owner:Ve,lamports:j(),data:Ja,rentEpoch:j()})}))),oa=te({program:re(),parsed:Ur(),space:j()}),Xp=Xe(ae(te({pubkey:Ve,account:te({executable:un(),owner:Ve,lamports:j(),data:oa,rentEpoch:j()})}))),Qp=Xe(ae(te({lamports:j(),address:Ve}))),oi=te({executable:un(),owner:Ve,lamports:j(),data:Ja,rentEpoch:j()}),eg=te({pubkey:Ve,account:oi}),tg=pi(Ot([Fa(pe.Buffer),oa]),Ot([ff,oa]),r=>Array.isArray(r)?se(r,Ja):r),aa=te({executable:un(),owner:Ve,lamports:j(),data:tg,rentEpoch:j()}),ng=te({pubkey:Ve,account:aa}),rg=te({state:Ot([$e("active"),$e("inactive"),$e("activating"),$e("deactivating")]),active:j(),inactive:j()}),ig=be(ae(te({signature:re(),slot:j(),err:ar,memo:ce(re()),blockTime:fe(ce(j()))}))),sg=be(ae(te({signature:re(),slot:j(),err:ar,memo:ce(re()),blockTime:fe(ce(j()))}))),og=te({subscription:j(),result:vs(oi)}),ag=te({pubkey:Ve,account:oi}),cg=te({subscription:j(),result:vs(ag)}),ug=te({parent:j(),slot:j(),root:j()}),lg=te({subscription:j(),result:ug}),fg=Ot([te({type:Ot([$e("firstShredReceived"),$e("completed"),$e("optimisticConfirmation"),$e("root")]),slot:j(),timestamp:j()}),te({type:$e("createdBank"),parent:j(),slot:j(),timestamp:j()}),te({type:$e("frozen"),slot:j(),timestamp:j(),stats:te({numTransactionEntries:j(),numSuccessfulTransactions:j(),numFailedTransactions:j(),maxTransactionsPerEntry:j()})}),te({type:$e("dead"),slot:j(),timestamp:j(),err:re()})]),hg=te({subscription:j(),result:fg}),dg=te({subscription:j(),result:vs(Ot([Lp,Pp]))}),pg=te({subscription:j(),result:j()}),gg=te({pubkey:re(),gossip:ce(re()),tpu:ce(re()),rpc:ce(re()),version:ce(re())}),su=te({votePubkey:re(),nodePubkey:re(),activatedStake:j(),epochVoteAccount:un(),epochCredits:ae(Da([j(),j(),j()])),commission:j(),lastVote:j(),rootSlot:ce(j())}),yg=be(te({current:ae(su),delinquent:ae(su)})),mg=Ot([$e("processed"),$e("confirmed"),$e("finalized")]),wg=te({slot:j(),confirmations:ce(j()),err:ar,confirmationStatus:fe(mg)}),bg=Xe(ae(ce(wg))),vg=be(j()),pf=te({accountKey:Ve,writableIndexes:ae(j()),readonlyIndexes:ae(j())}),Xa=te({signatures:ae(re()),message:te({accountKeys:ae(re()),header:te({numRequiredSignatures:j(),numReadonlySignedAccounts:j(),numReadonlyUnsignedAccounts:j()}),instructions:ae(te({accounts:ae(j()),data:re(),programIdIndex:j()})),recentBlockhash:re(),addressTableLookups:fe(ae(pf))})}),gf=te({pubkey:Ve,signer:un(),writable:un(),source:fe(Ot([$e("transaction"),$e("lookupTable")]))}),yf=te({accountKeys:ae(gf),signatures:ae(re())}),mf=te({parsed:Ur(),program:re(),programId:Ve}),wf=te({accounts:ae(Ve),data:re(),programId:Ve}),Sg=Ot([wf,mf]),Eg=Ot([te({parsed:Ur(),program:re(),programId:re()}),te({accounts:ae(re()),data:re(),programId:re()})]),bf=pi(Sg,Eg,r=>"accounts"in r?se(r,wf):se(r,mf)),vf=te({signatures:ae(re()),message:te({accountKeys:ae(gf),instructions:ae(bf),recentBlockhash:re(),addressTableLookups:fe(ce(ae(pf)))})}),rs=te({accountIndex:j(),mint:re(),owner:fe(re()),programId:fe(re()),uiTokenAmount:sa}),Sf=te({writable:ae(Ve),readonly:ae(Ve)}),Ss=te({err:ar,fee:j(),innerInstructions:fe(ce(ae(te({index:j(),instructions:ae(te({accounts:ae(j()),data:re(),programIdIndex:j()}))})))),preBalances:ae(j()),postBalances:ae(j()),logMessages:fe(ce(ae(re()))),preTokenBalances:fe(ce(ae(rs))),postTokenBalances:fe(ce(ae(rs))),loadedAddresses:fe(Sf),computeUnitsConsumed:fe(j()),costUnits:fe(j())}),Qa=te({err:ar,fee:j(),innerInstructions:fe(ce(ae(te({index:j(),instructions:ae(bf)})))),preBalances:ae(j()),postBalances:ae(j()),logMessages:fe(ce(ae(re()))),preTokenBalances:fe(ce(ae(rs))),postTokenBalances:fe(ce(ae(rs))),loadedAddresses:fe(Sf),computeUnitsConsumed:fe(j()),costUnits:fe(j())}),Wr=Ot([$e(0),$e("legacy")]),cr=te({pubkey:re(),lamports:j(),postBalance:ce(j()),rewardType:ce(re()),commission:fe(ce(j()))}),kg=be(ce(te({blockhash:re(),previousBlockhash:re(),parentSlot:j(),transactions:ae(te({transaction:Xa,meta:ce(Ss),version:fe(Wr)})),rewards:fe(ae(cr)),blockTime:ce(j()),blockHeight:ce(j())}))),_g=be(ce(te({blockhash:re(),previousBlockhash:re(),parentSlot:j(),rewards:fe(ae(cr)),blockTime:ce(j()),blockHeight:ce(j())}))),Ag=be(ce(te({blockhash:re(),previousBlockhash:re(),parentSlot:j(),transactions:ae(te({transaction:yf,meta:ce(Ss),version:fe(Wr)})),rewards:fe(ae(cr)),blockTime:ce(j()),blockHeight:ce(j())}))),Ig=be(ce(te({blockhash:re(),previousBlockhash:re(),parentSlot:j(),transactions:ae(te({transaction:vf,meta:ce(Qa),version:fe(Wr)})),rewards:fe(ae(cr)),blockTime:ce(j()),blockHeight:ce(j())}))),xg=be(ce(te({blockhash:re(),previousBlockhash:re(),parentSlot:j(),transactions:ae(te({transaction:yf,meta:ce(Qa),version:fe(Wr)})),rewards:fe(ae(cr)),blockTime:ce(j()),blockHeight:ce(j())}))),Bg=be(ce(te({blockhash:re(),previousBlockhash:re(),parentSlot:j(),rewards:fe(ae(cr)),blockTime:ce(j()),blockHeight:ce(j())}))),Rg=be(ce(te({blockhash:re(),previousBlockhash:re(),parentSlot:j(),transactions:ae(te({transaction:Xa,meta:ce(Ss)})),rewards:fe(ae(cr)),blockTime:ce(j())}))),ou=be(ce(te({blockhash:re(),previousBlockhash:re(),parentSlot:j(),signatures:ae(re()),blockTime:ce(j())}))),mo=be(ce(te({slot:j(),meta:ce(Ss),blockTime:fe(ce(j())),transaction:Xa,version:fe(Wr)}))),Ii=be(ce(te({slot:j(),transaction:vf,meta:ce(Qa),blockTime:fe(ce(j())),version:fe(Wr)}))),Mg=Xe(te({blockhash:re(),lastValidBlockHeight:j()})),Tg=Xe(un()),Cg=te({slot:j(),numTransactions:j(),numSlots:j(),samplePeriodSecs:j()}),Lg=be(ae(Cg)),Pg=Xe(ce(te({feeCalculator:te({lamportsPerSignature:j()})}))),Ng=be(re()),Og=be(re()),Ug=te({err:ar,logs:ae(re()),signature:re()}),Wg=te({result:vs(Ug),subscription:j()}),zg={"solana-client":"js/1.0.0-maintenance"};class Ef{constructor(e,t){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const g={};return async w=>{const{commitment:S,config:E}=Le(w),b=this._buildArgs([],S,void 0,E),A=tu(b);return g[A]=g[A]??(async()=>{try{const x=await this._rpcRequest("getBlockHeight",b),C=se(x,be(j()));if("error"in C)throw new le(C.error,"failed to get block height information");return C.result}finally{delete g[A]}})(),await g[A]}})();let n,s,i,o,a,u;t&&typeof t=="string"?this._commitment=t:t&&(this._commitment=t.commitment,this._confirmTransactionInitialTimeout=t.confirmTransactionInitialTimeout,n=t.wsEndpoint,s=t.httpHeaders,i=t.fetch,o=t.fetchMiddleware,a=t.disableRetryOnRateLimit,u=t.httpAgent),this._rpcEndpoint=_p(e),this._rpcWsEndpoint=n||kp(e),this._rpcClient=zp(e,s,i,o,a,u),this._rpcRequest=Fp(this._rpcClient),this._rpcBatchRequest=Dp(this._rpcClient),this._rpcWebSocket=new bp(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(e,t){const{commitment:n,config:s}=Le(t),i=this._buildArgs([e.toBase58()],n,void 0,s),o=await this._rpcRequest("getBalance",i),a=se(o,Xe(j()));if("error"in a)throw new le(a.error,`failed to get balance for ${e.toBase58()}`);return a.result}async getBalance(e,t){return await this.getBalanceAndContext(e,t).then(n=>n.value).catch(n=>{throw new Error("failed to get balance of account "+e.toBase58()+": "+n)})}async getBlockTime(e){const t=await this._rpcRequest("getBlockTime",[e]),n=se(t,be(ce(j())));if("error"in n)throw new le(n.error,`failed to get block time for slot ${e}`);return n.result}async getMinimumLedgerSlot(){const e=await this._rpcRequest("minimumLedgerSlot",[]),t=se(e,be(j()));if("error"in t)throw new le(t.error,"failed to get minimum ledger slot");return t.result}async getFirstAvailableBlock(){const e=await this._rpcRequest("getFirstAvailableBlock",[]),t=se(e,Gp);if("error"in t)throw new le(t.error,"failed to get first available block");return t.result}async getSupply(e){let t={};typeof e=="string"?t={commitment:e}:e?t={...e,commitment:e&&e.commitment||this.commitment}:t={commitment:this.commitment};const n=await this._rpcRequest("getSupply",[t]),s=se(n,Yp);if("error"in s)throw new le(s.error,"failed to get supply");return s.result}async getTokenSupply(e,t){const n=this._buildArgs([e.toBase58()],t),s=await this._rpcRequest("getTokenSupply",n),i=se(s,Xe(sa));if("error"in i)throw new le(i.error,"failed to get token supply");return i.result}async getTokenAccountBalance(e,t){const n=this._buildArgs([e.toBase58()],t),s=await this._rpcRequest("getTokenAccountBalance",n),i=se(s,Xe(sa));if("error"in i)throw new le(i.error,"failed to get token account balance");return i.result}async getTokenAccountsByOwner(e,t,n){const{commitment:s,config:i}=Le(n);let o=[e.toBase58()];"mint"in t?o.push({mint:t.mint.toBase58()}):o.push({programId:t.programId.toBase58()});const a=this._buildArgs(o,s,"base64",i),u=await this._rpcRequest("getTokenAccountsByOwner",a),g=se(u,Jp);if("error"in g)throw new le(g.error,`failed to get token accounts owned by account ${e.toBase58()}`);return g.result}async getParsedTokenAccountsByOwner(e,t,n){let s=[e.toBase58()];"mint"in t?s.push({mint:t.mint.toBase58()}):s.push({programId:t.programId.toBase58()});const i=this._buildArgs(s,n,"jsonParsed"),o=await this._rpcRequest("getTokenAccountsByOwner",i),a=se(o,Xp);if("error"in a)throw new le(a.error,`failed to get token accounts owned by account ${e.toBase58()}`);return a.result}async getLargestAccounts(e){const t={...e,commitment:e&&e.commitment||this.commitment},n=t.filter||t.commitment?[t]:[],s=await this._rpcRequest("getLargestAccounts",n),i=se(s,Qp);if("error"in i)throw new le(i.error,"failed to get largest accounts");return i.result}async getTokenLargestAccounts(e,t){const n=this._buildArgs([e.toBase58()],t),s=await this._rpcRequest("getTokenLargestAccounts",n),i=se(s,Zp);if("error"in i)throw new le(i.error,"failed to get token largest accounts");return i.result}async getAccountInfoAndContext(e,t){const{commitment:n,config:s}=Le(t),i=this._buildArgs([e.toBase58()],n,"base64",s),o=await this._rpcRequest("getAccountInfo",i),a=se(o,Xe(ce(oi)));if("error"in a)throw new le(a.error,`failed to get info about account ${e.toBase58()}`);return a.result}async getParsedAccountInfo(e,t){const{commitment:n,config:s}=Le(t),i=this._buildArgs([e.toBase58()],n,"jsonParsed",s),o=await this._rpcRequest("getAccountInfo",i),a=se(o,Xe(ce(aa)));if("error"in a)throw new le(a.error,`failed to get info about account ${e.toBase58()}`);return a.result}async getAccountInfo(e,t){try{return(await this.getAccountInfoAndContext(e,t)).value}catch(n){throw new Error("failed to get info about account "+e.toBase58()+": "+n)}}async getMultipleParsedAccounts(e,t){const{commitment:n,config:s}=Le(t),i=e.map(g=>g.toBase58()),o=this._buildArgs([i],n,"jsonParsed",s),a=await this._rpcRequest("getMultipleAccounts",o),u=se(a,Xe(ae(ce(aa))));if("error"in u)throw new le(u.error,`failed to get info for accounts ${i}`);return u.result}async getMultipleAccountsInfoAndContext(e,t){const{commitment:n,config:s}=Le(t),i=e.map(g=>g.toBase58()),o=this._buildArgs([i],n,"base64",s),a=await this._rpcRequest("getMultipleAccounts",o),u=se(a,Xe(ae(ce(oi))));if("error"in u)throw new le(u.error,`failed to get info for accounts ${i}`);return u.result}async getMultipleAccountsInfo(e,t){return(await this.getMultipleAccountsInfoAndContext(e,t)).value}async getStakeActivation(e,t,n){const{commitment:s,config:i}=Le(t),o=this._buildArgs([e.toBase58()],s,void 0,{...i,epoch:n??i?.epoch}),a=await this._rpcRequest("getStakeActivation",o),u=se(a,be(rg));if("error"in u)throw new le(u.error,`failed to get Stake Activation ${e.toBase58()}`);return u.result}async getProgramAccounts(e,t){const{commitment:n,config:s}=Le(t),{encoding:i,...o}=s||{},a=this._buildArgs([e.toBase58()],n,i||"base64",{...o,...o.filters?{filters:ru(o.filters)}:null}),u=await this._rpcRequest("getProgramAccounts",a),g=ae(eg),w=o.withContext===!0?se(u,Xe(g)):se(u,be(g));if("error"in w)throw new le(w.error,`failed to get accounts owned by program ${e.toBase58()}`);return w.result}async getParsedProgramAccounts(e,t){const{commitment:n,config:s}=Le(t),i=this._buildArgs([e.toBase58()],n,"jsonParsed",s),o=await this._rpcRequest("getProgramAccounts",i),a=se(o,be(ae(ng)));if("error"in a)throw new le(a.error,`failed to get accounts owned by program ${e.toBase58()}`);return a.result}async confirmTransaction(e,t){let n;if(typeof e=="string")n=e;else{const i=e;if(i.abortSignal?.aborted)return Promise.reject(i.abortSignal.reason);n=i.signature}let s;try{s=Bt.decode(n)}catch{throw new Error("signature must be base58 encoded: "+n)}return Ie(s.length===64,"signature has invalid length"),typeof e=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:t||this.commitment,signature:n}):"lastValidBlockHeight"in e?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t||this.commitment,strategy:e}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:t||this.commitment,strategy:e})}getCancellationPromise(e){return new Promise((t,n)=>{e!=null&&(e.aborted?n(e.reason):e.addEventListener("abort",()=>{n(e.reason)}))})}getTransactionConfirmationPromise({commitment:e,signature:t}){let n,s,i=!1;const o=new Promise((u,g)=>{try{n=this.onSignature(t,(S,E)=>{n=void 0;const b={context:E,value:S};u({__type:dn.PROCESSED,response:b})},e);const w=new Promise(S=>{n==null?S():s=this._onSubscriptionStateChange(n,E=>{E==="subscribed"&&S()})});(async()=>{if(await w,i)return;const S=await this.getSignatureStatus(t);if(i||S==null)return;const{context:E,value:b}=S;if(b!=null)if(b?.err)g(b.err);else{switch(e){case"confirmed":case"single":case"singleGossip":{if(b.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(b.confirmationStatus==="processed"||b.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}i=!0,u({__type:dn.PROCESSED,response:{context:E,value:b}})}})()}catch(w){g(w)}});return{abortConfirmation:()=>{s&&(s(),s=void 0),n!=null&&(this.removeSignatureListener(n),n=void 0)},confirmationPromise:o}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e,strategy:{abortSignal:t,lastValidBlockHeight:n,signature:s}}){let i=!1;const o=new Promise(S=>{const E=async()=>{try{return await this.getBlockHeight(e)}catch{return-1}};(async()=>{let b=await E();if(!i){for(;b<=n;)if(await Kn(1e3),i||(b=await E(),i))return;S({__type:dn.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:a,confirmationPromise:u}=this.getTransactionConfirmationPromise({commitment:e,signature:s}),g=this.getCancellationPromise(t);let w;try{const S=await Promise.race([g,u,o]);if(S.__type===dn.PROCESSED)w=S.response;else throw new Ga(s)}finally{i=!0,a()}return w}async confirmTransactionUsingDurableNonceStrategy({commitment:e,strategy:{abortSignal:t,minContextSlot:n,nonceAccountPubkey:s,nonceValue:i,signature:o}}){let a=!1;const u=new Promise(b=>{let A=i,x=null;const C=async()=>{try{const{context:P,value:W}=await this.getNonceAndContext(s,{commitment:e,minContextSlot:n});return x=P.slot,W?.nonce}catch{return A}};(async()=>{if(A=await C(),!a)for(;;){if(i!==A){b({__type:dn.NONCE_INVALID,slotInWhichNonceDidAdvance:x});return}if(await Kn(2e3),a||(A=await C(),a))return}})()}),{abortConfirmation:g,confirmationPromise:w}=this.getTransactionConfirmationPromise({commitment:e,signature:o}),S=this.getCancellationPromise(t);let E;try{const b=await Promise.race([S,w,u]);if(b.__type===dn.PROCESSED)E=b.response;else{let A;for(;;){const x=await this.getSignatureStatus(o);if(x==null)break;if(x.context.slot<(b.slotInWhichNonceDidAdvance??n)){await Kn(400);continue}A=x;break}if(A?.value){const x=e||"finalized",{confirmationStatus:C}=A.value;switch(x){case"processed":case"recent":if(C!=="processed"&&C!=="confirmed"&&C!=="finalized")throw new Er(o);break;case"confirmed":case"single":case"singleGossip":if(C!=="confirmed"&&C!=="finalized")throw new Er(o);break;case"finalized":case"max":case"root":if(C!=="finalized")throw new Er(o);break;default:}E={context:A.context,value:{err:A.value.err}}}else throw new Er(o)}}finally{a=!0,g()}return E}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:e,signature:t}){let n;const s=new Promise(u=>{let g=this._confirmTransactionInitialTimeout||6e4;switch(e){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{g=this._confirmTransactionInitialTimeout||3e4;break}}n=setTimeout(()=>u({__type:dn.TIMED_OUT,timeoutMs:g}),g)}),{abortConfirmation:i,confirmationPromise:o}=this.getTransactionConfirmationPromise({commitment:e,signature:t});let a;try{const u=await Promise.race([o,s]);if(u.__type===dn.PROCESSED)a=u.response;else throw new Ya(t,u.timeoutMs/1e3)}finally{clearTimeout(n),i()}return a}async getClusterNodes(){const e=await this._rpcRequest("getClusterNodes",[]),t=se(e,be(ae(gg)));if("error"in t)throw new le(t.error,"failed to get cluster nodes");return t.result}async getVoteAccounts(e){const t=this._buildArgs([],e),n=await this._rpcRequest("getVoteAccounts",t),s=se(n,yg);if("error"in s)throw new le(s.error,"failed to get vote accounts");return s.result}async getSlot(e){const{commitment:t,config:n}=Le(e),s=this._buildArgs([],t,void 0,n),i=await this._rpcRequest("getSlot",s),o=se(i,be(j()));if("error"in o)throw new le(o.error,"failed to get slot");return o.result}async getSlotLeader(e){const{commitment:t,config:n}=Le(e),s=this._buildArgs([],t,void 0,n),i=await this._rpcRequest("getSlotLeader",s),o=se(i,be(re()));if("error"in o)throw new le(o.error,"failed to get slot leader");return o.result}async getSlotLeaders(e,t){const n=[e,t],s=await this._rpcRequest("getSlotLeaders",n),i=se(s,be(ae(Ve)));if("error"in i)throw new le(i.error,"failed to get slot leaders");return i.result}async getSignatureStatus(e,t){const{context:n,value:s}=await this.getSignatureStatuses([e],t);Ie(s.length===1);const i=s[0];return{context:n,value:i}}async getSignatureStatuses(e,t){const n=[e];t&&n.push(t);const s=await this._rpcRequest("getSignatureStatuses",n),i=se(s,bg);if("error"in i)throw new le(i.error,"failed to get signature status");return i.result}async getTransactionCount(e){const{commitment:t,config:n}=Le(e),s=this._buildArgs([],t,void 0,n),i=await this._rpcRequest("getTransactionCount",s),o=se(i,be(j()));if("error"in o)throw new le(o.error,"failed to get transaction count");return o.result}async getTotalSupply(e){return(await this.getSupply({commitment:e,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(e){const t=this._buildArgs([],e),n=await this._rpcRequest("getInflationGovernor",t),s=se(n,Kp);if("error"in s)throw new le(s.error,"failed to get inflation");return s.result}async getInflationReward(e,t,n){const{commitment:s,config:i}=Le(n),o=this._buildArgs([e.map(g=>g.toBase58())],s,void 0,{...i,epoch:t??i?.epoch}),a=await this._rpcRequest("getInflationReward",o),u=se(a,xp);if("error"in u)throw new le(u.error,"failed to get inflation reward");return u.result}async getInflationRate(){const e=await this._rpcRequest("getInflationRate",[]),t=se(e,qp);if("error"in t)throw new le(t.error,"failed to get inflation rate");return t.result}async getEpochInfo(e){const{commitment:t,config:n}=Le(e),s=this._buildArgs([],t,void 0,n),i=await this._rpcRequest("getEpochInfo",s),o=se(i,Vp);if("error"in o)throw new le(o.error,"failed to get epoch info");return o.result}async getEpochSchedule(){const e=await this._rpcRequest("getEpochSchedule",[]),t=se(e,Hp);if("error"in t)throw new le(t.error,"failed to get epoch schedule");const n=t.result;return new lf(n.slotsPerEpoch,n.leaderScheduleSlotOffset,n.warmup,n.firstNormalEpoch,n.firstNormalSlot)}async getLeaderSchedule(){const e=await this._rpcRequest("getLeaderSchedule",[]),t=se(e,jp);if("error"in t)throw new le(t.error,"failed to get leader schedule");return t.result}async getMinimumBalanceForRentExemption(e,t){const n=this._buildArgs([e],t),s=await this._rpcRequest("getMinimumBalanceForRentExemption",n),i=se(s,vg);return"error"in i?(console.warn("Unable to fetch minimum balance for rent exemption"),0):i.result}async getRecentBlockhashAndContext(e){const{context:t,value:{blockhash:n}}=await this.getLatestBlockhashAndContext(e);return{context:t,value:{blockhash:n,feeCalculator:{get lamportsPerSignature(){throw new Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON(){return{}}}}}}async getRecentPerformanceSamples(e){const t=await this._rpcRequest("getRecentPerformanceSamples",e?[e]:[]),n=se(t,Lg);if("error"in n)throw new le(n.error,"failed to get recent performance samples");return n.result}async getFeeCalculatorForBlockhash(e,t){const n=this._buildArgs([e],t),s=await this._rpcRequest("getFeeCalculatorForBlockhash",n),i=se(s,Pg);if("error"in i)throw new le(i.error,"failed to get fee calculator");const{context:o,value:a}=i.result;return{context:o,value:a!==null?a.feeCalculator:null}}async getFeeForMessage(e,t){const n=ve(e.serialize()).toString("base64"),s=this._buildArgs([n],t),i=await this._rpcRequest("getFeeForMessage",s),o=se(i,Xe(ce(j())));if("error"in o)throw new le(o.error,"failed to get fee for message");if(o.result===null)throw new Error("invalid blockhash");return o.result}async getRecentPrioritizationFees(e){const t=e?.lockedWritableAccounts?.map(o=>o.toBase58()),n=t?.length?[t]:[],s=await this._rpcRequest("getRecentPrioritizationFees",n),i=se(s,$p);if("error"in i)throw new le(i.error,"failed to get recent prioritization fees");return i.result}async getRecentBlockhash(e){try{return(await this.getRecentBlockhashAndContext(e)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhash(e){try{return(await this.getLatestBlockhashAndContext(e)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhashAndContext(e){const{commitment:t,config:n}=Le(e),s=this._buildArgs([],t,void 0,n),i=await this._rpcRequest("getLatestBlockhash",s),o=se(i,Mg);if("error"in o)throw new le(o.error,"failed to get latest blockhash");return o.result}async isBlockhashValid(e,t){const{commitment:n,config:s}=Le(t),i=this._buildArgs([e],n,void 0,s),o=await this._rpcRequest("isBlockhashValid",i),a=se(o,Tg);if("error"in a)throw new le(a.error,"failed to determine if the blockhash `"+e+"`is valid");return a.result}async getVersion(){const e=await this._rpcRequest("getVersion",[]),t=se(e,be(Np));if("error"in t)throw new le(t.error,"failed to get version");return t.result}async getGenesisHash(){const e=await this._rpcRequest("getGenesisHash",[]),t=se(e,be(re()));if("error"in t)throw new le(t.error,"failed to get genesis hash");return t.result}async getBlock(e,t){const{commitment:n,config:s}=Le(t),i=this._buildArgsAtLeastConfirmed([e],n,void 0,s),o=await this._rpcRequest("getBlock",i);try{switch(s?.transactionDetails){case"accounts":{const a=se(o,Ag);if("error"in a)throw a.error;return a.result}case"none":{const a=se(o,_g);if("error"in a)throw a.error;return a.result}default:{const a=se(o,kg);if("error"in a)throw a.error;const{result:u}=a;return u?{...u,transactions:u.transactions.map(({transaction:g,meta:w,version:S})=>({meta:w,transaction:{...g,message:yo(S,g.message)},version:S}))}:null}}}catch(a){throw new le(a,"failed to get confirmed block")}}async getParsedBlock(e,t){const{commitment:n,config:s}=Le(t),i=this._buildArgsAtLeastConfirmed([e],n,"jsonParsed",s),o=await this._rpcRequest("getBlock",i);try{switch(s?.transactionDetails){case"accounts":{const a=se(o,xg);if("error"in a)throw a.error;return a.result}case"none":{const a=se(o,Bg);if("error"in a)throw a.error;return a.result}default:{const a=se(o,Ig);if("error"in a)throw a.error;return a.result}}}catch(a){throw new le(a,"failed to get block")}}async getBlockProduction(e){let t,n;if(typeof e=="string")n=e;else if(e){const{commitment:a,...u}=e;n=a,t=u}const s=this._buildArgs([],n,"base64",t),i=await this._rpcRequest("getBlockProduction",s),o=se(i,Wp);if("error"in o)throw new le(o.error,"failed to get block production information");return o.result}async getTransaction(e,t){const{commitment:n,config:s}=Le(t),i=this._buildArgsAtLeastConfirmed([e],n,void 0,s),o=await this._rpcRequest("getTransaction",i),a=se(o,mo);if("error"in a)throw new le(a.error,"failed to get transaction");const u=a.result;return u&&{...u,transaction:{...u.transaction,message:yo(u.version,u.transaction.message)}}}async getParsedTransaction(e,t){const{commitment:n,config:s}=Le(t),i=this._buildArgsAtLeastConfirmed([e],n,"jsonParsed",s),o=await this._rpcRequest("getTransaction",i),a=se(o,Ii);if("error"in a)throw new le(a.error,"failed to get transaction");return a.result}async getParsedTransactions(e,t){const{commitment:n,config:s}=Le(t),i=e.map(u=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([u],n,"jsonParsed",s)}));return(await this._rpcBatchRequest(i)).map(u=>{const g=se(u,Ii);if("error"in g)throw new le(g.error,"failed to get transactions");return g.result})}async getTransactions(e,t){const{commitment:n,config:s}=Le(t),i=e.map(u=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([u],n,void 0,s)}));return(await this._rpcBatchRequest(i)).map(u=>{const g=se(u,mo);if("error"in g)throw new le(g.error,"failed to get transactions");const w=g.result;return w&&{...w,transaction:{...w.transaction,message:yo(w.version,w.transaction.message)}}})}async getConfirmedBlock(e,t){const n=this._buildArgsAtLeastConfirmed([e],t),s=await this._rpcRequest("getBlock",n),i=se(s,Rg);if("error"in i)throw new le(i.error,"failed to get confirmed block");const o=i.result;if(!o)throw new Error("Confirmed block "+e+" not found");const a={...o,transactions:o.transactions.map(({transaction:u,meta:g})=>{const w=new Xt(u.message);return{meta:g,transaction:{...u,message:w}}})};return{...a,transactions:a.transactions.map(({transaction:u,meta:g})=>({meta:g,transaction:_e.populate(u.message,u.signatures)}))}}async getBlocks(e,t,n){const s=this._buildArgsAtLeastConfirmed(t!==void 0?[e,t]:[e],n),i=await this._rpcRequest("getBlocks",s),o=se(i,be(ae(j())));if("error"in o)throw new le(o.error,"failed to get blocks");return o.result}async getBlockSignatures(e,t){const n=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",n),i=se(s,ou);if("error"in i)throw new le(i.error,"failed to get block");const o=i.result;if(!o)throw new Error("Block "+e+" not found");return o}async getConfirmedBlockSignatures(e,t){const n=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",n),i=se(s,ou);if("error"in i)throw new le(i.error,"failed to get confirmed block");const o=i.result;if(!o)throw new Error("Confirmed block "+e+" not found");return o}async getConfirmedTransaction(e,t){const n=this._buildArgsAtLeastConfirmed([e],t),s=await this._rpcRequest("getTransaction",n),i=se(s,mo);if("error"in i)throw new le(i.error,"failed to get transaction");const o=i.result;if(!o)return o;const a=new Xt(o.transaction.message),u=o.transaction.signatures;return{...o,transaction:_e.populate(a,u)}}async getParsedConfirmedTransaction(e,t){const n=this._buildArgsAtLeastConfirmed([e],t,"jsonParsed"),s=await this._rpcRequest("getTransaction",n),i=se(s,Ii);if("error"in i)throw new le(i.error,"failed to get confirmed transaction");return i.result}async getParsedConfirmedTransactions(e,t){const n=e.map(o=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([o],t,"jsonParsed")}));return(await this._rpcBatchRequest(n)).map(o=>{const a=se(o,Ii);if("error"in a)throw new le(a.error,"failed to get confirmed transactions");return a.result})}async getConfirmedSignaturesForAddress(e,t,n){let s={},i=await this.getFirstAvailableBlock();for(;!("until"in s)&&(t--,!(t<=0||t<i));)try{const u=await this.getConfirmedBlockSignatures(t,"finalized");u.signatures.length>0&&(s.until=u.signatures[u.signatures.length-1].toString())}catch(u){if(u instanceof Error&&u.message.includes("skipped"))continue;throw u}let o=await this.getSlot("finalized");for(;!("before"in s)&&(n++,!(n>o));)try{const u=await this.getConfirmedBlockSignatures(n);u.signatures.length>0&&(s.before=u.signatures[u.signatures.length-1].toString())}catch(u){if(u instanceof Error&&u.message.includes("skipped"))continue;throw u}return(await this.getConfirmedSignaturesForAddress2(e,s)).map(u=>u.signature)}async getConfirmedSignaturesForAddress2(e,t,n){const s=this._buildArgsAtLeastConfirmed([e.toBase58()],n,void 0,t),i=await this._rpcRequest("getConfirmedSignaturesForAddress2",s),o=se(i,ig);if("error"in o)throw new le(o.error,"failed to get confirmed signatures for address");return o.result}async getSignaturesForAddress(e,t,n){const s=this._buildArgsAtLeastConfirmed([e.toBase58()],n,void 0,t),i=await this._rpcRequest("getSignaturesForAddress",s),o=se(i,sg);if("error"in o)throw new le(o.error,"failed to get signatures for address");return o.result}async getAddressLookupTable(e,t){const{context:n,value:s}=await this.getAccountInfoAndContext(e,t);let i=null;return s!==null&&(i=new ia({key:e,state:ia.deserialize(s.data)})),{context:n,value:i}}async getNonceAndContext(e,t){const{context:n,value:s}=await this.getAccountInfoAndContext(e,t);let i=null;return s!==null&&(i=bs.fromAccountData(s.data)),{context:n,value:i}}async getNonce(e,t){return await this.getNonceAndContext(e,t).then(n=>n.value).catch(n=>{throw new Error("failed to get nonce for account "+e.toBase58()+": "+n)})}async requestAirdrop(e,t){const n=await this._rpcRequest("requestAirdrop",[e.toBase58(),t]),s=se(n,Ng);if("error"in s)throw new le(s.error,`airdrop to ${e.toBase58()} failed`);return s.result}async _blockhashWithExpiryBlockHeight(e){if(!e){for(;this._pollingBlockhash;)await Kn(100);const n=Date.now()-this._blockhashInfo.lastFetch>=hf;if(this._blockhashInfo.latestBlockhash!==null&&!n)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const e=Date.now(),t=this._blockhashInfo.latestBlockhash,n=t?t.blockhash:null;for(let s=0;s<50;s++){const i=await this.getLatestBlockhash("finalized");if(n!==i.blockhash)return this._blockhashInfo={latestBlockhash:i,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},i;await Kn(af/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-e}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(e){const{commitment:t,config:n}=Le(e),s=this._buildArgs([],t,"base64",n),i=await this._rpcRequest("getStakeMinimumDelegation",s),o=se(i,Xe(j()));if("error"in o)throw new le(o.error,"failed to get stake minimum delegation");return o.result}async simulateTransaction(e,t,n){if("message"in e){const x=e.serialize(),C=pe.Buffer.from(x).toString("base64");if(Array.isArray(t)||n!==void 0)throw new Error("Invalid arguments");const P=t||{};P.encoding="base64","commitment"in P||(P.commitment=this.commitment),t&&typeof t=="object"&&"innerInstructions"in t&&(P.innerInstructions=t.innerInstructions);const W=[C,P],N=await this._rpcRequest("simulateTransaction",W),V=se(N,iu);if("error"in V)throw new Error("failed to simulate transaction: "+V.error.message);return V.result}let s;if(e instanceof _e){let A=e;s=new _e,s.feePayer=A.feePayer,s.instructions=e.instructions,s.nonceInfo=A.nonceInfo,s.signatures=A.signatures}else s=_e.populate(e),s._message=s._json=void 0;if(t!==void 0&&!Array.isArray(t))throw new Error("Invalid arguments");const i=t;if(s.nonceInfo&&i)s.sign(...i);else{let A=this._disableBlockhashCaching;for(;;){const x=await this._blockhashWithExpiryBlockHeight(A);if(s.lastValidBlockHeight=x.lastValidBlockHeight,s.recentBlockhash=x.blockhash,!i)break;if(s.sign(...i),!s.signature)throw new Error("!signature");const C=s.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(C)&&!this._blockhashInfo.transactionSignatures.includes(C)){this._blockhashInfo.simulatedSignatures.push(C);break}else A=!0}}const o=s._compile(),a=o.serialize(),g=s._serialize(a).toString("base64"),w={encoding:"base64",commitment:this.commitment};if(n){const A=(Array.isArray(n)?n:o.nonProgramIds()).map(x=>x.toBase58());w.accounts={encoding:"base64",addresses:A}}i&&(w.sigVerify=!0),t&&typeof t=="object"&&"innerInstructions"in t&&(w.innerInstructions=t.innerInstructions);const S=[g,w],E=await this._rpcRequest("simulateTransaction",S),b=se(E,iu);if("error"in b){let A;if("data"in b.error&&(A=b.error.data.logs,A&&Array.isArray(A))){const x=`
    `,C=x+A.join(x);console.error(b.error.message,C)}throw new si({action:"simulate",signature:"",transactionMessage:b.error.message,logs:A})}return b.result}async sendTransaction(e,t,n){if("version"in e){if(t&&Array.isArray(t))throw new Error("Invalid arguments");const o=e.serialize();return await this.sendRawTransaction(o,t)}if(t===void 0||!Array.isArray(t))throw new Error("Invalid arguments");const s=t;if(e.nonceInfo)e.sign(...s);else{let o=this._disableBlockhashCaching;for(;;){const a=await this._blockhashWithExpiryBlockHeight(o);if(e.lastValidBlockHeight=a.lastValidBlockHeight,e.recentBlockhash=a.blockhash,e.sign(...s),!e.signature)throw new Error("!signature");const u=e.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(u))o=!0;else{this._blockhashInfo.transactionSignatures.push(u);break}}}const i=e.serialize();return await this.sendRawTransaction(i,n)}async sendRawTransaction(e,t){const n=ve(e).toString("base64");return await this.sendEncodedTransaction(n,t)}async sendEncodedTransaction(e,t){const n={encoding:"base64"},s=t&&t.skipPreflight,i=s===!0?"processed":t&&t.preflightCommitment||this.commitment;t&&t.maxRetries!=null&&(n.maxRetries=t.maxRetries),t&&t.minContextSlot!=null&&(n.minContextSlot=t.minContextSlot),s&&(n.skipPreflight=s),i&&(n.preflightCommitment=i);const o=[e,n],a=await this._rpcRequest("sendTransaction",o),u=se(a,Og);if("error"in u){let g;throw"data"in u.error&&(g=u.error.data.logs),new si({action:s?"send":"simulate",signature:"",transactionMessage:u.error.message,logs:g})}return u.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(e){this._rpcWebSocketConnected=!1,console.error("ws error:",e.message)}_wsOnClose(e){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),e===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([t,n])=>{this._setSubscription(t,{...n,state:"pending"})})}_setSubscription(e,t){const n=this._subscriptionsByHash[e]?.state;if(this._subscriptionsByHash[e]=t,n!==t.state){const s=this._subscriptionStateChangeCallbacksByHash[e];s&&s.forEach(i=>{try{i(t.state)}catch{}})}}_onSubscriptionStateChange(e,t){const n=this._subscriptionHashByClientSubscriptionId[e];if(n==null)return()=>{};const s=this._subscriptionStateChangeCallbacksByHash[n]||=new Set;return s.add(t),()=>{s.delete(t),s.size===0&&delete this._subscriptionStateChangeCallbacksByHash[n]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(n){n instanceof Error&&console.log(`Error when closing socket connection: ${n.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const e=this._rpcWebSocketGeneration,t=()=>e===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async n=>{const s=this._subscriptionsByHash[n];if(s!==void 0)switch(s.state){case"pending":case"unsubscribed":if(s.callbacks.size===0){delete this._subscriptionsByHash[n],s.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[s.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:i,method:o}=s;try{this._setSubscription(n,{...s,state:"subscribing"});const a=await this._rpcWebSocket.call(o,i);this._setSubscription(n,{...s,serverSubscriptionId:a,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[a]=s.callbacks,await this._updateSubscriptions()}catch(a){if(console.error(`Received ${a instanceof Error?"":"JSON-RPC "}error calling \`${o}\``,{args:i,error:a}),!t())return;this._setSubscription(n,{...s,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":s.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:i,unsubscribeMethod:o}=s;if(this._subscriptionsAutoDisposedByRpc.has(i))this._subscriptionsAutoDisposedByRpc.delete(i);else{this._setSubscription(n,{...s,state:"unsubscribing"}),this._setSubscription(n,{...s,state:"unsubscribing"});try{await this._rpcWebSocket.call(o,[i])}catch(a){if(a instanceof Error&&console.error(`${o} error:`,a.message),!t())return;this._setSubscription(n,{...s,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(n,{...s,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(e,t){const n=this._subscriptionCallbacksByServerSubscriptionId[e];n!==void 0&&n.forEach(s=>{try{s(...t)}catch(i){console.error(i)}})}_wsOnAccountNotification(e){const{result:t,subscription:n}=se(e,og);this._handleServerNotification(n,[t.value,t.context])}_makeSubscription(e,t){const n=this._nextClientSubscriptionId++,s=tu([e.method,t]),i=this._subscriptionsByHash[s];return i===void 0?this._subscriptionsByHash[s]={...e,args:t,callbacks:new Set([e.callback]),state:"pending"}:i.callbacks.add(e.callback),this._subscriptionHashByClientSubscriptionId[n]=s,this._subscriptionDisposeFunctionsByClientSubscriptionId[n]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[n],delete this._subscriptionHashByClientSubscriptionId[n];const o=this._subscriptionsByHash[s];Ie(o!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${n}`),o.callbacks.delete(e.callback),await this._updateSubscriptions()},this._updateSubscriptions(),n}onAccountChange(e,t,n){const{commitment:s,config:i}=Le(n),o=this._buildArgs([e.toBase58()],s||this._commitment||"finalized","base64",i);return this._makeSubscription({callback:t,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},o)}async removeAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"account change")}_wsOnProgramAccountNotification(e){const{result:t,subscription:n}=se(e,cg);this._handleServerNotification(n,[{accountId:t.value.pubkey,accountInfo:t.value.account},t.context])}onProgramAccountChange(e,t,n,s){const{commitment:i,config:o}=Le(n),a=this._buildArgs([e.toBase58()],i||this._commitment||"finalized","base64",o||(s?{filters:ru(s)}:void 0));return this._makeSubscription({callback:t,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},a)}async removeProgramAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"program account change")}onLogs(e,t,n){const s=this._buildArgs([typeof e=="object"?{mentions:[e.toString()]}:e],n||this._commitment||"finalized");return this._makeSubscription({callback:t,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},s)}async removeOnLogsListener(e){await this._unsubscribeClientSubscription(e,"logs")}_wsOnLogsNotification(e){const{result:t,subscription:n}=se(e,Wg);this._handleServerNotification(n,[t.value,t.context])}_wsOnSlotNotification(e){const{result:t,subscription:n}=se(e,lg);this._handleServerNotification(n,[t])}onSlotChange(e){return this._makeSubscription({callback:e,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(e){await this._unsubscribeClientSubscription(e,"slot change")}_wsOnSlotUpdatesNotification(e){const{result:t,subscription:n}=se(e,hg);this._handleServerNotification(n,[t])}onSlotUpdate(e){return this._makeSubscription({callback:e,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(e){await this._unsubscribeClientSubscription(e,"slot update")}async _unsubscribeClientSubscription(e,t){const n=this._subscriptionDisposeFunctionsByClientSubscriptionId[e];n?await n():console.warn(`Ignored unsubscribe request because an active subscription with id \`${e}\` for '${t}' events could not be found.`)}_buildArgs(e,t,n,s){const i=t||this._commitment;if(i||n||s){let o={};n&&(o.encoding=n),i&&(o.commitment=i),s&&(o=Object.assign(o,s)),e.push(o)}return e}_buildArgsAtLeastConfirmed(e,t,n,s){const i=t||this._commitment;if(i&&!["confirmed","finalized"].includes(i))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(e,t,n,s)}_wsOnSignatureNotification(e){const{result:t,subscription:n}=se(e,dg);t.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(n),this._handleServerNotification(n,t.value==="receivedSignature"?[{type:"received"},t.context]:[{type:"status",result:t.value},t.context])}onSignature(e,t,n){const s=this._buildArgs([e],n||this._commitment||"finalized"),i=this._makeSubscription({callback:(o,a)=>{if(o.type==="status"){t(o.result,a);try{this.removeSignatureListener(i)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},s);return i}onSignatureWithOptions(e,t,n){const{commitment:s,...i}={...n,commitment:n&&n.commitment||this._commitment||"finalized"},o=this._buildArgs([e],s,void 0,i),a=this._makeSubscription({callback:(u,g)=>{t(u,g);try{this.removeSignatureListener(a)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return a}async removeSignatureListener(e){await this._unsubscribeClientSubscription(e,"signature result")}_wsOnRootNotification(e){const{result:t,subscription:n}=se(e,pg);this._handleServerNotification(n,[t])}onRootChange(e){return this._makeSubscription({callback:e,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(e){await this._unsubscribeClientSubscription(e,"root change")}}class xr{constructor(e){this._keypair=void 0,this._keypair=e??Jc()}static generate(){return new xr(Jc())}static fromSecretKey(e,t){if(e.byteLength!==64)throw new Error("bad secret key size");const n=e.slice(32,64);if(!t||!t.skipValidation){const s=e.slice(0,32),i=ns(s);for(let o=0;o<32;o++)if(n[o]!==i[o])throw new Error("provided secretKey is invalid")}return new xr({publicKey:n,secretKey:e})}static fromSeed(e){const t=ns(e),n=new Uint8Array(64);return n.set(e),n.set(t,32),new xr({publicKey:t,secretKey:n})}get publicKey(){return new ie(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}const wn=Object.freeze({CreateLookupTable:{index:0,layout:U.struct([U.u32("instruction"),Nr("recentSlot"),U.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:U.struct([U.u32("instruction")])},ExtendLookupTable:{index:2,layout:U.struct([U.u32("instruction"),Nr(),U.seq(Se(),U.offset(U.u32(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:U.struct([U.u32("instruction")])},CloseLookupTable:{index:4,layout:U.struct([U.u32("instruction")])}});class Fg{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=U.u32("instruction").decode(e.data);let s;for(const[i,o]of Object.entries(wn))if(o.index==n){s=i;break}if(!s)throw new Error("Invalid Instruction. Should be a LookupTable Instruction");return s}static decodeCreateLookupTable(e){this.checkProgramId(e.programId),this.checkKeysLength(e.keys,4);const{recentSlot:t}=Be(wn.CreateLookupTable,e.data);return{authority:e.keys[1].pubkey,payer:e.keys[2].pubkey,recentSlot:Number(t)}}static decodeExtendLookupTable(e){if(this.checkProgramId(e.programId),e.keys.length<2)throw new Error(`invalid instruction; found ${e.keys.length} keys, expected at least 2`);const{addresses:t}=Be(wn.ExtendLookupTable,e.data);return{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey,payer:e.keys.length>2?e.keys[2].pubkey:void 0,addresses:t.map(n=>new ie(n))}}static decodeCloseLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,3),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey,recipient:e.keys[2].pubkey}}static decodeFreezeLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,2),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey}}static decodeDeactivateLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,2),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey}}static checkProgramId(e){if(!e.equals(ec.programId))throw new Error("invalid instruction; programId is not AddressLookupTable Program")}static checkKeysLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}class ec{constructor(){}static createLookupTable(e){const[t,n]=ie.findProgramAddressSync([e.authority.toBuffer(),Wl().encode(e.recentSlot)],this.programId),s=wn.CreateLookupTable,i=ke(s,{recentSlot:BigInt(e.recentSlot),bumpSeed:n}),o=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:At.programId,isSigner:!1,isWritable:!1}];return[new Me({programId:this.programId,keys:o,data:i}),t]}static freezeLookupTable(e){const t=wn.FreezeLookupTable,n=ke(t),s=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new Me({programId:this.programId,keys:s,data:n})}static extendLookupTable(e){const t=wn.ExtendLookupTable,n=ke(t,{addresses:e.addresses.map(i=>i.toBytes())}),s=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return e.payer&&s.push({pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:At.programId,isSigner:!1,isWritable:!1}),new Me({programId:this.programId,keys:s,data:n})}static deactivateLookupTable(e){const t=wn.DeactivateLookupTable,n=ke(t),s=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new Me({programId:this.programId,keys:s,data:n})}static closeLookupTable(e){const t=wn.CloseLookupTable,n=ke(t),s=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.recipient,isSigner:!1,isWritable:!0}];return new Me({programId:this.programId,keys:s,data:n})}}ec.programId=new ie("AddressLookupTab1e1111111111111111111111111");class Dg{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=U.u8("instruction").decode(e.data);let s;for(const[i,o]of Object.entries(sn))if(o.index==n){s=i;break}if(!s)throw new Error("Instruction type incorrect; not a ComputeBudgetInstruction");return s}static decodeRequestUnits(e){this.checkProgramId(e.programId);const{units:t,additionalFee:n}=Be(sn.RequestUnits,e.data);return{units:t,additionalFee:n}}static decodeRequestHeapFrame(e){this.checkProgramId(e.programId);const{bytes:t}=Be(sn.RequestHeapFrame,e.data);return{bytes:t}}static decodeSetComputeUnitLimit(e){this.checkProgramId(e.programId);const{units:t}=Be(sn.SetComputeUnitLimit,e.data);return{units:t}}static decodeSetComputeUnitPrice(e){this.checkProgramId(e.programId);const{microLamports:t}=Be(sn.SetComputeUnitPrice,e.data);return{microLamports:t}}static checkProgramId(e){if(!e.equals(tc.programId))throw new Error("invalid instruction; programId is not ComputeBudgetProgram")}}const sn=Object.freeze({RequestUnits:{index:0,layout:U.struct([U.u8("instruction"),U.u32("units"),U.u32("additionalFee")])},RequestHeapFrame:{index:1,layout:U.struct([U.u8("instruction"),U.u32("bytes")])},SetComputeUnitLimit:{index:2,layout:U.struct([U.u8("instruction"),U.u32("units")])},SetComputeUnitPrice:{index:3,layout:U.struct([U.u8("instruction"),Nr("microLamports")])}});class tc{constructor(){}static requestUnits(e){const t=sn.RequestUnits,n=ke(t,e);return new Me({keys:[],programId:this.programId,data:n})}static requestHeapFrame(e){const t=sn.RequestHeapFrame,n=ke(t,e);return new Me({keys:[],programId:this.programId,data:n})}static setComputeUnitLimit(e){const t=sn.SetComputeUnitLimit,n=ke(t,e);return new Me({keys:[],programId:this.programId,data:n})}static setComputeUnitPrice(e){const t=sn.SetComputeUnitPrice,n=ke(t,{microLamports:BigInt(e.microLamports)});return new Me({keys:[],programId:this.programId,data:n})}}tc.programId=new ie("ComputeBudget111111111111111111111111111111");const au=64,cu=32,uu=64,lu=U.struct([U.u8("numSignatures"),U.u8("padding"),U.u16("signatureOffset"),U.u16("signatureInstructionIndex"),U.u16("publicKeyOffset"),U.u16("publicKeyInstructionIndex"),U.u16("messageDataOffset"),U.u16("messageDataSize"),U.u16("messageInstructionIndex")]);class Es{constructor(){}static createInstructionWithPublicKey(e){const{publicKey:t,message:n,signature:s,instructionIndex:i}=e;Ie(t.length===cu,`Public Key must be ${cu} bytes but received ${t.length} bytes`),Ie(s.length===uu,`Signature must be ${uu} bytes but received ${s.length} bytes`);const o=lu.span,a=o+t.length,u=a+s.length,g=1,w=pe.Buffer.alloc(u+n.length),S=i??65535;return lu.encode({numSignatures:g,padding:0,signatureOffset:a,signatureInstructionIndex:S,publicKeyOffset:o,publicKeyInstructionIndex:S,messageDataOffset:u,messageDataSize:n.length,messageInstructionIndex:S},w),w.fill(t,o),w.fill(s,a),w.fill(n,u),new Me({keys:[],programId:Es.programId,data:w})}static createInstructionWithPrivateKey(e){const{privateKey:t,message:n,instructionIndex:s}=e;Ie(t.length===au,`Private key must be ${au} bytes but received ${t.length} bytes`);try{const i=xr.fromSecretKey(t),o=i.publicKey.toBytes(),a=Ha(n,i.secretKey);return this.createInstructionWithPublicKey({publicKey:o,message:n,signature:a,instructionIndex:s})}catch(i){throw new Error(`Error creating instruction; ${i}`)}}}Es.programId=new ie("Ed25519SigVerify111111111111111111111111111");const Kg=(r,e)=>{const t=Va.sign(r,e);return[t.toCompactRawBytes(),t.recovery]};Va.utils.isValidPrivateKey;const qg=Va.getPublicKey,fu=32,wo=20,hu=64,$g=11,bo=U.struct([U.u8("numSignatures"),U.u16("signatureOffset"),U.u8("signatureInstructionIndex"),U.u16("ethAddressOffset"),U.u8("ethAddressInstructionIndex"),U.u16("messageDataOffset"),U.u16("messageDataSize"),U.u8("messageInstructionIndex"),U.blob(20,"ethAddress"),U.blob(64,"signature"),U.u8("recoveryId")]);class Br{constructor(){}static publicKeyToEthAddress(e){Ie(e.length===hu,`Public key must be ${hu} bytes but received ${e.length} bytes`);try{return pe.Buffer.from(Gc(ve(e))).slice(-wo)}catch(t){throw new Error(`Error constructing Ethereum address: ${t}`)}}static createInstructionWithPublicKey(e){const{publicKey:t,message:n,signature:s,recoveryId:i,instructionIndex:o}=e;return Br.createInstructionWithEthAddress({ethAddress:Br.publicKeyToEthAddress(t),message:n,signature:s,recoveryId:i,instructionIndex:o})}static createInstructionWithEthAddress(e){const{ethAddress:t,message:n,signature:s,recoveryId:i,instructionIndex:o=0}=e;let a;typeof t=="string"?t.startsWith("0x")?a=pe.Buffer.from(t.substr(2),"hex"):a=pe.Buffer.from(t,"hex"):a=t,Ie(a.length===wo,`Address must be ${wo} bytes but received ${a.length} bytes`);const u=1+$g,g=u,w=u+a.length,S=w+s.length+1,E=1,b=pe.Buffer.alloc(bo.span+n.length);return bo.encode({numSignatures:E,signatureOffset:w,signatureInstructionIndex:o,ethAddressOffset:g,ethAddressInstructionIndex:o,messageDataOffset:S,messageDataSize:n.length,messageInstructionIndex:o,signature:ve(s),ethAddress:ve(a),recoveryId:i},b),b.fill(ve(n),bo.span),new Me({keys:[],programId:Br.programId,data:b})}static createInstructionWithPrivateKey(e){const{privateKey:t,message:n,instructionIndex:s}=e;Ie(t.length===fu,`Private key must be ${fu} bytes but received ${t.length} bytes`);try{const i=ve(t),o=qg(i,!1).slice(1),a=pe.Buffer.from(Gc(ve(n))),[u,g]=Kg(a,i);return this.createInstructionWithPublicKey({publicKey:o,message:n,signature:u,recoveryId:g,instructionIndex:s})}catch(i){throw new Error(`Error creating instruction; ${i}`)}}}Br.programId=new ie("KeccakSecp256k11111111111111111111111111111");var kf;const _f=new ie("StakeConfig11111111111111111111111111111111");class Af{constructor(e,t){this.staker=void 0,this.withdrawer=void 0,this.staker=e,this.withdrawer=t}}class gi{constructor(e,t,n){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=t,this.custodian=n}}kf=gi;gi.default=new kf(0,0,ie.default);class Vg{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=U.u32("instruction").decode(e.data);let s;for(const[i,o]of Object.entries(_t))if(o.index==n){s=i;break}if(!s)throw new Error("Instruction type incorrect; not a StakeInstruction");return s}static decodeInitialize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{authorized:t,lockup:n}=Be(_t.Initialize,e.data);return{stakePubkey:e.keys[0].pubkey,authorized:new Af(new ie(t.staker),new ie(t.withdrawer)),lockup:new gi(n.unixTimestamp,n.epoch,new ie(n.custodian))}}static decodeDelegate(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,6),Be(_t.Delegate,e.data),{stakePubkey:e.keys[0].pubkey,votePubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[5].pubkey}}static decodeAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{newAuthorized:t,stakeAuthorizationType:n}=Be(_t.Authorize,e.data),s={stakePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey,newAuthorizedPubkey:new ie(t),stakeAuthorizationType:{index:n}};return e.keys.length>3&&(s.custodianPubkey=e.keys[3].pubkey),s}static decodeAuthorizeWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{newAuthorized:t,stakeAuthorizationType:n,authoritySeed:s,authorityOwner:i}=Be(_t.AuthorizeWithSeed,e.data),o={stakePubkey:e.keys[0].pubkey,authorityBase:e.keys[1].pubkey,authoritySeed:s,authorityOwner:new ie(i),newAuthorizedPubkey:new ie(t),stakeAuthorizationType:{index:n}};return e.keys.length>3&&(o.custodianPubkey=e.keys[3].pubkey),o}static decodeSplit(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:t}=Be(_t.Split,e.data);return{stakePubkey:e.keys[0].pubkey,splitStakePubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[2].pubkey,lamports:t}}static decodeMerge(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),Be(_t.Merge,e.data),{stakePubkey:e.keys[0].pubkey,sourceStakePubKey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey}}static decodeWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,5);const{lamports:t}=Be(_t.Withdraw,e.data),n={stakePubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey,lamports:t};return e.keys.length>5&&(n.custodianPubkey=e.keys[5].pubkey),n}static decodeDeactivate(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),Be(_t.Deactivate,e.data),{stakePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey}}static checkProgramId(e){if(!e.equals(ks.programId))throw new Error("invalid instruction; programId is not StakeProgram")}static checkKeyLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}const _t=Object.freeze({Initialize:{index:0,layout:U.struct([U.u32("instruction"),Z0(),J0()])},Authorize:{index:1,layout:U.struct([U.u32("instruction"),Se("newAuthorized"),U.u32("stakeAuthorizationType")])},Delegate:{index:2,layout:U.struct([U.u32("instruction")])},Split:{index:3,layout:U.struct([U.u32("instruction"),U.ns64("lamports")])},Withdraw:{index:4,layout:U.struct([U.u32("instruction"),U.ns64("lamports")])},Deactivate:{index:5,layout:U.struct([U.u32("instruction")])},Merge:{index:7,layout:U.struct([U.u32("instruction")])},AuthorizeWithSeed:{index:8,layout:U.struct([U.u32("instruction"),Se("newAuthorized"),U.u32("stakeAuthorizationType"),Hn("authoritySeed"),Se("authorityOwner")])}}),Hg=Object.freeze({Staker:{index:0},Withdrawer:{index:1}});class ks{constructor(){}static initialize(e){const{stakePubkey:t,authorized:n,lockup:s}=e,i=s||gi.default,o=_t.Initialize,a=ke(o,{authorized:{staker:ve(n.staker.toBuffer()),withdrawer:ve(n.withdrawer.toBuffer())},lockup:{unixTimestamp:i.unixTimestamp,epoch:i.epoch,custodian:ve(i.custodian.toBuffer())}}),u={keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:Pr,isSigner:!1,isWritable:!1}],programId:this.programId,data:a};return new Me(u)}static createAccountWithSeed(e){const t=new _e;t.add(At.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:this.space,programId:this.programId}));const{stakePubkey:n,authorized:s,lockup:i}=e;return t.add(this.initialize({stakePubkey:n,authorized:s,lockup:i}))}static createAccount(e){const t=new _e;t.add(At.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,lamports:e.lamports,space:this.space,programId:this.programId}));const{stakePubkey:n,authorized:s,lockup:i}=e;return t.add(this.initialize({stakePubkey:n,authorized:s,lockup:i}))}static delegate(e){const{stakePubkey:t,authorizedPubkey:n,votePubkey:s}=e,i=_t.Delegate,o=ke(i);return new _e().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!1},{pubkey:tn,isSigner:!1,isWritable:!1},{pubkey:Ti,isSigner:!1,isWritable:!1},{pubkey:_f,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}static authorize(e){const{stakePubkey:t,authorizedPubkey:n,newAuthorizedPubkey:s,stakeAuthorizationType:i,custodianPubkey:o}=e,a=_t.Authorize,u=ke(a,{newAuthorized:ve(s.toBuffer()),stakeAuthorizationType:i.index}),g=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:tn,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}];return o&&g.push({pubkey:o,isSigner:!0,isWritable:!1}),new _e().add({keys:g,programId:this.programId,data:u})}static authorizeWithSeed(e){const{stakePubkey:t,authorityBase:n,authoritySeed:s,authorityOwner:i,newAuthorizedPubkey:o,stakeAuthorizationType:a,custodianPubkey:u}=e,g=_t.AuthorizeWithSeed,w=ke(g,{newAuthorized:ve(o.toBuffer()),stakeAuthorizationType:a.index,authoritySeed:s,authorityOwner:ve(i.toBuffer())}),S=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1},{pubkey:tn,isSigner:!1,isWritable:!1}];return u&&S.push({pubkey:u,isSigner:!0,isWritable:!1}),new _e().add({keys:S,programId:this.programId,data:w})}static splitInstruction(e){const{stakePubkey:t,authorizedPubkey:n,splitStakePubkey:s,lamports:i}=e,o=_t.Split,a=ke(o,{lamports:i});return new Me({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:a})}static split(e,t){const n=new _e;return n.add(At.createAccount({fromPubkey:e.authorizedPubkey,newAccountPubkey:e.splitStakePubkey,lamports:t,space:this.space,programId:this.programId})),n.add(this.splitInstruction(e))}static splitWithSeed(e,t){const{stakePubkey:n,authorizedPubkey:s,splitStakePubkey:i,basePubkey:o,seed:a,lamports:u}=e,g=new _e;return g.add(At.allocate({accountPubkey:i,basePubkey:o,seed:a,space:this.space,programId:this.programId})),t&&t>0&&g.add(At.transfer({fromPubkey:e.authorizedPubkey,toPubkey:i,lamports:t})),g.add(this.splitInstruction({stakePubkey:n,authorizedPubkey:s,splitStakePubkey:i,lamports:u}))}static merge(e){const{stakePubkey:t,sourceStakePubKey:n,authorizedPubkey:s}=e,i=_t.Merge,o=ke(i);return new _e().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:tn,isSigner:!1,isWritable:!1},{pubkey:Ti,isSigner:!1,isWritable:!1},{pubkey:s,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}static withdraw(e){const{stakePubkey:t,authorizedPubkey:n,toPubkey:s,lamports:i,custodianPubkey:o}=e,a=_t.Withdraw,u=ke(a,{lamports:i}),g=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:tn,isSigner:!1,isWritable:!1},{pubkey:Ti,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}];return o&&g.push({pubkey:o,isSigner:!0,isWritable:!1}),new _e().add({keys:g,programId:this.programId,data:u})}static deactivate(e){const{stakePubkey:t,authorizedPubkey:n}=e,s=_t.Deactivate,i=ke(s);return new _e().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:tn,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}}ks.programId=new ie("Stake11111111111111111111111111111111111111");ks.space=200;class If{constructor(e,t,n,s){this.nodePubkey=void 0,this.authorizedVoter=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.nodePubkey=e,this.authorizedVoter=t,this.authorizedWithdrawer=n,this.commission=s}}class jg{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=U.u32("instruction").decode(e.data);let s;for(const[i,o]of Object.entries(on))if(o.index==n){s=i;break}if(!s)throw new Error("Instruction type incorrect; not a VoteInstruction");return s}static decodeInitializeAccount(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,4);const{voteInit:t}=Be(on.InitializeAccount,e.data);return{votePubkey:e.keys[0].pubkey,nodePubkey:e.keys[3].pubkey,voteInit:new If(new ie(t.nodePubkey),new ie(t.authorizedVoter),new ie(t.authorizedWithdrawer),t.commission)}}static decodeAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{newAuthorized:t,voteAuthorizationType:n}=Be(on.Authorize,e.data);return{votePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey,newAuthorizedPubkey:new ie(t),voteAuthorizationType:{index:n}}}static decodeAuthorizeWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:t,currentAuthorityDerivedKeySeed:n,newAuthorized:s,voteAuthorizationType:i}}=Be(on.AuthorizeWithSeed,e.data);return{currentAuthorityDerivedKeyBasePubkey:e.keys[2].pubkey,currentAuthorityDerivedKeyOwnerPubkey:new ie(t),currentAuthorityDerivedKeySeed:n,newAuthorizedPubkey:new ie(s),voteAuthorizationType:{index:i},votePubkey:e.keys[0].pubkey}}static decodeWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:t}=Be(on.Withdraw,e.data);return{votePubkey:e.keys[0].pubkey,authorizedWithdrawerPubkey:e.keys[2].pubkey,lamports:t,toPubkey:e.keys[1].pubkey}}static checkProgramId(e){if(!e.equals(zr.programId))throw new Error("invalid instruction; programId is not VoteProgram")}static checkKeyLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}const on=Object.freeze({InitializeAccount:{index:0,layout:U.struct([U.u32("instruction"),X0()])},Authorize:{index:1,layout:U.struct([U.u32("instruction"),Se("newAuthorized"),U.u32("voteAuthorizationType")])},Withdraw:{index:3,layout:U.struct([U.u32("instruction"),U.ns64("lamports")])},UpdateValidatorIdentity:{index:4,layout:U.struct([U.u32("instruction")])},AuthorizeWithSeed:{index:10,layout:U.struct([U.u32("instruction"),Q0()])}}),Gg=Object.freeze({Voter:{index:0},Withdrawer:{index:1}});class zr{constructor(){}static initializeAccount(e){const{votePubkey:t,nodePubkey:n,voteInit:s}=e,i=on.InitializeAccount,o=ke(i,{voteInit:{nodePubkey:ve(s.nodePubkey.toBuffer()),authorizedVoter:ve(s.authorizedVoter.toBuffer()),authorizedWithdrawer:ve(s.authorizedWithdrawer.toBuffer()),commission:s.commission}}),a={keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:Pr,isSigner:!1,isWritable:!1},{pubkey:tn,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:o};return new Me(a)}static createAccount(e){const t=new _e;return t.add(At.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.votePubkey,lamports:e.lamports,space:this.space,programId:this.programId})),t.add(this.initializeAccount({votePubkey:e.votePubkey,nodePubkey:e.voteInit.nodePubkey,voteInit:e.voteInit}))}static authorize(e){const{votePubkey:t,authorizedPubkey:n,newAuthorizedPubkey:s,voteAuthorizationType:i}=e,o=on.Authorize,a=ke(o,{newAuthorized:ve(s.toBuffer()),voteAuthorizationType:i.index}),u=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:tn,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}];return new _e().add({keys:u,programId:this.programId,data:a})}static authorizeWithSeed(e){const{currentAuthorityDerivedKeyBasePubkey:t,currentAuthorityDerivedKeyOwnerPubkey:n,currentAuthorityDerivedKeySeed:s,newAuthorizedPubkey:i,voteAuthorizationType:o,votePubkey:a}=e,u=on.AuthorizeWithSeed,g=ke(u,{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:ve(n.toBuffer()),currentAuthorityDerivedKeySeed:s,newAuthorized:ve(i.toBuffer()),voteAuthorizationType:o.index}}),w=[{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:tn,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!0,isWritable:!1}];return new _e().add({keys:w,programId:this.programId,data:g})}static withdraw(e){const{votePubkey:t,authorizedWithdrawerPubkey:n,lamports:s,toPubkey:i}=e,o=on.Withdraw,a=ke(o,{lamports:s}),u=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}];return new _e().add({keys:u,programId:this.programId,data:a})}static safeWithdraw(e,t,n){if(e.lamports>t-n)throw new Error("Withdraw will leave vote account with insufficient funds.");return zr.withdraw(e)}static updateValidatorIdentity(e){const{votePubkey:t,authorizedWithdrawerPubkey:n,nodePubkey:s}=e,i=on.UpdateValidatorIdentity,o=ke(i),a=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!0,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}];return new _e().add({keys:a,programId:this.programId,data:o})}}zr.programId=new ie("Vote111111111111111111111111111111111111111");zr.space=3762;const xf=new ie("Va1idator1nfo111111111111111111111111111111"),Yg=te({name:re(),website:fe(re()),details:fe(re()),iconUrl:fe(re()),keybaseUsername:fe(re())});class nc{constructor(e,t){this.key=void 0,this.info=void 0,this.key=e,this.info=t}static fromConfigData(e){let t=[...e];if(zt(t)!==2)return null;const s=[];for(let i=0;i<2;i++){const o=new ie(Ft(t,0,cn)),a=rn(t)===1;s.push({publicKey:o,isSigner:a})}if(s[0].publicKey.equals(xf)&&s[1].isSigner){const i=Hn().decode(pe.Buffer.from(t)),o=JSON.parse(i);return zl(o,Yg),new nc(s[1].publicKey,o)}return null}}const Zg=new ie("Vote111111111111111111111111111111111111111"),Jg=U.struct([Se("nodePubkey"),Se("authorizedWithdrawer"),U.u8("commission"),U.nu64(),U.seq(U.struct([U.nu64("slot"),U.u32("confirmationCount")]),U.offset(U.u32(),-8),"votes"),U.u8("rootSlotValid"),U.nu64("rootSlot"),U.nu64(),U.seq(U.struct([U.nu64("epoch"),Se("authorizedVoter")]),U.offset(U.u32(),-8),"authorizedVoters"),U.struct([U.seq(U.struct([Se("authorizedPubkey"),U.nu64("epochOfLastAuthorizedSwitch"),U.nu64("targetEpoch")]),32,"buf"),U.nu64("idx"),U.u8("isEmpty")],"priorVoters"),U.nu64(),U.seq(U.struct([U.nu64("epoch"),U.nu64("credits"),U.nu64("prevCredits")]),U.offset(U.u32(),-8),"epochCredits"),U.struct([U.nu64("slot"),U.nu64("timestamp")],"lastTimestamp")]);class rc{constructor(e){this.nodePubkey=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.rootSlot=void 0,this.votes=void 0,this.authorizedVoters=void 0,this.priorVoters=void 0,this.epochCredits=void 0,this.lastTimestamp=void 0,this.nodePubkey=e.nodePubkey,this.authorizedWithdrawer=e.authorizedWithdrawer,this.commission=e.commission,this.rootSlot=e.rootSlot,this.votes=e.votes,this.authorizedVoters=e.authorizedVoters,this.priorVoters=e.priorVoters,this.epochCredits=e.epochCredits,this.lastTimestamp=e.lastTimestamp}static fromAccountData(e){const n=Jg.decode(ve(e),4);let s=n.rootSlot;return n.rootSlotValid||(s=null),new rc({nodePubkey:new ie(n.nodePubkey),authorizedWithdrawer:new ie(n.authorizedWithdrawer),commission:n.commission,votes:n.votes,rootSlot:s,authorizedVoters:n.authorizedVoters.map(Xg),priorVoters:Qg(n.priorVoters),epochCredits:n.epochCredits,lastTimestamp:n.lastTimestamp})}}function Xg({authorizedVoter:r,epoch:e}){return{epoch:e,authorizedVoter:new ie(r)}}function du({authorizedPubkey:r,epochOfLastAuthorizedSwitch:e,targetEpoch:t}){return{authorizedPubkey:new ie(r),epochOfLastAuthorizedSwitch:e,targetEpoch:t}}function Qg({buf:r,idx:e,isEmpty:t}){return t?[]:[...r.slice(e+1).map(du),...r.slice(0,e).map(du)]}const pu={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};function ey(r,e){const t=e===!1?"http":"https";if(!r)return pu[t].devnet;const n=pu[t][r];if(!n)throw new Error(`Unknown ${t} cluster: ${r}`);return n}async function ty(r,e,t,n){let s,i;t&&Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")||t&&Object.prototype.hasOwnProperty.call(t,"nonceValue")?(s=t,i=n):i=t;const o=i&&{skipPreflight:i.skipPreflight,preflightCommitment:i.preflightCommitment||i.commitment,minContextSlot:i.minContextSlot},a=await r.sendRawTransaction(e,o),u=i&&i.commitment,w=(await(s?r.confirmTransaction(s,u):r.confirmTransaction(a,u))).value;if(w.err)throw a!=null?new si({action:o?.skipPreflight?"send":"simulate",signature:a,transactionMessage:`Status: (${JSON.stringify(w)})`}):new Error(`Raw transaction ${a} failed (${JSON.stringify(w)})`);return a}const ny=1e9,Rw=Object.freeze(Object.defineProperty({__proto__:null,Account:j0,AddressLookupTableAccount:ia,AddressLookupTableInstruction:Fg,AddressLookupTableProgram:ec,Authorized:Af,BLOCKHASH_CACHE_TIMEOUT_MS:hf,BPF_LOADER_DEPRECATED_PROGRAM_ID:G0,BPF_LOADER_PROGRAM_ID:hp,BpfLoader:dp,COMPUTE_BUDGET_INSTRUCTION_LAYOUTS:sn,ComputeBudgetInstruction:Dg,ComputeBudgetProgram:tc,Connection:Ef,Ed25519Program:Es,Enum:V0,EpochSchedule:lf,FeeCalculatorLayout:cf,Keypair:xr,LAMPORTS_PER_SOL:ny,LOOKUP_TABLE_INSTRUCTION_LAYOUTS:wn,Loader:ir,Lockup:gi,MAX_SEED_LENGTH:rf,Message:Xt,MessageAccountKeys:ii,MessageV0:rr,NONCE_ACCOUNT_LENGTH:ra,NonceAccount:bs,PACKET_DATA_SIZE:On,PUBLIC_KEY_LENGTH:cn,PublicKey:ie,SIGNATURE_LENGTH_IN_BYTES:ri,SOLANA_SCHEMA:Xr,STAKE_CONFIG_ID:_f,STAKE_INSTRUCTION_LAYOUTS:_t,SYSTEM_INSTRUCTION_LAYOUTS:Ne,SYSVAR_CLOCK_PUBKEY:tn,SYSVAR_EPOCH_SCHEDULE_PUBKEY:ip,SYSVAR_INSTRUCTIONS_PUBKEY:sp,SYSVAR_RECENT_BLOCKHASHES_PUBKEY:Mi,SYSVAR_RENT_PUBKEY:Pr,SYSVAR_REWARDS_PUBKEY:op,SYSVAR_SLOT_HASHES_PUBKEY:ap,SYSVAR_SLOT_HISTORY_PUBKEY:cp,SYSVAR_STAKE_HISTORY_PUBKEY:Ti,Secp256k1Program:Br,SendTransactionError:si,SolanaJSONRPCError:le,SolanaJSONRPCErrorCode:up,StakeAuthorizationLayout:Hg,StakeInstruction:Vg,StakeProgram:ks,Struct:ja,SystemInstruction:lp,SystemProgram:At,Transaction:_e,TransactionExpiredBlockheightExceededError:Ga,TransactionExpiredNonceInvalidError:Er,TransactionExpiredTimeoutError:Ya,TransactionInstruction:Me,TransactionMessage:Za,TransactionStatus:dn,VALIDATOR_INFO_KEY:xf,VERSION_PREFIX_MASK:ys,VOTE_PROGRAM_ID:Zg,ValidatorInfo:nc,VersionedMessage:ws,VersionedTransaction:Lr,VoteAccount:rc,VoteAuthorizationLayout:Gg,VoteInit:If,VoteInstruction:jg,VoteProgram:zr,clusterApiUrl:ey,sendAndConfirmRawTransaction:ty,sendAndConfirmTransaction:na},Symbol.toStringTag,{value:"Module"})),Bf=de.createContext({});function ry(){return de.useContext(Bf)}const Mw=({children:r,endpoint:e,config:t={commitment:"confirmed"}})=>{const n=de.useMemo(()=>new Ef(e,t),[e,t]);return Ba.createElement(Bf.Provider,{value:{connection:n}},r)};class Ut extends Error{constructor(e,t){super(e),this.error=t}}class ai extends Ut{constructor(){super(...arguments),this.name="WalletNotReadyError"}}class Vr extends Ut{constructor(){super(...arguments),this.name="WalletConfigError"}}class is extends Ut{constructor(){super(...arguments),this.name="WalletConnectionError"}}class iy extends Ut{constructor(){super(...arguments),this.name="WalletDisconnectedError"}}class sy extends Ut{constructor(){super(...arguments),this.name="WalletDisconnectionError"}}class kr extends Ut{constructor(){super(...arguments),this.name="WalletAccountError"}}class Rf extends Ut{constructor(){super(...arguments),this.name="WalletPublicKeyError"}}class an extends Ut{constructor(){super(...arguments),this.name="WalletNotConnectedError"}}class jn extends Ut{constructor(){super(...arguments),this.name="WalletSendTransactionError"}}class Gn extends Ut{constructor(){super(...arguments),this.name="WalletSignTransactionError"}}class Mf extends Ut{constructor(){super(...arguments),this.name="WalletSignMessageError"}}class gu extends Ut{constructor(){super(...arguments),this.name="WalletSignInError"}}var Qe;(function(r){r.Installed="Installed",r.NotDetected="NotDetected",r.Loadable="Loadable",r.Unsupported="Unsupported"})(Qe||(Qe={}));class Tf extends Ka{get connected(){return!!this.publicKey}async autoConnect(){await this.connect()}async prepareTransaction(e,t,n={}){const s=this.publicKey;if(!s)throw new an;return e.feePayer=e.feePayer||s,e.recentBlockhash=e.recentBlockhash||(await t.getLatestBlockhash({commitment:n.preflightCommitment,minContextSlot:n.minContextSlot})).blockhash,e}}function Tw(r){if(typeof window>"u"||typeof document>"u")return;const e=[];function t(){if(r())for(const i of e)i()}const n=setInterval(t,1e3);e.push(()=>clearInterval(n)),document.readyState==="loading"&&(document.addEventListener("DOMContentLoaded",t,{once:!0}),e.push(()=>document.removeEventListener("DOMContentLoaded",t))),document.readyState!=="complete"&&(window.addEventListener("load",t,{once:!0}),e.push(()=>window.removeEventListener("load",t))),t()}function Cw(){if(!navigator)return!1;const r=navigator.userAgent.toLowerCase(),e=r.includes("iphone")||r.includes("ipad"),t=r.includes("safari");return e&&t}function Yn(r){return"version"in r}class oy extends Tf{async sendTransaction(e,t,n={}){let s=!0;try{if(Yn(e)){if(!this.supportedTransactionVersions)throw new jn("Sending versioned transactions isn't supported by this wallet");if(!this.supportedTransactionVersions.has(e.version))throw new jn(`Sending transaction version ${e.version} isn't supported by this wallet`);try{e=await this.signTransaction(e);const i=e.serialize();return await t.sendRawTransaction(i,n)}catch(i){throw i instanceof Gn?(s=!1,i):new jn(i?.message,i)}}else try{const{signers:i,...o}=n;e=await this.prepareTransaction(e,t,o),i?.length&&e.partialSign(...i),e=await this.signTransaction(e);const a=e.serialize();return await t.sendRawTransaction(a,o)}catch(i){throw i instanceof Gn?(s=!1,i):new jn(i?.message,i)}}catch(i){throw s&&this.emit("error",i),i}}async signAllTransactions(e){for(const n of e)if(Yn(n)){if(!this.supportedTransactionVersions)throw new Gn("Signing versioned transactions isn't supported by this wallet");if(!this.supportedTransactionVersions.has(n.version))throw new Gn(`Signing transaction version ${n.version} isn't supported by this wallet`)}const t=[];for(const n of e)t.push(await this.signTransaction(n));return t}}class ay extends oy{}class cy extends ay{}const Dt="solana:signAndSendTransaction",tr="solana:signIn",Ln="solana:signMessage",qe="solana:signTransaction",ic="standard:connect",ca="standard:disconnect",sc="standard:events";function uy(r){return ic in r.features&&sc in r.features&&(Dt in r.features||qe in r.features)}var yu;(function(r){r.Mainnet="mainnet-beta",r.Testnet="testnet",r.Devnet="devnet"})(yu||(yu={}));class mu extends Ut{constructor(){super(...arguments),this.name="WalletNotSelectedError"}}const ly=[],_s={autoConnect:!1,connecting:!1,connected:!1,disconnecting:!1,select(){Yt("call","select")},connect(){return Promise.reject(Yt("call","connect"))},disconnect(){return Promise.reject(Yt("call","disconnect"))},sendTransaction(){return Promise.reject(Yt("call","sendTransaction"))},signTransaction(){return Promise.reject(Yt("call","signTransaction"))},signAllTransactions(){return Promise.reject(Yt("call","signAllTransactions"))},signMessage(){return Promise.reject(Yt("call","signMessage"))},signIn(){return Promise.reject(Yt("call","signIn"))}};Object.defineProperty(_s,"wallets",{get(){return Yt("read","wallets"),ly}});Object.defineProperty(_s,"wallet",{get(){return Yt("read","wallet"),null}});Object.defineProperty(_s,"publicKey",{get(){return Yt("read","publicKey"),null}});function Yt(r,e){const t=new Error(`You have tried to ${r} "${e}" on a WalletContext without providing one. Make sure to render a WalletProvider as an ancestor of the component that uses WalletContext.`);return console.error(t),t}const Cf=de.createContext(_s);function fy(){return de.useContext(Cf)}function Lw(){const{publicKey:r,signTransaction:e,signAllTransactions:t}=fy();return de.useMemo(()=>r&&e&&t?{publicKey:r,signTransaction:e,signAllTransactions:t}:void 0,[r,e,t])}function hy(r,e){const t=de.useState(()=>{try{const i=localStorage.getItem(r);if(i)return JSON.parse(i)}catch(i){typeof window<"u"&&console.error(i)}return e}),n=t[0],s=de.useRef(!0);return de.useEffect(()=>{if(s.current){s.current=!1;return}try{n===null?localStorage.removeItem(r):localStorage.setItem(r,JSON.stringify(n))}catch(i){typeof window<"u"&&console.error(i)}},[n,r]),t}var gr={},vo,wu;function dy(){return wu||(wu=1,vo=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),vo}var So={},Rn={},bu;function ur(){if(bu)return Rn;bu=1;let r;const e=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return Rn.getSymbolSize=function(n){if(!n)throw new Error('"version" cannot be null or undefined');if(n<1||n>40)throw new Error('"version" should be in range from 1 to 40');return n*4+17},Rn.getSymbolTotalCodewords=function(n){return e[n]},Rn.getBCHDigit=function(t){let n=0;for(;t!==0;)n++,t>>>=1;return n},Rn.setToSJISFunction=function(n){if(typeof n!="function")throw new Error('"toSJISFunc" is not a valid function.');r=n},Rn.isKanjiModeEnabled=function(){return typeof r<"u"},Rn.toSJIS=function(n){return r(n)},Rn}var Eo={},vu;function oc(){return vu||(vu=1,(function(r){r.L={bit:1},r.M={bit:0},r.Q={bit:3},r.H={bit:2};function e(t){if(typeof t!="string")throw new Error("Param is not a string");switch(t.toLowerCase()){case"l":case"low":return r.L;case"m":case"medium":return r.M;case"q":case"quartile":return r.Q;case"h":case"high":return r.H;default:throw new Error("Unknown EC Level: "+t)}}r.isValid=function(n){return n&&typeof n.bit<"u"&&n.bit>=0&&n.bit<4},r.from=function(n,s){if(r.isValid(n))return n;try{return e(n)}catch{return s}}})(Eo)),Eo}var ko,Su;function py(){if(Su)return ko;Su=1;function r(){this.buffer=[],this.length=0}return r.prototype={get:function(e){const t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)===1},put:function(e,t){for(let n=0;n<t;n++)this.putBit((e>>>t-n-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},ko=r,ko}var _o,Eu;function gy(){if(Eu)return _o;Eu=1;function r(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}return r.prototype.set=function(e,t,n,s){const i=e*this.size+t;this.data[i]=n,s&&(this.reservedBit[i]=!0)},r.prototype.get=function(e,t){return this.data[e*this.size+t]},r.prototype.xor=function(e,t,n){this.data[e*this.size+t]^=n},r.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]},_o=r,_o}var Ao={},ku;function yy(){return ku||(ku=1,(function(r){const e=ur().getSymbolSize;r.getRowColCoords=function(n){if(n===1)return[];const s=Math.floor(n/7)+2,i=e(n),o=i===145?26:Math.ceil((i-13)/(2*s-2))*2,a=[i-7];for(let u=1;u<s-1;u++)a[u]=a[u-1]-o;return a.push(6),a.reverse()},r.getPositions=function(n){const s=[],i=r.getRowColCoords(n),o=i.length;for(let a=0;a<o;a++)for(let u=0;u<o;u++)a===0&&u===0||a===0&&u===o-1||a===o-1&&u===0||s.push([i[a],i[u]]);return s}})(Ao)),Ao}var Io={},_u;function my(){if(_u)return Io;_u=1;const r=ur().getSymbolSize,e=7;return Io.getPositions=function(n){const s=r(n);return[[0,0],[s-e,0],[0,s-e]]},Io}var xo={},Au;function wy(){return Au||(Au=1,(function(r){r.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};r.isValid=function(s){return s!=null&&s!==""&&!isNaN(s)&&s>=0&&s<=7},r.from=function(s){return r.isValid(s)?parseInt(s,10):void 0},r.getPenaltyN1=function(s){const i=s.size;let o=0,a=0,u=0,g=null,w=null;for(let S=0;S<i;S++){a=u=0,g=w=null;for(let E=0;E<i;E++){let b=s.get(S,E);b===g?a++:(a>=5&&(o+=e.N1+(a-5)),g=b,a=1),b=s.get(E,S),b===w?u++:(u>=5&&(o+=e.N1+(u-5)),w=b,u=1)}a>=5&&(o+=e.N1+(a-5)),u>=5&&(o+=e.N1+(u-5))}return o},r.getPenaltyN2=function(s){const i=s.size;let o=0;for(let a=0;a<i-1;a++)for(let u=0;u<i-1;u++){const g=s.get(a,u)+s.get(a,u+1)+s.get(a+1,u)+s.get(a+1,u+1);(g===4||g===0)&&o++}return o*e.N2},r.getPenaltyN3=function(s){const i=s.size;let o=0,a=0,u=0;for(let g=0;g<i;g++){a=u=0;for(let w=0;w<i;w++)a=a<<1&2047|s.get(g,w),w>=10&&(a===1488||a===93)&&o++,u=u<<1&2047|s.get(w,g),w>=10&&(u===1488||u===93)&&o++}return o*e.N3},r.getPenaltyN4=function(s){let i=0;const o=s.data.length;for(let u=0;u<o;u++)i+=s.data[u];return Math.abs(Math.ceil(i*100/o/5)-10)*e.N4};function t(n,s,i){switch(n){case r.Patterns.PATTERN000:return(s+i)%2===0;case r.Patterns.PATTERN001:return s%2===0;case r.Patterns.PATTERN010:return i%3===0;case r.Patterns.PATTERN011:return(s+i)%3===0;case r.Patterns.PATTERN100:return(Math.floor(s/2)+Math.floor(i/3))%2===0;case r.Patterns.PATTERN101:return s*i%2+s*i%3===0;case r.Patterns.PATTERN110:return(s*i%2+s*i%3)%2===0;case r.Patterns.PATTERN111:return(s*i%3+(s+i)%2)%2===0;default:throw new Error("bad maskPattern:"+n)}}r.applyMask=function(s,i){const o=i.size;for(let a=0;a<o;a++)for(let u=0;u<o;u++)i.isReserved(u,a)||i.xor(u,a,t(s,u,a))},r.getBestMask=function(s,i){const o=Object.keys(r.Patterns).length;let a=0,u=1/0;for(let g=0;g<o;g++){i(g),r.applyMask(g,s);const w=r.getPenaltyN1(s)+r.getPenaltyN2(s)+r.getPenaltyN3(s)+r.getPenaltyN4(s);r.applyMask(g,s),w<u&&(u=w,a=g)}return a}})(xo)),xo}var xi={},Iu;function Lf(){if(Iu)return xi;Iu=1;const r=oc(),e=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],t=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return xi.getBlocksCount=function(s,i){switch(i){case r.L:return e[(s-1)*4+0];case r.M:return e[(s-1)*4+1];case r.Q:return e[(s-1)*4+2];case r.H:return e[(s-1)*4+3];default:return}},xi.getTotalCodewordsCount=function(s,i){switch(i){case r.L:return t[(s-1)*4+0];case r.M:return t[(s-1)*4+1];case r.Q:return t[(s-1)*4+2];case r.H:return t[(s-1)*4+3];default:return}},xi}var Bo={},qr={},xu;function by(){if(xu)return qr;xu=1;const r=new Uint8Array(512),e=new Uint8Array(256);return(function(){let n=1;for(let s=0;s<255;s++)r[s]=n,e[n]=s,n<<=1,n&256&&(n^=285);for(let s=255;s<512;s++)r[s]=r[s-255]})(),qr.log=function(n){if(n<1)throw new Error("log("+n+")");return e[n]},qr.exp=function(n){return r[n]},qr.mul=function(n,s){return n===0||s===0?0:r[e[n]+e[s]]},qr}var Bu;function vy(){return Bu||(Bu=1,(function(r){const e=by();r.mul=function(n,s){const i=new Uint8Array(n.length+s.length-1);for(let o=0;o<n.length;o++)for(let a=0;a<s.length;a++)i[o+a]^=e.mul(n[o],s[a]);return i},r.mod=function(n,s){let i=new Uint8Array(n);for(;i.length-s.length>=0;){const o=i[0];for(let u=0;u<s.length;u++)i[u]^=e.mul(s[u],o);let a=0;for(;a<i.length&&i[a]===0;)a++;i=i.slice(a)}return i},r.generateECPolynomial=function(n){let s=new Uint8Array([1]);for(let i=0;i<n;i++)s=r.mul(s,new Uint8Array([1,e.exp(i)]));return s}})(Bo)),Bo}var Ro,Ru;function Sy(){if(Ru)return Ro;Ru=1;const r=vy();function e(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}return e.prototype.initialize=function(n){this.degree=n,this.genPoly=r.generateECPolynomial(this.degree)},e.prototype.encode=function(n){if(!this.genPoly)throw new Error("Encoder not initialized");const s=new Uint8Array(n.length+this.degree);s.set(n);const i=r.mod(s,this.genPoly),o=this.degree-i.length;if(o>0){const a=new Uint8Array(this.degree);return a.set(i,o),a}return i},Ro=e,Ro}var Mo={},To={},Co={},Mu;function Pf(){return Mu||(Mu=1,Co.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}),Co}var en={},Tu;function Nf(){if(Tu)return en;Tu=1;const r="[0-9]+",e="[A-Z $%*+\\-./:]+";let t="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";t=t.replace(/u/g,"\\u");const n="(?:(?![A-Z0-9 $%*+\\-./:]|"+t+`)(?:.|[\r
]))+`;en.KANJI=new RegExp(t,"g"),en.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),en.BYTE=new RegExp(n,"g"),en.NUMERIC=new RegExp(r,"g"),en.ALPHANUMERIC=new RegExp(e,"g");const s=new RegExp("^"+t+"$"),i=new RegExp("^"+r+"$"),o=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return en.testKanji=function(u){return s.test(u)},en.testNumeric=function(u){return i.test(u)},en.testAlphanumeric=function(u){return o.test(u)},en}var Cu;function lr(){return Cu||(Cu=1,(function(r){const e=Pf(),t=Nf();r.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},r.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},r.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},r.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},r.MIXED={bit:-1},r.getCharCountIndicator=function(i,o){if(!i.ccBits)throw new Error("Invalid mode: "+i);if(!e.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?i.ccBits[0]:o<27?i.ccBits[1]:i.ccBits[2]},r.getBestModeForData=function(i){return t.testNumeric(i)?r.NUMERIC:t.testAlphanumeric(i)?r.ALPHANUMERIC:t.testKanji(i)?r.KANJI:r.BYTE},r.toString=function(i){if(i&&i.id)return i.id;throw new Error("Invalid mode")},r.isValid=function(i){return i&&i.bit&&i.ccBits};function n(s){if(typeof s!="string")throw new Error("Param is not a string");switch(s.toLowerCase()){case"numeric":return r.NUMERIC;case"alphanumeric":return r.ALPHANUMERIC;case"kanji":return r.KANJI;case"byte":return r.BYTE;default:throw new Error("Unknown mode: "+s)}}r.from=function(i,o){if(r.isValid(i))return i;try{return n(i)}catch{return o}}})(To)),To}var Lu;function Ey(){return Lu||(Lu=1,(function(r){const e=ur(),t=Lf(),n=oc(),s=lr(),i=Pf(),o=7973,a=e.getBCHDigit(o);function u(E,b,A){for(let x=1;x<=40;x++)if(b<=r.getCapacity(x,A,E))return x}function g(E,b){return s.getCharCountIndicator(E,b)+4}function w(E,b){let A=0;return E.forEach(function(x){const C=g(x.mode,b);A+=C+x.getBitsLength()}),A}function S(E,b){for(let A=1;A<=40;A++)if(w(E,A)<=r.getCapacity(A,b,s.MIXED))return A}r.from=function(b,A){return i.isValid(b)?parseInt(b,10):A},r.getCapacity=function(b,A,x){if(!i.isValid(b))throw new Error("Invalid QR Code version");typeof x>"u"&&(x=s.BYTE);const C=e.getSymbolTotalCodewords(b),P=t.getTotalCodewordsCount(b,A),W=(C-P)*8;if(x===s.MIXED)return W;const N=W-g(x,b);switch(x){case s.NUMERIC:return Math.floor(N/10*3);case s.ALPHANUMERIC:return Math.floor(N/11*2);case s.KANJI:return Math.floor(N/13);case s.BYTE:default:return Math.floor(N/8)}},r.getBestVersionForData=function(b,A){let x;const C=n.from(A,n.M);if(Array.isArray(b)){if(b.length>1)return S(b,C);if(b.length===0)return 1;x=b[0]}else x=b;return u(x.mode,x.getLength(),C)},r.getEncodedBits=function(b){if(!i.isValid(b)||b<7)throw new Error("Invalid QR Code version");let A=b<<12;for(;e.getBCHDigit(A)-a>=0;)A^=o<<e.getBCHDigit(A)-a;return b<<12|A}})(Mo)),Mo}var Lo={},Pu;function ky(){if(Pu)return Lo;Pu=1;const r=ur(),e=1335,t=21522,n=r.getBCHDigit(e);return Lo.getEncodedBits=function(i,o){const a=i.bit<<3|o;let u=a<<10;for(;r.getBCHDigit(u)-n>=0;)u^=e<<r.getBCHDigit(u)-n;return(a<<10|u)^t},Lo}var Po={},No,Nu;function _y(){if(Nu)return No;Nu=1;const r=lr();function e(t){this.mode=r.NUMERIC,this.data=t.toString()}return e.getBitsLength=function(n){return 10*Math.floor(n/3)+(n%3?n%3*3+1:0)},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(n){let s,i,o;for(s=0;s+3<=this.data.length;s+=3)i=this.data.substr(s,3),o=parseInt(i,10),n.put(o,10);const a=this.data.length-s;a>0&&(i=this.data.substr(s),o=parseInt(i,10),n.put(o,a*3+1))},No=e,No}var Oo,Ou;function Ay(){if(Ou)return Oo;Ou=1;const r=lr(),e=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function t(n){this.mode=r.ALPHANUMERIC,this.data=n}return t.getBitsLength=function(s){return 11*Math.floor(s/2)+6*(s%2)},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(s){let i;for(i=0;i+2<=this.data.length;i+=2){let o=e.indexOf(this.data[i])*45;o+=e.indexOf(this.data[i+1]),s.put(o,11)}this.data.length%2&&s.put(e.indexOf(this.data[i]),6)},Oo=t,Oo}var Uo,Uu;function Iy(){if(Uu)return Uo;Uu=1;const r=lr();function e(t){this.mode=r.BYTE,typeof t=="string"?this.data=new TextEncoder().encode(t):this.data=new Uint8Array(t)}return e.getBitsLength=function(n){return n*8},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(t){for(let n=0,s=this.data.length;n<s;n++)t.put(this.data[n],8)},Uo=e,Uo}var Wo,Wu;function xy(){if(Wu)return Wo;Wu=1;const r=lr(),e=ur();function t(n){this.mode=r.KANJI,this.data=n}return t.getBitsLength=function(s){return s*13},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(n){let s;for(s=0;s<this.data.length;s++){let i=e.toSJIS(this.data[s]);if(i>=33088&&i<=40956)i-=33088;else if(i>=57408&&i<=60351)i-=49472;else throw new Error("Invalid SJIS character: "+this.data[s]+`
Make sure your charset is UTF-8`);i=(i>>>8&255)*192+(i&255),n.put(i,13)}},Wo=t,Wo}var zo={exports:{}},zu;function By(){return zu||(zu=1,(function(r){var e={single_source_shortest_paths:function(t,n,s){var i={},o={};o[n]=0;var a=e.PriorityQueue.make();a.push(n,0);for(var u,g,w,S,E,b,A,x,C;!a.empty();){u=a.pop(),g=u.value,S=u.cost,E=t[g]||{};for(w in E)E.hasOwnProperty(w)&&(b=E[w],A=S+b,x=o[w],C=typeof o[w]>"u",(C||x>A)&&(o[w]=A,a.push(w,A),i[w]=g))}if(typeof s<"u"&&typeof o[s]>"u"){var P=["Could not find a path from ",n," to ",s,"."].join("");throw new Error(P)}return i},extract_shortest_path_from_predecessor_list:function(t,n){for(var s=[],i=n;i;)s.push(i),t[i],i=t[i];return s.reverse(),s},find_path:function(t,n,s){var i=e.single_source_shortest_paths(t,n,s);return e.extract_shortest_path_from_predecessor_list(i,s)},PriorityQueue:{make:function(t){var n=e.PriorityQueue,s={},i;t=t||{};for(i in n)n.hasOwnProperty(i)&&(s[i]=n[i]);return s.queue=[],s.sorter=t.sorter||n.default_sorter,s},default_sorter:function(t,n){return t.cost-n.cost},push:function(t,n){var s={value:t,cost:n};this.queue.push(s),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};r.exports=e})(zo)),zo.exports}var Fu;function Ry(){return Fu||(Fu=1,(function(r){const e=lr(),t=_y(),n=Ay(),s=Iy(),i=xy(),o=Nf(),a=ur(),u=By();function g(P){return unescape(encodeURIComponent(P)).length}function w(P,W,N){const V=[];let Y;for(;(Y=P.exec(N))!==null;)V.push({data:Y[0],index:Y.index,mode:W,length:Y[0].length});return V}function S(P){const W=w(o.NUMERIC,e.NUMERIC,P),N=w(o.ALPHANUMERIC,e.ALPHANUMERIC,P);let V,Y;return a.isKanjiModeEnabled()?(V=w(o.BYTE,e.BYTE,P),Y=w(o.KANJI,e.KANJI,P)):(V=w(o.BYTE_KANJI,e.BYTE,P),Y=[]),W.concat(N,V,Y).sort(function(Q,Z){return Q.index-Z.index}).map(function(Q){return{data:Q.data,mode:Q.mode,length:Q.length}})}function E(P,W){switch(W){case e.NUMERIC:return t.getBitsLength(P);case e.ALPHANUMERIC:return n.getBitsLength(P);case e.KANJI:return i.getBitsLength(P);case e.BYTE:return s.getBitsLength(P)}}function b(P){return P.reduce(function(W,N){const V=W.length-1>=0?W[W.length-1]:null;return V&&V.mode===N.mode?(W[W.length-1].data+=N.data,W):(W.push(N),W)},[])}function A(P){const W=[];for(let N=0;N<P.length;N++){const V=P[N];switch(V.mode){case e.NUMERIC:W.push([V,{data:V.data,mode:e.ALPHANUMERIC,length:V.length},{data:V.data,mode:e.BYTE,length:V.length}]);break;case e.ALPHANUMERIC:W.push([V,{data:V.data,mode:e.BYTE,length:V.length}]);break;case e.KANJI:W.push([V,{data:V.data,mode:e.BYTE,length:g(V.data)}]);break;case e.BYTE:W.push([{data:V.data,mode:e.BYTE,length:g(V.data)}])}}return W}function x(P,W){const N={},V={start:{}};let Y=["start"];for(let $=0;$<P.length;$++){const Q=P[$],Z=[];for(let M=0;M<Q.length;M++){const O=Q[M],F=""+$+M;Z.push(F),N[F]={node:O,lastCount:0},V[F]={};for(let D=0;D<Y.length;D++){const y=Y[D];N[y]&&N[y].node.mode===O.mode?(V[y][F]=E(N[y].lastCount+O.length,O.mode)-E(N[y].lastCount,O.mode),N[y].lastCount+=O.length):(N[y]&&(N[y].lastCount=O.length),V[y][F]=E(O.length,O.mode)+4+e.getCharCountIndicator(O.mode,W))}}Y=Z}for(let $=0;$<Y.length;$++)V[Y[$]].end=0;return{map:V,table:N}}function C(P,W){let N;const V=e.getBestModeForData(P);if(N=e.from(W,V),N!==e.BYTE&&N.bit<V.bit)throw new Error('"'+P+'" cannot be encoded with mode '+e.toString(N)+`.
 Suggested mode is: `+e.toString(V));switch(N===e.KANJI&&!a.isKanjiModeEnabled()&&(N=e.BYTE),N){case e.NUMERIC:return new t(P);case e.ALPHANUMERIC:return new n(P);case e.KANJI:return new i(P);case e.BYTE:return new s(P)}}r.fromArray=function(W){return W.reduce(function(N,V){return typeof V=="string"?N.push(C(V,null)):V.data&&N.push(C(V.data,V.mode)),N},[])},r.fromString=function(W,N){const V=S(W,a.isKanjiModeEnabled()),Y=A(V),$=x(Y,N),Q=u.find_path($.map,"start","end"),Z=[];for(let M=1;M<Q.length-1;M++)Z.push($.table[Q[M]].node);return r.fromArray(b(Z))},r.rawSplit=function(W){return r.fromArray(S(W,a.isKanjiModeEnabled()))}})(Po)),Po}var Du;function My(){if(Du)return So;Du=1;const r=ur(),e=oc(),t=py(),n=gy(),s=yy(),i=my(),o=wy(),a=Lf(),u=Sy(),g=Ey(),w=ky(),S=lr(),E=Ry();function b($,Q){const Z=$.size,M=i.getPositions(Q);for(let O=0;O<M.length;O++){const F=M[O][0],D=M[O][1];for(let y=-1;y<=7;y++)if(!(F+y<=-1||Z<=F+y))for(let c=-1;c<=7;c++)D+c<=-1||Z<=D+c||(y>=0&&y<=6&&(c===0||c===6)||c>=0&&c<=6&&(y===0||y===6)||y>=2&&y<=4&&c>=2&&c<=4?$.set(F+y,D+c,!0,!0):$.set(F+y,D+c,!1,!0))}}function A($){const Q=$.size;for(let Z=8;Z<Q-8;Z++){const M=Z%2===0;$.set(Z,6,M,!0),$.set(6,Z,M,!0)}}function x($,Q){const Z=s.getPositions(Q);for(let M=0;M<Z.length;M++){const O=Z[M][0],F=Z[M][1];for(let D=-2;D<=2;D++)for(let y=-2;y<=2;y++)D===-2||D===2||y===-2||y===2||D===0&&y===0?$.set(O+D,F+y,!0,!0):$.set(O+D,F+y,!1,!0)}}function C($,Q){const Z=$.size,M=g.getEncodedBits(Q);let O,F,D;for(let y=0;y<18;y++)O=Math.floor(y/3),F=y%3+Z-8-3,D=(M>>y&1)===1,$.set(O,F,D,!0),$.set(F,O,D,!0)}function P($,Q,Z){const M=$.size,O=w.getEncodedBits(Q,Z);let F,D;for(F=0;F<15;F++)D=(O>>F&1)===1,F<6?$.set(F,8,D,!0):F<8?$.set(F+1,8,D,!0):$.set(M-15+F,8,D,!0),F<8?$.set(8,M-F-1,D,!0):F<9?$.set(8,15-F-1+1,D,!0):$.set(8,15-F-1,D,!0);$.set(M-8,8,1,!0)}function W($,Q){const Z=$.size;let M=-1,O=Z-1,F=7,D=0;for(let y=Z-1;y>0;y-=2)for(y===6&&y--;;){for(let c=0;c<2;c++)if(!$.isReserved(O,y-c)){let f=!1;D<Q.length&&(f=(Q[D]>>>F&1)===1),$.set(O,y-c,f),F--,F===-1&&(D++,F=7)}if(O+=M,O<0||Z<=O){O-=M,M=-M;break}}}function N($,Q,Z){const M=new t;Z.forEach(function(c){M.put(c.mode.bit,4),M.put(c.getLength(),S.getCharCountIndicator(c.mode,$)),c.write(M)});const O=r.getSymbolTotalCodewords($),F=a.getTotalCodewordsCount($,Q),D=(O-F)*8;for(M.getLengthInBits()+4<=D&&M.put(0,4);M.getLengthInBits()%8!==0;)M.putBit(0);const y=(D-M.getLengthInBits())/8;for(let c=0;c<y;c++)M.put(c%2?17:236,8);return V(M,$,Q)}function V($,Q,Z){const M=r.getSymbolTotalCodewords(Q),O=a.getTotalCodewordsCount(Q,Z),F=M-O,D=a.getBlocksCount(Q,Z),y=M%D,c=D-y,f=Math.floor(M/D),m=Math.floor(F/D),_=m+1,B=f-m,L=new u(B);let z=0;const I=new Array(D),l=new Array(D);let h=0;const k=new Uint8Array($.buffer);for(let oe=0;oe<D;oe++){const Ee=oe<c?m:_;I[oe]=k.slice(z,z+Ee),l[oe]=L.encode(I[oe]),z+=Ee,h=Math.max(h,Ee)}const T=new Uint8Array(M);let q=0,J,ne;for(J=0;J<h;J++)for(ne=0;ne<D;ne++)J<I[ne].length&&(T[q++]=I[ne][J]);for(J=0;J<B;J++)for(ne=0;ne<D;ne++)T[q++]=l[ne][J];return T}function Y($,Q,Z,M){let O;if(Array.isArray($))O=E.fromArray($);else if(typeof $=="string"){let f=Q;if(!f){const m=E.rawSplit($);f=g.getBestVersionForData(m,Z)}O=E.fromString($,f||40)}else throw new Error("Invalid data");const F=g.getBestVersionForData(O,Z);if(!F)throw new Error("The amount of data is too big to be stored in a QR Code");if(!Q)Q=F;else if(Q<F)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+F+`.
`);const D=N(Q,Z,O),y=r.getSymbolSize(Q),c=new n(y);return b(c,Q),A(c),x(c,Q),P(c,Z,0),Q>=7&&C(c,Q),W(c,D),isNaN(M)&&(M=o.getBestMask(c,P.bind(null,c,Z))),o.applyMask(M,c),P(c,Z,M),{modules:c,version:Q,errorCorrectionLevel:Z,maskPattern:M,segments:O}}return So.create=function(Q,Z){if(typeof Q>"u"||Q==="")throw new Error("No input text");let M=e.M,O,F;return typeof Z<"u"&&(M=e.from(Z.errorCorrectionLevel,e.M),O=g.from(Z.version),F=o.from(Z.maskPattern),Z.toSJISFunc&&r.setToSJISFunction(Z.toSJISFunc)),Y(Q,O,M,F)},So}var Fo={},Do={},Ku;function Of(){return Ku||(Ku=1,(function(r){function e(t){if(typeof t=="number"&&(t=t.toString()),typeof t!="string")throw new Error("Color should be defined as hex string");let n=t.slice().replace("#","").split("");if(n.length<3||n.length===5||n.length>8)throw new Error("Invalid hex color: "+t);(n.length===3||n.length===4)&&(n=Array.prototype.concat.apply([],n.map(function(i){return[i,i]}))),n.length===6&&n.push("F","F");const s=parseInt(n.join(""),16);return{r:s>>24&255,g:s>>16&255,b:s>>8&255,a:s&255,hex:"#"+n.slice(0,6).join("")}}r.getOptions=function(n){n||(n={}),n.color||(n.color={});const s=typeof n.margin>"u"||n.margin===null||n.margin<0?4:n.margin,i=n.width&&n.width>=21?n.width:void 0,o=n.scale||4;return{width:i,scale:i?4:o,margin:s,color:{dark:e(n.color.dark||"#000000ff"),light:e(n.color.light||"#ffffffff")},type:n.type,rendererOpts:n.rendererOpts||{}}},r.getScale=function(n,s){return s.width&&s.width>=n+s.margin*2?s.width/(n+s.margin*2):s.scale},r.getImageWidth=function(n,s){const i=r.getScale(n,s);return Math.floor((n+s.margin*2)*i)},r.qrToImageData=function(n,s,i){const o=s.modules.size,a=s.modules.data,u=r.getScale(o,i),g=Math.floor((o+i.margin*2)*u),w=i.margin*u,S=[i.color.light,i.color.dark];for(let E=0;E<g;E++)for(let b=0;b<g;b++){let A=(E*g+b)*4,x=i.color.light;if(E>=w&&b>=w&&E<g-w&&b<g-w){const C=Math.floor((E-w)/u),P=Math.floor((b-w)/u);x=S[a[C*o+P]?1:0]}n[A++]=x.r,n[A++]=x.g,n[A++]=x.b,n[A]=x.a}}})(Do)),Do}var qu;function Ty(){return qu||(qu=1,(function(r){const e=Of();function t(s,i,o){s.clearRect(0,0,i.width,i.height),i.style||(i.style={}),i.height=o,i.width=o,i.style.height=o+"px",i.style.width=o+"px"}function n(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}r.render=function(i,o,a){let u=a,g=o;typeof u>"u"&&(!o||!o.getContext)&&(u=o,o=void 0),o||(g=n()),u=e.getOptions(u);const w=e.getImageWidth(i.modules.size,u),S=g.getContext("2d"),E=S.createImageData(w,w);return e.qrToImageData(E.data,i,u),t(S,g,w),S.putImageData(E,0,0),g},r.renderToDataURL=function(i,o,a){let u=a;typeof u>"u"&&(!o||!o.getContext)&&(u=o,o=void 0),u||(u={});const g=r.render(i,o,u),w=u.type||"image/png",S=u.rendererOpts||{};return g.toDataURL(w,S.quality)}})(Fo)),Fo}var Ko={},$u;function Cy(){if($u)return Ko;$u=1;const r=Of();function e(s,i){const o=s.a/255,a=i+'="'+s.hex+'"';return o<1?a+" "+i+'-opacity="'+o.toFixed(2).slice(1)+'"':a}function t(s,i,o){let a=s+i;return typeof o<"u"&&(a+=" "+o),a}function n(s,i,o){let a="",u=0,g=!1,w=0;for(let S=0;S<s.length;S++){const E=Math.floor(S%i),b=Math.floor(S/i);!E&&!g&&(g=!0),s[S]?(w++,S>0&&E>0&&s[S-1]||(a+=g?t("M",E+o,.5+b+o):t("m",u,0),u=0,g=!1),E+1<i&&s[S+1]||(a+=t("h",w),w=0)):u++}return a}return Ko.render=function(i,o,a){const u=r.getOptions(o),g=i.modules.size,w=i.modules.data,S=g+u.margin*2,E=u.color.light.a?"<path "+e(u.color.light,"fill")+' d="M0 0h'+S+"v"+S+'H0z"/>':"",b="<path "+e(u.color.dark,"stroke")+' d="'+n(w,g,u.margin)+'"/>',A='viewBox="0 0 '+S+" "+S+'"',C='<svg xmlns="http://www.w3.org/2000/svg" '+(u.width?'width="'+u.width+'" height="'+u.width+'" ':"")+A+' shape-rendering="crispEdges">'+E+b+`</svg>
`;return typeof a=="function"&&a(null,C),C},Ko}var Vu;function Ly(){if(Vu)return gr;Vu=1;const r=dy(),e=My(),t=Ty(),n=Cy();function s(i,o,a,u,g){const w=[].slice.call(arguments,1),S=w.length,E=typeof w[S-1]=="function";if(!E&&!r())throw new Error("Callback required as last argument");if(E){if(S<2)throw new Error("Too few arguments provided");S===2?(g=a,a=o,o=u=void 0):S===3&&(o.getContext&&typeof g>"u"?(g=u,u=void 0):(g=u,u=a,a=o,o=void 0))}else{if(S<1)throw new Error("Too few arguments provided");return S===1?(a=o,o=u=void 0):S===2&&!o.getContext&&(u=a,a=o,o=void 0),new Promise(function(b,A){try{const x=e.create(a,u);b(i(x,o,u))}catch(x){A(x)}})}try{const b=e.create(a,u);g(null,i(b,o,u))}catch(b){g(b)}}return gr.create=e.create,gr.toCanvas=s.bind(null,t.render),gr.toDataURL=s.bind(null,t.renderToDataURL),gr.toString=s.bind(null,function(i,o,a){return n.render(i,a)}),gr}Ly();function qo(r){switch(r){case"processed":case"confirmed":case"finalized":case void 0:return r;case"recent":return"processed";case"single":case"singleGossip":return"confirmed";case"max":case"root":return"finalized";default:return}}const ss="solana:mainnet",Py="solana:devnet",Ny="solana:testnet",Oy="solana:localnet",Uy="https://api.mainnet-beta.solana.com";function Wy(r){return r.includes(Uy)?ss:/\bdevnet\b/i.test(r)?Py:/\btestnet\b/i.test(r)?Ny:/\blocalhost\b/i.test(r)||/\b127\.0\.0\.1\b/.test(r)?Oy:ss}function zy(r){let e=`${r.domain} wants you to sign in with your Solana account:
`;e+=`${r.address}`,r.statement&&(e+=`

${r.statement}`);const t=[];if(r.uri&&t.push(`URI: ${r.uri}`),r.version&&t.push(`Version: ${r.version}`),r.chainId&&t.push(`Chain ID: ${r.chainId}`),r.nonce&&t.push(`Nonce: ${r.nonce}`),r.issuedAt&&t.push(`Issued At: ${r.issuedAt}`),r.expirationTime&&t.push(`Expiration Time: ${r.expirationTime}`),r.notBefore&&t.push(`Not Before: ${r.notBefore}`),r.requestId&&t.push(`Request ID: ${r.requestId}`),r.resources){t.push("Resources:");for(const n of r.resources)t.push(`- ${n}`)}return t.length&&(e+=`

${t.join(`
`)}`),e}function Fy(r){return Object.freeze({...r,decode:(e,t=0)=>r.read(e,t)[0]})}var Dy=r=>Fy({read(e,t){const n=t===0?e:e.slice(t);if(n.length===0)return["",0];let s=n.findIndex(u=>u!==0);s=s===-1?n.length:s;const i=r[0].repeat(s);if(s===n.length)return[i,e.length];const o=n.slice(s).reduce((u,g)=>u*256n+BigInt(g),0n),a=Ky(o,r);return[i+a,e.length]}});function Ky(r,e){const t=BigInt(e.length),n=[];for(;r>0n;)n.unshift(e[Number(r%t)]),r/=t;return n.join("")}var qy="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",$y=()=>Dy(qy);const En={ERROR_ASSOCIATION_PORT_OUT_OF_RANGE:"ERROR_ASSOCIATION_PORT_OUT_OF_RANGE",ERROR_FORBIDDEN_WALLET_BASE_URL:"ERROR_FORBIDDEN_WALLET_BASE_URL",ERROR_SECURE_CONTEXT_REQUIRED:"ERROR_SECURE_CONTEXT_REQUIRED",ERROR_SESSION_CLOSED:"ERROR_SESSION_CLOSED",ERROR_SESSION_TIMEOUT:"ERROR_SESSION_TIMEOUT",ERROR_WALLET_NOT_FOUND:"ERROR_WALLET_NOT_FOUND",ERROR_INVALID_PROTOCOL_VERSION:"ERROR_INVALID_PROTOCOL_VERSION"};class kn extends Error{constructor(...e){const[t,n,s]=e;super(n),this.code=t,this.data=s,this.name="SolanaMobileWalletAdapterError"}}class Uf extends Error{constructor(...e){const[t,n,s,i]=e;super(s),this.code=n,this.data=i,this.jsonRpcMessageId=t,this.name="SolanaMobileWalletAdapterProtocolError"}}function vt(r,e,t,n){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(w){try{g(n.next(w))}catch(S){o(S)}}function u(w){try{g(n.throw(w))}catch(S){o(S)}}function g(w){w.done?i(w.value):s(w.value).then(a,u)}g((n=n.apply(r,[])).next())})}function Vy(r){return window.btoa(r)}function Hu(r,e){return window.btoa(String.fromCharCode.call(null,...r))}function Wf(r){return new Uint8Array(window.atob(r).split("").map(e=>e.charCodeAt(0)))}function $o(r,e){return vt(this,void 0,void 0,function*(){const t=yield crypto.subtle.exportKey("raw",r),n=yield crypto.subtle.sign({hash:"SHA-256",name:"ECDSA"},e,t),s=new Uint8Array(t.byteLength+n.byteLength);return s.set(new Uint8Array(t),0),s.set(new Uint8Array(n),t.byteLength),s})}function Hy(r){return zy(r)}function jy(r){return Vy(Hy(r)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}const Gy="solana:signTransactions",ju="solana:cloneAuthorization";function Yy(r){return $y().decode(r)}function Zy(r){return Yy(Wf(r))}function Jy(r,e){return new Proxy({},{get(t,n){return n==="then"?null:(t[n]==null&&(t[n]=function(s){return vt(this,void 0,void 0,function*(){const{method:i,params:o}=Xy(n,s,r),a=yield e(i,o);return i==="authorize"&&o.sign_in_payload&&!a.sign_in_result&&(a.sign_in_result=yield em(o.sign_in_payload,a,e)),Qy(n,a,r)})}),t[n])},defineProperty(){return!1},deleteProperty(){return!1}})}function Xy(r,e,t){let n=e,s=r.toString().replace(/[A-Z]/g,i=>`_${i.toLowerCase()}`).toLowerCase();switch(r){case"authorize":{let{chain:i}=n;if(t==="legacy"){switch(i){case"solana:testnet":{i="testnet";break}case"solana:devnet":{i="devnet";break}case"solana:mainnet":{i="mainnet-beta";break}default:i=n.cluster}n.cluster=i}else{switch(i){case"testnet":case"devnet":{i=`solana:${i}`;break}case"mainnet-beta":{i="solana:mainnet";break}}n.chain=i}}case"reauthorize":{const{auth_token:i,identity:o}=n;if(i)switch(t){case"legacy":{s="reauthorize",n={auth_token:i,identity:o};break}default:{s="authorize";break}}break}}return{method:s,params:n}}function Qy(r,e,t){switch(r){case"getCapabilities":{const n=e;switch(t){case"legacy":{const s=[Gy];return n.supports_clone_authorization===!0&&s.push(ju),Object.assign(Object.assign({},n),{features:s})}case"v1":return Object.assign(Object.assign({},n),{supports_sign_and_send_transactions:!0,supports_clone_authorization:n.features.includes(ju)})}}}return e}function em(r,e,t){var n;return vt(this,void 0,void 0,function*(){const s=(n=r.domain)!==null&&n!==void 0?n:window.location.host,i=e.accounts[0].address,o=jy(Object.assign(Object.assign({},r),{domain:s,address:Zy(i)})),a=yield t("sign_messages",{addresses:[i],payloads:[o]}),u=Wf(a.signed_payloads[0]),g=Hu(u.slice(0,u.length-64)),w=Hu(u.slice(u.length-64));return{address:i,signed_message:g.length==0?o:g,signature:w}})}const Zn=4;function tm(r){if(r>=4294967296)throw new Error("Outbound sequence number overflow. The maximum sequence number is 32-bytes.");const e=new ArrayBuffer(Zn);return new DataView(e).setUint32(0,r,!1),new Uint8Array(e)}const ua=12,zf=65;function nm(r,e,t){return vt(this,void 0,void 0,function*(){const n=tm(e),s=new Uint8Array(ua);crypto.getRandomValues(s);const i=yield crypto.subtle.encrypt(Df(n,s),t,new TextEncoder().encode(r)),o=new Uint8Array(n.byteLength+s.byteLength+i.byteLength);return o.set(new Uint8Array(n),0),o.set(new Uint8Array(s),n.byteLength),o.set(new Uint8Array(i),n.byteLength+s.byteLength),o})}function Ff(r,e){return vt(this,void 0,void 0,function*(){const t=r.slice(0,Zn),n=r.slice(Zn,Zn+ua),s=r.slice(Zn+ua),i=yield crypto.subtle.decrypt(Df(t,n),e,s);return rm().decode(i)})}function Df(r,e){return{additionalData:r,iv:e,name:"AES-GCM",tagLength:128}}let Vo;function rm(){return Vo===void 0&&(Vo=new TextDecoder("utf-8")),Vo}function im(){return vt(this,void 0,void 0,function*(){return yield crypto.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},!1,["sign"])})}function Ho(){return vt(this,void 0,void 0,function*(){return yield crypto.subtle.generateKey({name:"ECDH",namedCurve:"P-256"},!1,["deriveKey","deriveBits"])})}function sm(r){let e="";const t=new Uint8Array(r),n=t.byteLength;for(let s=0;s<n;s++)e+=String.fromCharCode(t[s]);return window.btoa(e)}function om(){return Kf(49152+Math.floor(Math.random()*16384))}function Kf(r){if(r<49152||r>65535)throw new kn(En.ERROR_ASSOCIATION_PORT_OUT_OF_RANGE,`Association port number must be between 49152 and 65535. ${r} given.`,{port:r});return r}function am(r){return r.replace(/[/+=]/g,e=>({"/":"_","+":"-","=":"."})[e])}const cm="solana-wallet";function Gu(r){return r.replace(/(^\/+|\/+$)/g,"").split("/")}function um(r,e){let t=null;if(e){try{t=new URL(e)}catch{}if(t?.protocol!=="https:")throw new kn(En.ERROR_FORBIDDEN_WALLET_BASE_URL,"Base URLs supplied by wallets must be valid `https` URLs")}t||(t=new URL(`${cm}:/`));const n=r.startsWith("/")?r:[...Gu(t.pathname),...Gu(r)].join("/");return new URL(n,t)}function lm(r,e,t,n=["v1"]){return vt(this,void 0,void 0,function*(){const s=Kf(e),i=yield crypto.subtle.exportKey("raw",r),o=sm(i),a=um("v1/associate/local",t);return a.searchParams.set("association",am(o)),a.searchParams.set("port",`${s}`),n.forEach(u=>{a.searchParams.set("v",u)}),a})}function fm(r,e){return vt(this,void 0,void 0,function*(){const t=JSON.stringify(r),n=r.id;return nm(t,n,e)})}function hm(r,e){return vt(this,void 0,void 0,function*(){const t=yield Ff(r,e),n=JSON.parse(t);if(Object.hasOwnProperty.call(n,"error"))throw new Uf(n.id,n.error.code,n.error.message);return n})}function dm(r,e,t){return vt(this,void 0,void 0,function*(){const[n,s]=yield Promise.all([crypto.subtle.exportKey("raw",e),crypto.subtle.importKey("raw",r.slice(0,zf),{name:"ECDH",namedCurve:"P-256"},!1,[])]),i=yield crypto.subtle.deriveBits({name:"ECDH",public:s},t,256),o=yield crypto.subtle.importKey("raw",i,"HKDF",!1,["deriveKey"]);return yield crypto.subtle.deriveKey({name:"HKDF",hash:"SHA-256",salt:new Uint8Array(n),info:new Uint8Array},o,{name:"AES-GCM",length:128},!1,["encrypt","decrypt"])})}function pm(r,e){return vt(this,void 0,void 0,function*(){const t=yield Ff(r,e),n=JSON.parse(t);let s="legacy";if(Object.hasOwnProperty.call(n,"v"))switch(n.v){case 1:case"1":case"v1":s="v1";break;case"legacy":s="legacy";break;default:throw new kn(En.ERROR_INVALID_PROTOCOL_VERSION,`Unknown/unsupported protocol version: ${n.v}`)}return{protocol_version:s}})}const os={Firefox:0,Other:1};function gm(){return navigator.userAgent.indexOf("Firefox/")!==-1?os.Firefox:os.Other}function ym(){return new Promise((r,e)=>{function t(){clearTimeout(s),window.removeEventListener("blur",n)}function n(){t(),r()}window.addEventListener("blur",n);const s=setTimeout(()=>{t(),e()},3e3)})}let $r=null;function mm(r){$r==null&&($r=document.createElement("iframe"),$r.style.display="none",document.body.appendChild($r)),$r.contentWindow.location.href=r.toString()}function wm(r){return vt(this,void 0,void 0,function*(){if(r.protocol==="https:")window.location.assign(r);else try{const e=gm();switch(e){case os.Firefox:mm(r);break;case os.Other:{const t=ym();window.location.assign(r),yield t;break}default:}}catch{throw new kn(En.ERROR_WALLET_NOT_FOUND,"Found no installed wallet that supports the mobile wallet protocol.")}})}function bm(r,e){return vt(this,void 0,void 0,function*(){const t=om(),n=yield lm(r,t,e);return yield wm(n),t})}const Yu={retryDelayScheduleMs:[150,150,200,500,500,750,750,1e3],timeoutMs:3e4},vm="com.solana.mobilewalletadapter.v1";function Sm(){if(typeof window>"u"||window.isSecureContext!==!0)throw new kn(En.ERROR_SECURE_CONTEXT_REQUIRED,"The mobile wallet adapter protocol must be used in a secure context (`https`).")}function Em(r){let e;try{e=new URL(r)}catch{throw new kn(En.ERROR_FORBIDDEN_WALLET_BASE_URL,"Invalid base URL supplied by wallet")}if(e.protocol!=="https:")throw new kn(En.ERROR_FORBIDDEN_WALLET_BASE_URL,"Base URLs supplied by wallets must be valid `https` URLs")}function Zu(r){return new DataView(r).getUint32(0,!1)}function km(r,e){return vt(this,void 0,void 0,function*(){Sm();const t=yield im(),s=`ws://localhost:${yield bm(t.publicKey,e?.baseUri)}/solana-wallet`;let i;const o=(()=>{const w=[...Yu.retryDelayScheduleMs];return()=>w.length>1?w.shift():w[0]})();let a=1,u=0,g={__type:"disconnected"};return new Promise((w,S)=>{let E;const b={},A=()=>vt(this,void 0,void 0,function*(){if(g.__type!=="connecting"){console.warn(`Expected adapter state to be \`connecting\` at the moment the websocket opens. Got \`${g.__type}\`.`);return}E.removeEventListener("open",A);const{associationKeypair:Y}=g,$=yield Ho();E.send(yield $o($.publicKey,Y.privateKey)),g={__type:"hello_req_sent",associationPublicKey:Y.publicKey,ecdhPrivateKey:$.privateKey}}),x=Y=>{Y.wasClean?g={__type:"disconnected"}:S(new kn(En.ERROR_SESSION_CLOSED,`The wallet session dropped unexpectedly (${Y.code}: ${Y.reason}).`,{closeEvent:Y})),W()},C=Y=>vt(this,void 0,void 0,function*(){W(),Date.now()-i>=Yu.timeoutMs?S(new kn(En.ERROR_SESSION_TIMEOUT,`Failed to connect to the wallet websocket at ${s}.`)):(yield new Promise($=>{const Q=o();N=window.setTimeout($,Q)}),V())}),P=Y=>vt(this,void 0,void 0,function*(){const $=yield Y.data.arrayBuffer();switch(g.__type){case"connecting":if($.byteLength!==0)throw new Error("Encountered unexpected message while connecting");const Q=yield Ho();E.send(yield $o(Q.publicKey,t.privateKey)),g={__type:"hello_req_sent",associationPublicKey:t.publicKey,ecdhPrivateKey:Q.privateKey};break;case"connected":try{const Z=$.slice(0,Zn),M=Zu(Z);if(M!==u+1)throw new Error("Encrypted message has invalid sequence number");u=M;const O=yield hm($,g.sharedSecret),F=b[O.id];delete b[O.id],F.resolve(O.result)}catch(Z){if(Z instanceof Uf){const M=b[Z.jsonRpcMessageId];delete b[Z.jsonRpcMessageId],M.reject(Z)}else throw Z}break;case"hello_req_sent":{if($.byteLength===0){const D=yield Ho();E.send(yield $o(D.publicKey,t.privateKey)),g={__type:"hello_req_sent",associationPublicKey:t.publicKey,ecdhPrivateKey:D.privateKey};break}const Z=yield dm($,g.associationPublicKey,g.ecdhPrivateKey),M=$.slice(zf),O=M.byteLength!==0?yield vt(this,void 0,void 0,function*(){const D=M.slice(0,Zn),y=Zu(D);if(y!==u+1)throw new Error("Encrypted message has invalid sequence number");return u=y,pm(M,Z)}):{protocol_version:"legacy"};g={__type:"connected",sharedSecret:Z,sessionProperties:O};const F=Jy(O.protocol_version,(D,y)=>vt(this,void 0,void 0,function*(){const c=a++;return E.send(yield fm({id:c,jsonrpc:"2.0",method:D,params:y??{}},Z)),new Promise((f,m)=>{b[c]={resolve(_){switch(D){case"authorize":case"reauthorize":{const{wallet_uri_base:B}=_;if(B!=null)try{Em(B)}catch(L){m(L);return}break}}f(_)},reject:m}})}));try{w(yield r(F))}catch(D){S(D)}finally{W(),E.close()}break}}});let W,N;const V=()=>{W&&W(),g={__type:"connecting",associationKeypair:t},i===void 0&&(i=Date.now()),E=new WebSocket(s,[vm]),E.addEventListener("open",A),E.addEventListener("close",x),E.addEventListener("error",C),E.addEventListener("message",P),W=()=>{window.clearTimeout(N),E.removeEventListener("open",A),E.removeEventListener("close",x),E.removeEventListener("error",C),E.removeEventListener("message",P)}};V()})})}var jo,Ju;function _m(){if(Ju)return jo;Ju=1;function r(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var s=0;s<e.length;s++){var i=e.charAt(s),o=i.charCodeAt(0);if(t[o]!==255)throw new TypeError(i+" is ambiguous");t[o]=s}var a=e.length,u=e.charAt(0),g=Math.log(a)/Math.log(256),w=Math.log(256)/Math.log(a);function S(A){if(A instanceof Uint8Array||(ArrayBuffer.isView(A)?A=new Uint8Array(A.buffer,A.byteOffset,A.byteLength):Array.isArray(A)&&(A=Uint8Array.from(A))),!(A instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(A.length===0)return"";for(var x=0,C=0,P=0,W=A.length;P!==W&&A[P]===0;)P++,x++;for(var N=(W-P)*w+1>>>0,V=new Uint8Array(N);P!==W;){for(var Y=A[P],$=0,Q=N-1;(Y!==0||$<C)&&Q!==-1;Q--,$++)Y+=256*V[Q]>>>0,V[Q]=Y%a>>>0,Y=Y/a>>>0;if(Y!==0)throw new Error("Non-zero carry");C=$,P++}for(var Z=N-C;Z!==N&&V[Z]===0;)Z++;for(var M=u.repeat(x);Z<N;++Z)M+=e.charAt(V[Z]);return M}function E(A){if(typeof A!="string")throw new TypeError("Expected String");if(A.length===0)return new Uint8Array;for(var x=0,C=0,P=0;A[x]===u;)C++,x++;for(var W=(A.length-x)*g+1>>>0,N=new Uint8Array(W);A[x];){var V=A.charCodeAt(x);if(V>255)return;var Y=t[V];if(Y===255)return;for(var $=0,Q=W-1;(Y!==0||$<P)&&Q!==-1;Q--,$++)Y+=a*N[Q]>>>0,N[Q]=Y%256>>>0,Y=Y/256>>>0;if(Y!==0)throw new Error("Non-zero carry");P=$,x++}for(var Z=W-P;Z!==W&&N[Z]===0;)Z++;for(var M=new Uint8Array(C+(W-Z)),O=C;Z!==W;)M[O++]=N[Z++];return M}function b(A){var x=E(A);if(x)return x;throw new Error("Non-base"+a+" character")}return{encode:S,decodeUnsafe:E,decode:b}}return jo=r,jo}var Go,Xu;function Am(){return Xu||(Xu=1,Go=_m()("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")),Go}var Im=Am();const la=ci(Im);function Fe(r,e,t,n){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(w){try{g(n.next(w))}catch(S){o(S)}}function u(w){try{g(n.throw(w))}catch(S){o(S)}}function g(w){w.done?i(w.value):s(w.value).then(a,u)}g((n=n.apply(r,[])).next())})}function ee(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)}function mt(r,e,t,n,s){if(typeof e=="function"?r!==e||!0:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(r,t),t}var Hr,St,Wn,yr,qf,$f,Vf,Ci;const xm=`
<div class="mobile-wallet-adapter-embedded-modal-container" role="dialog" aria-modal="true" aria-labelledby="modal-title">
    <div data-modal-close style="position: absolute; width: 100%; height: 100%;"></div>
	<div class="mobile-wallet-adapter-embedded-modal-card">
		<div>
			<button data-modal-close class="mobile-wallet-adapter-embedded-modal-close">
				<svg width="14" height="14">
					<path d="M 6.7125,8.3036995 1.9082,13.108199 c -0.2113,0.2112 -0.4765,0.3168 -0.7957,0.3168 -0.3192,0 -0.5844,-0.1056 -0.7958,-0.3168 C 0.1056,12.896899 0,12.631699 0,12.312499 c 0,-0.3192 0.1056,-0.5844 0.3167,-0.7958 L 5.1212,6.7124995 0.3167,1.9082 C 0.1056,1.6969 0,1.4317 0,1.1125 0,0.7933 0.1056,0.5281 0.3167,0.3167 0.5281,0.1056 0.7933,0 1.1125,0 1.4317,0 1.6969,0.1056 1.9082,0.3167 L 6.7125,5.1212 11.5167,0.3167 C 11.7281,0.1056 11.9933,0 12.3125,0 c 0.3192,0 0.5844,0.1056 0.7957,0.3167 0.2112,0.2114 0.3168,0.4766 0.3168,0.7958 0,0.3192 -0.1056,0.5844 -0.3168,0.7957 L 8.3037001,6.7124995 13.1082,11.516699 c 0.2112,0.2114 0.3168,0.4766 0.3168,0.7958 0,0.3192 -0.1056,0.5844 -0.3168,0.7957 -0.2113,0.2112 -0.4765,0.3168 -0.7957,0.3168 -0.3192,0 -0.5844,-0.1056 -0.7958,-0.3168 z" />
				</svg>
			</button>
		</div>
		<div class="mobile-wallet-adapter-embedded-modal-content"></div>
	</div>
</div>
`,Bm=`
.mobile-wallet-adapter-embedded-modal-container {
    display: flex; /* Use flexbox to center content */
    justify-content: center; /* Center horizontally */
    align-items: center; /* Center vertically */
    position: fixed; /* Stay in place */
    z-index: 1; /* Sit on top */
    left: 0;
    top: 0;
    width: 100%; /* Full width */
    height: 100%; /* Full height */
    background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
    overflow-y: auto; /* enable scrolling */
}

.mobile-wallet-adapter-embedded-modal-card {
    display: flex;
    flex-direction: column;
    margin: auto 20px;
    max-width: 780px;
    padding: 20px;
    border-radius: 24px;
    background: #ffffff;
    font-family: "Inter Tight", "PT Sans", Calibri, sans-serif;
    transform: translateY(-200%);
    animation: slide-in 0.5s forwards;
}

@keyframes slide-in {
    100% { transform: translateY(0%); }
}

.mobile-wallet-adapter-embedded-modal-close {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 32px;
    height: 32px;
    cursor: pointer;
    background: #e4e9e9;
    border: none;
    border-radius: 50%;
}

.mobile-wallet-adapter-embedded-modal-close:focus-visible {
    outline-color: red;
}

.mobile-wallet-adapter-embedded-modal-close svg {
    fill: #546266;
    transition: fill 200ms ease 0s;
}

.mobile-wallet-adapter-embedded-modal-close:hover svg {
    fill: #fff;
}
`,Rm=`
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter+Tight:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
`;class Mm{constructor(){Hr.add(this),St.set(this,null),Wn.set(this,{}),yr.set(this,!1),this.dom=null,this.open=()=>{console.debug("Modal open"),ee(this,Hr,"m",$f).call(this),ee(this,St,"f")&&(ee(this,St,"f").style.display="flex")},this.close=(e=void 0)=>{var t;console.debug("Modal close"),ee(this,Hr,"m",Vf).call(this),ee(this,St,"f")&&(ee(this,St,"f").style.display="none"),(t=ee(this,Wn,"f").close)===null||t===void 0||t.forEach(n=>n(e))},Ci.set(this,e=>{e.key==="Escape"&&this.close(e)}),this.init=this.init.bind(this),mt(this,St,document.getElementById("mobile-wallet-adapter-embedded-root-ui"))}init(){return Fe(this,void 0,void 0,function*(){console.log("Injecting modal"),ee(this,Hr,"m",qf).call(this)})}addEventListener(e,t){var n;return!((n=ee(this,Wn,"f")[e])===null||n===void 0)&&n.push(t)||(ee(this,Wn,"f")[e]=[t]),()=>this.removeEventListener(e,t)}removeEventListener(e,t){var n;ee(this,Wn,"f")[e]=(n=ee(this,Wn,"f")[e])===null||n===void 0?void 0:n.filter(s=>t!==s)}}St=new WeakMap,Wn=new WeakMap,yr=new WeakMap,Ci=new WeakMap,Hr=new WeakSet,qf=function(){if(document.getElementById("mobile-wallet-adapter-embedded-root-ui")){ee(this,St,"f")||mt(this,St,document.getElementById("mobile-wallet-adapter-embedded-root-ui"));return}mt(this,St,document.createElement("div")),ee(this,St,"f").id="mobile-wallet-adapter-embedded-root-ui",ee(this,St,"f").innerHTML=xm,ee(this,St,"f").style.display="none";const e=ee(this,St,"f").querySelector(".mobile-wallet-adapter-embedded-modal-content");e&&(e.innerHTML=this.contentHtml);const t=document.createElement("style");t.id="mobile-wallet-adapter-embedded-modal-styles",t.textContent=Bm+this.contentStyles;const n=document.createElement("div");n.innerHTML=Rm,this.dom=n.attachShadow({mode:"closed"}),this.dom.appendChild(t),this.dom.appendChild(ee(this,St,"f")),document.body.appendChild(n)},$f=function(){if(!ee(this,St,"f")||ee(this,yr,"f"))return;[...ee(this,St,"f").querySelectorAll("[data-modal-close]")].forEach(t=>t?.addEventListener("click",this.close)),window.addEventListener("load",this.close),document.addEventListener("keydown",ee(this,Ci,"f")),mt(this,yr,!0)},Vf=function(){if(!ee(this,yr,"f")||(window.removeEventListener("load",this.close),document.removeEventListener("keydown",ee(this,Ci,"f")),!ee(this,St,"f")))return;[...ee(this,St,"f").querySelectorAll("[data-modal-close]")].forEach(t=>t?.removeEventListener("click",this.close)),mt(this,yr,!1)};const Tm="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik03IDIuNUgxN0MxNy44Mjg0IDIuNSAxOC41IDMuMTcxNTcgMTguNSA0VjIwQzE4LjUgMjAuODI4NCAxNy44Mjg0IDIxLjUgMTcgMjEuNUg3QzYuMTcxNTcgMjEuNSA1LjUgMjAuODI4NCA1LjUgMjBWNEM1LjUgMy4xNzE1NyA2LjE3MTU3IDIuNSA3IDIuNVpNMyA0QzMgMS43OTA4NiA0Ljc5MDg2IDAgNyAwSDE3QzE5LjIwOTEgMCAyMSAxLjc5MDg2IDIxIDRWMjBDMjEgMjIuMjA5MSAxOS4yMDkxIDI0IDE3IDI0SDdDNC43OTA4NiAyNCAzIDIyLjIwOTEgMyAyMFY0Wk0xMSA0LjYxNTM4QzEwLjQ0NzcgNC42MTUzOCAxMCA1LjA2MzEgMTAgNS42MTUzOFY2LjM4NDYyQzEwIDYuOTM2OSAxMC40NDc3IDcuMzg0NjIgMTEgNy4zODQ2MkgxM0MxMy41NTIzIDcuMzg0NjIgMTQgNi45MzY5IDE0IDYuMzg0NjJWNS42MTUzOEMxNCA1LjA2MzEgMTMuNTUyMyA0LjYxNTM4IDEzIDQuNjE1MzhIMTFaIiBmaWxsPSIjRENCOEZGIi8+Cjwvc3ZnPgo=";function Bi(r){return window.btoa(String.fromCharCode.call(null,...r))}function Mn(r){return new Uint8Array(window.atob(r).split("").map(e=>e.charCodeAt(0)))}var mr,Jn,fa,ha,da,pa,jr,Nt,pn,Tn,wr,zn,Li,Gr,Pi,ga,Ni,Hf,ya,Oi,br,Ui,Yr,Wi,vr,Zr,zi,ma,wa,Fi,Di,ba,va,Ki;const jf="Mobile Wallet Adapter",Cm=64,Lm=[Dt,qe,Ln,tr];class Pm{constructor(e){mr.add(this),Jn.set(this,{}),fa.set(this,"1.0.0"),ha.set(this,jf),da.set(this,"https://solanamobile.com/wallets"),pa.set(this,Tm),jr.set(this,void 0),Nt.set(this,void 0),pn.set(this,void 0),Tn.set(this,!1),wr.set(this,0),zn.set(this,[]),Li.set(this,void 0),Gr.set(this,void 0),Pi.set(this,void 0),ga.set(this,(t,n)=>{var s;return!((s=ee(this,Jn,"f")[t])===null||s===void 0)&&s.push(n)||(ee(this,Jn,"f")[t]=[n]),()=>ee(this,mr,"m",Hf).call(this,t,n)}),ya.set(this,({silent:t}={})=>Fe(this,void 0,void 0,function*(){if(ee(this,Tn,"f")||this.connected)return{accounts:this.accounts};mt(this,Tn,!0);try{if(t){const n=yield ee(this,pn,"f").get();if(n)yield ee(this,Ui,"f").call(this,n.capabilities),yield ee(this,br,"f").call(this,n);else return{accounts:this.accounts}}else yield ee(this,Oi,"f").call(this)}catch(n){throw new Error(n instanceof Error&&n.message||"Unknown error")}finally{mt(this,Tn,!1)}return{accounts:this.accounts}})),Oi.set(this,t=>Fe(this,void 0,void 0,function*(){try{const n=yield ee(this,pn,"f").get();if(n)return ee(this,br,"f").call(this,n),n;const s=yield ee(this,Li,"f").select(ee(this,zn,"f"));return yield ee(this,vr,"f").call(this,i=>Fe(this,void 0,void 0,function*(){const[o,a]=yield Promise.all([i.getCapabilities(),i.authorize({chain:s,identity:ee(this,jr,"f"),sign_in_payload:t})]),u=ee(this,zi,"f").call(this,a.accounts),g=Object.assign(Object.assign({},a),{accounts:u,chain:s,capabilities:o});return Promise.all([ee(this,Ui,"f").call(this,o),ee(this,pn,"f").set(g),ee(this,br,"f").call(this,g)]),g}))}catch(n){throw new Error(n instanceof Error&&n.message||"Unknown error")}})),br.set(this,t=>Fe(this,void 0,void 0,function*(){var n;const s=ee(this,Nt,"f")==null||((n=ee(this,Nt,"f"))===null||n===void 0?void 0:n.accounts.length)!==t.accounts.length||ee(this,Nt,"f").accounts.some((i,o)=>i.address!==t.accounts[o].address);mt(this,Nt,t),s&&ee(this,mr,"m",Ni).call(this,"change",{accounts:this.accounts})})),Ui.set(this,t=>Fe(this,void 0,void 0,function*(){const n=t.features.includes("solana:signTransactions"),s=t.supports_sign_and_send_transactions,i=Dt in this.features!==s||qe in this.features!==n;mt(this,Gr,Object.assign(Object.assign({},(s||!s&&!n)&&{[Dt]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signAndSendTransaction:ee(this,Fi,"f")}}),n&&{[qe]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signTransaction:ee(this,Di,"f")}})),i&&ee(this,mr,"m",Ni).call(this,"change",{features:this.features})})),Yr.set(this,(t,n,s)=>Fe(this,void 0,void 0,function*(){var i,o;try{const[a,u]=yield Promise.all([(o=(i=ee(this,Nt,"f"))===null||i===void 0?void 0:i.capabilities)!==null&&o!==void 0?o:yield t.getCapabilities(),t.authorize({auth_token:n,identity:ee(this,jr,"f"),chain:s})]),g=ee(this,zi,"f").call(this,u.accounts),w=Object.assign(Object.assign({},u),{accounts:g,chain:s,capabilities:a});Promise.all([ee(this,pn,"f").set(w),ee(this,br,"f").call(this,w)])}catch(a){throw ee(this,Wi,"f").call(this),new Error(a instanceof Error&&a.message||"Unknown error")}})),Wi.set(this,()=>Fe(this,void 0,void 0,function*(){var t;ee(this,pn,"f").clear(),mt(this,Tn,!1),mt(this,wr,(t=ee(this,wr,"f"),t++,t)),mt(this,Nt,void 0),ee(this,mr,"m",Ni).call(this,"change",{accounts:this.accounts})})),vr.set(this,t=>Fe(this,void 0,void 0,function*(){var n;const s=(n=ee(this,Nt,"f"))===null||n===void 0?void 0:n.wallet_uri_base,i=s?{baseUri:s}:void 0,o=ee(this,wr,"f");try{return yield km(t,i)}catch(a){throw ee(this,wr,"f")!==o&&(yield new Promise(()=>{})),a instanceof Error&&a.name==="SolanaMobileWalletAdapterError"&&a.code==="ERROR_WALLET_NOT_FOUND"&&(yield ee(this,Pi,"f").call(this,this)),a}})),Zr.set(this,()=>{if(!ee(this,Nt,"f"))throw new Error("Wallet not connected");return{authToken:ee(this,Nt,"f").auth_token,chain:ee(this,Nt,"f").chain}}),zi.set(this,t=>t.map(n=>{var s,i;const o=Mn(n.address);return{address:la.encode(o),publicKey:o,label:n.label,icon:n.icon,chains:(s=n.chains)!==null&&s!==void 0?s:ee(this,zn,"f"),features:(i=n.features)!==null&&i!==void 0?i:Lm}})),ma.set(this,t=>Fe(this,void 0,void 0,function*(){const{authToken:n,chain:s}=ee(this,Zr,"f").call(this);try{const i=t.map(o=>Bi(o));return yield ee(this,vr,"f").call(this,o=>Fe(this,void 0,void 0,function*(){return yield ee(this,Yr,"f").call(this,o,n,s),(yield o.signTransactions({payloads:i})).signed_payloads.map(Mn)}))}catch(i){throw new Error(i instanceof Error&&i.message||"Unknown error")}})),wa.set(this,(t,n)=>Fe(this,void 0,void 0,function*(){const{authToken:s,chain:i}=ee(this,Zr,"f").call(this);try{return yield ee(this,vr,"f").call(this,o=>Fe(this,void 0,void 0,function*(){const[a,u]=yield Promise.all([o.getCapabilities(),ee(this,Yr,"f").call(this,o,s,i)]);if(a.supports_sign_and_send_transactions){const g=Bi(t);return(yield o.signAndSendTransactions(Object.assign(Object.assign({},n),{payloads:[g]}))).signatures.map(Mn)[0]}else throw new Error("connected wallet does not support signAndSendTransaction")}))}catch(o){throw new Error(o instanceof Error&&o.message||"Unknown error")}})),Fi.set(this,(...t)=>Fe(this,void 0,void 0,function*(){const n=[];for(const s of t){const i=yield ee(this,wa,"f").call(this,s.transaction,s.options);n.push({signature:i})}return n})),Di.set(this,(...t)=>Fe(this,void 0,void 0,function*(){return(yield ee(this,ma,"f").call(this,t.map(({transaction:n})=>n))).map(n=>({signedTransaction:n}))})),ba.set(this,(...t)=>Fe(this,void 0,void 0,function*(){const{authToken:n,chain:s}=ee(this,Zr,"f").call(this),i=t.map(({account:a})=>Bi(a.publicKey)),o=t.map(({message:a})=>Bi(a));try{return yield ee(this,vr,"f").call(this,a=>Fe(this,void 0,void 0,function*(){return yield ee(this,Yr,"f").call(this,a,n,s),(yield a.signMessages({addresses:i,payloads:o})).signed_payloads.map(Mn).map(g=>({signedMessage:g,signature:g.slice(-Cm)}))}))}catch(a){throw new Error(a instanceof Error&&a.message||"Unknown error")}})),va.set(this,(...t)=>Fe(this,void 0,void 0,function*(){const n=[];if(t.length>1)for(const s of t)n.push(yield ee(this,Ki,"f").call(this,s));else return[yield ee(this,Ki,"f").call(this,t[0])];return n})),Ki.set(this,t=>Fe(this,void 0,void 0,function*(){var n,s,i;mt(this,Tn,!0);try{const o=yield ee(this,Oi,"f").call(this,Object.assign(Object.assign({},t),{domain:(n=t?.domain)!==null&&n!==void 0?n:window.location.host}));if(!o.sign_in_result)throw new Error("Sign in failed, no sign in result returned by wallet");const a=o.sign_in_result.address,u=o.accounts.find(g=>g.address==a);return{account:Object.assign(Object.assign({},u??{address:la.encode(Mn(a))}),{publicKey:Mn(a),chains:(s=u?.chains)!==null&&s!==void 0?s:ee(this,zn,"f"),features:(i=u?.features)!==null&&i!==void 0?i:o.capabilities.features}),signedMessage:Mn(o.sign_in_result.signed_message),signature:Mn(o.sign_in_result.signature)}}catch(o){throw new Error(o instanceof Error&&o.message||"Unknown error")}finally{mt(this,Tn,!1)}})),mt(this,pn,e.authorizationCache),mt(this,jr,e.appIdentity),mt(this,zn,e.chains),mt(this,Li,e.chainSelector),mt(this,Pi,e.onWalletNotFound),mt(this,Gr,{[Dt]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signAndSendTransaction:ee(this,Fi,"f")},[qe]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signTransaction:ee(this,Di,"f")}})}get version(){return ee(this,fa,"f")}get name(){return ee(this,ha,"f")}get url(){return ee(this,da,"f")}get icon(){return ee(this,pa,"f")}get chains(){return ee(this,zn,"f")}get features(){return Object.assign({[ic]:{version:"1.0.0",connect:ee(this,ya,"f")},[ca]:{version:"1.0.0",disconnect:ee(this,Wi,"f")},[sc]:{version:"1.0.0",on:ee(this,ga,"f")},[Ln]:{version:"1.0.0",signMessage:ee(this,ba,"f")},[tr]:{version:"1.0.0",signIn:ee(this,va,"f")}},ee(this,Gr,"f"))}get accounts(){var e,t;return(t=(e=ee(this,Nt,"f"))===null||e===void 0?void 0:e.accounts)!==null&&t!==void 0?t:[]}get connected(){return!!ee(this,Nt,"f")}get isAuthorized(){return!!ee(this,Nt,"f")}get currentAuthorization(){return ee(this,Nt,"f")}get cachedAuthorizationResult(){return ee(this,pn,"f").get()}}Jn=new WeakMap,fa=new WeakMap,ha=new WeakMap,da=new WeakMap,pa=new WeakMap,jr=new WeakMap,Nt=new WeakMap,pn=new WeakMap,Tn=new WeakMap,wr=new WeakMap,zn=new WeakMap,Li=new WeakMap,Gr=new WeakMap,Pi=new WeakMap,ga=new WeakMap,ya=new WeakMap,Oi=new WeakMap,br=new WeakMap,Ui=new WeakMap,Yr=new WeakMap,Wi=new WeakMap,vr=new WeakMap,Zr=new WeakMap,zi=new WeakMap,ma=new WeakMap,wa=new WeakMap,Fi=new WeakMap,Di=new WeakMap,ba=new WeakMap,va=new WeakMap,Ki=new WeakMap,mr=new WeakSet,Ni=function(e,...t){var n;(n=ee(this,Jn,"f")[e])===null||n===void 0||n.forEach(s=>s.apply(null,t))},Hf=function(e,t){var n;ee(this,Jn,"f")[e]=(n=ee(this,Jn,"f")[e])===null||n===void 0?void 0:n.filter(s=>t!==s)};const Nm="To use mobile wallet adapter, you must have a compatible mobile wallet application installed on your device.",Om="This browser appears to be incompatible with mobile wallet adapter. Open this page in a compatible mobile browser app and try again.";class Um extends Mm{constructor(){super(...arguments),this.contentStyles=zm,this.contentHtml=Wm}initWithError(e){super.init(),this.populateError(e)}populateError(e){var t,n;const s=(t=this.dom)===null||t===void 0?void 0:t.getElementById("mobile-wallet-adapter-error-message"),i=(n=this.dom)===null||n===void 0?void 0:n.getElementById("mobile-wallet-adapter-error-action");if(s){if(e.name==="SolanaMobileWalletAdapterError")switch(e.code){case"ERROR_WALLET_NOT_FOUND":s.innerHTML=Nm,i&&i.addEventListener("click",()=>{window.location.href="https://solanamobile.com/wallets"});return;case"ERROR_BROWSER_NOT_SUPPORTED":s.innerHTML=Om,i&&(i.style.display="none");return}s.innerHTML=`An unexpected error occurred: ${e.message}`}else console.log("Failed to locate error dialog element")}}const Wm=`
<svg class="mobile-wallet-adapter-embedded-modal-error-icon" xmlns="http://www.w3.org/2000/svg" height="50px" viewBox="0 -960 960 960" width="50px" fill="#000000"><path d="M 280,-80 Q 197,-80 138.5,-138.5 80,-197 80,-280 80,-363 138.5,-421.5 197,-480 280,-480 q 83,0 141.5,58.5 58.5,58.5 58.5,141.5 0,83 -58.5,141.5 Q 363,-80 280,-80 Z M 824,-120 568,-376 Q 556,-389 542.5,-402.5 529,-416 516,-428 q 38,-24 61,-64 23,-40 23,-88 0,-75 -52.5,-127.5 Q 495,-760 420,-760 345,-760 292.5,-707.5 240,-655 240,-580 q 0,6 0.5,11.5 0.5,5.5 1.5,11.5 -18,2 -39.5,8 -21.5,6 -38.5,14 -2,-11 -3,-22 -1,-11 -1,-23 0,-109 75.5,-184.5 Q 311,-840 420,-840 q 109,0 184.5,75.5 75.5,75.5 75.5,184.5 0,43 -13.5,81.5 Q 653,-460 629,-428 l 251,252 z m -615,-61 71,-71 70,71 29,-28 -71,-71 71,-71 -28,-28 -71,71 -71,-71 -28,28 71,71 -71,71 z"/></svg>
<div class="mobile-wallet-adapter-embedded-modal-title">We can't find a wallet.</div>
<div id="mobile-wallet-adapter-error-message" class="mobile-wallet-adapter-embedded-modal-subtitle"></div>
<div>
    <button data-error-action id="mobile-wallet-adapter-error-action" class="mobile-wallet-adapter-embedded-modal-error-action">
        Find a wallet
    </button>
</div>
`,zm=`
.mobile-wallet-adapter-embedded-modal-content {
    text-align: center;
}

.mobile-wallet-adapter-embedded-modal-error-icon {
    margin-top: 24px;
}

.mobile-wallet-adapter-embedded-modal-title {
    margin: 18px 100px auto 100px;
    color: #000000;
    font-size: 2.75em;
    font-weight: 600;
}

.mobile-wallet-adapter-embedded-modal-subtitle {
    margin: 30px 60px 40px 60px;
    color: #000000;
    font-size: 1.25em;
    font-weight: 400;
}

.mobile-wallet-adapter-embedded-modal-error-action {
    display: block;
    width: 100%;
    height: 56px;
    /*margin-top: 40px;*/
    font-size: 1.25em;
    /*line-height: 24px;*/
    /*letter-spacing: -1%;*/
    background: #000000;
    color: #FFFFFF;
    border-radius: 18px;
}

/* Smaller screens */
@media all and (max-width: 600px) {
    .mobile-wallet-adapter-embedded-modal-title {
        font-size: 1.5em;
        margin-right: 12px;
        margin-left: 12px;
    }
    .mobile-wallet-adapter-embedded-modal-subtitle {
        margin-right: 12px;
        margin-left: 12px;
    }
}
`;function Fm(){return Fe(this,void 0,void 0,function*(){if(typeof window<"u"){const r=window.navigator.userAgent.toLowerCase(),e=new Um;r.includes("wv")?e.initWithError({name:"SolanaMobileWalletAdapterError",code:"ERROR_BROWSER_NOT_SUPPORTED",message:""}):e.initWithError({name:"SolanaMobileWalletAdapterError",code:"ERROR_WALLET_NOT_FOUND",message:""}),e.open()}})}const Yo="SolanaMobileWalletAdapterDefaultAuthorizationCache";function Dm(){let r;try{r=window.localStorage}catch{}return{clear(){return Fe(this,void 0,void 0,function*(){if(r)try{r.removeItem(Yo)}catch{}})},get(){return Fe(this,void 0,void 0,function*(){if(r)try{const e=JSON.parse(r.getItem(Yo));if(e&&e.accounts){const t=e.accounts.map(n=>Object.assign(Object.assign({},n),{publicKey:"publicKey"in n?new Uint8Array(Object.values(n.publicKey)):la.decode(n.address)}));return Object.assign(Object.assign({},e),{accounts:t})}else return e||void 0}catch{}})},set(e){return Fe(this,void 0,void 0,function*(){if(r)try{r.setItem(Yo,JSON.stringify(e))}catch{}})}}}function Km(){return{select(r){return Fe(this,void 0,void 0,function*(){return r.length===1?r[0]:r.includes(ss)?ss:r[0]})}}}function Pe(r,e,t,n){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(w){try{g(n.next(w))}catch(S){o(S)}}function u(w){try{g(n.throw(w))}catch(S){o(S)}}function g(w){w.done?i(w.value):s(w.value).then(a,u)}g((n=n.apply(r,[])).next())})}function he(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)}function $t(r,e,t,n,s){if(typeof e=="function"?r!==e||!0:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(r,t),t}const Sa="standard:connect",qm="standard:disconnect",$m="standard:events";function Zo(r){return window.btoa(String.fromCharCode.call(null,...r))}function Vm(){return typeof window<"u"&&window.isSecureContext&&typeof document<"u"&&/android/i.test(navigator.userAgent)}var Et,Ke,Pn,bn,qi,yn,Fn,Ea,ka,Gf,as,$i,Cn;const Vi=jf,Hm=64;function jm(r){return"version"in r}function Yf(r){switch(r){case"mainnet-beta":return"solana:mainnet";case"testnet":return"solana:testnet";case"devnet":return"solana:devnet";default:return r}}class Gm extends cy{constructor(e,t){super(),Et.add(this),this.supportedTransactionVersions=new Set(["legacy",0]),Ke.set(this,void 0),Pn.set(this,!1),bn.set(this,Vm()?Qe.Loadable:Qe.Unsupported),qi.set(this,void 0),yn.set(this,void 0),Fn.set(this,void 0),Ea.set(this,n=>Pe(this,void 0,void 0,function*(){if(n.accounts&&n.accounts.length>0){he(this,Et,"m",Gf).call(this);const s=yield he(this,qi,"f").call(this,n.accounts);s!==he(this,yn,"f")&&($t(this,yn,s),$t(this,Fn,void 0),this.emit("connect",this.publicKey))}})),$t(this,qi,n=>Pe(this,void 0,void 0,function*(){var s;const i=yield t.addressSelector.select(n.map(({publicKey:o})=>Zo(o)));return(s=n.find(({publicKey:o})=>Zo(o)===i))!==null&&s!==void 0?s:n[0]})),$t(this,Ke,e),he(this,Ke,"f").features[$m].on("change",he(this,Ea,"f")),this.name=he(this,Ke,"f").name,this.icon=he(this,Ke,"f").icon,this.url=he(this,Ke,"f").url}get publicKey(){var e;if(!he(this,Fn,"f")&&he(this,yn,"f"))try{$t(this,Fn,new ie(he(this,yn,"f").publicKey),"f")}catch(t){throw new Rf(t instanceof Error&&t?.message||"Unknown error",t)}return(e=he(this,Fn,"f"))!==null&&e!==void 0?e:null}get connected(){return he(this,Ke,"f").connected}get connecting(){return he(this,Pn,"f")}get readyState(){return he(this,bn,"f")}autoConnect_DO_NOT_USE_OR_YOU_WILL_BE_FIRED(){return Pe(this,void 0,void 0,function*(){return yield this.autoConnect()})}autoConnect(){return Pe(this,void 0,void 0,function*(){he(this,Et,"m",ka).call(this,!0)})}connect(){return Pe(this,void 0,void 0,function*(){he(this,Et,"m",ka).call(this)})}performAuthorization(e){return Pe(this,void 0,void 0,function*(){try{const t=yield he(this,Ke,"f").cachedAuthorizationResult;return t?(yield he(this,Ke,"f").features[Sa].connect({silent:!0}),t):(e?yield he(this,Ke,"f").features[tr].signIn(e):yield he(this,Ke,"f").features[Sa].connect(),yield yield he(this,Ke,"f").cachedAuthorizationResult)}catch(t){throw new is(t instanceof Error&&t.message||"Unknown error",t)}})}disconnect(){return Pe(this,void 0,void 0,function*(){return yield he(this,Et,"m",Cn).call(this,()=>Pe(this,void 0,void 0,function*(){$t(this,Pn,!1),$t(this,Fn,void 0),$t(this,yn,void 0),yield he(this,Ke,"f").features[qm].disconnect(),this.emit("disconnect")}))})}signIn(e){return Pe(this,void 0,void 0,function*(){return he(this,Et,"m",Cn).call(this,()=>Pe(this,void 0,void 0,function*(){var t;if(he(this,bn,"f")!==Qe.Installed&&he(this,bn,"f")!==Qe.Loadable)throw new ai;$t(this,Pn,!0);try{const n=yield he(this,Ke,"f").features[tr].signIn(Object.assign(Object.assign({},e),{domain:(t=e?.domain)!==null&&t!==void 0?t:window.location.host}));if(n.length>0)return n[0];throw new Error("Sign in failed, no sign in result returned by wallet")}catch(n){throw new is(n instanceof Error&&n.message||"Unknown error",n)}finally{$t(this,Pn,!1)}}))})}signMessage(e){return Pe(this,void 0,void 0,function*(){return yield he(this,Et,"m",Cn).call(this,()=>Pe(this,void 0,void 0,function*(){const t=he(this,Et,"m",as).call(this);try{return(yield he(this,Ke,"f").features[Ln].signMessage({account:t,message:e}))[0].signature}catch(n){throw new Mf(n?.message,n)}}))})}sendTransaction(e,t,n){return Pe(this,void 0,void 0,function*(){return yield he(this,Et,"m",Cn).call(this,()=>Pe(this,void 0,void 0,function*(){const s=he(this,Et,"m",as).call(this);try{let i=function(){let o;switch(t.commitment){case"confirmed":case"finalized":case"processed":o=t.commitment;break;default:o="finalized"}let a;switch(n?.preflightCommitment){case"confirmed":case"finalized":case"processed":a=n.preflightCommitment;break;case void 0:a=o;break;default:a="finalized"}return(a==="finalized"?2:a==="confirmed"?1:0)<(o==="finalized"?2:o==="confirmed"?1:0)?a:o};if(Dt in he(this,Ke,"f").features){const o=Yf(he(this,Ke,"f").currentAuthorization.chain),[a]=(yield he(this,Ke,"f").features[Dt].signAndSendTransaction({account:s,transaction:e.serialize(),chain:o,options:n?{skipPreflight:n.skipPreflight,maxRetries:n.maxRetries}:void 0})).map((u=>Zo(u.signature)));return a}else{const[o]=yield he(this,Et,"m",$i).call(this,[e]);if(jm(o))return yield t.sendTransaction(o);{const a=o.serialize();return yield t.sendRawTransaction(a,Object.assign(Object.assign({},n),{preflightCommitment:i()}))}}}catch(i){throw new jn(i?.message,i)}}))})}signTransaction(e){return Pe(this,void 0,void 0,function*(){return yield he(this,Et,"m",Cn).call(this,()=>Pe(this,void 0,void 0,function*(){const[t]=yield he(this,Et,"m",$i).call(this,[e]);return t}))})}signAllTransactions(e){return Pe(this,void 0,void 0,function*(){return yield he(this,Et,"m",Cn).call(this,()=>Pe(this,void 0,void 0,function*(){return yield he(this,Et,"m",$i).call(this,e)}))})}}Ke=new WeakMap,Pn=new WeakMap,bn=new WeakMap,qi=new WeakMap,yn=new WeakMap,Fn=new WeakMap,Ea=new WeakMap,Et=new WeakSet,ka=function(e=!1){return Pe(this,void 0,void 0,function*(){if(!(this.connecting||this.connected))return yield he(this,Et,"m",Cn).call(this,()=>Pe(this,void 0,void 0,function*(){if(he(this,bn,"f")!==Qe.Installed&&he(this,bn,"f")!==Qe.Loadable)throw new ai;$t(this,Pn,!0);try{yield he(this,Ke,"f").features[Sa].connect({silent:e})}catch(t){throw new is(t instanceof Error&&t.message||"Unknown error",t)}finally{$t(this,Pn,!1)}}))})},Gf=function(){he(this,bn,"f")!==Qe.Installed&&this.emit("readyStateChange",$t(this,bn,Qe.Installed))},as=function(){if(!he(this,Ke,"f").isAuthorized||!he(this,yn,"f"))throw new an;return he(this,yn,"f")},$i=function(e){return Pe(this,void 0,void 0,function*(){const t=he(this,Et,"m",as).call(this);try{if(qe in he(this,Ke,"f").features)return he(this,Ke,"f").features[qe].signTransaction(...e.map(n=>({account:t,transaction:n.serialize()}))).then(n=>n.map(s=>{const i=s.signedTransaction,a=i[0]*Hm+1;return ws.deserializeMessageVersion(i.slice(a,i.length))==="legacy"?_e.from(i):Lr.deserialize(i)}));throw new Error("Connected wallet does not support signing transactions")}catch(n){throw new Gn(n?.message,n)}})},Cn=function(e){return Pe(this,void 0,void 0,function*(){try{return yield e()}catch(t){throw this.emit("error",t),t}})};class Ym extends Gm{constructor(e){var t;const n=Yf((t=e.chain)!==null&&t!==void 0?t:e.cluster);super(new Pm({appIdentity:e.appIdentity,authorizationCache:{set:e.authorizationResultCache.set,get:()=>Pe(this,void 0,void 0,function*(){return yield e.authorizationResultCache.get()}),clear:e.authorizationResultCache.clear},chains:[n],chainSelector:Km(),onWalletNotFound:()=>Pe(this,void 0,void 0,function*(){e.onWalletNotFound(this)})}),{addressSelector:e.addressSelector,chain:n})}}class Zm extends Ym{}function Jm(){return{select(r){return Pe(this,void 0,void 0,function*(){return r[0]})}}}function Xm(){return Dm()}function Qm(r){return Pe(this,void 0,void 0,function*(){return Fm()})}function ew(){return Qm}function tw(r,e){if(r===e)return!0;const t=r.length;if(t!==e.length)return!1;for(let n=0;n<t;n++)if(r[n]!==e[n])return!1;return!0}function nw(r){if(r.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let g=0;g<e.length;g++)e[g]=255;for(let g=0;g<r.length;g++){const w=r.charAt(g),S=w.charCodeAt(0);if(e[S]!==255)throw new TypeError(w+" is ambiguous");e[S]=g}const t=r.length,n=r.charAt(0),s=Math.log(t)/Math.log(256),i=Math.log(256)/Math.log(t);function o(g){if(g instanceof Uint8Array||(ArrayBuffer.isView(g)?g=new Uint8Array(g.buffer,g.byteOffset,g.byteLength):Array.isArray(g)&&(g=Uint8Array.from(g))),!(g instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(g.length===0)return"";let w=0,S=0,E=0;const b=g.length;for(;E!==b&&g[E]===0;)E++,w++;const A=(b-E)*i+1>>>0,x=new Uint8Array(A);for(;E!==b;){let W=g[E],N=0;for(let V=A-1;(W!==0||N<S)&&V!==-1;V--,N++)W+=256*x[V]>>>0,x[V]=W%t>>>0,W=W/t>>>0;if(W!==0)throw new Error("Non-zero carry");S=N,E++}let C=A-S;for(;C!==A&&x[C]===0;)C++;let P=n.repeat(w);for(;C<A;++C)P+=r.charAt(x[C]);return P}function a(g){if(typeof g!="string")throw new TypeError("Expected String");if(g.length===0)return new Uint8Array;let w=0,S=0,E=0;for(;g[w]===n;)S++,w++;const b=(g.length-w)*s+1>>>0,A=new Uint8Array(b);for(;w<g.length;){const W=g.charCodeAt(w);if(W>255)return;let N=e[W];if(N===255)return;let V=0;for(let Y=b-1;(N!==0||V<E)&&Y!==-1;Y--,V++)N+=t*A[Y]>>>0,A[Y]=N%256>>>0,N=N/256>>>0;if(N!==0)throw new Error("Non-zero carry");E=V,w++}let x=b-E;for(;x!==b&&A[x]===0;)x++;const C=new Uint8Array(S+(b-x));let P=S;for(;x!==b;)C[P++]=A[x++];return C}function u(g){const w=a(g);if(w)return w;throw new Error("Non-base"+t+" character")}return{encode:o,decodeUnsafe:a,decode:u}}var rw="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const iw=nw(rw);var ue=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},wt=function(r,e,t,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!s:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(r,t):s?s.value=t:e.set(r,t),t},xt,Wt,Xn,Qn,Dn,Jr,cs,Ae,us,_a,Hi,Aa,Qr,Ia,Qu,el,tl,nl;class sw extends Tf{get name(){return ue(this,Ae,"f").name}get url(){return"https://github.com/solana-labs/wallet-standard"}get icon(){return ue(this,Ae,"f").icon}get readyState(){return ue(this,us,"f")}get publicKey(){return ue(this,Xn,"f")}get connecting(){return ue(this,Qn,"f")}get supportedTransactionVersions(){return ue(this,cs,"f")}get wallet(){return ue(this,Ae,"f")}get standard(){return!0}constructor({wallet:e}){super(),xt.add(this),Wt.set(this,void 0),Xn.set(this,void 0),Qn.set(this,void 0),Dn.set(this,void 0),Jr.set(this,void 0),cs.set(this,void 0),Ae.set(this,void 0),us.set(this,typeof window>"u"||typeof document>"u"?Qe.Unsupported:Qe.Installed),Ia.set(this,t=>{if("accounts"in t){const n=ue(this,Ae,"f").accounts[0];ue(this,Wt,"f")&&!ue(this,Dn,"f")&&n!==ue(this,Wt,"f")&&(n?ue(this,xt,"m",Hi).call(this,n):(this.emit("error",new iy),ue(this,xt,"m",Aa).call(this)))}"features"in t&&ue(this,xt,"m",Qr).call(this)}),wt(this,Ae,e,"f"),wt(this,Wt,null,"f"),wt(this,Xn,null,"f"),wt(this,Qn,!1,"f"),wt(this,Dn,!1,"f"),wt(this,Jr,ue(this,Ae,"f").features[sc].on("change",ue(this,Ia,"f")),"f"),ue(this,xt,"m",Qr).call(this)}destroy(){wt(this,Wt,null,"f"),wt(this,Xn,null,"f"),wt(this,Qn,!1,"f"),wt(this,Dn,!1,"f");const e=ue(this,Jr,"f");e&&(wt(this,Jr,null,"f"),e())}async autoConnect(){return ue(this,xt,"m",_a).call(this,{silent:!0})}async connect(){return ue(this,xt,"m",_a).call(this)}async disconnect(){if(ca in ue(this,Ae,"f").features)try{wt(this,Dn,!0,"f"),await ue(this,Ae,"f").features[ca].disconnect()}catch(e){this.emit("error",new sy(e?.message,e))}finally{wt(this,Dn,!1,"f")}ue(this,xt,"m",Aa).call(this)}async sendTransaction(e,t,n={}){try{const s=ue(this,Wt,"f");if(!s)throw new an;let i;if(Dt in ue(this,Ae,"f").features)if(s.features.includes(Dt))i=Dt;else if(qe in ue(this,Ae,"f").features&&s.features.includes(qe))i=qe;else throw new kr;else if(qe in ue(this,Ae,"f").features){if(!s.features.includes(qe))throw new kr;i=qe}else throw new Vr;const o=Wy(t.rpcEndpoint);if(!s.chains.includes(o))throw new jn;try{const{signers:a,...u}=n;let g;if(Yn(e)?(a?.length&&e.sign(a),g=e.serialize()):(e=await this.prepareTransaction(e,t,u),a?.length&&e.partialSign(...a),g=new Uint8Array(e.serialize({requireAllSignatures:!1,verifySignatures:!1}))),i===Dt){const[w]=await ue(this,Ae,"f").features[Dt].signAndSendTransaction({account:s,chain:o,transaction:g,options:{preflightCommitment:qo(u.preflightCommitment||t.commitment),skipPreflight:u.skipPreflight,maxRetries:u.maxRetries,minContextSlot:u.minContextSlot}});return iw.encode(w.signature)}else{const[w]=await ue(this,Ae,"f").features[qe].signTransaction({account:s,chain:o,transaction:g,options:{preflightCommitment:qo(u.preflightCommitment||t.commitment),minContextSlot:u.minContextSlot}});return await t.sendRawTransaction(w.signedTransaction,{...u,preflightCommitment:qo(u.preflightCommitment||t.commitment)})}}catch(a){throw a instanceof Ut?a:new jn(a?.message,a)}}catch(s){throw this.emit("error",s),s}}}Wt=new WeakMap,Xn=new WeakMap,Qn=new WeakMap,Dn=new WeakMap,Jr=new WeakMap,cs=new WeakMap,Ae=new WeakMap,us=new WeakMap,Ia=new WeakMap,xt=new WeakSet,_a=async function(e){try{if(this.connected||this.connecting)return;if(ue(this,us,"f")!==Qe.Installed)throw new ai;if(wt(this,Qn,!0,"f"),!ue(this,Ae,"f").accounts.length)try{await ue(this,Ae,"f").features[ic].connect(e)}catch(n){throw new is(n?.message,n)}const t=ue(this,Ae,"f").accounts[0];if(!t)throw new kr;ue(this,xt,"m",Hi).call(this,t)}catch(t){throw this.emit("error",t),t}finally{wt(this,Qn,!1,"f")}},Hi=function(e){let t;try{t=new ie(e.address)}catch(n){throw new Rf(n?.message,n)}wt(this,Wt,e,"f"),wt(this,Xn,t,"f"),ue(this,xt,"m",Qr).call(this),this.emit("connect",t)},Aa=function(){wt(this,Wt,null,"f"),wt(this,Xn,null,"f"),ue(this,xt,"m",Qr).call(this),this.emit("disconnect")},Qr=function(){const e=Dt in ue(this,Ae,"f").features?ue(this,Ae,"f").features[Dt].supportedTransactionVersions:ue(this,Ae,"f").features[qe].supportedTransactionVersions;wt(this,cs,tw(e,["legacy"])?null:new Set(e),"f"),qe in ue(this,Ae,"f").features&&ue(this,Wt,"f")?.features.includes(qe)?(this.signTransaction=ue(this,xt,"m",Qu),this.signAllTransactions=ue(this,xt,"m",el)):(delete this.signTransaction,delete this.signAllTransactions),Ln in ue(this,Ae,"f").features&&ue(this,Wt,"f")?.features.includes(Ln)?this.signMessage=ue(this,xt,"m",tl):delete this.signMessage,tr in ue(this,Ae,"f").features?this.signIn=ue(this,xt,"m",nl):delete this.signIn},Qu=async function(e){try{const t=ue(this,Wt,"f");if(!t)throw new an;if(!(qe in ue(this,Ae,"f").features))throw new Vr;if(!t.features.includes(qe))throw new kr;try{const s=(await ue(this,Ae,"f").features[qe].signTransaction({account:t,transaction:Yn(e)?e.serialize():new Uint8Array(e.serialize({requireAllSignatures:!1,verifySignatures:!1}))}))[0].signedTransaction;return Yn(e)?Lr.deserialize(s):_e.from(s)}catch(n){throw n instanceof Ut?n:new Gn(n?.message,n)}}catch(t){throw this.emit("error",t),t}},el=async function(e){try{const t=ue(this,Wt,"f");if(!t)throw new an;if(!(qe in ue(this,Ae,"f").features))throw new Vr;if(!t.features.includes(qe))throw new kr;try{const n=await ue(this,Ae,"f").features[qe].signTransaction(...e.map(s=>({account:t,transaction:Yn(s)?s.serialize():new Uint8Array(s.serialize({requireAllSignatures:!1,verifySignatures:!1}))})));return e.map((s,i)=>{const o=n[i].signedTransaction;return Yn(s)?Lr.deserialize(o):_e.from(o)})}catch(n){throw new Gn(n?.message,n)}}catch(t){throw this.emit("error",t),t}},tl=async function(e){try{const t=ue(this,Wt,"f");if(!t)throw new an;if(!(Ln in ue(this,Ae,"f").features))throw new Vr;if(!t.features.includes(Ln))throw new kr;try{return(await ue(this,Ae,"f").features[Ln].signMessage({account:t,message:e}))[0].signature}catch(n){throw new Mf(n?.message,n)}}catch(t){throw this.emit("error",t),t}},nl=async function(e={}){try{if(!(tr in ue(this,Ae,"f").features))throw new Vr;let t;try{[t]=await ue(this,Ae,"f").features[tr].signIn(e)}catch(n){throw new gu(n?.message,n)}if(!t)throw new gu;return ue(this,xt,"m",Hi).call(this,t.account),t}catch(t){throw this.emit("error",t),t}};const ow=uy;var aw=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},cw=function(r,e,t,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!s:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(r,t):s?s.value=t:e.set(r,t),t},ji;let Vt;const As=new Set;function uw(r){ei=void 0,As.add(r)}function lw(r){ei=void 0,As.delete(r)}const _r={};function fw(){if(Vt||(Vt=Object.freeze({register:rl,get:hw,on:dw}),typeof window>"u"))return Vt;const r=Object.freeze({register:rl});try{window.addEventListener("wallet-standard:register-wallet",({detail:e})=>e(r))}catch(e){console.error(`wallet-standard:register-wallet event listener could not be added
`,e)}try{window.dispatchEvent(new pw(r))}catch(e){console.error(`wallet-standard:app-ready event could not be dispatched
`,e)}return Vt}function rl(...r){return r=r.filter(e=>!As.has(e)),r.length?(r.forEach(e=>uw(e)),_r.register?.forEach(e=>xa(()=>e(...r))),function(){r.forEach(t=>lw(t)),_r.unregister?.forEach(t=>xa(()=>t(...r)))}):()=>{}}let ei;function hw(){return ei||(ei=[...As]),ei}function dw(r,e){return _r[r]?.push(e)||(_r[r]=[e]),function(){_r[r]=_r[r]?.filter(n=>e!==n)}}function xa(r){try{r()}catch(e){console.error(e)}}class pw extends Event{get detail(){return aw(this,ji,"f")}get type(){return"wallet-standard:app-ready"}constructor(e){super("wallet-standard:app-ready",{bubbles:!1,cancelable:!1,composed:!1}),ji.set(this,void 0),cw(this,ji,e,"f")}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}}ji=new WeakMap;function gw(){if(Vt||(Vt=fw(),typeof window>"u"))return Vt;const r=window.navigator.wallets||[];if(!Array.isArray(r))return console.error("window.navigator.wallets is not an array"),Vt;const{register:e}=Vt,t=(...n)=>n.forEach(s=>xa(()=>s({register:e})));try{Object.defineProperty(window.navigator,"wallets",{value:Object.freeze({push:t})})}catch{return console.error("window.navigator.wallets could not be set"),Vt}return t(...r),Vt}function yw(r){const e=il(()=>new Set),{get:t,on:n}=il(()=>gw()),[s,i]=de.useState(()=>sl(t()));de.useEffect(()=>{const a=[n("register",(...u)=>i(g=>[...g,...sl(u)])),n("unregister",(...u)=>i(g=>g.filter(w=>u.some(S=>S===w.wallet))))];return()=>a.forEach(u=>u())},[n]);const o=mw(s);return de.useEffect(()=>{if(!o)return;const a=new Set(s);new Set(o.filter(g=>!a.has(g))).forEach(g=>g.destroy())},[o,s]),de.useEffect(()=>()=>s.forEach(a=>a.destroy()),[]),de.useMemo(()=>[...s,...r.filter(({name:a})=>s.some(u=>u.name===a)?(e.has(a)||(e.add(a),console.warn(`${a} was registered as a Standard Wallet. The Wallet Adapter for ${a} can be removed from your app.`)),!1):!0)],[s,r,e])}function il(r){const e=de.useRef(void 0);return e.current===void 0&&(e.current={value:r()}),e.current.value}function mw(r){const e=de.useRef(void 0);return de.useEffect(()=>{e.current=r}),e.current}function sl(r){return r.filter(ow).map(e=>new sw({wallet:e}))}var Rr;(function(r){r[r.DESKTOP_WEB=0]="DESKTOP_WEB",r[r.MOBILE_WEB=1]="MOBILE_WEB"})(Rr||(Rr={}));function ww(r){return/(WebView|Version\/.+(Chrome)\/(\d+)\.(\d+)\.(\d+)\.(\d+)|; wv\).+(Chrome)\/(\d+)\.(\d+)\.(\d+)\.(\d+))/i.test(r)}function bw({adapters:r,userAgentString:e}){return r.some(t=>t.name!==Vi&&t.readyState===Qe.Installed)?Rr.DESKTOP_WEB:e&&/android/i.test(e)&&!ww(e)?Rr.MOBILE_WEB:Rr.DESKTOP_WEB}function vw(r){return r?/devnet/i.test(r)?"devnet":/testnet/i.test(r)?"testnet":"mainnet-beta":"mainnet-beta"}function Sw({children:r,wallets:e,adapter:t,isUnloadingRef:n,onAutoConnectRequest:s,onConnectError:i,onError:o,onSelectWallet:a}){const u=de.useRef(!1),[g,w]=de.useState(!1),S=de.useRef(!1),[E,b]=de.useState(!1),[A,x]=de.useState(()=>t?.publicKey??null),[C,P]=de.useState(()=>t?.connected??!1),W=de.useRef(o);de.useEffect(()=>(W.current=o,()=>{W.current=void 0}),[o]);const N=de.useRef((f,m)=>(n.current||(W.current?W.current(f,m):(console.error(f,m),f instanceof ai&&typeof window<"u"&&m&&window.open(m.url,"_blank"))),f)),[V,Y]=de.useState(()=>e.map(f=>({adapter:f,readyState:f.readyState})).filter(({readyState:f})=>f!==Qe.Unsupported));de.useEffect(()=>{Y(m=>e.map((_,B)=>{const L=m[B];return L&&L.adapter===_&&L.readyState===_.readyState?L:{adapter:_,readyState:_.readyState}}).filter(({readyState:_})=>_!==Qe.Unsupported));function f(m){Y(_=>{const B=_.findIndex(({adapter:z})=>z===this);if(B===-1)return _;const{adapter:L}=_[B];return[..._.slice(0,B),{adapter:L,readyState:m},..._.slice(B+1)].filter(({readyState:z})=>z!==Qe.Unsupported)})}return e.forEach(m=>m.on("readyStateChange",f,m)),()=>{e.forEach(m=>m.off("readyStateChange",f,m))}},[t,e]);const $=de.useMemo(()=>V.find(f=>f.adapter===t)??null,[t,V]);de.useEffect(()=>{if(!t)return;const f=B=>{x(B),u.current=!1,w(!1),P(!0),S.current=!1,b(!1)},m=()=>{n.current||(x(null),u.current=!1,w(!1),P(!1),S.current=!1,b(!1))},_=B=>{N.current(B,t)};return t.on("connect",f),t.on("disconnect",m),t.on("error",_),()=>{t.off("connect",f),t.off("disconnect",m),t.off("error",_),m()}},[t,n]);const Q=de.useRef(!1);de.useEffect(()=>()=>{Q.current=!1},[t]),de.useEffect(()=>{Q.current||u.current||C||!s||!($?.readyState===Qe.Installed||$?.readyState===Qe.Loadable)||(u.current=!0,w(!0),Q.current=!0,(async function(){try{await s()}catch{i()}finally{w(!1),u.current=!1}})())},[C,s,i,$]);const Z=de.useCallback(async(f,m,_)=>{if(!t)throw N.current(new mu);if(!C)throw N.current(new an,t);return await t.sendTransaction(f,m,_)},[t,C]),M=de.useMemo(()=>t&&"signTransaction"in t?async f=>{if(!C)throw N.current(new an,t);return await t.signTransaction(f)}:void 0,[t,C]),O=de.useMemo(()=>t&&"signAllTransactions"in t?async f=>{if(!C)throw N.current(new an,t);return await t.signAllTransactions(f)}:void 0,[t,C]),F=de.useMemo(()=>t&&"signMessage"in t?async f=>{if(!C)throw N.current(new an,t);return await t.signMessage(f)}:void 0,[t,C]),D=de.useMemo(()=>t&&"signIn"in t?async f=>await t.signIn(f):void 0,[t]),y=de.useCallback(async()=>{if(u.current||S.current||$?.adapter.connected)return;if(!$)throw N.current(new mu);const{adapter:f,readyState:m}=$;if(!(m===Qe.Installed||m===Qe.Loadable))throw N.current(new ai,f);u.current=!0,w(!0);try{await f.connect()}catch(_){throw i(),_}finally{w(!1),u.current=!1}},[i,$]),c=de.useCallback(async()=>{if(!S.current&&t){S.current=!0,b(!0);try{await t.disconnect()}finally{b(!1),S.current=!1}}},[t]);return Ba.createElement(Cf.Provider,{value:{autoConnect:!!s,wallets:V,wallet:$,publicKey:A,connected:C,connecting:g,disconnecting:E,select:a,connect:y,disconnect:c,sendTransaction:Z,signTransaction:M,signAllTransactions:O,signMessage:F,signIn:D}},r)}let Jo;function Ew(){return Jo===void 0&&(Jo=globalThis.navigator?.userAgent??null),Jo}function ol(r){const e=Ew();return bw({adapters:r,userAgentString:e})===Rr.MOBILE_WEB}function kw(){const r=globalThis.location;if(r)return`${r.protocol}//${r.host}`}function Pw({children:r,wallets:e,autoConnect:t,localStorageKey:n="walletName",onError:s}){const{connection:i}=ry(),o=yw(e),a=de.useMemo(()=>{if(!ol(o))return null;const W=o.find(N=>N.name===Vi);return W||new Zm({addressSelector:Jm(),appIdentity:{uri:kw()},authorizationResultCache:Xm(),cluster:vw(i?.rpcEndpoint),onWalletNotFound:ew()})},[o,i?.rpcEndpoint]),u=de.useMemo(()=>a==null||o.indexOf(a)!==-1?o:[a,...o],[o,a]),[g,w]=hy(n,null),S=de.useMemo(()=>u.find(W=>W.name===g)??null,[u,g]),E=de.useCallback(W=>{g!==W&&(S&&S.name!==Vi&&S.disconnect(),w(W))},[S,w,g]);de.useEffect(()=>{if(!S)return;function W(){x.current||w(null)}return S.on("disconnect",W),()=>{S.off("disconnect",W)}},[S,o,w,g]);const b=de.useRef(!1),A=de.useMemo(()=>{if(!(!t||!S))return async()=>{(t===!0||await t(S))&&(b.current?await S.connect():await S.autoConnect())}},[t,S]),x=de.useRef(!1);de.useEffect(()=>{if(g===Vi&&ol(o)){x.current=!1;return}function W(){x.current=!0}return window.addEventListener("beforeunload",W),()=>{window.removeEventListener("beforeunload",W)}},[o,g]);const C=de.useCallback(()=>{S&&E(null)},[S,E]),P=de.useCallback(W=>{b.current=!0,E(W)},[E]);return Ba.createElement(Sw,{wallets:u,adapter:S,isUnloadingRef:x,onAutoConnectRequest:A,onConnectError:C,onError:s,onSelectWallet:P},r)}export{Ef as A,ay as B,Mw as C,ny as L,ie as P,si as S,Me as T,Qe as W,iy as a,pe as b,Rf as c,ai as d,is as e,kr as f,sy as g,an as h,Cw as i,Yn as j,Ut as k,jn as l,Gn as m,Mf as n,yu as o,ey as p,Pw as q,Nl as r,Tw as s,Rw as t,fy as u,Pl as v,Cc as w,At as x,_e as y,Lw as z};
