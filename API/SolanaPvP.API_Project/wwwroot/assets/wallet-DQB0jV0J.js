import{r as ht,R as Yo}from"./router-4JuQSWMB.js";import{b as Jo,g as Dr}from"./vendor-Dcsd2E38.js";var ws={},vr={},Ia;function Wl(){if(Ia)return vr;Ia=1,vr.byteLength=c,vr.toByteArray=p,vr.fromByteArray=A;for(var r=[],t=[],e=typeof Uint8Array<"u"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,i=n.length;s<i;++s)r[s]=n[s],t[n.charCodeAt(s)]=s;t[45]=62,t[95]=63;function o(b){var B=b.length;if(B%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var M=b.indexOf("=");M===-1&&(M=B);var C=M===B?0:4-M%4;return[M,C]}function c(b){var B=o(b),M=B[0],C=B[1];return(M+C)*3/4-C}function u(b,B,M){return(B+M)*3/4-M}function p(b){var B,M=o(b),C=M[0],O=M[1],D=new e(u(b,C,O)),N=0,V=O>0?C-4:C,Z;for(Z=0;Z<V;Z+=4)B=t[b.charCodeAt(Z)]<<18|t[b.charCodeAt(Z+1)]<<12|t[b.charCodeAt(Z+2)]<<6|t[b.charCodeAt(Z+3)],D[N++]=B>>16&255,D[N++]=B>>8&255,D[N++]=B&255;return O===2&&(B=t[b.charCodeAt(Z)]<<2|t[b.charCodeAt(Z+1)]>>4,D[N++]=B&255),O===1&&(B=t[b.charCodeAt(Z)]<<10|t[b.charCodeAt(Z+1)]<<4|t[b.charCodeAt(Z+2)]>>2,D[N++]=B>>8&255,D[N++]=B&255),D}function y(b){return r[b>>18&63]+r[b>>12&63]+r[b>>6&63]+r[b&63]}function _(b,B,M){for(var C,O=[],D=B;D<M;D+=3)C=(b[D]<<16&16711680)+(b[D+1]<<8&65280)+(b[D+2]&255),O.push(y(C));return O.join("")}function A(b){for(var B,M=b.length,C=M%3,O=[],D=16383,N=0,V=M-C;N<V;N+=D)O.push(_(b,N,N+D>V?V:N+D));return C===1?(B=b[M-1],O.push(r[B>>2]+r[B<<4&63]+"==")):C===2&&(B=(b[M-2]<<8)+b[M-1],O.push(r[B>>10]+r[B>>4&63]+r[B<<2&63]+"=")),O.join("")}return vr}var Zr={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var Ra;function ql(){return Ra||(Ra=1,Zr.read=function(r,t,e,n,s){var i,o,c=s*8-n-1,u=(1<<c)-1,p=u>>1,y=-7,_=e?s-1:0,A=e?-1:1,b=r[t+_];for(_+=A,i=b&(1<<-y)-1,b>>=-y,y+=c;y>0;i=i*256+r[t+_],_+=A,y-=8);for(o=i&(1<<-y)-1,i>>=-y,y+=n;y>0;o=o*256+r[t+_],_+=A,y-=8);if(i===0)i=1-p;else{if(i===u)return o?NaN:(b?-1:1)*(1/0);o=o+Math.pow(2,n),i=i-p}return(b?-1:1)*o*Math.pow(2,i-n)},Zr.write=function(r,t,e,n,s,i){var o,c,u,p=i*8-s-1,y=(1<<p)-1,_=y>>1,A=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,b=n?0:i-1,B=n?1:-1,M=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(c=isNaN(t)?1:0,o=y):(o=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-o))<1&&(o--,u*=2),o+_>=1?t+=A/u:t+=A*Math.pow(2,1-_),t*u>=2&&(o++,u/=2),o+_>=y?(c=0,o=y):o+_>=1?(c=(t*u-1)*Math.pow(2,s),o=o+_):(c=t*Math.pow(2,_-1)*Math.pow(2,s),o=0));s>=8;r[e+b]=c&255,b+=B,c/=256,s-=8);for(o=o<<s|c,p+=s;p>0;r[e+b]=o&255,b+=B,o/=256,p-=8);r[e+b-B]|=M*128}),Zr}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var ka;function Xo(){return ka||(ka=1,(function(r){const t=Wl(),e=ql(),n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=c,r.SlowBuffer=D,r.INSPECT_MAX_BYTES=50;const s=2147483647;r.kMaxLength=s,c.TYPED_ARRAY_SUPPORT=i(),!c.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{const v=new Uint8Array(1),d={foo:function(){return 42}};return Object.setPrototypeOf(d,Uint8Array.prototype),Object.setPrototypeOf(v,d),v.foo()===42}catch{return!1}}Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}});function o(v){if(v>s)throw new RangeError('The value "'+v+'" is invalid for option "size"');const d=new Uint8Array(v);return Object.setPrototypeOf(d,c.prototype),d}function c(v,d,g){if(typeof v=="number"){if(typeof d=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return _(v)}return u(v,d,g)}c.poolSize=8192;function u(v,d,g){if(typeof v=="string")return A(v,d);if(ArrayBuffer.isView(v))return B(v);if(v==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof v);if(Le(v,ArrayBuffer)||v&&Le(v.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Le(v,SharedArrayBuffer)||v&&Le(v.buffer,SharedArrayBuffer)))return M(v,d,g);if(typeof v=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const R=v.valueOf&&v.valueOf();if(R!=null&&R!==v)return c.from(R,d,g);const z=C(v);if(z)return z;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof v[Symbol.toPrimitive]=="function")return c.from(v[Symbol.toPrimitive]("string"),d,g);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof v)}c.from=function(v,d,g){return u(v,d,g)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array);function p(v){if(typeof v!="number")throw new TypeError('"size" argument must be of type number');if(v<0)throw new RangeError('The value "'+v+'" is invalid for option "size"')}function y(v,d,g){return p(v),v<=0?o(v):d!==void 0?typeof g=="string"?o(v).fill(d,g):o(v).fill(d):o(v)}c.alloc=function(v,d,g){return y(v,d,g)};function _(v){return p(v),o(v<0?0:O(v)|0)}c.allocUnsafe=function(v){return _(v)},c.allocUnsafeSlow=function(v){return _(v)};function A(v,d){if((typeof d!="string"||d==="")&&(d="utf8"),!c.isEncoding(d))throw new TypeError("Unknown encoding: "+d);const g=N(v,d)|0;let R=o(g);const z=R.write(v,d);return z!==g&&(R=R.slice(0,z)),R}function b(v){const d=v.length<0?0:O(v.length)|0,g=o(d);for(let R=0;R<d;R+=1)g[R]=v[R]&255;return g}function B(v){if(Le(v,Uint8Array)){const d=new Uint8Array(v);return M(d.buffer,d.byteOffset,d.byteLength)}return b(v)}function M(v,d,g){if(d<0||v.byteLength<d)throw new RangeError('"offset" is outside of buffer bounds');if(v.byteLength<d+(g||0))throw new RangeError('"length" is outside of buffer bounds');let R;return d===void 0&&g===void 0?R=new Uint8Array(v):g===void 0?R=new Uint8Array(v,d):R=new Uint8Array(v,d,g),Object.setPrototypeOf(R,c.prototype),R}function C(v){if(c.isBuffer(v)){const d=O(v.length)|0,g=o(d);return g.length===0||v.copy(g,0,0,d),g}if(v.length!==void 0)return typeof v.length!="number"||Ct(v.length)?o(0):b(v);if(v.type==="Buffer"&&Array.isArray(v.data))return b(v.data)}function O(v){if(v>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return v|0}function D(v){return+v!=v&&(v=0),c.alloc(+v)}c.isBuffer=function(d){return d!=null&&d._isBuffer===!0&&d!==c.prototype},c.compare=function(d,g){if(Le(d,Uint8Array)&&(d=c.from(d,d.offset,d.byteLength)),Le(g,Uint8Array)&&(g=c.from(g,g.offset,g.byteLength)),!c.isBuffer(d)||!c.isBuffer(g))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(d===g)return 0;let R=d.length,z=g.length;for(let j=0,X=Math.min(R,z);j<X;++j)if(d[j]!==g[j]){R=d[j],z=g[j];break}return R<z?-1:z<R?1:0},c.isEncoding=function(d){switch(String(d).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(d,g){if(!Array.isArray(d))throw new TypeError('"list" argument must be an Array of Buffers');if(d.length===0)return c.alloc(0);let R;if(g===void 0)for(g=0,R=0;R<d.length;++R)g+=d[R].length;const z=c.allocUnsafe(g);let j=0;for(R=0;R<d.length;++R){let X=d[R];if(Le(X,Uint8Array))j+X.length>z.length?(c.isBuffer(X)||(X=c.from(X)),X.copy(z,j)):Uint8Array.prototype.set.call(z,X,j);else if(c.isBuffer(X))X.copy(z,j);else throw new TypeError('"list" argument must be an Array of Buffers');j+=X.length}return z};function N(v,d){if(c.isBuffer(v))return v.length;if(ArrayBuffer.isView(v)||Le(v,ArrayBuffer))return v.byteLength;if(typeof v!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof v);const g=v.length,R=arguments.length>2&&arguments[2]===!0;if(!R&&g===0)return 0;let z=!1;for(;;)switch(d){case"ascii":case"latin1":case"binary":return g;case"utf8":case"utf-8":return Tt(v).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return g*2;case"hex":return g>>>1;case"base64":return Nt(v).length;default:if(z)return R?-1:Tt(v).length;d=(""+d).toLowerCase(),z=!0}}c.byteLength=N;function V(v,d,g){let R=!1;if((d===void 0||d<0)&&(d=0),d>this.length||((g===void 0||g>this.length)&&(g=this.length),g<=0)||(g>>>=0,d>>>=0,g<=d))return"";for(v||(v="utf8");;)switch(v){case"hex":return L(this,d,g);case"utf8":case"utf-8":return a(this,d,g);case"ascii":return S(this,d,g);case"latin1":case"binary":return I(this,d,g);case"base64":return m(this,d,g);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,d,g);default:if(R)throw new TypeError("Unknown encoding: "+v);v=(v+"").toLowerCase(),R=!0}}c.prototype._isBuffer=!0;function Z(v,d,g){const R=v[d];v[d]=v[g],v[g]=R}c.prototype.swap16=function(){const d=this.length;if(d%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let g=0;g<d;g+=2)Z(this,g,g+1);return this},c.prototype.swap32=function(){const d=this.length;if(d%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let g=0;g<d;g+=4)Z(this,g,g+3),Z(this,g+1,g+2);return this},c.prototype.swap64=function(){const d=this.length;if(d%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let g=0;g<d;g+=8)Z(this,g,g+7),Z(this,g+1,g+6),Z(this,g+2,g+5),Z(this,g+3,g+4);return this},c.prototype.toString=function(){const d=this.length;return d===0?"":arguments.length===0?a(this,0,d):V.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(d){if(!c.isBuffer(d))throw new TypeError("Argument must be a Buffer");return this===d?!0:c.compare(this,d)===0},c.prototype.inspect=function(){let d="";const g=r.INSPECT_MAX_BYTES;return d=this.toString("hex",0,g).replace(/(.{2})/g,"$1 ").trim(),this.length>g&&(d+=" ... "),"<Buffer "+d+">"},n&&(c.prototype[n]=c.prototype.inspect),c.prototype.compare=function(d,g,R,z,j){if(Le(d,Uint8Array)&&(d=c.from(d,d.offset,d.byteLength)),!c.isBuffer(d))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof d);if(g===void 0&&(g=0),R===void 0&&(R=d?d.length:0),z===void 0&&(z=0),j===void 0&&(j=this.length),g<0||R>d.length||z<0||j>this.length)throw new RangeError("out of range index");if(z>=j&&g>=R)return 0;if(z>=j)return-1;if(g>=R)return 1;if(g>>>=0,R>>>=0,z>>>=0,j>>>=0,this===d)return 0;let X=j-z,wt=R-g;const mt=Math.min(X,wt),pt=this.slice(z,j),kt=d.slice(g,R);for(let gt=0;gt<mt;++gt)if(pt[gt]!==kt[gt]){X=pt[gt],wt=kt[gt];break}return X<wt?-1:wt<X?1:0};function $(v,d,g,R,z){if(v.length===0)return-1;if(typeof g=="string"?(R=g,g=0):g>2147483647?g=2147483647:g<-2147483648&&(g=-2147483648),g=+g,Ct(g)&&(g=z?0:v.length-1),g<0&&(g=v.length+g),g>=v.length){if(z)return-1;g=v.length-1}else if(g<0)if(z)g=0;else return-1;if(typeof d=="string"&&(d=c.from(d,R)),c.isBuffer(d))return d.length===0?-1:Q(v,d,g,R,z);if(typeof d=="number")return d=d&255,typeof Uint8Array.prototype.indexOf=="function"?z?Uint8Array.prototype.indexOf.call(v,d,g):Uint8Array.prototype.lastIndexOf.call(v,d,g):Q(v,[d],g,R,z);throw new TypeError("val must be string, number or Buffer")}function Q(v,d,g,R,z){let j=1,X=v.length,wt=d.length;if(R!==void 0&&(R=String(R).toLowerCase(),R==="ucs2"||R==="ucs-2"||R==="utf16le"||R==="utf-16le")){if(v.length<2||d.length<2)return-1;j=2,X/=2,wt/=2,g/=2}function mt(kt,gt){return j===1?kt[gt]:kt.readUInt16BE(gt*j)}let pt;if(z){let kt=-1;for(pt=g;pt<X;pt++)if(mt(v,pt)===mt(d,kt===-1?0:pt-kt)){if(kt===-1&&(kt=pt),pt-kt+1===wt)return kt*j}else kt!==-1&&(pt-=pt-kt),kt=-1}else for(g+wt>X&&(g=X-wt),pt=g;pt>=0;pt--){let kt=!0;for(let gt=0;gt<wt;gt++)if(mt(v,pt+gt)!==mt(d,gt)){kt=!1;break}if(kt)return pt}return-1}c.prototype.includes=function(d,g,R){return this.indexOf(d,g,R)!==-1},c.prototype.indexOf=function(d,g,R){return $(this,d,g,R,!0)},c.prototype.lastIndexOf=function(d,g,R){return $(this,d,g,R,!1)};function Y(v,d,g,R){g=Number(g)||0;const z=v.length-g;R?(R=Number(R),R>z&&(R=z)):R=z;const j=d.length;R>j/2&&(R=j/2);let X;for(X=0;X<R;++X){const wt=parseInt(d.substr(X*2,2),16);if(Ct(wt))return X;v[g+X]=wt}return X}function k(v,d,g,R){return Rt(Tt(d,v.length-g),v,g,R)}function U(v,d,g,R){return Rt(qt(d),v,g,R)}function W(v,d,g,R){return Rt(Nt(d),v,g,R)}function q(v,d,g,R){return Rt(Gr(d,v.length-g),v,g,R)}c.prototype.write=function(d,g,R,z){if(g===void 0)z="utf8",R=this.length,g=0;else if(R===void 0&&typeof g=="string")z=g,R=this.length,g=0;else if(isFinite(g))g=g>>>0,isFinite(R)?(R=R>>>0,z===void 0&&(z="utf8")):(z=R,R=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const j=this.length-g;if((R===void 0||R>j)&&(R=j),d.length>0&&(R<0||g<0)||g>this.length)throw new RangeError("Attempt to write outside buffer bounds");z||(z="utf8");let X=!1;for(;;)switch(z){case"hex":return Y(this,d,g,R);case"utf8":case"utf-8":return k(this,d,g,R);case"ascii":case"latin1":case"binary":return U(this,d,g,R);case"base64":return W(this,d,g,R);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return q(this,d,g,R);default:if(X)throw new TypeError("Unknown encoding: "+z);z=(""+z).toLowerCase(),X=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function m(v,d,g){return d===0&&g===v.length?t.fromByteArray(v):t.fromByteArray(v.slice(d,g))}function a(v,d,g){g=Math.min(v.length,g);const R=[];let z=d;for(;z<g;){const j=v[z];let X=null,wt=j>239?4:j>223?3:j>191?2:1;if(z+wt<=g){let mt,pt,kt,gt;switch(wt){case 1:j<128&&(X=j);break;case 2:mt=v[z+1],(mt&192)===128&&(gt=(j&31)<<6|mt&63,gt>127&&(X=gt));break;case 3:mt=v[z+1],pt=v[z+2],(mt&192)===128&&(pt&192)===128&&(gt=(j&15)<<12|(mt&63)<<6|pt&63,gt>2047&&(gt<55296||gt>57343)&&(X=gt));break;case 4:mt=v[z+1],pt=v[z+2],kt=v[z+3],(mt&192)===128&&(pt&192)===128&&(kt&192)===128&&(gt=(j&15)<<18|(mt&63)<<12|(pt&63)<<6|kt&63,gt>65535&&gt<1114112&&(X=gt))}}X===null?(X=65533,wt=1):X>65535&&(X-=65536,R.push(X>>>10&1023|55296),X=56320|X&1023),R.push(X),z+=wt}return w(R)}const f=4096;function w(v){const d=v.length;if(d<=f)return String.fromCharCode.apply(String,v);let g="",R=0;for(;R<d;)g+=String.fromCharCode.apply(String,v.slice(R,R+=f));return g}function S(v,d,g){let R="";g=Math.min(v.length,g);for(let z=d;z<g;++z)R+=String.fromCharCode(v[z]&127);return R}function I(v,d,g){let R="";g=Math.min(v.length,g);for(let z=d;z<g;++z)R+=String.fromCharCode(v[z]);return R}function L(v,d,g){const R=v.length;(!d||d<0)&&(d=0),(!g||g<0||g>R)&&(g=R);let z="";for(let j=d;j<g;++j)z+=zt[v[j]];return z}function P(v,d,g){const R=v.slice(d,g);let z="";for(let j=0;j<R.length-1;j+=2)z+=String.fromCharCode(R[j]+R[j+1]*256);return z}c.prototype.slice=function(d,g){const R=this.length;d=~~d,g=g===void 0?R:~~g,d<0?(d+=R,d<0&&(d=0)):d>R&&(d=R),g<0?(g+=R,g<0&&(g=0)):g>R&&(g=R),g<d&&(g=d);const z=this.subarray(d,g);return Object.setPrototypeOf(z,c.prototype),z};function x(v,d,g){if(v%1!==0||v<0)throw new RangeError("offset is not uint");if(v+d>g)throw new RangeError("Trying to access beyond buffer length")}c.prototype.readUintLE=c.prototype.readUIntLE=function(d,g,R){d=d>>>0,g=g>>>0,R||x(d,g,this.length);let z=this[d],j=1,X=0;for(;++X<g&&(j*=256);)z+=this[d+X]*j;return z},c.prototype.readUintBE=c.prototype.readUIntBE=function(d,g,R){d=d>>>0,g=g>>>0,R||x(d,g,this.length);let z=this[d+--g],j=1;for(;g>0&&(j*=256);)z+=this[d+--g]*j;return z},c.prototype.readUint8=c.prototype.readUInt8=function(d,g){return d=d>>>0,g||x(d,1,this.length),this[d]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(d,g){return d=d>>>0,g||x(d,2,this.length),this[d]|this[d+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(d,g){return d=d>>>0,g||x(d,2,this.length),this[d]<<8|this[d+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(d,g){return d=d>>>0,g||x(d,4,this.length),(this[d]|this[d+1]<<8|this[d+2]<<16)+this[d+3]*16777216},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(d,g){return d=d>>>0,g||x(d,4,this.length),this[d]*16777216+(this[d+1]<<16|this[d+2]<<8|this[d+3])},c.prototype.readBigUInt64LE=We(function(d){d=d>>>0,De(d,"offset");const g=this[d],R=this[d+7];(g===void 0||R===void 0)&&Bt(d,this.length-8);const z=g+this[++d]*2**8+this[++d]*2**16+this[++d]*2**24,j=this[++d]+this[++d]*2**8+this[++d]*2**16+R*2**24;return BigInt(z)+(BigInt(j)<<BigInt(32))}),c.prototype.readBigUInt64BE=We(function(d){d=d>>>0,De(d,"offset");const g=this[d],R=this[d+7];(g===void 0||R===void 0)&&Bt(d,this.length-8);const z=g*2**24+this[++d]*2**16+this[++d]*2**8+this[++d],j=this[++d]*2**24+this[++d]*2**16+this[++d]*2**8+R;return(BigInt(z)<<BigInt(32))+BigInt(j)}),c.prototype.readIntLE=function(d,g,R){d=d>>>0,g=g>>>0,R||x(d,g,this.length);let z=this[d],j=1,X=0;for(;++X<g&&(j*=256);)z+=this[d+X]*j;return j*=128,z>=j&&(z-=Math.pow(2,8*g)),z},c.prototype.readIntBE=function(d,g,R){d=d>>>0,g=g>>>0,R||x(d,g,this.length);let z=g,j=1,X=this[d+--z];for(;z>0&&(j*=256);)X+=this[d+--z]*j;return j*=128,X>=j&&(X-=Math.pow(2,8*g)),X},c.prototype.readInt8=function(d,g){return d=d>>>0,g||x(d,1,this.length),this[d]&128?(255-this[d]+1)*-1:this[d]},c.prototype.readInt16LE=function(d,g){d=d>>>0,g||x(d,2,this.length);const R=this[d]|this[d+1]<<8;return R&32768?R|4294901760:R},c.prototype.readInt16BE=function(d,g){d=d>>>0,g||x(d,2,this.length);const R=this[d+1]|this[d]<<8;return R&32768?R|4294901760:R},c.prototype.readInt32LE=function(d,g){return d=d>>>0,g||x(d,4,this.length),this[d]|this[d+1]<<8|this[d+2]<<16|this[d+3]<<24},c.prototype.readInt32BE=function(d,g){return d=d>>>0,g||x(d,4,this.length),this[d]<<24|this[d+1]<<16|this[d+2]<<8|this[d+3]},c.prototype.readBigInt64LE=We(function(d){d=d>>>0,De(d,"offset");const g=this[d],R=this[d+7];(g===void 0||R===void 0)&&Bt(d,this.length-8);const z=this[d+4]+this[d+5]*2**8+this[d+6]*2**16+(R<<24);return(BigInt(z)<<BigInt(32))+BigInt(g+this[++d]*2**8+this[++d]*2**16+this[++d]*2**24)}),c.prototype.readBigInt64BE=We(function(d){d=d>>>0,De(d,"offset");const g=this[d],R=this[d+7];(g===void 0||R===void 0)&&Bt(d,this.length-8);const z=(g<<24)+this[++d]*2**16+this[++d]*2**8+this[++d];return(BigInt(z)<<BigInt(32))+BigInt(this[++d]*2**24+this[++d]*2**16+this[++d]*2**8+R)}),c.prototype.readFloatLE=function(d,g){return d=d>>>0,g||x(d,4,this.length),e.read(this,d,!0,23,4)},c.prototype.readFloatBE=function(d,g){return d=d>>>0,g||x(d,4,this.length),e.read(this,d,!1,23,4)},c.prototype.readDoubleLE=function(d,g){return d=d>>>0,g||x(d,8,this.length),e.read(this,d,!0,52,8)},c.prototype.readDoubleBE=function(d,g){return d=d>>>0,g||x(d,8,this.length),e.read(this,d,!1,52,8)};function l(v,d,g,R,z,j){if(!c.isBuffer(v))throw new TypeError('"buffer" argument must be a Buffer instance');if(d>z||d<j)throw new RangeError('"value" argument is out of bounds');if(g+R>v.length)throw new RangeError("Index out of range")}c.prototype.writeUintLE=c.prototype.writeUIntLE=function(d,g,R,z){if(d=+d,g=g>>>0,R=R>>>0,!z){const wt=Math.pow(2,8*R)-1;l(this,d,g,R,wt,0)}let j=1,X=0;for(this[g]=d&255;++X<R&&(j*=256);)this[g+X]=d/j&255;return g+R},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(d,g,R,z){if(d=+d,g=g>>>0,R=R>>>0,!z){const wt=Math.pow(2,8*R)-1;l(this,d,g,R,wt,0)}let j=R-1,X=1;for(this[g+j]=d&255;--j>=0&&(X*=256);)this[g+j]=d/X&255;return g+R},c.prototype.writeUint8=c.prototype.writeUInt8=function(d,g,R){return d=+d,g=g>>>0,R||l(this,d,g,1,255,0),this[g]=d&255,g+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(d,g,R){return d=+d,g=g>>>0,R||l(this,d,g,2,65535,0),this[g]=d&255,this[g+1]=d>>>8,g+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(d,g,R){return d=+d,g=g>>>0,R||l(this,d,g,2,65535,0),this[g]=d>>>8,this[g+1]=d&255,g+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(d,g,R){return d=+d,g=g>>>0,R||l(this,d,g,4,4294967295,0),this[g+3]=d>>>24,this[g+2]=d>>>16,this[g+1]=d>>>8,this[g]=d&255,g+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(d,g,R){return d=+d,g=g>>>0,R||l(this,d,g,4,4294967295,0),this[g]=d>>>24,this[g+1]=d>>>16,this[g+2]=d>>>8,this[g+3]=d&255,g+4};function h(v,d,g,R,z){At(d,R,z,v,g,7);let j=Number(d&BigInt(4294967295));v[g++]=j,j=j>>8,v[g++]=j,j=j>>8,v[g++]=j,j=j>>8,v[g++]=j;let X=Number(d>>BigInt(32)&BigInt(4294967295));return v[g++]=X,X=X>>8,v[g++]=X,X=X>>8,v[g++]=X,X=X>>8,v[g++]=X,g}function E(v,d,g,R,z){At(d,R,z,v,g,7);let j=Number(d&BigInt(4294967295));v[g+7]=j,j=j>>8,v[g+6]=j,j=j>>8,v[g+5]=j,j=j>>8,v[g+4]=j;let X=Number(d>>BigInt(32)&BigInt(4294967295));return v[g+3]=X,X=X>>8,v[g+2]=X,X=X>>8,v[g+1]=X,X=X>>8,v[g]=X,g+8}c.prototype.writeBigUInt64LE=We(function(d,g=0){return h(this,d,g,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeBigUInt64BE=We(function(d,g=0){return E(this,d,g,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeIntLE=function(d,g,R,z){if(d=+d,g=g>>>0,!z){const mt=Math.pow(2,8*R-1);l(this,d,g,R,mt-1,-mt)}let j=0,X=1,wt=0;for(this[g]=d&255;++j<R&&(X*=256);)d<0&&wt===0&&this[g+j-1]!==0&&(wt=1),this[g+j]=(d/X>>0)-wt&255;return g+R},c.prototype.writeIntBE=function(d,g,R,z){if(d=+d,g=g>>>0,!z){const mt=Math.pow(2,8*R-1);l(this,d,g,R,mt-1,-mt)}let j=R-1,X=1,wt=0;for(this[g+j]=d&255;--j>=0&&(X*=256);)d<0&&wt===0&&this[g+j+1]!==0&&(wt=1),this[g+j]=(d/X>>0)-wt&255;return g+R},c.prototype.writeInt8=function(d,g,R){return d=+d,g=g>>>0,R||l(this,d,g,1,127,-128),d<0&&(d=255+d+1),this[g]=d&255,g+1},c.prototype.writeInt16LE=function(d,g,R){return d=+d,g=g>>>0,R||l(this,d,g,2,32767,-32768),this[g]=d&255,this[g+1]=d>>>8,g+2},c.prototype.writeInt16BE=function(d,g,R){return d=+d,g=g>>>0,R||l(this,d,g,2,32767,-32768),this[g]=d>>>8,this[g+1]=d&255,g+2},c.prototype.writeInt32LE=function(d,g,R){return d=+d,g=g>>>0,R||l(this,d,g,4,2147483647,-2147483648),this[g]=d&255,this[g+1]=d>>>8,this[g+2]=d>>>16,this[g+3]=d>>>24,g+4},c.prototype.writeInt32BE=function(d,g,R){return d=+d,g=g>>>0,R||l(this,d,g,4,2147483647,-2147483648),d<0&&(d=4294967295+d+1),this[g]=d>>>24,this[g+1]=d>>>16,this[g+2]=d>>>8,this[g+3]=d&255,g+4},c.prototype.writeBigInt64LE=We(function(d,g=0){return h(this,d,g,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),c.prototype.writeBigInt64BE=We(function(d,g=0){return E(this,d,g,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function T(v,d,g,R,z,j){if(g+R>v.length)throw new RangeError("Index out of range");if(g<0)throw new RangeError("Index out of range")}function K(v,d,g,R,z){return d=+d,g=g>>>0,z||T(v,d,g,4),e.write(v,d,g,R,23,4),g+4}c.prototype.writeFloatLE=function(d,g,R){return K(this,d,g,!0,R)},c.prototype.writeFloatBE=function(d,g,R){return K(this,d,g,!1,R)};function J(v,d,g,R,z){return d=+d,g=g>>>0,z||T(v,d,g,8),e.write(v,d,g,R,52,8),g+8}c.prototype.writeDoubleLE=function(d,g,R){return J(this,d,g,!0,R)},c.prototype.writeDoubleBE=function(d,g,R){return J(this,d,g,!1,R)},c.prototype.copy=function(d,g,R,z){if(!c.isBuffer(d))throw new TypeError("argument should be a Buffer");if(R||(R=0),!z&&z!==0&&(z=this.length),g>=d.length&&(g=d.length),g||(g=0),z>0&&z<R&&(z=R),z===R||d.length===0||this.length===0)return 0;if(g<0)throw new RangeError("targetStart out of bounds");if(R<0||R>=this.length)throw new RangeError("Index out of range");if(z<0)throw new RangeError("sourceEnd out of bounds");z>this.length&&(z=this.length),d.length-g<z-R&&(z=d.length-g+R);const j=z-R;return this===d&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(g,R,z):Uint8Array.prototype.set.call(d,this.subarray(R,z),g),j},c.prototype.fill=function(d,g,R,z){if(typeof d=="string"){if(typeof g=="string"?(z=g,g=0,R=this.length):typeof R=="string"&&(z=R,R=this.length),z!==void 0&&typeof z!="string")throw new TypeError("encoding must be a string");if(typeof z=="string"&&!c.isEncoding(z))throw new TypeError("Unknown encoding: "+z);if(d.length===1){const X=d.charCodeAt(0);(z==="utf8"&&X<128||z==="latin1")&&(d=X)}}else typeof d=="number"?d=d&255:typeof d=="boolean"&&(d=Number(d));if(g<0||this.length<g||this.length<R)throw new RangeError("Out of range index");if(R<=g)return this;g=g>>>0,R=R===void 0?this.length:R>>>0,d||(d=0);let j;if(typeof d=="number")for(j=g;j<R;++j)this[j]=d;else{const X=c.isBuffer(d)?d:c.from(d,z),wt=X.length;if(wt===0)throw new TypeError('The value "'+d+'" is invalid for argument "value"');for(j=0;j<R-g;++j)this[j+g]=X[j%wt]}return this};const nt={};function st(v,d,g){nt[v]=class extends g{constructor(){super(),Object.defineProperty(this,"message",{value:d.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${v}]`,this.stack,delete this.name}get code(){return v}set code(z){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:z,writable:!0})}toString(){return`${this.name} [${v}]: ${this.message}`}}}st("ERR_BUFFER_OUT_OF_BOUNDS",function(v){return v?`${v} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),st("ERR_INVALID_ARG_TYPE",function(v,d){return`The "${v}" argument must be of type number. Received type ${typeof d}`},TypeError),st("ERR_OUT_OF_RANGE",function(v,d,g){let R=`The value of "${v}" is out of range.`,z=g;return Number.isInteger(g)&&Math.abs(g)>2**32?z=Et(String(g)):typeof g=="bigint"&&(z=String(g),(g>BigInt(2)**BigInt(32)||g<-(BigInt(2)**BigInt(32)))&&(z=Et(z)),z+="n"),R+=` It must be ${d}. Received ${z}`,R},RangeError);function Et(v){let d="",g=v.length;const R=v[0]==="-"?1:0;for(;g>=R+4;g-=3)d=`_${v.slice(g-3,g)}${d}`;return`${v.slice(0,g)}${d}`}function _t(v,d,g){De(d,"offset"),(v[d]===void 0||v[d+g]===void 0)&&Bt(d,v.length-(g+1))}function At(v,d,g,R,z,j){if(v>g||v<d){const X=typeof d=="bigint"?"n":"";let wt;throw d===0||d===BigInt(0)?wt=`>= 0${X} and < 2${X} ** ${(j+1)*8}${X}`:wt=`>= -(2${X} ** ${(j+1)*8-1}${X}) and < 2 ** ${(j+1)*8-1}${X}`,new nt.ERR_OUT_OF_RANGE("value",wt,v)}_t(R,z,j)}function De(v,d){if(typeof v!="number")throw new nt.ERR_INVALID_ARG_TYPE(d,"number",v)}function Bt(v,d,g){throw Math.floor(v)!==v?(De(v,g),new nt.ERR_OUT_OF_RANGE("offset","an integer",v)):d<0?new nt.ERR_BUFFER_OUT_OF_BOUNDS:new nt.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${d}`,v)}const Wt=/[^+/0-9A-Za-z-_]/g;function Vr(v){if(v=v.split("=")[0],v=v.trim().replace(Wt,""),v.length<2)return"";for(;v.length%4!==0;)v=v+"=";return v}function Tt(v,d){d=d||1/0;let g;const R=v.length;let z=null;const j=[];for(let X=0;X<R;++X){if(g=v.charCodeAt(X),g>55295&&g<57344){if(!z){if(g>56319){(d-=3)>-1&&j.push(239,191,189);continue}else if(X+1===R){(d-=3)>-1&&j.push(239,191,189);continue}z=g;continue}if(g<56320){(d-=3)>-1&&j.push(239,191,189),z=g;continue}g=(z-55296<<10|g-56320)+65536}else z&&(d-=3)>-1&&j.push(239,191,189);if(z=null,g<128){if((d-=1)<0)break;j.push(g)}else if(g<2048){if((d-=2)<0)break;j.push(g>>6|192,g&63|128)}else if(g<65536){if((d-=3)<0)break;j.push(g>>12|224,g>>6&63|128,g&63|128)}else if(g<1114112){if((d-=4)<0)break;j.push(g>>18|240,g>>12&63|128,g>>6&63|128,g&63|128)}else throw new Error("Invalid code point")}return j}function qt(v){const d=[];for(let g=0;g<v.length;++g)d.push(v.charCodeAt(g)&255);return d}function Gr(v,d){let g,R,z;const j=[];for(let X=0;X<v.length&&!((d-=2)<0);++X)g=v.charCodeAt(X),R=g>>8,z=g%256,j.push(z),j.push(R);return j}function Nt(v){return t.toByteArray(Vr(v))}function Rt(v,d,g,R){let z;for(z=0;z<R&&!(z+g>=d.length||z>=v.length);++z)d[z+g]=v[z];return z}function Le(v,d){return v instanceof d||v!=null&&v.constructor!=null&&v.constructor.name!=null&&v.constructor.name===d.name}function Ct(v){return v!==v}const zt=(function(){const v="0123456789abcdef",d=new Array(256);for(let g=0;g<16;++g){const R=g*16;for(let z=0;z<16;++z)d[R+z]=v[g]+v[z]}return d})();function We(v){return typeof BigInt>"u"?Kt:v}function Kt(){throw new Error("BigInt not supported")}})(ws)),ws}var bt=Xo();const Gn=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Wr(r){return r instanceof Uint8Array||ArrayBuffer.isView(r)&&r.constructor.name==="Uint8Array"}function So(r){if(!Number.isSafeInteger(r)||r<0)throw new Error("positive integer expected, got "+r)}function qn(r,...t){if(!Wr(r))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(r.length))throw new Error("Uint8Array expected of length "+t+", got length="+r.length)}function fu(r){if(typeof r!="function"||typeof r.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");So(r.outputLen),So(r.blockLen)}function xi(r,t=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(t&&r.finished)throw new Error("Hash#digest() has already been called")}function zl(r,t){qn(r);const e=t.outputLen;if(r.length<e)throw new Error("digestInto() expects output buffer of length at least "+e)}function dr(...r){for(let t=0;t<r.length;t++)r[t].fill(0)}function ys(r){return new DataView(r.buffer,r.byteOffset,r.byteLength)}function je(r,t){return r<<32-t|r>>>t}const hu=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",Kl=Array.from({length:256},(r,t)=>t.toString(16).padStart(2,"0"));function Pn(r){if(qn(r),hu)return r.toHex();let t="";for(let e=0;e<r.length;e++)t+=Kl[r[e]];return t}const Je={_0:48,_9:57,A:65,F:70,a:97,f:102};function Ta(r){if(r>=Je._0&&r<=Je._9)return r-Je._0;if(r>=Je.A&&r<=Je.F)return r-(Je.A-10);if(r>=Je.a&&r<=Je.f)return r-(Je.a-10)}function Ai(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);if(hu)return Uint8Array.fromHex(r);const t=r.length,e=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(e);for(let s=0,i=0;s<e;s++,i+=2){const o=Ta(r.charCodeAt(i)),c=Ta(r.charCodeAt(i+1));if(o===void 0||c===void 0){const u=r[i]+r[i+1];throw new Error('hex string expected, got non-hex character "'+u+'" at index '+i)}n[s]=o*16+c}return n}function $l(r){if(typeof r!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(r))}function Qo(r){return typeof r=="string"&&(r=$l(r)),qn(r),r}function Ve(...r){let t=0;for(let n=0;n<r.length;n++){const s=r[n];qn(s),t+=s.length}const e=new Uint8Array(t);for(let n=0,s=0;n<r.length;n++){const i=r[n];e.set(i,s),s+=i.length}return e}class du{}function gu(r){const t=n=>r().update(Qo(n)).digest(),e=r();return t.outputLen=e.outputLen,t.blockLen=e.blockLen,t.create=()=>r(),t}function ta(r=32){if(Gn&&typeof Gn.getRandomValues=="function")return Gn.getRandomValues(new Uint8Array(r));if(Gn&&typeof Gn.randomBytes=="function")return Uint8Array.from(Gn.randomBytes(r));throw new Error("crypto.getRandomValues must be defined")}function jl(r,t,e,n){if(typeof r.setBigUint64=="function")return r.setBigUint64(t,e,n);const s=BigInt(32),i=BigInt(4294967295),o=Number(e>>s&i),c=Number(e&i),u=n?4:0,p=n?0:4;r.setUint32(t+u,o,n),r.setUint32(t+p,c,n)}function Hl(r,t,e){return r&t^~r&e}function Vl(r,t,e){return r&t^r&e^t&e}class pu extends du{constructor(t,e,n,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=t,this.outputLen=e,this.padOffset=n,this.isLE=s,this.buffer=new Uint8Array(t),this.view=ys(this.buffer)}update(t){xi(this),t=Qo(t),qn(t);const{view:e,buffer:n,blockLen:s}=this,i=t.length;for(let o=0;o<i;){const c=Math.min(s-this.pos,i-o);if(c===s){const u=ys(t);for(;s<=i-o;o+=s)this.process(u,o);continue}n.set(t.subarray(o,o+c),this.pos),this.pos+=c,o+=c,this.pos===s&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){xi(this),zl(t,this),this.finished=!0;const{buffer:e,view:n,blockLen:s,isLE:i}=this;let{pos:o}=this;e[o++]=128,dr(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(n,0),o=0);for(let _=o;_<s;_++)e[_]=0;jl(n,s-8,BigInt(this.length*8),i),this.process(n,0);const c=ys(t),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const p=u/4,y=this.get();if(p>y.length)throw new Error("_sha2: outputLen bigger than state");for(let _=0;_<p;_++)c.setUint32(4*_,y[_],i)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const n=t.slice(0,e);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:n,length:s,finished:i,destroyed:o,pos:c}=this;return t.destroyed=o,t.finished=i,t.length=s,t.pos=c,s%e&&t.buffer.set(n),t}clone(){return this._cloneInto()}}const ln=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Se=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),Yr=BigInt(2**32-1),Ca=BigInt(32);function Gl(r,t=!1){return t?{h:Number(r&Yr),l:Number(r>>Ca&Yr)}:{h:Number(r>>Ca&Yr)|0,l:Number(r&Yr)|0}}function Zl(r,t=!1){const e=r.length;let n=new Uint32Array(e),s=new Uint32Array(e);for(let i=0;i<e;i++){const{h:o,l:c}=Gl(r[i],t);[n[i],s[i]]=[o,c]}return[n,s]}const La=(r,t,e)=>r>>>e,Ua=(r,t,e)=>r<<32-e|t>>>e,Zn=(r,t,e)=>r>>>e|t<<32-e,Yn=(r,t,e)=>r<<32-e|t>>>e,Jr=(r,t,e)=>r<<64-e|t>>>e-32,Xr=(r,t,e)=>r>>>e-32|t<<64-e;function Xe(r,t,e,n){const s=(t>>>0)+(n>>>0);return{h:r+e+(s/2**32|0)|0,l:s|0}}const Yl=(r,t,e)=>(r>>>0)+(t>>>0)+(e>>>0),Jl=(r,t,e,n)=>t+e+n+(r/2**32|0)|0,Xl=(r,t,e,n)=>(r>>>0)+(t>>>0)+(e>>>0)+(n>>>0),Ql=(r,t,e,n,s)=>t+e+n+s+(r/2**32|0)|0,tf=(r,t,e,n,s)=>(r>>>0)+(t>>>0)+(e>>>0)+(n>>>0)+(s>>>0),ef=(r,t,e,n,s,i)=>t+e+n+s+i+(r/2**32|0)|0,nf=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),fn=new Uint32Array(64);class rf extends pu{constructor(t=32){super(64,t,8,!1),this.A=ln[0]|0,this.B=ln[1]|0,this.C=ln[2]|0,this.D=ln[3]|0,this.E=ln[4]|0,this.F=ln[5]|0,this.G=ln[6]|0,this.H=ln[7]|0}get(){const{A:t,B:e,C:n,D:s,E:i,F:o,G:c,H:u}=this;return[t,e,n,s,i,o,c,u]}set(t,e,n,s,i,o,c,u){this.A=t|0,this.B=e|0,this.C=n|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=c|0,this.H=u|0}process(t,e){for(let _=0;_<16;_++,e+=4)fn[_]=t.getUint32(e,!1);for(let _=16;_<64;_++){const A=fn[_-15],b=fn[_-2],B=je(A,7)^je(A,18)^A>>>3,M=je(b,17)^je(b,19)^b>>>10;fn[_]=M+fn[_-7]+B+fn[_-16]|0}let{A:n,B:s,C:i,D:o,E:c,F:u,G:p,H:y}=this;for(let _=0;_<64;_++){const A=je(c,6)^je(c,11)^je(c,25),b=y+A+Hl(c,u,p)+nf[_]+fn[_]|0,M=(je(n,2)^je(n,13)^je(n,22))+Vl(n,s,i)|0;y=p,p=u,u=c,c=o+b|0,o=i,i=s,s=n,n=b+M|0}n=n+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,c=c+this.E|0,u=u+this.F|0,p=p+this.G|0,y=y+this.H|0,this.set(n,s,i,o,c,u,p,y)}roundClean(){dr(fn)}destroy(){this.set(0,0,0,0,0,0,0,0),dr(this.buffer)}}const mu=Zl(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(r=>BigInt(r))),sf=mu[0],of=mu[1],hn=new Uint32Array(80),dn=new Uint32Array(80);class af extends pu{constructor(t=64){super(128,t,16,!1),this.Ah=Se[0]|0,this.Al=Se[1]|0,this.Bh=Se[2]|0,this.Bl=Se[3]|0,this.Ch=Se[4]|0,this.Cl=Se[5]|0,this.Dh=Se[6]|0,this.Dl=Se[7]|0,this.Eh=Se[8]|0,this.El=Se[9]|0,this.Fh=Se[10]|0,this.Fl=Se[11]|0,this.Gh=Se[12]|0,this.Gl=Se[13]|0,this.Hh=Se[14]|0,this.Hl=Se[15]|0}get(){const{Ah:t,Al:e,Bh:n,Bl:s,Ch:i,Cl:o,Dh:c,Dl:u,Eh:p,El:y,Fh:_,Fl:A,Gh:b,Gl:B,Hh:M,Hl:C}=this;return[t,e,n,s,i,o,c,u,p,y,_,A,b,B,M,C]}set(t,e,n,s,i,o,c,u,p,y,_,A,b,B,M,C){this.Ah=t|0,this.Al=e|0,this.Bh=n|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=c|0,this.Dl=u|0,this.Eh=p|0,this.El=y|0,this.Fh=_|0,this.Fl=A|0,this.Gh=b|0,this.Gl=B|0,this.Hh=M|0,this.Hl=C|0}process(t,e){for(let N=0;N<16;N++,e+=4)hn[N]=t.getUint32(e),dn[N]=t.getUint32(e+=4);for(let N=16;N<80;N++){const V=hn[N-15]|0,Z=dn[N-15]|0,$=Zn(V,Z,1)^Zn(V,Z,8)^La(V,Z,7),Q=Yn(V,Z,1)^Yn(V,Z,8)^Ua(V,Z,7),Y=hn[N-2]|0,k=dn[N-2]|0,U=Zn(Y,k,19)^Jr(Y,k,61)^La(Y,k,6),W=Yn(Y,k,19)^Xr(Y,k,61)^Ua(Y,k,6),q=Xl(Q,W,dn[N-7],dn[N-16]),m=Ql(q,$,U,hn[N-7],hn[N-16]);hn[N]=m|0,dn[N]=q|0}let{Ah:n,Al:s,Bh:i,Bl:o,Ch:c,Cl:u,Dh:p,Dl:y,Eh:_,El:A,Fh:b,Fl:B,Gh:M,Gl:C,Hh:O,Hl:D}=this;for(let N=0;N<80;N++){const V=Zn(_,A,14)^Zn(_,A,18)^Jr(_,A,41),Z=Yn(_,A,14)^Yn(_,A,18)^Xr(_,A,41),$=_&b^~_&M,Q=A&B^~A&C,Y=tf(D,Z,Q,of[N],dn[N]),k=ef(Y,O,V,$,sf[N],hn[N]),U=Y|0,W=Zn(n,s,28)^Jr(n,s,34)^Jr(n,s,39),q=Yn(n,s,28)^Xr(n,s,34)^Xr(n,s,39),m=n&i^n&c^i&c,a=s&o^s&u^o&u;O=M|0,D=C|0,M=b|0,C=B|0,b=_|0,B=A|0,{h:_,l:A}=Xe(p|0,y|0,k|0,U|0),p=c|0,y=u|0,c=i|0,u=o|0,i=n|0,o=s|0;const f=Yl(U,q,a);n=Jl(f,k,W,m),s=f|0}({h:n,l:s}=Xe(this.Ah|0,this.Al|0,n|0,s|0)),{h:i,l:o}=Xe(this.Bh|0,this.Bl|0,i|0,o|0),{h:c,l:u}=Xe(this.Ch|0,this.Cl|0,c|0,u|0),{h:p,l:y}=Xe(this.Dh|0,this.Dl|0,p|0,y|0),{h:_,l:A}=Xe(this.Eh|0,this.El|0,_|0,A|0),{h:b,l:B}=Xe(this.Fh|0,this.Fl|0,b|0,B|0),{h:M,l:C}=Xe(this.Gh|0,this.Gl|0,M|0,C|0),{h:O,l:D}=Xe(this.Hh|0,this.Hl|0,O|0,D|0),this.set(n,s,i,o,c,u,p,y,_,A,b,B,M,C,O,D)}roundClean(){dr(hn,dn)}destroy(){dr(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const wu=gu(()=>new rf),cf=gu(()=>new af);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ea=BigInt(0),_o=BigInt(1);function Wn(r,t=""){if(typeof r!="boolean"){const e=t&&`"${t}"`;throw new Error(e+"expected boolean, got type="+typeof r)}return r}function Ke(r,t,e=""){const n=Wr(r),s=r?.length,i=t!==void 0;if(!n||i&&s!==t){const o=e&&`"${e}" `,c=i?` of length ${t}`:"",u=n?`length=${s}`:`type=${typeof r}`;throw new Error(o+"expected Uint8Array"+c+", got "+u)}return r}function Qr(r){const t=r.toString(16);return t.length&1?"0"+t:t}function yu(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);return r===""?ea:BigInt("0x"+r)}function zi(r){return yu(Pn(r))}function Ur(r){return qn(r),yu(Pn(Uint8Array.from(r).reverse()))}function na(r,t){return Ai(r.toString(16).padStart(t*2,"0"))}function bu(r,t){return na(r,t).reverse()}function jt(r,t,e){let n;if(typeof t=="string")try{n=Ai(t)}catch(i){throw new Error(r+" must be hex string or Uint8Array, cause: "+i)}else if(Wr(t))n=Uint8Array.from(t);else throw new Error(r+" must be hex string or Uint8Array");const s=n.length;if(typeof e=="number"&&s!==e)throw new Error(r+" of length "+e+" expected, got "+s);return n}function Na(r){return Uint8Array.from(r)}const bs=r=>typeof r=="bigint"&&ea<=r;function uf(r,t,e){return bs(r)&&bs(t)&&bs(e)&&t<=r&&r<e}function xo(r,t,e,n){if(!uf(t,e,n))throw new Error("expected valid "+r+": "+e+" <= n < "+n+", got "+t)}function vu(r){let t;for(t=0;r>ea;r>>=_o,t+=1);return t}const qr=r=>(_o<<BigInt(r))-_o;function lf(r,t,e){if(typeof r!="number"||r<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof e!="function")throw new Error("hmacFn must be a function");const n=b=>new Uint8Array(b),s=b=>Uint8Array.of(b);let i=n(r),o=n(r),c=0;const u=()=>{i.fill(1),o.fill(0),c=0},p=(...b)=>e(o,i,...b),y=(b=n(0))=>{o=p(s(0),b),i=p(),b.length!==0&&(o=p(s(1),b),i=p())},_=()=>{if(c++>=1e3)throw new Error("drbg: tried 1000 values");let b=0;const B=[];for(;b<t;){i=p();const M=i.slice();B.push(M),b+=i.length}return Ve(...B)};return(b,B)=>{u(),y(b);let M;for(;!(M=B(_()));)y();return u(),M}}function zr(r,t,e={}){if(!r||typeof r!="object")throw new Error("expected valid options object");function n(s,i,o){const c=r[s];if(o&&c===void 0)return;const u=typeof c;if(u!==i||c===null)throw new Error(`param "${s}" is invalid: expected ${i}, got ${u}`)}Object.entries(t).forEach(([s,i])=>n(s,i,!1)),Object.entries(e).forEach(([s,i])=>n(s,i,!0))}function Bi(r){const t=new WeakMap;return(e,...n)=>{const s=t.get(e);if(s!==void 0)return s;const i=r(e,...n);return t.set(e,i),i}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ce=BigInt(0),Ee=BigInt(1),In=BigInt(2),Eu=BigInt(3),Su=BigInt(4),_u=BigInt(5),ff=BigInt(7),xu=BigInt(8),hf=BigInt(9),Au=BigInt(16);function de(r,t){const e=r%t;return e>=Ce?e:t+e}function $t(r,t,e){let n=r;for(;t-- >Ce;)n*=n,n%=e;return n}function Oa(r,t){if(r===Ce)throw new Error("invert: expected non-zero number");if(t<=Ce)throw new Error("invert: expected positive modulus, got "+t);let e=de(r,t),n=t,s=Ce,i=Ee;for(;e!==Ce;){const c=n/e,u=n%e,p=s-i*c;n=e,e=u,s=i,i=p}if(n!==Ee)throw new Error("invert: does not exist");return de(s,t)}function ra(r,t,e){if(!r.eql(r.sqr(t),e))throw new Error("Cannot find square root")}function Bu(r,t){const e=(r.ORDER+Ee)/Su,n=r.pow(t,e);return ra(r,n,t),n}function df(r,t){const e=(r.ORDER-_u)/xu,n=r.mul(t,In),s=r.pow(n,e),i=r.mul(t,s),o=r.mul(r.mul(i,In),s),c=r.mul(i,r.sub(o,r.ONE));return ra(r,c,t),c}function gf(r){const t=zn(r),e=Mu(r),n=e(t,t.neg(t.ONE)),s=e(t,n),i=e(t,t.neg(n)),o=(r+ff)/Au;return(c,u)=>{let p=c.pow(u,o),y=c.mul(p,n);const _=c.mul(p,s),A=c.mul(p,i),b=c.eql(c.sqr(y),u),B=c.eql(c.sqr(_),u);p=c.cmov(p,y,b),y=c.cmov(A,_,B);const M=c.eql(c.sqr(y),u),C=c.cmov(p,y,M);return ra(c,C,u),C}}function Mu(r){if(r<Eu)throw new Error("sqrt is not defined for small field");let t=r-Ee,e=0;for(;t%In===Ce;)t/=In,e++;let n=In;const s=zn(r);for(;Fa(s,n)===1;)if(n++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(e===1)return Bu;let i=s.pow(n,t);const o=(t+Ee)/In;return function(u,p){if(u.is0(p))return p;if(Fa(u,p)!==1)throw new Error("Cannot find square root");let y=e,_=u.mul(u.ONE,i),A=u.pow(p,t),b=u.pow(p,o);for(;!u.eql(A,u.ONE);){if(u.is0(A))return u.ZERO;let B=1,M=u.sqr(A);for(;!u.eql(M,u.ONE);)if(B++,M=u.sqr(M),B===y)throw new Error("Cannot find square root");const C=Ee<<BigInt(y-B-1),O=u.pow(_,C);y=B,_=u.sqr(O),A=u.mul(A,_),b=u.mul(b,O)}return b}}function pf(r){return r%Su===Eu?Bu:r%xu===_u?df:r%Au===hf?gf(r):Mu(r)}const mf=(r,t)=>(de(r,t)&Ee)===Ee,wf=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function yf(r){const t={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},e=wf.reduce((n,s)=>(n[s]="function",n),t);return zr(r,e),r}function bf(r,t,e){if(e<Ce)throw new Error("invalid exponent, negatives unsupported");if(e===Ce)return r.ONE;if(e===Ee)return t;let n=r.ONE,s=t;for(;e>Ce;)e&Ee&&(n=r.mul(n,s)),s=r.sqr(s),e>>=Ee;return n}function Iu(r,t,e=!1){const n=new Array(t.length).fill(e?r.ZERO:void 0),s=t.reduce((o,c,u)=>r.is0(c)?o:(n[u]=o,r.mul(o,c)),r.ONE),i=r.inv(s);return t.reduceRight((o,c,u)=>r.is0(c)?o:(n[u]=r.mul(o,n[u]),r.mul(o,c)),i),n}function Fa(r,t){const e=(r.ORDER-Ee)/In,n=r.pow(t,e),s=r.eql(n,r.ONE),i=r.eql(n,r.ZERO),o=r.eql(n,r.neg(r.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function Ru(r,t){t!==void 0&&So(t);const e=t!==void 0?t:r.toString(2).length,n=Math.ceil(e/8);return{nBitLength:e,nByteLength:n}}function zn(r,t,e=!1,n={}){if(r<=Ce)throw new Error("invalid field: expected ORDER > 0, got "+r);let s,i,o=!1,c;if(typeof t=="object"&&t!=null){if(n.sqrt||e)throw new Error("cannot specify opts in two arguments");const A=t;A.BITS&&(s=A.BITS),A.sqrt&&(i=A.sqrt),typeof A.isLE=="boolean"&&(e=A.isLE),typeof A.modFromBytes=="boolean"&&(o=A.modFromBytes),c=A.allowedLengths}else typeof t=="number"&&(s=t),n.sqrt&&(i=n.sqrt);const{nBitLength:u,nByteLength:p}=Ru(r,s);if(p>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let y;const _=Object.freeze({ORDER:r,isLE:e,BITS:u,BYTES:p,MASK:qr(u),ZERO:Ce,ONE:Ee,allowedLengths:c,create:A=>de(A,r),isValid:A=>{if(typeof A!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof A);return Ce<=A&&A<r},is0:A=>A===Ce,isValidNot0:A=>!_.is0(A)&&_.isValid(A),isOdd:A=>(A&Ee)===Ee,neg:A=>de(-A,r),eql:(A,b)=>A===b,sqr:A=>de(A*A,r),add:(A,b)=>de(A+b,r),sub:(A,b)=>de(A-b,r),mul:(A,b)=>de(A*b,r),pow:(A,b)=>bf(_,A,b),div:(A,b)=>de(A*Oa(b,r),r),sqrN:A=>A*A,addN:(A,b)=>A+b,subN:(A,b)=>A-b,mulN:(A,b)=>A*b,inv:A=>Oa(A,r),sqrt:i||(A=>(y||(y=pf(r)),y(_,A))),toBytes:A=>e?bu(A,p):na(A,p),fromBytes:(A,b=!0)=>{if(c){if(!c.includes(A.length)||A.length>p)throw new Error("Field.fromBytes: expected "+c+" bytes, got "+A.length);const M=new Uint8Array(p);M.set(A,e?0:M.length-A.length),A=M}if(A.length!==p)throw new Error("Field.fromBytes: expected "+p+" bytes, got "+A.length);let B=e?Ur(A):zi(A);if(o&&(B=de(B,r)),!b&&!_.isValid(B))throw new Error("invalid field element: outside of range 0..ORDER");return B},invertBatch:A=>Iu(_,A),cmov:(A,b,B)=>B?b:A});return Object.freeze(_)}function ku(r){if(typeof r!="bigint")throw new Error("field order must be bigint");const t=r.toString(2).length;return Math.ceil(t/8)}function Tu(r){const t=ku(r);return t+Math.ceil(t/2)}function vf(r,t,e=!1){const n=r.length,s=ku(t),i=Tu(t);if(n<16||n<i||n>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+n);const o=e?Ur(r):zi(r),c=de(o,t-Ee)+Ee;return e?bu(c,s):na(c,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const gr=BigInt(0),Rn=BigInt(1);function Mi(r,t){const e=t.negate();return r?e:t}function kn(r,t){const e=Iu(r.Fp,t.map(n=>n.Z));return t.map((n,s)=>r.fromAffine(n.toAffine(e[s])))}function Cu(r,t){if(!Number.isSafeInteger(r)||r<=0||r>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+r)}function vs(r,t){Cu(r,t);const e=Math.ceil(t/r)+1,n=2**(r-1),s=2**r,i=qr(r),o=BigInt(r);return{windows:e,windowSize:n,mask:i,maxNumber:s,shiftBy:o}}function Pa(r,t,e){const{windowSize:n,mask:s,maxNumber:i,shiftBy:o}=e;let c=Number(r&s),u=r>>o;c>n&&(c-=i,u+=Rn);const p=t*n,y=p+Math.abs(c)-1,_=c===0,A=c<0,b=t%2!==0;return{nextN:u,offset:y,isZero:_,isNeg:A,isNegF:b,offsetF:p}}function Ef(r,t){if(!Array.isArray(r))throw new Error("array expected");r.forEach((e,n)=>{if(!(e instanceof t))throw new Error("invalid point at index "+n)})}function Sf(r,t){if(!Array.isArray(r))throw new Error("array of scalars expected");r.forEach((e,n)=>{if(!t.isValid(e))throw new Error("invalid scalar at index "+n)})}const Es=new WeakMap,Lu=new WeakMap;function Ss(r){return Lu.get(r)||1}function Da(r){if(r!==gr)throw new Error("invalid wNAF")}class Uu{constructor(t,e){this.BASE=t.BASE,this.ZERO=t.ZERO,this.Fn=t.Fn,this.bits=e}_unsafeLadder(t,e,n=this.ZERO){let s=t;for(;e>gr;)e&Rn&&(n=n.add(s)),s=s.double(),e>>=Rn;return n}precomputeWindow(t,e){const{windows:n,windowSize:s}=vs(e,this.bits),i=[];let o=t,c=o;for(let u=0;u<n;u++){c=o,i.push(c);for(let p=1;p<s;p++)c=c.add(o),i.push(c);o=c.double()}return i}wNAF(t,e,n){if(!this.Fn.isValid(n))throw new Error("invalid scalar");let s=this.ZERO,i=this.BASE;const o=vs(t,this.bits);for(let c=0;c<o.windows;c++){const{nextN:u,offset:p,isZero:y,isNeg:_,isNegF:A,offsetF:b}=Pa(n,c,o);n=u,y?i=i.add(Mi(A,e[b])):s=s.add(Mi(_,e[p]))}return Da(n),{p:s,f:i}}wNAFUnsafe(t,e,n,s=this.ZERO){const i=vs(t,this.bits);for(let o=0;o<i.windows&&n!==gr;o++){const{nextN:c,offset:u,isZero:p,isNeg:y}=Pa(n,o,i);if(n=c,!p){const _=e[u];s=s.add(y?_.negate():_)}}return Da(n),s}getPrecomputes(t,e,n){let s=Es.get(e);return s||(s=this.precomputeWindow(e,t),t!==1&&(typeof n=="function"&&(s=n(s)),Es.set(e,s))),s}cached(t,e,n){const s=Ss(t);return this.wNAF(s,this.getPrecomputes(s,t,n),e)}unsafe(t,e,n,s){const i=Ss(t);return i===1?this._unsafeLadder(t,e,s):this.wNAFUnsafe(i,this.getPrecomputes(i,t,n),e,s)}createCache(t,e){Cu(e,this.bits),Lu.set(t,e),Es.delete(t)}hasCache(t){return Ss(t)!==1}}function _f(r,t,e,n){let s=t,i=r.ZERO,o=r.ZERO;for(;e>gr||n>gr;)e&Rn&&(i=i.add(s)),n&Rn&&(o=o.add(s)),s=s.double(),e>>=Rn,n>>=Rn;return{p1:i,p2:o}}function Nu(r,t,e,n){Ef(e,r),Sf(n,t);const s=e.length,i=n.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=r.ZERO,c=vu(BigInt(s));let u=1;c>12?u=c-3:c>4?u=c-2:c>0&&(u=2);const p=qr(u),y=new Array(Number(p)+1).fill(o),_=Math.floor((t.BITS-1)/u)*u;let A=o;for(let b=_;b>=0;b-=u){y.fill(o);for(let M=0;M<i;M++){const C=n[M],O=Number(C>>BigInt(b)&p);y[O]=y[O].add(e[M])}let B=o;for(let M=y.length-1,C=o;M>0;M--)C=C.add(y[M]),B=B.add(C);if(A=A.add(B),b!==0)for(let M=0;M<u;M++)A=A.double()}return A}function Wa(r,t,e){if(t){if(t.ORDER!==r)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return yf(t),t}else return zn(r,{isLE:e})}function Ou(r,t,e={},n){if(n===void 0&&(n=r==="edwards"),!t||typeof t!="object")throw new Error(`expected valid ${r} CURVE object`);for(const u of["p","n","h"]){const p=t[u];if(!(typeof p=="bigint"&&p>gr))throw new Error(`CURVE.${u} must be positive bigint`)}const s=Wa(t.p,e.Fp,n),i=Wa(t.n,e.Fn,n),c=["Gx","Gy","a",r==="weierstrass"?"b":"d"];for(const u of c)if(!s.isValid(t[u]))throw new Error(`CURVE.${u} must be valid field element of CURVE.Fp`);return t=Object.freeze(Object.assign({},t)),{CURVE:t,Fp:s,Fn:i}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const gn=BigInt(0),we=BigInt(1),_s=BigInt(2),xf=BigInt(8);function Af(r,t,e,n){const s=r.sqr(e),i=r.sqr(n),o=r.add(r.mul(t.a,s),i),c=r.add(r.ONE,r.mul(t.d,r.mul(s,i)));return r.eql(o,c)}function Bf(r,t={}){const e=Ou("edwards",r,t,t.FpFnLE),{Fp:n,Fn:s}=e;let i=e.CURVE;const{h:o}=i;zr(t,{},{uvRatio:"function"});const c=_s<<BigInt(s.BYTES*8)-we,u=C=>n.create(C),p=t.uvRatio||((C,O)=>{try{return{isValid:!0,value:n.sqrt(n.div(C,O))}}catch{return{isValid:!1,value:gn}}});if(!Af(n,i,i.Gx,i.Gy))throw new Error("bad curve params: generator point");function y(C,O,D=!1){const N=D?we:gn;return xo("coordinate "+C,O,N,c),O}function _(C){if(!(C instanceof B))throw new Error("ExtendedPoint expected")}const A=Bi((C,O)=>{const{X:D,Y:N,Z:V}=C,Z=C.is0();O==null&&(O=Z?xf:n.inv(V));const $=u(D*O),Q=u(N*O),Y=n.mul(V,O);if(Z)return{x:gn,y:we};if(Y!==we)throw new Error("invZ was invalid");return{x:$,y:Q}}),b=Bi(C=>{const{a:O,d:D}=i;if(C.is0())throw new Error("bad point: ZERO");const{X:N,Y:V,Z,T:$}=C,Q=u(N*N),Y=u(V*V),k=u(Z*Z),U=u(k*k),W=u(Q*O),q=u(k*u(W+Y)),m=u(U+u(D*u(Q*Y)));if(q!==m)throw new Error("bad point: equation left != right (1)");const a=u(N*V),f=u(Z*$);if(a!==f)throw new Error("bad point: equation left != right (2)");return!0});class B{constructor(O,D,N,V){this.X=y("x",O),this.Y=y("y",D),this.Z=y("z",N,!0),this.T=y("t",V),Object.freeze(this)}static CURVE(){return i}static fromAffine(O){if(O instanceof B)throw new Error("extended point not allowed");const{x:D,y:N}=O||{};return y("x",D),y("y",N),new B(D,N,we,u(D*N))}static fromBytes(O,D=!1){const N=n.BYTES,{a:V,d:Z}=i;O=Na(Ke(O,N,"point")),Wn(D,"zip215");const $=Na(O),Q=O[N-1];$[N-1]=Q&-129;const Y=Ur($),k=D?c:n.ORDER;xo("point.y",Y,gn,k);const U=u(Y*Y),W=u(U-we),q=u(Z*U-V);let{isValid:m,value:a}=p(W,q);if(!m)throw new Error("bad point: invalid y coordinate");const f=(a&we)===we,w=(Q&128)!==0;if(!D&&a===gn&&w)throw new Error("bad point: x=0 and x_0=1");return w!==f&&(a=u(-a)),B.fromAffine({x:a,y:Y})}static fromHex(O,D=!1){return B.fromBytes(jt("point",O),D)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(O=8,D=!0){return M.createCache(this,O),D||this.multiply(_s),this}assertValidity(){b(this)}equals(O){_(O);const{X:D,Y:N,Z:V}=this,{X:Z,Y:$,Z:Q}=O,Y=u(D*Q),k=u(Z*V),U=u(N*Q),W=u($*V);return Y===k&&U===W}is0(){return this.equals(B.ZERO)}negate(){return new B(u(-this.X),this.Y,this.Z,u(-this.T))}double(){const{a:O}=i,{X:D,Y:N,Z:V}=this,Z=u(D*D),$=u(N*N),Q=u(_s*u(V*V)),Y=u(O*Z),k=D+N,U=u(u(k*k)-Z-$),W=Y+$,q=W-Q,m=Y-$,a=u(U*q),f=u(W*m),w=u(U*m),S=u(q*W);return new B(a,f,S,w)}add(O){_(O);const{a:D,d:N}=i,{X:V,Y:Z,Z:$,T:Q}=this,{X:Y,Y:k,Z:U,T:W}=O,q=u(V*Y),m=u(Z*k),a=u(Q*N*W),f=u($*U),w=u((V+Z)*(Y+k)-q-m),S=f-a,I=f+a,L=u(m-D*q),P=u(w*S),x=u(I*L),l=u(w*L),h=u(S*I);return new B(P,x,h,l)}subtract(O){return this.add(O.negate())}multiply(O){if(!s.isValidNot0(O))throw new Error("invalid scalar: expected 1 <= sc < curve.n");const{p:D,f:N}=M.cached(this,O,V=>kn(B,V));return kn(B,[D,N])[0]}multiplyUnsafe(O,D=B.ZERO){if(!s.isValid(O))throw new Error("invalid scalar: expected 0 <= sc < curve.n");return O===gn?B.ZERO:this.is0()||O===we?this:M.unsafe(this,O,N=>kn(B,N),D)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}isTorsionFree(){return M.unsafe(this,i.n).is0()}toAffine(O){return A(this,O)}clearCofactor(){return o===we?this:this.multiplyUnsafe(o)}toBytes(){const{x:O,y:D}=this.toAffine(),N=n.toBytes(D);return N[N.length-1]|=O&we?128:0,N}toHex(){return Pn(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get ex(){return this.X}get ey(){return this.Y}get ez(){return this.Z}get et(){return this.T}static normalizeZ(O){return kn(B,O)}static msm(O,D){return Nu(B,s,O,D)}_setWindowSize(O){this.precompute(O)}toRawBytes(){return this.toBytes()}}B.BASE=new B(i.Gx,i.Gy,we,u(i.Gx*i.Gy)),B.ZERO=new B(gn,we,we,gn),B.Fp=n,B.Fn=s;const M=new Uu(B,s.BITS);return B.BASE.precompute(8),B}function Mf(r,t,e={}){if(typeof t!="function")throw new Error('"hash" function param is required');zr(e,{},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});const{prehash:n}=e,{BASE:s,Fp:i,Fn:o}=r,c=e.randomBytes||ta,u=e.adjustScalarBytes||(k=>k),p=e.domain||((k,U,W)=>{if(Wn(W,"phflag"),U.length||W)throw new Error("Contexts/pre-hash are not supported");return k});function y(k){return o.create(Ur(k))}function _(k){const U=N.secretKey;k=jt("private key",k,U);const W=jt("hashed private key",t(k),2*U),q=u(W.slice(0,U)),m=W.slice(U,2*U),a=y(q);return{head:q,prefix:m,scalar:a}}function A(k){const{head:U,prefix:W,scalar:q}=_(k),m=s.multiply(q),a=m.toBytes();return{head:U,prefix:W,scalar:q,point:m,pointBytes:a}}function b(k){return A(k).pointBytes}function B(k=Uint8Array.of(),...U){const W=Ve(...U);return y(t(p(W,jt("context",k),!!n)))}function M(k,U,W={}){k=jt("message",k),n&&(k=n(k));const{prefix:q,scalar:m,pointBytes:a}=A(U),f=B(W.context,q,k),w=s.multiply(f).toBytes(),S=B(W.context,w,a,k),I=o.create(f+S*m);if(!o.isValid(I))throw new Error("sign failed: invalid s");const L=Ve(w,o.toBytes(I));return Ke(L,N.signature,"result")}const C={zip215:!0};function O(k,U,W,q=C){const{context:m,zip215:a}=q,f=N.signature;k=jt("signature",k,f),U=jt("message",U),W=jt("publicKey",W,N.publicKey),a!==void 0&&Wn(a,"zip215"),n&&(U=n(U));const w=f/2,S=k.subarray(0,w),I=Ur(k.subarray(w,f));let L,P,x;try{L=r.fromBytes(W,a),P=r.fromBytes(S,a),x=s.multiplyUnsafe(I)}catch{return!1}if(!a&&L.isSmallOrder())return!1;const l=B(m,P.toBytes(),L.toBytes(),U);return P.add(L.multiplyUnsafe(l)).subtract(x).clearCofactor().is0()}const D=i.BYTES,N={secretKey:D,publicKey:D,signature:2*D,seed:D};function V(k=c(N.seed)){return Ke(k,N.seed,"seed")}function Z(k){const U=Y.randomSecretKey(k);return{secretKey:U,publicKey:b(U)}}function $(k){return Wr(k)&&k.length===o.BYTES}function Q(k,U){try{return!!r.fromBytes(k,U)}catch{return!1}}const Y={getExtendedPublicKey:A,randomSecretKey:V,isValidSecretKey:$,isValidPublicKey:Q,toMontgomery(k){const{y:U}=r.fromBytes(k),W=N.publicKey,q=W===32;if(!q&&W!==57)throw new Error("only defined for 25519 and 448");const m=q?i.div(we+U,we-U):i.div(U-we,U+we);return i.toBytes(m)},toMontgomerySecret(k){const U=N.secretKey;Ke(k,U);const W=t(k.subarray(0,U));return u(W).subarray(0,U)},randomPrivateKey:V,precompute(k=8,U=r.BASE){return U.precompute(k,!1)}};return Object.freeze({keygen:Z,getPublicKey:b,sign:M,verify:O,utils:Y,Point:r,lengths:N})}function If(r){const t={a:r.a,d:r.d,p:r.Fp.ORDER,n:r.n,h:r.h,Gx:r.Gx,Gy:r.Gy},e=r.Fp,n=zn(t.n,r.nBitLength,!0),s={Fp:e,Fn:n,uvRatio:r.uvRatio},i={randomBytes:r.randomBytes,adjustScalarBytes:r.adjustScalarBytes,domain:r.domain,prehash:r.prehash,mapToCurve:r.mapToCurve};return{CURVE:t,curveOpts:s,hash:r.hash,eddsaOpts:i}}function Rf(r,t){const e=t.Point;return Object.assign({},t,{ExtendedPoint:e,CURVE:r,nBitLength:e.Fn.BITS,nByteLength:e.Fn.BYTES})}function kf(r){const{CURVE:t,curveOpts:e,hash:n,eddsaOpts:s}=If(r),i=Bf(t,e),o=Mf(i,n,s);return Rf(r,o)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Tf=BigInt(1),qa=BigInt(2);BigInt(3);const Cf=BigInt(5),Lf=BigInt(8),ia=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),Fu={p:ia,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:Lf,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function Uf(r){const t=BigInt(10),e=BigInt(20),n=BigInt(40),s=BigInt(80),i=ia,c=r*r%i*r%i,u=$t(c,qa,i)*c%i,p=$t(u,Tf,i)*r%i,y=$t(p,Cf,i)*p%i,_=$t(y,t,i)*y%i,A=$t(_,e,i)*_%i,b=$t(A,n,i)*A%i,B=$t(b,s,i)*b%i,M=$t(B,s,i)*b%i,C=$t(M,t,i)*y%i;return{pow_p_5_8:$t(C,qa,i)*r%i,b2:c}}function Nf(r){return r[0]&=248,r[31]&=127,r[31]|=64,r}const za=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function Of(r,t){const e=ia,n=de(t*t*t,e),s=de(n*n*t,e),i=Uf(r*s).pow_p_5_8;let o=de(r*n*i,e);const c=de(t*o*o,e),u=o,p=de(o*za,e),y=c===r,_=c===de(-r,e),A=c===de(-r*za,e);return y&&(o=u),(_||A)&&(o=p),mf(o,e)&&(o=de(-o,e)),{isValid:y||_,value:o}}const Ff=zn(Fu.p,{isLE:!0}),Pf={...Fu,Fp:Ff,hash:cf,adjustScalarBytes:Nf,uvRatio:Of},Kr=kf(Pf);var oi={exports:{}};const Df={},Wf=Object.freeze(Object.defineProperty({__proto__:null,default:Df},Symbol.toStringTag,{value:"Module"})),qf=Jo(Wf);var zf=oi.exports,Ka;function Pu(){return Ka||(Ka=1,(function(r){(function(t,e){function n(m,a){if(!m)throw new Error(a||"Assertion failed")}function s(m,a){m.super_=a;var f=function(){};f.prototype=a.prototype,m.prototype=new f,m.prototype.constructor=m}function i(m,a,f){if(i.isBN(m))return m;this.negative=0,this.words=null,this.length=0,this.red=null,m!==null&&((a==="le"||a==="be")&&(f=a,a=10),this._init(m||0,a||10,f||"be"))}typeof t=="object"?t.exports=i:e.BN=i,i.BN=i,i.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=qf.Buffer}catch{}i.isBN=function(a){return a instanceof i?!0:a!==null&&typeof a=="object"&&a.constructor.wordSize===i.wordSize&&Array.isArray(a.words)},i.max=function(a,f){return a.cmp(f)>0?a:f},i.min=function(a,f){return a.cmp(f)<0?a:f},i.prototype._init=function(a,f,w){if(typeof a=="number")return this._initNumber(a,f,w);if(typeof a=="object")return this._initArray(a,f,w);f==="hex"&&(f=16),n(f===(f|0)&&f>=2&&f<=36),a=a.toString().replace(/\s+/g,"");var S=0;a[0]==="-"&&(S++,this.negative=1),S<a.length&&(f===16?this._parseHex(a,S,w):(this._parseBase(a,f,S),w==="le"&&this._initArray(this.toArray(),f,w)))},i.prototype._initNumber=function(a,f,w){a<0&&(this.negative=1,a=-a),a<67108864?(this.words=[a&67108863],this.length=1):a<4503599627370496?(this.words=[a&67108863,a/67108864&67108863],this.length=2):(n(a<9007199254740992),this.words=[a&67108863,a/67108864&67108863,1],this.length=3),w==="le"&&this._initArray(this.toArray(),f,w)},i.prototype._initArray=function(a,f,w){if(n(typeof a.length=="number"),a.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(a.length/3),this.words=new Array(this.length);for(var S=0;S<this.length;S++)this.words[S]=0;var I,L,P=0;if(w==="be")for(S=a.length-1,I=0;S>=0;S-=3)L=a[S]|a[S-1]<<8|a[S-2]<<16,this.words[I]|=L<<P&67108863,this.words[I+1]=L>>>26-P&67108863,P+=24,P>=26&&(P-=26,I++);else if(w==="le")for(S=0,I=0;S<a.length;S+=3)L=a[S]|a[S+1]<<8|a[S+2]<<16,this.words[I]|=L<<P&67108863,this.words[I+1]=L>>>26-P&67108863,P+=24,P>=26&&(P-=26,I++);return this._strip()};function c(m,a){var f=m.charCodeAt(a);if(f>=48&&f<=57)return f-48;if(f>=65&&f<=70)return f-55;if(f>=97&&f<=102)return f-87;n(!1,"Invalid character in "+m)}function u(m,a,f){var w=c(m,f);return f-1>=a&&(w|=c(m,f-1)<<4),w}i.prototype._parseHex=function(a,f,w){this.length=Math.ceil((a.length-f)/6),this.words=new Array(this.length);for(var S=0;S<this.length;S++)this.words[S]=0;var I=0,L=0,P;if(w==="be")for(S=a.length-1;S>=f;S-=2)P=u(a,f,S)<<I,this.words[L]|=P&67108863,I>=18?(I-=18,L+=1,this.words[L]|=P>>>26):I+=8;else{var x=a.length-f;for(S=x%2===0?f+1:f;S<a.length;S+=2)P=u(a,f,S)<<I,this.words[L]|=P&67108863,I>=18?(I-=18,L+=1,this.words[L]|=P>>>26):I+=8}this._strip()};function p(m,a,f,w){for(var S=0,I=0,L=Math.min(m.length,f),P=a;P<L;P++){var x=m.charCodeAt(P)-48;S*=w,x>=49?I=x-49+10:x>=17?I=x-17+10:I=x,n(x>=0&&I<w,"Invalid character"),S+=I}return S}i.prototype._parseBase=function(a,f,w){this.words=[0],this.length=1;for(var S=0,I=1;I<=67108863;I*=f)S++;S--,I=I/f|0;for(var L=a.length-w,P=L%S,x=Math.min(L,L-P)+w,l=0,h=w;h<x;h+=S)l=p(a,h,h+S,f),this.imuln(I),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l);if(P!==0){var E=1;for(l=p(a,h,a.length,f),h=0;h<P;h++)E*=f;this.imuln(E),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l)}this._strip()},i.prototype.copy=function(a){a.words=new Array(this.length);for(var f=0;f<this.length;f++)a.words[f]=this.words[f];a.length=this.length,a.negative=this.negative,a.red=this.red};function y(m,a){m.words=a.words,m.length=a.length,m.negative=a.negative,m.red=a.red}if(i.prototype._move=function(a){y(a,this)},i.prototype.clone=function(){var a=new i(null);return this.copy(a),a},i.prototype._expand=function(a){for(;this.length<a;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=_}catch{i.prototype.inspect=_}else i.prototype.inspect=_;function _(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var A=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],b=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],B=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(a,f){a=a||10,f=f|0||1;var w;if(a===16||a==="hex"){w="";for(var S=0,I=0,L=0;L<this.length;L++){var P=this.words[L],x=((P<<S|I)&16777215).toString(16);I=P>>>24-S&16777215,S+=2,S>=26&&(S-=26,L--),I!==0||L!==this.length-1?w=A[6-x.length]+x+w:w=x+w}for(I!==0&&(w=I.toString(16)+w);w.length%f!==0;)w="0"+w;return this.negative!==0&&(w="-"+w),w}if(a===(a|0)&&a>=2&&a<=36){var l=b[a],h=B[a];w="";var E=this.clone();for(E.negative=0;!E.isZero();){var T=E.modrn(h).toString(a);E=E.idivn(h),E.isZero()?w=T+w:w=A[l-T.length]+T+w}for(this.isZero()&&(w="0"+w);w.length%f!==0;)w="0"+w;return this.negative!==0&&(w="-"+w),w}n(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var a=this.words[0];return this.length===2?a+=this.words[1]*67108864:this.length===3&&this.words[2]===1?a+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-a:a},i.prototype.toJSON=function(){return this.toString(16,2)},o&&(i.prototype.toBuffer=function(a,f){return this.toArrayLike(o,a,f)}),i.prototype.toArray=function(a,f){return this.toArrayLike(Array,a,f)};var M=function(a,f){return a.allocUnsafe?a.allocUnsafe(f):new a(f)};i.prototype.toArrayLike=function(a,f,w){this._strip();var S=this.byteLength(),I=w||Math.max(1,S);n(S<=I,"byte array longer than desired length"),n(I>0,"Requested array length <= 0");var L=M(a,I),P=f==="le"?"LE":"BE";return this["_toArrayLike"+P](L,S),L},i.prototype._toArrayLikeLE=function(a,f){for(var w=0,S=0,I=0,L=0;I<this.length;I++){var P=this.words[I]<<L|S;a[w++]=P&255,w<a.length&&(a[w++]=P>>8&255),w<a.length&&(a[w++]=P>>16&255),L===6?(w<a.length&&(a[w++]=P>>24&255),S=0,L=0):(S=P>>>24,L+=2)}if(w<a.length)for(a[w++]=S;w<a.length;)a[w++]=0},i.prototype._toArrayLikeBE=function(a,f){for(var w=a.length-1,S=0,I=0,L=0;I<this.length;I++){var P=this.words[I]<<L|S;a[w--]=P&255,w>=0&&(a[w--]=P>>8&255),w>=0&&(a[w--]=P>>16&255),L===6?(w>=0&&(a[w--]=P>>24&255),S=0,L=0):(S=P>>>24,L+=2)}if(w>=0)for(a[w--]=S;w>=0;)a[w--]=0},Math.clz32?i.prototype._countBits=function(a){return 32-Math.clz32(a)}:i.prototype._countBits=function(a){var f=a,w=0;return f>=4096&&(w+=13,f>>>=13),f>=64&&(w+=7,f>>>=7),f>=8&&(w+=4,f>>>=4),f>=2&&(w+=2,f>>>=2),w+f},i.prototype._zeroBits=function(a){if(a===0)return 26;var f=a,w=0;return(f&8191)===0&&(w+=13,f>>>=13),(f&127)===0&&(w+=7,f>>>=7),(f&15)===0&&(w+=4,f>>>=4),(f&3)===0&&(w+=2,f>>>=2),(f&1)===0&&w++,w},i.prototype.bitLength=function(){var a=this.words[this.length-1],f=this._countBits(a);return(this.length-1)*26+f};function C(m){for(var a=new Array(m.bitLength()),f=0;f<a.length;f++){var w=f/26|0,S=f%26;a[f]=m.words[w]>>>S&1}return a}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var a=0,f=0;f<this.length;f++){var w=this._zeroBits(this.words[f]);if(a+=w,w!==26)break}return a},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(a){return this.negative!==0?this.abs().inotn(a).iaddn(1):this.clone()},i.prototype.fromTwos=function(a){return this.testn(a-1)?this.notn(a).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(a){for(;this.length<a.length;)this.words[this.length++]=0;for(var f=0;f<a.length;f++)this.words[f]=this.words[f]|a.words[f];return this._strip()},i.prototype.ior=function(a){return n((this.negative|a.negative)===0),this.iuor(a)},i.prototype.or=function(a){return this.length>a.length?this.clone().ior(a):a.clone().ior(this)},i.prototype.uor=function(a){return this.length>a.length?this.clone().iuor(a):a.clone().iuor(this)},i.prototype.iuand=function(a){var f;this.length>a.length?f=a:f=this;for(var w=0;w<f.length;w++)this.words[w]=this.words[w]&a.words[w];return this.length=f.length,this._strip()},i.prototype.iand=function(a){return n((this.negative|a.negative)===0),this.iuand(a)},i.prototype.and=function(a){return this.length>a.length?this.clone().iand(a):a.clone().iand(this)},i.prototype.uand=function(a){return this.length>a.length?this.clone().iuand(a):a.clone().iuand(this)},i.prototype.iuxor=function(a){var f,w;this.length>a.length?(f=this,w=a):(f=a,w=this);for(var S=0;S<w.length;S++)this.words[S]=f.words[S]^w.words[S];if(this!==f)for(;S<f.length;S++)this.words[S]=f.words[S];return this.length=f.length,this._strip()},i.prototype.ixor=function(a){return n((this.negative|a.negative)===0),this.iuxor(a)},i.prototype.xor=function(a){return this.length>a.length?this.clone().ixor(a):a.clone().ixor(this)},i.prototype.uxor=function(a){return this.length>a.length?this.clone().iuxor(a):a.clone().iuxor(this)},i.prototype.inotn=function(a){n(typeof a=="number"&&a>=0);var f=Math.ceil(a/26)|0,w=a%26;this._expand(f),w>0&&f--;for(var S=0;S<f;S++)this.words[S]=~this.words[S]&67108863;return w>0&&(this.words[S]=~this.words[S]&67108863>>26-w),this._strip()},i.prototype.notn=function(a){return this.clone().inotn(a)},i.prototype.setn=function(a,f){n(typeof a=="number"&&a>=0);var w=a/26|0,S=a%26;return this._expand(w+1),f?this.words[w]=this.words[w]|1<<S:this.words[w]=this.words[w]&~(1<<S),this._strip()},i.prototype.iadd=function(a){var f;if(this.negative!==0&&a.negative===0)return this.negative=0,f=this.isub(a),this.negative^=1,this._normSign();if(this.negative===0&&a.negative!==0)return a.negative=0,f=this.isub(a),a.negative=1,f._normSign();var w,S;this.length>a.length?(w=this,S=a):(w=a,S=this);for(var I=0,L=0;L<S.length;L++)f=(w.words[L]|0)+(S.words[L]|0)+I,this.words[L]=f&67108863,I=f>>>26;for(;I!==0&&L<w.length;L++)f=(w.words[L]|0)+I,this.words[L]=f&67108863,I=f>>>26;if(this.length=w.length,I!==0)this.words[this.length]=I,this.length++;else if(w!==this)for(;L<w.length;L++)this.words[L]=w.words[L];return this},i.prototype.add=function(a){var f;return a.negative!==0&&this.negative===0?(a.negative=0,f=this.sub(a),a.negative^=1,f):a.negative===0&&this.negative!==0?(this.negative=0,f=a.sub(this),this.negative=1,f):this.length>a.length?this.clone().iadd(a):a.clone().iadd(this)},i.prototype.isub=function(a){if(a.negative!==0){a.negative=0;var f=this.iadd(a);return a.negative=1,f._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(a),this.negative=1,this._normSign();var w=this.cmp(a);if(w===0)return this.negative=0,this.length=1,this.words[0]=0,this;var S,I;w>0?(S=this,I=a):(S=a,I=this);for(var L=0,P=0;P<I.length;P++)f=(S.words[P]|0)-(I.words[P]|0)+L,L=f>>26,this.words[P]=f&67108863;for(;L!==0&&P<S.length;P++)f=(S.words[P]|0)+L,L=f>>26,this.words[P]=f&67108863;if(L===0&&P<S.length&&S!==this)for(;P<S.length;P++)this.words[P]=S.words[P];return this.length=Math.max(this.length,P),S!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(a){return this.clone().isub(a)};function O(m,a,f){f.negative=a.negative^m.negative;var w=m.length+a.length|0;f.length=w,w=w-1|0;var S=m.words[0]|0,I=a.words[0]|0,L=S*I,P=L&67108863,x=L/67108864|0;f.words[0]=P;for(var l=1;l<w;l++){for(var h=x>>>26,E=x&67108863,T=Math.min(l,a.length-1),K=Math.max(0,l-m.length+1);K<=T;K++){var J=l-K|0;S=m.words[J]|0,I=a.words[K]|0,L=S*I+E,h+=L/67108864|0,E=L&67108863}f.words[l]=E|0,x=h|0}return x!==0?f.words[l]=x|0:f.length--,f._strip()}var D=function(a,f,w){var S=a.words,I=f.words,L=w.words,P=0,x,l,h,E=S[0]|0,T=E&8191,K=E>>>13,J=S[1]|0,nt=J&8191,st=J>>>13,Et=S[2]|0,_t=Et&8191,At=Et>>>13,De=S[3]|0,Bt=De&8191,Wt=De>>>13,Vr=S[4]|0,Tt=Vr&8191,qt=Vr>>>13,Gr=S[5]|0,Nt=Gr&8191,Rt=Gr>>>13,Le=S[6]|0,Ct=Le&8191,zt=Le>>>13,We=S[7]|0,Kt=We&8191,v=We>>>13,d=S[8]|0,g=d&8191,R=d>>>13,z=S[9]|0,j=z&8191,X=z>>>13,wt=I[0]|0,mt=wt&8191,pt=wt>>>13,kt=I[1]|0,gt=kt&8191,Gt=kt>>>13,va=I[2]|0,Zt=va&8191,Yt=va>>>13,Ea=I[3]|0,Jt=Ea&8191,Xt=Ea>>>13,Sa=I[4]|0,Qt=Sa&8191,te=Sa>>>13,_a=I[5]|0,ee=_a&8191,ne=_a>>>13,xa=I[6]|0,re=xa&8191,ie=xa>>>13,Aa=I[7]|0,se=Aa&8191,oe=Aa>>>13,Ba=I[8]|0,ae=Ba&8191,ce=Ba>>>13,Ma=I[9]|0,ue=Ma&8191,le=Ma>>>13;w.negative=a.negative^f.negative,w.length=19,x=Math.imul(T,mt),l=Math.imul(T,pt),l=l+Math.imul(K,mt)|0,h=Math.imul(K,pt);var Xi=(P+x|0)+((l&8191)<<13)|0;P=(h+(l>>>13)|0)+(Xi>>>26)|0,Xi&=67108863,x=Math.imul(nt,mt),l=Math.imul(nt,pt),l=l+Math.imul(st,mt)|0,h=Math.imul(st,pt),x=x+Math.imul(T,gt)|0,l=l+Math.imul(T,Gt)|0,l=l+Math.imul(K,gt)|0,h=h+Math.imul(K,Gt)|0;var Qi=(P+x|0)+((l&8191)<<13)|0;P=(h+(l>>>13)|0)+(Qi>>>26)|0,Qi&=67108863,x=Math.imul(_t,mt),l=Math.imul(_t,pt),l=l+Math.imul(At,mt)|0,h=Math.imul(At,pt),x=x+Math.imul(nt,gt)|0,l=l+Math.imul(nt,Gt)|0,l=l+Math.imul(st,gt)|0,h=h+Math.imul(st,Gt)|0,x=x+Math.imul(T,Zt)|0,l=l+Math.imul(T,Yt)|0,l=l+Math.imul(K,Zt)|0,h=h+Math.imul(K,Yt)|0;var ts=(P+x|0)+((l&8191)<<13)|0;P=(h+(l>>>13)|0)+(ts>>>26)|0,ts&=67108863,x=Math.imul(Bt,mt),l=Math.imul(Bt,pt),l=l+Math.imul(Wt,mt)|0,h=Math.imul(Wt,pt),x=x+Math.imul(_t,gt)|0,l=l+Math.imul(_t,Gt)|0,l=l+Math.imul(At,gt)|0,h=h+Math.imul(At,Gt)|0,x=x+Math.imul(nt,Zt)|0,l=l+Math.imul(nt,Yt)|0,l=l+Math.imul(st,Zt)|0,h=h+Math.imul(st,Yt)|0,x=x+Math.imul(T,Jt)|0,l=l+Math.imul(T,Xt)|0,l=l+Math.imul(K,Jt)|0,h=h+Math.imul(K,Xt)|0;var es=(P+x|0)+((l&8191)<<13)|0;P=(h+(l>>>13)|0)+(es>>>26)|0,es&=67108863,x=Math.imul(Tt,mt),l=Math.imul(Tt,pt),l=l+Math.imul(qt,mt)|0,h=Math.imul(qt,pt),x=x+Math.imul(Bt,gt)|0,l=l+Math.imul(Bt,Gt)|0,l=l+Math.imul(Wt,gt)|0,h=h+Math.imul(Wt,Gt)|0,x=x+Math.imul(_t,Zt)|0,l=l+Math.imul(_t,Yt)|0,l=l+Math.imul(At,Zt)|0,h=h+Math.imul(At,Yt)|0,x=x+Math.imul(nt,Jt)|0,l=l+Math.imul(nt,Xt)|0,l=l+Math.imul(st,Jt)|0,h=h+Math.imul(st,Xt)|0,x=x+Math.imul(T,Qt)|0,l=l+Math.imul(T,te)|0,l=l+Math.imul(K,Qt)|0,h=h+Math.imul(K,te)|0;var ns=(P+x|0)+((l&8191)<<13)|0;P=(h+(l>>>13)|0)+(ns>>>26)|0,ns&=67108863,x=Math.imul(Nt,mt),l=Math.imul(Nt,pt),l=l+Math.imul(Rt,mt)|0,h=Math.imul(Rt,pt),x=x+Math.imul(Tt,gt)|0,l=l+Math.imul(Tt,Gt)|0,l=l+Math.imul(qt,gt)|0,h=h+Math.imul(qt,Gt)|0,x=x+Math.imul(Bt,Zt)|0,l=l+Math.imul(Bt,Yt)|0,l=l+Math.imul(Wt,Zt)|0,h=h+Math.imul(Wt,Yt)|0,x=x+Math.imul(_t,Jt)|0,l=l+Math.imul(_t,Xt)|0,l=l+Math.imul(At,Jt)|0,h=h+Math.imul(At,Xt)|0,x=x+Math.imul(nt,Qt)|0,l=l+Math.imul(nt,te)|0,l=l+Math.imul(st,Qt)|0,h=h+Math.imul(st,te)|0,x=x+Math.imul(T,ee)|0,l=l+Math.imul(T,ne)|0,l=l+Math.imul(K,ee)|0,h=h+Math.imul(K,ne)|0;var rs=(P+x|0)+((l&8191)<<13)|0;P=(h+(l>>>13)|0)+(rs>>>26)|0,rs&=67108863,x=Math.imul(Ct,mt),l=Math.imul(Ct,pt),l=l+Math.imul(zt,mt)|0,h=Math.imul(zt,pt),x=x+Math.imul(Nt,gt)|0,l=l+Math.imul(Nt,Gt)|0,l=l+Math.imul(Rt,gt)|0,h=h+Math.imul(Rt,Gt)|0,x=x+Math.imul(Tt,Zt)|0,l=l+Math.imul(Tt,Yt)|0,l=l+Math.imul(qt,Zt)|0,h=h+Math.imul(qt,Yt)|0,x=x+Math.imul(Bt,Jt)|0,l=l+Math.imul(Bt,Xt)|0,l=l+Math.imul(Wt,Jt)|0,h=h+Math.imul(Wt,Xt)|0,x=x+Math.imul(_t,Qt)|0,l=l+Math.imul(_t,te)|0,l=l+Math.imul(At,Qt)|0,h=h+Math.imul(At,te)|0,x=x+Math.imul(nt,ee)|0,l=l+Math.imul(nt,ne)|0,l=l+Math.imul(st,ee)|0,h=h+Math.imul(st,ne)|0,x=x+Math.imul(T,re)|0,l=l+Math.imul(T,ie)|0,l=l+Math.imul(K,re)|0,h=h+Math.imul(K,ie)|0;var is=(P+x|0)+((l&8191)<<13)|0;P=(h+(l>>>13)|0)+(is>>>26)|0,is&=67108863,x=Math.imul(Kt,mt),l=Math.imul(Kt,pt),l=l+Math.imul(v,mt)|0,h=Math.imul(v,pt),x=x+Math.imul(Ct,gt)|0,l=l+Math.imul(Ct,Gt)|0,l=l+Math.imul(zt,gt)|0,h=h+Math.imul(zt,Gt)|0,x=x+Math.imul(Nt,Zt)|0,l=l+Math.imul(Nt,Yt)|0,l=l+Math.imul(Rt,Zt)|0,h=h+Math.imul(Rt,Yt)|0,x=x+Math.imul(Tt,Jt)|0,l=l+Math.imul(Tt,Xt)|0,l=l+Math.imul(qt,Jt)|0,h=h+Math.imul(qt,Xt)|0,x=x+Math.imul(Bt,Qt)|0,l=l+Math.imul(Bt,te)|0,l=l+Math.imul(Wt,Qt)|0,h=h+Math.imul(Wt,te)|0,x=x+Math.imul(_t,ee)|0,l=l+Math.imul(_t,ne)|0,l=l+Math.imul(At,ee)|0,h=h+Math.imul(At,ne)|0,x=x+Math.imul(nt,re)|0,l=l+Math.imul(nt,ie)|0,l=l+Math.imul(st,re)|0,h=h+Math.imul(st,ie)|0,x=x+Math.imul(T,se)|0,l=l+Math.imul(T,oe)|0,l=l+Math.imul(K,se)|0,h=h+Math.imul(K,oe)|0;var ss=(P+x|0)+((l&8191)<<13)|0;P=(h+(l>>>13)|0)+(ss>>>26)|0,ss&=67108863,x=Math.imul(g,mt),l=Math.imul(g,pt),l=l+Math.imul(R,mt)|0,h=Math.imul(R,pt),x=x+Math.imul(Kt,gt)|0,l=l+Math.imul(Kt,Gt)|0,l=l+Math.imul(v,gt)|0,h=h+Math.imul(v,Gt)|0,x=x+Math.imul(Ct,Zt)|0,l=l+Math.imul(Ct,Yt)|0,l=l+Math.imul(zt,Zt)|0,h=h+Math.imul(zt,Yt)|0,x=x+Math.imul(Nt,Jt)|0,l=l+Math.imul(Nt,Xt)|0,l=l+Math.imul(Rt,Jt)|0,h=h+Math.imul(Rt,Xt)|0,x=x+Math.imul(Tt,Qt)|0,l=l+Math.imul(Tt,te)|0,l=l+Math.imul(qt,Qt)|0,h=h+Math.imul(qt,te)|0,x=x+Math.imul(Bt,ee)|0,l=l+Math.imul(Bt,ne)|0,l=l+Math.imul(Wt,ee)|0,h=h+Math.imul(Wt,ne)|0,x=x+Math.imul(_t,re)|0,l=l+Math.imul(_t,ie)|0,l=l+Math.imul(At,re)|0,h=h+Math.imul(At,ie)|0,x=x+Math.imul(nt,se)|0,l=l+Math.imul(nt,oe)|0,l=l+Math.imul(st,se)|0,h=h+Math.imul(st,oe)|0,x=x+Math.imul(T,ae)|0,l=l+Math.imul(T,ce)|0,l=l+Math.imul(K,ae)|0,h=h+Math.imul(K,ce)|0;var os=(P+x|0)+((l&8191)<<13)|0;P=(h+(l>>>13)|0)+(os>>>26)|0,os&=67108863,x=Math.imul(j,mt),l=Math.imul(j,pt),l=l+Math.imul(X,mt)|0,h=Math.imul(X,pt),x=x+Math.imul(g,gt)|0,l=l+Math.imul(g,Gt)|0,l=l+Math.imul(R,gt)|0,h=h+Math.imul(R,Gt)|0,x=x+Math.imul(Kt,Zt)|0,l=l+Math.imul(Kt,Yt)|0,l=l+Math.imul(v,Zt)|0,h=h+Math.imul(v,Yt)|0,x=x+Math.imul(Ct,Jt)|0,l=l+Math.imul(Ct,Xt)|0,l=l+Math.imul(zt,Jt)|0,h=h+Math.imul(zt,Xt)|0,x=x+Math.imul(Nt,Qt)|0,l=l+Math.imul(Nt,te)|0,l=l+Math.imul(Rt,Qt)|0,h=h+Math.imul(Rt,te)|0,x=x+Math.imul(Tt,ee)|0,l=l+Math.imul(Tt,ne)|0,l=l+Math.imul(qt,ee)|0,h=h+Math.imul(qt,ne)|0,x=x+Math.imul(Bt,re)|0,l=l+Math.imul(Bt,ie)|0,l=l+Math.imul(Wt,re)|0,h=h+Math.imul(Wt,ie)|0,x=x+Math.imul(_t,se)|0,l=l+Math.imul(_t,oe)|0,l=l+Math.imul(At,se)|0,h=h+Math.imul(At,oe)|0,x=x+Math.imul(nt,ae)|0,l=l+Math.imul(nt,ce)|0,l=l+Math.imul(st,ae)|0,h=h+Math.imul(st,ce)|0,x=x+Math.imul(T,ue)|0,l=l+Math.imul(T,le)|0,l=l+Math.imul(K,ue)|0,h=h+Math.imul(K,le)|0;var as=(P+x|0)+((l&8191)<<13)|0;P=(h+(l>>>13)|0)+(as>>>26)|0,as&=67108863,x=Math.imul(j,gt),l=Math.imul(j,Gt),l=l+Math.imul(X,gt)|0,h=Math.imul(X,Gt),x=x+Math.imul(g,Zt)|0,l=l+Math.imul(g,Yt)|0,l=l+Math.imul(R,Zt)|0,h=h+Math.imul(R,Yt)|0,x=x+Math.imul(Kt,Jt)|0,l=l+Math.imul(Kt,Xt)|0,l=l+Math.imul(v,Jt)|0,h=h+Math.imul(v,Xt)|0,x=x+Math.imul(Ct,Qt)|0,l=l+Math.imul(Ct,te)|0,l=l+Math.imul(zt,Qt)|0,h=h+Math.imul(zt,te)|0,x=x+Math.imul(Nt,ee)|0,l=l+Math.imul(Nt,ne)|0,l=l+Math.imul(Rt,ee)|0,h=h+Math.imul(Rt,ne)|0,x=x+Math.imul(Tt,re)|0,l=l+Math.imul(Tt,ie)|0,l=l+Math.imul(qt,re)|0,h=h+Math.imul(qt,ie)|0,x=x+Math.imul(Bt,se)|0,l=l+Math.imul(Bt,oe)|0,l=l+Math.imul(Wt,se)|0,h=h+Math.imul(Wt,oe)|0,x=x+Math.imul(_t,ae)|0,l=l+Math.imul(_t,ce)|0,l=l+Math.imul(At,ae)|0,h=h+Math.imul(At,ce)|0,x=x+Math.imul(nt,ue)|0,l=l+Math.imul(nt,le)|0,l=l+Math.imul(st,ue)|0,h=h+Math.imul(st,le)|0;var cs=(P+x|0)+((l&8191)<<13)|0;P=(h+(l>>>13)|0)+(cs>>>26)|0,cs&=67108863,x=Math.imul(j,Zt),l=Math.imul(j,Yt),l=l+Math.imul(X,Zt)|0,h=Math.imul(X,Yt),x=x+Math.imul(g,Jt)|0,l=l+Math.imul(g,Xt)|0,l=l+Math.imul(R,Jt)|0,h=h+Math.imul(R,Xt)|0,x=x+Math.imul(Kt,Qt)|0,l=l+Math.imul(Kt,te)|0,l=l+Math.imul(v,Qt)|0,h=h+Math.imul(v,te)|0,x=x+Math.imul(Ct,ee)|0,l=l+Math.imul(Ct,ne)|0,l=l+Math.imul(zt,ee)|0,h=h+Math.imul(zt,ne)|0,x=x+Math.imul(Nt,re)|0,l=l+Math.imul(Nt,ie)|0,l=l+Math.imul(Rt,re)|0,h=h+Math.imul(Rt,ie)|0,x=x+Math.imul(Tt,se)|0,l=l+Math.imul(Tt,oe)|0,l=l+Math.imul(qt,se)|0,h=h+Math.imul(qt,oe)|0,x=x+Math.imul(Bt,ae)|0,l=l+Math.imul(Bt,ce)|0,l=l+Math.imul(Wt,ae)|0,h=h+Math.imul(Wt,ce)|0,x=x+Math.imul(_t,ue)|0,l=l+Math.imul(_t,le)|0,l=l+Math.imul(At,ue)|0,h=h+Math.imul(At,le)|0;var us=(P+x|0)+((l&8191)<<13)|0;P=(h+(l>>>13)|0)+(us>>>26)|0,us&=67108863,x=Math.imul(j,Jt),l=Math.imul(j,Xt),l=l+Math.imul(X,Jt)|0,h=Math.imul(X,Xt),x=x+Math.imul(g,Qt)|0,l=l+Math.imul(g,te)|0,l=l+Math.imul(R,Qt)|0,h=h+Math.imul(R,te)|0,x=x+Math.imul(Kt,ee)|0,l=l+Math.imul(Kt,ne)|0,l=l+Math.imul(v,ee)|0,h=h+Math.imul(v,ne)|0,x=x+Math.imul(Ct,re)|0,l=l+Math.imul(Ct,ie)|0,l=l+Math.imul(zt,re)|0,h=h+Math.imul(zt,ie)|0,x=x+Math.imul(Nt,se)|0,l=l+Math.imul(Nt,oe)|0,l=l+Math.imul(Rt,se)|0,h=h+Math.imul(Rt,oe)|0,x=x+Math.imul(Tt,ae)|0,l=l+Math.imul(Tt,ce)|0,l=l+Math.imul(qt,ae)|0,h=h+Math.imul(qt,ce)|0,x=x+Math.imul(Bt,ue)|0,l=l+Math.imul(Bt,le)|0,l=l+Math.imul(Wt,ue)|0,h=h+Math.imul(Wt,le)|0;var ls=(P+x|0)+((l&8191)<<13)|0;P=(h+(l>>>13)|0)+(ls>>>26)|0,ls&=67108863,x=Math.imul(j,Qt),l=Math.imul(j,te),l=l+Math.imul(X,Qt)|0,h=Math.imul(X,te),x=x+Math.imul(g,ee)|0,l=l+Math.imul(g,ne)|0,l=l+Math.imul(R,ee)|0,h=h+Math.imul(R,ne)|0,x=x+Math.imul(Kt,re)|0,l=l+Math.imul(Kt,ie)|0,l=l+Math.imul(v,re)|0,h=h+Math.imul(v,ie)|0,x=x+Math.imul(Ct,se)|0,l=l+Math.imul(Ct,oe)|0,l=l+Math.imul(zt,se)|0,h=h+Math.imul(zt,oe)|0,x=x+Math.imul(Nt,ae)|0,l=l+Math.imul(Nt,ce)|0,l=l+Math.imul(Rt,ae)|0,h=h+Math.imul(Rt,ce)|0,x=x+Math.imul(Tt,ue)|0,l=l+Math.imul(Tt,le)|0,l=l+Math.imul(qt,ue)|0,h=h+Math.imul(qt,le)|0;var fs=(P+x|0)+((l&8191)<<13)|0;P=(h+(l>>>13)|0)+(fs>>>26)|0,fs&=67108863,x=Math.imul(j,ee),l=Math.imul(j,ne),l=l+Math.imul(X,ee)|0,h=Math.imul(X,ne),x=x+Math.imul(g,re)|0,l=l+Math.imul(g,ie)|0,l=l+Math.imul(R,re)|0,h=h+Math.imul(R,ie)|0,x=x+Math.imul(Kt,se)|0,l=l+Math.imul(Kt,oe)|0,l=l+Math.imul(v,se)|0,h=h+Math.imul(v,oe)|0,x=x+Math.imul(Ct,ae)|0,l=l+Math.imul(Ct,ce)|0,l=l+Math.imul(zt,ae)|0,h=h+Math.imul(zt,ce)|0,x=x+Math.imul(Nt,ue)|0,l=l+Math.imul(Nt,le)|0,l=l+Math.imul(Rt,ue)|0,h=h+Math.imul(Rt,le)|0;var hs=(P+x|0)+((l&8191)<<13)|0;P=(h+(l>>>13)|0)+(hs>>>26)|0,hs&=67108863,x=Math.imul(j,re),l=Math.imul(j,ie),l=l+Math.imul(X,re)|0,h=Math.imul(X,ie),x=x+Math.imul(g,se)|0,l=l+Math.imul(g,oe)|0,l=l+Math.imul(R,se)|0,h=h+Math.imul(R,oe)|0,x=x+Math.imul(Kt,ae)|0,l=l+Math.imul(Kt,ce)|0,l=l+Math.imul(v,ae)|0,h=h+Math.imul(v,ce)|0,x=x+Math.imul(Ct,ue)|0,l=l+Math.imul(Ct,le)|0,l=l+Math.imul(zt,ue)|0,h=h+Math.imul(zt,le)|0;var ds=(P+x|0)+((l&8191)<<13)|0;P=(h+(l>>>13)|0)+(ds>>>26)|0,ds&=67108863,x=Math.imul(j,se),l=Math.imul(j,oe),l=l+Math.imul(X,se)|0,h=Math.imul(X,oe),x=x+Math.imul(g,ae)|0,l=l+Math.imul(g,ce)|0,l=l+Math.imul(R,ae)|0,h=h+Math.imul(R,ce)|0,x=x+Math.imul(Kt,ue)|0,l=l+Math.imul(Kt,le)|0,l=l+Math.imul(v,ue)|0,h=h+Math.imul(v,le)|0;var gs=(P+x|0)+((l&8191)<<13)|0;P=(h+(l>>>13)|0)+(gs>>>26)|0,gs&=67108863,x=Math.imul(j,ae),l=Math.imul(j,ce),l=l+Math.imul(X,ae)|0,h=Math.imul(X,ce),x=x+Math.imul(g,ue)|0,l=l+Math.imul(g,le)|0,l=l+Math.imul(R,ue)|0,h=h+Math.imul(R,le)|0;var ps=(P+x|0)+((l&8191)<<13)|0;P=(h+(l>>>13)|0)+(ps>>>26)|0,ps&=67108863,x=Math.imul(j,ue),l=Math.imul(j,le),l=l+Math.imul(X,ue)|0,h=Math.imul(X,le);var ms=(P+x|0)+((l&8191)<<13)|0;return P=(h+(l>>>13)|0)+(ms>>>26)|0,ms&=67108863,L[0]=Xi,L[1]=Qi,L[2]=ts,L[3]=es,L[4]=ns,L[5]=rs,L[6]=is,L[7]=ss,L[8]=os,L[9]=as,L[10]=cs,L[11]=us,L[12]=ls,L[13]=fs,L[14]=hs,L[15]=ds,L[16]=gs,L[17]=ps,L[18]=ms,P!==0&&(L[19]=P,w.length++),w};Math.imul||(D=O);function N(m,a,f){f.negative=a.negative^m.negative,f.length=m.length+a.length;for(var w=0,S=0,I=0;I<f.length-1;I++){var L=S;S=0;for(var P=w&67108863,x=Math.min(I,a.length-1),l=Math.max(0,I-m.length+1);l<=x;l++){var h=I-l,E=m.words[h]|0,T=a.words[l]|0,K=E*T,J=K&67108863;L=L+(K/67108864|0)|0,J=J+P|0,P=J&67108863,L=L+(J>>>26)|0,S+=L>>>26,L&=67108863}f.words[I]=P,w=L,L=S}return w!==0?f.words[I]=w:f.length--,f._strip()}function V(m,a,f){return N(m,a,f)}i.prototype.mulTo=function(a,f){var w,S=this.length+a.length;return this.length===10&&a.length===10?w=D(this,a,f):S<63?w=O(this,a,f):S<1024?w=N(this,a,f):w=V(this,a,f),w},i.prototype.mul=function(a){var f=new i(null);return f.words=new Array(this.length+a.length),this.mulTo(a,f)},i.prototype.mulf=function(a){var f=new i(null);return f.words=new Array(this.length+a.length),V(this,a,f)},i.prototype.imul=function(a){return this.clone().mulTo(a,this)},i.prototype.imuln=function(a){var f=a<0;f&&(a=-a),n(typeof a=="number"),n(a<67108864);for(var w=0,S=0;S<this.length;S++){var I=(this.words[S]|0)*a,L=(I&67108863)+(w&67108863);w>>=26,w+=I/67108864|0,w+=L>>>26,this.words[S]=L&67108863}return w!==0&&(this.words[S]=w,this.length++),this.length=a===0?1:this.length,f?this.ineg():this},i.prototype.muln=function(a){return this.clone().imuln(a)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(a){var f=C(a);if(f.length===0)return new i(1);for(var w=this,S=0;S<f.length&&f[S]===0;S++,w=w.sqr());if(++S<f.length)for(var I=w.sqr();S<f.length;S++,I=I.sqr())f[S]!==0&&(w=w.mul(I));return w},i.prototype.iushln=function(a){n(typeof a=="number"&&a>=0);var f=a%26,w=(a-f)/26,S=67108863>>>26-f<<26-f,I;if(f!==0){var L=0;for(I=0;I<this.length;I++){var P=this.words[I]&S,x=(this.words[I]|0)-P<<f;this.words[I]=x|L,L=P>>>26-f}L&&(this.words[I]=L,this.length++)}if(w!==0){for(I=this.length-1;I>=0;I--)this.words[I+w]=this.words[I];for(I=0;I<w;I++)this.words[I]=0;this.length+=w}return this._strip()},i.prototype.ishln=function(a){return n(this.negative===0),this.iushln(a)},i.prototype.iushrn=function(a,f,w){n(typeof a=="number"&&a>=0);var S;f?S=(f-f%26)/26:S=0;var I=a%26,L=Math.min((a-I)/26,this.length),P=67108863^67108863>>>I<<I,x=w;if(S-=L,S=Math.max(0,S),x){for(var l=0;l<L;l++)x.words[l]=this.words[l];x.length=L}if(L!==0)if(this.length>L)for(this.length-=L,l=0;l<this.length;l++)this.words[l]=this.words[l+L];else this.words[0]=0,this.length=1;var h=0;for(l=this.length-1;l>=0&&(h!==0||l>=S);l--){var E=this.words[l]|0;this.words[l]=h<<26-I|E>>>I,h=E&P}return x&&h!==0&&(x.words[x.length++]=h),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(a,f,w){return n(this.negative===0),this.iushrn(a,f,w)},i.prototype.shln=function(a){return this.clone().ishln(a)},i.prototype.ushln=function(a){return this.clone().iushln(a)},i.prototype.shrn=function(a){return this.clone().ishrn(a)},i.prototype.ushrn=function(a){return this.clone().iushrn(a)},i.prototype.testn=function(a){n(typeof a=="number"&&a>=0);var f=a%26,w=(a-f)/26,S=1<<f;if(this.length<=w)return!1;var I=this.words[w];return!!(I&S)},i.prototype.imaskn=function(a){n(typeof a=="number"&&a>=0);var f=a%26,w=(a-f)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=w)return this;if(f!==0&&w++,this.length=Math.min(w,this.length),f!==0){var S=67108863^67108863>>>f<<f;this.words[this.length-1]&=S}return this._strip()},i.prototype.maskn=function(a){return this.clone().imaskn(a)},i.prototype.iaddn=function(a){return n(typeof a=="number"),n(a<67108864),a<0?this.isubn(-a):this.negative!==0?this.length===1&&(this.words[0]|0)<=a?(this.words[0]=a-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(a),this.negative=1,this):this._iaddn(a)},i.prototype._iaddn=function(a){this.words[0]+=a;for(var f=0;f<this.length&&this.words[f]>=67108864;f++)this.words[f]-=67108864,f===this.length-1?this.words[f+1]=1:this.words[f+1]++;return this.length=Math.max(this.length,f+1),this},i.prototype.isubn=function(a){if(n(typeof a=="number"),n(a<67108864),a<0)return this.iaddn(-a);if(this.negative!==0)return this.negative=0,this.iaddn(a),this.negative=1,this;if(this.words[0]-=a,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var f=0;f<this.length&&this.words[f]<0;f++)this.words[f]+=67108864,this.words[f+1]-=1;return this._strip()},i.prototype.addn=function(a){return this.clone().iaddn(a)},i.prototype.subn=function(a){return this.clone().isubn(a)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(a,f,w){var S=a.length+w,I;this._expand(S);var L,P=0;for(I=0;I<a.length;I++){L=(this.words[I+w]|0)+P;var x=(a.words[I]|0)*f;L-=x&67108863,P=(L>>26)-(x/67108864|0),this.words[I+w]=L&67108863}for(;I<this.length-w;I++)L=(this.words[I+w]|0)+P,P=L>>26,this.words[I+w]=L&67108863;if(P===0)return this._strip();for(n(P===-1),P=0,I=0;I<this.length;I++)L=-(this.words[I]|0)+P,P=L>>26,this.words[I]=L&67108863;return this.negative=1,this._strip()},i.prototype._wordDiv=function(a,f){var w=this.length-a.length,S=this.clone(),I=a,L=I.words[I.length-1]|0,P=this._countBits(L);w=26-P,w!==0&&(I=I.ushln(w),S.iushln(w),L=I.words[I.length-1]|0);var x=S.length-I.length,l;if(f!=="mod"){l=new i(null),l.length=x+1,l.words=new Array(l.length);for(var h=0;h<l.length;h++)l.words[h]=0}var E=S.clone()._ishlnsubmul(I,1,x);E.negative===0&&(S=E,l&&(l.words[x]=1));for(var T=x-1;T>=0;T--){var K=(S.words[I.length+T]|0)*67108864+(S.words[I.length+T-1]|0);for(K=Math.min(K/L|0,67108863),S._ishlnsubmul(I,K,T);S.negative!==0;)K--,S.negative=0,S._ishlnsubmul(I,1,T),S.isZero()||(S.negative^=1);l&&(l.words[T]=K)}return l&&l._strip(),S._strip(),f!=="div"&&w!==0&&S.iushrn(w),{div:l||null,mod:S}},i.prototype.divmod=function(a,f,w){if(n(!a.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var S,I,L;return this.negative!==0&&a.negative===0?(L=this.neg().divmod(a,f),f!=="mod"&&(S=L.div.neg()),f!=="div"&&(I=L.mod.neg(),w&&I.negative!==0&&I.iadd(a)),{div:S,mod:I}):this.negative===0&&a.negative!==0?(L=this.divmod(a.neg(),f),f!=="mod"&&(S=L.div.neg()),{div:S,mod:L.mod}):(this.negative&a.negative)!==0?(L=this.neg().divmod(a.neg(),f),f!=="div"&&(I=L.mod.neg(),w&&I.negative!==0&&I.isub(a)),{div:L.div,mod:I}):a.length>this.length||this.cmp(a)<0?{div:new i(0),mod:this}:a.length===1?f==="div"?{div:this.divn(a.words[0]),mod:null}:f==="mod"?{div:null,mod:new i(this.modrn(a.words[0]))}:{div:this.divn(a.words[0]),mod:new i(this.modrn(a.words[0]))}:this._wordDiv(a,f)},i.prototype.div=function(a){return this.divmod(a,"div",!1).div},i.prototype.mod=function(a){return this.divmod(a,"mod",!1).mod},i.prototype.umod=function(a){return this.divmod(a,"mod",!0).mod},i.prototype.divRound=function(a){var f=this.divmod(a);if(f.mod.isZero())return f.div;var w=f.div.negative!==0?f.mod.isub(a):f.mod,S=a.ushrn(1),I=a.andln(1),L=w.cmp(S);return L<0||I===1&&L===0?f.div:f.div.negative!==0?f.div.isubn(1):f.div.iaddn(1)},i.prototype.modrn=function(a){var f=a<0;f&&(a=-a),n(a<=67108863);for(var w=(1<<26)%a,S=0,I=this.length-1;I>=0;I--)S=(w*S+(this.words[I]|0))%a;return f?-S:S},i.prototype.modn=function(a){return this.modrn(a)},i.prototype.idivn=function(a){var f=a<0;f&&(a=-a),n(a<=67108863);for(var w=0,S=this.length-1;S>=0;S--){var I=(this.words[S]|0)+w*67108864;this.words[S]=I/a|0,w=I%a}return this._strip(),f?this.ineg():this},i.prototype.divn=function(a){return this.clone().idivn(a)},i.prototype.egcd=function(a){n(a.negative===0),n(!a.isZero());var f=this,w=a.clone();f.negative!==0?f=f.umod(a):f=f.clone();for(var S=new i(1),I=new i(0),L=new i(0),P=new i(1),x=0;f.isEven()&&w.isEven();)f.iushrn(1),w.iushrn(1),++x;for(var l=w.clone(),h=f.clone();!f.isZero();){for(var E=0,T=1;(f.words[0]&T)===0&&E<26;++E,T<<=1);if(E>0)for(f.iushrn(E);E-- >0;)(S.isOdd()||I.isOdd())&&(S.iadd(l),I.isub(h)),S.iushrn(1),I.iushrn(1);for(var K=0,J=1;(w.words[0]&J)===0&&K<26;++K,J<<=1);if(K>0)for(w.iushrn(K);K-- >0;)(L.isOdd()||P.isOdd())&&(L.iadd(l),P.isub(h)),L.iushrn(1),P.iushrn(1);f.cmp(w)>=0?(f.isub(w),S.isub(L),I.isub(P)):(w.isub(f),L.isub(S),P.isub(I))}return{a:L,b:P,gcd:w.iushln(x)}},i.prototype._invmp=function(a){n(a.negative===0),n(!a.isZero());var f=this,w=a.clone();f.negative!==0?f=f.umod(a):f=f.clone();for(var S=new i(1),I=new i(0),L=w.clone();f.cmpn(1)>0&&w.cmpn(1)>0;){for(var P=0,x=1;(f.words[0]&x)===0&&P<26;++P,x<<=1);if(P>0)for(f.iushrn(P);P-- >0;)S.isOdd()&&S.iadd(L),S.iushrn(1);for(var l=0,h=1;(w.words[0]&h)===0&&l<26;++l,h<<=1);if(l>0)for(w.iushrn(l);l-- >0;)I.isOdd()&&I.iadd(L),I.iushrn(1);f.cmp(w)>=0?(f.isub(w),S.isub(I)):(w.isub(f),I.isub(S))}var E;return f.cmpn(1)===0?E=S:E=I,E.cmpn(0)<0&&E.iadd(a),E},i.prototype.gcd=function(a){if(this.isZero())return a.abs();if(a.isZero())return this.abs();var f=this.clone(),w=a.clone();f.negative=0,w.negative=0;for(var S=0;f.isEven()&&w.isEven();S++)f.iushrn(1),w.iushrn(1);do{for(;f.isEven();)f.iushrn(1);for(;w.isEven();)w.iushrn(1);var I=f.cmp(w);if(I<0){var L=f;f=w,w=L}else if(I===0||w.cmpn(1)===0)break;f.isub(w)}while(!0);return w.iushln(S)},i.prototype.invm=function(a){return this.egcd(a).a.umod(a)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(a){return this.words[0]&a},i.prototype.bincn=function(a){n(typeof a=="number");var f=a%26,w=(a-f)/26,S=1<<f;if(this.length<=w)return this._expand(w+1),this.words[w]|=S,this;for(var I=S,L=w;I!==0&&L<this.length;L++){var P=this.words[L]|0;P+=I,I=P>>>26,P&=67108863,this.words[L]=P}return I!==0&&(this.words[L]=I,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(a){var f=a<0;if(this.negative!==0&&!f)return-1;if(this.negative===0&&f)return 1;this._strip();var w;if(this.length>1)w=1;else{f&&(a=-a),n(a<=67108863,"Number is too big");var S=this.words[0]|0;w=S===a?0:S<a?-1:1}return this.negative!==0?-w|0:w},i.prototype.cmp=function(a){if(this.negative!==0&&a.negative===0)return-1;if(this.negative===0&&a.negative!==0)return 1;var f=this.ucmp(a);return this.negative!==0?-f|0:f},i.prototype.ucmp=function(a){if(this.length>a.length)return 1;if(this.length<a.length)return-1;for(var f=0,w=this.length-1;w>=0;w--){var S=this.words[w]|0,I=a.words[w]|0;if(S!==I){S<I?f=-1:S>I&&(f=1);break}}return f},i.prototype.gtn=function(a){return this.cmpn(a)===1},i.prototype.gt=function(a){return this.cmp(a)===1},i.prototype.gten=function(a){return this.cmpn(a)>=0},i.prototype.gte=function(a){return this.cmp(a)>=0},i.prototype.ltn=function(a){return this.cmpn(a)===-1},i.prototype.lt=function(a){return this.cmp(a)===-1},i.prototype.lten=function(a){return this.cmpn(a)<=0},i.prototype.lte=function(a){return this.cmp(a)<=0},i.prototype.eqn=function(a){return this.cmpn(a)===0},i.prototype.eq=function(a){return this.cmp(a)===0},i.red=function(a){return new W(a)},i.prototype.toRed=function(a){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),a.convertTo(this)._forceRed(a)},i.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(a){return this.red=a,this},i.prototype.forceRed=function(a){return n(!this.red,"Already a number in reduction context"),this._forceRed(a)},i.prototype.redAdd=function(a){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,a)},i.prototype.redIAdd=function(a){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,a)},i.prototype.redSub=function(a){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,a)},i.prototype.redISub=function(a){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,a)},i.prototype.redShl=function(a){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,a)},i.prototype.redMul=function(a){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.mul(this,a)},i.prototype.redIMul=function(a){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.imul(this,a)},i.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(a){return n(this.red&&!a.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,a)};var Z={k256:null,p224:null,p192:null,p25519:null};function $(m,a){this.name=m,this.p=new i(a,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}$.prototype._tmp=function(){var a=new i(null);return a.words=new Array(Math.ceil(this.n/13)),a},$.prototype.ireduce=function(a){var f=a,w;do this.split(f,this.tmp),f=this.imulK(f),f=f.iadd(this.tmp),w=f.bitLength();while(w>this.n);var S=w<this.n?-1:f.ucmp(this.p);return S===0?(f.words[0]=0,f.length=1):S>0?f.isub(this.p):f.strip!==void 0?f.strip():f._strip(),f},$.prototype.split=function(a,f){a.iushrn(this.n,0,f)},$.prototype.imulK=function(a){return a.imul(this.k)};function Q(){$.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(Q,$),Q.prototype.split=function(a,f){for(var w=4194303,S=Math.min(a.length,9),I=0;I<S;I++)f.words[I]=a.words[I];if(f.length=S,a.length<=9){a.words[0]=0,a.length=1;return}var L=a.words[9];for(f.words[f.length++]=L&w,I=10;I<a.length;I++){var P=a.words[I]|0;a.words[I-10]=(P&w)<<4|L>>>22,L=P}L>>>=22,a.words[I-10]=L,L===0&&a.length>10?a.length-=10:a.length-=9},Q.prototype.imulK=function(a){a.words[a.length]=0,a.words[a.length+1]=0,a.length+=2;for(var f=0,w=0;w<a.length;w++){var S=a.words[w]|0;f+=S*977,a.words[w]=f&67108863,f=S*64+(f/67108864|0)}return a.words[a.length-1]===0&&(a.length--,a.words[a.length-1]===0&&a.length--),a};function Y(){$.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(Y,$);function k(){$.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(k,$);function U(){$.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s(U,$),U.prototype.imulK=function(a){for(var f=0,w=0;w<a.length;w++){var S=(a.words[w]|0)*19+f,I=S&67108863;S>>>=26,a.words[w]=I,f=S}return f!==0&&(a.words[a.length++]=f),a},i._prime=function(a){if(Z[a])return Z[a];var f;if(a==="k256")f=new Q;else if(a==="p224")f=new Y;else if(a==="p192")f=new k;else if(a==="p25519")f=new U;else throw new Error("Unknown prime "+a);return Z[a]=f,f};function W(m){if(typeof m=="string"){var a=i._prime(m);this.m=a.p,this.prime=a}else n(m.gtn(1),"modulus must be greater than 1"),this.m=m,this.prime=null}W.prototype._verify1=function(a){n(a.negative===0,"red works only with positives"),n(a.red,"red works only with red numbers")},W.prototype._verify2=function(a,f){n((a.negative|f.negative)===0,"red works only with positives"),n(a.red&&a.red===f.red,"red works only with red numbers")},W.prototype.imod=function(a){return this.prime?this.prime.ireduce(a)._forceRed(this):(y(a,a.umod(this.m)._forceRed(this)),a)},W.prototype.neg=function(a){return a.isZero()?a.clone():this.m.sub(a)._forceRed(this)},W.prototype.add=function(a,f){this._verify2(a,f);var w=a.add(f);return w.cmp(this.m)>=0&&w.isub(this.m),w._forceRed(this)},W.prototype.iadd=function(a,f){this._verify2(a,f);var w=a.iadd(f);return w.cmp(this.m)>=0&&w.isub(this.m),w},W.prototype.sub=function(a,f){this._verify2(a,f);var w=a.sub(f);return w.cmpn(0)<0&&w.iadd(this.m),w._forceRed(this)},W.prototype.isub=function(a,f){this._verify2(a,f);var w=a.isub(f);return w.cmpn(0)<0&&w.iadd(this.m),w},W.prototype.shl=function(a,f){return this._verify1(a),this.imod(a.ushln(f))},W.prototype.imul=function(a,f){return this._verify2(a,f),this.imod(a.imul(f))},W.prototype.mul=function(a,f){return this._verify2(a,f),this.imod(a.mul(f))},W.prototype.isqr=function(a){return this.imul(a,a.clone())},W.prototype.sqr=function(a){return this.mul(a,a)},W.prototype.sqrt=function(a){if(a.isZero())return a.clone();var f=this.m.andln(3);if(n(f%2===1),f===3){var w=this.m.add(new i(1)).iushrn(2);return this.pow(a,w)}for(var S=this.m.subn(1),I=0;!S.isZero()&&S.andln(1)===0;)I++,S.iushrn(1);n(!S.isZero());var L=new i(1).toRed(this),P=L.redNeg(),x=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new i(2*l*l).toRed(this);this.pow(l,x).cmp(P)!==0;)l.redIAdd(P);for(var h=this.pow(l,S),E=this.pow(a,S.addn(1).iushrn(1)),T=this.pow(a,S),K=I;T.cmp(L)!==0;){for(var J=T,nt=0;J.cmp(L)!==0;nt++)J=J.redSqr();n(nt<K);var st=this.pow(h,new i(1).iushln(K-nt-1));E=E.redMul(st),h=st.redSqr(),T=T.redMul(h),K=nt}return E},W.prototype.invm=function(a){var f=a._invmp(this.m);return f.negative!==0?(f.negative=0,this.imod(f).redNeg()):this.imod(f)},W.prototype.pow=function(a,f){if(f.isZero())return new i(1).toRed(this);if(f.cmpn(1)===0)return a.clone();var w=4,S=new Array(1<<w);S[0]=new i(1).toRed(this),S[1]=a;for(var I=2;I<S.length;I++)S[I]=this.mul(S[I-1],a);var L=S[0],P=0,x=0,l=f.bitLength()%26;for(l===0&&(l=26),I=f.length-1;I>=0;I--){for(var h=f.words[I],E=l-1;E>=0;E--){var T=h>>E&1;if(L!==S[0]&&(L=this.sqr(L)),T===0&&P===0){x=0;continue}P<<=1,P|=T,x++,!(x!==w&&(I!==0||E!==0))&&(L=this.mul(L,S[P]),x=0,P=0)}l=26}return L},W.prototype.convertTo=function(a){var f=a.umod(this.m);return f===a?f.clone():f},W.prototype.convertFrom=function(a){var f=a.clone();return f.red=null,f},i.mont=function(a){return new q(a)};function q(m){W.call(this,m),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s(q,W),q.prototype.convertTo=function(a){return this.imod(a.ushln(this.shift))},q.prototype.convertFrom=function(a){var f=this.imod(a.mul(this.rinv));return f.red=null,f},q.prototype.imul=function(a,f){if(a.isZero()||f.isZero())return a.words[0]=0,a.length=1,a;var w=a.imul(f),S=w.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),I=w.isub(S).iushrn(this.shift),L=I;return I.cmp(this.m)>=0?L=I.isub(this.m):I.cmpn(0)<0&&(L=I.iadd(this.m)),L._forceRed(this)},q.prototype.mul=function(a,f){if(a.isZero()||f.isZero())return new i(0)._forceRed(this);var w=a.mul(f),S=w.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),I=w.isub(S).iushrn(this.shift),L=I;return I.cmp(this.m)>=0?L=I.isub(this.m):I.cmpn(0)<0&&(L=I.iadd(this.m)),L._forceRed(this)},q.prototype.invm=function(a){var f=this.imod(a._invmp(this.m).mul(this.r2));return f._forceRed(this)}})(r,zf)})(oi)),oi.exports}var Kf=Pu();const $a=Dr(Kf);var ti={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var ja;function Du(){return ja||(ja=1,(function(r,t){var e=Xo(),n=e.Buffer;function s(o,c){for(var u in o)c[u]=o[u]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?r.exports=e:(s(e,t),t.Buffer=i);function i(o,c,u){return n(o,c,u)}i.prototype=Object.create(n.prototype),s(n,i),i.from=function(o,c,u){if(typeof o=="number")throw new TypeError("Argument must not be a number");return n(o,c,u)},i.alloc=function(o,c,u){if(typeof o!="number")throw new TypeError("Argument must be a number");var p=n(o);return c!==void 0?typeof u=="string"?p.fill(c,u):p.fill(c):p.fill(0),p},i.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n(o)},i.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return e.SlowBuffer(o)}})(ti,ti.exports)),ti.exports}var xs,Ha;function $f(){if(Ha)return xs;Ha=1;var r=Du().Buffer;function t(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),s=0;s<n.length;s++)n[s]=255;for(var i=0;i<e.length;i++){var o=e.charAt(i),c=o.charCodeAt(0);if(n[c]!==255)throw new TypeError(o+" is ambiguous");n[c]=i}var u=e.length,p=e.charAt(0),y=Math.log(u)/Math.log(256),_=Math.log(256)/Math.log(u);function A(M){if((Array.isArray(M)||M instanceof Uint8Array)&&(M=r.from(M)),!r.isBuffer(M))throw new TypeError("Expected Buffer");if(M.length===0)return"";for(var C=0,O=0,D=0,N=M.length;D!==N&&M[D]===0;)D++,C++;for(var V=(N-D)*_+1>>>0,Z=new Uint8Array(V);D!==N;){for(var $=M[D],Q=0,Y=V-1;($!==0||Q<O)&&Y!==-1;Y--,Q++)$+=256*Z[Y]>>>0,Z[Y]=$%u>>>0,$=$/u>>>0;if($!==0)throw new Error("Non-zero carry");O=Q,D++}for(var k=V-O;k!==V&&Z[k]===0;)k++;for(var U=p.repeat(C);k<V;++k)U+=e.charAt(Z[k]);return U}function b(M){if(typeof M!="string")throw new TypeError("Expected String");if(M.length===0)return r.alloc(0);for(var C=0,O=0,D=0;M[C]===p;)O++,C++;for(var N=(M.length-C)*y+1>>>0,V=new Uint8Array(N);C<M.length;){var Z=M.charCodeAt(C);if(Z>255)return;var $=n[Z];if($===255)return;for(var Q=0,Y=N-1;($!==0||Q<D)&&Y!==-1;Y--,Q++)$+=u*V[Y]>>>0,V[Y]=$%256>>>0,$=$/256>>>0;if($!==0)throw new Error("Non-zero carry");D=Q,C++}for(var k=N-D;k!==N&&V[k]===0;)k++;var U=r.allocUnsafe(O+(N-k));U.fill(0,0,O);for(var W=O;k!==N;)U[W++]=V[k++];return U}function B(M){var C=b(M);if(C)return C;throw new Error("Non-base"+u+" character")}return{encode:A,decodeUnsafe:b,decode:B}}return xs=t,xs}var As,Va;function jf(){if(Va)return As;Va=1;var r=$f(),t="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";return As=r(t),As}var Hf=jf();const ve=Dr(Hf),Ga=wu;var xt={},Bs,Za;function Vf(){if(Za)return Bs;Za=1;var r=Du().Buffer;function t(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),s=0;s<n.length;s++)n[s]=255;for(var i=0;i<e.length;i++){var o=e.charAt(i),c=o.charCodeAt(0);if(n[c]!==255)throw new TypeError(o+" is ambiguous");n[c]=i}var u=e.length,p=e.charAt(0),y=Math.log(u)/Math.log(256),_=Math.log(256)/Math.log(u);function A(M){if((Array.isArray(M)||M instanceof Uint8Array)&&(M=r.from(M)),!r.isBuffer(M))throw new TypeError("Expected Buffer");if(M.length===0)return"";for(var C=0,O=0,D=0,N=M.length;D!==N&&M[D]===0;)D++,C++;for(var V=(N-D)*_+1>>>0,Z=new Uint8Array(V);D!==N;){for(var $=M[D],Q=0,Y=V-1;($!==0||Q<O)&&Y!==-1;Y--,Q++)$+=256*Z[Y]>>>0,Z[Y]=$%u>>>0,$=$/u>>>0;if($!==0)throw new Error("Non-zero carry");O=Q,D++}for(var k=V-O;k!==V&&Z[k]===0;)k++;for(var U=p.repeat(C);k<V;++k)U+=e.charAt(Z[k]);return U}function b(M){if(typeof M!="string")throw new TypeError("Expected String");if(M.length===0)return r.alloc(0);for(var C=0,O=0,D=0;M[C]===p;)O++,C++;for(var N=(M.length-C)*y+1>>>0,V=new Uint8Array(N);C<M.length;){var Z=M.charCodeAt(C);if(Z>255)return;var $=n[Z];if($===255)return;for(var Q=0,Y=N-1;($!==0||Q<D)&&Y!==-1;Y--,Q++)$+=u*V[Y]>>>0,V[Y]=$%256>>>0,$=$/256>>>0;if($!==0)throw new Error("Non-zero carry");D=Q,C++}for(var k=N-D;k!==N&&V[k]===0;)k++;var U=r.allocUnsafe(O+(N-k));U.fill(0,0,O);for(var W=O;k!==N;)U[W++]=V[k++];return U}function B(M){var C=b(M);if(C)return C;throw new Error("Non-base"+u+" character")}return{encode:A,decodeUnsafe:b,decode:B}}return Bs=t,Bs}var Ms,Ya;function Gf(){if(Ya)return Ms;Ya=1;var r=Vf(),t="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";return Ms=r(t),Ms}function nn(r,t,e){return t<=r&&r<=e}function Ki(r){if(r===void 0)return{};if(r===Object(r))return r;throw TypeError("Could not convert argument to dictionary")}function Zf(r){for(var t=String(r),e=t.length,n=0,s=[];n<e;){var i=t.charCodeAt(n);if(i<55296||i>57343)s.push(i);else if(56320<=i&&i<=57343)s.push(65533);else if(55296<=i&&i<=56319)if(n===e-1)s.push(65533);else{var o=r.charCodeAt(n+1);if(56320<=o&&o<=57343){var c=i&1023,u=o&1023;s.push(65536+(c<<10)+u),n+=1}else s.push(65533)}n+=1}return s}function Yf(r){for(var t="",e=0;e<r.length;++e){var n=r[e];n<=65535?t+=String.fromCharCode(n):(n-=65536,t+=String.fromCharCode((n>>10)+55296,(n&1023)+56320))}return t}var Ii=-1;function sa(r){this.tokens=[].slice.call(r)}sa.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():Ii},prepend:function(r){if(Array.isArray(r))for(var t=r;t.length;)this.tokens.unshift(t.pop());else this.tokens.unshift(r)},push:function(r){if(Array.isArray(r))for(var t=r;t.length;)this.tokens.push(t.shift());else this.tokens.push(r)}};var pr=-1;function Is(r,t){if(r)throw TypeError("Decoder error");return t||65533}var Ri="utf-8";function ki(r,t){if(!(this instanceof ki))return new ki(r,t);if(r=r!==void 0?String(r).toLowerCase():Ri,r!==Ri)throw new Error("Encoding not supported. Only utf-8 is supported");t=Ki(t),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!t.fatal,this._ignoreBOM=!!t.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}ki.prototype={decode:function(t,e){var n;typeof t=="object"&&t instanceof ArrayBuffer?n=new Uint8Array(t):typeof t=="object"&&"buffer"in t&&t.buffer instanceof ArrayBuffer?n=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):n=new Uint8Array(0),e=Ki(e),this._streaming||(this._decoder=new Jf({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!e.stream;for(var s=new sa(n),i=[],o;!s.endOfStream()&&(o=this._decoder.handler(s,s.read()),o!==pr);)o!==null&&(Array.isArray(o)?i.push.apply(i,o):i.push(o));if(!this._streaming){do{if(o=this._decoder.handler(s,s.read()),o===pr)break;o!==null&&(Array.isArray(o)?i.push.apply(i,o):i.push(o))}while(!s.endOfStream());this._decoder=null}return i.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(i[0]===65279?(this._BOMseen=!0,i.shift()):this._BOMseen=!0),Yf(i)}};function Ti(r,t){if(!(this instanceof Ti))return new Ti(r,t);if(r=r!==void 0?String(r).toLowerCase():Ri,r!==Ri)throw new Error("Encoding not supported. Only utf-8 is supported");t=Ki(t),this._streaming=!1,this._encoder=null,this._options={fatal:!!t.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}Ti.prototype={encode:function(t,e){t=t?String(t):"",e=Ki(e),this._streaming||(this._encoder=new Xf(this._options)),this._streaming=!!e.stream;for(var n=[],s=new sa(Zf(t)),i;!s.endOfStream()&&(i=this._encoder.handler(s,s.read()),i!==pr);)Array.isArray(i)?n.push.apply(n,i):n.push(i);if(!this._streaming){for(;i=this._encoder.handler(s,s.read()),i!==pr;)Array.isArray(i)?n.push.apply(n,i):n.push(i);this._encoder=null}return new Uint8Array(n)}};function Jf(r){var t=r.fatal,e=0,n=0,s=0,i=128,o=191;this.handler=function(c,u){if(u===Ii&&s!==0)return s=0,Is(t);if(u===Ii)return pr;if(s===0){if(nn(u,0,127))return u;if(nn(u,194,223))s=1,e=u-192;else if(nn(u,224,239))u===224&&(i=160),u===237&&(o=159),s=2,e=u-224;else if(nn(u,240,244))u===240&&(i=144),u===244&&(o=143),s=3,e=u-240;else return Is(t);return e=e<<6*s,null}if(!nn(u,i,o))return e=s=n=0,i=128,o=191,c.prepend(u),Is(t);if(i=128,o=191,n+=1,e+=u-128<<6*(s-n),n!==s)return null;var p=e;return e=s=n=0,p}}function Xf(r){r.fatal,this.handler=function(t,e){if(e===Ii)return pr;if(nn(e,0,127))return e;var n,s;nn(e,128,2047)?(n=1,s=192):nn(e,2048,65535)?(n=2,s=224):nn(e,65536,1114111)&&(n=3,s=240);for(var i=[(e>>6*n)+s];n>0;){var o=e>>6*(n-1);i.push(128|o&63),n-=1}return i}}const Qf=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:ki,TextEncoder:Ti},Symbol.toStringTag,{value:"Module"})),th=Jo(Qf);var Ja;function eh(){if(Ja)return xt;Ja=1;var r=xt&&xt.__createBinding||(Object.create?(function(k,U,W,q){q===void 0&&(q=W),Object.defineProperty(k,q,{enumerable:!0,get:function(){return U[W]}})}):(function(k,U,W,q){q===void 0&&(q=W),k[q]=U[W]})),t=xt&&xt.__setModuleDefault||(Object.create?(function(k,U){Object.defineProperty(k,"default",{enumerable:!0,value:U})}):function(k,U){k.default=U}),e=xt&&xt.__decorate||function(k,U,W,q){var m=arguments.length,a=m<3?U:q===null?q=Object.getOwnPropertyDescriptor(U,W):q,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(k,U,W,q);else for(var w=k.length-1;w>=0;w--)(f=k[w])&&(a=(m<3?f(a):m>3?f(U,W,a):f(U,W))||a);return m>3&&a&&Object.defineProperty(U,W,a),a},n=xt&&xt.__importStar||function(k){if(k&&k.__esModule)return k;var U={};if(k!=null)for(var W in k)W!=="default"&&Object.hasOwnProperty.call(k,W)&&r(U,k,W);return t(U,k),U},s=xt&&xt.__importDefault||function(k){return k&&k.__esModule?k:{default:k}};Object.defineProperty(xt,"__esModule",{value:!0}),xt.deserializeUnchecked=xt.deserialize=xt.serialize=xt.BinaryReader=xt.BinaryWriter=xt.BorshError=xt.baseDecode=xt.baseEncode=void 0;const i=s(Pu()),o=s(Gf()),c=n(th),u=typeof TextDecoder!="function"?c.TextDecoder:TextDecoder,p=new u("utf-8",{fatal:!0});function y(k){return typeof k=="string"&&(k=Buffer.from(k,"utf8")),o.default.encode(Buffer.from(k))}xt.baseEncode=y;function _(k){return Buffer.from(o.default.decode(k))}xt.baseDecode=_;const A=1024;class b extends Error{constructor(U){super(U),this.fieldPath=[],this.originalMessage=U}addToFieldPath(U){this.fieldPath.splice(0,0,U),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}xt.BorshError=b;class B{constructor(){this.buf=Buffer.alloc(A),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(A)]))}writeU8(U){this.maybeResize(),this.buf.writeUInt8(U,this.length),this.length+=1}writeU16(U){this.maybeResize(),this.buf.writeUInt16LE(U,this.length),this.length+=2}writeU32(U){this.maybeResize(),this.buf.writeUInt32LE(U,this.length),this.length+=4}writeU64(U){this.maybeResize(),this.writeBuffer(Buffer.from(new i.default(U).toArray("le",8)))}writeU128(U){this.maybeResize(),this.writeBuffer(Buffer.from(new i.default(U).toArray("le",16)))}writeU256(U){this.maybeResize(),this.writeBuffer(Buffer.from(new i.default(U).toArray("le",32)))}writeU512(U){this.maybeResize(),this.writeBuffer(Buffer.from(new i.default(U).toArray("le",64)))}writeBuffer(U){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),U,Buffer.alloc(A)]),this.length+=U.length}writeString(U){this.maybeResize();const W=Buffer.from(U,"utf8");this.writeU32(W.length),this.writeBuffer(W)}writeFixedArray(U){this.writeBuffer(Buffer.from(U))}writeArray(U,W){this.maybeResize(),this.writeU32(U.length);for(const q of U)this.maybeResize(),W(q)}toArray(){return this.buf.subarray(0,this.length)}}xt.BinaryWriter=B;function M(k,U,W){const q=W.value;W.value=function(...m){try{return q.apply(this,m)}catch(a){if(a instanceof RangeError){const f=a.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(f)>=0)throw new b("Reached the end of buffer when deserializing")}throw a}}}class C{constructor(U){this.buf=U,this.offset=0}readU8(){const U=this.buf.readUInt8(this.offset);return this.offset+=1,U}readU16(){const U=this.buf.readUInt16LE(this.offset);return this.offset+=2,U}readU32(){const U=this.buf.readUInt32LE(this.offset);return this.offset+=4,U}readU64(){const U=this.readBuffer(8);return new i.default(U,"le")}readU128(){const U=this.readBuffer(16);return new i.default(U,"le")}readU256(){const U=this.readBuffer(32);return new i.default(U,"le")}readU512(){const U=this.readBuffer(64);return new i.default(U,"le")}readBuffer(U){if(this.offset+U>this.buf.length)throw new b(`Expected buffer length ${U} isn't within bounds`);const W=this.buf.slice(this.offset,this.offset+U);return this.offset+=U,W}readString(){const U=this.readU32(),W=this.readBuffer(U);try{return p.decode(W)}catch(q){throw new b(`Error decoding UTF-8 string: ${q}`)}}readFixedArray(U){return new Uint8Array(this.readBuffer(U))}readArray(U){const W=this.readU32(),q=Array();for(let m=0;m<W;++m)q.push(U());return q}}e([M],C.prototype,"readU8",null),e([M],C.prototype,"readU16",null),e([M],C.prototype,"readU32",null),e([M],C.prototype,"readU64",null),e([M],C.prototype,"readU128",null),e([M],C.prototype,"readU256",null),e([M],C.prototype,"readU512",null),e([M],C.prototype,"readString",null),e([M],C.prototype,"readFixedArray",null),e([M],C.prototype,"readArray",null),xt.BinaryReader=C;function O(k){return k.charAt(0).toUpperCase()+k.slice(1)}function D(k,U,W,q,m){try{if(typeof q=="string")m[`write${O(q)}`](W);else if(q instanceof Array)if(typeof q[0]=="number"){if(W.length!==q[0])throw new b(`Expecting byte array of length ${q[0]}, but got ${W.length} bytes`);m.writeFixedArray(W)}else if(q.length===2&&typeof q[1]=="number"){if(W.length!==q[1])throw new b(`Expecting byte array of length ${q[1]}, but got ${W.length} bytes`);for(let a=0;a<q[1];a++)D(k,null,W[a],q[0],m)}else m.writeArray(W,a=>{D(k,U,a,q[0],m)});else if(q.kind!==void 0)switch(q.kind){case"option":{W==null?m.writeU8(0):(m.writeU8(1),D(k,U,W,q.type,m));break}case"map":{m.writeU32(W.size),W.forEach((a,f)=>{D(k,U,f,q.key,m),D(k,U,a,q.value,m)});break}default:throw new b(`FieldType ${q} unrecognized`)}else N(k,W,m)}catch(a){throw a instanceof b&&a.addToFieldPath(U),a}}function N(k,U,W){if(typeof U.borshSerialize=="function"){U.borshSerialize(W);return}const q=k.get(U.constructor);if(!q)throw new b(`Class ${U.constructor.name} is missing in schema`);if(q.kind==="struct")q.fields.map(([m,a])=>{D(k,m,U[m],a,W)});else if(q.kind==="enum"){const m=U[q.field];for(let a=0;a<q.values.length;++a){const[f,w]=q.values[a];if(f===m){W.writeU8(a),D(k,f,U[f],w,W);break}}}else throw new b(`Unexpected schema kind: ${q.kind} for ${U.constructor.name}`)}function V(k,U,W=B){const q=new W;return N(k,U,q),q.toArray()}xt.serialize=V;function Z(k,U,W,q){try{if(typeof W=="string")return q[`read${O(W)}`]();if(W instanceof Array){if(typeof W[0]=="number")return q.readFixedArray(W[0]);if(typeof W[1]=="number"){const m=[];for(let a=0;a<W[1];a++)m.push(Z(k,null,W[0],q));return m}else return q.readArray(()=>Z(k,U,W[0],q))}if(W.kind==="option")return q.readU8()?Z(k,U,W.type,q):void 0;if(W.kind==="map"){let m=new Map;const a=q.readU32();for(let f=0;f<a;f++){const w=Z(k,U,W.key,q),S=Z(k,U,W.value,q);m.set(w,S)}return m}return $(k,W,q)}catch(m){throw m instanceof b&&m.addToFieldPath(U),m}}function $(k,U,W){if(typeof U.borshDeserialize=="function")return U.borshDeserialize(W);const q=k.get(U);if(!q)throw new b(`Class ${U.name} is missing in schema`);if(q.kind==="struct"){const m={};for(const[a,f]of k.get(U).fields)m[a]=Z(k,a,f,W);return new U(m)}if(q.kind==="enum"){const m=W.readU8();if(m>=q.values.length)throw new b(`Enum index: ${m} is out of range`);const[a,f]=q.values[m],w=Z(k,a,f,W);return new U({[a]:w})}throw new b(`Unexpected schema kind: ${q.kind} for ${U.constructor.name}`)}function Q(k,U,W,q=C){const m=new q(W),a=$(k,U,m);if(m.offset<W.length)throw new b(`Unexpected ${W.length-m.offset} bytes after deserialized data`);return a}xt.deserialize=Q;function Y(k,U,W,q=C){const m=new q(W);return $(k,U,m)}return xt.deserializeUnchecked=Y,xt}var Rs=eh(),G={},Xa;function nh(){if(Xa)return G;Xa=1,Object.defineProperty(G,"__esModule",{value:!0}),G.s16=G.s8=G.nu64be=G.u48be=G.u40be=G.u32be=G.u24be=G.u16be=G.nu64=G.u48=G.u40=G.u32=G.u24=G.u16=G.u8=G.offset=G.greedy=G.Constant=G.UTF8=G.CString=G.Blob=G.Boolean=G.BitField=G.BitStructure=G.VariantLayout=G.Union=G.UnionLayoutDiscriminator=G.UnionDiscriminator=G.Structure=G.Sequence=G.DoubleBE=G.Double=G.FloatBE=G.Float=G.NearInt64BE=G.NearInt64=G.NearUInt64BE=G.NearUInt64=G.IntBE=G.Int=G.UIntBE=G.UInt=G.OffsetLayout=G.GreedyCount=G.ExternalLayout=G.bindConstructorLayout=G.nameWithProperty=G.Layout=G.uint8ArrayToBuffer=G.checkUint8Array=void 0,G.constant=G.utf8=G.cstr=G.blob=G.unionLayoutDiscriminator=G.union=G.seq=G.bits=G.struct=G.f64be=G.f64=G.f32be=G.f32=G.ns64be=G.s48be=G.s40be=G.s32be=G.s24be=G.s16be=G.ns64=G.s48=G.s40=G.s32=G.s24=void 0;const r=Xo();function t(l){if(!(l instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}G.checkUint8Array=t;function e(l){return t(l),r.Buffer.from(l.buffer,l.byteOffset,l.length)}G.uint8ArrayToBuffer=e;let n=class{constructor(h,E){if(!Number.isInteger(h))throw new TypeError("span must be an integer");this.span=h,this.property=E}makeDestinationObject(){return{}}getSpan(h,E){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(h){const E=Object.create(this.constructor.prototype);return Object.assign(E,this),E.property=h,E}fromArray(h){}};G.Layout=n;function s(l,h){return h.property?l+"["+h.property+"]":l}G.nameWithProperty=s;function i(l,h){if(typeof l!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(l,"layout_"))throw new Error("Class is already bound to a layout");if(!(h&&h instanceof n))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(h,"boundConstructor_"))throw new Error("layout is already bound to a constructor");l.layout_=h,h.boundConstructor_=l,h.makeDestinationObject=(()=>new l),Object.defineProperty(l.prototype,"encode",{value(E,T){return h.encode(this,E,T)},writable:!0}),Object.defineProperty(l,"decode",{value(E,T){return h.decode(E,T)},writable:!0})}G.bindConstructorLayout=i;class o extends n{isCount(){throw new Error("ExternalLayout is abstract")}}G.ExternalLayout=o;class c extends o{constructor(h=1,E){if(!Number.isInteger(h)||0>=h)throw new TypeError("elementSpan must be a (positive) integer");super(-1,E),this.elementSpan=h}isCount(){return!0}decode(h,E=0){t(h);const T=h.length-E;return Math.floor(T/this.elementSpan)}encode(h,E,T){return 0}}G.GreedyCount=c;class u extends o{constructor(h,E=0,T){if(!(h instanceof n))throw new TypeError("layout must be a Layout");if(!Number.isInteger(E))throw new TypeError("offset must be integer or undefined");super(h.span,T||h.property),this.layout=h,this.offset=E}isCount(){return this.layout instanceof p||this.layout instanceof y}decode(h,E=0){return this.layout.decode(h,E+this.offset)}encode(h,E,T=0){return this.layout.encode(h,E,T+this.offset)}}G.OffsetLayout=u;class p extends n{constructor(h,E){if(super(h,E),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(h,E=0){return e(h).readUIntLE(E,this.span)}encode(h,E,T=0){return e(E).writeUIntLE(h,T,this.span),this.span}}G.UInt=p;class y extends n{constructor(h,E){if(super(h,E),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(h,E=0){return e(h).readUIntBE(E,this.span)}encode(h,E,T=0){return e(E).writeUIntBE(h,T,this.span),this.span}}G.UIntBE=y;class _ extends n{constructor(h,E){if(super(h,E),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(h,E=0){return e(h).readIntLE(E,this.span)}encode(h,E,T=0){return e(E).writeIntLE(h,T,this.span),this.span}}G.Int=_;class A extends n{constructor(h,E){if(super(h,E),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(h,E=0){return e(h).readIntBE(E,this.span)}encode(h,E,T=0){return e(E).writeIntBE(h,T,this.span),this.span}}G.IntBE=A;const b=Math.pow(2,32);function B(l){const h=Math.floor(l/b),E=l-h*b;return{hi32:h,lo32:E}}function M(l,h){return l*b+h}class C extends n{constructor(h){super(8,h)}decode(h,E=0){const T=e(h),K=T.readUInt32LE(E),J=T.readUInt32LE(E+4);return M(J,K)}encode(h,E,T=0){const K=B(h),J=e(E);return J.writeUInt32LE(K.lo32,T),J.writeUInt32LE(K.hi32,T+4),8}}G.NearUInt64=C;class O extends n{constructor(h){super(8,h)}decode(h,E=0){const T=e(h),K=T.readUInt32BE(E),J=T.readUInt32BE(E+4);return M(K,J)}encode(h,E,T=0){const K=B(h),J=e(E);return J.writeUInt32BE(K.hi32,T),J.writeUInt32BE(K.lo32,T+4),8}}G.NearUInt64BE=O;class D extends n{constructor(h){super(8,h)}decode(h,E=0){const T=e(h),K=T.readUInt32LE(E),J=T.readInt32LE(E+4);return M(J,K)}encode(h,E,T=0){const K=B(h),J=e(E);return J.writeUInt32LE(K.lo32,T),J.writeInt32LE(K.hi32,T+4),8}}G.NearInt64=D;class N extends n{constructor(h){super(8,h)}decode(h,E=0){const T=e(h),K=T.readInt32BE(E),J=T.readUInt32BE(E+4);return M(K,J)}encode(h,E,T=0){const K=B(h),J=e(E);return J.writeInt32BE(K.hi32,T),J.writeUInt32BE(K.lo32,T+4),8}}G.NearInt64BE=N;class V extends n{constructor(h){super(4,h)}decode(h,E=0){return e(h).readFloatLE(E)}encode(h,E,T=0){return e(E).writeFloatLE(h,T),4}}G.Float=V;class Z extends n{constructor(h){super(4,h)}decode(h,E=0){return e(h).readFloatBE(E)}encode(h,E,T=0){return e(E).writeFloatBE(h,T),4}}G.FloatBE=Z;class $ extends n{constructor(h){super(8,h)}decode(h,E=0){return e(h).readDoubleLE(E)}encode(h,E,T=0){return e(E).writeDoubleLE(h,T),8}}G.Double=$;class Q extends n{constructor(h){super(8,h)}decode(h,E=0){return e(h).readDoubleBE(E)}encode(h,E,T=0){return e(E).writeDoubleBE(h,T),8}}G.DoubleBE=Q;class Y extends n{constructor(h,E,T){if(!(h instanceof n))throw new TypeError("elementLayout must be a Layout");if(!(E instanceof o&&E.isCount()||Number.isInteger(E)&&0<=E))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let K=-1;!(E instanceof o)&&0<h.span&&(K=E*h.span),super(K,T),this.elementLayout=h,this.count=E}getSpan(h,E=0){if(0<=this.span)return this.span;let T=0,K=this.count;if(K instanceof o&&(K=K.decode(h,E)),0<this.elementLayout.span)T=K*this.elementLayout.span;else{let J=0;for(;J<K;)T+=this.elementLayout.getSpan(h,E+T),++J}return T}decode(h,E=0){const T=[];let K=0,J=this.count;for(J instanceof o&&(J=J.decode(h,E));K<J;)T.push(this.elementLayout.decode(h,E)),E+=this.elementLayout.getSpan(h,E),K+=1;return T}encode(h,E,T=0){const K=this.elementLayout,J=h.reduce((nt,st)=>nt+K.encode(st,E,T+nt),0);return this.count instanceof o&&this.count.encode(h.length,E,T),J}}G.Sequence=Y;class k extends n{constructor(h,E,T){if(!(Array.isArray(h)&&h.reduce((J,nt)=>J&&nt instanceof n,!0)))throw new TypeError("fields must be array of Layout instances");typeof E=="boolean"&&T===void 0&&(T=E,E=void 0);for(const J of h)if(0>J.span&&J.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let K=-1;try{K=h.reduce((J,nt)=>J+nt.getSpan(),0)}catch{}super(K,E),this.fields=h,this.decodePrefixes=!!T}getSpan(h,E=0){if(0<=this.span)return this.span;let T=0;try{T=this.fields.reduce((K,J)=>{const nt=J.getSpan(h,E);return E+=nt,K+nt},0)}catch{throw new RangeError("indeterminate span")}return T}decode(h,E=0){t(h);const T=this.makeDestinationObject();for(const K of this.fields)if(K.property!==void 0&&(T[K.property]=K.decode(h,E)),E+=K.getSpan(h,E),this.decodePrefixes&&h.length===E)break;return T}encode(h,E,T=0){const K=T;let J=0,nt=0;for(const st of this.fields){let Et=st.span;if(nt=0<Et?Et:0,st.property!==void 0){const _t=h[st.property];_t!==void 0&&(nt=st.encode(_t,E,T),0>Et&&(Et=st.getSpan(E,T)))}J=T,T+=Et}return J+nt-K}fromArray(h){const E=this.makeDestinationObject();for(const T of this.fields)T.property!==void 0&&0<h.length&&(E[T.property]=h.shift());return E}layoutFor(h){if(typeof h!="string")throw new TypeError("property must be string");for(const E of this.fields)if(E.property===h)return E}offsetOf(h){if(typeof h!="string")throw new TypeError("property must be string");let E=0;for(const T of this.fields){if(T.property===h)return E;0>T.span?E=-1:0<=E&&(E+=T.span)}}}G.Structure=k;class U{constructor(h){this.property=h}decode(h,E){throw new Error("UnionDiscriminator is abstract")}encode(h,E,T){throw new Error("UnionDiscriminator is abstract")}}G.UnionDiscriminator=U;class W extends U{constructor(h,E){if(!(h instanceof o&&h.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(E||h.property||"variant"),this.layout=h}decode(h,E){return this.layout.decode(h,E)}encode(h,E,T){return this.layout.encode(h,E,T)}}G.UnionLayoutDiscriminator=W;class q extends n{constructor(h,E,T){let K;if(h instanceof p||h instanceof y)K=new W(new u(h));else if(h instanceof o&&h.isCount())K=new W(h);else if(h instanceof U)K=h;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(E===void 0&&(E=null),!(E===null||E instanceof n))throw new TypeError("defaultLayout must be null or a Layout");if(E!==null){if(0>E.span)throw new Error("defaultLayout must have constant span");E.property===void 0&&(E=E.replicate("content"))}let J=-1;E&&(J=E.span,0<=J&&(h instanceof p||h instanceof y)&&(J+=K.layout.span)),super(J,T),this.discriminator=K,this.usesPrefixDiscriminator=h instanceof p||h instanceof y,this.defaultLayout=E,this.registry={};let nt=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(st){return nt(st)},this.configGetSourceVariant=function(st){nt=st.bind(this)}}getSpan(h,E=0){if(0<=this.span)return this.span;const T=this.getVariant(h,E);if(!T)throw new Error("unable to determine span for unrecognized variant");return T.getSpan(h,E)}defaultGetSourceVariant(h){if(Object.prototype.hasOwnProperty.call(h,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(h,this.defaultLayout.property))return;const E=this.registry[h[this.discriminator.property]];if(E&&(!E.layout||E.property&&Object.prototype.hasOwnProperty.call(h,E.property)))return E}else for(const E in this.registry){const T=this.registry[E];if(T.property&&Object.prototype.hasOwnProperty.call(h,T.property))return T}throw new Error("unable to infer src variant")}decode(h,E=0){let T;const K=this.discriminator,J=K.decode(h,E),nt=this.registry[J];if(nt===void 0){const st=this.defaultLayout;let Et=0;this.usesPrefixDiscriminator&&(Et=K.layout.span),T=this.makeDestinationObject(),T[K.property]=J,T[st.property]=st.decode(h,E+Et)}else T=nt.decode(h,E);return T}encode(h,E,T=0){const K=this.getSourceVariant(h);if(K===void 0){const J=this.discriminator,nt=this.defaultLayout;let st=0;return this.usesPrefixDiscriminator&&(st=J.layout.span),J.encode(h[J.property],E,T),st+nt.encode(h[nt.property],E,T+st)}return K.encode(h,E,T)}addVariant(h,E,T){const K=new m(this,h,E,T);return this.registry[h]=K,K}getVariant(h,E=0){let T;return h instanceof Uint8Array?T=this.discriminator.decode(h,E):T=h,this.registry[T]}}G.Union=q;class m extends n{constructor(h,E,T,K){if(!(h instanceof q))throw new TypeError("union must be a Union");if(!Number.isInteger(E)||0>E)throw new TypeError("variant must be a (non-negative) integer");if(typeof T=="string"&&K===void 0&&(K=T,T=null),T){if(!(T instanceof n))throw new TypeError("layout must be a Layout");if(h.defaultLayout!==null&&0<=T.span&&T.span>h.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof K!="string")throw new TypeError("variant must have a String property")}let J=h.span;0>h.span&&(J=T?T.span:0,0<=J&&h.usesPrefixDiscriminator&&(J+=h.discriminator.layout.span)),super(J,K),this.union=h,this.variant=E,this.layout=T||null}getSpan(h,E=0){if(0<=this.span)return this.span;let T=0;this.union.usesPrefixDiscriminator&&(T=this.union.discriminator.layout.span);let K=0;return this.layout&&(K=this.layout.getSpan(h,E+T)),T+K}decode(h,E=0){const T=this.makeDestinationObject();if(this!==this.union.getVariant(h,E))throw new Error("variant mismatch");let K=0;return this.union.usesPrefixDiscriminator&&(K=this.union.discriminator.layout.span),this.layout?T[this.property]=this.layout.decode(h,E+K):this.property?T[this.property]=!0:this.union.usesPrefixDiscriminator&&(T[this.union.discriminator.property]=this.variant),T}encode(h,E,T=0){let K=0;if(this.union.usesPrefixDiscriminator&&(K=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(h,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,E,T);let J=K;if(this.layout&&(this.layout.encode(h[this.property],E,T+K),J+=this.layout.getSpan(E,T+K),0<=this.union.span&&J>this.union.span))throw new Error("encoded variant overruns containing union");return J}fromArray(h){if(this.layout)return this.layout.fromArray(h)}}G.VariantLayout=m;function a(l){return 0>l&&(l+=4294967296),l}class f extends n{constructor(h,E,T){if(!(h instanceof p||h instanceof y))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof E=="string"&&T===void 0&&(T=E,E=!1),4<h.span)throw new RangeError("word cannot exceed 32 bits");super(h.span,T),this.word=h,this.msb=!!E,this.fields=[];let K=0;this._packedSetValue=function(J){return K=a(J),this},this._packedGetValue=function(){return K}}decode(h,E=0){const T=this.makeDestinationObject(),K=this.word.decode(h,E);this._packedSetValue(K);for(const J of this.fields)J.property!==void 0&&(T[J.property]=J.decode(h));return T}encode(h,E,T=0){const K=this.word.decode(E,T);this._packedSetValue(K);for(const J of this.fields)if(J.property!==void 0){const nt=h[J.property];nt!==void 0&&J.encode(nt)}return this.word.encode(this._packedGetValue(),E,T)}addField(h,E){const T=new w(this,h,E);return this.fields.push(T),T}addBoolean(h){const E=new S(this,h);return this.fields.push(E),E}fieldFor(h){if(typeof h!="string")throw new TypeError("property must be string");for(const E of this.fields)if(E.property===h)return E}}G.BitStructure=f;class w{constructor(h,E,T){if(!(h instanceof f))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(E)||0>=E)throw new TypeError("bits must be positive integer");const K=8*h.span,J=h.fields.reduce((nt,st)=>nt+st.bits,0);if(E+J>K)throw new Error("bits too long for span remainder ("+(K-J)+" of "+K+" remain)");this.container=h,this.bits=E,this.valueMask=(1<<E)-1,E===32&&(this.valueMask=4294967295),this.start=J,this.container.msb&&(this.start=K-J-E),this.wordMask=a(this.valueMask<<this.start),this.property=T}decode(h,E){const T=this.container._packedGetValue();return a(T&this.wordMask)>>>this.start}encode(h){if(typeof h!="number"||!Number.isInteger(h)||h!==a(h&this.valueMask))throw new TypeError(s("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const E=this.container._packedGetValue(),T=a(h<<this.start);this.container._packedSetValue(a(E&~this.wordMask)|T)}}G.BitField=w;class S extends w{constructor(h,E){super(h,1,E)}decode(h,E){return!!super.decode(h,E)}encode(h){typeof h=="boolean"&&(h=+h),super.encode(h)}}G.Boolean=S;class I extends n{constructor(h,E){if(!(h instanceof o&&h.isCount()||Number.isInteger(h)&&0<=h))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let T=-1;h instanceof o||(T=h),super(T,E),this.length=h}getSpan(h,E){let T=this.span;return 0>T&&(T=this.length.decode(h,E)),T}decode(h,E=0){let T=this.span;return 0>T&&(T=this.length.decode(h,E)),e(h).slice(E,E+T)}encode(h,E,T){let K=this.length;if(this.length instanceof o&&(K=h.length),!(h instanceof Uint8Array&&K===h.length))throw new TypeError(s("Blob.encode",this)+" requires (length "+K+") Uint8Array as src");if(T+K>E.length)throw new RangeError("encoding overruns Uint8Array");const J=e(h);return e(E).write(J.toString("hex"),T,K,"hex"),this.length instanceof o&&this.length.encode(K,E,T),K}}G.Blob=I;class L extends n{constructor(h){super(-1,h)}getSpan(h,E=0){t(h);let T=E;for(;T<h.length&&h[T]!==0;)T+=1;return 1+T-E}decode(h,E=0){const T=this.getSpan(h,E);return e(h).slice(E,E+T-1).toString("utf-8")}encode(h,E,T=0){typeof h!="string"&&(h=String(h));const K=r.Buffer.from(h,"utf8"),J=K.length;if(T+J>E.length)throw new RangeError("encoding overruns Buffer");const nt=e(E);return K.copy(nt,T),nt[T+J]=0,J+1}}G.CString=L;class P extends n{constructor(h,E){if(typeof h=="string"&&E===void 0&&(E=h,h=void 0),h===void 0)h=-1;else if(!Number.isInteger(h))throw new TypeError("maxSpan must be an integer");super(-1,E),this.maxSpan=h}getSpan(h,E=0){return t(h),h.length-E}decode(h,E=0){const T=this.getSpan(h,E);if(0<=this.maxSpan&&this.maxSpan<T)throw new RangeError("text length exceeds maxSpan");return e(h).slice(E,E+T).toString("utf-8")}encode(h,E,T=0){typeof h!="string"&&(h=String(h));const K=r.Buffer.from(h,"utf8"),J=K.length;if(0<=this.maxSpan&&this.maxSpan<J)throw new RangeError("text length exceeds maxSpan");if(T+J>E.length)throw new RangeError("encoding overruns Buffer");return K.copy(e(E),T),J}}G.UTF8=P;class x extends n{constructor(h,E){super(0,E),this.value=h}decode(h,E){return this.value}encode(h,E,T){return 0}}return G.Constant=x,G.greedy=((l,h)=>new c(l,h)),G.offset=((l,h,E)=>new u(l,h,E)),G.u8=(l=>new p(1,l)),G.u16=(l=>new p(2,l)),G.u24=(l=>new p(3,l)),G.u32=(l=>new p(4,l)),G.u40=(l=>new p(5,l)),G.u48=(l=>new p(6,l)),G.nu64=(l=>new C(l)),G.u16be=(l=>new y(2,l)),G.u24be=(l=>new y(3,l)),G.u32be=(l=>new y(4,l)),G.u40be=(l=>new y(5,l)),G.u48be=(l=>new y(6,l)),G.nu64be=(l=>new O(l)),G.s8=(l=>new _(1,l)),G.s16=(l=>new _(2,l)),G.s24=(l=>new _(3,l)),G.s32=(l=>new _(4,l)),G.s40=(l=>new _(5,l)),G.s48=(l=>new _(6,l)),G.ns64=(l=>new D(l)),G.s16be=(l=>new A(2,l)),G.s24be=(l=>new A(3,l)),G.s32be=(l=>new A(4,l)),G.s40be=(l=>new A(5,l)),G.s48be=(l=>new A(6,l)),G.ns64be=(l=>new N(l)),G.f32=(l=>new V(l)),G.f32be=(l=>new Z(l)),G.f64=(l=>new $(l)),G.f64be=(l=>new Q(l)),G.struct=((l,h,E)=>new k(l,h,E)),G.bits=((l,h,E)=>new f(l,h,E)),G.seq=((l,h,E)=>new Y(l,h,E)),G.union=((l,h,E)=>new q(l,h,E)),G.unionLayoutDiscriminator=((l,h)=>new W(l,h)),G.blob=((l,h)=>new I(l,h)),G.cstr=(l=>new L(l)),G.utf8=((l,h)=>new P(l,h)),G.constant=((l,h)=>new x(l,h)),G}var F=nh(),rh=8078e3,ih=8078001,sh=8078004,oh=8078005,ah=8078006,ch=8078011;function Wu(r){return Array.isArray(r)?"%5B"+r.map(Wu).join("%2C%20")+"%5D":typeof r=="bigint"?`${r}n`:encodeURIComponent(String(r!=null&&Object.getPrototypeOf(r)===null?{...r}:r))}function uh([r,t]){return`${r}=${Wu(t)}`}function lh(r){const t=Object.entries(r).map(uh).join("&");return btoa(t)}function fh(r,t={}){{let e=`Solana error #${r}; Decode this error by running \`npx @solana/errors decode -- ${r}`;return Object.keys(t).length&&(e+=` '${lh(t)}'`),`${e}\``}}var ur=class extends Error{cause=this.cause;context;constructor(...[r,t]){let e,n;if(t){const{cause:i,...o}=t;i&&(n={cause:i}),Object.keys(o).length>0&&(e=o)}const s=fh(r,e);super(s,n),this.context={__code:r,...e},this.name="SolanaError"}};function hh(r,t){return"fixedSize"in t?t.fixedSize:t.getSizeFromValue(r)}function dh(r){return Object.freeze({...r,encode:t=>{const e=new Uint8Array(hh(t,r));return r.write(t,e,0),e}})}function gh(r){return Object.freeze({...r,decode:(t,e=0)=>r.read(t,e)[0]})}function Jn(r){return"fixedSize"in r&&typeof r.fixedSize=="number"}function ph(r,t){if(Jn(r)!==Jn(t))throw new ur(sh);if(Jn(r)&&Jn(t)&&r.fixedSize!==t.fixedSize)throw new ur(oh,{decoderFixedSize:t.fixedSize,encoderFixedSize:r.fixedSize});if(!Jn(r)&&!Jn(t)&&r.maxSize!==t.maxSize)throw new ur(ah,{decoderMaxSize:t.maxSize,encoderMaxSize:r.maxSize});return{...t,...r,decode:t.decode,encode:r.encode,read:t.read,write:r.write}}function mh(r,t,e=0){if(t.length-e<=0)throw new ur(rh,{codecDescription:r})}function wh(r,t,e,n=0){const s=e.length-n;if(s<t)throw new ur(ih,{bytesLength:s,codecDescription:r,expected:t})}function yh(r,t,e,n){if(n<t||n>e)throw new ur(ch,{codecDescription:r,max:e,min:t,value:n})}function qu(r){return r?.endian!==1}function bh(r){return dh({fixedSize:r.size,write(t,e,n){r.range&&yh(r.name,r.range[0],r.range[1],t);const s=new ArrayBuffer(r.size);return r.set(new DataView(s),t,qu(r.config)),e.set(new Uint8Array(s),n),n+r.size}})}function vh(r){return gh({fixedSize:r.size,read(t,e=0){mh(r.name,t,e),wh(r.name,r.size,t,e);const n=new DataView(Eh(t,e,r.size));return[r.get(n,qu(r.config)),e+r.size]}})}function Eh(r,t,e){const n=r.byteOffset+(t??0),s=e??r.byteLength;return r.buffer.slice(n,n+s)}var Sh=(r={})=>bh({config:r,name:"u64",range:[0n,BigInt("0xffffffffffffffff")],set:(t,e,n)=>t.setBigUint64(0,BigInt(e),n),size:8}),_h=(r={})=>vh({config:r,get:(t,e)=>t.getBigUint64(0,e),name:"u64",size:8}),xh=(r={})=>ph(Sh(r),_h(r));class Ah extends TypeError{constructor(t,e){let n;const{message:s,explanation:i,...o}=t,{path:c}=t,u=c.length===0?s:`At path: ${c.join(".")} -- ${s}`;super(i??u),i!=null&&(this.cause=u),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>n??(n=[t,...e()])}}function Bh(r){return $r(r)&&typeof r[Symbol.iterator]=="function"}function $r(r){return typeof r=="object"&&r!=null}function Ci(r){return $r(r)&&!Array.isArray(r)}function $e(r){return typeof r=="symbol"?r.toString():typeof r=="string"?JSON.stringify(r):`${r}`}function Mh(r){const{done:t,value:e}=r.next();return t?void 0:e}function Ih(r,t,e,n){if(r===!0)return;r===!1?r={}:typeof r=="string"&&(r={message:r});const{path:s,branch:i}=t,{type:o}=e,{refinement:c,message:u=`Expected a value of type \`${o}\`${c?` with refinement \`${c}\``:""}, but received: \`${$e(n)}\``}=r;return{value:n,type:o,refinement:c,key:s[s.length-1],path:s,branch:i,...r,message:u}}function*Qa(r,t,e,n){Bh(r)||(r=[r]);for(const s of r){const i=Ih(s,t,e,n);i&&(yield i)}}function*oa(r,t,e={}){const{path:n=[],branch:s=[r],coerce:i=!1,mask:o=!1}=e,c={path:n,branch:s,mask:o};i&&(r=t.coercer(r,c));let u="valid";for(const p of t.validator(r,c))p.explanation=e.message,u="not_valid",yield[p,void 0];for(let[p,y,_]of t.entries(r,c)){const A=oa(y,_,{path:p===void 0?n:[...n,p],branch:p===void 0?s:[...s,y],coerce:i,mask:o,message:e.message});for(const b of A)b[0]?(u=b[0].refinement!=null?"not_refined":"not_valid",yield[b[0],void 0]):i&&(y=b[1],p===void 0?r=y:r instanceof Map?r.set(p,y):r instanceof Set?r.add(y):$r(r)&&(y!==void 0||p in r)&&(r[p]=y))}if(u!=="not_valid")for(const p of t.refiner(r,c))p.explanation=e.message,u="not_refined",yield[p,void 0];u==="valid"&&(yield[void 0,r])}let Ye=class{constructor(t){const{type:e,schema:n,validator:s,refiner:i,coercer:o=u=>u,entries:c=function*(){}}=t;this.type=e,this.schema=n,this.entries=c,this.coercer=o,s?this.validator=(u,p)=>{const y=s(u,p);return Qa(y,p,this,u)}:this.validator=()=>[],i?this.refiner=(u,p)=>{const y=i(u,p);return Qa(y,p,this,u)}:this.refiner=()=>[]}assert(t,e){return Rh(t,this,e)}create(t,e){return it(t,this,e)}is(t){return zu(t,this)}mask(t,e){return kh(t,this,e)}validate(t,e={}){return jr(t,this,e)}};function Rh(r,t,e){const n=jr(r,t,{message:e});if(n[0])throw n[0]}function it(r,t,e){const n=jr(r,t,{coerce:!0,message:e});if(n[0])throw n[0];return n[1]}function kh(r,t,e){const n=jr(r,t,{coerce:!0,mask:!0,message:e});if(n[0])throw n[0];return n[1]}function zu(r,t){return!jr(r,t)[0]}function jr(r,t,e={}){const n=oa(r,t,e),s=Mh(n);return s[0]?[new Ah(s[0],function*(){for(const o of n)o[0]&&(yield o[0])}),void 0]:[void 0,s[1]]}function Kn(r,t){return new Ye({type:r,schema:null,validator:t})}function Th(){return Kn("any",()=>!0)}function ot(r){return new Ye({type:"array",schema:r,*entries(t){if(r&&Array.isArray(t))for(const[e,n]of t.entries())yield[e,n,r]},coercer(t){return Array.isArray(t)?t.slice():t},validator(t){return Array.isArray(t)||`Expected an array value, but received: ${$e(t)}`}})}function Ze(){return Kn("boolean",r=>typeof r=="boolean")}function aa(r){return Kn("instance",t=>t instanceof r||`Expected a \`${r.name}\` instance, but received: ${$e(t)}`)}function Pt(r){const t=$e(r),e=typeof r;return new Ye({type:"literal",schema:e==="string"||e==="number"||e==="boolean"?r:null,validator(n){return n===r||`Expected the literal \`${t}\`, but received: ${$e(n)}`}})}function Ch(){return Kn("never",()=>!1)}function at(r){return new Ye({...r,validator:(t,e)=>t===null||r.validator(t,e),refiner:(t,e)=>t===null||r.refiner(t,e)})}function H(){return Kn("number",r=>typeof r=="number"&&!isNaN(r)||`Expected a number, but received: ${$e(r)}`)}function lt(r){return new Ye({...r,validator:(t,e)=>t===void 0||r.validator(t,e),refiner:(t,e)=>t===void 0||r.refiner(t,e)})}function Ku(r,t){return new Ye({type:"record",schema:null,*entries(e){if($r(e))for(const n in e){const s=e[n];yield[n,n,r],yield[n,s,t]}},validator(e){return Ci(e)||`Expected an object, but received: ${$e(e)}`},coercer(e){return Ci(e)?{...e}:e}})}function rt(){return Kn("string",r=>typeof r=="string"||`Expected a string, but received: ${$e(r)}`)}function ca(r){const t=Ch();return new Ye({type:"tuple",schema:null,*entries(e){if(Array.isArray(e)){const n=Math.max(r.length,e.length);for(let s=0;s<n;s++)yield[s,e[s],r[s]||t]}},validator(e){return Array.isArray(e)||`Expected an array, but received: ${$e(e)}`},coercer(e){return Array.isArray(e)?e.slice():e}})}function et(r){const t=Object.keys(r);return new Ye({type:"type",schema:r,*entries(e){if($r(e))for(const n of t)yield[n,e[n],r[n]]},validator(e){return Ci(e)||`Expected an object, but received: ${$e(e)}`},coercer(e){return Ci(e)?{...e}:e}})}function Ie(r){const t=r.map(e=>e.type).join(" | ");return new Ye({type:"union",schema:null,coercer(e,n){for(const s of r){const[i,o]=s.validate(e,{coerce:!0,mask:n.mask});if(!i)return o}return e},validator(e,n){const s=[];for(const i of r){const[...o]=oa(e,i,n),[c]=o;if(c[0])for(const[u]of o)u&&s.push(u);else return[]}return[`Expected the value to satisfy a union of \`${t}\`, but received: ${$e(e)}`,...s]}})}function yr(){return Kn("unknown",()=>!0)}function Hr(r,t,e){return new Ye({...r,coercer:(n,s)=>zu(n,t)?r.coercer(e(n,s),s):r.coercer(n,s)})}var ei,Lh=new Uint8Array(16);function $u(){if(!ei&&(ei=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!ei))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ei(Lh)}const Uh=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function $i(r){return typeof r=="string"&&Uh.test(r)}var ye=[];for(var ks=0;ks<256;++ks)ye.push((ks+256).toString(16).substr(1));function ji(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=(ye[r[t+0]]+ye[r[t+1]]+ye[r[t+2]]+ye[r[t+3]]+"-"+ye[r[t+4]]+ye[r[t+5]]+"-"+ye[r[t+6]]+ye[r[t+7]]+"-"+ye[r[t+8]]+ye[r[t+9]]+"-"+ye[r[t+10]]+ye[r[t+11]]+ye[r[t+12]]+ye[r[t+13]]+ye[r[t+14]]+ye[r[t+15]]).toLowerCase();if(!$i(e))throw TypeError("Stringified UUID is invalid");return e}var tc,Ts,Cs=0,Ls=0;function Nh(r,t,e){var n=t&&e||0,s=t||new Array(16);r=r||{};var i=r.node||tc,o=r.clockseq!==void 0?r.clockseq:Ts;if(i==null||o==null){var c=r.random||(r.rng||$u)();i==null&&(i=tc=[c[0]|1,c[1],c[2],c[3],c[4],c[5]]),o==null&&(o=Ts=(c[6]<<8|c[7])&16383)}var u=r.msecs!==void 0?r.msecs:Date.now(),p=r.nsecs!==void 0?r.nsecs:Ls+1,y=u-Cs+(p-Ls)/1e4;if(y<0&&r.clockseq===void 0&&(o=o+1&16383),(y<0||u>Cs)&&r.nsecs===void 0&&(p=0),p>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Cs=u,Ls=p,Ts=o,u+=122192928e5;var _=((u&268435455)*1e4+p)%4294967296;s[n++]=_>>>24&255,s[n++]=_>>>16&255,s[n++]=_>>>8&255,s[n++]=_&255;var A=u/4294967296*1e4&268435455;s[n++]=A>>>8&255,s[n++]=A&255,s[n++]=A>>>24&15|16,s[n++]=A>>>16&255,s[n++]=o>>>8|128,s[n++]=o&255;for(var b=0;b<6;++b)s[n+b]=i[b];return t||ji(s)}function ju(r){if(!$i(r))throw TypeError("Invalid UUID");var t,e=new Uint8Array(16);return e[0]=(t=parseInt(r.slice(0,8),16))>>>24,e[1]=t>>>16&255,e[2]=t>>>8&255,e[3]=t&255,e[4]=(t=parseInt(r.slice(9,13),16))>>>8,e[5]=t&255,e[6]=(t=parseInt(r.slice(14,18),16))>>>8,e[7]=t&255,e[8]=(t=parseInt(r.slice(19,23),16))>>>8,e[9]=t&255,e[10]=(t=parseInt(r.slice(24,36),16))/1099511627776&255,e[11]=t/4294967296&255,e[12]=t>>>24&255,e[13]=t>>>16&255,e[14]=t>>>8&255,e[15]=t&255,e}function Oh(r){r=unescape(encodeURIComponent(r));for(var t=[],e=0;e<r.length;++e)t.push(r.charCodeAt(e));return t}var Fh="6ba7b810-9dad-11d1-80b4-00c04fd430c8",Ph="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function Hu(r,t,e){function n(s,i,o,c){if(typeof s=="string"&&(s=Oh(s)),typeof i=="string"&&(i=ju(i)),i.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var u=new Uint8Array(16+s.length);if(u.set(i),u.set(s,i.length),u=e(u),u[6]=u[6]&15|t,u[8]=u[8]&63|128,o){c=c||0;for(var p=0;p<16;++p)o[c+p]=u[p];return o}return ji(u)}try{n.name=r}catch{}return n.DNS=Fh,n.URL=Ph,n}function Dh(r){if(typeof r=="string"){var t=unescape(encodeURIComponent(r));r=new Uint8Array(t.length);for(var e=0;e<t.length;++e)r[e]=t.charCodeAt(e)}return Wh(qh(zh(r),r.length*8))}function Wh(r){for(var t=[],e=r.length*32,n="0123456789abcdef",s=0;s<e;s+=8){var i=r[s>>5]>>>s%32&255,o=parseInt(n.charAt(i>>>4&15)+n.charAt(i&15),16);t.push(o)}return t}function Vu(r){return(r+64>>>9<<4)+14+1}function qh(r,t){r[t>>5]|=128<<t%32,r[Vu(t)-1]=t;for(var e=1732584193,n=-271733879,s=-1732584194,i=271733878,o=0;o<r.length;o+=16){var c=e,u=n,p=s,y=i;e=_e(e,n,s,i,r[o],7,-680876936),i=_e(i,e,n,s,r[o+1],12,-389564586),s=_e(s,i,e,n,r[o+2],17,606105819),n=_e(n,s,i,e,r[o+3],22,-1044525330),e=_e(e,n,s,i,r[o+4],7,-176418897),i=_e(i,e,n,s,r[o+5],12,1200080426),s=_e(s,i,e,n,r[o+6],17,-1473231341),n=_e(n,s,i,e,r[o+7],22,-45705983),e=_e(e,n,s,i,r[o+8],7,1770035416),i=_e(i,e,n,s,r[o+9],12,-1958414417),s=_e(s,i,e,n,r[o+10],17,-42063),n=_e(n,s,i,e,r[o+11],22,-1990404162),e=_e(e,n,s,i,r[o+12],7,1804603682),i=_e(i,e,n,s,r[o+13],12,-40341101),s=_e(s,i,e,n,r[o+14],17,-1502002290),n=_e(n,s,i,e,r[o+15],22,1236535329),e=xe(e,n,s,i,r[o+1],5,-165796510),i=xe(i,e,n,s,r[o+6],9,-1069501632),s=xe(s,i,e,n,r[o+11],14,643717713),n=xe(n,s,i,e,r[o],20,-373897302),e=xe(e,n,s,i,r[o+5],5,-701558691),i=xe(i,e,n,s,r[o+10],9,38016083),s=xe(s,i,e,n,r[o+15],14,-660478335),n=xe(n,s,i,e,r[o+4],20,-405537848),e=xe(e,n,s,i,r[o+9],5,568446438),i=xe(i,e,n,s,r[o+14],9,-1019803690),s=xe(s,i,e,n,r[o+3],14,-187363961),n=xe(n,s,i,e,r[o+8],20,1163531501),e=xe(e,n,s,i,r[o+13],5,-1444681467),i=xe(i,e,n,s,r[o+2],9,-51403784),s=xe(s,i,e,n,r[o+7],14,1735328473),n=xe(n,s,i,e,r[o+12],20,-1926607734),e=Ae(e,n,s,i,r[o+5],4,-378558),i=Ae(i,e,n,s,r[o+8],11,-2022574463),s=Ae(s,i,e,n,r[o+11],16,1839030562),n=Ae(n,s,i,e,r[o+14],23,-35309556),e=Ae(e,n,s,i,r[o+1],4,-1530992060),i=Ae(i,e,n,s,r[o+4],11,1272893353),s=Ae(s,i,e,n,r[o+7],16,-155497632),n=Ae(n,s,i,e,r[o+10],23,-1094730640),e=Ae(e,n,s,i,r[o+13],4,681279174),i=Ae(i,e,n,s,r[o],11,-358537222),s=Ae(s,i,e,n,r[o+3],16,-722521979),n=Ae(n,s,i,e,r[o+6],23,76029189),e=Ae(e,n,s,i,r[o+9],4,-640364487),i=Ae(i,e,n,s,r[o+12],11,-421815835),s=Ae(s,i,e,n,r[o+15],16,530742520),n=Ae(n,s,i,e,r[o+2],23,-995338651),e=Be(e,n,s,i,r[o],6,-198630844),i=Be(i,e,n,s,r[o+7],10,1126891415),s=Be(s,i,e,n,r[o+14],15,-1416354905),n=Be(n,s,i,e,r[o+5],21,-57434055),e=Be(e,n,s,i,r[o+12],6,1700485571),i=Be(i,e,n,s,r[o+3],10,-1894986606),s=Be(s,i,e,n,r[o+10],15,-1051523),n=Be(n,s,i,e,r[o+1],21,-2054922799),e=Be(e,n,s,i,r[o+8],6,1873313359),i=Be(i,e,n,s,r[o+15],10,-30611744),s=Be(s,i,e,n,r[o+6],15,-1560198380),n=Be(n,s,i,e,r[o+13],21,1309151649),e=Be(e,n,s,i,r[o+4],6,-145523070),i=Be(i,e,n,s,r[o+11],10,-1120210379),s=Be(s,i,e,n,r[o+2],15,718787259),n=Be(n,s,i,e,r[o+9],21,-343485551),e=Sn(e,c),n=Sn(n,u),s=Sn(s,p),i=Sn(i,y)}return[e,n,s,i]}function zh(r){if(r.length===0)return[];for(var t=r.length*8,e=new Uint32Array(Vu(t)),n=0;n<t;n+=8)e[n>>5]|=(r[n/8]&255)<<n%32;return e}function Sn(r,t){var e=(r&65535)+(t&65535),n=(r>>16)+(t>>16)+(e>>16);return n<<16|e&65535}function Kh(r,t){return r<<t|r>>>32-t}function Hi(r,t,e,n,s,i){return Sn(Kh(Sn(Sn(t,r),Sn(n,i)),s),e)}function _e(r,t,e,n,s,i,o){return Hi(t&e|~t&n,r,t,s,i,o)}function xe(r,t,e,n,s,i,o){return Hi(t&n|e&~n,r,t,s,i,o)}function Ae(r,t,e,n,s,i,o){return Hi(t^e^n,r,t,s,i,o)}function Be(r,t,e,n,s,i,o){return Hi(e^(t|~n),r,t,s,i,o)}var $h=Hu("v3",48,Dh);function jh(r,t,e){r=r||{};var n=r.random||(r.rng||$u)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){e=e||0;for(var s=0;s<16;++s)t[e+s]=n[s];return t}return ji(n)}function Hh(r,t,e,n){switch(r){case 0:return t&e^~t&n;case 1:return t^e^n;case 2:return t&e^t&n^e&n;case 3:return t^e^n}}function Us(r,t){return r<<t|r>>>32-t}function Vh(r){var t=[1518500249,1859775393,2400959708,3395469782],e=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof r=="string"){var n=unescape(encodeURIComponent(r));r=[];for(var s=0;s<n.length;++s)r.push(n.charCodeAt(s))}else Array.isArray(r)||(r=Array.prototype.slice.call(r));r.push(128);for(var i=r.length/4+2,o=Math.ceil(i/16),c=new Array(o),u=0;u<o;++u){for(var p=new Uint32Array(16),y=0;y<16;++y)p[y]=r[u*64+y*4]<<24|r[u*64+y*4+1]<<16|r[u*64+y*4+2]<<8|r[u*64+y*4+3];c[u]=p}c[o-1][14]=(r.length-1)*8/Math.pow(2,32),c[o-1][14]=Math.floor(c[o-1][14]),c[o-1][15]=(r.length-1)*8&4294967295;for(var _=0;_<o;++_){for(var A=new Uint32Array(80),b=0;b<16;++b)A[b]=c[_][b];for(var B=16;B<80;++B)A[B]=Us(A[B-3]^A[B-8]^A[B-14]^A[B-16],1);for(var M=e[0],C=e[1],O=e[2],D=e[3],N=e[4],V=0;V<80;++V){var Z=Math.floor(V/20),$=Us(M,5)+Hh(Z,C,O,D)+N+t[Z]+A[V]>>>0;N=D,D=O,O=Us(C,30)>>>0,C=M,M=$}e[0]=e[0]+M>>>0,e[1]=e[1]+C>>>0,e[2]=e[2]+O>>>0,e[3]=e[3]+D>>>0,e[4]=e[4]+N>>>0}return[e[0]>>24&255,e[0]>>16&255,e[0]>>8&255,e[0]&255,e[1]>>24&255,e[1]>>16&255,e[1]>>8&255,e[1]&255,e[2]>>24&255,e[2]>>16&255,e[2]>>8&255,e[2]&255,e[3]>>24&255,e[3]>>16&255,e[3]>>8&255,e[3]&255,e[4]>>24&255,e[4]>>16&255,e[4]>>8&255,e[4]&255]}var Gh=Hu("v5",80,Vh);const Zh="00000000-0000-0000-0000-000000000000";function Yh(r){if(!$i(r))throw TypeError("Invalid UUID");return parseInt(r.substr(14,1),16)}const Jh=Object.freeze(Object.defineProperty({__proto__:null,NIL:Zh,parse:ju,stringify:ji,v1:Nh,v3:$h,v4:jh,v5:Gh,validate:$i,version:Yh},Symbol.toStringTag,{value:"Module"})),Gu=Jo(Jh);var Ns,ec;function Xh(){if(ec)return Ns;ec=1;const r=Gu.v4;return Ns=function(e,n,s,i){if(typeof e!="string")throw new TypeError(e+" must be a string");i=i||{};const o=typeof i.version=="number"?i.version:2;if(o!==1&&o!==2)throw new TypeError(o+" must be 1 or 2");const c={method:e};if(o===2&&(c.jsonrpc="2.0"),n){if(typeof n!="object"&&!Array.isArray(n))throw new TypeError(n+" must be an object, array or omitted");c.params=n}if(typeof s>"u"){const u=typeof i.generator=="function"?i.generator:function(){return r()};c.id=u(c,i)}else o===2&&s===null?i.notificationIdNull&&(c.id=null):c.id=s;return c},Ns}var Os,nc;function Qh(){if(nc)return Os;nc=1;const r=Gu.v4,t=Xh(),e=function(n,s){if(!(this instanceof e))return new e(n,s);s||(s={}),this.options={reviver:typeof s.reviver<"u"?s.reviver:null,replacer:typeof s.replacer<"u"?s.replacer:null,generator:typeof s.generator<"u"?s.generator:function(){return r()},version:typeof s.version<"u"?s.version:2,notificationIdNull:typeof s.notificationIdNull=="boolean"?s.notificationIdNull:!1},this.callServer=n};return Os=e,e.prototype.request=function(n,s,i,o){const c=this;let u=null;const p=Array.isArray(n)&&typeof s=="function";if(this.options.version===1&&p)throw new TypeError("JSON-RPC 1.0 does not support batching");if(p||!p&&n&&typeof n=="object"&&typeof s=="function")o=s,u=n;else{typeof i=="function"&&(o=i,i=void 0);const A=typeof o=="function";try{u=t(n,s,i,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(b){if(A)return o(b);throw b}if(!A)return u}let _;try{_=JSON.stringify(u,this.options.replacer)}catch(A){return o(A)}return this.callServer(_,function(A,b){c._parseResponse(A,b,o)}),u},e.prototype._parseResponse=function(n,s,i){if(n){i(n);return}if(!s)return i();let o;try{o=JSON.parse(s,this.options.reviver)}catch(c){return i(c)}if(i.length===3)if(Array.isArray(o)){const c=function(p){return typeof p.error<"u"},u=function(p){return!c(p)};return i(null,o.filter(c),o.filter(u))}else return i(null,o.error,o.result);i(null,o)},Os}var td=Qh();const ed=Dr(td);var Fs={exports:{}},rc;function nd(){return rc||(rc=1,(function(r){var t=Object.prototype.hasOwnProperty,e="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(e=!1));function s(u,p,y){this.fn=u,this.context=p,this.once=y||!1}function i(u,p,y,_,A){if(typeof y!="function")throw new TypeError("The listener must be a function");var b=new s(y,_||u,A),B=e?e+p:p;return u._events[B]?u._events[B].fn?u._events[B]=[u._events[B],b]:u._events[B].push(b):(u._events[B]=b,u._eventsCount++),u}function o(u,p){--u._eventsCount===0?u._events=new n:delete u._events[p]}function c(){this._events=new n,this._eventsCount=0}c.prototype.eventNames=function(){var p=[],y,_;if(this._eventsCount===0)return p;for(_ in y=this._events)t.call(y,_)&&p.push(e?_.slice(1):_);return Object.getOwnPropertySymbols?p.concat(Object.getOwnPropertySymbols(y)):p},c.prototype.listeners=function(p){var y=e?e+p:p,_=this._events[y];if(!_)return[];if(_.fn)return[_.fn];for(var A=0,b=_.length,B=new Array(b);A<b;A++)B[A]=_[A].fn;return B},c.prototype.listenerCount=function(p){var y=e?e+p:p,_=this._events[y];return _?_.fn?1:_.length:0},c.prototype.emit=function(p,y,_,A,b,B){var M=e?e+p:p;if(!this._events[M])return!1;var C=this._events[M],O=arguments.length,D,N;if(C.fn){switch(C.once&&this.removeListener(p,C.fn,void 0,!0),O){case 1:return C.fn.call(C.context),!0;case 2:return C.fn.call(C.context,y),!0;case 3:return C.fn.call(C.context,y,_),!0;case 4:return C.fn.call(C.context,y,_,A),!0;case 5:return C.fn.call(C.context,y,_,A,b),!0;case 6:return C.fn.call(C.context,y,_,A,b,B),!0}for(N=1,D=new Array(O-1);N<O;N++)D[N-1]=arguments[N];C.fn.apply(C.context,D)}else{var V=C.length,Z;for(N=0;N<V;N++)switch(C[N].once&&this.removeListener(p,C[N].fn,void 0,!0),O){case 1:C[N].fn.call(C[N].context);break;case 2:C[N].fn.call(C[N].context,y);break;case 3:C[N].fn.call(C[N].context,y,_);break;case 4:C[N].fn.call(C[N].context,y,_,A);break;default:if(!D)for(Z=1,D=new Array(O-1);Z<O;Z++)D[Z-1]=arguments[Z];C[N].fn.apply(C[N].context,D)}}return!0},c.prototype.on=function(p,y,_){return i(this,p,y,_,!1)},c.prototype.once=function(p,y,_){return i(this,p,y,_,!0)},c.prototype.removeListener=function(p,y,_,A){var b=e?e+p:p;if(!this._events[b])return this;if(!y)return o(this,b),this;var B=this._events[b];if(B.fn)B.fn===y&&(!A||B.once)&&(!_||B.context===_)&&o(this,b);else{for(var M=0,C=[],O=B.length;M<O;M++)(B[M].fn!==y||A&&!B[M].once||_&&B[M].context!==_)&&C.push(B[M]);C.length?this._events[b]=C.length===1?C[0]:C:o(this,b)}return this},c.prototype.removeAllListeners=function(p){var y;return p?(y=e?e+p:p,this._events[y]&&o(this,y)):(this._events=new n,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=e,c.EventEmitter=c,r.exports=c})(Fs)),Fs.exports}var rd=nd();const ua=Dr(rd);var id=class extends ua{socket;constructor(r,t,e){super(),this.socket=new window.WebSocket(r,e),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=n=>this.emit("message",n.data),this.socket.onerror=n=>this.emit("error",n),this.socket.onclose=n=>{this.emit("close",n.code,n.reason)}}send(r,t,e){const n=e||t;try{this.socket.send(r),n()}catch(s){n(s)}}close(r,t){this.socket.close(r,t)}addEventListener(r,t,e){this.socket.addEventListener(r,t,e)}};function sd(r,t){return new id(r,t)}var od=class{encode(r){return JSON.stringify(r)}decode(r){return JSON.parse(r)}},ad=class extends ua{address;rpc_id;queue;options;autoconnect;ready;reconnect;reconnect_timer_id;reconnect_interval;max_reconnects;rest_options;current_reconnects;generate_request_id;socket;webSocketFactory;dataPack;constructor(r,t="ws://localhost:8080",{autoconnect:e=!0,reconnect:n=!0,reconnect_interval:s=1e3,max_reconnects:i=5,...o}={},c,u){super(),this.webSocketFactory=r,this.queue={},this.rpc_id=0,this.address=t,this.autoconnect=e,this.ready=!1,this.reconnect=n,this.reconnect_timer_id=void 0,this.reconnect_interval=s,this.max_reconnects=i,this.rest_options=o,this.current_reconnects=0,this.generate_request_id=c||(()=>typeof this.rpc_id=="number"?++this.rpc_id:Number(this.rpc_id)+1),u?this.dataPack=u:this.dataPack=new od,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(r,t,e,n){return!n&&typeof e=="object"&&(n=e,e=null),new Promise((s,i)=>{if(!this.ready)return i(new Error("socket not ready"));const o=this.generate_request_id(r,t),c={jsonrpc:"2.0",method:r,params:t||void 0,id:o};this.socket.send(this.dataPack.encode(c),n,u=>{if(u)return i(u);this.queue[o]={promise:[s,i]},e&&(this.queue[o].timeout=setTimeout(()=>{delete this.queue[o],i(new Error("reply timeout"))},e))})})}async login(r){const t=await this.call("rpc.login",r);if(!t)throw new Error("authentication failed");return t}async listMethods(){return await this.call("__listMethods")}notify(r,t){return new Promise((e,n)=>{if(!this.ready)return n(new Error("socket not ready"));const s={jsonrpc:"2.0",method:r,params:t};this.socket.send(this.dataPack.encode(s),i=>{if(i)return n(i);e()})})}async subscribe(r){typeof r=="string"&&(r=[r]);const t=await this.call("rpc.on",r);if(typeof r=="string"&&t[r]!=="ok")throw new Error("Failed subscribing to an event '"+r+"' with: "+t[r]);return t}async unsubscribe(r){typeof r=="string"&&(r=[r]);const t=await this.call("rpc.off",r);if(typeof r=="string"&&t[r]!=="ok")throw new Error("Failed unsubscribing from an event with: "+t);return t}close(r,t){this.socket&&this.socket.close(r||1e3,t)}setAutoReconnect(r){this.reconnect=r}setReconnectInterval(r){this.reconnect_interval=r}setMaxReconnects(r){this.max_reconnects=r}getCurrentReconnects(){return this.current_reconnects}getMaxReconnects(){return this.max_reconnects}isReconnecting(){return this.reconnect_timer_id!==void 0}willReconnect(){return this.reconnect&&(this.max_reconnects===0||this.current_reconnects<this.max_reconnects)}_connect(r,t){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(r,t),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:e})=>{e instanceof ArrayBuffer&&(e=bt.Buffer.from(e).toString());try{e=this.dataPack.decode(e)}catch{return}if(e.notification&&this.listeners(e.notification).length){if(!Object.keys(e.params).length)return this.emit(e.notification);const n=[e.notification];if(e.params.constructor===Object)n.push(e.params);else for(let s=0;s<e.params.length;s++)n.push(e.params[s]);return Promise.resolve().then(()=>{this.emit.apply(this,n)})}if(!this.queue[e.id])return e.method?Promise.resolve().then(()=>{this.emit(e.method,e?.params)}):void 0;"error"in e=="result"in e&&this.queue[e.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[e.id].timeout&&clearTimeout(this.queue[e.id].timeout),e.error?this.queue[e.id].promise[1](e.error):this.queue[e.id].promise[0](e.result),delete this.queue[e.id]}),this.socket.addEventListener("error",e=>this.emit("error",e)),this.socket.addEventListener("close",({code:e,reason:n})=>{this.ready&&setTimeout(()=>this.emit("close",e,n),0),this.ready=!1,this.socket=void 0,e!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)?this.reconnect_timer_id=setTimeout(()=>this._connect(r,t),this.reconnect_interval):this.reconnect&&this.max_reconnects>0&&this.current_reconnects>=this.max_reconnects&&setTimeout(()=>this.emit("max_reconnects_reached",e,n),1))})}};class Zu extends du{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,fu(t);const n=Qo(e);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(n.length>s?t.create().update(n).digest():n);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=t.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),dr(i)}update(t){return xi(this),this.iHash.update(t),this}digestInto(t){xi(this),qn(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:n,finished:s,destroyed:i,blockLen:o,outputLen:c}=this;return t=t,t.finished=s,t.destroyed=i,t.blockLen=o,t.outputLen=c,t.oHash=e._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Yu=(r,t,e)=>new Zu(r,t).update(e).digest();Yu.create=(r,t)=>new Zu(r,t);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ic=(r,t)=>(r+(r>=0?t:-t)/Ju)/t;function cd(r,t,e){const[[n,s],[i,o]]=t,c=ic(o*r,e),u=ic(-s*r,e);let p=r-c*n-u*i,y=-c*s-u*o;const _=p<on,A=y<on;_&&(p=-p),A&&(y=-y);const b=qr(Math.ceil(vu(e)/2))+lr;if(p<on||p>=b||y<on||y>=b)throw new Error("splitScalar (endomorphism): failed, k="+r);return{k1neg:_,k1:p,k2neg:A,k2:y}}function Ao(r){if(!["compact","recovered","der"].includes(r))throw new Error('Signature format must be "compact", "recovered", or "der"');return r}function Ps(r,t){const e={};for(let n of Object.keys(t))e[n]=r[n]===void 0?t[n]:r[n];return Wn(e.lowS,"lowS"),Wn(e.prehash,"prehash"),e.format!==void 0&&Ao(e.format),e}class ud extends Error{constructor(t=""){super(t)}}const tn={Err:ud,_tlv:{encode:(r,t)=>{const{Err:e}=tn;if(r<0||r>256)throw new e("tlv.encode: wrong tag");if(t.length&1)throw new e("tlv.encode: unpadded data");const n=t.length/2,s=Qr(n);if(s.length/2&128)throw new e("tlv.encode: long form length too big");const i=n>127?Qr(s.length/2|128):"";return Qr(r)+i+s+t},decode(r,t){const{Err:e}=tn;let n=0;if(r<0||r>256)throw new e("tlv.encode: wrong tag");if(t.length<2||t[n++]!==r)throw new e("tlv.decode: wrong tlv");const s=t[n++],i=!!(s&128);let o=0;if(!i)o=s;else{const u=s&127;if(!u)throw new e("tlv.decode(long): indefinite length not supported");if(u>4)throw new e("tlv.decode(long): byte length is too big");const p=t.subarray(n,n+u);if(p.length!==u)throw new e("tlv.decode: length bytes not complete");if(p[0]===0)throw new e("tlv.decode(long): zero leftmost byte");for(const y of p)o=o<<8|y;if(n+=u,o<128)throw new e("tlv.decode(long): not minimal encoding")}const c=t.subarray(n,n+o);if(c.length!==o)throw new e("tlv.decode: wrong value length");return{v:c,l:t.subarray(n+o)}}},_int:{encode(r){const{Err:t}=tn;if(r<on)throw new t("integer: negative integers are not allowed");let e=Qr(r);if(Number.parseInt(e[0],16)&8&&(e="00"+e),e.length&1)throw new t("unexpected DER parsing assertion: unpadded hex");return e},decode(r){const{Err:t}=tn;if(r[0]&128)throw new t("invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new t("invalid signature integer: unnecessary leading zero");return zi(r)}},toSig(r){const{Err:t,_int:e,_tlv:n}=tn,s=jt("signature",r),{v:i,l:o}=n.decode(48,s);if(o.length)throw new t("invalid signature: left bytes after parsing");const{v:c,l:u}=n.decode(2,i),{v:p,l:y}=n.decode(2,u);if(y.length)throw new t("invalid signature: left bytes after parsing");return{r:e.decode(c),s:e.decode(p)}},hexFromSig(r){const{_tlv:t,_int:e}=tn,n=t.encode(2,e.encode(r.r)),s=t.encode(2,e.encode(r.s)),i=n+s;return t.encode(48,i)}},on=BigInt(0),lr=BigInt(1),Ju=BigInt(2),ni=BigInt(3),ld=BigInt(4);function sr(r,t){const{BYTES:e}=r;let n;if(typeof t=="bigint")n=t;else{let s=jt("private key",t);try{n=r.fromBytes(s)}catch{throw new Error(`invalid private key: expected ui8a of size ${e}, got ${typeof t}`)}}if(!r.isValidNot0(n))throw new Error("invalid private key: out of range [1..N-1]");return n}function fd(r,t={}){const e=Ou("weierstrass",r,t),{Fp:n,Fn:s}=e;let i=e.CURVE;const{h:o,n:c}=i;zr(t,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:u}=t;if(u&&(!n.is0(i.a)||typeof u.beta!="bigint"||!Array.isArray(u.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const p=Qu(n,s);function y(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function _(q,m,a){const{x:f,y:w}=m.toAffine(),S=n.toBytes(f);if(Wn(a,"isCompressed"),a){y();const I=!n.isOdd(w);return Ve(Xu(I),S)}else return Ve(Uint8Array.of(4),S,n.toBytes(w))}function A(q){Ke(q,void 0,"Point");const{publicKey:m,publicKeyUncompressed:a}=p,f=q.length,w=q[0],S=q.subarray(1);if(f===m&&(w===2||w===3)){const I=n.fromBytes(S);if(!n.isValid(I))throw new Error("bad point: is not on curve, wrong x");const L=M(I);let P;try{P=n.sqrt(L)}catch(h){const E=h instanceof Error?": "+h.message:"";throw new Error("bad point: is not on curve, sqrt error"+E)}y();const x=n.isOdd(P);return(w&1)===1!==x&&(P=n.neg(P)),{x:I,y:P}}else if(f===a&&w===4){const I=n.BYTES,L=n.fromBytes(S.subarray(0,I)),P=n.fromBytes(S.subarray(I,I*2));if(!C(L,P))throw new Error("bad point: is not on curve");return{x:L,y:P}}else throw new Error(`bad point: got length ${f}, expected compressed=${m} or uncompressed=${a}`)}const b=t.toBytes||_,B=t.fromBytes||A;function M(q){const m=n.sqr(q),a=n.mul(m,q);return n.add(n.add(a,n.mul(q,i.a)),i.b)}function C(q,m){const a=n.sqr(m),f=M(q);return n.eql(a,f)}if(!C(i.Gx,i.Gy))throw new Error("bad curve params: generator point");const O=n.mul(n.pow(i.a,ni),ld),D=n.mul(n.sqr(i.b),BigInt(27));if(n.is0(n.add(O,D)))throw new Error("bad curve params: a or b");function N(q,m,a=!1){if(!n.isValid(m)||a&&n.is0(m))throw new Error(`bad point coordinate ${q}`);return m}function V(q){if(!(q instanceof k))throw new Error("ProjectivePoint expected")}function Z(q){if(!u||!u.basises)throw new Error("no endo");return cd(q,u.basises,s.ORDER)}const $=Bi((q,m)=>{const{X:a,Y:f,Z:w}=q;if(n.eql(w,n.ONE))return{x:a,y:f};const S=q.is0();m==null&&(m=S?n.ONE:n.inv(w));const I=n.mul(a,m),L=n.mul(f,m),P=n.mul(w,m);if(S)return{x:n.ZERO,y:n.ZERO};if(!n.eql(P,n.ONE))throw new Error("invZ was invalid");return{x:I,y:L}}),Q=Bi(q=>{if(q.is0()){if(t.allowInfinityPoint&&!n.is0(q.Y))return;throw new Error("bad point: ZERO")}const{x:m,y:a}=q.toAffine();if(!n.isValid(m)||!n.isValid(a))throw new Error("bad point: x or y not field elements");if(!C(m,a))throw new Error("bad point: equation left != right");if(!q.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function Y(q,m,a,f,w){return a=new k(n.mul(a.X,q),a.Y,a.Z),m=Mi(f,m),a=Mi(w,a),m.add(a)}class k{constructor(m,a,f){this.X=N("x",m),this.Y=N("y",a,!0),this.Z=N("z",f),Object.freeze(this)}static CURVE(){return i}static fromAffine(m){const{x:a,y:f}=m||{};if(!m||!n.isValid(a)||!n.isValid(f))throw new Error("invalid affine point");if(m instanceof k)throw new Error("projective point not allowed");return n.is0(a)&&n.is0(f)?k.ZERO:new k(a,f,n.ONE)}static fromBytes(m){const a=k.fromAffine(B(Ke(m,void 0,"point")));return a.assertValidity(),a}static fromHex(m){return k.fromBytes(jt("pointHex",m))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(m=8,a=!0){return W.createCache(this,m),a||this.multiply(ni),this}assertValidity(){Q(this)}hasEvenY(){const{y:m}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(m)}equals(m){V(m);const{X:a,Y:f,Z:w}=this,{X:S,Y:I,Z:L}=m,P=n.eql(n.mul(a,L),n.mul(S,w)),x=n.eql(n.mul(f,L),n.mul(I,w));return P&&x}negate(){return new k(this.X,n.neg(this.Y),this.Z)}double(){const{a:m,b:a}=i,f=n.mul(a,ni),{X:w,Y:S,Z:I}=this;let L=n.ZERO,P=n.ZERO,x=n.ZERO,l=n.mul(w,w),h=n.mul(S,S),E=n.mul(I,I),T=n.mul(w,S);return T=n.add(T,T),x=n.mul(w,I),x=n.add(x,x),L=n.mul(m,x),P=n.mul(f,E),P=n.add(L,P),L=n.sub(h,P),P=n.add(h,P),P=n.mul(L,P),L=n.mul(T,L),x=n.mul(f,x),E=n.mul(m,E),T=n.sub(l,E),T=n.mul(m,T),T=n.add(T,x),x=n.add(l,l),l=n.add(x,l),l=n.add(l,E),l=n.mul(l,T),P=n.add(P,l),E=n.mul(S,I),E=n.add(E,E),l=n.mul(E,T),L=n.sub(L,l),x=n.mul(E,h),x=n.add(x,x),x=n.add(x,x),new k(L,P,x)}add(m){V(m);const{X:a,Y:f,Z:w}=this,{X:S,Y:I,Z:L}=m;let P=n.ZERO,x=n.ZERO,l=n.ZERO;const h=i.a,E=n.mul(i.b,ni);let T=n.mul(a,S),K=n.mul(f,I),J=n.mul(w,L),nt=n.add(a,f),st=n.add(S,I);nt=n.mul(nt,st),st=n.add(T,K),nt=n.sub(nt,st),st=n.add(a,w);let Et=n.add(S,L);return st=n.mul(st,Et),Et=n.add(T,J),st=n.sub(st,Et),Et=n.add(f,w),P=n.add(I,L),Et=n.mul(Et,P),P=n.add(K,J),Et=n.sub(Et,P),l=n.mul(h,st),P=n.mul(E,J),l=n.add(P,l),P=n.sub(K,l),l=n.add(K,l),x=n.mul(P,l),K=n.add(T,T),K=n.add(K,T),J=n.mul(h,J),st=n.mul(E,st),K=n.add(K,J),J=n.sub(T,J),J=n.mul(h,J),st=n.add(st,J),T=n.mul(K,st),x=n.add(x,T),T=n.mul(Et,st),P=n.mul(nt,P),P=n.sub(P,T),T=n.mul(nt,K),l=n.mul(Et,l),l=n.add(l,T),new k(P,x,l)}subtract(m){return this.add(m.negate())}is0(){return this.equals(k.ZERO)}multiply(m){const{endo:a}=t;if(!s.isValidNot0(m))throw new Error("invalid scalar: out of range");let f,w;const S=I=>W.cached(this,I,L=>kn(k,L));if(a){const{k1neg:I,k1:L,k2neg:P,k2:x}=Z(m),{p:l,f:h}=S(L),{p:E,f:T}=S(x);w=h.add(T),f=Y(a.beta,l,E,I,P)}else{const{p:I,f:L}=S(m);f=I,w=L}return kn(k,[f,w])[0]}multiplyUnsafe(m){const{endo:a}=t,f=this;if(!s.isValid(m))throw new Error("invalid scalar: out of range");if(m===on||f.is0())return k.ZERO;if(m===lr)return f;if(W.hasCache(this))return this.multiply(m);if(a){const{k1neg:w,k1:S,k2neg:I,k2:L}=Z(m),{p1:P,p2:x}=_f(k,f,S,L);return Y(a.beta,P,x,w,I)}else return W.unsafe(f,m)}multiplyAndAddUnsafe(m,a,f){const w=this.multiplyUnsafe(a).add(m.multiplyUnsafe(f));return w.is0()?void 0:w}toAffine(m){return $(this,m)}isTorsionFree(){const{isTorsionFree:m}=t;return o===lr?!0:m?m(k,this):W.unsafe(this,c).is0()}clearCofactor(){const{clearCofactor:m}=t;return o===lr?this:m?m(k,this):this.multiplyUnsafe(o)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}toBytes(m=!0){return Wn(m,"isCompressed"),this.assertValidity(),b(k,this,m)}toHex(m=!0){return Pn(this.toBytes(m))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(m=!0){return this.toBytes(m)}_setWindowSize(m){this.precompute(m)}static normalizeZ(m){return kn(k,m)}static msm(m,a){return Nu(k,s,m,a)}static fromPrivateKey(m){return k.BASE.multiply(sr(s,m))}}k.BASE=new k(i.Gx,i.Gy,n.ONE),k.ZERO=new k(n.ZERO,n.ONE,n.ZERO),k.Fp=n,k.Fn=s;const U=s.BITS,W=new Uu(k,t.endo?Math.ceil(U/2):U);return k.BASE.precompute(8),k}function Xu(r){return Uint8Array.of(r?2:3)}function Qu(r,t){return{secretKey:t.BYTES,publicKey:1+r.BYTES,publicKeyUncompressed:1+2*r.BYTES,publicKeyHasPrefix:!0,signature:2*t.BYTES}}function hd(r,t={}){const{Fn:e}=r,n=t.randomBytes||ta,s=Object.assign(Qu(r.Fp,e),{seed:Tu(e.ORDER)});function i(b){try{return!!sr(e,b)}catch{return!1}}function o(b,B){const{publicKey:M,publicKeyUncompressed:C}=s;try{const O=b.length;return B===!0&&O!==M||B===!1&&O!==C?!1:!!r.fromBytes(b)}catch{return!1}}function c(b=n(s.seed)){return vf(Ke(b,s.seed,"seed"),e.ORDER)}function u(b,B=!0){return r.BASE.multiply(sr(e,b)).toBytes(B)}function p(b){const B=c(b);return{secretKey:B,publicKey:u(B)}}function y(b){if(typeof b=="bigint")return!1;if(b instanceof r)return!0;const{secretKey:B,publicKey:M,publicKeyUncompressed:C}=s;if(e.allowedLengths||B===M)return;const O=jt("key",b).length;return O===M||O===C}function _(b,B,M=!0){if(y(b)===!0)throw new Error("first arg must be private key");if(y(B)===!1)throw new Error("second arg must be public key");const C=sr(e,b);return r.fromHex(B).multiply(C).toBytes(M)}return Object.freeze({getPublicKey:u,getSharedSecret:_,keygen:p,Point:r,utils:{isValidSecretKey:i,isValidPublicKey:o,randomSecretKey:c,isValidPrivateKey:i,randomPrivateKey:c,normPrivateKeyToScalar:b=>sr(e,b),precompute(b=8,B=r.BASE){return B.precompute(b,!1)}},lengths:s})}function dd(r,t,e={}){fu(t),zr(e,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const n=e.randomBytes||ta,s=e.hmac||((a,...f)=>Yu(t,a,Ve(...f))),{Fp:i,Fn:o}=r,{ORDER:c,BITS:u}=o,{keygen:p,getPublicKey:y,getSharedSecret:_,utils:A,lengths:b}=hd(r,e),B={prehash:!1,lowS:typeof e.lowS=="boolean"?e.lowS:!1,format:void 0,extraEntropy:!1},M="compact";function C(a){const f=c>>lr;return a>f}function O(a,f){if(!o.isValidNot0(f))throw new Error(`invalid signature ${a}: out of range 1..Point.Fn.ORDER`);return f}function D(a,f){Ao(f);const w=b.signature,S=f==="compact"?w:f==="recovered"?w+1:void 0;return Ke(a,S,`${f} signature`)}class N{constructor(f,w,S){this.r=O("r",f),this.s=O("s",w),S!=null&&(this.recovery=S),Object.freeze(this)}static fromBytes(f,w=M){D(f,w);let S;if(w==="der"){const{r:x,s:l}=tn.toSig(Ke(f));return new N(x,l)}w==="recovered"&&(S=f[0],w="compact",f=f.subarray(1));const I=o.BYTES,L=f.subarray(0,I),P=f.subarray(I,I*2);return new N(o.fromBytes(L),o.fromBytes(P),S)}static fromHex(f,w){return this.fromBytes(Ai(f),w)}addRecoveryBit(f){return new N(this.r,this.s,f)}recoverPublicKey(f){const w=i.ORDER,{r:S,s:I,recovery:L}=this;if(L==null||![0,1,2,3].includes(L))throw new Error("recovery id invalid");if(c*Ju<w&&L>1)throw new Error("recovery id is ambiguous for h>1 curve");const x=L===2||L===3?S+c:S;if(!i.isValid(x))throw new Error("recovery id 2 or 3 invalid");const l=i.toBytes(x),h=r.fromBytes(Ve(Xu((L&1)===0),l)),E=o.inv(x),T=Z(jt("msgHash",f)),K=o.create(-T*E),J=o.create(I*E),nt=r.BASE.multiplyUnsafe(K).add(h.multiplyUnsafe(J));if(nt.is0())throw new Error("point at infinify");return nt.assertValidity(),nt}hasHighS(){return C(this.s)}toBytes(f=M){if(Ao(f),f==="der")return Ai(tn.hexFromSig(this));const w=o.toBytes(this.r),S=o.toBytes(this.s);if(f==="recovered"){if(this.recovery==null)throw new Error("recovery bit must be present");return Ve(Uint8Array.of(this.recovery),w,S)}return Ve(w,S)}toHex(f){return Pn(this.toBytes(f))}assertValidity(){}static fromCompact(f){return N.fromBytes(jt("sig",f),"compact")}static fromDER(f){return N.fromBytes(jt("sig",f),"der")}normalizeS(){return this.hasHighS()?new N(this.r,o.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return Pn(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return Pn(this.toBytes("compact"))}}const V=e.bits2int||function(f){if(f.length>8192)throw new Error("input is too large");const w=zi(f),S=f.length*8-u;return S>0?w>>BigInt(S):w},Z=e.bits2int_modN||function(f){return o.create(V(f))},$=qr(u);function Q(a){return xo("num < 2^"+u,a,on,$),o.toBytes(a)}function Y(a,f){return Ke(a,void 0,"message"),f?Ke(t(a),void 0,"prehashed message"):a}function k(a,f,w){if(["recovered","canonical"].some(K=>K in w))throw new Error("sign() legacy options not supported");const{lowS:S,prehash:I,extraEntropy:L}=Ps(w,B);a=Y(a,I);const P=Z(a),x=sr(o,f),l=[Q(x),Q(P)];if(L!=null&&L!==!1){const K=L===!0?n(b.secretKey):L;l.push(jt("extraEntropy",K))}const h=Ve(...l),E=P;function T(K){const J=V(K);if(!o.isValidNot0(J))return;const nt=o.inv(J),st=r.BASE.multiply(J).toAffine(),Et=o.create(st.x);if(Et===on)return;const _t=o.create(nt*o.create(E+Et*x));if(_t===on)return;let At=(st.x===Et?0:2)|Number(st.y&lr),De=_t;return S&&C(_t)&&(De=o.neg(_t),At^=1),new N(Et,De,At)}return{seed:h,k2sig:T}}function U(a,f,w={}){a=jt("message",a);const{seed:S,k2sig:I}=k(a,f,w);return lf(t.outputLen,o.BYTES,s)(S,I)}function W(a){let f;const w=typeof a=="string"||Wr(a),S=!w&&a!==null&&typeof a=="object"&&typeof a.r=="bigint"&&typeof a.s=="bigint";if(!w&&!S)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(S)f=new N(a.r,a.s);else if(w){try{f=N.fromBytes(jt("sig",a),"der")}catch(I){if(!(I instanceof tn.Err))throw I}if(!f)try{f=N.fromBytes(jt("sig",a),"compact")}catch{return!1}}return f||!1}function q(a,f,w,S={}){const{lowS:I,prehash:L,format:P}=Ps(S,B);if(w=jt("publicKey",w),f=Y(jt("message",f),L),"strict"in S)throw new Error("options.strict was renamed to lowS");const x=P===void 0?W(a):N.fromBytes(jt("sig",a),P);if(x===!1)return!1;try{const l=r.fromBytes(w);if(I&&x.hasHighS())return!1;const{r:h,s:E}=x,T=Z(f),K=o.inv(E),J=o.create(T*K),nt=o.create(h*K),st=r.BASE.multiplyUnsafe(J).add(l.multiplyUnsafe(nt));return st.is0()?!1:o.create(st.x)===h}catch{return!1}}function m(a,f,w={}){const{prehash:S}=Ps(w,B);return f=Y(f,S),N.fromBytes(a,"recovered").recoverPublicKey(f).toBytes()}return Object.freeze({keygen:p,getPublicKey:y,getSharedSecret:_,utils:A,lengths:b,Point:r,sign:U,verify:q,recoverPublicKey:m,Signature:N,hash:t})}function gd(r){const t={a:r.a,b:r.b,p:r.Fp.ORDER,n:r.n,h:r.h,Gx:r.Gx,Gy:r.Gy},e=r.Fp;let n=r.allowedPrivateKeyLengths?Array.from(new Set(r.allowedPrivateKeyLengths.map(o=>Math.ceil(o/2)))):void 0;const s=zn(t.n,{BITS:r.nBitLength,allowedLengths:n,modFromBytes:r.wrapPrivateKey}),i={Fp:e,Fn:s,allowInfinityPoint:r.allowInfinityPoint,endo:r.endo,isTorsionFree:r.isTorsionFree,clearCofactor:r.clearCofactor,fromBytes:r.fromBytes,toBytes:r.toBytes};return{CURVE:t,curveOpts:i}}function pd(r){const{CURVE:t,curveOpts:e}=gd(r),n={hmac:r.hmac,randomBytes:r.randomBytes,lowS:r.lowS,bits2int:r.bits2int,bits2int_modN:r.bits2int_modN};return{CURVE:t,curveOpts:e,hash:r.hash,ecdsaOpts:n}}function md(r,t){const e=t.Point;return Object.assign({},t,{ProjectivePoint:e,CURVE:Object.assign({},r,Ru(e.Fn.ORDER,e.Fn.BITS))})}function wd(r){const{CURVE:t,curveOpts:e,hash:n,ecdsaOpts:s}=pd(r),i=fd(t,e),o=dd(i,n,s);return md(r,o)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function yd(r,t){const e=n=>wd({...r,hash:n});return{...e(t),create:e}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const la={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},bd={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),basises:[[BigInt("0x3086d221a7d46bcde86c90e49284eb15"),-BigInt("0xe4437ed6010e88286f547fa90abfe4c3")],[BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),BigInt("0x3086d221a7d46bcde86c90e49284eb15")]]},sc=BigInt(2);function vd(r){const t=la.p,e=BigInt(3),n=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),c=BigInt(44),u=BigInt(88),p=r*r*r%t,y=p*p*r%t,_=$t(y,e,t)*y%t,A=$t(_,e,t)*y%t,b=$t(A,sc,t)*p%t,B=$t(b,s,t)*b%t,M=$t(B,i,t)*B%t,C=$t(M,c,t)*M%t,O=$t(C,u,t)*C%t,D=$t(O,c,t)*M%t,N=$t(D,e,t)*y%t,V=$t(N,o,t)*B%t,Z=$t(V,n,t)*p%t,$=$t(Z,sc,t);if(!Bo.eql(Bo.sqr($),r))throw new Error("Cannot find square root");return $}const Bo=zn(la.p,{sqrt:vd}),Ed=yd({...la,Fp:Bo,lowS:!0,endo:bd},wu);Kr.utils.randomPrivateKey;Kr.getPublicKey;function oc(r){try{return Kr.ExtendedPoint.fromHex(r),!0}catch{return!1}}const tl=(r,t)=>Kr.sign(r,t.slice(0,32)),Sd=Kr.verify,mr=r=>bt.Buffer.isBuffer(r)?r:r instanceof Uint8Array?bt.Buffer.from(r.buffer,r.byteOffset,r.byteLength):bt.Buffer.from(r);class _d{constructor(t){Object.assign(this,t)}encode(){return bt.Buffer.from(Rs.serialize(ai,this))}static decode(t){return Rs.deserialize(ai,this,t)}static decodeUnchecked(t){return Rs.deserializeUnchecked(ai,this,t)}}const ai=new Map;var el;const xd=32,_n=32;function Ad(r){return r._bn!==void 0}let ac=1;class dt extends _d{constructor(t){if(super({}),this._bn=void 0,Ad(t))this._bn=t._bn;else{if(typeof t=="string"){const e=ve.decode(t);if(e.length!=_n)throw new Error("Invalid public key input");this._bn=new $a(e)}else this._bn=new $a(t);if(this._bn.byteLength()>_n)throw new Error("Invalid public key input")}}static unique(){const t=new dt(ac);return ac+=1,new dt(t.toBuffer())}equals(t){return this._bn.eq(t._bn)}toBase58(){return ve.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const t=this.toBuffer();return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}toBuffer(){const t=this._bn.toArrayLike(bt.Buffer);if(t.length===_n)return t;const e=bt.Buffer.alloc(32);return t.copy(e,32-t.length),e}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(t,e,n){const s=bt.Buffer.concat([t.toBuffer(),bt.Buffer.from(e),n.toBuffer()]),i=Ga(s);return new dt(i)}static createProgramAddressSync(t,e){let n=bt.Buffer.alloc(0);t.forEach(function(i){if(i.length>xd)throw new TypeError("Max seed length exceeded");n=bt.Buffer.concat([n,mr(i)])}),n=bt.Buffer.concat([n,e.toBuffer(),bt.Buffer.from("ProgramDerivedAddress")]);const s=Ga(n);if(oc(s))throw new Error("Invalid seeds, address must fall off the curve");return new dt(s)}static async createProgramAddress(t,e){return this.createProgramAddressSync(t,e)}static findProgramAddressSync(t,e){let n=255,s;for(;n!=0;){try{const i=t.concat(bt.Buffer.from([n]));s=this.createProgramAddressSync(i,e)}catch(i){if(i instanceof TypeError)throw i;n--;continue}return[s,n]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(t,e){return this.findProgramAddressSync(t,e)}static isOnCurve(t){const e=new dt(t);return oc(e.toBytes())}}el=dt;dt.default=new el("11111111111111111111111111111111");ai.set(dt,{kind:"struct",fields:[["_bn","u256"]]});new dt("BPFLoader1111111111111111111111111111111111");const fr=1232,fa=127,Li=64;class nl extends Error{constructor(t){super(`Signature ${t} has expired: block height exceeded.`),this.signature=void 0,this.signature=t}}Object.defineProperty(nl.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class rl extends Error{constructor(t,e){super(`Transaction was not confirmed in ${e.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${t} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=t}}Object.defineProperty(rl.prototype,"name",{value:"TransactionExpiredTimeoutError"});class xr extends Error{constructor(t){super(`Signature ${t} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=t}}Object.defineProperty(xr.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class Ui{constructor(t,e){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=t,this.accountKeysFromLookups=e}keySegments(){const t=[this.staticAccountKeys];return this.accountKeysFromLookups&&(t.push(this.accountKeysFromLookups.writable),t.push(this.accountKeysFromLookups.readonly)),t}get(t){for(const e of this.keySegments()){if(t<e.length)return e[t];t-=e.length}}get length(){return this.keySegments().flat().length}compileInstructions(t){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const n=new Map;this.keySegments().flat().forEach((i,o)=>{n.set(i.toBase58(),o)});const s=i=>{const o=n.get(i.toBase58());if(o===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return o};return t.map(i=>({programIdIndex:s(i.programId),accountKeyIndexes:i.keys.map(o=>s(o.pubkey)),data:i.data}))}}const vt=(r="publicKey")=>F.blob(32,r),Bd=(r="signature")=>F.blob(64,r),or=(r="string")=>{const t=F.struct([F.u32("length"),F.u32("lengthPadding"),F.blob(F.offset(F.u32(),-8),"chars")],r),e=t.decode.bind(t),n=t.encode.bind(t),s=t;return s.decode=(i,o)=>e(i,o).chars.toString(),s.encode=(i,o,c)=>{const u={chars:bt.Buffer.from(i,"utf8")};return n(u,o,c)},s.alloc=i=>F.u32().span+F.u32().span+bt.Buffer.from(i,"utf8").length,s},Md=(r="authorized")=>F.struct([vt("staker"),vt("withdrawer")],r),Id=(r="lockup")=>F.struct([F.ns64("unixTimestamp"),F.ns64("epoch"),vt("custodian")],r),Rd=(r="voteInit")=>F.struct([vt("nodePubkey"),vt("authorizedVoter"),vt("authorizedWithdrawer"),F.u8("commission")],r),kd=(r="voteAuthorizeWithSeedArgs")=>F.struct([F.u32("voteAuthorizationType"),vt("currentAuthorityDerivedKeyOwnerPubkey"),or("currentAuthorityDerivedKeySeed"),vt("newAuthorized")],r);function Oe(r){let t=0,e=0;for(;;){let n=r.shift();if(t|=(n&127)<<e*7,e+=1,(n&128)===0)break}return t}function Fe(r,t){let e=t;for(;;){let n=e&127;if(e>>=7,e==0){r.push(n);break}else n|=128,r.push(n)}}function Ut(r,t){if(!r)throw new Error(t||"Assertion failed")}class Vi{constructor(t,e){this.payer=void 0,this.keyMetaMap=void 0,this.payer=t,this.keyMetaMap=e}static compile(t,e){const n=new Map,s=o=>{const c=o.toBase58();let u=n.get(c);return u===void 0&&(u={isSigner:!1,isWritable:!1,isInvoked:!1},n.set(c,u)),u},i=s(e);i.isSigner=!0,i.isWritable=!0;for(const o of t){s(o.programId).isInvoked=!0;for(const c of o.keys){const u=s(c.pubkey);u.isSigner||=c.isSigner,u.isWritable||=c.isWritable}}return new Vi(e,n)}getMessageComponents(){const t=[...this.keyMetaMap.entries()];Ut(t.length<=256,"Max static account keys length exceeded");const e=t.filter(([,u])=>u.isSigner&&u.isWritable),n=t.filter(([,u])=>u.isSigner&&!u.isWritable),s=t.filter(([,u])=>!u.isSigner&&u.isWritable),i=t.filter(([,u])=>!u.isSigner&&!u.isWritable),o={numRequiredSignatures:e.length+n.length,numReadonlySignedAccounts:n.length,numReadonlyUnsignedAccounts:i.length};{Ut(e.length>0,"Expected at least one writable signer key");const[u]=e[0];Ut(u===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const c=[...e.map(([u])=>new dt(u)),...n.map(([u])=>new dt(u)),...s.map(([u])=>new dt(u)),...i.map(([u])=>new dt(u))];return[o,c]}extractTableLookup(t){const[e,n]=this.drainKeysFoundInLookupTable(t.state.addresses,o=>!o.isSigner&&!o.isInvoked&&o.isWritable),[s,i]=this.drainKeysFoundInLookupTable(t.state.addresses,o=>!o.isSigner&&!o.isInvoked&&!o.isWritable);if(!(e.length===0&&s.length===0))return[{accountKey:t.key,writableIndexes:e,readonlyIndexes:s},{writable:n,readonly:i}]}drainKeysFoundInLookupTable(t,e){const n=new Array,s=new Array;for(const[i,o]of this.keyMetaMap.entries())if(e(o)){const c=new dt(i),u=t.findIndex(p=>p.equals(c));u>=0&&(Ut(u<256,"Max lookup table index exceeded"),n.push(u),s.push(c),this.keyMetaMap.delete(i))}return[n,s]}}const il="Reached end of buffer unexpectedly";function rn(r){if(r.length===0)throw new Error(il);return r.shift()}function Pe(r,...t){const[e]=t;if(t.length===2?e+(t[1]??0)>r.length:e>=r.length)throw new Error(il);return r.splice(...t)}class an{constructor(t){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=t.header,this.accountKeys=t.accountKeys.map(e=>new dt(e)),this.recentBlockhash=t.recentBlockhash,this.instructions=t.instructions,this.instructions.forEach(e=>this.indexToProgramIds.set(e.programIdIndex,this.accountKeys[e.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:ve.decode(t.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new Ui(this.staticAccountKeys)}static compile(t){const e=Vi.compile(t.instructions,t.payerKey),[n,s]=e.getMessageComponents(),o=new Ui(s).compileInstructions(t.instructions).map(c=>({programIdIndex:c.programIdIndex,accounts:c.accountKeyIndexes,data:ve.encode(c.data)}));return new an({header:n,accountKeys:s,recentBlockhash:t.recentBlockhash,instructions:o})}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures;if(t>=this.header.numRequiredSignatures){const n=t-e,i=this.accountKeys.length-e-this.header.numReadonlyUnsignedAccounts;return n<i}else{const n=e-this.header.numReadonlySignedAccounts;return t<n}}isProgramId(t){return this.indexToProgramIds.has(t)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((t,e)=>!this.isProgramId(e))}serialize(){const t=this.accountKeys.length;let e=[];Fe(e,t);const n=this.instructions.map(_=>{const{accounts:A,programIdIndex:b}=_,B=Array.from(ve.decode(_.data));let M=[];Fe(M,A.length);let C=[];return Fe(C,B.length),{programIdIndex:b,keyIndicesCount:bt.Buffer.from(M),keyIndices:A,dataLength:bt.Buffer.from(C),data:B}});let s=[];Fe(s,n.length);let i=bt.Buffer.alloc(fr);bt.Buffer.from(s).copy(i);let o=s.length;n.forEach(_=>{const b=F.struct([F.u8("programIdIndex"),F.blob(_.keyIndicesCount.length,"keyIndicesCount"),F.seq(F.u8("keyIndex"),_.keyIndices.length,"keyIndices"),F.blob(_.dataLength.length,"dataLength"),F.seq(F.u8("userdatum"),_.data.length,"data")]).encode(_,i,o);o+=b}),i=i.slice(0,o);const c=F.struct([F.blob(1,"numRequiredSignatures"),F.blob(1,"numReadonlySignedAccounts"),F.blob(1,"numReadonlyUnsignedAccounts"),F.blob(e.length,"keyCount"),F.seq(vt("key"),t,"keys"),vt("recentBlockhash")]),u={numRequiredSignatures:bt.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:bt.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:bt.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:bt.Buffer.from(e),keys:this.accountKeys.map(_=>mr(_.toBytes())),recentBlockhash:ve.decode(this.recentBlockhash)};let p=bt.Buffer.alloc(2048);const y=c.encode(u,p);return i.copy(p,y),p.slice(0,y+i.length)}static from(t){let e=[...t];const n=rn(e);if(n!==(n&fa))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const s=rn(e),i=rn(e),o=Oe(e);let c=[];for(let A=0;A<o;A++){const b=Pe(e,0,_n);c.push(new dt(bt.Buffer.from(b)))}const u=Pe(e,0,_n),p=Oe(e);let y=[];for(let A=0;A<p;A++){const b=rn(e),B=Oe(e),M=Pe(e,0,B),C=Oe(e),O=Pe(e,0,C),D=ve.encode(bt.Buffer.from(O));y.push({programIdIndex:b,accounts:M,data:D})}const _={header:{numRequiredSignatures:n,numReadonlySignedAccounts:s,numReadonlyUnsignedAccounts:i},recentBlockhash:ve.encode(bt.Buffer.from(u)),accountKeys:c,instructions:y};return new an(_)}}class Nr{constructor(t){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=t.header,this.staticAccountKeys=t.staticAccountKeys,this.recentBlockhash=t.recentBlockhash,this.compiledInstructions=t.compiledInstructions,this.addressTableLookups=t.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let t=0;for(const e of this.addressTableLookups)t+=e.readonlyIndexes.length+e.writableIndexes.length;return t}getAccountKeys(t){let e;if(t&&"accountKeysFromLookups"in t&&t.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=t.accountKeysFromLookups.writable.length+t.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");e=t.accountKeysFromLookups}else if(t&&"addressLookupTableAccounts"in t&&t.addressLookupTableAccounts)e=this.resolveAddressTableLookups(t.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new Ui(this.staticAccountKeys,e)}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures,n=this.staticAccountKeys.length;if(t>=n){const s=t-n,i=this.addressTableLookups.reduce((o,c)=>o+c.writableIndexes.length,0);return s<i}else if(t>=this.header.numRequiredSignatures){const s=t-e,o=n-e-this.header.numReadonlyUnsignedAccounts;return s<o}else{const s=e-this.header.numReadonlySignedAccounts;return t<s}}resolveAddressTableLookups(t){const e={writable:[],readonly:[]};for(const n of this.addressTableLookups){const s=t.find(i=>i.key.equals(n.accountKey));if(!s)throw new Error(`Failed to find address lookup table account for table key ${n.accountKey.toBase58()}`);for(const i of n.writableIndexes)if(i<s.state.addresses.length)e.writable.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${n.accountKey.toBase58()}`);for(const i of n.readonlyIndexes)if(i<s.state.addresses.length)e.readonly.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${n.accountKey.toBase58()}`)}return e}static compile(t){const e=Vi.compile(t.instructions,t.payerKey),n=new Array,s={writable:new Array,readonly:new Array},i=t.addressLookupTableAccounts||[];for(const y of i){const _=e.extractTableLookup(y);if(_!==void 0){const[A,{writable:b,readonly:B}]=_;n.push(A),s.writable.push(...b),s.readonly.push(...B)}}const[o,c]=e.getMessageComponents(),p=new Ui(c,s).compileInstructions(t.instructions);return new Nr({header:o,staticAccountKeys:c,recentBlockhash:t.recentBlockhash,compiledInstructions:p,addressTableLookups:n})}serialize(){const t=Array();Fe(t,this.staticAccountKeys.length);const e=this.serializeInstructions(),n=Array();Fe(n,this.compiledInstructions.length);const s=this.serializeAddressTableLookups(),i=Array();Fe(i,this.addressTableLookups.length);const o=F.struct([F.u8("prefix"),F.struct([F.u8("numRequiredSignatures"),F.u8("numReadonlySignedAccounts"),F.u8("numReadonlyUnsignedAccounts")],"header"),F.blob(t.length,"staticAccountKeysLength"),F.seq(vt(),this.staticAccountKeys.length,"staticAccountKeys"),vt("recentBlockhash"),F.blob(n.length,"instructionsLength"),F.blob(e.length,"serializedInstructions"),F.blob(i.length,"addressTableLookupsLength"),F.blob(s.length,"serializedAddressTableLookups")]),c=new Uint8Array(fr),p=o.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(t),staticAccountKeys:this.staticAccountKeys.map(y=>y.toBytes()),recentBlockhash:ve.decode(this.recentBlockhash),instructionsLength:new Uint8Array(n),serializedInstructions:e,addressTableLookupsLength:new Uint8Array(i),serializedAddressTableLookups:s},c);return c.slice(0,p)}serializeInstructions(){let t=0;const e=new Uint8Array(fr);for(const n of this.compiledInstructions){const s=Array();Fe(s,n.accountKeyIndexes.length);const i=Array();Fe(i,n.data.length);const o=F.struct([F.u8("programIdIndex"),F.blob(s.length,"encodedAccountKeyIndexesLength"),F.seq(F.u8(),n.accountKeyIndexes.length,"accountKeyIndexes"),F.blob(i.length,"encodedDataLength"),F.blob(n.data.length,"data")]);t+=o.encode({programIdIndex:n.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(s),accountKeyIndexes:n.accountKeyIndexes,encodedDataLength:new Uint8Array(i),data:n.data},e,t)}return e.slice(0,t)}serializeAddressTableLookups(){let t=0;const e=new Uint8Array(fr);for(const n of this.addressTableLookups){const s=Array();Fe(s,n.writableIndexes.length);const i=Array();Fe(i,n.readonlyIndexes.length);const o=F.struct([vt("accountKey"),F.blob(s.length,"encodedWritableIndexesLength"),F.seq(F.u8(),n.writableIndexes.length,"writableIndexes"),F.blob(i.length,"encodedReadonlyIndexesLength"),F.seq(F.u8(),n.readonlyIndexes.length,"readonlyIndexes")]);t+=o.encode({accountKey:n.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(s),writableIndexes:n.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(i),readonlyIndexes:n.readonlyIndexes},e,t)}return e.slice(0,t)}static deserialize(t){let e=[...t];const n=rn(e),s=n&fa;Ut(n!==s,"Expected versioned message but received legacy message");const i=s;Ut(i===0,`Expected versioned message with version 0 but found version ${i}`);const o={numRequiredSignatures:rn(e),numReadonlySignedAccounts:rn(e),numReadonlyUnsignedAccounts:rn(e)},c=[],u=Oe(e);for(let B=0;B<u;B++)c.push(new dt(Pe(e,0,_n)));const p=ve.encode(Pe(e,0,_n)),y=Oe(e),_=[];for(let B=0;B<y;B++){const M=rn(e),C=Oe(e),O=Pe(e,0,C),D=Oe(e),N=new Uint8Array(Pe(e,0,D));_.push({programIdIndex:M,accountKeyIndexes:O,data:N})}const A=Oe(e),b=[];for(let B=0;B<A;B++){const M=new dt(Pe(e,0,_n)),C=Oe(e),O=Pe(e,0,C),D=Oe(e),N=Pe(e,0,D);b.push({accountKey:M,writableIndexes:O,readonlyIndexes:N})}return new Nr({header:o,staticAccountKeys:c,recentBlockhash:p,compiledInstructions:_,addressTableLookups:b})}}const ha={deserializeMessageVersion(r){const t=r[0],e=t&fa;return e===t?"legacy":e},deserialize:r=>{const t=ha.deserializeMessageVersion(r);if(t==="legacy")return an.from(r);if(t===0)return Nr.deserialize(r);throw new Error(`Transaction message version ${t} deserialization is not supported`)}};let pn=(function(r){return r[r.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",r[r.PROCESSED=1]="PROCESSED",r[r.TIMED_OUT=2]="TIMED_OUT",r[r.NONCE_INVALID=3]="NONCE_INVALID",r})({});const Td=bt.Buffer.alloc(Li).fill(0);class cc{constructor(t){this.keys=void 0,this.programId=void 0,this.data=bt.Buffer.alloc(0),this.programId=t.programId,this.keys=t.keys,t.data&&(this.data=t.data)}toJSON(){return{keys:this.keys.map(({pubkey:t,isSigner:e,isWritable:n})=>({pubkey:t.toJSON(),isSigner:e,isWritable:n})),programId:this.programId.toJSON(),data:[...this.data]}}}class ze{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(t){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!t)if(t.feePayer&&(this.feePayer=t.feePayer),t.signatures&&(this.signatures=t.signatures),Object.prototype.hasOwnProperty.call(t,"nonceInfo")){const{minContextSlot:e,nonceInfo:n}=t;this.minNonceContextSlot=e,this.nonceInfo=n}else if(Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")){const{blockhash:e,lastValidBlockHeight:n}=t;this.recentBlockhash=e,this.lastValidBlockHeight=n}else{const{recentBlockhash:e,nonceInfo:n}=t;n&&(this.nonceInfo=n),this.recentBlockhash=e}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(t=>t.toJSON()),signers:this.signatures.map(({publicKey:t})=>t.toJSON())}}add(...t){if(t.length===0)throw new Error("No instructions");return t.forEach(e=>{"instructions"in e?this.instructions=this.instructions.concat(e.instructions):"data"in e&&"programId"in e&&"keys"in e?this.instructions.push(e):this.instructions.push(new cc(e))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let t,e;if(this.nonceInfo?(t=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?e=[this.nonceInfo.nonceInstruction,...this.instructions]:e=this.instructions):(t=this.recentBlockhash,e=this.instructions),!t)throw new Error("Transaction recentBlockhash required");e.length<1&&console.warn("No instructions provided");let n;if(this.feePayer)n=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)n=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let M=0;M<e.length;M++)if(e[M].programId===void 0)throw new Error(`Transaction instruction index ${M} has undefined program id`);const s=[],i=[];e.forEach(M=>{M.keys.forEach(O=>{i.push({...O})});const C=M.programId.toString();s.includes(C)||s.push(C)}),s.forEach(M=>{i.push({pubkey:new dt(M),isSigner:!1,isWritable:!1})});const o=[];i.forEach(M=>{const C=M.pubkey.toString(),O=o.findIndex(D=>D.pubkey.toString()===C);O>-1?(o[O].isWritable=o[O].isWritable||M.isWritable,o[O].isSigner=o[O].isSigner||M.isSigner):o.push(M)}),o.sort(function(M,C){if(M.isSigner!==C.isSigner)return M.isSigner?-1:1;if(M.isWritable!==C.isWritable)return M.isWritable?-1:1;const O={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return M.pubkey.toBase58().localeCompare(C.pubkey.toBase58(),"en",O)});const c=o.findIndex(M=>M.pubkey.equals(n));if(c>-1){const[M]=o.splice(c,1);M.isSigner=!0,M.isWritable=!0,o.unshift(M)}else o.unshift({pubkey:n,isSigner:!0,isWritable:!0});for(const M of this.signatures){const C=o.findIndex(O=>O.pubkey.equals(M.publicKey));if(C>-1)o[C].isSigner||(o[C].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${M.publicKey.toString()}`)}let u=0,p=0,y=0;const _=[],A=[];o.forEach(({pubkey:M,isSigner:C,isWritable:O})=>{C?(_.push(M.toString()),u+=1,O||(p+=1)):(A.push(M.toString()),O||(y+=1))});const b=_.concat(A),B=e.map(M=>{const{data:C,programId:O}=M;return{programIdIndex:b.indexOf(O.toString()),accounts:M.keys.map(D=>b.indexOf(D.pubkey.toString())),data:ve.encode(C)}});return B.forEach(M=>{Ut(M.programIdIndex>=0),M.accounts.forEach(C=>Ut(C>=0))}),new an({header:{numRequiredSignatures:u,numReadonlySignedAccounts:p,numReadonlyUnsignedAccounts:y},accountKeys:b,recentBlockhash:t,instructions:B})}_compile(){const t=this.compileMessage(),e=t.accountKeys.slice(0,t.header.numRequiredSignatures);return this.signatures.length===e.length&&this.signatures.every((s,i)=>e[i].equals(s.publicKey))||(this.signatures=e.map(n=>({signature:null,publicKey:n}))),t}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(t){return(await t.getFeeForMessage(this.compileMessage())).value}setSigners(...t){if(t.length===0)throw new Error("No signers");const e=new Set;this.signatures=t.filter(n=>{const s=n.toString();return e.has(s)?!1:(e.add(s),!0)}).map(n=>({signature:null,publicKey:n}))}sign(...t){if(t.length===0)throw new Error("No signers");const e=new Set,n=[];for(const i of t){const o=i.publicKey.toString();e.has(o)||(e.add(o),n.push(i))}this.signatures=n.map(i=>({signature:null,publicKey:i.publicKey}));const s=this._compile();this._partialSign(s,...n)}partialSign(...t){if(t.length===0)throw new Error("No signers");const e=new Set,n=[];for(const i of t){const o=i.publicKey.toString();e.has(o)||(e.add(o),n.push(i))}const s=this._compile();this._partialSign(s,...n)}_partialSign(t,...e){const n=t.serialize();e.forEach(s=>{const i=tl(n,s.secretKey);this._addSignature(s.publicKey,mr(i))})}addSignature(t,e){this._compile(),this._addSignature(t,e)}_addSignature(t,e){Ut(e.length===64);const n=this.signatures.findIndex(s=>t.equals(s.publicKey));if(n<0)throw new Error(`unknown signer: ${t.toString()}`);this.signatures[n].signature=bt.Buffer.from(e)}verifySignatures(t=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),t)}_getMessageSignednessErrors(t,e){const n={};for(const{signature:s,publicKey:i}of this.signatures)s===null?e&&(n.missing||=[]).push(i):Sd(s,t,i.toBytes())||(n.invalid||=[]).push(i);return n.invalid||n.missing?n:void 0}serialize(t){const{requireAllSignatures:e,verifySignatures:n}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},t),s=this.serializeMessage();if(n){const i=this._getMessageSignednessErrors(s,e);if(i){let o="Signature verification failed.";throw i.invalid&&(o+=`
Invalid signature for public key${i.invalid.length===1?"":"(s)"} [\`${i.invalid.map(c=>c.toBase58()).join("`, `")}\`].`),i.missing&&(o+=`
Missing signature for public key${i.missing.length===1?"":"(s)"} [\`${i.missing.map(c=>c.toBase58()).join("`, `")}\`].`),new Error(o)}}return this._serialize(s)}_serialize(t){const{signatures:e}=this,n=[];Fe(n,e.length);const s=n.length+e.length*64+t.length,i=bt.Buffer.alloc(s);return Ut(e.length<256),bt.Buffer.from(n).copy(i,0),e.forEach(({signature:o},c)=>{o!==null&&(Ut(o.length===64,"signature has invalid length"),bt.Buffer.from(o).copy(i,n.length+c*64))}),t.copy(i,n.length+e.length*64),Ut(i.length<=fr,`Transaction too large: ${i.length} > ${fr}`),i}get keys(){return Ut(this.instructions.length===1),this.instructions[0].keys.map(t=>t.pubkey)}get programId(){return Ut(this.instructions.length===1),this.instructions[0].programId}get data(){return Ut(this.instructions.length===1),this.instructions[0].data}static from(t){let e=[...t];const n=Oe(e);let s=[];for(let i=0;i<n;i++){const o=Pe(e,0,Li);s.push(ve.encode(bt.Buffer.from(o)))}return ze.populate(an.from(e),s)}static populate(t,e=[]){const n=new ze;return n.recentBlockhash=t.recentBlockhash,t.header.numRequiredSignatures>0&&(n.feePayer=t.accountKeys[0]),e.forEach((s,i)=>{const o={signature:s==ve.encode(Td)?null:ve.decode(s),publicKey:t.accountKeys[i]};n.signatures.push(o)}),t.instructions.forEach(s=>{const i=s.accounts.map(o=>{const c=t.accountKeys[o];return{pubkey:c,isSigner:n.signatures.some(u=>u.publicKey.toString()===c.toString())||t.isAccountSigner(o),isWritable:t.isAccountWritable(o)}});n.instructions.push(new cc({keys:i,programId:t.accountKeys[s.programIdIndex],data:ve.decode(s.data)}))}),n._message=t,n._json=n.toJSON(),n}}class Or{get version(){return this.message.version}constructor(t,e){if(this.signatures=void 0,this.message=void 0,e!==void 0)Ut(e.length===t.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=e;else{const n=[];for(let s=0;s<t.header.numRequiredSignatures;s++)n.push(new Uint8Array(Li));this.signatures=n}this.message=t}serialize(){const t=this.message.serialize(),e=Array();Fe(e,this.signatures.length);const n=F.struct([F.blob(e.length,"encodedSignaturesLength"),F.seq(Bd(),this.signatures.length,"signatures"),F.blob(t.length,"serializedMessage")]),s=new Uint8Array(2048),i=n.encode({encodedSignaturesLength:new Uint8Array(e),signatures:this.signatures,serializedMessage:t},s);return s.slice(0,i)}static deserialize(t){let e=[...t];const n=[],s=Oe(e);for(let o=0;o<s;o++)n.push(new Uint8Array(Pe(e,0,Li)));const i=ha.deserialize(new Uint8Array(e));return new Or(i,n)}sign(t){const e=this.message.serialize(),n=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const s of t){const i=n.findIndex(o=>o.equals(s.publicKey));Ut(i>=0,`Cannot sign with non signer key ${s.publicKey.toBase58()}`),this.signatures[i]=tl(e,s.secretKey)}}addSignature(t,e){Ut(e.byteLength===64,"Signature must be 64 bytes long");const s=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(i=>i.equals(t));Ut(s>=0,`Can not add signature; \`${t.toBase58()}\` is not required to sign this transaction`),this.signatures[s]=e}}const Cd=160,Ld=64,Ud=Cd/Ld,Nd=1e3/Ud;new dt("SysvarC1ock11111111111111111111111111111111");new dt("SysvarEpochSchedu1e111111111111111111111111");new dt("Sysvar1nstructions1111111111111111111111111");new dt("SysvarRecentB1ockHashes11111111111111111111");new dt("SysvarRent111111111111111111111111111111111");new dt("SysvarRewards111111111111111111111111111111");new dt("SysvarS1otHashes111111111111111111111111111");new dt("SysvarS1otHistory11111111111111111111111111");new dt("SysvarStakeHistory1111111111111111111111111");class uc extends Error{constructor({action:t,signature:e,transactionMessage:n,logs:s}){const i=s?`Logs: 
${JSON.stringify(s.slice(-10),null,2)}. `:"",o="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let c;switch(t){case"send":c=`Transaction ${e} resulted in an error. 
${n}. `+i+o;break;case"simulate":c=`Simulation failed. 
Message: ${n}. 
`+i+o;break;default:c=`Unknown action '${(u=>u)(t)}'`}super(c),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=e,this.transactionMessage=n,this.transactionLogs=s||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const t=this.transactionLogs;if(!(t!=null&&typeof t=="object"&&"then"in t))return t}async getLogs(t){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((e,n)=>{t.getTransaction(this.signature).then(s=>{if(s&&s.meta&&s.meta.logMessages){const i=s.meta.logMessages;this.transactionLogs=i,e(i)}else n(new Error("Log messages not found"))}).catch(n)})),await this.transactionLogs}}class ut extends Error{constructor({code:t,message:e,data:n},s){super(s!=null?`${s}: ${e}`:e),this.code=void 0,this.data=void 0,this.code=t,this.data=n,this.name="SolanaJSONRPCError"}}function Qn(r){return new Promise(t=>setTimeout(t,r))}const Od=F.nu64("lamportsPerSignature"),sl=F.struct([F.u32("version"),F.u32("state"),vt("authorizedPubkey"),vt("nonce"),F.struct([Od],"feeCalculator")]);sl.span;class da{constructor(t){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=t.authorizedPubkey,this.nonce=t.nonce,this.feeCalculator=t.feeCalculator}static fromAccountData(t){const e=sl.decode(mr(t),0);return new da({authorizedPubkey:new dt(e.authorizedPubkey),nonce:new dt(e.nonce).toString(),feeCalculator:e.feeCalculator})}}function wr(r){const t=F.blob(8,r),e=t.decode.bind(t),n=t.encode.bind(t),s=t,i=xh();return s.decode=(o,c)=>{const u=e(o,c);return i.decode(u)},s.encode=(o,c,u)=>{const p=i.encode(o);return n(p,c,u)},s}Object.freeze({Create:{index:0,layout:F.struct([F.u32("instruction"),F.ns64("lamports"),F.ns64("space"),vt("programId")])},Assign:{index:1,layout:F.struct([F.u32("instruction"),vt("programId")])},Transfer:{index:2,layout:F.struct([F.u32("instruction"),wr("lamports")])},CreateWithSeed:{index:3,layout:F.struct([F.u32("instruction"),vt("base"),or("seed"),F.ns64("lamports"),F.ns64("space"),vt("programId")])},AdvanceNonceAccount:{index:4,layout:F.struct([F.u32("instruction")])},WithdrawNonceAccount:{index:5,layout:F.struct([F.u32("instruction"),F.ns64("lamports")])},InitializeNonceAccount:{index:6,layout:F.struct([F.u32("instruction"),vt("authorized")])},AuthorizeNonceAccount:{index:7,layout:F.struct([F.u32("instruction"),vt("authorized")])},Allocate:{index:8,layout:F.struct([F.u32("instruction"),F.ns64("space")])},AllocateWithSeed:{index:9,layout:F.struct([F.u32("instruction"),vt("base"),or("seed"),F.ns64("space"),vt("programId")])},AssignWithSeed:{index:10,layout:F.struct([F.u32("instruction"),vt("base"),or("seed"),vt("programId")])},TransferWithSeed:{index:11,layout:F.struct([F.u32("instruction"),wr("lamports"),or("seed"),vt("programId")])},UpgradeNonceAccount:{index:12,layout:F.struct([F.u32("instruction")])}});new dt("11111111111111111111111111111111");new dt("BPFLoader2111111111111111111111111111111111");function Fd(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Ds,lc;function Pd(){if(lc)return Ds;lc=1;var r=Object.prototype.toString,t=Object.keys||function(n){var s=[];for(var i in n)s.push(i);return s};function e(n,s){var i,o,c,u,p,y,_;if(n===!0)return"true";if(n===!1)return"false";switch(typeof n){case"object":if(n===null)return null;if(n.toJSON&&typeof n.toJSON=="function")return e(n.toJSON(),s);if(_=r.call(n),_==="[object Array]"){for(c="[",o=n.length-1,i=0;i<o;i++)c+=e(n[i],!0)+",";return o>-1&&(c+=e(n[i],!0)),c+"]"}else if(_==="[object Object]"){for(u=t(n).sort(),o=u.length,c="",i=0;i<o;)p=u[i],y=e(n[p],!1),y!==void 0&&(c&&(c+=","),c+=JSON.stringify(p)+":"+y),i++;return"{"+c+"}"}else return JSON.stringify(n);case"function":case"undefined":return s?null:void 0;case"string":return JSON.stringify(n);default:return isFinite(n)?n:null}}return Ds=function(n){var s=e(n,!1);if(s!==void 0)return""+s},Ds}var Dd=Pd(),fc=Fd(Dd);const Er=32;function Ws(r){let t=0;for(;r>1;)r/=2,t++;return t}function Wd(r){return r===0?1:(r--,r|=r>>1,r|=r>>2,r|=r>>4,r|=r>>8,r|=r>>16,r|=r>>32,r+1)}class qd{constructor(t,e,n,s,i){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=t,this.leaderScheduleSlotOffset=e,this.warmup=n,this.firstNormalEpoch=s,this.firstNormalSlot=i}getEpoch(t){return this.getEpochAndSlotIndex(t)[0]}getEpochAndSlotIndex(t){if(t<this.firstNormalSlot){const e=Ws(Wd(t+Er+1))-Ws(Er)-1,n=this.getSlotsInEpoch(e),s=t-(n-Er);return[e,s]}else{const e=t-this.firstNormalSlot,n=Math.floor(e/this.slotsPerEpoch),s=this.firstNormalEpoch+n,i=e%this.slotsPerEpoch;return[s,i]}}getFirstSlotInEpoch(t){return t<=this.firstNormalEpoch?(Math.pow(2,t)-1)*Er:(t-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(t){return this.getFirstSlotInEpoch(t)+this.getSlotsInEpoch(t)-1}getSlotsInEpoch(t){return t<this.firstNormalEpoch?Math.pow(2,t+Ws(Er)):this.slotsPerEpoch}}var zd=globalThis.fetch;class Kd extends ad{constructor(t,e,n){const s=i=>{const o=sd(i,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...e});return"socket"in o?this.underlyingSocket=o.socket:this.underlyingSocket=o,o};super(s,t,e,n),this.underlyingSocket=void 0}call(...t){const e=this.underlyingSocket?.readyState;return e===1?super.call(...t):Promise.reject(new Error("Tried to call a JSON-RPC method `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}notify(...t){const e=this.underlyingSocket?.readyState;return e===1?super.notify(...t):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}}function $d(r,t){let e;try{e=r.layout.decode(t)}catch(n){throw new Error("invalid instruction; "+n)}if(e.typeIndex!==r.index)throw new Error(`invalid account data; account type mismatch ${e.typeIndex} != ${r.index}`);return e}const hc=56;class dc{constructor(t){this.key=void 0,this.state=void 0,this.key=t.key,this.state=t.state}isActive(){const t=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===t}static deserialize(t){const e=$d(jd,t),n=t.length-hc;Ut(n>=0,"lookup table is invalid"),Ut(n%32===0,"lookup table is invalid");const s=n/32,{addresses:i}=F.struct([F.seq(vt(),s,"addresses")]).decode(t.slice(hc));return{deactivationSlot:e.deactivationSlot,lastExtendedSlot:e.lastExtendedSlot,lastExtendedSlotStartIndex:e.lastExtendedStartIndex,authority:e.authority.length!==0?new dt(e.authority[0]):void 0,addresses:i.map(o=>new dt(o))}}}const jd={index:1,layout:F.struct([F.u32("typeIndex"),wr("deactivationSlot"),F.nu64("lastExtendedSlot"),F.u8("lastExtendedStartIndex"),F.u8(),F.seq(vt(),F.offset(F.u8(),-1),"authority")])},Hd=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function Vd(r){const t=r.match(Hd);if(t==null)throw TypeError(`Failed to validate endpoint URL \`${r}\``);const[e,n,s,i]=t,o=r.startsWith("https:")?"wss:":"ws:",c=s==null?null:parseInt(s.slice(1),10),u=c==null?"":`:${c+1}`;return`${o}//${n}${u}${i}`}const Dt=Hr(aa(dt),rt(),r=>new dt(r)),ol=ca([rt(),Pt("base64")]),ga=Hr(aa(bt.Buffer),ol,r=>bt.Buffer.from(r[0],"base64")),Gd=30*1e3;function Zd(r){if(/^https?:/.test(r)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return r}function Mt(r){let t,e;if(typeof r=="string")t=r;else if(r){const{commitment:n,...s}=r;t=n,e=s}return{commitment:t,config:e}}function gc(r){return r.map(t=>"memcmp"in t?{...t,memcmp:{...t.memcmp,encoding:t.memcmp.encoding??"base58"}}:t)}function al(r){return Ie([et({jsonrpc:Pt("2.0"),id:rt(),result:r}),et({jsonrpc:Pt("2.0"),id:rt(),error:et({code:yr(),message:rt(),data:lt(Th())})})])}const Yd=al(yr());function yt(r){return Hr(al(r),Yd,t=>"error"in t?t:{...t,result:it(t.result,r)})}function Ht(r){return yt(et({context:et({slot:H()}),value:r}))}function Gi(r){return et({context:et({slot:H()}),value:r})}function qs(r,t){return r===0?new Nr({header:t.header,staticAccountKeys:t.accountKeys.map(e=>new dt(e)),recentBlockhash:t.recentBlockhash,compiledInstructions:t.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:ve.decode(e.data)})),addressTableLookups:t.addressTableLookups}):new an(t)}const Jd=et({foundation:H(),foundationTerm:H(),initial:H(),taper:H(),terminal:H()}),Xd=yt(ot(at(et({epoch:H(),effectiveSlot:H(),amount:H(),postBalance:H(),commission:lt(at(H()))})))),Qd=ot(et({slot:H(),prioritizationFee:H()})),t0=et({total:H(),validator:H(),foundation:H(),epoch:H()}),e0=et({epoch:H(),slotIndex:H(),slotsInEpoch:H(),absoluteSlot:H(),blockHeight:lt(H()),transactionCount:lt(H())}),n0=et({slotsPerEpoch:H(),leaderScheduleSlotOffset:H(),warmup:Ze(),firstNormalEpoch:H(),firstNormalSlot:H()}),r0=Ku(rt(),ot(H())),$n=at(Ie([et({}),rt()])),i0=et({err:$n}),s0=Pt("receivedSignature"),o0=et({"solana-core":rt(),"feature-set":lt(H())}),a0=et({program:rt(),programId:Dt,parsed:yr()}),c0=et({programId:Dt,accounts:ot(Dt),data:rt()}),pc=Ht(et({err:at(Ie([et({}),rt()])),logs:at(ot(rt())),accounts:lt(at(ot(at(et({executable:Ze(),owner:rt(),lamports:H(),data:ot(rt()),rentEpoch:lt(H())}))))),unitsConsumed:lt(H()),returnData:lt(at(et({programId:rt(),data:ca([rt(),Pt("base64")])}))),innerInstructions:lt(at(ot(et({index:H(),instructions:ot(Ie([a0,c0]))}))))})),u0=Ht(et({byIdentity:Ku(rt(),ot(H())),range:et({firstSlot:H(),lastSlot:H()})}));function l0(r,t,e,n,s,i){const o=e||zd;let c;i!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let u;return n&&(u=async(y,_)=>{const A=await new Promise((b,B)=>{try{n(y,_,(M,C)=>b([M,C]))}catch(M){B(M)}});return await o(...A)}),new ed(async(y,_)=>{const A={method:"POST",body:y,agent:c,headers:Object.assign({"Content-Type":"application/json"},t||{},lg)};try{let b=5,B,M=500;for(;u?B=await u(r,A):B=await o(r,A),!(B.status!==429||s===!0||(b-=1,b===0));)console.error(`Server responded with ${B.status} ${B.statusText}.  Retrying after ${M}ms delay...`),await Qn(M),M*=2;const C=await B.text();B.ok?_(null,C):_(new Error(`${B.status} ${B.statusText}: ${C}`))}catch(b){b instanceof Error&&_(b)}},{})}function f0(r){return(t,e)=>new Promise((n,s)=>{r.request(t,e,(i,o)=>{if(i){s(i);return}n(o)})})}function h0(r){return t=>new Promise((e,n)=>{t.length===0&&e([]);const s=t.map(i=>r.request(i.methodName,i.args));r.request(s,(i,o)=>{if(i){n(i);return}e(o)})})}const d0=yt(Jd),g0=yt(t0),p0=yt(Qd),m0=yt(e0),w0=yt(n0),y0=yt(r0),b0=yt(H()),v0=Ht(et({total:H(),circulating:H(),nonCirculating:H(),nonCirculatingAccounts:ot(Dt)})),Mo=et({amount:rt(),uiAmount:at(H()),decimals:H(),uiAmountString:lt(rt())}),E0=Ht(ot(et({address:Dt,amount:rt(),uiAmount:at(H()),decimals:H(),uiAmountString:lt(rt())}))),S0=Ht(ot(et({pubkey:Dt,account:et({executable:Ze(),owner:Dt,lamports:H(),data:ga,rentEpoch:H()})}))),Io=et({program:rt(),parsed:yr(),space:H()}),_0=Ht(ot(et({pubkey:Dt,account:et({executable:Ze(),owner:Dt,lamports:H(),data:Io,rentEpoch:H()})}))),x0=Ht(ot(et({lamports:H(),address:Dt}))),Fr=et({executable:Ze(),owner:Dt,lamports:H(),data:ga,rentEpoch:H()}),A0=et({pubkey:Dt,account:Fr}),B0=Hr(Ie([aa(bt.Buffer),Io]),Ie([ol,Io]),r=>Array.isArray(r)?it(r,ga):r),Ro=et({executable:Ze(),owner:Dt,lamports:H(),data:B0,rentEpoch:H()}),M0=et({pubkey:Dt,account:Ro}),I0=et({state:Ie([Pt("active"),Pt("inactive"),Pt("activating"),Pt("deactivating")]),active:H(),inactive:H()}),R0=yt(ot(et({signature:rt(),slot:H(),err:$n,memo:at(rt()),blockTime:lt(at(H()))}))),k0=yt(ot(et({signature:rt(),slot:H(),err:$n,memo:at(rt()),blockTime:lt(at(H()))}))),T0=et({subscription:H(),result:Gi(Fr)}),C0=et({pubkey:Dt,account:Fr}),L0=et({subscription:H(),result:Gi(C0)}),U0=et({parent:H(),slot:H(),root:H()}),N0=et({subscription:H(),result:U0}),O0=Ie([et({type:Ie([Pt("firstShredReceived"),Pt("completed"),Pt("optimisticConfirmation"),Pt("root")]),slot:H(),timestamp:H()}),et({type:Pt("createdBank"),parent:H(),slot:H(),timestamp:H()}),et({type:Pt("frozen"),slot:H(),timestamp:H(),stats:et({numTransactionEntries:H(),numSuccessfulTransactions:H(),numFailedTransactions:H(),maxTransactionsPerEntry:H()})}),et({type:Pt("dead"),slot:H(),timestamp:H(),err:rt()})]),F0=et({subscription:H(),result:O0}),P0=et({subscription:H(),result:Gi(Ie([i0,s0]))}),D0=et({subscription:H(),result:H()}),W0=et({pubkey:rt(),gossip:at(rt()),tpu:at(rt()),rpc:at(rt()),version:at(rt())}),mc=et({votePubkey:rt(),nodePubkey:rt(),activatedStake:H(),epochVoteAccount:Ze(),epochCredits:ot(ca([H(),H(),H()])),commission:H(),lastVote:H(),rootSlot:at(H())}),q0=yt(et({current:ot(mc),delinquent:ot(mc)})),z0=Ie([Pt("processed"),Pt("confirmed"),Pt("finalized")]),K0=et({slot:H(),confirmations:at(H()),err:$n,confirmationStatus:lt(z0)}),$0=Ht(ot(at(K0))),j0=yt(H()),cl=et({accountKey:Dt,writableIndexes:ot(H()),readonlyIndexes:ot(H())}),pa=et({signatures:ot(rt()),message:et({accountKeys:ot(rt()),header:et({numRequiredSignatures:H(),numReadonlySignedAccounts:H(),numReadonlyUnsignedAccounts:H()}),instructions:ot(et({accounts:ot(H()),data:rt(),programIdIndex:H()})),recentBlockhash:rt(),addressTableLookups:lt(ot(cl))})}),ul=et({pubkey:Dt,signer:Ze(),writable:Ze(),source:lt(Ie([Pt("transaction"),Pt("lookupTable")]))}),ll=et({accountKeys:ot(ul),signatures:ot(rt())}),fl=et({parsed:yr(),program:rt(),programId:Dt}),hl=et({accounts:ot(Dt),data:rt(),programId:Dt}),H0=Ie([hl,fl]),V0=Ie([et({parsed:yr(),program:rt(),programId:rt()}),et({accounts:ot(rt()),data:rt(),programId:rt()})]),dl=Hr(H0,V0,r=>"accounts"in r?it(r,hl):it(r,fl)),gl=et({signatures:ot(rt()),message:et({accountKeys:ot(ul),instructions:ot(dl),recentBlockhash:rt(),addressTableLookups:lt(at(ot(cl)))})}),Ni=et({accountIndex:H(),mint:rt(),owner:lt(rt()),programId:lt(rt()),uiTokenAmount:Mo}),pl=et({writable:ot(Dt),readonly:ot(Dt)}),Zi=et({err:$n,fee:H(),innerInstructions:lt(at(ot(et({index:H(),instructions:ot(et({accounts:ot(H()),data:rt(),programIdIndex:H()}))})))),preBalances:ot(H()),postBalances:ot(H()),logMessages:lt(at(ot(rt()))),preTokenBalances:lt(at(ot(Ni))),postTokenBalances:lt(at(ot(Ni))),loadedAddresses:lt(pl),computeUnitsConsumed:lt(H()),costUnits:lt(H())}),ma=et({err:$n,fee:H(),innerInstructions:lt(at(ot(et({index:H(),instructions:ot(dl)})))),preBalances:ot(H()),postBalances:ot(H()),logMessages:lt(at(ot(rt()))),preTokenBalances:lt(at(ot(Ni))),postTokenBalances:lt(at(ot(Ni))),loadedAddresses:lt(pl),computeUnitsConsumed:lt(H()),costUnits:lt(H())}),br=Ie([Pt(0),Pt("legacy")]),jn=et({pubkey:rt(),lamports:H(),postBalance:at(H()),rewardType:at(rt()),commission:lt(at(H()))}),G0=yt(at(et({blockhash:rt(),previousBlockhash:rt(),parentSlot:H(),transactions:ot(et({transaction:pa,meta:at(Zi),version:lt(br)})),rewards:lt(ot(jn)),blockTime:at(H()),blockHeight:at(H())}))),Z0=yt(at(et({blockhash:rt(),previousBlockhash:rt(),parentSlot:H(),rewards:lt(ot(jn)),blockTime:at(H()),blockHeight:at(H())}))),Y0=yt(at(et({blockhash:rt(),previousBlockhash:rt(),parentSlot:H(),transactions:ot(et({transaction:ll,meta:at(Zi),version:lt(br)})),rewards:lt(ot(jn)),blockTime:at(H()),blockHeight:at(H())}))),J0=yt(at(et({blockhash:rt(),previousBlockhash:rt(),parentSlot:H(),transactions:ot(et({transaction:gl,meta:at(ma),version:lt(br)})),rewards:lt(ot(jn)),blockTime:at(H()),blockHeight:at(H())}))),X0=yt(at(et({blockhash:rt(),previousBlockhash:rt(),parentSlot:H(),transactions:ot(et({transaction:ll,meta:at(ma),version:lt(br)})),rewards:lt(ot(jn)),blockTime:at(H()),blockHeight:at(H())}))),Q0=yt(at(et({blockhash:rt(),previousBlockhash:rt(),parentSlot:H(),rewards:lt(ot(jn)),blockTime:at(H()),blockHeight:at(H())}))),tg=yt(at(et({blockhash:rt(),previousBlockhash:rt(),parentSlot:H(),transactions:ot(et({transaction:pa,meta:at(Zi)})),rewards:lt(ot(jn)),blockTime:at(H())}))),wc=yt(at(et({blockhash:rt(),previousBlockhash:rt(),parentSlot:H(),signatures:ot(rt()),blockTime:at(H())}))),zs=yt(at(et({slot:H(),meta:at(Zi),blockTime:lt(at(H())),transaction:pa,version:lt(br)}))),ri=yt(at(et({slot:H(),transaction:gl,meta:at(ma),blockTime:lt(at(H())),version:lt(br)}))),eg=Ht(et({blockhash:rt(),lastValidBlockHeight:H()})),ng=Ht(Ze()),rg=et({slot:H(),numTransactions:H(),numSlots:H(),samplePeriodSecs:H()}),ig=yt(ot(rg)),sg=Ht(at(et({feeCalculator:et({lamportsPerSignature:H()})}))),og=yt(rt()),ag=yt(rt()),cg=et({err:$n,logs:ot(rt()),signature:rt()}),ug=et({result:Gi(cg),subscription:H()}),lg={"solana-client":"js/1.0.0-maintenance"};class fg{constructor(t,e){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const p={};return async y=>{const{commitment:_,config:A}=Mt(y),b=this._buildArgs([],_,void 0,A),B=fc(b);return p[B]=p[B]??(async()=>{try{const M=await this._rpcRequest("getBlockHeight",b),C=it(M,yt(H()));if("error"in C)throw new ut(C.error,"failed to get block height information");return C.result}finally{delete p[B]}})(),await p[B]}})();let n,s,i,o,c,u;e&&typeof e=="string"?this._commitment=e:e&&(this._commitment=e.commitment,this._confirmTransactionInitialTimeout=e.confirmTransactionInitialTimeout,n=e.wsEndpoint,s=e.httpHeaders,i=e.fetch,o=e.fetchMiddleware,c=e.disableRetryOnRateLimit,u=e.httpAgent),this._rpcEndpoint=Zd(t),this._rpcWsEndpoint=n||Vd(t),this._rpcClient=l0(t,s,i,o,c,u),this._rpcRequest=f0(this._rpcClient),this._rpcBatchRequest=h0(this._rpcClient),this._rpcWebSocket=new Kd(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(t,e){const{commitment:n,config:s}=Mt(e),i=this._buildArgs([t.toBase58()],n,void 0,s),o=await this._rpcRequest("getBalance",i),c=it(o,Ht(H()));if("error"in c)throw new ut(c.error,`failed to get balance for ${t.toBase58()}`);return c.result}async getBalance(t,e){return await this.getBalanceAndContext(t,e).then(n=>n.value).catch(n=>{throw new Error("failed to get balance of account "+t.toBase58()+": "+n)})}async getBlockTime(t){const e=await this._rpcRequest("getBlockTime",[t]),n=it(e,yt(at(H())));if("error"in n)throw new ut(n.error,`failed to get block time for slot ${t}`);return n.result}async getMinimumLedgerSlot(){const t=await this._rpcRequest("minimumLedgerSlot",[]),e=it(t,yt(H()));if("error"in e)throw new ut(e.error,"failed to get minimum ledger slot");return e.result}async getFirstAvailableBlock(){const t=await this._rpcRequest("getFirstAvailableBlock",[]),e=it(t,b0);if("error"in e)throw new ut(e.error,"failed to get first available block");return e.result}async getSupply(t){let e={};typeof t=="string"?e={commitment:t}:t?e={...t,commitment:t&&t.commitment||this.commitment}:e={commitment:this.commitment};const n=await this._rpcRequest("getSupply",[e]),s=it(n,v0);if("error"in s)throw new ut(s.error,"failed to get supply");return s.result}async getTokenSupply(t,e){const n=this._buildArgs([t.toBase58()],e),s=await this._rpcRequest("getTokenSupply",n),i=it(s,Ht(Mo));if("error"in i)throw new ut(i.error,"failed to get token supply");return i.result}async getTokenAccountBalance(t,e){const n=this._buildArgs([t.toBase58()],e),s=await this._rpcRequest("getTokenAccountBalance",n),i=it(s,Ht(Mo));if("error"in i)throw new ut(i.error,"failed to get token account balance");return i.result}async getTokenAccountsByOwner(t,e,n){const{commitment:s,config:i}=Mt(n);let o=[t.toBase58()];"mint"in e?o.push({mint:e.mint.toBase58()}):o.push({programId:e.programId.toBase58()});const c=this._buildArgs(o,s,"base64",i),u=await this._rpcRequest("getTokenAccountsByOwner",c),p=it(u,S0);if("error"in p)throw new ut(p.error,`failed to get token accounts owned by account ${t.toBase58()}`);return p.result}async getParsedTokenAccountsByOwner(t,e,n){let s=[t.toBase58()];"mint"in e?s.push({mint:e.mint.toBase58()}):s.push({programId:e.programId.toBase58()});const i=this._buildArgs(s,n,"jsonParsed"),o=await this._rpcRequest("getTokenAccountsByOwner",i),c=it(o,_0);if("error"in c)throw new ut(c.error,`failed to get token accounts owned by account ${t.toBase58()}`);return c.result}async getLargestAccounts(t){const e={...t,commitment:t&&t.commitment||this.commitment},n=e.filter||e.commitment?[e]:[],s=await this._rpcRequest("getLargestAccounts",n),i=it(s,x0);if("error"in i)throw new ut(i.error,"failed to get largest accounts");return i.result}async getTokenLargestAccounts(t,e){const n=this._buildArgs([t.toBase58()],e),s=await this._rpcRequest("getTokenLargestAccounts",n),i=it(s,E0);if("error"in i)throw new ut(i.error,"failed to get token largest accounts");return i.result}async getAccountInfoAndContext(t,e){const{commitment:n,config:s}=Mt(e),i=this._buildArgs([t.toBase58()],n,"base64",s),o=await this._rpcRequest("getAccountInfo",i),c=it(o,Ht(at(Fr)));if("error"in c)throw new ut(c.error,`failed to get info about account ${t.toBase58()}`);return c.result}async getParsedAccountInfo(t,e){const{commitment:n,config:s}=Mt(e),i=this._buildArgs([t.toBase58()],n,"jsonParsed",s),o=await this._rpcRequest("getAccountInfo",i),c=it(o,Ht(at(Ro)));if("error"in c)throw new ut(c.error,`failed to get info about account ${t.toBase58()}`);return c.result}async getAccountInfo(t,e){try{return(await this.getAccountInfoAndContext(t,e)).value}catch(n){throw new Error("failed to get info about account "+t.toBase58()+": "+n)}}async getMultipleParsedAccounts(t,e){const{commitment:n,config:s}=Mt(e),i=t.map(p=>p.toBase58()),o=this._buildArgs([i],n,"jsonParsed",s),c=await this._rpcRequest("getMultipleAccounts",o),u=it(c,Ht(ot(at(Ro))));if("error"in u)throw new ut(u.error,`failed to get info for accounts ${i}`);return u.result}async getMultipleAccountsInfoAndContext(t,e){const{commitment:n,config:s}=Mt(e),i=t.map(p=>p.toBase58()),o=this._buildArgs([i],n,"base64",s),c=await this._rpcRequest("getMultipleAccounts",o),u=it(c,Ht(ot(at(Fr))));if("error"in u)throw new ut(u.error,`failed to get info for accounts ${i}`);return u.result}async getMultipleAccountsInfo(t,e){return(await this.getMultipleAccountsInfoAndContext(t,e)).value}async getStakeActivation(t,e,n){const{commitment:s,config:i}=Mt(e),o=this._buildArgs([t.toBase58()],s,void 0,{...i,epoch:n??i?.epoch}),c=await this._rpcRequest("getStakeActivation",o),u=it(c,yt(I0));if("error"in u)throw new ut(u.error,`failed to get Stake Activation ${t.toBase58()}`);return u.result}async getProgramAccounts(t,e){const{commitment:n,config:s}=Mt(e),{encoding:i,...o}=s||{},c=this._buildArgs([t.toBase58()],n,i||"base64",{...o,...o.filters?{filters:gc(o.filters)}:null}),u=await this._rpcRequest("getProgramAccounts",c),p=ot(A0),y=o.withContext===!0?it(u,Ht(p)):it(u,yt(p));if("error"in y)throw new ut(y.error,`failed to get accounts owned by program ${t.toBase58()}`);return y.result}async getParsedProgramAccounts(t,e){const{commitment:n,config:s}=Mt(e),i=this._buildArgs([t.toBase58()],n,"jsonParsed",s),o=await this._rpcRequest("getProgramAccounts",i),c=it(o,yt(ot(M0)));if("error"in c)throw new ut(c.error,`failed to get accounts owned by program ${t.toBase58()}`);return c.result}async confirmTransaction(t,e){let n;if(typeof t=="string")n=t;else{const i=t;if(i.abortSignal?.aborted)return Promise.reject(i.abortSignal.reason);n=i.signature}let s;try{s=ve.decode(n)}catch{throw new Error("signature must be base58 encoded: "+n)}return Ut(s.length===64,"signature has invalid length"),typeof t=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:e||this.commitment,signature:n}):"lastValidBlockHeight"in t?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e||this.commitment,strategy:t}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:e||this.commitment,strategy:t})}getCancellationPromise(t){return new Promise((e,n)=>{t!=null&&(t.aborted?n(t.reason):t.addEventListener("abort",()=>{n(t.reason)}))})}getTransactionConfirmationPromise({commitment:t,signature:e}){let n,s,i=!1;const o=new Promise((u,p)=>{try{n=this.onSignature(e,(_,A)=>{n=void 0;const b={context:A,value:_};u({__type:pn.PROCESSED,response:b})},t);const y=new Promise(_=>{n==null?_():s=this._onSubscriptionStateChange(n,A=>{A==="subscribed"&&_()})});(async()=>{if(await y,i)return;const _=await this.getSignatureStatus(e);if(i||_==null)return;const{context:A,value:b}=_;if(b!=null)if(b?.err)p(b.err);else{switch(t){case"confirmed":case"single":case"singleGossip":{if(b.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(b.confirmationStatus==="processed"||b.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}i=!0,u({__type:pn.PROCESSED,response:{context:A,value:b}})}})()}catch(y){p(y)}});return{abortConfirmation:()=>{s&&(s(),s=void 0),n!=null&&(this.removeSignatureListener(n),n=void 0)},confirmationPromise:o}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t,strategy:{abortSignal:e,lastValidBlockHeight:n,signature:s}}){let i=!1;const o=new Promise(_=>{const A=async()=>{try{return await this.getBlockHeight(t)}catch{return-1}};(async()=>{let b=await A();if(!i){for(;b<=n;)if(await Qn(1e3),i||(b=await A(),i))return;_({__type:pn.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:c,confirmationPromise:u}=this.getTransactionConfirmationPromise({commitment:t,signature:s}),p=this.getCancellationPromise(e);let y;try{const _=await Promise.race([p,u,o]);if(_.__type===pn.PROCESSED)y=_.response;else throw new nl(s)}finally{i=!0,c()}return y}async confirmTransactionUsingDurableNonceStrategy({commitment:t,strategy:{abortSignal:e,minContextSlot:n,nonceAccountPubkey:s,nonceValue:i,signature:o}}){let c=!1;const u=new Promise(b=>{let B=i,M=null;const C=async()=>{try{const{context:O,value:D}=await this.getNonceAndContext(s,{commitment:t,minContextSlot:n});return M=O.slot,D?.nonce}catch{return B}};(async()=>{if(B=await C(),!c)for(;;){if(i!==B){b({__type:pn.NONCE_INVALID,slotInWhichNonceDidAdvance:M});return}if(await Qn(2e3),c||(B=await C(),c))return}})()}),{abortConfirmation:p,confirmationPromise:y}=this.getTransactionConfirmationPromise({commitment:t,signature:o}),_=this.getCancellationPromise(e);let A;try{const b=await Promise.race([_,y,u]);if(b.__type===pn.PROCESSED)A=b.response;else{let B;for(;;){const M=await this.getSignatureStatus(o);if(M==null)break;if(M.context.slot<(b.slotInWhichNonceDidAdvance??n)){await Qn(400);continue}B=M;break}if(B?.value){const M=t||"finalized",{confirmationStatus:C}=B.value;switch(M){case"processed":case"recent":if(C!=="processed"&&C!=="confirmed"&&C!=="finalized")throw new xr(o);break;case"confirmed":case"single":case"singleGossip":if(C!=="confirmed"&&C!=="finalized")throw new xr(o);break;case"finalized":case"max":case"root":if(C!=="finalized")throw new xr(o);break;default:}A={context:B.context,value:{err:B.value.err}}}else throw new xr(o)}}finally{c=!0,p()}return A}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:t,signature:e}){let n;const s=new Promise(u=>{let p=this._confirmTransactionInitialTimeout||6e4;switch(t){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{p=this._confirmTransactionInitialTimeout||3e4;break}}n=setTimeout(()=>u({__type:pn.TIMED_OUT,timeoutMs:p}),p)}),{abortConfirmation:i,confirmationPromise:o}=this.getTransactionConfirmationPromise({commitment:t,signature:e});let c;try{const u=await Promise.race([o,s]);if(u.__type===pn.PROCESSED)c=u.response;else throw new rl(e,u.timeoutMs/1e3)}finally{clearTimeout(n),i()}return c}async getClusterNodes(){const t=await this._rpcRequest("getClusterNodes",[]),e=it(t,yt(ot(W0)));if("error"in e)throw new ut(e.error,"failed to get cluster nodes");return e.result}async getVoteAccounts(t){const e=this._buildArgs([],t),n=await this._rpcRequest("getVoteAccounts",e),s=it(n,q0);if("error"in s)throw new ut(s.error,"failed to get vote accounts");return s.result}async getSlot(t){const{commitment:e,config:n}=Mt(t),s=this._buildArgs([],e,void 0,n),i=await this._rpcRequest("getSlot",s),o=it(i,yt(H()));if("error"in o)throw new ut(o.error,"failed to get slot");return o.result}async getSlotLeader(t){const{commitment:e,config:n}=Mt(t),s=this._buildArgs([],e,void 0,n),i=await this._rpcRequest("getSlotLeader",s),o=it(i,yt(rt()));if("error"in o)throw new ut(o.error,"failed to get slot leader");return o.result}async getSlotLeaders(t,e){const n=[t,e],s=await this._rpcRequest("getSlotLeaders",n),i=it(s,yt(ot(Dt)));if("error"in i)throw new ut(i.error,"failed to get slot leaders");return i.result}async getSignatureStatus(t,e){const{context:n,value:s}=await this.getSignatureStatuses([t],e);Ut(s.length===1);const i=s[0];return{context:n,value:i}}async getSignatureStatuses(t,e){const n=[t];e&&n.push(e);const s=await this._rpcRequest("getSignatureStatuses",n),i=it(s,$0);if("error"in i)throw new ut(i.error,"failed to get signature status");return i.result}async getTransactionCount(t){const{commitment:e,config:n}=Mt(t),s=this._buildArgs([],e,void 0,n),i=await this._rpcRequest("getTransactionCount",s),o=it(i,yt(H()));if("error"in o)throw new ut(o.error,"failed to get transaction count");return o.result}async getTotalSupply(t){return(await this.getSupply({commitment:t,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(t){const e=this._buildArgs([],t),n=await this._rpcRequest("getInflationGovernor",e),s=it(n,d0);if("error"in s)throw new ut(s.error,"failed to get inflation");return s.result}async getInflationReward(t,e,n){const{commitment:s,config:i}=Mt(n),o=this._buildArgs([t.map(p=>p.toBase58())],s,void 0,{...i,epoch:e??i?.epoch}),c=await this._rpcRequest("getInflationReward",o),u=it(c,Xd);if("error"in u)throw new ut(u.error,"failed to get inflation reward");return u.result}async getInflationRate(){const t=await this._rpcRequest("getInflationRate",[]),e=it(t,g0);if("error"in e)throw new ut(e.error,"failed to get inflation rate");return e.result}async getEpochInfo(t){const{commitment:e,config:n}=Mt(t),s=this._buildArgs([],e,void 0,n),i=await this._rpcRequest("getEpochInfo",s),o=it(i,m0);if("error"in o)throw new ut(o.error,"failed to get epoch info");return o.result}async getEpochSchedule(){const t=await this._rpcRequest("getEpochSchedule",[]),e=it(t,w0);if("error"in e)throw new ut(e.error,"failed to get epoch schedule");const n=e.result;return new qd(n.slotsPerEpoch,n.leaderScheduleSlotOffset,n.warmup,n.firstNormalEpoch,n.firstNormalSlot)}async getLeaderSchedule(){const t=await this._rpcRequest("getLeaderSchedule",[]),e=it(t,y0);if("error"in e)throw new ut(e.error,"failed to get leader schedule");return e.result}async getMinimumBalanceForRentExemption(t,e){const n=this._buildArgs([t],e),s=await this._rpcRequest("getMinimumBalanceForRentExemption",n),i=it(s,j0);return"error"in i?(console.warn("Unable to fetch minimum balance for rent exemption"),0):i.result}async getRecentBlockhashAndContext(t){const{context:e,value:{blockhash:n}}=await this.getLatestBlockhashAndContext(t);return{context:e,value:{blockhash:n,feeCalculator:{get lamportsPerSignature(){throw new Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON(){return{}}}}}}async getRecentPerformanceSamples(t){const e=await this._rpcRequest("getRecentPerformanceSamples",t?[t]:[]),n=it(e,ig);if("error"in n)throw new ut(n.error,"failed to get recent performance samples");return n.result}async getFeeCalculatorForBlockhash(t,e){const n=this._buildArgs([t],e),s=await this._rpcRequest("getFeeCalculatorForBlockhash",n),i=it(s,sg);if("error"in i)throw new ut(i.error,"failed to get fee calculator");const{context:o,value:c}=i.result;return{context:o,value:c!==null?c.feeCalculator:null}}async getFeeForMessage(t,e){const n=mr(t.serialize()).toString("base64"),s=this._buildArgs([n],e),i=await this._rpcRequest("getFeeForMessage",s),o=it(i,Ht(at(H())));if("error"in o)throw new ut(o.error,"failed to get fee for message");if(o.result===null)throw new Error("invalid blockhash");return o.result}async getRecentPrioritizationFees(t){const e=t?.lockedWritableAccounts?.map(o=>o.toBase58()),n=e?.length?[e]:[],s=await this._rpcRequest("getRecentPrioritizationFees",n),i=it(s,p0);if("error"in i)throw new ut(i.error,"failed to get recent prioritization fees");return i.result}async getRecentBlockhash(t){try{return(await this.getRecentBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhash(t){try{return(await this.getLatestBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhashAndContext(t){const{commitment:e,config:n}=Mt(t),s=this._buildArgs([],e,void 0,n),i=await this._rpcRequest("getLatestBlockhash",s),o=it(i,eg);if("error"in o)throw new ut(o.error,"failed to get latest blockhash");return o.result}async isBlockhashValid(t,e){const{commitment:n,config:s}=Mt(e),i=this._buildArgs([t],n,void 0,s),o=await this._rpcRequest("isBlockhashValid",i),c=it(o,ng);if("error"in c)throw new ut(c.error,"failed to determine if the blockhash `"+t+"`is valid");return c.result}async getVersion(){const t=await this._rpcRequest("getVersion",[]),e=it(t,yt(o0));if("error"in e)throw new ut(e.error,"failed to get version");return e.result}async getGenesisHash(){const t=await this._rpcRequest("getGenesisHash",[]),e=it(t,yt(rt()));if("error"in e)throw new ut(e.error,"failed to get genesis hash");return e.result}async getBlock(t,e){const{commitment:n,config:s}=Mt(e),i=this._buildArgsAtLeastConfirmed([t],n,void 0,s),o=await this._rpcRequest("getBlock",i);try{switch(s?.transactionDetails){case"accounts":{const c=it(o,Y0);if("error"in c)throw c.error;return c.result}case"none":{const c=it(o,Z0);if("error"in c)throw c.error;return c.result}default:{const c=it(o,G0);if("error"in c)throw c.error;const{result:u}=c;return u?{...u,transactions:u.transactions.map(({transaction:p,meta:y,version:_})=>({meta:y,transaction:{...p,message:qs(_,p.message)},version:_}))}:null}}}catch(c){throw new ut(c,"failed to get confirmed block")}}async getParsedBlock(t,e){const{commitment:n,config:s}=Mt(e),i=this._buildArgsAtLeastConfirmed([t],n,"jsonParsed",s),o=await this._rpcRequest("getBlock",i);try{switch(s?.transactionDetails){case"accounts":{const c=it(o,X0);if("error"in c)throw c.error;return c.result}case"none":{const c=it(o,Q0);if("error"in c)throw c.error;return c.result}default:{const c=it(o,J0);if("error"in c)throw c.error;return c.result}}}catch(c){throw new ut(c,"failed to get block")}}async getBlockProduction(t){let e,n;if(typeof t=="string")n=t;else if(t){const{commitment:c,...u}=t;n=c,e=u}const s=this._buildArgs([],n,"base64",e),i=await this._rpcRequest("getBlockProduction",s),o=it(i,u0);if("error"in o)throw new ut(o.error,"failed to get block production information");return o.result}async getTransaction(t,e){const{commitment:n,config:s}=Mt(e),i=this._buildArgsAtLeastConfirmed([t],n,void 0,s),o=await this._rpcRequest("getTransaction",i),c=it(o,zs);if("error"in c)throw new ut(c.error,"failed to get transaction");const u=c.result;return u&&{...u,transaction:{...u.transaction,message:qs(u.version,u.transaction.message)}}}async getParsedTransaction(t,e){const{commitment:n,config:s}=Mt(e),i=this._buildArgsAtLeastConfirmed([t],n,"jsonParsed",s),o=await this._rpcRequest("getTransaction",i),c=it(o,ri);if("error"in c)throw new ut(c.error,"failed to get transaction");return c.result}async getParsedTransactions(t,e){const{commitment:n,config:s}=Mt(e),i=t.map(u=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([u],n,"jsonParsed",s)}));return(await this._rpcBatchRequest(i)).map(u=>{const p=it(u,ri);if("error"in p)throw new ut(p.error,"failed to get transactions");return p.result})}async getTransactions(t,e){const{commitment:n,config:s}=Mt(e),i=t.map(u=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([u],n,void 0,s)}));return(await this._rpcBatchRequest(i)).map(u=>{const p=it(u,zs);if("error"in p)throw new ut(p.error,"failed to get transactions");const y=p.result;return y&&{...y,transaction:{...y.transaction,message:qs(y.version,y.transaction.message)}}})}async getConfirmedBlock(t,e){const n=this._buildArgsAtLeastConfirmed([t],e),s=await this._rpcRequest("getBlock",n),i=it(s,tg);if("error"in i)throw new ut(i.error,"failed to get confirmed block");const o=i.result;if(!o)throw new Error("Confirmed block "+t+" not found");const c={...o,transactions:o.transactions.map(({transaction:u,meta:p})=>{const y=new an(u.message);return{meta:p,transaction:{...u,message:y}}})};return{...c,transactions:c.transactions.map(({transaction:u,meta:p})=>({meta:p,transaction:ze.populate(u.message,u.signatures)}))}}async getBlocks(t,e,n){const s=this._buildArgsAtLeastConfirmed(e!==void 0?[t,e]:[t],n),i=await this._rpcRequest("getBlocks",s),o=it(i,yt(ot(H())));if("error"in o)throw new ut(o.error,"failed to get blocks");return o.result}async getBlockSignatures(t,e){const n=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",n),i=it(s,wc);if("error"in i)throw new ut(i.error,"failed to get block");const o=i.result;if(!o)throw new Error("Block "+t+" not found");return o}async getConfirmedBlockSignatures(t,e){const n=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",n),i=it(s,wc);if("error"in i)throw new ut(i.error,"failed to get confirmed block");const o=i.result;if(!o)throw new Error("Confirmed block "+t+" not found");return o}async getConfirmedTransaction(t,e){const n=this._buildArgsAtLeastConfirmed([t],e),s=await this._rpcRequest("getTransaction",n),i=it(s,zs);if("error"in i)throw new ut(i.error,"failed to get transaction");const o=i.result;if(!o)return o;const c=new an(o.transaction.message),u=o.transaction.signatures;return{...o,transaction:ze.populate(c,u)}}async getParsedConfirmedTransaction(t,e){const n=this._buildArgsAtLeastConfirmed([t],e,"jsonParsed"),s=await this._rpcRequest("getTransaction",n),i=it(s,ri);if("error"in i)throw new ut(i.error,"failed to get confirmed transaction");return i.result}async getParsedConfirmedTransactions(t,e){const n=t.map(o=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([o],e,"jsonParsed")}));return(await this._rpcBatchRequest(n)).map(o=>{const c=it(o,ri);if("error"in c)throw new ut(c.error,"failed to get confirmed transactions");return c.result})}async getConfirmedSignaturesForAddress(t,e,n){let s={},i=await this.getFirstAvailableBlock();for(;!("until"in s)&&(e--,!(e<=0||e<i));)try{const u=await this.getConfirmedBlockSignatures(e,"finalized");u.signatures.length>0&&(s.until=u.signatures[u.signatures.length-1].toString())}catch(u){if(u instanceof Error&&u.message.includes("skipped"))continue;throw u}let o=await this.getSlot("finalized");for(;!("before"in s)&&(n++,!(n>o));)try{const u=await this.getConfirmedBlockSignatures(n);u.signatures.length>0&&(s.before=u.signatures[u.signatures.length-1].toString())}catch(u){if(u instanceof Error&&u.message.includes("skipped"))continue;throw u}return(await this.getConfirmedSignaturesForAddress2(t,s)).map(u=>u.signature)}async getConfirmedSignaturesForAddress2(t,e,n){const s=this._buildArgsAtLeastConfirmed([t.toBase58()],n,void 0,e),i=await this._rpcRequest("getConfirmedSignaturesForAddress2",s),o=it(i,R0);if("error"in o)throw new ut(o.error,"failed to get confirmed signatures for address");return o.result}async getSignaturesForAddress(t,e,n){const s=this._buildArgsAtLeastConfirmed([t.toBase58()],n,void 0,e),i=await this._rpcRequest("getSignaturesForAddress",s),o=it(i,k0);if("error"in o)throw new ut(o.error,"failed to get signatures for address");return o.result}async getAddressLookupTable(t,e){const{context:n,value:s}=await this.getAccountInfoAndContext(t,e);let i=null;return s!==null&&(i=new dc({key:t,state:dc.deserialize(s.data)})),{context:n,value:i}}async getNonceAndContext(t,e){const{context:n,value:s}=await this.getAccountInfoAndContext(t,e);let i=null;return s!==null&&(i=da.fromAccountData(s.data)),{context:n,value:i}}async getNonce(t,e){return await this.getNonceAndContext(t,e).then(n=>n.value).catch(n=>{throw new Error("failed to get nonce for account "+t.toBase58()+": "+n)})}async requestAirdrop(t,e){const n=await this._rpcRequest("requestAirdrop",[t.toBase58(),e]),s=it(n,og);if("error"in s)throw new ut(s.error,`airdrop to ${t.toBase58()} failed`);return s.result}async _blockhashWithExpiryBlockHeight(t){if(!t){for(;this._pollingBlockhash;)await Qn(100);const n=Date.now()-this._blockhashInfo.lastFetch>=Gd;if(this._blockhashInfo.latestBlockhash!==null&&!n)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const t=Date.now(),e=this._blockhashInfo.latestBlockhash,n=e?e.blockhash:null;for(let s=0;s<50;s++){const i=await this.getLatestBlockhash("finalized");if(n!==i.blockhash)return this._blockhashInfo={latestBlockhash:i,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},i;await Qn(Nd/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-t}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(t){const{commitment:e,config:n}=Mt(t),s=this._buildArgs([],e,"base64",n),i=await this._rpcRequest("getStakeMinimumDelegation",s),o=it(i,Ht(H()));if("error"in o)throw new ut(o.error,"failed to get stake minimum delegation");return o.result}async simulateTransaction(t,e,n){if("message"in t){const M=t.serialize(),C=bt.Buffer.from(M).toString("base64");if(Array.isArray(e)||n!==void 0)throw new Error("Invalid arguments");const O=e||{};O.encoding="base64","commitment"in O||(O.commitment=this.commitment),e&&typeof e=="object"&&"innerInstructions"in e&&(O.innerInstructions=e.innerInstructions);const D=[C,O],N=await this._rpcRequest("simulateTransaction",D),V=it(N,pc);if("error"in V)throw new Error("failed to simulate transaction: "+V.error.message);return V.result}let s;if(t instanceof ze){let B=t;s=new ze,s.feePayer=B.feePayer,s.instructions=t.instructions,s.nonceInfo=B.nonceInfo,s.signatures=B.signatures}else s=ze.populate(t),s._message=s._json=void 0;if(e!==void 0&&!Array.isArray(e))throw new Error("Invalid arguments");const i=e;if(s.nonceInfo&&i)s.sign(...i);else{let B=this._disableBlockhashCaching;for(;;){const M=await this._blockhashWithExpiryBlockHeight(B);if(s.lastValidBlockHeight=M.lastValidBlockHeight,s.recentBlockhash=M.blockhash,!i)break;if(s.sign(...i),!s.signature)throw new Error("!signature");const C=s.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(C)&&!this._blockhashInfo.transactionSignatures.includes(C)){this._blockhashInfo.simulatedSignatures.push(C);break}else B=!0}}const o=s._compile(),c=o.serialize(),p=s._serialize(c).toString("base64"),y={encoding:"base64",commitment:this.commitment};if(n){const B=(Array.isArray(n)?n:o.nonProgramIds()).map(M=>M.toBase58());y.accounts={encoding:"base64",addresses:B}}i&&(y.sigVerify=!0),e&&typeof e=="object"&&"innerInstructions"in e&&(y.innerInstructions=e.innerInstructions);const _=[p,y],A=await this._rpcRequest("simulateTransaction",_),b=it(A,pc);if("error"in b){let B;if("data"in b.error&&(B=b.error.data.logs,B&&Array.isArray(B))){const M=`
    `,C=M+B.join(M);console.error(b.error.message,C)}throw new uc({action:"simulate",signature:"",transactionMessage:b.error.message,logs:B})}return b.result}async sendTransaction(t,e,n){if("version"in t){if(e&&Array.isArray(e))throw new Error("Invalid arguments");const o=t.serialize();return await this.sendRawTransaction(o,e)}if(e===void 0||!Array.isArray(e))throw new Error("Invalid arguments");const s=e;if(t.nonceInfo)t.sign(...s);else{let o=this._disableBlockhashCaching;for(;;){const c=await this._blockhashWithExpiryBlockHeight(o);if(t.lastValidBlockHeight=c.lastValidBlockHeight,t.recentBlockhash=c.blockhash,t.sign(...s),!t.signature)throw new Error("!signature");const u=t.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(u))o=!0;else{this._blockhashInfo.transactionSignatures.push(u);break}}}const i=t.serialize();return await this.sendRawTransaction(i,n)}async sendRawTransaction(t,e){const n=mr(t).toString("base64");return await this.sendEncodedTransaction(n,e)}async sendEncodedTransaction(t,e){const n={encoding:"base64"},s=e&&e.skipPreflight,i=s===!0?"processed":e&&e.preflightCommitment||this.commitment;e&&e.maxRetries!=null&&(n.maxRetries=e.maxRetries),e&&e.minContextSlot!=null&&(n.minContextSlot=e.minContextSlot),s&&(n.skipPreflight=s),i&&(n.preflightCommitment=i);const o=[t,n],c=await this._rpcRequest("sendTransaction",o),u=it(c,ag);if("error"in u){let p;throw"data"in u.error&&(p=u.error.data.logs),new uc({action:s?"send":"simulate",signature:"",transactionMessage:u.error.message,logs:p})}return u.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(t){this._rpcWebSocketConnected=!1,console.error("ws error:",t.message)}_wsOnClose(t){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),t===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([e,n])=>{this._setSubscription(e,{...n,state:"pending"})})}_setSubscription(t,e){const n=this._subscriptionsByHash[t]?.state;if(this._subscriptionsByHash[t]=e,n!==e.state){const s=this._subscriptionStateChangeCallbacksByHash[t];s&&s.forEach(i=>{try{i(e.state)}catch{}})}}_onSubscriptionStateChange(t,e){const n=this._subscriptionHashByClientSubscriptionId[t];if(n==null)return()=>{};const s=this._subscriptionStateChangeCallbacksByHash[n]||=new Set;return s.add(e),()=>{s.delete(e),s.size===0&&delete this._subscriptionStateChangeCallbacksByHash[n]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(n){n instanceof Error&&console.log(`Error when closing socket connection: ${n.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const t=this._rpcWebSocketGeneration,e=()=>t===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async n=>{const s=this._subscriptionsByHash[n];if(s!==void 0)switch(s.state){case"pending":case"unsubscribed":if(s.callbacks.size===0){delete this._subscriptionsByHash[n],s.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[s.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:i,method:o}=s;try{this._setSubscription(n,{...s,state:"subscribing"});const c=await this._rpcWebSocket.call(o,i);this._setSubscription(n,{...s,serverSubscriptionId:c,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[c]=s.callbacks,await this._updateSubscriptions()}catch(c){if(console.error(`Received ${c instanceof Error?"":"JSON-RPC "}error calling \`${o}\``,{args:i,error:c}),!e())return;this._setSubscription(n,{...s,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":s.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:i,unsubscribeMethod:o}=s;if(this._subscriptionsAutoDisposedByRpc.has(i))this._subscriptionsAutoDisposedByRpc.delete(i);else{this._setSubscription(n,{...s,state:"unsubscribing"}),this._setSubscription(n,{...s,state:"unsubscribing"});try{await this._rpcWebSocket.call(o,[i])}catch(c){if(c instanceof Error&&console.error(`${o} error:`,c.message),!e())return;this._setSubscription(n,{...s,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(n,{...s,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(t,e){const n=this._subscriptionCallbacksByServerSubscriptionId[t];n!==void 0&&n.forEach(s=>{try{s(...e)}catch(i){console.error(i)}})}_wsOnAccountNotification(t){const{result:e,subscription:n}=it(t,T0);this._handleServerNotification(n,[e.value,e.context])}_makeSubscription(t,e){const n=this._nextClientSubscriptionId++,s=fc([t.method,e]),i=this._subscriptionsByHash[s];return i===void 0?this._subscriptionsByHash[s]={...t,args:e,callbacks:new Set([t.callback]),state:"pending"}:i.callbacks.add(t.callback),this._subscriptionHashByClientSubscriptionId[n]=s,this._subscriptionDisposeFunctionsByClientSubscriptionId[n]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[n],delete this._subscriptionHashByClientSubscriptionId[n];const o=this._subscriptionsByHash[s];Ut(o!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${n}`),o.callbacks.delete(t.callback),await this._updateSubscriptions()},this._updateSubscriptions(),n}onAccountChange(t,e,n){const{commitment:s,config:i}=Mt(n),o=this._buildArgs([t.toBase58()],s||this._commitment||"finalized","base64",i);return this._makeSubscription({callback:e,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},o)}async removeAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"account change")}_wsOnProgramAccountNotification(t){const{result:e,subscription:n}=it(t,L0);this._handleServerNotification(n,[{accountId:e.value.pubkey,accountInfo:e.value.account},e.context])}onProgramAccountChange(t,e,n,s){const{commitment:i,config:o}=Mt(n),c=this._buildArgs([t.toBase58()],i||this._commitment||"finalized","base64",o||(s?{filters:gc(s)}:void 0));return this._makeSubscription({callback:e,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},c)}async removeProgramAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"program account change")}onLogs(t,e,n){const s=this._buildArgs([typeof t=="object"?{mentions:[t.toString()]}:t],n||this._commitment||"finalized");return this._makeSubscription({callback:e,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},s)}async removeOnLogsListener(t){await this._unsubscribeClientSubscription(t,"logs")}_wsOnLogsNotification(t){const{result:e,subscription:n}=it(t,ug);this._handleServerNotification(n,[e.value,e.context])}_wsOnSlotNotification(t){const{result:e,subscription:n}=it(t,N0);this._handleServerNotification(n,[e])}onSlotChange(t){return this._makeSubscription({callback:t,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(t){await this._unsubscribeClientSubscription(t,"slot change")}_wsOnSlotUpdatesNotification(t){const{result:e,subscription:n}=it(t,F0);this._handleServerNotification(n,[e])}onSlotUpdate(t){return this._makeSubscription({callback:t,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(t){await this._unsubscribeClientSubscription(t,"slot update")}async _unsubscribeClientSubscription(t,e){const n=this._subscriptionDisposeFunctionsByClientSubscriptionId[t];n?await n():console.warn(`Ignored unsubscribe request because an active subscription with id \`${t}\` for '${e}' events could not be found.`)}_buildArgs(t,e,n,s){const i=e||this._commitment;if(i||n||s){let o={};n&&(o.encoding=n),i&&(o.commitment=i),s&&(o=Object.assign(o,s)),t.push(o)}return t}_buildArgsAtLeastConfirmed(t,e,n,s){const i=e||this._commitment;if(i&&!["confirmed","finalized"].includes(i))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(t,e,n,s)}_wsOnSignatureNotification(t){const{result:e,subscription:n}=it(t,P0);e.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(n),this._handleServerNotification(n,e.value==="receivedSignature"?[{type:"received"},e.context]:[{type:"status",result:e.value},e.context])}onSignature(t,e,n){const s=this._buildArgs([t],n||this._commitment||"finalized"),i=this._makeSubscription({callback:(o,c)=>{if(o.type==="status"){e(o.result,c);try{this.removeSignatureListener(i)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},s);return i}onSignatureWithOptions(t,e,n){const{commitment:s,...i}={...n,commitment:n&&n.commitment||this._commitment||"finalized"},o=this._buildArgs([t],s,void 0,i),c=this._makeSubscription({callback:(u,p)=>{e(u,p);try{this.removeSignatureListener(c)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return c}async removeSignatureListener(t){await this._unsubscribeClientSubscription(t,"signature result")}_wsOnRootNotification(t){const{result:e,subscription:n}=it(t,D0);this._handleServerNotification(n,[e])}onRootChange(t){return this._makeSubscription({callback:t,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(t){await this._unsubscribeClientSubscription(t,"root change")}}Object.freeze({CreateLookupTable:{index:0,layout:F.struct([F.u32("instruction"),wr("recentSlot"),F.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:F.struct([F.u32("instruction")])},ExtendLookupTable:{index:2,layout:F.struct([F.u32("instruction"),wr(),F.seq(vt(),F.offset(F.u32(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:F.struct([F.u32("instruction")])},CloseLookupTable:{index:4,layout:F.struct([F.u32("instruction")])}});new dt("AddressLookupTab1e1111111111111111111111111");Object.freeze({RequestUnits:{index:0,layout:F.struct([F.u8("instruction"),F.u32("units"),F.u32("additionalFee")])},RequestHeapFrame:{index:1,layout:F.struct([F.u8("instruction"),F.u32("bytes")])},SetComputeUnitLimit:{index:2,layout:F.struct([F.u8("instruction"),F.u32("units")])},SetComputeUnitPrice:{index:3,layout:F.struct([F.u8("instruction"),wr("microLamports")])}});new dt("ComputeBudget111111111111111111111111111111");F.struct([F.u8("numSignatures"),F.u8("padding"),F.u16("signatureOffset"),F.u16("signatureInstructionIndex"),F.u16("publicKeyOffset"),F.u16("publicKeyInstructionIndex"),F.u16("messageDataOffset"),F.u16("messageDataSize"),F.u16("messageInstructionIndex")]);new dt("Ed25519SigVerify111111111111111111111111111");Ed.utils.isValidPrivateKey;F.struct([F.u8("numSignatures"),F.u16("signatureOffset"),F.u8("signatureInstructionIndex"),F.u16("ethAddressOffset"),F.u8("ethAddressInstructionIndex"),F.u16("messageDataOffset"),F.u16("messageDataSize"),F.u8("messageInstructionIndex"),F.blob(20,"ethAddress"),F.blob(64,"signature"),F.u8("recoveryId")]);new dt("KeccakSecp256k11111111111111111111111111111");var ml;new dt("StakeConfig11111111111111111111111111111111");class wl{constructor(t,e,n){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=t,this.epoch=e,this.custodian=n}}ml=wl;wl.default=new ml(0,0,dt.default);Object.freeze({Initialize:{index:0,layout:F.struct([F.u32("instruction"),Md(),Id()])},Authorize:{index:1,layout:F.struct([F.u32("instruction"),vt("newAuthorized"),F.u32("stakeAuthorizationType")])},Delegate:{index:2,layout:F.struct([F.u32("instruction")])},Split:{index:3,layout:F.struct([F.u32("instruction"),F.ns64("lamports")])},Withdraw:{index:4,layout:F.struct([F.u32("instruction"),F.ns64("lamports")])},Deactivate:{index:5,layout:F.struct([F.u32("instruction")])},Merge:{index:7,layout:F.struct([F.u32("instruction")])},AuthorizeWithSeed:{index:8,layout:F.struct([F.u32("instruction"),vt("newAuthorized"),F.u32("stakeAuthorizationType"),or("authoritySeed"),vt("authorityOwner")])}});new dt("Stake11111111111111111111111111111111111111");Object.freeze({InitializeAccount:{index:0,layout:F.struct([F.u32("instruction"),Rd()])},Authorize:{index:1,layout:F.struct([F.u32("instruction"),vt("newAuthorized"),F.u32("voteAuthorizationType")])},Withdraw:{index:3,layout:F.struct([F.u32("instruction"),F.ns64("lamports")])},UpdateValidatorIdentity:{index:4,layout:F.struct([F.u32("instruction")])},AuthorizeWithSeed:{index:10,layout:F.struct([F.u32("instruction"),kd()])}});new dt("Vote111111111111111111111111111111111111111");new dt("Va1idator1nfo111111111111111111111111111111");et({name:rt(),website:lt(rt()),details:lt(rt()),iconUrl:lt(rt()),keybaseUsername:lt(rt())});new dt("Vote111111111111111111111111111111111111111");F.struct([vt("nodePubkey"),vt("authorizedWithdrawer"),F.u8("commission"),F.nu64(),F.seq(F.struct([F.nu64("slot"),F.u32("confirmationCount")]),F.offset(F.u32(),-8),"votes"),F.u8("rootSlotValid"),F.nu64("rootSlot"),F.nu64(),F.seq(F.struct([F.nu64("epoch"),vt("authorizedVoter")]),F.offset(F.u32(),-8),"authorizedVoters"),F.struct([F.seq(F.struct([vt("authorizedPubkey"),F.nu64("epochOfLastAuthorizedSwitch"),F.nu64("targetEpoch")]),32,"buf"),F.nu64("idx"),F.u8("isEmpty")],"priorVoters"),F.nu64(),F.seq(F.struct([F.nu64("epoch"),F.nu64("credits"),F.nu64("prevCredits")]),F.offset(F.u32(),-8),"epochCredits"),F.struct([F.nu64("slot"),F.nu64("timestamp")],"lastTimestamp")]);const yc={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};function Fm(r,t){const e="https";if(!r)return yc[e].devnet;const n=yc[e][r];if(!n)throw new Error(`Unknown ${e} cluster: ${r}`);return n}const yl=ht.createContext({});function hg(){return ht.useContext(yl)}const Pm=({children:r,endpoint:t,config:e={commitment:"confirmed"}})=>{const n=ht.useMemo(()=>new fg(t,e),[t,e]);return Yo.createElement(yl.Provider,{value:{connection:n}},r)};class Re extends Error{constructor(t,e){super(t),this.error=e}}class Pr extends Re{constructor(){super(...arguments),this.name="WalletNotReadyError"}}class Ar extends Re{constructor(){super(...arguments),this.name="WalletConfigError"}}class Oi extends Re{constructor(){super(...arguments),this.name="WalletConnectionError"}}class dg extends Re{constructor(){super(...arguments),this.name="WalletDisconnectedError"}}class gg extends Re{constructor(){super(...arguments),this.name="WalletDisconnectionError"}}class ar extends Re{constructor(){super(...arguments),this.name="WalletAccountError"}}class bl extends Re{constructor(){super(...arguments),this.name="WalletPublicKeyError"}}class Ge extends Re{constructor(){super(...arguments),this.name="WalletNotConnectedError"}}class Tn extends Re{constructor(){super(...arguments),this.name="WalletSendTransactionError"}}class Cn extends Re{constructor(){super(...arguments),this.name="WalletSignTransactionError"}}class vl extends Re{constructor(){super(...arguments),this.name="WalletSignMessageError"}}class bc extends Re{constructor(){super(...arguments),this.name="WalletSignInError"}}var Vt;(function(r){r.Installed="Installed",r.NotDetected="NotDetected",r.Loadable="Loadable",r.Unsupported="Unsupported"})(Vt||(Vt={}));class El extends ua{get connected(){return!!this.publicKey}async autoConnect(){await this.connect()}async prepareTransaction(t,e,n={}){const s=this.publicKey;if(!s)throw new Ge;return t.feePayer=t.feePayer||s,t.recentBlockhash=t.recentBlockhash||(await e.getLatestBlockhash({commitment:n.preflightCommitment,minContextSlot:n.minContextSlot})).blockhash,t}}function Dm(r){if(typeof window>"u"||typeof document>"u")return;const t=[];function e(){if(r())for(const i of t)i()}const n=setInterval(e,1e3);t.push(()=>clearInterval(n)),document.readyState==="loading"&&(document.addEventListener("DOMContentLoaded",e,{once:!0}),t.push(()=>document.removeEventListener("DOMContentLoaded",e))),document.readyState!=="complete"&&(window.addEventListener("load",e,{once:!0}),t.push(()=>window.removeEventListener("load",e))),e()}function Wm(){if(!navigator)return!1;const r=navigator.userAgent.toLowerCase(),t=r.includes("iphone")||r.includes("ipad"),e=r.includes("safari");return t&&e}function Ln(r){return"version"in r}class pg extends El{async sendTransaction(t,e,n={}){let s=!0;try{if(Ln(t)){if(!this.supportedTransactionVersions)throw new Tn("Sending versioned transactions isn't supported by this wallet");if(!this.supportedTransactionVersions.has(t.version))throw new Tn(`Sending transaction version ${t.version} isn't supported by this wallet`);try{t=await this.signTransaction(t);const i=t.serialize();return await e.sendRawTransaction(i,n)}catch(i){throw i instanceof Cn?(s=!1,i):new Tn(i?.message,i)}}else try{const{signers:i,...o}=n;t=await this.prepareTransaction(t,e,o),i?.length&&t.partialSign(...i),t=await this.signTransaction(t);const c=t.serialize();return await e.sendRawTransaction(c,o)}catch(i){throw i instanceof Cn?(s=!1,i):new Tn(i?.message,i)}}catch(i){throw s&&this.emit("error",i),i}}async signAllTransactions(t){for(const n of t)if(Ln(n)){if(!this.supportedTransactionVersions)throw new Cn("Signing versioned transactions isn't supported by this wallet");if(!this.supportedTransactionVersions.has(n.version))throw new Cn(`Signing transaction version ${n.version} isn't supported by this wallet`)}const e=[];for(const n of t)e.push(await this.signTransaction(n));return e}}class mg extends pg{}class wg extends mg{}const Te="solana:signAndSendTransaction",Dn="solana:signIn",vn="solana:signMessage",Ft="solana:signTransaction",wa="standard:connect",ko="standard:disconnect",ya="standard:events";function yg(r){return wa in r.features&&ya in r.features&&(Te in r.features||Ft in r.features)}var vc;(function(r){r.Mainnet="mainnet-beta",r.Testnet="testnet",r.Devnet="devnet"})(vc||(vc={}));class Ec extends Re{constructor(){super(...arguments),this.name="WalletNotSelectedError"}}const bg=[],Yi={autoConnect:!1,connecting:!1,connected:!1,disconnecting:!1,select(){qe("call","select")},connect(){return Promise.reject(qe("call","connect"))},disconnect(){return Promise.reject(qe("call","disconnect"))},sendTransaction(){return Promise.reject(qe("call","sendTransaction"))},signTransaction(){return Promise.reject(qe("call","signTransaction"))},signAllTransactions(){return Promise.reject(qe("call","signAllTransactions"))},signMessage(){return Promise.reject(qe("call","signMessage"))},signIn(){return Promise.reject(qe("call","signIn"))}};Object.defineProperty(Yi,"wallets",{get(){return qe("read","wallets"),bg}});Object.defineProperty(Yi,"wallet",{get(){return qe("read","wallet"),null}});Object.defineProperty(Yi,"publicKey",{get(){return qe("read","publicKey"),null}});function qe(r,t){const e=new Error(`You have tried to ${r} "${t}" on a WalletContext without providing one. Make sure to render a WalletProvider as an ancestor of the component that uses WalletContext.`);return console.error(e),e}const Sl=ht.createContext(Yi);function qm(){return ht.useContext(Sl)}function vg(r,t){const e=ht.useState(()=>{try{const i=localStorage.getItem(r);if(i)return JSON.parse(i)}catch(i){typeof window<"u"&&console.error(i)}return t}),n=e[0],s=ht.useRef(!0);return ht.useEffect(()=>{if(s.current){s.current=!1;return}try{n===null?localStorage.removeItem(r):localStorage.setItem(r,JSON.stringify(n))}catch(i){typeof window<"u"&&console.error(i)}},[n,r]),e}var Xn={},Ks,Sc;function Eg(){return Sc||(Sc=1,Ks=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),Ks}var $s={},mn={},_c;function Hn(){if(_c)return mn;_c=1;let r;const t=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return mn.getSymbolSize=function(n){if(!n)throw new Error('"version" cannot be null or undefined');if(n<1||n>40)throw new Error('"version" should be in range from 1 to 40');return n*4+17},mn.getSymbolTotalCodewords=function(n){return t[n]},mn.getBCHDigit=function(e){let n=0;for(;e!==0;)n++,e>>>=1;return n},mn.setToSJISFunction=function(n){if(typeof n!="function")throw new Error('"toSJISFunc" is not a valid function.');r=n},mn.isKanjiModeEnabled=function(){return typeof r<"u"},mn.toSJIS=function(n){return r(n)},mn}var js={},xc;function ba(){return xc||(xc=1,(function(r){r.L={bit:1},r.M={bit:0},r.Q={bit:3},r.H={bit:2};function t(e){if(typeof e!="string")throw new Error("Param is not a string");switch(e.toLowerCase()){case"l":case"low":return r.L;case"m":case"medium":return r.M;case"q":case"quartile":return r.Q;case"h":case"high":return r.H;default:throw new Error("Unknown EC Level: "+e)}}r.isValid=function(n){return n&&typeof n.bit<"u"&&n.bit>=0&&n.bit<4},r.from=function(n,s){if(r.isValid(n))return n;try{return t(n)}catch{return s}}})(js)),js}var Hs,Ac;function Sg(){if(Ac)return Hs;Ac=1;function r(){this.buffer=[],this.length=0}return r.prototype={get:function(t){const e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)===1},put:function(t,e){for(let n=0;n<e;n++)this.putBit((t>>>e-n-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}},Hs=r,Hs}var Vs,Bc;function _g(){if(Bc)return Vs;Bc=1;function r(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}return r.prototype.set=function(t,e,n,s){const i=t*this.size+e;this.data[i]=n,s&&(this.reservedBit[i]=!0)},r.prototype.get=function(t,e){return this.data[t*this.size+e]},r.prototype.xor=function(t,e,n){this.data[t*this.size+e]^=n},r.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]},Vs=r,Vs}var Gs={},Mc;function xg(){return Mc||(Mc=1,(function(r){const t=Hn().getSymbolSize;r.getRowColCoords=function(n){if(n===1)return[];const s=Math.floor(n/7)+2,i=t(n),o=i===145?26:Math.ceil((i-13)/(2*s-2))*2,c=[i-7];for(let u=1;u<s-1;u++)c[u]=c[u-1]-o;return c.push(6),c.reverse()},r.getPositions=function(n){const s=[],i=r.getRowColCoords(n),o=i.length;for(let c=0;c<o;c++)for(let u=0;u<o;u++)c===0&&u===0||c===0&&u===o-1||c===o-1&&u===0||s.push([i[c],i[u]]);return s}})(Gs)),Gs}var Zs={},Ic;function Ag(){if(Ic)return Zs;Ic=1;const r=Hn().getSymbolSize,t=7;return Zs.getPositions=function(n){const s=r(n);return[[0,0],[s-t,0],[0,s-t]]},Zs}var Ys={},Rc;function Bg(){return Rc||(Rc=1,(function(r){r.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const t={N1:3,N2:3,N3:40,N4:10};r.isValid=function(s){return s!=null&&s!==""&&!isNaN(s)&&s>=0&&s<=7},r.from=function(s){return r.isValid(s)?parseInt(s,10):void 0},r.getPenaltyN1=function(s){const i=s.size;let o=0,c=0,u=0,p=null,y=null;for(let _=0;_<i;_++){c=u=0,p=y=null;for(let A=0;A<i;A++){let b=s.get(_,A);b===p?c++:(c>=5&&(o+=t.N1+(c-5)),p=b,c=1),b=s.get(A,_),b===y?u++:(u>=5&&(o+=t.N1+(u-5)),y=b,u=1)}c>=5&&(o+=t.N1+(c-5)),u>=5&&(o+=t.N1+(u-5))}return o},r.getPenaltyN2=function(s){const i=s.size;let o=0;for(let c=0;c<i-1;c++)for(let u=0;u<i-1;u++){const p=s.get(c,u)+s.get(c,u+1)+s.get(c+1,u)+s.get(c+1,u+1);(p===4||p===0)&&o++}return o*t.N2},r.getPenaltyN3=function(s){const i=s.size;let o=0,c=0,u=0;for(let p=0;p<i;p++){c=u=0;for(let y=0;y<i;y++)c=c<<1&2047|s.get(p,y),y>=10&&(c===1488||c===93)&&o++,u=u<<1&2047|s.get(y,p),y>=10&&(u===1488||u===93)&&o++}return o*t.N3},r.getPenaltyN4=function(s){let i=0;const o=s.data.length;for(let u=0;u<o;u++)i+=s.data[u];return Math.abs(Math.ceil(i*100/o/5)-10)*t.N4};function e(n,s,i){switch(n){case r.Patterns.PATTERN000:return(s+i)%2===0;case r.Patterns.PATTERN001:return s%2===0;case r.Patterns.PATTERN010:return i%3===0;case r.Patterns.PATTERN011:return(s+i)%3===0;case r.Patterns.PATTERN100:return(Math.floor(s/2)+Math.floor(i/3))%2===0;case r.Patterns.PATTERN101:return s*i%2+s*i%3===0;case r.Patterns.PATTERN110:return(s*i%2+s*i%3)%2===0;case r.Patterns.PATTERN111:return(s*i%3+(s+i)%2)%2===0;default:throw new Error("bad maskPattern:"+n)}}r.applyMask=function(s,i){const o=i.size;for(let c=0;c<o;c++)for(let u=0;u<o;u++)i.isReserved(u,c)||i.xor(u,c,e(s,u,c))},r.getBestMask=function(s,i){const o=Object.keys(r.Patterns).length;let c=0,u=1/0;for(let p=0;p<o;p++){i(p),r.applyMask(p,s);const y=r.getPenaltyN1(s)+r.getPenaltyN2(s)+r.getPenaltyN3(s)+r.getPenaltyN4(s);r.applyMask(p,s),y<u&&(u=y,c=p)}return c}})(Ys)),Ys}var ii={},kc;function _l(){if(kc)return ii;kc=1;const r=ba(),t=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],e=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return ii.getBlocksCount=function(s,i){switch(i){case r.L:return t[(s-1)*4+0];case r.M:return t[(s-1)*4+1];case r.Q:return t[(s-1)*4+2];case r.H:return t[(s-1)*4+3];default:return}},ii.getTotalCodewordsCount=function(s,i){switch(i){case r.L:return e[(s-1)*4+0];case r.M:return e[(s-1)*4+1];case r.Q:return e[(s-1)*4+2];case r.H:return e[(s-1)*4+3];default:return}},ii}var Js={},Sr={},Tc;function Mg(){if(Tc)return Sr;Tc=1;const r=new Uint8Array(512),t=new Uint8Array(256);return(function(){let n=1;for(let s=0;s<255;s++)r[s]=n,t[n]=s,n<<=1,n&256&&(n^=285);for(let s=255;s<512;s++)r[s]=r[s-255]})(),Sr.log=function(n){if(n<1)throw new Error("log("+n+")");return t[n]},Sr.exp=function(n){return r[n]},Sr.mul=function(n,s){return n===0||s===0?0:r[t[n]+t[s]]},Sr}var Cc;function Ig(){return Cc||(Cc=1,(function(r){const t=Mg();r.mul=function(n,s){const i=new Uint8Array(n.length+s.length-1);for(let o=0;o<n.length;o++)for(let c=0;c<s.length;c++)i[o+c]^=t.mul(n[o],s[c]);return i},r.mod=function(n,s){let i=new Uint8Array(n);for(;i.length-s.length>=0;){const o=i[0];for(let u=0;u<s.length;u++)i[u]^=t.mul(s[u],o);let c=0;for(;c<i.length&&i[c]===0;)c++;i=i.slice(c)}return i},r.generateECPolynomial=function(n){let s=new Uint8Array([1]);for(let i=0;i<n;i++)s=r.mul(s,new Uint8Array([1,t.exp(i)]));return s}})(Js)),Js}var Xs,Lc;function Rg(){if(Lc)return Xs;Lc=1;const r=Ig();function t(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}return t.prototype.initialize=function(n){this.degree=n,this.genPoly=r.generateECPolynomial(this.degree)},t.prototype.encode=function(n){if(!this.genPoly)throw new Error("Encoder not initialized");const s=new Uint8Array(n.length+this.degree);s.set(n);const i=r.mod(s,this.genPoly),o=this.degree-i.length;if(o>0){const c=new Uint8Array(this.degree);return c.set(i,o),c}return i},Xs=t,Xs}var Qs={},to={},eo={},Uc;function xl(){return Uc||(Uc=1,eo.isValid=function(t){return!isNaN(t)&&t>=1&&t<=40}),eo}var He={},Nc;function Al(){if(Nc)return He;Nc=1;const r="[0-9]+",t="[A-Z $%*+\\-./:]+";let e="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";e=e.replace(/u/g,"\\u");const n="(?:(?![A-Z0-9 $%*+\\-./:]|"+e+`)(?:.|[\r
]))+`;He.KANJI=new RegExp(e,"g"),He.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),He.BYTE=new RegExp(n,"g"),He.NUMERIC=new RegExp(r,"g"),He.ALPHANUMERIC=new RegExp(t,"g");const s=new RegExp("^"+e+"$"),i=new RegExp("^"+r+"$"),o=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return He.testKanji=function(u){return s.test(u)},He.testNumeric=function(u){return i.test(u)},He.testAlphanumeric=function(u){return o.test(u)},He}var Oc;function Vn(){return Oc||(Oc=1,(function(r){const t=xl(),e=Al();r.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},r.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},r.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},r.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},r.MIXED={bit:-1},r.getCharCountIndicator=function(i,o){if(!i.ccBits)throw new Error("Invalid mode: "+i);if(!t.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?i.ccBits[0]:o<27?i.ccBits[1]:i.ccBits[2]},r.getBestModeForData=function(i){return e.testNumeric(i)?r.NUMERIC:e.testAlphanumeric(i)?r.ALPHANUMERIC:e.testKanji(i)?r.KANJI:r.BYTE},r.toString=function(i){if(i&&i.id)return i.id;throw new Error("Invalid mode")},r.isValid=function(i){return i&&i.bit&&i.ccBits};function n(s){if(typeof s!="string")throw new Error("Param is not a string");switch(s.toLowerCase()){case"numeric":return r.NUMERIC;case"alphanumeric":return r.ALPHANUMERIC;case"kanji":return r.KANJI;case"byte":return r.BYTE;default:throw new Error("Unknown mode: "+s)}}r.from=function(i,o){if(r.isValid(i))return i;try{return n(i)}catch{return o}}})(to)),to}var Fc;function kg(){return Fc||(Fc=1,(function(r){const t=Hn(),e=_l(),n=ba(),s=Vn(),i=xl(),o=7973,c=t.getBCHDigit(o);function u(A,b,B){for(let M=1;M<=40;M++)if(b<=r.getCapacity(M,B,A))return M}function p(A,b){return s.getCharCountIndicator(A,b)+4}function y(A,b){let B=0;return A.forEach(function(M){const C=p(M.mode,b);B+=C+M.getBitsLength()}),B}function _(A,b){for(let B=1;B<=40;B++)if(y(A,B)<=r.getCapacity(B,b,s.MIXED))return B}r.from=function(b,B){return i.isValid(b)?parseInt(b,10):B},r.getCapacity=function(b,B,M){if(!i.isValid(b))throw new Error("Invalid QR Code version");typeof M>"u"&&(M=s.BYTE);const C=t.getSymbolTotalCodewords(b),O=e.getTotalCodewordsCount(b,B),D=(C-O)*8;if(M===s.MIXED)return D;const N=D-p(M,b);switch(M){case s.NUMERIC:return Math.floor(N/10*3);case s.ALPHANUMERIC:return Math.floor(N/11*2);case s.KANJI:return Math.floor(N/13);case s.BYTE:default:return Math.floor(N/8)}},r.getBestVersionForData=function(b,B){let M;const C=n.from(B,n.M);if(Array.isArray(b)){if(b.length>1)return _(b,C);if(b.length===0)return 1;M=b[0]}else M=b;return u(M.mode,M.getLength(),C)},r.getEncodedBits=function(b){if(!i.isValid(b)||b<7)throw new Error("Invalid QR Code version");let B=b<<12;for(;t.getBCHDigit(B)-c>=0;)B^=o<<t.getBCHDigit(B)-c;return b<<12|B}})(Qs)),Qs}var no={},Pc;function Tg(){if(Pc)return no;Pc=1;const r=Hn(),t=1335,e=21522,n=r.getBCHDigit(t);return no.getEncodedBits=function(i,o){const c=i.bit<<3|o;let u=c<<10;for(;r.getBCHDigit(u)-n>=0;)u^=t<<r.getBCHDigit(u)-n;return(c<<10|u)^e},no}var ro={},io,Dc;function Cg(){if(Dc)return io;Dc=1;const r=Vn();function t(e){this.mode=r.NUMERIC,this.data=e.toString()}return t.getBitsLength=function(n){return 10*Math.floor(n/3)+(n%3?n%3*3+1:0)},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(n){let s,i,o;for(s=0;s+3<=this.data.length;s+=3)i=this.data.substr(s,3),o=parseInt(i,10),n.put(o,10);const c=this.data.length-s;c>0&&(i=this.data.substr(s),o=parseInt(i,10),n.put(o,c*3+1))},io=t,io}var so,Wc;function Lg(){if(Wc)return so;Wc=1;const r=Vn(),t=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function e(n){this.mode=r.ALPHANUMERIC,this.data=n}return e.getBitsLength=function(s){return 11*Math.floor(s/2)+6*(s%2)},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(s){let i;for(i=0;i+2<=this.data.length;i+=2){let o=t.indexOf(this.data[i])*45;o+=t.indexOf(this.data[i+1]),s.put(o,11)}this.data.length%2&&s.put(t.indexOf(this.data[i]),6)},so=e,so}var oo,qc;function Ug(){if(qc)return oo;qc=1;const r=Vn();function t(e){this.mode=r.BYTE,typeof e=="string"?this.data=new TextEncoder().encode(e):this.data=new Uint8Array(e)}return t.getBitsLength=function(n){return n*8},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(e){for(let n=0,s=this.data.length;n<s;n++)e.put(this.data[n],8)},oo=t,oo}var ao,zc;function Ng(){if(zc)return ao;zc=1;const r=Vn(),t=Hn();function e(n){this.mode=r.KANJI,this.data=n}return e.getBitsLength=function(s){return s*13},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(n){let s;for(s=0;s<this.data.length;s++){let i=t.toSJIS(this.data[s]);if(i>=33088&&i<=40956)i-=33088;else if(i>=57408&&i<=60351)i-=49472;else throw new Error("Invalid SJIS character: "+this.data[s]+`
Make sure your charset is UTF-8`);i=(i>>>8&255)*192+(i&255),n.put(i,13)}},ao=e,ao}var co={exports:{}},Kc;function Og(){return Kc||(Kc=1,(function(r){var t={single_source_shortest_paths:function(e,n,s){var i={},o={};o[n]=0;var c=t.PriorityQueue.make();c.push(n,0);for(var u,p,y,_,A,b,B,M,C;!c.empty();){u=c.pop(),p=u.value,_=u.cost,A=e[p]||{};for(y in A)A.hasOwnProperty(y)&&(b=A[y],B=_+b,M=o[y],C=typeof o[y]>"u",(C||M>B)&&(o[y]=B,c.push(y,B),i[y]=p))}if(typeof s<"u"&&typeof o[s]>"u"){var O=["Could not find a path from ",n," to ",s,"."].join("");throw new Error(O)}return i},extract_shortest_path_from_predecessor_list:function(e,n){for(var s=[],i=n;i;)s.push(i),e[i],i=e[i];return s.reverse(),s},find_path:function(e,n,s){var i=t.single_source_shortest_paths(e,n,s);return t.extract_shortest_path_from_predecessor_list(i,s)},PriorityQueue:{make:function(e){var n=t.PriorityQueue,s={},i;e=e||{};for(i in n)n.hasOwnProperty(i)&&(s[i]=n[i]);return s.queue=[],s.sorter=e.sorter||n.default_sorter,s},default_sorter:function(e,n){return e.cost-n.cost},push:function(e,n){var s={value:e,cost:n};this.queue.push(s),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};r.exports=t})(co)),co.exports}var $c;function Fg(){return $c||($c=1,(function(r){const t=Vn(),e=Cg(),n=Lg(),s=Ug(),i=Ng(),o=Al(),c=Hn(),u=Og();function p(O){return unescape(encodeURIComponent(O)).length}function y(O,D,N){const V=[];let Z;for(;(Z=O.exec(N))!==null;)V.push({data:Z[0],index:Z.index,mode:D,length:Z[0].length});return V}function _(O){const D=y(o.NUMERIC,t.NUMERIC,O),N=y(o.ALPHANUMERIC,t.ALPHANUMERIC,O);let V,Z;return c.isKanjiModeEnabled()?(V=y(o.BYTE,t.BYTE,O),Z=y(o.KANJI,t.KANJI,O)):(V=y(o.BYTE_KANJI,t.BYTE,O),Z=[]),D.concat(N,V,Z).sort(function(Q,Y){return Q.index-Y.index}).map(function(Q){return{data:Q.data,mode:Q.mode,length:Q.length}})}function A(O,D){switch(D){case t.NUMERIC:return e.getBitsLength(O);case t.ALPHANUMERIC:return n.getBitsLength(O);case t.KANJI:return i.getBitsLength(O);case t.BYTE:return s.getBitsLength(O)}}function b(O){return O.reduce(function(D,N){const V=D.length-1>=0?D[D.length-1]:null;return V&&V.mode===N.mode?(D[D.length-1].data+=N.data,D):(D.push(N),D)},[])}function B(O){const D=[];for(let N=0;N<O.length;N++){const V=O[N];switch(V.mode){case t.NUMERIC:D.push([V,{data:V.data,mode:t.ALPHANUMERIC,length:V.length},{data:V.data,mode:t.BYTE,length:V.length}]);break;case t.ALPHANUMERIC:D.push([V,{data:V.data,mode:t.BYTE,length:V.length}]);break;case t.KANJI:D.push([V,{data:V.data,mode:t.BYTE,length:p(V.data)}]);break;case t.BYTE:D.push([{data:V.data,mode:t.BYTE,length:p(V.data)}])}}return D}function M(O,D){const N={},V={start:{}};let Z=["start"];for(let $=0;$<O.length;$++){const Q=O[$],Y=[];for(let k=0;k<Q.length;k++){const U=Q[k],W=""+$+k;Y.push(W),N[W]={node:U,lastCount:0},V[W]={};for(let q=0;q<Z.length;q++){const m=Z[q];N[m]&&N[m].node.mode===U.mode?(V[m][W]=A(N[m].lastCount+U.length,U.mode)-A(N[m].lastCount,U.mode),N[m].lastCount+=U.length):(N[m]&&(N[m].lastCount=U.length),V[m][W]=A(U.length,U.mode)+4+t.getCharCountIndicator(U.mode,D))}}Z=Y}for(let $=0;$<Z.length;$++)V[Z[$]].end=0;return{map:V,table:N}}function C(O,D){let N;const V=t.getBestModeForData(O);if(N=t.from(D,V),N!==t.BYTE&&N.bit<V.bit)throw new Error('"'+O+'" cannot be encoded with mode '+t.toString(N)+`.
 Suggested mode is: `+t.toString(V));switch(N===t.KANJI&&!c.isKanjiModeEnabled()&&(N=t.BYTE),N){case t.NUMERIC:return new e(O);case t.ALPHANUMERIC:return new n(O);case t.KANJI:return new i(O);case t.BYTE:return new s(O)}}r.fromArray=function(D){return D.reduce(function(N,V){return typeof V=="string"?N.push(C(V,null)):V.data&&N.push(C(V.data,V.mode)),N},[])},r.fromString=function(D,N){const V=_(D,c.isKanjiModeEnabled()),Z=B(V),$=M(Z,N),Q=u.find_path($.map,"start","end"),Y=[];for(let k=1;k<Q.length-1;k++)Y.push($.table[Q[k]].node);return r.fromArray(b(Y))},r.rawSplit=function(D){return r.fromArray(_(D,c.isKanjiModeEnabled()))}})(ro)),ro}var jc;function Pg(){if(jc)return $s;jc=1;const r=Hn(),t=ba(),e=Sg(),n=_g(),s=xg(),i=Ag(),o=Bg(),c=_l(),u=Rg(),p=kg(),y=Tg(),_=Vn(),A=Fg();function b($,Q){const Y=$.size,k=i.getPositions(Q);for(let U=0;U<k.length;U++){const W=k[U][0],q=k[U][1];for(let m=-1;m<=7;m++)if(!(W+m<=-1||Y<=W+m))for(let a=-1;a<=7;a++)q+a<=-1||Y<=q+a||(m>=0&&m<=6&&(a===0||a===6)||a>=0&&a<=6&&(m===0||m===6)||m>=2&&m<=4&&a>=2&&a<=4?$.set(W+m,q+a,!0,!0):$.set(W+m,q+a,!1,!0))}}function B($){const Q=$.size;for(let Y=8;Y<Q-8;Y++){const k=Y%2===0;$.set(Y,6,k,!0),$.set(6,Y,k,!0)}}function M($,Q){const Y=s.getPositions(Q);for(let k=0;k<Y.length;k++){const U=Y[k][0],W=Y[k][1];for(let q=-2;q<=2;q++)for(let m=-2;m<=2;m++)q===-2||q===2||m===-2||m===2||q===0&&m===0?$.set(U+q,W+m,!0,!0):$.set(U+q,W+m,!1,!0)}}function C($,Q){const Y=$.size,k=p.getEncodedBits(Q);let U,W,q;for(let m=0;m<18;m++)U=Math.floor(m/3),W=m%3+Y-8-3,q=(k>>m&1)===1,$.set(U,W,q,!0),$.set(W,U,q,!0)}function O($,Q,Y){const k=$.size,U=y.getEncodedBits(Q,Y);let W,q;for(W=0;W<15;W++)q=(U>>W&1)===1,W<6?$.set(W,8,q,!0):W<8?$.set(W+1,8,q,!0):$.set(k-15+W,8,q,!0),W<8?$.set(8,k-W-1,q,!0):W<9?$.set(8,15-W-1+1,q,!0):$.set(8,15-W-1,q,!0);$.set(k-8,8,1,!0)}function D($,Q){const Y=$.size;let k=-1,U=Y-1,W=7,q=0;for(let m=Y-1;m>0;m-=2)for(m===6&&m--;;){for(let a=0;a<2;a++)if(!$.isReserved(U,m-a)){let f=!1;q<Q.length&&(f=(Q[q]>>>W&1)===1),$.set(U,m-a,f),W--,W===-1&&(q++,W=7)}if(U+=k,U<0||Y<=U){U-=k,k=-k;break}}}function N($,Q,Y){const k=new e;Y.forEach(function(a){k.put(a.mode.bit,4),k.put(a.getLength(),_.getCharCountIndicator(a.mode,$)),a.write(k)});const U=r.getSymbolTotalCodewords($),W=c.getTotalCodewordsCount($,Q),q=(U-W)*8;for(k.getLengthInBits()+4<=q&&k.put(0,4);k.getLengthInBits()%8!==0;)k.putBit(0);const m=(q-k.getLengthInBits())/8;for(let a=0;a<m;a++)k.put(a%2?17:236,8);return V(k,$,Q)}function V($,Q,Y){const k=r.getSymbolTotalCodewords(Q),U=c.getTotalCodewordsCount(Q,Y),W=k-U,q=c.getBlocksCount(Q,Y),m=k%q,a=q-m,f=Math.floor(k/q),w=Math.floor(W/q),S=w+1,I=f-w,L=new u(I);let P=0;const x=new Array(q),l=new Array(q);let h=0;const E=new Uint8Array($.buffer);for(let st=0;st<q;st++){const Et=st<a?w:S;x[st]=E.slice(P,P+Et),l[st]=L.encode(x[st]),P+=Et,h=Math.max(h,Et)}const T=new Uint8Array(k);let K=0,J,nt;for(J=0;J<h;J++)for(nt=0;nt<q;nt++)J<x[nt].length&&(T[K++]=x[nt][J]);for(J=0;J<I;J++)for(nt=0;nt<q;nt++)T[K++]=l[nt][J];return T}function Z($,Q,Y,k){let U;if(Array.isArray($))U=A.fromArray($);else if(typeof $=="string"){let f=Q;if(!f){const w=A.rawSplit($);f=p.getBestVersionForData(w,Y)}U=A.fromString($,f||40)}else throw new Error("Invalid data");const W=p.getBestVersionForData(U,Y);if(!W)throw new Error("The amount of data is too big to be stored in a QR Code");if(!Q)Q=W;else if(Q<W)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+W+`.
`);const q=N(Q,Y,U),m=r.getSymbolSize(Q),a=new n(m);return b(a,Q),B(a),M(a,Q),O(a,Y,0),Q>=7&&C(a,Q),D(a,q),isNaN(k)&&(k=o.getBestMask(a,O.bind(null,a,Y))),o.applyMask(k,a),O(a,Y,k),{modules:a,version:Q,errorCorrectionLevel:Y,maskPattern:k,segments:U}}return $s.create=function(Q,Y){if(typeof Q>"u"||Q==="")throw new Error("No input text");let k=t.M,U,W;return typeof Y<"u"&&(k=t.from(Y.errorCorrectionLevel,t.M),U=p.from(Y.version),W=o.from(Y.maskPattern),Y.toSJISFunc&&r.setToSJISFunction(Y.toSJISFunc)),Z(Q,U,k,W)},$s}var uo={},lo={},Hc;function Bl(){return Hc||(Hc=1,(function(r){function t(e){if(typeof e=="number"&&(e=e.toString()),typeof e!="string")throw new Error("Color should be defined as hex string");let n=e.slice().replace("#","").split("");if(n.length<3||n.length===5||n.length>8)throw new Error("Invalid hex color: "+e);(n.length===3||n.length===4)&&(n=Array.prototype.concat.apply([],n.map(function(i){return[i,i]}))),n.length===6&&n.push("F","F");const s=parseInt(n.join(""),16);return{r:s>>24&255,g:s>>16&255,b:s>>8&255,a:s&255,hex:"#"+n.slice(0,6).join("")}}r.getOptions=function(n){n||(n={}),n.color||(n.color={});const s=typeof n.margin>"u"||n.margin===null||n.margin<0?4:n.margin,i=n.width&&n.width>=21?n.width:void 0,o=n.scale||4;return{width:i,scale:i?4:o,margin:s,color:{dark:t(n.color.dark||"#000000ff"),light:t(n.color.light||"#ffffffff")},type:n.type,rendererOpts:n.rendererOpts||{}}},r.getScale=function(n,s){return s.width&&s.width>=n+s.margin*2?s.width/(n+s.margin*2):s.scale},r.getImageWidth=function(n,s){const i=r.getScale(n,s);return Math.floor((n+s.margin*2)*i)},r.qrToImageData=function(n,s,i){const o=s.modules.size,c=s.modules.data,u=r.getScale(o,i),p=Math.floor((o+i.margin*2)*u),y=i.margin*u,_=[i.color.light,i.color.dark];for(let A=0;A<p;A++)for(let b=0;b<p;b++){let B=(A*p+b)*4,M=i.color.light;if(A>=y&&b>=y&&A<p-y&&b<p-y){const C=Math.floor((A-y)/u),O=Math.floor((b-y)/u);M=_[c[C*o+O]?1:0]}n[B++]=M.r,n[B++]=M.g,n[B++]=M.b,n[B]=M.a}}})(lo)),lo}var Vc;function Dg(){return Vc||(Vc=1,(function(r){const t=Bl();function e(s,i,o){s.clearRect(0,0,i.width,i.height),i.style||(i.style={}),i.height=o,i.width=o,i.style.height=o+"px",i.style.width=o+"px"}function n(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}r.render=function(i,o,c){let u=c,p=o;typeof u>"u"&&(!o||!o.getContext)&&(u=o,o=void 0),o||(p=n()),u=t.getOptions(u);const y=t.getImageWidth(i.modules.size,u),_=p.getContext("2d"),A=_.createImageData(y,y);return t.qrToImageData(A.data,i,u),e(_,p,y),_.putImageData(A,0,0),p},r.renderToDataURL=function(i,o,c){let u=c;typeof u>"u"&&(!o||!o.getContext)&&(u=o,o=void 0),u||(u={});const p=r.render(i,o,u),y=u.type||"image/png",_=u.rendererOpts||{};return p.toDataURL(y,_.quality)}})(uo)),uo}var fo={},Gc;function Wg(){if(Gc)return fo;Gc=1;const r=Bl();function t(s,i){const o=s.a/255,c=i+'="'+s.hex+'"';return o<1?c+" "+i+'-opacity="'+o.toFixed(2).slice(1)+'"':c}function e(s,i,o){let c=s+i;return typeof o<"u"&&(c+=" "+o),c}function n(s,i,o){let c="",u=0,p=!1,y=0;for(let _=0;_<s.length;_++){const A=Math.floor(_%i),b=Math.floor(_/i);!A&&!p&&(p=!0),s[_]?(y++,_>0&&A>0&&s[_-1]||(c+=p?e("M",A+o,.5+b+o):e("m",u,0),u=0,p=!1),A+1<i&&s[_+1]||(c+=e("h",y),y=0)):u++}return c}return fo.render=function(i,o,c){const u=r.getOptions(o),p=i.modules.size,y=i.modules.data,_=p+u.margin*2,A=u.color.light.a?"<path "+t(u.color.light,"fill")+' d="M0 0h'+_+"v"+_+'H0z"/>':"",b="<path "+t(u.color.dark,"stroke")+' d="'+n(y,p,u.margin)+'"/>',B='viewBox="0 0 '+_+" "+_+'"',C='<svg xmlns="http://www.w3.org/2000/svg" '+(u.width?'width="'+u.width+'" height="'+u.width+'" ':"")+B+' shape-rendering="crispEdges">'+A+b+`</svg>
`;return typeof c=="function"&&c(null,C),C},fo}var Zc;function qg(){if(Zc)return Xn;Zc=1;const r=Eg(),t=Pg(),e=Dg(),n=Wg();function s(i,o,c,u,p){const y=[].slice.call(arguments,1),_=y.length,A=typeof y[_-1]=="function";if(!A&&!r())throw new Error("Callback required as last argument");if(A){if(_<2)throw new Error("Too few arguments provided");_===2?(p=c,c=o,o=u=void 0):_===3&&(o.getContext&&typeof p>"u"?(p=u,u=void 0):(p=u,u=c,c=o,o=void 0))}else{if(_<1)throw new Error("Too few arguments provided");return _===1?(c=o,o=u=void 0):_===2&&!o.getContext&&(u=c,c=o,o=void 0),new Promise(function(b,B){try{const M=t.create(c,u);b(i(M,o,u))}catch(M){B(M)}})}try{const b=t.create(c,u);p(null,i(b,o,u))}catch(b){p(b)}}return Xn.create=t.create,Xn.toCanvas=s.bind(null,e.render),Xn.toDataURL=s.bind(null,e.renderToDataURL),Xn.toString=s.bind(null,function(i,o,c){return n.render(i,c)}),Xn}qg();function ho(r){switch(r){case"processed":case"confirmed":case"finalized":case void 0:return r;case"recent":return"processed";case"single":case"singleGossip":return"confirmed";case"max":case"root":return"finalized";default:return}}const Fi="solana:mainnet",zg="solana:devnet",Kg="solana:testnet",$g="solana:localnet",jg="https://api.mainnet-beta.solana.com";function Hg(r){return r.includes(jg)?Fi:/\bdevnet\b/i.test(r)?zg:/\btestnet\b/i.test(r)?Kg:/\blocalhost\b/i.test(r)||/\b127\.0\.0\.1\b/.test(r)?$g:Fi}function Vg(r){let t=`${r.domain} wants you to sign in with your Solana account:
`;t+=`${r.address}`,r.statement&&(t+=`

${r.statement}`);const e=[];if(r.uri&&e.push(`URI: ${r.uri}`),r.version&&e.push(`Version: ${r.version}`),r.chainId&&e.push(`Chain ID: ${r.chainId}`),r.nonce&&e.push(`Nonce: ${r.nonce}`),r.issuedAt&&e.push(`Issued At: ${r.issuedAt}`),r.expirationTime&&e.push(`Expiration Time: ${r.expirationTime}`),r.notBefore&&e.push(`Not Before: ${r.notBefore}`),r.requestId&&e.push(`Request ID: ${r.requestId}`),r.resources){e.push("Resources:");for(const n of r.resources)e.push(`- ${n}`)}return e.length&&(t+=`

${e.join(`
`)}`),t}function Gg(r){return Object.freeze({...r,decode:(t,e=0)=>r.read(t,e)[0]})}var Zg=r=>Gg({read(t,e){const n=e===0?t:t.slice(e);if(n.length===0)return["",0];let s=n.findIndex(u=>u!==0);s=s===-1?n.length:s;const i=r[0].repeat(s);if(s===n.length)return[i,t.length];const o=n.slice(s).reduce((u,p)=>u*256n+BigInt(p),0n),c=Yg(o,r);return[i+c,t.length]}});function Yg(r,t){const e=BigInt(t.length),n=[];for(;r>0n;)n.unshift(t[Number(r%e)]),r/=e;return n.join("")}var Jg="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",Xg=()=>Zg(Jg);const cn={ERROR_ASSOCIATION_PORT_OUT_OF_RANGE:"ERROR_ASSOCIATION_PORT_OUT_OF_RANGE",ERROR_FORBIDDEN_WALLET_BASE_URL:"ERROR_FORBIDDEN_WALLET_BASE_URL",ERROR_SECURE_CONTEXT_REQUIRED:"ERROR_SECURE_CONTEXT_REQUIRED",ERROR_SESSION_CLOSED:"ERROR_SESSION_CLOSED",ERROR_SESSION_TIMEOUT:"ERROR_SESSION_TIMEOUT",ERROR_WALLET_NOT_FOUND:"ERROR_WALLET_NOT_FOUND",ERROR_INVALID_PROTOCOL_VERSION:"ERROR_INVALID_PROTOCOL_VERSION"};class un extends Error{constructor(...t){const[e,n,s]=t;super(n),this.code=e,this.data=s,this.name="SolanaMobileWalletAdapterError"}}class Ml extends Error{constructor(...t){const[e,n,s,i]=t;super(s),this.code=n,this.data=i,this.jsonRpcMessageId=e,this.name="SolanaMobileWalletAdapterProtocolError"}}function ge(r,t,e,n){function s(i){return i instanceof e?i:new e(function(o){o(i)})}return new(e||(e=Promise))(function(i,o){function c(y){try{p(n.next(y))}catch(_){o(_)}}function u(y){try{p(n.throw(y))}catch(_){o(_)}}function p(y){y.done?i(y.value):s(y.value).then(c,u)}p((n=n.apply(r,[])).next())})}function Qg(r){return window.btoa(r)}function Yc(r,t){return window.btoa(String.fromCharCode.call(null,...r))}function Il(r){return new Uint8Array(window.atob(r).split("").map(t=>t.charCodeAt(0)))}function go(r,t){return ge(this,void 0,void 0,function*(){const e=yield crypto.subtle.exportKey("raw",r),n=yield crypto.subtle.sign({hash:"SHA-256",name:"ECDSA"},t,e),s=new Uint8Array(e.byteLength+n.byteLength);return s.set(new Uint8Array(e),0),s.set(new Uint8Array(n),e.byteLength),s})}function tp(r){return Vg(r)}function ep(r){return Qg(tp(r)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}const np="solana:signTransactions",Jc="solana:cloneAuthorization";function rp(r){return Xg().decode(r)}function ip(r){return rp(Il(r))}function sp(r,t){return new Proxy({},{get(e,n){return n==="then"?null:(e[n]==null&&(e[n]=function(s){return ge(this,void 0,void 0,function*(){const{method:i,params:o}=op(n,s,r),c=yield t(i,o);return i==="authorize"&&o.sign_in_payload&&!c.sign_in_result&&(c.sign_in_result=yield cp(o.sign_in_payload,c,t)),ap(n,c,r)})}),e[n])},defineProperty(){return!1},deleteProperty(){return!1}})}function op(r,t,e){let n=t,s=r.toString().replace(/[A-Z]/g,i=>`_${i.toLowerCase()}`).toLowerCase();switch(r){case"authorize":{let{chain:i}=n;if(e==="legacy"){switch(i){case"solana:testnet":{i="testnet";break}case"solana:devnet":{i="devnet";break}case"solana:mainnet":{i="mainnet-beta";break}default:i=n.cluster}n.cluster=i}else{switch(i){case"testnet":case"devnet":{i=`solana:${i}`;break}case"mainnet-beta":{i="solana:mainnet";break}}n.chain=i}}case"reauthorize":{const{auth_token:i,identity:o}=n;if(i)switch(e){case"legacy":{s="reauthorize",n={auth_token:i,identity:o};break}default:{s="authorize";break}}break}}return{method:s,params:n}}function ap(r,t,e){switch(r){case"getCapabilities":{const n=t;switch(e){case"legacy":{const s=[np];return n.supports_clone_authorization===!0&&s.push(Jc),Object.assign(Object.assign({},n),{features:s})}case"v1":return Object.assign(Object.assign({},n),{supports_sign_and_send_transactions:!0,supports_clone_authorization:n.features.includes(Jc)})}}}return t}function cp(r,t,e){var n;return ge(this,void 0,void 0,function*(){const s=(n=r.domain)!==null&&n!==void 0?n:window.location.host,i=t.accounts[0].address,o=ep(Object.assign(Object.assign({},r),{domain:s,address:ip(i)})),c=yield e("sign_messages",{addresses:[i],payloads:[o]}),u=Il(c.signed_payloads[0]),p=Yc(u.slice(0,u.length-64)),y=Yc(u.slice(u.length-64));return{address:i,signed_message:p.length==0?o:p,signature:y}})}const Un=4;function up(r){if(r>=4294967296)throw new Error("Outbound sequence number overflow. The maximum sequence number is 32-bytes.");const t=new ArrayBuffer(Un);return new DataView(t).setUint32(0,r,!1),new Uint8Array(t)}const To=12,Rl=65;function lp(r,t,e){return ge(this,void 0,void 0,function*(){const n=up(t),s=new Uint8Array(To);crypto.getRandomValues(s);const i=yield crypto.subtle.encrypt(Tl(n,s),e,new TextEncoder().encode(r)),o=new Uint8Array(n.byteLength+s.byteLength+i.byteLength);return o.set(new Uint8Array(n),0),o.set(new Uint8Array(s),n.byteLength),o.set(new Uint8Array(i),n.byteLength+s.byteLength),o})}function kl(r,t){return ge(this,void 0,void 0,function*(){const e=r.slice(0,Un),n=r.slice(Un,Un+To),s=r.slice(Un+To),i=yield crypto.subtle.decrypt(Tl(e,n),t,s);return fp().decode(i)})}function Tl(r,t){return{additionalData:r,iv:t,name:"AES-GCM",tagLength:128}}let po;function fp(){return po===void 0&&(po=new TextDecoder("utf-8")),po}function hp(){return ge(this,void 0,void 0,function*(){return yield crypto.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},!1,["sign"])})}function mo(){return ge(this,void 0,void 0,function*(){return yield crypto.subtle.generateKey({name:"ECDH",namedCurve:"P-256"},!1,["deriveKey","deriveBits"])})}function dp(r){let t="";const e=new Uint8Array(r),n=e.byteLength;for(let s=0;s<n;s++)t+=String.fromCharCode(e[s]);return window.btoa(t)}function gp(){return Cl(49152+Math.floor(Math.random()*16384))}function Cl(r){if(r<49152||r>65535)throw new un(cn.ERROR_ASSOCIATION_PORT_OUT_OF_RANGE,`Association port number must be between 49152 and 65535. ${r} given.`,{port:r});return r}function pp(r){return r.replace(/[/+=]/g,t=>({"/":"_","+":"-","=":"."})[t])}const mp="solana-wallet";function Xc(r){return r.replace(/(^\/+|\/+$)/g,"").split("/")}function wp(r,t){let e=null;if(t){try{e=new URL(t)}catch{}if(e?.protocol!=="https:")throw new un(cn.ERROR_FORBIDDEN_WALLET_BASE_URL,"Base URLs supplied by wallets must be valid `https` URLs")}e||(e=new URL(`${mp}:/`));const n=r.startsWith("/")?r:[...Xc(e.pathname),...Xc(r)].join("/");return new URL(n,e)}function yp(r,t,e,n=["v1"]){return ge(this,void 0,void 0,function*(){const s=Cl(t),i=yield crypto.subtle.exportKey("raw",r),o=dp(i),c=wp("v1/associate/local",e);return c.searchParams.set("association",pp(o)),c.searchParams.set("port",`${s}`),n.forEach(u=>{c.searchParams.set("v",u)}),c})}function bp(r,t){return ge(this,void 0,void 0,function*(){const e=JSON.stringify(r),n=r.id;return lp(e,n,t)})}function vp(r,t){return ge(this,void 0,void 0,function*(){const e=yield kl(r,t),n=JSON.parse(e);if(Object.hasOwnProperty.call(n,"error"))throw new Ml(n.id,n.error.code,n.error.message);return n})}function Ep(r,t,e){return ge(this,void 0,void 0,function*(){const[n,s]=yield Promise.all([crypto.subtle.exportKey("raw",t),crypto.subtle.importKey("raw",r.slice(0,Rl),{name:"ECDH",namedCurve:"P-256"},!1,[])]),i=yield crypto.subtle.deriveBits({name:"ECDH",public:s},e,256),o=yield crypto.subtle.importKey("raw",i,"HKDF",!1,["deriveKey"]);return yield crypto.subtle.deriveKey({name:"HKDF",hash:"SHA-256",salt:new Uint8Array(n),info:new Uint8Array},o,{name:"AES-GCM",length:128},!1,["encrypt","decrypt"])})}function Sp(r,t){return ge(this,void 0,void 0,function*(){const e=yield kl(r,t),n=JSON.parse(e);let s="legacy";if(Object.hasOwnProperty.call(n,"v"))switch(n.v){case 1:case"1":case"v1":s="v1";break;case"legacy":s="legacy";break;default:throw new un(cn.ERROR_INVALID_PROTOCOL_VERSION,`Unknown/unsupported protocol version: ${n.v}`)}return{protocol_version:s}})}const Pi={Firefox:0,Other:1};function _p(){return navigator.userAgent.indexOf("Firefox/")!==-1?Pi.Firefox:Pi.Other}function xp(){return new Promise((r,t)=>{function e(){clearTimeout(s),window.removeEventListener("blur",n)}function n(){e(),r()}window.addEventListener("blur",n);const s=setTimeout(()=>{e(),t()},3e3)})}let _r=null;function Ap(r){_r==null&&(_r=document.createElement("iframe"),_r.style.display="none",document.body.appendChild(_r)),_r.contentWindow.location.href=r.toString()}function Bp(r){return ge(this,void 0,void 0,function*(){if(r.protocol==="https:")window.location.assign(r);else try{const t=_p();switch(t){case Pi.Firefox:Ap(r);break;case Pi.Other:{const e=xp();window.location.assign(r),yield e;break}default:}}catch{throw new un(cn.ERROR_WALLET_NOT_FOUND,"Found no installed wallet that supports the mobile wallet protocol.")}})}function Mp(r,t){return ge(this,void 0,void 0,function*(){const e=gp(),n=yield yp(r,e,t);return yield Bp(n),e})}const Qc={retryDelayScheduleMs:[150,150,200,500,500,750,750,1e3],timeoutMs:3e4},Ip="com.solana.mobilewalletadapter.v1";function Rp(){if(typeof window>"u"||window.isSecureContext!==!0)throw new un(cn.ERROR_SECURE_CONTEXT_REQUIRED,"The mobile wallet adapter protocol must be used in a secure context (`https`).")}function kp(r){let t;try{t=new URL(r)}catch{throw new un(cn.ERROR_FORBIDDEN_WALLET_BASE_URL,"Invalid base URL supplied by wallet")}if(t.protocol!=="https:")throw new un(cn.ERROR_FORBIDDEN_WALLET_BASE_URL,"Base URLs supplied by wallets must be valid `https` URLs")}function tu(r){return new DataView(r).getUint32(0,!1)}function Tp(r,t){return ge(this,void 0,void 0,function*(){Rp();const e=yield hp(),s=`ws://localhost:${yield Mp(e.publicKey,t?.baseUri)}/solana-wallet`;let i;const o=(()=>{const y=[...Qc.retryDelayScheduleMs];return()=>y.length>1?y.shift():y[0]})();let c=1,u=0,p={__type:"disconnected"};return new Promise((y,_)=>{let A;const b={},B=()=>ge(this,void 0,void 0,function*(){if(p.__type!=="connecting"){console.warn(`Expected adapter state to be \`connecting\` at the moment the websocket opens. Got \`${p.__type}\`.`);return}A.removeEventListener("open",B);const{associationKeypair:Z}=p,$=yield mo();A.send(yield go($.publicKey,Z.privateKey)),p={__type:"hello_req_sent",associationPublicKey:Z.publicKey,ecdhPrivateKey:$.privateKey}}),M=Z=>{Z.wasClean?p={__type:"disconnected"}:_(new un(cn.ERROR_SESSION_CLOSED,`The wallet session dropped unexpectedly (${Z.code}: ${Z.reason}).`,{closeEvent:Z})),D()},C=Z=>ge(this,void 0,void 0,function*(){D(),Date.now()-i>=Qc.timeoutMs?_(new un(cn.ERROR_SESSION_TIMEOUT,`Failed to connect to the wallet websocket at ${s}.`)):(yield new Promise($=>{const Q=o();N=window.setTimeout($,Q)}),V())}),O=Z=>ge(this,void 0,void 0,function*(){const $=yield Z.data.arrayBuffer();switch(p.__type){case"connecting":if($.byteLength!==0)throw new Error("Encountered unexpected message while connecting");const Q=yield mo();A.send(yield go(Q.publicKey,e.privateKey)),p={__type:"hello_req_sent",associationPublicKey:e.publicKey,ecdhPrivateKey:Q.privateKey};break;case"connected":try{const Y=$.slice(0,Un),k=tu(Y);if(k!==u+1)throw new Error("Encrypted message has invalid sequence number");u=k;const U=yield vp($,p.sharedSecret),W=b[U.id];delete b[U.id],W.resolve(U.result)}catch(Y){if(Y instanceof Ml){const k=b[Y.jsonRpcMessageId];delete b[Y.jsonRpcMessageId],k.reject(Y)}else throw Y}break;case"hello_req_sent":{if($.byteLength===0){const q=yield mo();A.send(yield go(q.publicKey,e.privateKey)),p={__type:"hello_req_sent",associationPublicKey:e.publicKey,ecdhPrivateKey:q.privateKey};break}const Y=yield Ep($,p.associationPublicKey,p.ecdhPrivateKey),k=$.slice(Rl),U=k.byteLength!==0?yield ge(this,void 0,void 0,function*(){const q=k.slice(0,Un),m=tu(q);if(m!==u+1)throw new Error("Encrypted message has invalid sequence number");return u=m,Sp(k,Y)}):{protocol_version:"legacy"};p={__type:"connected",sharedSecret:Y,sessionProperties:U};const W=sp(U.protocol_version,(q,m)=>ge(this,void 0,void 0,function*(){const a=c++;return A.send(yield bp({id:a,jsonrpc:"2.0",method:q,params:m??{}},Y)),new Promise((f,w)=>{b[a]={resolve(S){switch(q){case"authorize":case"reauthorize":{const{wallet_uri_base:I}=S;if(I!=null)try{kp(I)}catch(L){w(L);return}break}}f(S)},reject:w}})}));try{y(yield r(W))}catch(q){_(q)}finally{D(),A.close()}break}}});let D,N;const V=()=>{D&&D(),p={__type:"connecting",associationKeypair:e},i===void 0&&(i=Date.now()),A=new WebSocket(s,[Ip]),A.addEventListener("open",B),A.addEventListener("close",M),A.addEventListener("error",C),A.addEventListener("message",O),D=()=>{window.clearTimeout(N),A.removeEventListener("open",B),A.removeEventListener("close",M),A.removeEventListener("error",C),A.removeEventListener("message",O)}};V()})})}var wo,eu;function Cp(){if(eu)return wo;eu=1;function r(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),n=0;n<e.length;n++)e[n]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(e[o]!==255)throw new TypeError(i+" is ambiguous");e[o]=s}var c=t.length,u=t.charAt(0),p=Math.log(c)/Math.log(256),y=Math.log(256)/Math.log(c);function _(B){if(B instanceof Uint8Array||(ArrayBuffer.isView(B)?B=new Uint8Array(B.buffer,B.byteOffset,B.byteLength):Array.isArray(B)&&(B=Uint8Array.from(B))),!(B instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(B.length===0)return"";for(var M=0,C=0,O=0,D=B.length;O!==D&&B[O]===0;)O++,M++;for(var N=(D-O)*y+1>>>0,V=new Uint8Array(N);O!==D;){for(var Z=B[O],$=0,Q=N-1;(Z!==0||$<C)&&Q!==-1;Q--,$++)Z+=256*V[Q]>>>0,V[Q]=Z%c>>>0,Z=Z/c>>>0;if(Z!==0)throw new Error("Non-zero carry");C=$,O++}for(var Y=N-C;Y!==N&&V[Y]===0;)Y++;for(var k=u.repeat(M);Y<N;++Y)k+=t.charAt(V[Y]);return k}function A(B){if(typeof B!="string")throw new TypeError("Expected String");if(B.length===0)return new Uint8Array;for(var M=0,C=0,O=0;B[M]===u;)C++,M++;for(var D=(B.length-M)*p+1>>>0,N=new Uint8Array(D);B[M];){var V=B.charCodeAt(M);if(V>255)return;var Z=e[V];if(Z===255)return;for(var $=0,Q=D-1;(Z!==0||$<O)&&Q!==-1;Q--,$++)Z+=c*N[Q]>>>0,N[Q]=Z%256>>>0,Z=Z/256>>>0;if(Z!==0)throw new Error("Non-zero carry");O=$,M++}for(var Y=D-O;Y!==D&&N[Y]===0;)Y++;for(var k=new Uint8Array(C+(D-Y)),U=C;Y!==D;)k[U++]=N[Y++];return k}function b(B){var M=A(B);if(M)return M;throw new Error("Non-base"+c+" character")}return{encode:_,decodeUnsafe:A,decode:b}}return wo=r,wo}var yo,nu;function Lp(){return nu||(nu=1,yo=Cp()("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")),yo}var Up=Lp();const Co=Dr(Up);function Lt(r,t,e,n){function s(i){return i instanceof e?i:new e(function(o){o(i)})}return new(e||(e=Promise))(function(i,o){function c(y){try{p(n.next(y))}catch(_){o(_)}}function u(y){try{p(n.throw(y))}catch(_){o(_)}}function p(y){y.done?i(y.value):s(y.value).then(c,u)}p((n=n.apply(r,[])).next())})}function tt(r,t,e,n){if(e==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?r!==t||!n:!t.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e==="m"?n:e==="a"?n.call(r):n?n.value:t.get(r)}function fe(r,t,e,n,s){if(typeof t=="function"?r!==t||!0:!t.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(r,e),e}var Br,pe,xn,tr,Ll,Ul,Nl,ci;const Np=`
<div class="mobile-wallet-adapter-embedded-modal-container" role="dialog" aria-modal="true" aria-labelledby="modal-title">
    <div data-modal-close style="position: absolute; width: 100%; height: 100%;"></div>
	<div class="mobile-wallet-adapter-embedded-modal-card">
		<div>
			<button data-modal-close class="mobile-wallet-adapter-embedded-modal-close">
				<svg width="14" height="14">
					<path d="M 6.7125,8.3036995 1.9082,13.108199 c -0.2113,0.2112 -0.4765,0.3168 -0.7957,0.3168 -0.3192,0 -0.5844,-0.1056 -0.7958,-0.3168 C 0.1056,12.896899 0,12.631699 0,12.312499 c 0,-0.3192 0.1056,-0.5844 0.3167,-0.7958 L 5.1212,6.7124995 0.3167,1.9082 C 0.1056,1.6969 0,1.4317 0,1.1125 0,0.7933 0.1056,0.5281 0.3167,0.3167 0.5281,0.1056 0.7933,0 1.1125,0 1.4317,0 1.6969,0.1056 1.9082,0.3167 L 6.7125,5.1212 11.5167,0.3167 C 11.7281,0.1056 11.9933,0 12.3125,0 c 0.3192,0 0.5844,0.1056 0.7957,0.3167 0.2112,0.2114 0.3168,0.4766 0.3168,0.7958 0,0.3192 -0.1056,0.5844 -0.3168,0.7957 L 8.3037001,6.7124995 13.1082,11.516699 c 0.2112,0.2114 0.3168,0.4766 0.3168,0.7958 0,0.3192 -0.1056,0.5844 -0.3168,0.7957 -0.2113,0.2112 -0.4765,0.3168 -0.7957,0.3168 -0.3192,0 -0.5844,-0.1056 -0.7958,-0.3168 z" />
				</svg>
			</button>
		</div>
		<div class="mobile-wallet-adapter-embedded-modal-content"></div>
	</div>
</div>
`,Op=`
.mobile-wallet-adapter-embedded-modal-container {
    display: flex; /* Use flexbox to center content */
    justify-content: center; /* Center horizontally */
    align-items: center; /* Center vertically */
    position: fixed; /* Stay in place */
    z-index: 1; /* Sit on top */
    left: 0;
    top: 0;
    width: 100%; /* Full width */
    height: 100%; /* Full height */
    background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
    overflow-y: auto; /* enable scrolling */
}

.mobile-wallet-adapter-embedded-modal-card {
    display: flex;
    flex-direction: column;
    margin: auto 20px;
    max-width: 780px;
    padding: 20px;
    border-radius: 24px;
    background: #ffffff;
    font-family: "Inter Tight", "PT Sans", Calibri, sans-serif;
    transform: translateY(-200%);
    animation: slide-in 0.5s forwards;
}

@keyframes slide-in {
    100% { transform: translateY(0%); }
}

.mobile-wallet-adapter-embedded-modal-close {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 32px;
    height: 32px;
    cursor: pointer;
    background: #e4e9e9;
    border: none;
    border-radius: 50%;
}

.mobile-wallet-adapter-embedded-modal-close:focus-visible {
    outline-color: red;
}

.mobile-wallet-adapter-embedded-modal-close svg {
    fill: #546266;
    transition: fill 200ms ease 0s;
}

.mobile-wallet-adapter-embedded-modal-close:hover svg {
    fill: #fff;
}
`,Fp=`
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter+Tight:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
`;class Pp{constructor(){Br.add(this),pe.set(this,null),xn.set(this,{}),tr.set(this,!1),this.dom=null,this.open=()=>{console.debug("Modal open"),tt(this,Br,"m",Ul).call(this),tt(this,pe,"f")&&(tt(this,pe,"f").style.display="flex")},this.close=(t=void 0)=>{var e;console.debug("Modal close"),tt(this,Br,"m",Nl).call(this),tt(this,pe,"f")&&(tt(this,pe,"f").style.display="none"),(e=tt(this,xn,"f").close)===null||e===void 0||e.forEach(n=>n(t))},ci.set(this,t=>{t.key==="Escape"&&this.close(t)}),this.init=this.init.bind(this),fe(this,pe,document.getElementById("mobile-wallet-adapter-embedded-root-ui"))}init(){return Lt(this,void 0,void 0,function*(){console.log("Injecting modal"),tt(this,Br,"m",Ll).call(this)})}addEventListener(t,e){var n;return!((n=tt(this,xn,"f")[t])===null||n===void 0)&&n.push(e)||(tt(this,xn,"f")[t]=[e]),()=>this.removeEventListener(t,e)}removeEventListener(t,e){var n;tt(this,xn,"f")[t]=(n=tt(this,xn,"f")[t])===null||n===void 0?void 0:n.filter(s=>e!==s)}}pe=new WeakMap,xn=new WeakMap,tr=new WeakMap,ci=new WeakMap,Br=new WeakSet,Ll=function(){if(document.getElementById("mobile-wallet-adapter-embedded-root-ui")){tt(this,pe,"f")||fe(this,pe,document.getElementById("mobile-wallet-adapter-embedded-root-ui"));return}fe(this,pe,document.createElement("div")),tt(this,pe,"f").id="mobile-wallet-adapter-embedded-root-ui",tt(this,pe,"f").innerHTML=Np,tt(this,pe,"f").style.display="none";const t=tt(this,pe,"f").querySelector(".mobile-wallet-adapter-embedded-modal-content");t&&(t.innerHTML=this.contentHtml);const e=document.createElement("style");e.id="mobile-wallet-adapter-embedded-modal-styles",e.textContent=Op+this.contentStyles;const n=document.createElement("div");n.innerHTML=Fp,this.dom=n.attachShadow({mode:"closed"}),this.dom.appendChild(e),this.dom.appendChild(tt(this,pe,"f")),document.body.appendChild(n)},Ul=function(){if(!tt(this,pe,"f")||tt(this,tr,"f"))return;[...tt(this,pe,"f").querySelectorAll("[data-modal-close]")].forEach(e=>e?.addEventListener("click",this.close)),window.addEventListener("load",this.close),document.addEventListener("keydown",tt(this,ci,"f")),fe(this,tr,!0)},Nl=function(){if(!tt(this,tr,"f")||(window.removeEventListener("load",this.close),document.removeEventListener("keydown",tt(this,ci,"f")),!tt(this,pe,"f")))return;[...tt(this,pe,"f").querySelectorAll("[data-modal-close]")].forEach(e=>e?.removeEventListener("click",this.close)),fe(this,tr,!1)};const Dp="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik03IDIuNUgxN0MxNy44Mjg0IDIuNSAxOC41IDMuMTcxNTcgMTguNSA0VjIwQzE4LjUgMjAuODI4NCAxNy44Mjg0IDIxLjUgMTcgMjEuNUg3QzYuMTcxNTcgMjEuNSA1LjUgMjAuODI4NCA1LjUgMjBWNEM1LjUgMy4xNzE1NyA2LjE3MTU3IDIuNSA3IDIuNVpNMyA0QzMgMS43OTA4NiA0Ljc5MDg2IDAgNyAwSDE3QzE5LjIwOTEgMCAyMSAxLjc5MDg2IDIxIDRWMjBDMjEgMjIuMjA5MSAxOS4yMDkxIDI0IDE3IDI0SDdDNC43OTA4NiAyNCAzIDIyLjIwOTEgMyAyMFY0Wk0xMSA0LjYxNTM4QzEwLjQ0NzcgNC42MTUzOCAxMCA1LjA2MzEgMTAgNS42MTUzOFY2LjM4NDYyQzEwIDYuOTM2OSAxMC40NDc3IDcuMzg0NjIgMTEgNy4zODQ2MkgxM0MxMy41NTIzIDcuMzg0NjIgMTQgNi45MzY5IDE0IDYuMzg0NjJWNS42MTUzOEMxNCA1LjA2MzEgMTMuNTUyMyA0LjYxNTM4IDEzIDQuNjE1MzhIMTFaIiBmaWxsPSIjRENCOEZGIi8+Cjwvc3ZnPgo=";function si(r){return window.btoa(String.fromCharCode.call(null,...r))}function wn(r){return new Uint8Array(window.atob(r).split("").map(t=>t.charCodeAt(0)))}var er,Nn,Lo,Uo,No,Oo,Mr,Me,Qe,yn,nr,An,ui,Ir,li,Fo,fi,Ol,Po,hi,rr,di,Rr,gi,ir,kr,pi,Do,Wo,mi,wi,qo,zo,yi;const Fl="Mobile Wallet Adapter",Wp=64,qp=[Te,Ft,vn,Dn];class zp{constructor(t){er.add(this),Nn.set(this,{}),Lo.set(this,"1.0.0"),Uo.set(this,Fl),No.set(this,"https://solanamobile.com/wallets"),Oo.set(this,Dp),Mr.set(this,void 0),Me.set(this,void 0),Qe.set(this,void 0),yn.set(this,!1),nr.set(this,0),An.set(this,[]),ui.set(this,void 0),Ir.set(this,void 0),li.set(this,void 0),Fo.set(this,(e,n)=>{var s;return!((s=tt(this,Nn,"f")[e])===null||s===void 0)&&s.push(n)||(tt(this,Nn,"f")[e]=[n]),()=>tt(this,er,"m",Ol).call(this,e,n)}),Po.set(this,({silent:e}={})=>Lt(this,void 0,void 0,function*(){if(tt(this,yn,"f")||this.connected)return{accounts:this.accounts};fe(this,yn,!0);try{if(e){const n=yield tt(this,Qe,"f").get();if(n)yield tt(this,di,"f").call(this,n.capabilities),yield tt(this,rr,"f").call(this,n);else return{accounts:this.accounts}}else yield tt(this,hi,"f").call(this)}catch(n){throw new Error(n instanceof Error&&n.message||"Unknown error")}finally{fe(this,yn,!1)}return{accounts:this.accounts}})),hi.set(this,e=>Lt(this,void 0,void 0,function*(){try{const n=yield tt(this,Qe,"f").get();if(n)return tt(this,rr,"f").call(this,n),n;const s=yield tt(this,ui,"f").select(tt(this,An,"f"));return yield tt(this,ir,"f").call(this,i=>Lt(this,void 0,void 0,function*(){const[o,c]=yield Promise.all([i.getCapabilities(),i.authorize({chain:s,identity:tt(this,Mr,"f"),sign_in_payload:e})]),u=tt(this,pi,"f").call(this,c.accounts),p=Object.assign(Object.assign({},c),{accounts:u,chain:s,capabilities:o});return Promise.all([tt(this,di,"f").call(this,o),tt(this,Qe,"f").set(p),tt(this,rr,"f").call(this,p)]),p}))}catch(n){throw new Error(n instanceof Error&&n.message||"Unknown error")}})),rr.set(this,e=>Lt(this,void 0,void 0,function*(){var n;const s=tt(this,Me,"f")==null||((n=tt(this,Me,"f"))===null||n===void 0?void 0:n.accounts.length)!==e.accounts.length||tt(this,Me,"f").accounts.some((i,o)=>i.address!==e.accounts[o].address);fe(this,Me,e),s&&tt(this,er,"m",fi).call(this,"change",{accounts:this.accounts})})),di.set(this,e=>Lt(this,void 0,void 0,function*(){const n=e.features.includes("solana:signTransactions"),s=e.supports_sign_and_send_transactions,i=Te in this.features!==s||Ft in this.features!==n;fe(this,Ir,Object.assign(Object.assign({},(s||!s&&!n)&&{[Te]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signAndSendTransaction:tt(this,mi,"f")}}),n&&{[Ft]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signTransaction:tt(this,wi,"f")}})),i&&tt(this,er,"m",fi).call(this,"change",{features:this.features})})),Rr.set(this,(e,n,s)=>Lt(this,void 0,void 0,function*(){var i,o;try{const[c,u]=yield Promise.all([(o=(i=tt(this,Me,"f"))===null||i===void 0?void 0:i.capabilities)!==null&&o!==void 0?o:yield e.getCapabilities(),e.authorize({auth_token:n,identity:tt(this,Mr,"f"),chain:s})]),p=tt(this,pi,"f").call(this,u.accounts),y=Object.assign(Object.assign({},u),{accounts:p,chain:s,capabilities:c});Promise.all([tt(this,Qe,"f").set(y),tt(this,rr,"f").call(this,y)])}catch(c){throw tt(this,gi,"f").call(this),new Error(c instanceof Error&&c.message||"Unknown error")}})),gi.set(this,()=>Lt(this,void 0,void 0,function*(){var e;tt(this,Qe,"f").clear(),fe(this,yn,!1),fe(this,nr,(e=tt(this,nr,"f"),e++,e)),fe(this,Me,void 0),tt(this,er,"m",fi).call(this,"change",{accounts:this.accounts})})),ir.set(this,e=>Lt(this,void 0,void 0,function*(){var n;const s=(n=tt(this,Me,"f"))===null||n===void 0?void 0:n.wallet_uri_base,i=s?{baseUri:s}:void 0,o=tt(this,nr,"f");try{return yield Tp(e,i)}catch(c){throw tt(this,nr,"f")!==o&&(yield new Promise(()=>{})),c instanceof Error&&c.name==="SolanaMobileWalletAdapterError"&&c.code==="ERROR_WALLET_NOT_FOUND"&&(yield tt(this,li,"f").call(this,this)),c}})),kr.set(this,()=>{if(!tt(this,Me,"f"))throw new Error("Wallet not connected");return{authToken:tt(this,Me,"f").auth_token,chain:tt(this,Me,"f").chain}}),pi.set(this,e=>e.map(n=>{var s,i;const o=wn(n.address);return{address:Co.encode(o),publicKey:o,label:n.label,icon:n.icon,chains:(s=n.chains)!==null&&s!==void 0?s:tt(this,An,"f"),features:(i=n.features)!==null&&i!==void 0?i:qp}})),Do.set(this,e=>Lt(this,void 0,void 0,function*(){const{authToken:n,chain:s}=tt(this,kr,"f").call(this);try{const i=e.map(o=>si(o));return yield tt(this,ir,"f").call(this,o=>Lt(this,void 0,void 0,function*(){return yield tt(this,Rr,"f").call(this,o,n,s),(yield o.signTransactions({payloads:i})).signed_payloads.map(wn)}))}catch(i){throw new Error(i instanceof Error&&i.message||"Unknown error")}})),Wo.set(this,(e,n)=>Lt(this,void 0,void 0,function*(){const{authToken:s,chain:i}=tt(this,kr,"f").call(this);try{return yield tt(this,ir,"f").call(this,o=>Lt(this,void 0,void 0,function*(){const[c,u]=yield Promise.all([o.getCapabilities(),tt(this,Rr,"f").call(this,o,s,i)]);if(c.supports_sign_and_send_transactions){const p=si(e);return(yield o.signAndSendTransactions(Object.assign(Object.assign({},n),{payloads:[p]}))).signatures.map(wn)[0]}else throw new Error("connected wallet does not support signAndSendTransaction")}))}catch(o){throw new Error(o instanceof Error&&o.message||"Unknown error")}})),mi.set(this,(...e)=>Lt(this,void 0,void 0,function*(){const n=[];for(const s of e){const i=yield tt(this,Wo,"f").call(this,s.transaction,s.options);n.push({signature:i})}return n})),wi.set(this,(...e)=>Lt(this,void 0,void 0,function*(){return(yield tt(this,Do,"f").call(this,e.map(({transaction:n})=>n))).map(n=>({signedTransaction:n}))})),qo.set(this,(...e)=>Lt(this,void 0,void 0,function*(){const{authToken:n,chain:s}=tt(this,kr,"f").call(this),i=e.map(({account:c})=>si(c.publicKey)),o=e.map(({message:c})=>si(c));try{return yield tt(this,ir,"f").call(this,c=>Lt(this,void 0,void 0,function*(){return yield tt(this,Rr,"f").call(this,c,n,s),(yield c.signMessages({addresses:i,payloads:o})).signed_payloads.map(wn).map(p=>({signedMessage:p,signature:p.slice(-Wp)}))}))}catch(c){throw new Error(c instanceof Error&&c.message||"Unknown error")}})),zo.set(this,(...e)=>Lt(this,void 0,void 0,function*(){const n=[];if(e.length>1)for(const s of e)n.push(yield tt(this,yi,"f").call(this,s));else return[yield tt(this,yi,"f").call(this,e[0])];return n})),yi.set(this,e=>Lt(this,void 0,void 0,function*(){var n,s,i;fe(this,yn,!0);try{const o=yield tt(this,hi,"f").call(this,Object.assign(Object.assign({},e),{domain:(n=e?.domain)!==null&&n!==void 0?n:window.location.host}));if(!o.sign_in_result)throw new Error("Sign in failed, no sign in result returned by wallet");const c=o.sign_in_result.address,u=o.accounts.find(p=>p.address==c);return{account:Object.assign(Object.assign({},u??{address:Co.encode(wn(c))}),{publicKey:wn(c),chains:(s=u?.chains)!==null&&s!==void 0?s:tt(this,An,"f"),features:(i=u?.features)!==null&&i!==void 0?i:o.capabilities.features}),signedMessage:wn(o.sign_in_result.signed_message),signature:wn(o.sign_in_result.signature)}}catch(o){throw new Error(o instanceof Error&&o.message||"Unknown error")}finally{fe(this,yn,!1)}})),fe(this,Qe,t.authorizationCache),fe(this,Mr,t.appIdentity),fe(this,An,t.chains),fe(this,ui,t.chainSelector),fe(this,li,t.onWalletNotFound),fe(this,Ir,{[Te]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signAndSendTransaction:tt(this,mi,"f")},[Ft]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signTransaction:tt(this,wi,"f")}})}get version(){return tt(this,Lo,"f")}get name(){return tt(this,Uo,"f")}get url(){return tt(this,No,"f")}get icon(){return tt(this,Oo,"f")}get chains(){return tt(this,An,"f")}get features(){return Object.assign({[wa]:{version:"1.0.0",connect:tt(this,Po,"f")},[ko]:{version:"1.0.0",disconnect:tt(this,gi,"f")},[ya]:{version:"1.0.0",on:tt(this,Fo,"f")},[vn]:{version:"1.0.0",signMessage:tt(this,qo,"f")},[Dn]:{version:"1.0.0",signIn:tt(this,zo,"f")}},tt(this,Ir,"f"))}get accounts(){var t,e;return(e=(t=tt(this,Me,"f"))===null||t===void 0?void 0:t.accounts)!==null&&e!==void 0?e:[]}get connected(){return!!tt(this,Me,"f")}get isAuthorized(){return!!tt(this,Me,"f")}get currentAuthorization(){return tt(this,Me,"f")}get cachedAuthorizationResult(){return tt(this,Qe,"f").get()}}Nn=new WeakMap,Lo=new WeakMap,Uo=new WeakMap,No=new WeakMap,Oo=new WeakMap,Mr=new WeakMap,Me=new WeakMap,Qe=new WeakMap,yn=new WeakMap,nr=new WeakMap,An=new WeakMap,ui=new WeakMap,Ir=new WeakMap,li=new WeakMap,Fo=new WeakMap,Po=new WeakMap,hi=new WeakMap,rr=new WeakMap,di=new WeakMap,Rr=new WeakMap,gi=new WeakMap,ir=new WeakMap,kr=new WeakMap,pi=new WeakMap,Do=new WeakMap,Wo=new WeakMap,mi=new WeakMap,wi=new WeakMap,qo=new WeakMap,zo=new WeakMap,yi=new WeakMap,er=new WeakSet,fi=function(t,...e){var n;(n=tt(this,Nn,"f")[t])===null||n===void 0||n.forEach(s=>s.apply(null,e))},Ol=function(t,e){var n;tt(this,Nn,"f")[t]=(n=tt(this,Nn,"f")[t])===null||n===void 0?void 0:n.filter(s=>e!==s)};const Kp="To use mobile wallet adapter, you must have a compatible mobile wallet application installed on your device.",$p="This browser appears to be incompatible with mobile wallet adapter. Open this page in a compatible mobile browser app and try again.";class jp extends Pp{constructor(){super(...arguments),this.contentStyles=Vp,this.contentHtml=Hp}initWithError(t){super.init(),this.populateError(t)}populateError(t){var e,n;const s=(e=this.dom)===null||e===void 0?void 0:e.getElementById("mobile-wallet-adapter-error-message"),i=(n=this.dom)===null||n===void 0?void 0:n.getElementById("mobile-wallet-adapter-error-action");if(s){if(t.name==="SolanaMobileWalletAdapterError")switch(t.code){case"ERROR_WALLET_NOT_FOUND":s.innerHTML=Kp,i&&i.addEventListener("click",()=>{window.location.href="https://solanamobile.com/wallets"});return;case"ERROR_BROWSER_NOT_SUPPORTED":s.innerHTML=$p,i&&(i.style.display="none");return}s.innerHTML=`An unexpected error occurred: ${t.message}`}else console.log("Failed to locate error dialog element")}}const Hp=`
<svg class="mobile-wallet-adapter-embedded-modal-error-icon" xmlns="http://www.w3.org/2000/svg" height="50px" viewBox="0 -960 960 960" width="50px" fill="#000000"><path d="M 280,-80 Q 197,-80 138.5,-138.5 80,-197 80,-280 80,-363 138.5,-421.5 197,-480 280,-480 q 83,0 141.5,58.5 58.5,58.5 58.5,141.5 0,83 -58.5,141.5 Q 363,-80 280,-80 Z M 824,-120 568,-376 Q 556,-389 542.5,-402.5 529,-416 516,-428 q 38,-24 61,-64 23,-40 23,-88 0,-75 -52.5,-127.5 Q 495,-760 420,-760 345,-760 292.5,-707.5 240,-655 240,-580 q 0,6 0.5,11.5 0.5,5.5 1.5,11.5 -18,2 -39.5,8 -21.5,6 -38.5,14 -2,-11 -3,-22 -1,-11 -1,-23 0,-109 75.5,-184.5 Q 311,-840 420,-840 q 109,0 184.5,75.5 75.5,75.5 75.5,184.5 0,43 -13.5,81.5 Q 653,-460 629,-428 l 251,252 z m -615,-61 71,-71 70,71 29,-28 -71,-71 71,-71 -28,-28 -71,71 -71,-71 -28,28 71,71 -71,71 z"/></svg>
<div class="mobile-wallet-adapter-embedded-modal-title">We can't find a wallet.</div>
<div id="mobile-wallet-adapter-error-message" class="mobile-wallet-adapter-embedded-modal-subtitle"></div>
<div>
    <button data-error-action id="mobile-wallet-adapter-error-action" class="mobile-wallet-adapter-embedded-modal-error-action">
        Find a wallet
    </button>
</div>
`,Vp=`
.mobile-wallet-adapter-embedded-modal-content {
    text-align: center;
}

.mobile-wallet-adapter-embedded-modal-error-icon {
    margin-top: 24px;
}

.mobile-wallet-adapter-embedded-modal-title {
    margin: 18px 100px auto 100px;
    color: #000000;
    font-size: 2.75em;
    font-weight: 600;
}

.mobile-wallet-adapter-embedded-modal-subtitle {
    margin: 30px 60px 40px 60px;
    color: #000000;
    font-size: 1.25em;
    font-weight: 400;
}

.mobile-wallet-adapter-embedded-modal-error-action {
    display: block;
    width: 100%;
    height: 56px;
    /*margin-top: 40px;*/
    font-size: 1.25em;
    /*line-height: 24px;*/
    /*letter-spacing: -1%;*/
    background: #000000;
    color: #FFFFFF;
    border-radius: 18px;
}

/* Smaller screens */
@media all and (max-width: 600px) {
    .mobile-wallet-adapter-embedded-modal-title {
        font-size: 1.5em;
        margin-right: 12px;
        margin-left: 12px;
    }
    .mobile-wallet-adapter-embedded-modal-subtitle {
        margin-right: 12px;
        margin-left: 12px;
    }
}
`;function Gp(){return Lt(this,void 0,void 0,function*(){if(typeof window<"u"){const r=window.navigator.userAgent.toLowerCase(),t=new jp;r.includes("wv")?t.initWithError({name:"SolanaMobileWalletAdapterError",code:"ERROR_BROWSER_NOT_SUPPORTED",message:""}):t.initWithError({name:"SolanaMobileWalletAdapterError",code:"ERROR_WALLET_NOT_FOUND",message:""}),t.open()}})}const bo="SolanaMobileWalletAdapterDefaultAuthorizationCache";function Zp(){let r;try{r=window.localStorage}catch{}return{clear(){return Lt(this,void 0,void 0,function*(){if(r)try{r.removeItem(bo)}catch{}})},get(){return Lt(this,void 0,void 0,function*(){if(r)try{const t=JSON.parse(r.getItem(bo));if(t&&t.accounts){const e=t.accounts.map(n=>Object.assign(Object.assign({},n),{publicKey:"publicKey"in n?new Uint8Array(Object.values(n.publicKey)):Co.decode(n.address)}));return Object.assign(Object.assign({},t),{accounts:e})}else return t||void 0}catch{}})},set(t){return Lt(this,void 0,void 0,function*(){if(r)try{r.setItem(bo,JSON.stringify(t))}catch{}})}}}function Yp(){return{select(r){return Lt(this,void 0,void 0,function*(){return r.length===1?r[0]:r.includes(Fi)?Fi:r[0]})}}}function It(r,t,e,n){function s(i){return i instanceof e?i:new e(function(o){o(i)})}return new(e||(e=Promise))(function(i,o){function c(y){try{p(n.next(y))}catch(_){o(_)}}function u(y){try{p(n.throw(y))}catch(_){o(_)}}function p(y){y.done?i(y.value):s(y.value).then(c,u)}p((n=n.apply(r,[])).next())})}function ft(r,t,e,n){if(e==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?r!==t||!n:!t.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e==="m"?n:e==="a"?n.call(r):n?n.value:t.get(r)}function Ue(r,t,e,n,s){if(typeof t=="function"?r!==t||!0:!t.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(r,e),e}const Ko="standard:connect",Jp="standard:disconnect",Xp="standard:events";function vo(r){return window.btoa(String.fromCharCode.call(null,...r))}function Qp(){return typeof window<"u"&&window.isSecureContext&&typeof document<"u"&&/android/i.test(navigator.userAgent)}var me,Ot,En,sn,bi,en,Bn,$o,jo,Pl,Di,vi,bn;const Ei=Fl,tm=64;function em(r){return"version"in r}function Dl(r){switch(r){case"mainnet-beta":return"solana:mainnet";case"testnet":return"solana:testnet";case"devnet":return"solana:devnet";default:return r}}class nm extends wg{constructor(t,e){super(),me.add(this),this.supportedTransactionVersions=new Set(["legacy",0]),Ot.set(this,void 0),En.set(this,!1),sn.set(this,Qp()?Vt.Loadable:Vt.Unsupported),bi.set(this,void 0),en.set(this,void 0),Bn.set(this,void 0),$o.set(this,n=>It(this,void 0,void 0,function*(){if(n.accounts&&n.accounts.length>0){ft(this,me,"m",Pl).call(this);const s=yield ft(this,bi,"f").call(this,n.accounts);s!==ft(this,en,"f")&&(Ue(this,en,s),Ue(this,Bn,void 0),this.emit("connect",this.publicKey))}})),Ue(this,bi,n=>It(this,void 0,void 0,function*(){var s;const i=yield e.addressSelector.select(n.map(({publicKey:o})=>vo(o)));return(s=n.find(({publicKey:o})=>vo(o)===i))!==null&&s!==void 0?s:n[0]})),Ue(this,Ot,t),ft(this,Ot,"f").features[Xp].on("change",ft(this,$o,"f")),this.name=ft(this,Ot,"f").name,this.icon=ft(this,Ot,"f").icon,this.url=ft(this,Ot,"f").url}get publicKey(){var t;if(!ft(this,Bn,"f")&&ft(this,en,"f"))try{Ue(this,Bn,new dt(ft(this,en,"f").publicKey),"f")}catch(e){throw new bl(e instanceof Error&&e?.message||"Unknown error",e)}return(t=ft(this,Bn,"f"))!==null&&t!==void 0?t:null}get connected(){return ft(this,Ot,"f").connected}get connecting(){return ft(this,En,"f")}get readyState(){return ft(this,sn,"f")}autoConnect_DO_NOT_USE_OR_YOU_WILL_BE_FIRED(){return It(this,void 0,void 0,function*(){return yield this.autoConnect()})}autoConnect(){return It(this,void 0,void 0,function*(){ft(this,me,"m",jo).call(this,!0)})}connect(){return It(this,void 0,void 0,function*(){ft(this,me,"m",jo).call(this)})}performAuthorization(t){return It(this,void 0,void 0,function*(){try{const e=yield ft(this,Ot,"f").cachedAuthorizationResult;return e?(yield ft(this,Ot,"f").features[Ko].connect({silent:!0}),e):(t?yield ft(this,Ot,"f").features[Dn].signIn(t):yield ft(this,Ot,"f").features[Ko].connect(),yield yield ft(this,Ot,"f").cachedAuthorizationResult)}catch(e){throw new Oi(e instanceof Error&&e.message||"Unknown error",e)}})}disconnect(){return It(this,void 0,void 0,function*(){return yield ft(this,me,"m",bn).call(this,()=>It(this,void 0,void 0,function*(){Ue(this,En,!1),Ue(this,Bn,void 0),Ue(this,en,void 0),yield ft(this,Ot,"f").features[Jp].disconnect(),this.emit("disconnect")}))})}signIn(t){return It(this,void 0,void 0,function*(){return ft(this,me,"m",bn).call(this,()=>It(this,void 0,void 0,function*(){var e;if(ft(this,sn,"f")!==Vt.Installed&&ft(this,sn,"f")!==Vt.Loadable)throw new Pr;Ue(this,En,!0);try{const n=yield ft(this,Ot,"f").features[Dn].signIn(Object.assign(Object.assign({},t),{domain:(e=t?.domain)!==null&&e!==void 0?e:window.location.host}));if(n.length>0)return n[0];throw new Error("Sign in failed, no sign in result returned by wallet")}catch(n){throw new Oi(n instanceof Error&&n.message||"Unknown error",n)}finally{Ue(this,En,!1)}}))})}signMessage(t){return It(this,void 0,void 0,function*(){return yield ft(this,me,"m",bn).call(this,()=>It(this,void 0,void 0,function*(){const e=ft(this,me,"m",Di).call(this);try{return(yield ft(this,Ot,"f").features[vn].signMessage({account:e,message:t}))[0].signature}catch(n){throw new vl(n?.message,n)}}))})}sendTransaction(t,e,n){return It(this,void 0,void 0,function*(){return yield ft(this,me,"m",bn).call(this,()=>It(this,void 0,void 0,function*(){const s=ft(this,me,"m",Di).call(this);try{let i=function(){let o;switch(e.commitment){case"confirmed":case"finalized":case"processed":o=e.commitment;break;default:o="finalized"}let c;switch(n?.preflightCommitment){case"confirmed":case"finalized":case"processed":c=n.preflightCommitment;break;case void 0:c=o;break;default:c="finalized"}return(c==="finalized"?2:c==="confirmed"?1:0)<(o==="finalized"?2:o==="confirmed"?1:0)?c:o};if(Te in ft(this,Ot,"f").features){const o=Dl(ft(this,Ot,"f").currentAuthorization.chain),[c]=(yield ft(this,Ot,"f").features[Te].signAndSendTransaction({account:s,transaction:t.serialize(),chain:o,options:n?{skipPreflight:n.skipPreflight,maxRetries:n.maxRetries}:void 0})).map((u=>vo(u.signature)));return c}else{const[o]=yield ft(this,me,"m",vi).call(this,[t]);if(em(o))return yield e.sendTransaction(o);{const c=o.serialize();return yield e.sendRawTransaction(c,Object.assign(Object.assign({},n),{preflightCommitment:i()}))}}}catch(i){throw new Tn(i?.message,i)}}))})}signTransaction(t){return It(this,void 0,void 0,function*(){return yield ft(this,me,"m",bn).call(this,()=>It(this,void 0,void 0,function*(){const[e]=yield ft(this,me,"m",vi).call(this,[t]);return e}))})}signAllTransactions(t){return It(this,void 0,void 0,function*(){return yield ft(this,me,"m",bn).call(this,()=>It(this,void 0,void 0,function*(){return yield ft(this,me,"m",vi).call(this,t)}))})}}Ot=new WeakMap,En=new WeakMap,sn=new WeakMap,bi=new WeakMap,en=new WeakMap,Bn=new WeakMap,$o=new WeakMap,me=new WeakSet,jo=function(t=!1){return It(this,void 0,void 0,function*(){if(!(this.connecting||this.connected))return yield ft(this,me,"m",bn).call(this,()=>It(this,void 0,void 0,function*(){if(ft(this,sn,"f")!==Vt.Installed&&ft(this,sn,"f")!==Vt.Loadable)throw new Pr;Ue(this,En,!0);try{yield ft(this,Ot,"f").features[Ko].connect({silent:t})}catch(e){throw new Oi(e instanceof Error&&e.message||"Unknown error",e)}finally{Ue(this,En,!1)}}))})},Pl=function(){ft(this,sn,"f")!==Vt.Installed&&this.emit("readyStateChange",Ue(this,sn,Vt.Installed))},Di=function(){if(!ft(this,Ot,"f").isAuthorized||!ft(this,en,"f"))throw new Ge;return ft(this,en,"f")},vi=function(t){return It(this,void 0,void 0,function*(){const e=ft(this,me,"m",Di).call(this);try{if(Ft in ft(this,Ot,"f").features)return ft(this,Ot,"f").features[Ft].signTransaction(...t.map(n=>({account:e,transaction:n.serialize()}))).then(n=>n.map(s=>{const i=s.signedTransaction,c=i[0]*tm+1;return ha.deserializeMessageVersion(i.slice(c,i.length))==="legacy"?ze.from(i):Or.deserialize(i)}));throw new Error("Connected wallet does not support signing transactions")}catch(n){throw new Cn(n?.message,n)}})},bn=function(t){return It(this,void 0,void 0,function*(){try{return yield t()}catch(e){throw this.emit("error",e),e}})};class rm extends nm{constructor(t){var e;const n=Dl((e=t.chain)!==null&&e!==void 0?e:t.cluster);super(new zp({appIdentity:t.appIdentity,authorizationCache:{set:t.authorizationResultCache.set,get:()=>It(this,void 0,void 0,function*(){return yield t.authorizationResultCache.get()}),clear:t.authorizationResultCache.clear},chains:[n],chainSelector:Yp(),onWalletNotFound:()=>It(this,void 0,void 0,function*(){t.onWalletNotFound(this)})}),{addressSelector:t.addressSelector,chain:n})}}class im extends rm{}function sm(){return{select(r){return It(this,void 0,void 0,function*(){return r[0]})}}}function om(){return Zp()}function am(r){return It(this,void 0,void 0,function*(){return Gp()})}function cm(){return am}function um(r,t){if(r===t)return!0;const e=r.length;if(e!==t.length)return!1;for(let n=0;n<e;n++)if(r[n]!==t[n])return!1;return!0}function lm(r){if(r.length>=255)throw new TypeError("Alphabet too long");const t=new Uint8Array(256);for(let p=0;p<t.length;p++)t[p]=255;for(let p=0;p<r.length;p++){const y=r.charAt(p),_=y.charCodeAt(0);if(t[_]!==255)throw new TypeError(y+" is ambiguous");t[_]=p}const e=r.length,n=r.charAt(0),s=Math.log(e)/Math.log(256),i=Math.log(256)/Math.log(e);function o(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";let y=0,_=0,A=0;const b=p.length;for(;A!==b&&p[A]===0;)A++,y++;const B=(b-A)*i+1>>>0,M=new Uint8Array(B);for(;A!==b;){let D=p[A],N=0;for(let V=B-1;(D!==0||N<_)&&V!==-1;V--,N++)D+=256*M[V]>>>0,M[V]=D%e>>>0,D=D/e>>>0;if(D!==0)throw new Error("Non-zero carry");_=N,A++}let C=B-_;for(;C!==B&&M[C]===0;)C++;let O=n.repeat(y);for(;C<B;++C)O+=r.charAt(M[C]);return O}function c(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;let y=0,_=0,A=0;for(;p[y]===n;)_++,y++;const b=(p.length-y)*s+1>>>0,B=new Uint8Array(b);for(;y<p.length;){const D=p.charCodeAt(y);if(D>255)return;let N=t[D];if(N===255)return;let V=0;for(let Z=b-1;(N!==0||V<A)&&Z!==-1;Z--,V++)N+=e*B[Z]>>>0,B[Z]=N%256>>>0,N=N/256>>>0;if(N!==0)throw new Error("Non-zero carry");A=V,y++}let M=b-A;for(;M!==b&&B[M]===0;)M++;const C=new Uint8Array(_+(b-M));let O=_;for(;M!==b;)C[O++]=B[M++];return C}function u(p){const y=c(p);if(y)return y;throw new Error("Non-base"+e+" character")}return{encode:o,decodeUnsafe:c,decode:u}}var fm="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const hm=lm(fm);var ct=function(r,t,e,n){if(e==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?r!==t||!n:!t.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e==="m"?n:e==="a"?n.call(r):n?n.value:t.get(r)},he=function(r,t,e,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?r!==t||!s:!t.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(r,e):s?s.value=e:t.set(r,e),e},be,ke,On,Fn,Mn,Tr,Wi,St,qi,Ho,Si,Vo,Cr,Go,ru,iu,su,ou;class dm extends El{get name(){return ct(this,St,"f").name}get url(){return"https://github.com/solana-labs/wallet-standard"}get icon(){return ct(this,St,"f").icon}get readyState(){return ct(this,qi,"f")}get publicKey(){return ct(this,On,"f")}get connecting(){return ct(this,Fn,"f")}get supportedTransactionVersions(){return ct(this,Wi,"f")}get wallet(){return ct(this,St,"f")}get standard(){return!0}constructor({wallet:t}){super(),be.add(this),ke.set(this,void 0),On.set(this,void 0),Fn.set(this,void 0),Mn.set(this,void 0),Tr.set(this,void 0),Wi.set(this,void 0),St.set(this,void 0),qi.set(this,typeof window>"u"||typeof document>"u"?Vt.Unsupported:Vt.Installed),Go.set(this,e=>{if("accounts"in e){const n=ct(this,St,"f").accounts[0];ct(this,ke,"f")&&!ct(this,Mn,"f")&&n!==ct(this,ke,"f")&&(n?ct(this,be,"m",Si).call(this,n):(this.emit("error",new dg),ct(this,be,"m",Vo).call(this)))}"features"in e&&ct(this,be,"m",Cr).call(this)}),he(this,St,t,"f"),he(this,ke,null,"f"),he(this,On,null,"f"),he(this,Fn,!1,"f"),he(this,Mn,!1,"f"),he(this,Tr,ct(this,St,"f").features[ya].on("change",ct(this,Go,"f")),"f"),ct(this,be,"m",Cr).call(this)}destroy(){he(this,ke,null,"f"),he(this,On,null,"f"),he(this,Fn,!1,"f"),he(this,Mn,!1,"f");const t=ct(this,Tr,"f");t&&(he(this,Tr,null,"f"),t())}async autoConnect(){return ct(this,be,"m",Ho).call(this,{silent:!0})}async connect(){return ct(this,be,"m",Ho).call(this)}async disconnect(){if(ko in ct(this,St,"f").features)try{he(this,Mn,!0,"f"),await ct(this,St,"f").features[ko].disconnect()}catch(t){this.emit("error",new gg(t?.message,t))}finally{he(this,Mn,!1,"f")}ct(this,be,"m",Vo).call(this)}async sendTransaction(t,e,n={}){try{const s=ct(this,ke,"f");if(!s)throw new Ge;let i;if(Te in ct(this,St,"f").features)if(s.features.includes(Te))i=Te;else if(Ft in ct(this,St,"f").features&&s.features.includes(Ft))i=Ft;else throw new ar;else if(Ft in ct(this,St,"f").features){if(!s.features.includes(Ft))throw new ar;i=Ft}else throw new Ar;const o=Hg(e.rpcEndpoint);if(!s.chains.includes(o))throw new Tn;try{const{signers:c,...u}=n;let p;if(Ln(t)?(c?.length&&t.sign(c),p=t.serialize()):(t=await this.prepareTransaction(t,e,u),c?.length&&t.partialSign(...c),p=new Uint8Array(t.serialize({requireAllSignatures:!1,verifySignatures:!1}))),i===Te){const[y]=await ct(this,St,"f").features[Te].signAndSendTransaction({account:s,chain:o,transaction:p,options:{preflightCommitment:ho(u.preflightCommitment||e.commitment),skipPreflight:u.skipPreflight,maxRetries:u.maxRetries,minContextSlot:u.minContextSlot}});return hm.encode(y.signature)}else{const[y]=await ct(this,St,"f").features[Ft].signTransaction({account:s,chain:o,transaction:p,options:{preflightCommitment:ho(u.preflightCommitment||e.commitment),minContextSlot:u.minContextSlot}});return await e.sendRawTransaction(y.signedTransaction,{...u,preflightCommitment:ho(u.preflightCommitment||e.commitment)})}}catch(c){throw c instanceof Re?c:new Tn(c?.message,c)}}catch(s){throw this.emit("error",s),s}}}ke=new WeakMap,On=new WeakMap,Fn=new WeakMap,Mn=new WeakMap,Tr=new WeakMap,Wi=new WeakMap,St=new WeakMap,qi=new WeakMap,Go=new WeakMap,be=new WeakSet,Ho=async function(t){try{if(this.connected||this.connecting)return;if(ct(this,qi,"f")!==Vt.Installed)throw new Pr;if(he(this,Fn,!0,"f"),!ct(this,St,"f").accounts.length)try{await ct(this,St,"f").features[wa].connect(t)}catch(n){throw new Oi(n?.message,n)}const e=ct(this,St,"f").accounts[0];if(!e)throw new ar;ct(this,be,"m",Si).call(this,e)}catch(e){throw this.emit("error",e),e}finally{he(this,Fn,!1,"f")}},Si=function(t){let e;try{e=new dt(t.address)}catch(n){throw new bl(n?.message,n)}he(this,ke,t,"f"),he(this,On,e,"f"),ct(this,be,"m",Cr).call(this),this.emit("connect",e)},Vo=function(){he(this,ke,null,"f"),he(this,On,null,"f"),ct(this,be,"m",Cr).call(this),this.emit("disconnect")},Cr=function(){const t=Te in ct(this,St,"f").features?ct(this,St,"f").features[Te].supportedTransactionVersions:ct(this,St,"f").features[Ft].supportedTransactionVersions;he(this,Wi,um(t,["legacy"])?null:new Set(t),"f"),Ft in ct(this,St,"f").features&&ct(this,ke,"f")?.features.includes(Ft)?(this.signTransaction=ct(this,be,"m",ru),this.signAllTransactions=ct(this,be,"m",iu)):(delete this.signTransaction,delete this.signAllTransactions),vn in ct(this,St,"f").features&&ct(this,ke,"f")?.features.includes(vn)?this.signMessage=ct(this,be,"m",su):delete this.signMessage,Dn in ct(this,St,"f").features?this.signIn=ct(this,be,"m",ou):delete this.signIn},ru=async function(t){try{const e=ct(this,ke,"f");if(!e)throw new Ge;if(!(Ft in ct(this,St,"f").features))throw new Ar;if(!e.features.includes(Ft))throw new ar;try{const s=(await ct(this,St,"f").features[Ft].signTransaction({account:e,transaction:Ln(t)?t.serialize():new Uint8Array(t.serialize({requireAllSignatures:!1,verifySignatures:!1}))}))[0].signedTransaction;return Ln(t)?Or.deserialize(s):ze.from(s)}catch(n){throw n instanceof Re?n:new Cn(n?.message,n)}}catch(e){throw this.emit("error",e),e}},iu=async function(t){try{const e=ct(this,ke,"f");if(!e)throw new Ge;if(!(Ft in ct(this,St,"f").features))throw new Ar;if(!e.features.includes(Ft))throw new ar;try{const n=await ct(this,St,"f").features[Ft].signTransaction(...t.map(s=>({account:e,transaction:Ln(s)?s.serialize():new Uint8Array(s.serialize({requireAllSignatures:!1,verifySignatures:!1}))})));return t.map((s,i)=>{const o=n[i].signedTransaction;return Ln(s)?Or.deserialize(o):ze.from(o)})}catch(n){throw new Cn(n?.message,n)}}catch(e){throw this.emit("error",e),e}},su=async function(t){try{const e=ct(this,ke,"f");if(!e)throw new Ge;if(!(vn in ct(this,St,"f").features))throw new Ar;if(!e.features.includes(vn))throw new ar;try{return(await ct(this,St,"f").features[vn].signMessage({account:e,message:t}))[0].signature}catch(n){throw new vl(n?.message,n)}}catch(e){throw this.emit("error",e),e}},ou=async function(t={}){try{if(!(Dn in ct(this,St,"f").features))throw new Ar;let e;try{[e]=await ct(this,St,"f").features[Dn].signIn(t)}catch(n){throw new bc(n?.message,n)}if(!e)throw new bc;return ct(this,be,"m",Si).call(this,e.account),e}catch(e){throw this.emit("error",e),e}};const gm=yg;var pm=function(r,t,e,n){if(e==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?r!==t||!n:!t.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e==="m"?n:e==="a"?n.call(r):n?n.value:t.get(r)},mm=function(r,t,e,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?r!==t||!s:!t.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(r,e):s?s.value=e:t.set(r,e),e},_i;let Ne;const Ji=new Set;function wm(r){Lr=void 0,Ji.add(r)}function ym(r){Lr=void 0,Ji.delete(r)}const cr={};function bm(){if(Ne||(Ne=Object.freeze({register:au,get:vm,on:Em}),typeof window>"u"))return Ne;const r=Object.freeze({register:au});try{window.addEventListener("wallet-standard:register-wallet",({detail:t})=>t(r))}catch(t){console.error(`wallet-standard:register-wallet event listener could not be added
`,t)}try{window.dispatchEvent(new Sm(r))}catch(t){console.error(`wallet-standard:app-ready event could not be dispatched
`,t)}return Ne}function au(...r){return r=r.filter(t=>!Ji.has(t)),r.length?(r.forEach(t=>wm(t)),cr.register?.forEach(t=>Zo(()=>t(...r))),function(){r.forEach(e=>ym(e)),cr.unregister?.forEach(e=>Zo(()=>e(...r)))}):()=>{}}let Lr;function vm(){return Lr||(Lr=[...Ji]),Lr}function Em(r,t){return cr[r]?.push(t)||(cr[r]=[t]),function(){cr[r]=cr[r]?.filter(n=>t!==n)}}function Zo(r){try{r()}catch(t){console.error(t)}}class Sm extends Event{get detail(){return pm(this,_i,"f")}get type(){return"wallet-standard:app-ready"}constructor(t){super("wallet-standard:app-ready",{bubbles:!1,cancelable:!1,composed:!1}),_i.set(this,void 0),mm(this,_i,t,"f")}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}}_i=new WeakMap;function _m(){if(Ne||(Ne=bm(),typeof window>"u"))return Ne;const r=window.navigator.wallets||[];if(!Array.isArray(r))return console.error("window.navigator.wallets is not an array"),Ne;const{register:t}=Ne,e=(...n)=>n.forEach(s=>Zo(()=>s({register:t})));try{Object.defineProperty(window.navigator,"wallets",{value:Object.freeze({push:e})})}catch{return console.error("window.navigator.wallets could not be set"),Ne}return e(...r),Ne}function xm(r){const t=cu(()=>new Set),{get:e,on:n}=cu(()=>_m()),[s,i]=ht.useState(()=>uu(e()));ht.useEffect(()=>{const c=[n("register",(...u)=>i(p=>[...p,...uu(u)])),n("unregister",(...u)=>i(p=>p.filter(y=>u.some(_=>_===y.wallet))))];return()=>c.forEach(u=>u())},[n]);const o=Am(s);return ht.useEffect(()=>{if(!o)return;const c=new Set(s);new Set(o.filter(p=>!c.has(p))).forEach(p=>p.destroy())},[o,s]),ht.useEffect(()=>()=>s.forEach(c=>c.destroy()),[]),ht.useMemo(()=>[...s,...r.filter(({name:c})=>s.some(u=>u.name===c)?(t.has(c)||(t.add(c),console.warn(`${c} was registered as a Standard Wallet. The Wallet Adapter for ${c} can be removed from your app.`)),!1):!0)],[s,r,t])}function cu(r){const t=ht.useRef(void 0);return t.current===void 0&&(t.current={value:r()}),t.current.value}function Am(r){const t=ht.useRef(void 0);return ht.useEffect(()=>{t.current=r}),t.current}function uu(r){return r.filter(gm).map(t=>new dm({wallet:t}))}var hr;(function(r){r[r.DESKTOP_WEB=0]="DESKTOP_WEB",r[r.MOBILE_WEB=1]="MOBILE_WEB"})(hr||(hr={}));function Bm(r){return/(WebView|Version\/.+(Chrome)\/(\d+)\.(\d+)\.(\d+)\.(\d+)|; wv\).+(Chrome)\/(\d+)\.(\d+)\.(\d+)\.(\d+))/i.test(r)}function Mm({adapters:r,userAgentString:t}){return r.some(e=>e.name!==Ei&&e.readyState===Vt.Installed)?hr.DESKTOP_WEB:t&&/android/i.test(t)&&!Bm(t)?hr.MOBILE_WEB:hr.DESKTOP_WEB}function Im(r){return r?/devnet/i.test(r)?"devnet":/testnet/i.test(r)?"testnet":"mainnet-beta":"mainnet-beta"}function Rm({children:r,wallets:t,adapter:e,isUnloadingRef:n,onAutoConnectRequest:s,onConnectError:i,onError:o,onSelectWallet:c}){const u=ht.useRef(!1),[p,y]=ht.useState(!1),_=ht.useRef(!1),[A,b]=ht.useState(!1),[B,M]=ht.useState(()=>e?.publicKey??null),[C,O]=ht.useState(()=>e?.connected??!1),D=ht.useRef(o);ht.useEffect(()=>(D.current=o,()=>{D.current=void 0}),[o]);const N=ht.useRef((f,w)=>(n.current||(D.current?D.current(f,w):(console.error(f,w),f instanceof Pr&&typeof window<"u"&&w&&window.open(w.url,"_blank"))),f)),[V,Z]=ht.useState(()=>t.map(f=>({adapter:f,readyState:f.readyState})).filter(({readyState:f})=>f!==Vt.Unsupported));ht.useEffect(()=>{Z(w=>t.map((S,I)=>{const L=w[I];return L&&L.adapter===S&&L.readyState===S.readyState?L:{adapter:S,readyState:S.readyState}}).filter(({readyState:S})=>S!==Vt.Unsupported));function f(w){Z(S=>{const I=S.findIndex(({adapter:P})=>P===this);if(I===-1)return S;const{adapter:L}=S[I];return[...S.slice(0,I),{adapter:L,readyState:w},...S.slice(I+1)].filter(({readyState:P})=>P!==Vt.Unsupported)})}return t.forEach(w=>w.on("readyStateChange",f,w)),()=>{t.forEach(w=>w.off("readyStateChange",f,w))}},[e,t]);const $=ht.useMemo(()=>V.find(f=>f.adapter===e)??null,[e,V]);ht.useEffect(()=>{if(!e)return;const f=I=>{M(I),u.current=!1,y(!1),O(!0),_.current=!1,b(!1)},w=()=>{n.current||(M(null),u.current=!1,y(!1),O(!1),_.current=!1,b(!1))},S=I=>{N.current(I,e)};return e.on("connect",f),e.on("disconnect",w),e.on("error",S),()=>{e.off("connect",f),e.off("disconnect",w),e.off("error",S),w()}},[e,n]);const Q=ht.useRef(!1);ht.useEffect(()=>()=>{Q.current=!1},[e]),ht.useEffect(()=>{Q.current||u.current||C||!s||!($?.readyState===Vt.Installed||$?.readyState===Vt.Loadable)||(u.current=!0,y(!0),Q.current=!0,(async function(){try{await s()}catch{i()}finally{y(!1),u.current=!1}})())},[C,s,i,$]);const Y=ht.useCallback(async(f,w,S)=>{if(!e)throw N.current(new Ec);if(!C)throw N.current(new Ge,e);return await e.sendTransaction(f,w,S)},[e,C]),k=ht.useMemo(()=>e&&"signTransaction"in e?async f=>{if(!C)throw N.current(new Ge,e);return await e.signTransaction(f)}:void 0,[e,C]),U=ht.useMemo(()=>e&&"signAllTransactions"in e?async f=>{if(!C)throw N.current(new Ge,e);return await e.signAllTransactions(f)}:void 0,[e,C]),W=ht.useMemo(()=>e&&"signMessage"in e?async f=>{if(!C)throw N.current(new Ge,e);return await e.signMessage(f)}:void 0,[e,C]),q=ht.useMemo(()=>e&&"signIn"in e?async f=>await e.signIn(f):void 0,[e]),m=ht.useCallback(async()=>{if(u.current||_.current||$?.adapter.connected)return;if(!$)throw N.current(new Ec);const{adapter:f,readyState:w}=$;if(!(w===Vt.Installed||w===Vt.Loadable))throw N.current(new Pr,f);u.current=!0,y(!0);try{await f.connect()}catch(S){throw i(),S}finally{y(!1),u.current=!1}},[i,$]),a=ht.useCallback(async()=>{if(!_.current&&e){_.current=!0,b(!0);try{await e.disconnect()}finally{b(!1),_.current=!1}}},[e]);return Yo.createElement(Sl.Provider,{value:{autoConnect:!!s,wallets:V,wallet:$,publicKey:B,connected:C,connecting:p,disconnecting:A,select:c,connect:m,disconnect:a,sendTransaction:Y,signTransaction:k,signAllTransactions:U,signMessage:W,signIn:q}},r)}let Eo;function km(){return Eo===void 0&&(Eo=globalThis.navigator?.userAgent??null),Eo}function lu(r){const t=km();return Mm({adapters:r,userAgentString:t})===hr.MOBILE_WEB}function Tm(){const r=globalThis.location;if(r)return`${r.protocol}//${r.host}`}function zm({children:r,wallets:t,autoConnect:e,localStorageKey:n="walletName",onError:s}){const{connection:i}=hg(),o=xm(t),c=ht.useMemo(()=>{if(!lu(o))return null;const D=o.find(N=>N.name===Ei);return D||new im({addressSelector:sm(),appIdentity:{uri:Tm()},authorizationResultCache:om(),cluster:Im(i?.rpcEndpoint),onWalletNotFound:cm()})},[o,i?.rpcEndpoint]),u=ht.useMemo(()=>c==null||o.indexOf(c)!==-1?o:[c,...o],[o,c]),[p,y]=vg(n,null),_=ht.useMemo(()=>u.find(D=>D.name===p)??null,[u,p]),A=ht.useCallback(D=>{p!==D&&(_&&_.name!==Ei&&_.disconnect(),y(D))},[_,y,p]);ht.useEffect(()=>{if(!_)return;function D(){M.current||y(null)}return _.on("disconnect",D),()=>{_.off("disconnect",D)}},[_,o,y,p]);const b=ht.useRef(!1),B=ht.useMemo(()=>{if(!(!e||!_))return async()=>{(e===!0||await e(_))&&(b.current?await _.connect():await _.autoConnect())}},[e,_]),M=ht.useRef(!1);ht.useEffect(()=>{if(p===Ei&&lu(o)){M.current=!1;return}function D(){M.current=!0}return window.addEventListener("beforeunload",D),()=>{window.removeEventListener("beforeunload",D)}},[o,p]);const C=ht.useCallback(()=>{_&&A(null)},[_,A]),O=ht.useCallback(D=>{b.current=!0,A(D)},[A]);return Yo.createElement(Rm,{wallets:u,adapter:_,isUnloadingRef:M,onAutoConnectRequest:B,onConnectError:C,onError:s,onSelectWallet:O},r)}export{mg as B,Pm as C,dt as P,Vt as W,dg as a,bt as b,bl as c,Pr as d,Oi as e,ar as f,gg as g,Ge as h,Wm as i,Ln as j,Re as k,Tn as l,Cn as m,vl as n,vc as o,Fm as p,zm as q,Dm as s,qm as u};
