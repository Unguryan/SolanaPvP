{
  "address": "F2LhVGUa9yLbYVYujYMPyckqWmsokHE9wym7ceGHWUMZ",
  "metadata": {
    "name": "pvp_program",
    "version": "1.0.0",
    "spec": "0.1.0",
    "description": "Solana PvP Game Program with Switchboard VRF"
  },
  "instructions": [
    {
      "name": "create_lobby",
      "discriminator": [
        116,
        55,
        74,
        48,
        40,
        51,
        135,
        155
      ],
      "accounts": [
        {
          "name": "lobby",
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  108,
                  111,
                  98,
                  98,
                  121
                ]
              },
              {
                "kind": "account",
                "path": "creator"
              },
              {
                "kind": "arg",
                "path": "lobby_id"
              }
            ]
          }
        },
        {
          "name": "active",
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  97,
                  99,
                  116,
                  105,
                  118,
                  101
                ]
              },
              {
                "kind": "account",
                "path": "creator"
              }
            ]
          }
        },
        {
          "name": "creator",
          "writable": true,
          "signer": true
        },
        {
          "name": "system_program",
          "address": "11111111111111111111111111111111"
        }
      ],
      "args": [
        {
          "name": "lobby_id",
          "type": "u64"
        },
        {
          "name": "team_size",
          "type": "u8"
        },
        {
          "name": "stake_lamports",
          "type": "u64"
        },
        {
          "name": "side",
          "type": "u8"
        }
      ]
    },
    {
      "name": "fulfill_randomness",
      "discriminator": [
        235,
        105,
        140,
        46,
        40,
        88,
        117,
        2
      ],
      "accounts": [
        {
          "name": "lobby",
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  108,
                  111,
                  98,
                  98,
                  121
                ]
              },
              {
                "kind": "account",
                "path": "lobby.creator",
                "account": "Lobby"
              },
              {
                "kind": "account",
                "path": "lobby.lobby_id",
                "account": "Lobby"
              }
            ]
          }
        },
        {
          "name": "creator",
          "writable": true
        },
        {
          "name": "active",
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  97,
                  99,
                  116,
                  105,
                  118,
                  101
                ]
              },
              {
                "kind": "account",
                "path": "lobby.creator",
                "account": "Lobby"
              }
            ]
          }
        },
        {
          "name": "config",
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  99,
                  111,
                  110,
                  102,
                  105,
                  103
                ]
              }
            ]
          }
        },
        {
          "name": "vrf",
          "writable": true
        },
        {
          "name": "switchboard_program",
          "address": "6sjKhUwzNRtFh6EmC32GwNRH7v7vCjfgeWpxYEcdvEBL"
        },
        {
          "name": "system_program",
          "address": "11111111111111111111111111111111"
        }
      ],
      "args": []
    },
    {
      "name": "init_config",
      "discriminator": [
        23,
        235,
        115,
        232,
        168,
        96,
        1,
        231
      ],
      "accounts": [
        {
          "name": "config",
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  99,
                  111,
                  110,
                  102,
                  105,
                  103
                ]
              }
            ]
          }
        },
        {
          "name": "payer",
          "writable": true,
          "signer": true
        },
        {
          "name": "system_program",
          "address": "11111111111111111111111111111111"
        }
      ],
      "args": [
        {
          "name": "admin",
          "type": "pubkey"
        }
      ]
    },
    {
      "name": "join_side",
      "discriminator": [
        72,
        81,
        137,
        98,
        213,
        63,
        154,
        117
      ],
      "accounts": [
        {
          "name": "lobby",
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  108,
                  111,
                  98,
                  98,
                  121
                ]
              },
              {
                "kind": "account",
                "path": "creator"
              },
              {
                "kind": "account",
                "path": "lobby.lobby_id",
                "account": "Lobby"
              }
            ]
          }
        },
        {
          "name": "creator",
          "relations": [
            "lobby"
          ]
        },
        {
          "name": "player",
          "writable": true,
          "signer": true
        },
        {
          "name": "active",
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  97,
                  99,
                  116,
                  105,
                  118,
                  101
                ]
              },
              {
                "kind": "account",
                "path": "lobby.creator",
                "account": "Lobby"
              }
            ]
          }
        },
        {
          "name": "config",
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  99,
                  111,
                  110,
                  102,
                  105,
                  103
                ]
              }
            ]
          }
        },
        {
          "name": "system_program",
          "address": "11111111111111111111111111111111"
        }
      ],
      "args": [
        {
          "name": "side",
          "type": "u8"
        }
      ]
    },
    {
      "name": "join_side_final",
      "discriminator": [
        145,
        130,
        102,
        65,
        104,
        78,
        171,
        113
      ],
      "accounts": [
        {
          "name": "lobby",
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  108,
                  111,
                  98,
                  98,
                  121
                ]
              },
              {
                "kind": "account",
                "path": "creator"
              },
              {
                "kind": "account",
                "path": "lobby.lobby_id",
                "account": "Lobby"
              }
            ]
          }
        },
        {
          "name": "creator",
          "relations": [
            "lobby"
          ]
        },
        {
          "name": "player",
          "writable": true,
          "signer": true
        },
        {
          "name": "active",
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  97,
                  99,
                  116,
                  105,
                  118,
                  101
                ]
              },
              {
                "kind": "account",
                "path": "lobby.creator",
                "account": "Lobby"
              }
            ]
          }
        },
        {
          "name": "config",
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  99,
                  111,
                  110,
                  102,
                  105,
                  103
                ]
              }
            ]
          }
        },
        {
          "name": "switchboard_program",
          "address": "6sjKhUwzNRtFh6EmC32GwNRH7v7vCjfgeWpxYEcdvEBL"
        },
        {
          "name": "vrf",
          "writable": true
        },
        {
          "name": "oracle_queue",
          "writable": true
        },
        {
          "name": "queue_authority"
        },
        {
          "name": "permission_account",
          "writable": true
        },
        {
          "name": "escrow_wallet",
          "writable": true
        },
        {
          "name": "payer_wallet",
          "writable": true
        },
        {
          "name": "payer_authority",
          "signer": true
        },
        {
          "name": "recent_blockhashes"
        },
        {
          "name": "switchboard_state"
        },
        {
          "name": "token_program",
          "address": "TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"
        },
        {
          "name": "associated_token_program",
          "address": "ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"
        },
        {
          "name": "system_program",
          "address": "11111111111111111111111111111111"
        }
      ],
      "args": [
        {
          "name": "side",
          "type": "u8"
        }
      ]
    },
    {
      "name": "refund",
      "discriminator": [
        2,
        96,
        183,
        251,
        63,
        208,
        46,
        46
      ],
      "accounts": [
        {
          "name": "lobby",
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  108,
                  111,
                  98,
                  98,
                  121
                ]
              },
              {
                "kind": "account",
                "path": "lobby.creator",
                "account": "Lobby"
              },
              {
                "kind": "account",
                "path": "lobby.lobby_id",
                "account": "Lobby"
              }
            ]
          }
        },
        {
          "name": "creator",
          "writable": true
        },
        {
          "name": "requester",
          "signer": true
        },
        {
          "name": "active",
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  97,
                  99,
                  116,
                  105,
                  118,
                  101
                ]
              },
              {
                "kind": "account",
                "path": "lobby.creator",
                "account": "Lobby"
              }
            ]
          }
        },
        {
          "name": "config",
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  99,
                  111,
                  110,
                  102,
                  105,
                  103
                ]
              }
            ]
          }
        },
        {
          "name": "system_program",
          "address": "11111111111111111111111111111111"
        }
      ],
      "args": []
    }
  ],
  "accounts": [
    {
      "name": "ActiveLobby",
      "discriminator": [
        32,
        130,
        43,
        176,
        36,
        236,
        20,
        114
      ]
    },
    {
      "name": "GlobalConfig",
      "discriminator": [
        149,
        8,
        156,
        202,
        160,
        252,
        176,
        217
      ]
    },
    {
      "name": "Lobby",
      "discriminator": [
        167,
        194,
        217,
        163,
        92,
        92,
        103,
        49
      ]
    },
    {
      "name": "OracleQueueAccountData",
      "discriminator": [
        164,
        207,
        200,
        51,
        199,
        113,
        35,
        109
      ]
    },
    {
      "name": "PermissionAccountData",
      "discriminator": [
        77,
        37,
        177,
        164,
        38,
        39,
        34,
        109
      ]
    }
  ],
  "events": [
    {
      "name": "LobbyCreated",
      "discriminator": [
        109,
        169,
        16,
        50,
        169,
        242,
        237,
        65
      ]
    },
    {
      "name": "LobbyRefunded",
      "discriminator": [
        37,
        99,
        34,
        76,
        175,
        241,
        3,
        174
      ]
    },
    {
      "name": "LobbyResolved",
      "discriminator": [
        155,
        179,
        219,
        168,
        63,
        242,
        104,
        137
      ]
    },
    {
      "name": "PlayerJoined",
      "discriminator": [
        39,
        144,
        49,
        106,
        108,
        210,
        183,
        38
      ]
    }
  ],
  "errors": [
    {
      "code": 6000,
      "name": "InvalidSide",
      "msg": "Invalid side (must be 0 or 1)"
    },
    {
      "code": 6001,
      "name": "LobbyNotOpen",
      "msg": "Lobby is not open"
    },
    {
      "code": 6002,
      "name": "LobbyNotOpenForJoin",
      "msg": "Lobby already pending/resolved/refunded"
    },
    {
      "code": 6003,
      "name": "SideFull",
      "msg": "Side is full"
    },
    {
      "code": 6004,
      "name": "AlreadyJoined",
      "msg": "Player already joined"
    },
    {
      "code": 6005,
      "name": "NotEnoughPlayers",
      "msg": "Not enough players"
    },
    {
      "code": 6006,
      "name": "Unauthorized",
      "msg": "Unauthorized"
    },
    {
      "code": 6007,
      "name": "StakeTooSmall",
      "msg": "Stake is below minimum"
    },
    {
      "code": 6008,
      "name": "TooSoonToRefund",
      "msg": "Too soon to refund"
    },
    {
      "code": 6009,
      "name": "AlreadyFinalized",
      "msg": "Already finalized"
    },
    {
      "code": 6010,
      "name": "BadRemainingAccounts",
      "msg": "Bad remaining accounts length"
    },
    {
      "code": 6011,
      "name": "InvalidTeamSize",
      "msg": "Invalid team size (allowed: 1, 2, 5)"
    },
    {
      "code": 6012,
      "name": "RemainingAccountsMismatch",
      "msg": "Remaining accounts mismatch with team lists"
    },
    {
      "code": 6013,
      "name": "WrongSwitchboardProgram",
      "msg": "Wrong Switchboard program id"
    },
    {
      "code": 6014,
      "name": "WrongVrfAccount",
      "msg": "VRF account does not match lobby"
    },
    {
      "code": 6015,
      "name": "WrongVrfAuthority",
      "msg": "VRF authority mismatch"
    },
    {
      "code": 6016,
      "name": "NotPending",
      "msg": "Lobby not pending"
    },
    {
      "code": 6017,
      "name": "MustUseFinalJoin",
      "msg": "Lobby is full - must use join_side_final instruction"
    }
  ],
  "types": [
    {
      "name": "ActiveLobby",
      "type": {
        "kind": "struct",
        "fields": [
          {
            "name": "bump",
            "type": "u8"
          },
          {
            "name": "creator",
            "type": "pubkey"
          },
          {
            "name": "lobby",
            "type": "pubkey"
          }
        ]
      }
    },
    {
      "name": "GlobalConfig",
      "type": {
        "kind": "struct",
        "fields": [
          {
            "name": "bump",
            "type": "u8"
          },
          {
            "name": "admin",
            "type": "pubkey"
          }
        ]
      }
    },
    {
      "name": "Lobby",
      "type": {
        "kind": "struct",
        "fields": [
          {
            "name": "bump",
            "type": "u8"
          },
          {
            "name": "lobby_id",
            "type": "u64"
          },
          {
            "name": "creator",
            "type": "pubkey"
          },
          {
            "name": "status",
            "type": {
              "defined": {
                "name": "LobbyStatus"
              }
            }
          },
          {
            "name": "team_size",
            "type": "u8"
          },
          {
            "name": "stake_lamports",
            "type": "u64"
          },
          {
            "name": "created_at",
            "type": "i64"
          },
          {
            "name": "finalized",
            "type": "bool"
          },
          {
            "name": "vrf",
            "type": "pubkey"
          },
          {
            "name": "team1",
            "type": {
              "vec": "pubkey"
            }
          },
          {
            "name": "team2",
            "type": {
              "vec": "pubkey"
            }
          }
        ]
      }
    },
    {
      "name": "LobbyCreated",
      "type": {
        "kind": "struct",
        "fields": [
          {
            "name": "lobby",
            "type": "pubkey"
          },
          {
            "name": "lobby_id",
            "type": "u64"
          },
          {
            "name": "creator",
            "type": "pubkey"
          },
          {
            "name": "stake_lamports",
            "type": "u64"
          },
          {
            "name": "team_size",
            "type": "u8"
          },
          {
            "name": "created_at",
            "type": "i64"
          }
        ]
      }
    },
    {
      "name": "LobbyRefunded",
      "type": {
        "kind": "struct",
        "fields": [
          {
            "name": "lobby",
            "type": "pubkey"
          },
          {
            "name": "refunded_count",
            "type": "u8"
          },
          {
            "name": "total_refunded",
            "type": "u64"
          }
        ]
      }
    },
    {
      "name": "LobbyResolved",
      "type": {
        "kind": "struct",
        "fields": [
          {
            "name": "lobby",
            "type": "pubkey"
          },
          {
            "name": "winner_side",
            "type": "u8"
          },
          {
            "name": "total_pot",
            "type": "u64"
          },
          {
            "name": "platform_fee",
            "type": "u64"
          },
          {
            "name": "payout_per_winner",
            "type": "u64"
          }
        ]
      }
    },
    {
      "name": "LobbyStatus",
      "type": {
        "kind": "enum",
        "variants": [
          {
            "name": "Open"
          },
          {
            "name": "Pending"
          },
          {
            "name": "Resolved"
          },
          {
            "name": "Refunded"
          }
        ]
      }
    },
    {
      "name": "OracleQueueAccountData",
      "serialization": "bytemuckunsafe",
      "repr": {
        "kind": "rust",
        "packed": true
      },
      "type": {
        "kind": "struct",
        "fields": [
          {
            "name": "name",
            "docs": [
              "Name of the queue to store on-chain."
            ],
            "type": {
              "array": [
                "u8",
                32
              ]
            }
          },
          {
            "name": "metadata",
            "docs": [
              "Metadata of the queue to store on-chain."
            ],
            "type": {
              "array": [
                "u8",
                64
              ]
            }
          },
          {
            "name": "authority",
            "docs": [
              "The account delegated as the authority for making account changes or assigning permissions targeted at the queue."
            ],
            "type": "pubkey"
          },
          {
            "name": "oracle_timeout",
            "docs": [
              "Interval when stale oracles will be removed if they fail to heartbeat."
            ],
            "type": "u32"
          },
          {
            "name": "reward",
            "docs": [
              "Rewards to provide oracles and round openers on this queue."
            ],
            "type": "u64"
          },
          {
            "name": "min_stake",
            "docs": [
              "The minimum amount of stake oracles must present to remain on the queue."
            ],
            "type": "u64"
          },
          {
            "name": "slashing_enabled",
            "docs": [
              "Whether slashing is enabled on this queue."
            ],
            "type": "bool"
          },
          {
            "name": "variance_tolerance_multiplier",
            "docs": [
              "The tolerated variance amount oracle results can have from the accepted round result before being slashed.",
              "slashBound = varianceToleranceMultiplier * stdDeviation Default: 2"
            ],
            "type": {
              "defined": {
                "name": "SwitchboardDecimal"
              }
            }
          },
          {
            "name": "feed_probation_period",
            "docs": [
              "Number of update rounds new feeds are on probation for.",
              "If a feed returns 429s within probation period, auto disable permissions."
            ],
            "type": "u32"
          },
          {
            "name": "curr_idx",
            "docs": [
              "Current index of the oracle rotation."
            ],
            "type": "u32"
          },
          {
            "name": "size",
            "docs": [
              "Current number of oracles on a queue."
            ],
            "type": "u32"
          },
          {
            "name": "gc_idx",
            "docs": [
              "Garbage collection index."
            ],
            "type": "u32"
          },
          {
            "name": "consecutive_feed_failure_limit",
            "docs": [
              "Consecutive failure limit for a feed before feed permission is revoked."
            ],
            "type": "u64"
          },
          {
            "name": "consecutive_oracle_failure_limit",
            "docs": [
              "Consecutive failure limit for an oracle before oracle permission is revoked."
            ],
            "type": "u64"
          },
          {
            "name": "unpermissioned_feeds_enabled",
            "docs": [
              "Enabling this setting means data feeds do not need explicit permission to join the queue and request new values from its oracles."
            ],
            "type": "bool"
          },
          {
            "name": "unpermissioned_vrf_enabled",
            "docs": [
              "Enabling this setting means VRF accounts do not need explicit permission to join the queue and request new values from its oracles."
            ],
            "type": "bool"
          },
          {
            "name": "curator_reward_cut",
            "docs": [
              "TODO: Revenue percentage rewarded to job curators overall."
            ],
            "type": {
              "defined": {
                "name": "SwitchboardDecimal"
              }
            }
          },
          {
            "name": "lock_lease_funding",
            "docs": [
              "Prevent new leases from being funded n this queue.",
              "Useful to turn down a queue for migrations, since authority is always immutable."
            ],
            "type": "bool"
          },
          {
            "name": "mint",
            "docs": [
              "Token mint used for the oracle queue rewards and slashing."
            ],
            "type": "pubkey"
          },
          {
            "name": "enable_buffer_relayers",
            "docs": [
              "Whether oracles are permitted to fulfill buffer relayer update request."
            ],
            "type": "bool"
          },
          {
            "name": "_ebuf",
            "docs": [
              "Reserved for future info."
            ],
            "type": {
              "array": [
                "u8",
                968
              ]
            }
          },
          {
            "name": "max_size",
            "docs": [
              "Maximum number of oracles a queue can support."
            ],
            "type": "u32"
          },
          {
            "name": "data_buffer",
            "docs": [
              "The public key of the OracleQueueBuffer account holding a collection of Oracle pubkeys that haver successfully heartbeated before the queues `oracleTimeout`."
            ],
            "type": "pubkey"
          }
        ]
      }
    },
    {
      "name": "PermissionAccountData",
      "serialization": "bytemuckunsafe",
      "repr": {
        "kind": "rust",
        "packed": true
      },
      "type": {
        "kind": "struct",
        "fields": [
          {
            "name": "authority",
            "docs": [
              "The authority that is allowed to set permissions for this account."
            ],
            "type": "pubkey"
          },
          {
            "name": "permissions",
            "docs": [
              "The SwitchboardPermission enumeration assigned by the granter to the grantee."
            ],
            "type": "u32"
          },
          {
            "name": "granter",
            "docs": [
              "Public key of account that is granting permissions to use its resources."
            ],
            "type": "pubkey"
          },
          {
            "name": "grantee",
            "docs": [
              "Public key of account that is being assigned permissions to use a granters resources."
            ],
            "type": "pubkey"
          },
          {
            "name": "expiration",
            "docs": [
              "unused currently. may want permission PDA per permission for",
              "unique expiration periods, BUT currently only one permission",
              "per account makes sense for the infra. Dont over engineer."
            ],
            "type": "i64"
          },
          {
            "name": "bump",
            "docs": [
              "The PDA bump to derive the pubkey."
            ],
            "type": "u8"
          },
          {
            "name": "_ebuf",
            "docs": [
              "Reserved for future info."
            ],
            "type": {
              "array": [
                "u8",
                255
              ]
            }
          }
        ]
      }
    },
    {
      "name": "PlayerJoined",
      "type": {
        "kind": "struct",
        "fields": [
          {
            "name": "lobby",
            "type": "pubkey"
          },
          {
            "name": "player",
            "type": "pubkey"
          },
          {
            "name": "side",
            "type": "u8"
          },
          {
            "name": "team1_count",
            "type": "u8"
          },
          {
            "name": "team2_count",
            "type": "u8"
          },
          {
            "name": "is_full",
            "type": "bool"
          }
        ]
      }
    },
    {
      "name": "SwitchboardDecimal",
      "serialization": "bytemuckunsafe",
      "repr": {
        "kind": "rust",
        "packed": true
      },
      "type": {
        "kind": "struct",
        "fields": [
          {
            "name": "mantissa",
            "docs": [
              "The part of a floating-point number that represents the significant digits of that number, and that is multiplied by the base, 10, raised to the power of scale to give the actual value of the number."
            ],
            "type": "i128"
          },
          {
            "name": "scale",
            "docs": [
              "The number of decimal places to move to the left to yield the actual value."
            ],
            "type": "u32"
          }
        ]
      }
    }
  ]
}